;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:person-model', location = '/static/bitbucket/internal/model/person.js' */
define("bitbucket/internal/model/person",["module","exports","backbone-brace"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);a.default=b.default.Model.extend({namedAttributes:{emailAddress:"string",name:"string"},idAttribute:"name",initialize:function(){null==this.namedAttributes.id&&this.setId(this.attributes[this.idAttribute])}});c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:stash-user-model', location = '/static/bitbucket/internal/model/stash-user.js' */
define("bitbucket/internal/model/stash-user",["module","exports","bitbucket/internal/model/person"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b).default.extend({namedAttributes:{active:"boolean",avatarUrl:"string",displayName:"string",id:"number",isAdmin:"boolean",link:Object,links:Object,type:"string",slug:"string"}});a.default=b;c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:project-model', location = '/static/bitbucket/internal/model/project.js' */
define("bitbucket/internal/model/project",["module","exports","backbone-brace","bitbucket/internal/model/stash-user"],function(e,a,b,c){Object.defineProperty(a,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);c=babelHelpers.interopRequireDefault(c);var d=b.default.Model.extend({namedAttributes:{id:"number",name:"string",key:"string",description:"string",type:"string",owner:c.default,avatarUrl:"string",link:Object,links:Object,public:"boolean"},isEqual:function(a){return!!(a&&a instanceof
d&&this.id===a.id)}},{projectType:{NORMAL:"NORMAL",PERSONAL:"PERSONAL"}});a.default=d;e.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-model', location = '/static/bitbucket/internal/model/repository.js' */
define("bitbucket/internal/model/repository",["module","exports","backbone-brace","bitbucket/internal/model/project"],function(e,c,a,d){Object.defineProperty(c,"__esModule",{value:!0});a=babelHelpers.interopRequireDefault(a);d=babelHelpers.interopRequireDefault(d);var b=a.default.Model.extend({namedAttributes:{id:"number",name:"string",slug:"string",project:d.default,public:"boolean",scmId:"string",state:"string",statusMessage:"string",forkable:"boolean",cloneUrl:"string",link:Object,links:Object,
origin:null},isEqual:function(a){return!!(a&&a instanceof b&&this.id===a.id)}});a.default.Mixins.applyMixin(b,{namedAttributes:{origin:b}});c.default=b;e.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:revision-reference', location = '/static/bitbucket/internal/model/revision-reference.js' */
define("bitbucket/internal/model/revision-reference","module exports aui backbone-brace lodash bitbucket/internal/model/page-state bitbucket/internal/model/repository".split(" "),function(k,e,c,f,h,l,m){Object.defineProperty(e,"__esModule",{value:!0});c=babelHelpers.interopRequireDefault(c);f=babelHelpers.interopRequireDefault(f);var n=babelHelpers.interopRequireDefault(h),p=babelHelpers.interopRequireDefault(l);h=babelHelpers.interopRequireDefault(m);var b={TAG:{id:"tag",name:"Tag"},
BRANCH:{id:"branch",name:"Branch"},COMMIT:{id:"commit",name:"Commit"},isTag:function(a){return a&&(a===b.TAG.id||a.id===b.TAG.id||"TAG"===a)},isBranch:function(a){return a&&(a===b.BRANCH.id||a.id===b.BRANCH.id||"BRANCH"===a)},isCommit:function(a){return a&&(a===b.COMMIT.id||a.id===b.COMMIT.id)},from:function(a){if(b.isTag(a))return b.TAG;if(b.isBranch(a))return b.BRANCH;if(b.isCommit(a))return b.COMMIT;
window.console&&console.error("Unknown RevisionReference type "+a);return null}},d=f.default.Model.extend({namedAttributes:{id:"string",displayId:"string",type:b.from,isDefault:"boolean",latestCommit:"string",hash:"string",repository:h.default},initialize:function(){this.getDisplayId()||this.setDisplayId(this.getId());this.getIsDefault()||this.setIsDefault(!1);this.getRepository()||this.setRepository(p.default.getRepository())},getTypeName:function(){return this.getType().name},isDefault:function(){return this.get("isDefault")||
!1},isTag:function(){return b.isTag(this.getType())},isBranch:function(){return b.isBranch(this.getType())},isCommit:function(){return b.isCommit(this.getType())},isEqual:function(a){return a instanceof d&&this.getId()===a.getId()&&this.getType().id===a.getType().id&&(this.getRepository()&&a.getRepository()?this.getRepository().isEqual(a.getRepository()):!0)}},{fromCommit:function(a){return new d({id:a.id,displayId:a.displayId,type:b.COMMIT,isDefault:!1})},hydrateRefFromId:function(a,b,c,e){if(!n.default.isString(a))return null;
var g=/^refs\/(heads|tags)\/(.+)/,f=a.replace(g,"$2");c||(c=d.type.BRANCH,(g=a.match(g))&&"tags"===g[1]&&(c=d.type.TAG));return new d({id:a,displayId:f,type:c,isDefault:b,latestCommit:e})},hydrateDeprecated:function(a){return a.__json?new d(a.__json):new d(a.toJSON())}});d.type=b;e.default=d;k.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:revision', location = '/static/bitbucket/internal/model/revision.js' */
define("bitbucket/internal/model/revision",["module","exports","backbone-brace","bitbucket/internal/model/repository","bitbucket/internal/model/revision-reference"],function(f,c,b,d,a){Object.defineProperty(c,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);d=babelHelpers.interopRequireDefault(d);var e=babelHelpers.interopRequireDefault(a);a=b.default.Model.extend({namedAttributes:{id:null,displayId:null,repository:d.default,message:null,author:null,authorTimestamp:null,committer:null,
committerTimestamp:null,parents:null,properties:null},hasParents:function(){return this.getParents()&&this.getParents().length},getRevisionReference:function(){return new e.default({id:this.getId(),displayId:this.getDisplayId(),type:e.default.type.COMMIT,repository:this.getRepository(),latestCommit:this.getId()})}});b.default.Mixins.applyMixin(a,{namedAttributes:{parents:[a]}});c.default=a;f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:participant-model', location = '/static/bitbucket/internal/model/participant.js' */
define("bitbucket/internal/model/participant",["module","exports","backbone-brace","bitbucket/internal/model/stash-user"],function(d,a,b,c){Object.defineProperty(a,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);c=babelHelpers.interopRequireDefault(c);a.default=b.default.Model.extend({namedAttributes:{approved:"boolean",lastReviewedCommit:"string",role:"string",user:c.default,status:"string"}});d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:participant-model', location = '/static/bitbucket/internal/model/participant-collection.js' */
define("bitbucket/internal/model/participant-collection",["module","exports","backbone-brace","lodash","bitbucket/internal/model/participant"],function(g,c,d,e,h){Object.defineProperty(c,"__esModule",{value:!0});d=babelHelpers.interopRequireDefault(d);var k=babelHelpers.interopRequireDefault(e);e=babelHelpers.interopRequireDefault(h);var f={APPROVED:1,NEEDS_WORK:2,UNAPPROVED:3};c.default=d.default.Collection.extend({model:e.default,comparator:function(a,b){return f[a.getStatus()]-f[b.getStatus()]||
a.getUser().getDisplayName().localeCompare(b.getUser().getDisplayName())},findByUser:function(a){return k.default.find(this.models,function(b){return b.getUser().getName()===a.getName()})}});g.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-model', location = '/static/bitbucket/internal/model/pull-request.js' */
define("bitbucket/internal/model/pull-request","module exports backbone-brace bitbucket/internal/model/participant bitbucket/internal/model/participant-collection bitbucket/internal/model/revision-reference".split(" "),function(f,c,d,e,a,b){Object.defineProperty(c,"__esModule",{value:!0});d=babelHelpers.interopRequireDefault(d);e=babelHelpers.interopRequireDefault(e);a=babelHelpers.interopRequireDefault(a);b=babelHelpers.interopRequireDefault(b);c.default=d.default.Model.extend({namedAttributes:{id:null,
link:null,links:Object,fromRef:b.default,toRef:b.default,author:e.default,reviewers:a.default,participants:a.default,state:null,open:"boolean",closed:"boolean",locked:"boolean",title:null,createdDate:Date,updatedDate:Date,closedDate:Date,version:null,description:null,descriptionAsHtml:null,attributes:null,properties:null},addParticipant:function(a){this.getParticipants().findByUser(a.getUser())||this.getParticipants().add(a)}},{state:{OPEN:"OPEN",MERGED:"MERGED",DECLINED:"DECLINED"}});f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-range', location = '/static/bitbucket/internal/model/commit-range.js' */
define("bitbucket/internal/model/commit-range","module exports backbone-brace bitbucket/internal/model/diff-type bitbucket/internal/model/pull-request bitbucket/internal/model/revision".split(" "),function(g,d,e,b,f,h){function k(a){var b=a.getSinceRevision()?a.getSinceRevision().getId():"ROOT";if(a.getPullRequest()&&b===a.getPullRequest().getToRef().getLatestCommit())return l;a=a.getUntilRevision().hasParents()&&a.getUntilRevision().getParents()[0];return(a?a.getId():"ROOT")===b?m:n}Object.defineProperty(d,
"__esModule",{value:!0});e=babelHelpers.interopRequireDefault(e);b=babelHelpers.interopRequireDefault(b);f=babelHelpers.interopRequireDefault(f);var c=babelHelpers.interopRequireDefault(h),l=b.default.EFFECTIVE,m=b.default.COMMIT,n=b.default.RANGE;d.default=e.default.Model.extend({namedAttributes:{diffType:"string",pullRequest:f.default,untilRevision:c.default,sinceRevision:c.default},initialize:function(){if(!this.getUntilRevision())if(this.getPullRequest()){var a=this.getPullRequest().getFromRef();
this.setUntilRevision(a&&new c.default({id:a.getLatestCommit()}));a=this.getPullRequest().getToRef();this.setSinceRevision(a&&new c.default({id:a.getLatestCommit()}))}else throw Error("Commits range requires either a pull request or revision(s)");this.getSinceRevision()&&"ROOT"===this.getSinceRevision().getId()&&this.setSinceRevision(void 0);this.setId(this.getPullRequest()?this.getPullRequest().getId():this.getUntilRevision().getId()+"_"+(this.getSinceRevision()?this.getSinceRevision().getId():"ROOT"));
this.getDiffType()||this.setDiffType(k(this))}});g.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:breadcrumbs', location = '/static/bitbucket/internal/widget/breadcrumbs/breadcrumbs.js' */
define("bitbucket/internal/widget/breadcrumbs/breadcrumbs","module exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/model/page-state bitbucket/internal/util/dom-event bitbucket/internal/util/events".split(" "),function(l,d,e,m,n,p,q,r){function f(b){this.$container=(0,g.default)(b);var a=this;this.$container.on("click","a",function(b){t.default.openInSameTab(b)&&(u.default.trigger("bitbucket.internal.widget.breadcrumbs.urlChanged",a,(0,g.default)(this).attr("href")),b.preventDefault())})}
function v(b,a){var c=[];a=w.default.map(a,function(a){c=c.slice(0);c.push(a);return{text:a,url:h(c,b)}});a.unshift({text:x.default.getRepository().getName(),url:h([],b)});return a}Object.defineProperty(d,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(e),w=babelHelpers.interopRequireDefault(m);e=babelHelpers.interopRequireDefault(n);var x=babelHelpers.interopRequireDefault(p),t=babelHelpers.interopRequireDefault(q),u=babelHelpers.interopRequireDefault(r),k=e.default.currentRepo().browse(),
h=function(b,a){return a.isDefault()?k.path(b).build():k.path(b).at(a.getId()).build()};f.prototype.update=function(b,a,c){this.$container.empty().append(bitbucket.internal.widget.breadcrumbs.crumbs({pathComponents:v(b,a.getComponents()),trailingSlash:c}))};d.default=f;l.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:breadcrumbs', location = '/static/bitbucket/internal/widget/breadcrumbs/breadcrumbs.soy' */
// This file was automatically generated from breadcrumbs.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.breadcrumbs.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.breadcrumbs == 'undefined') { bitbucket.internal.widget.breadcrumbs = {}; }


bitbucket.internal.widget.breadcrumbs.back = function(opt_data, opt_ignored) {
  return '<li><a id="' + soy.$$escapeHtml(opt_data.id) + '" class="breadcrumbs" href="' + soy.$$escapeHtml(opt_data.href) + '">' + aui.icons.icon({icon: 'back-page', useIconFont: true}) + soy.$$escapeHtml(opt_data.text) + '</a></li>' + ((opt_data.crumb) ? '<li>' + soy.$$escapeHtml(opt_data.crumb) + ((opt_data.state) ? bitbucket.internal.widget.lozenge.pullRequestState(opt_data) : '') + '</li>' : '');
};
if (goog.DEBUG) {
  bitbucket.internal.widget.breadcrumbs.back.soyTemplateName = 'bitbucket.internal.widget.breadcrumbs.back';
}


bitbucket.internal.widget.breadcrumbs.crumbs = function(opt_data, opt_ignored) {
  var output = '';
  var pathLength__soy23 = opt_data.pathComponents.length;
  var collapsibleSection__soy24 = pathLength__soy23 > 1;
  var pathComponentList25 = opt_data.pathComponents;
  var pathComponentListLen25 = pathComponentList25.length;
  for (var pathComponentIndex25 = 0; pathComponentIndex25 < pathComponentListLen25; pathComponentIndex25++) {
    var pathComponentData25 = pathComponentList25[pathComponentIndex25];
    output += ((collapsibleSection__soy24 && pathComponentIndex25 == 0) ? '<span class="file-path">' : '') + bitbucket.internal.widget.breadcrumbs.breadcrumbFragment({isLast: pathComponentIndex25 == pathComponentListLen25 - 1, url: pathComponentIndex25 == pathComponentListLen25 - 1 ? opt_data.primaryLink : pathComponentData25.url, text: pathComponentData25.text}) + ((collapsibleSection__soy24 && pathLength__soy23 - pathComponentIndex25 == 2) ? '</span>' : '') + ((! (pathComponentIndex25 == pathComponentListLen25 - 1) || opt_data.trailingSlash) ? bitbucket.internal.widget.breadcrumbs.sep(null) : '');
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.breadcrumbs.crumbs.soyTemplateName = 'bitbucket.internal.widget.breadcrumbs.crumbs';
}


bitbucket.internal.widget.breadcrumbs.breadcrumbs = function(opt_data, opt_ignored) {
  var output = '';
  var fullPath__soy41 = '';
  var pathComponentList42 = opt_data.pathComponents;
  var pathComponentListLen42 = pathComponentList42.length;
  for (var pathComponentIndex42 = 0; pathComponentIndex42 < pathComponentListLen42; pathComponentIndex42++) {
    var pathComponentData42 = pathComponentList42[pathComponentIndex42];
    fullPath__soy41 += (! (pathComponentIndex42 == pathComponentListLen42 - 1) || opt_data.trailingSlash) ? soy.$$escapeHtml(pathComponentData42.text + ' / ') : soy.$$escapeHtml(pathComponentData42.text);
  }
  output += '<div class="breadcrumbs" ' + ((opt_data.showTooltip) ? 'title="' + soy.$$escapeHtml(fullPath__soy41) + '"' : '') + '>' + bitbucket.internal.widget.breadcrumbs.crumbs(opt_data) + '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.breadcrumbs.breadcrumbs.soyTemplateName = 'bitbucket.internal.widget.breadcrumbs.breadcrumbs';
}


bitbucket.internal.widget.breadcrumbs.breadcrumbFragment = function(opt_data, opt_ignored) {
  return '' + ((opt_data.url) ? '<a' + ((opt_data.isLast) ? ' class="stub"' : '') + ' href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml(opt_data.text) + '</a>' : '<span' + ((opt_data.isLast) ? ' class="stub"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</span>');
};
if (goog.DEBUG) {
  bitbucket.internal.widget.breadcrumbs.breadcrumbFragment.soyTemplateName = 'bitbucket.internal.widget.breadcrumbs.breadcrumbFragment';
}


bitbucket.internal.widget.breadcrumbs.sep = function(opt_data, opt_ignored) {
  return '<span class="sep">/</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.breadcrumbs.sep.soyTemplateName = 'bitbucket.internal.widget.breadcrumbs.sep';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror-raw', location = '/static/lib/CodeMirror/lib/codemirror.js' */
(function(Fa,ca){"object"===typeof exports&&"undefined"!==typeof module?module.exports=ca():"function"===typeof define&&define.amd?define(ca):Fa.CodeMirror=ca()})(this,function(){function Fa(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function ca(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function Y(a,b){return ca(a).appendChild(b)}function t(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)a.appendChild(document.createTextNode(b));
else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function ab(a,b,c,d){a=t(a,b,c,d);a.setAttribute("role","presentation");return a}function wa(a,b){3==b.nodeType&&(b=b.parentNode);if(a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)}function qa(){try{var a=document.activeElement}catch(b){a=document.body||null}for(;a&&a.shadowRoot&&a.shadowRoot.activeElement;)a=a.shadowRoot.activeElement;return a}function Ga(a,b){var c=a.className;Fa(b).test(c)||
(a.className+=(c?" ":"")+b)}function Lc(a,b){a=a.split(" ");for(var c=0;c<a.length;c++)a[c]&&!Fa(a[c]).test(b)&&(b+=" "+a[c]);return b}function Mc(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Ha(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function da(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var f=a.indexOf("\t",d);if(0>f||f>=b)return e+
(b-d);e+=f-d;e+=c-e%c;d=f+1}}function N(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function Nc(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);e+=f-d;e+=c-e%c;d=f+1;if(e>=b)return d}}function Oc(a){for(;fc.length<=a;)fc.push(y(fc)+" ");return fc[a]}function y(a){return a[a.length-1]}function gc(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function cg(a,b,c){for(var d=0,e=c(b);d<a.length&&
c(a[d])<=e;)d++;a.splice(d,0,b)}function Sd(){}function Td(a,b){Object.create?a=Object.create(a):(Sd.prototype=a,a=new Sd);b&&Ha(b,a);return a}function Pc(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||dg.test(a))}function hc(a,b){return b?-1<b.source.indexOf("\\w")&&Pc(a)?!0:b.test(a):Pc(a)}function Ud(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function Qc(a){return 768<=a.charCodeAt(0)&&eg.test(a)}function Vd(a,b,c){for(;(0>c?0<b:b<a.length)&&Qc(a.charAt(b));)b+=
c;return b}function ic(a,b,c){for(;;){if(1>=Math.abs(b-c))return a(b)?b:c;var d=Math.floor((b+c)/2);a(d)?c=d:b=d}}function fg(a,b,c){this.input=c;this.scrollbarFiller=t("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=t("div",null,"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content","true");this.lineDiv=ab("div",null,"CodeMirror-code");this.selectionDiv=t("div",null,null,"position: relative; z-index: 1");
this.cursorDiv=t("div",null,"CodeMirror-cursors");this.measure=t("div",null,"CodeMirror-measure");this.lineMeasure=t("div",null,"CodeMirror-measure");this.lineSpace=ab("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var d=ab("div",[this.lineSpace],"CodeMirror-lines");this.mover=t("div",[d],null,"position: relative");this.sizer=t("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=t("div",null,null,
"position: absolute; height: 30px; width: 1px;");this.gutters=t("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=t("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=t("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");C&&8>A&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);Q||xa&&sb||(this.scroller.draggable=!0);a&&(a.appendChild?a.appendChild(this.wrapper):a(this.wrapper));
this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=
!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;c.init(this)}function u(a,b){b-=a.first;if(0>b||b>=a.size)throw Error("There is no line "+(b+a.first)+" in the document.");for(;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function Ia(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));
d.push(a);++e});return d}function Rc(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function ka(a,b){if(b-=a.height)for(;a;a=a.parent)a.height+=b}function D(a){if(null==a.parent)return null;var b=a.parent;a=N(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function Ja(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f;c+=e.chunkSize()}return c}while(!a.lines);
for(d=0;d<a.lines.length;++d){e=a.lines[d].height;if(b<e)break;b-=e}return c+d}function tb(a,b){return b>=a.first&&b<a.first+a.size}function Sc(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function r(a,b,c){void 0===c&&(c=null);if(!(this instanceof r))return new r(a,b,c);this.line=a;this.ch=b;this.sticky=c}function z(a,b){return a.line-b.line||a.ch-b.ch}function Tc(a,b){return a.sticky==b.sticky&&0==z(a,b)}function Uc(a){return r(a.line,a.ch)}function jc(a,b){return 0>z(a,b)?b:a}
function kc(a,b){return 0>z(a,b)?a:b}function w(a,b){if(b.line<a.first)return r(a.first,0);var c=a.first+a.size-1;if(b.line>c)return r(c,u(a,c).text.length);a=u(a,b.line).text.length;c=b.ch;b=null==c||c>a?r(b.line,a):0>c?r(b.line,0):b;return b}function Wd(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=w(a,b[d]);return c}function lc(a,b,c){this.marker=a;this.from=b;this.to=c}function ub(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Vc(a,b){if(b.full)return null;var c=
tb(a,b.from.line)&&u(a,b.from.line).markedSpans,d=tb(a,b.to.line)&&u(a,b.to.line).markedSpans;if(!c&&!d)return null;a=b.from.ch;var e=b.to.ch,f=0==z(b.from,b.to),g;if(c)for(var h=0;h<c.length;++h){var k=c[h],l=k.marker;if(null==k.from||(l.inclusiveLeft?k.from<=a:k.from<a)||!(k.from!=a||"bookmark"!=l.type||f&&k.marker.insertLeft)){var m=null==k.to||(l.inclusiveRight?k.to>=a:k.to>a);(g||(g=[])).push(new lc(l,k.from,m?null:k.to))}}c=g;var p;if(d)for(g=0;g<d.length;++g)if(h=d[g],k=h.marker,null==h.to||
(k.inclusiveRight?h.to>=e:h.to>e)||h.from==e&&"bookmark"==k.type&&(!f||h.marker.insertLeft))l=null==h.from||(k.inclusiveLeft?h.from<=e:h.from<e),(p||(p=[])).push(new lc(k,l?null:h.from-e,null==h.to?null:h.to-e));d=1==b.text.length;e=y(b.text).length+(d?a:0);if(c)for(f=0;f<c.length;++f)if(g=c[f],null==g.to)(h=ub(p,g.marker),h)?d&&(g.to=null==h.to?null:h.to+e):g.to=a;if(p)for(a=0;a<p.length;++a)f=p[a],null!=f.to&&(f.to+=e),null==f.from?ub(c,f.marker)||(f.from=e,d&&(c||(c=[])).push(f)):(f.from+=e,d&&
(c||(c=[])).push(f));c&&(c=Xd(c));p&&p!=c&&(p=Xd(p));a=[c];if(!d){b=b.text.length-2;var n;if(0<b&&c)for(d=0;d<c.length;++d)null==c[d].to&&(n||(n=[])).push(new lc(c[d].marker,null,null));for(c=0;c<b;++c)a.push(n);a.push(p)}return a}function Xd(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function gg(a,b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=
a.markedSpans[b].marker;!c.readOnly||d&&-1!=N(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(0),f=0;f<a.length;++f){var g=a[f];if(!(0>z(g.to,e.from)||0<z(g.from,e.to))){var h=[f,1],k=z(g.from,e.from),l=z(g.to,e.to);(0>k||!c.inclusiveLeft&&!k)&&h.push({from:g.from,to:e.from});(0<l||!c.inclusiveRight&&!l)&&h.push({from:e.to,to:g.to});a.splice.apply(a,h);f+=h.length-3}}}return a}function Yd(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);
a.markedSpans=null}}function Zd(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function $d(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;c=a.find();var d=b.find(),e=z(c.from,d.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=z(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function Ka(a,b){a=ya&&a.markedSpans;if(a)for(var c,d=0;d<a.length;++d)if(c=a[d],c.marker.collapsed&&null==(b?c.from:c.to)&&(!e||0>$d(e,c.marker)))var e=
c.marker;return e}function ae(a,b,c,d,e){a=u(a,b);if(a=ya&&a.markedSpans)for(b=0;b<a.length;++b){var f=a[b];if(f.marker.collapsed){var g=f.marker.find(0),h=z(g.from,c)||(f.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),k=z(g.to,d)||(f.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=h&&0>=k||0>=h&&0<=k)&&(0>=h&&(f.marker.inclusiveRight&&e.inclusiveLeft?0<=z(g.to,c):0<z(g.to,c))||0<=h&&(f.marker.inclusiveRight&&e.inclusiveLeft?0>=z(g.from,d):0>z(g.from,d))))return!0}}}function la(a){for(var b;b=
Ka(a,!0);)a=b.find(-1,!0).line;return a}function Wc(a,b){a=u(a,b);var c=la(a);return a==c?b:D(c)}function be(a,b){if(b>a.lastLine())return b;var c=u(a,b);if(!La(a,c))return b;for(;a=Ka(c,!1);)c=a.find(1,!0).line;return D(c)+1}function La(a,b){var c=ya&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&Xc(a,b,d)))return!0}function Xc(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),Xc(a,b.line,ub(b.line.markedSpans,
c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&Xc(a,b,d))return!0}function ma(a){a=la(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;else b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=0;d<a.children.length&&(e=a.children[d],e!=c);++d)b+=e.height;
return b}function mc(a){if(0==a.height)return 0;for(var b=a.text.length,c,d=a;c=Ka(d,!0);)c=c.find(0,!0),d=c.from.line,b+=c.from.ch-c.to.ch;for(d=a;c=Ka(d,!1);)a=c.find(0,!0),b-=d.text.length-a.from.ch,d=a.to.line,b+=d.text.length-a.to.ch;return b}function Yc(a){var b=a.display;a=a.doc;b.maxLine=u(a,a.first);b.maxLineLength=mc(b.maxLine);b.maxLineChanged=!0;a.iter(function(a){var d=mc(a);d>b.maxLineLength&&(b.maxLineLength=d,b.maxLine=a)})}function hg(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=
!1,f=0;f<a.length;++f){var g=a[f];if(g.from<c&&g.to>b||b==c&&g.to==b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function Zc(a,b,c){var d;vb=null;for(var e=0;e<a.length;++e){var f=a[e];if(f.from<b&&f.to>b)return e;f.to==b&&(f.from!=f.to&&"before"==c?d=e:vb=e);f.from==b&&(f.from!=f.to&&"before"!=c?d=e:vb=e)}return null!=d?d:vb}function za(a,b){var c=a.order;null==c&&(c=a.order=ig(a.text,b));return c}function $c(a,b,c){b=Vd(a.text,b+c,c);return 0>b||b>a.text.length?
null:b}function ad(a,b,c){a=$c(a,b.ch,c);return null==a?null:new r(b.line,a,0>c?"after":"before")}function bd(a,b,c,d,e){if(a&&(a=za(c,b.doc.direction))){a=0>e?y(a):a[0];var f=0>e==(1==a.level)?"after":"before";if(0<a.level){var g=bb(b,c);var h=0>e?c.text.length-1:0;var k=ra(b,g,h).top;h=ic(function(a){return ra(b,g,a).top==k},0>e==(1==a.level)?a.from:a.to-1,h);"before"==f&&(h=$c(c,h,1))}else h=0>e?a.to:a.from;return new r(d,h,f)}return new r(d,0>e?c.text.length:0,0>e?"before":"after")}function ce(a,
b,c,d){var e=za(b,a.doc.direction);if(!e)return ad(b,c,d);c.ch>=b.text.length?(c.ch=b.text.length,c.sticky="before"):0>=c.ch&&(c.ch=0,c.sticky="after");var f=Zc(e,c.ch,c.sticky),g=e[f];if("ltr"==a.doc.direction&&0==g.level%2&&(0<d?g.to>c.ch:g.from<c.ch))return ad(b,c,d);var h=function(a,d){return $c(b,a instanceof r?a.ch:a,d)},k,l=function(d){if(!a.options.lineWrapping)return{begin:0,end:b.text.length};var c=k=k||bb(a,b);d=Ma(a,b,ra(a,c,d),"line").top;return de(a,b,c,d)},m=l("before"==c.sticky?h(c,
-1):c.ch);if("rtl"==a.doc.direction||1==g.level){var p=1==g.level==0>d,n=h(c,p?1:-1);if(null!=n&&(p?n<=g.to&&n<=m.end:n>=g.from&&n>=m.begin))return new r(c.line,n,p?"before":"after")}g=function(a,b,d){for(var f=function(a,b){return b?new r(c.line,h(a,1),"before"):new r(c.line,a,"after")};0<=a&&a<e.length;a+=b){var g=e[a],k=0<b==(1!=g.level),l=k?d.begin:h(d.end,-1);if(g.from<=l&&l<g.to)return f(l,k);l=k?g.from:h(g.to,-1);if(d.begin<=l&&l<d.end)return f(l,k)}};if(f=g(f+d,d,m))return f;m=0<d?m.end:h(m.begin,
-1);return null==m||0<d&&m==b.text.length||!(f=g(0<d?0:e.length-1,d,l(m)))?null:f}function Z(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=(a=a._handlers)&&a[b];d&&(c=N(d,c),-1<c&&(a[b]=d.slice(0,c).concat(d.slice(c+1))))}}function G(a,b){var c=a._handlers&&a._handlers[b]||nc;if(c.length)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function K(a,b,c){"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=
!0}});G(a,c||b.type,a,b);return cd(b)||b.codemirrorIgnore}function ee(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c)-1==N(a,b[c])&&a.push(b[c])}}function ea(a,b){return 0<(a._handlers&&a._handlers[b]||nc).length}function cb(a){a.prototype.on=function(a,c){v(this,a,c)};a.prototype.off=function(a,c){Z(this,a,c)}}function R(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function fe(a){a.stopPropagation?
a.stopPropagation():a.cancelBubble=!0}function cd(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function wb(a){R(a);fe(a)}function ge(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));fa&&a.ctrlKey&&1==b&&(b=3);return b}function jg(a){if(null==dd){var b=t("span","\u200b");Y(a,t("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(dd=1>=b.offsetWidth&&2<b.offsetHeight&&!(C&&8>A))}a=dd?t("span","\u200b"):t("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");
a.setAttribute("cm-text","");return a}function kg(a,b){2<arguments.length&&(b.dependencies=Array.prototype.slice.call(arguments,2));ed[a]=b}function oc(a){if("string"==typeof a&&db.hasOwnProperty(a))a=db[a];else if(a&&"string"==typeof a.name&&db.hasOwnProperty(a.name)){var b=db[a.name];"string"==typeof b&&(b={name:b});a=Td(b,a);a.name=b.name}else{if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return oc("application/xml");if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return oc("application/json")}return"string"==
typeof a?{name:a}:a||{name:"null"}}function fd(a,b){b=oc(b);var c=ed[b.name];if(!c)return fd(a,"text/plain");a=c(a,b);if(eb.hasOwnProperty(b.name)){c=eb[b.name];for(var d in c)c.hasOwnProperty(d)&&(a.hasOwnProperty(d)&&(a["_"+d]=a[d]),a[d]=c[d])}a.name=b.name;b.helperType&&(a.helperType=b.helperType);if(b.modeProps)for(var e in b.modeProps)a[e]=b.modeProps[e];return a}function lg(a,b){a=eb.hasOwnProperty(a)?eb[a]:eb[a]={};Ha(b,a)}function Na(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);
a={};for(var c in b){var d=b[c];d instanceof Array&&(d=d.concat([]));a[c]=d}return a}function gd(a,b){for(var c;a.innerMode;){c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}}function he(a,b,c){return a.startState?a.startState(b,c):!0}function ie(a,b,c,d){var e=[a.state.modeGen],f={};je(a,b.text,a.doc.mode,c,function(a,b){return e.push(a,b)},f,d);d=c.state;for(var g=function(d){var g=a.state.overlays[d],h=1,k=0;c.state=!0;je(a,b.text,g.mode,c,function(a,b){for(var d=
h;k<a;){var c=e[h];c>a&&e.splice(h,1,a,e[h+1],c);h+=2;k=Math.min(a,c)}if(b)if(g.opaque)e.splice(d,h-d,a,"overlay "+b),h=d+2;else for(;d<h;d+=2)a=e[d+1],e[d+1]=(a?a+" ":"")+"overlay "+b},f)},h=0;h<a.state.overlays.length;++h)g(h);c.state=d;return{styles:e,classes:f.bgClass||f.textClass?f:null}}function ke(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var d=xb(a,D(b)),e=b.text.length>a.options.maxHighlightLength&&Na(a.doc.mode,d.state),f=ie(a,b,d);e&&(d.state=e);b.stateAfter=d.save(!e);b.styles=
f.styles;f.classes?b.styleClasses=f.classes:b.styleClasses&&(b.styleClasses=null);c===a.doc.highlightFrontier&&(a.doc.modeFrontier=Math.max(a.doc.modeFrontier,++a.doc.highlightFrontier))}return b.styles}function xb(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return new sa(d,!0,b);var f=mg(a,b,c),g=f>d.first&&u(d,f-1).stateAfter,h=g?sa.fromSaved(d,g,f):new sa(d,he(d.mode),f);d.iter(f,b,function(d){hd(a,d.text,h);var c=h.line;d.stateAfter=c==b-1||0==c%5||c>=e.viewFrom&&c<e.viewTo?h.save():
null;h.nextLine()});c&&(d.modeFrontier=h.line);return h}function hd(a,b,c,d){var e=a.doc.mode;a=new I(b,a.options.tabSize,c);a.start=a.pos=d||0;for(""==b&&le(e,c.state);!a.eol();)id(e,a,c.state),a.start=a.pos}function le(a,b){if(a.blankLine)return a.blankLine(b);if(a.innerMode&&(a=gd(a,b),a.mode.blankLine))return a.mode.blankLine(a.state)}function id(a,b,c,d){for(var e=0;10>e;e++){d&&(d[0]=gd(a,c).mode);var f=a.token(b,c);if(b.pos>b.start)return f}throw Error("Mode "+a.name+" failed to advance stream.");
}function me(a,b,c,d){var e=a.doc,f=e.mode;b=w(e,b);var g=u(e,b.line);c=xb(a,b.line,c);a=new I(g.text,a.options.tabSize,c);var h;for(d&&(h=[]);(d||a.pos<b.ch)&&!a.eol();){a.start=a.pos;var k=id(f,a,c.state);d&&h.push(new ne(a,k,Na(e.mode,c.state)))}return d?h:new ne(a,k,c.state)}function oe(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:(new RegExp("(?:^|s)"+c[2]+
"(?:$|s)")).test(b[d])||(b[d]+=" "+c[2])}return a}function je(a,b,c,d,e,f,g){var h=c.flattenSpans;null==h&&(h=a.options.flattenSpans);var k=0,l=null,m=new I(b,a.options.tabSize,d),p=a.options.addModeClass&&[null];for(""==b&&oe(le(c,d.state),f);!m.eol();){if(m.pos>a.options.maxHighlightLength){h=!1;g&&hd(a,b,d,m.pos);m.pos=b.length;var n=null}else n=oe(id(c,m,d.state,p),f);if(p){var q=p[0].name;q&&(n="m-"+(n?q+" "+n:q))}if(!h||l!=n){for(;k<m.start;)k=Math.min(m.start,k+5E3),e(k,l);l=n}m.start=m.pos}for(;k<
m.pos;)a=Math.min(m.pos,k+5E3),e(a,l),k=a}function mg(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>g;--b){if(b<=f.first)return f.first;var h=u(f,b-1),k=h.stateAfter;if(k&&(!c||b+(k instanceof pc?k.lookAhead:0)<=f.modeFrontier))return b;h=da(h.text,null,a.options.tabSize);if(null==e||d>h)e=b-1,d=h}return e}function ng(a,b){a.modeFrontier=Math.min(a.modeFrontier,b);if(!(a.highlightFrontier<b-10)){for(var c=a.first,d=b-1;d>c;d--){var e=u(a,d).stateAfter;if(e&&(!(e instanceof pc)||
d+e.lookAhead<b)){c=d+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,c)}}function pe(a,b){if(!a||/^\s*$/.test(a))return null;b=b.addModeClass?og:pg;return b[a]||(b[a]=a.replace(/\S+/g,"cm-$\x26"))}function qe(a,b){var c=ab("span",null,null,Q?"padding-right: .1px":null);c={pre:ab("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,trailingSpace:!1,splitSpaces:(C||Q)&&a.getOption("lineWrapping")};b.measure={};for(var d=0;d<=(b.rest?b.rest.length:0);d++){var e=d?b.rest[d-1]:b.line,f=void 0;
c.pos=0;c.addToken=qg;var g=a.display.measure;if(null!=jd)g=jd;else{var h=Y(g,document.createTextNode("A\u062eA")),k=yb(h,0,1).getBoundingClientRect();h=yb(h,1,2).getBoundingClientRect();ca(g);g=k&&k.left!=k.right?jd=3>h.right-k.right:!1}g&&(f=za(e,a.doc.direction))&&(c.addToken=rg(c.addToken,f));c.map=[];var l=b!=a.display.externalMeasured&&D(e);a:{var m=h=k=g=void 0,p=void 0,n=void 0,q=void 0;f=c;l=ke(a,e,l);var r=e.markedSpans,u=e.text,t=0;if(r)for(var v=u.length,H=0,z=1,w="",na=0;;){if(na==H){p=
m=h=k=n="";g=null;na=Infinity;for(var ta=[],y=void 0,B=0;B<r.length;++B){var x=r[B],A=x.marker;"bookmark"==A.type&&x.from==H&&A.widgetNode?ta.push(A):x.from<=H&&(null==x.to||x.to>H||A.collapsed&&x.to==H&&x.from==H)?(null!=x.to&&x.to!=H&&na>x.to&&(na=x.to,m=""),A.className&&(p+=" "+A.className),A.css&&(n=(n?n+";":"")+A.css),A.startStyle&&x.from==H&&(h+=" "+A.startStyle),A.endStyle&&x.to==na&&(y||(y=[])).push(A.endStyle,x.to),A.title&&!k&&(k=A.title),A.collapsed&&(!g||0>$d(g.marker,A))&&(g=x)):x.from>
H&&na>x.from&&(na=x.from)}if(y)for(B=0;B<y.length;B+=2)y[B+1]==na&&(m+=" "+y[B]);if(!g||g.from==H)for(y=0;y<ta.length;++y)re(f,0,ta[y]);if(g&&(g.from||0)==H){re(f,(null==g.to?v+1:g.to)-H,g.marker,null==g.from);if(null==g.to)break a;g.to==H&&(g=!1)}}if(H>=v)break;for(ta=Math.min(v,na);;){if(w){y=H+w.length;g||(B=y>ta?w.slice(0,ta-H):w,f.addToken(f,B,q?q+p:p,h,H+B.length==na?m:"",k,n));if(y>=ta){w=w.slice(ta-H);H=ta;break}H=y;h=""}w=u.slice(t,t=l[z++]);q=pe(l[z++],f.cm.options)}}else for(g=1;g<l.length;g+=
2)f.addToken(f,u.slice(t,t=l[g]),pe(l[g+1],f.cm.options))}e.styleClasses&&(e.styleClasses.bgClass&&(c.bgClass=Lc(e.styleClasses.bgClass,c.bgClass||"")),e.styleClasses.textClass&&(c.textClass=Lc(e.styleClasses.textClass,c.textClass||"")));0==c.map.length&&c.map.push(0,0,c.content.appendChild(jg(a.display.measure)));0==d?(b.measure.map=c.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(c.map),(b.measure.caches||(b.measure.caches=[])).push({}))}Q&&(d=c.content.lastChild,/\bcm-tab\b/.test(d.className)||
d.querySelector&&d.querySelector(".cm-tab"))&&(c.content.className="cm-tab-wrap-hack");G(a,"renderLine",a,b.line,c.pre);c.pre.className&&(c.textClass=Lc(c.pre.className,c.textClass||""));return c}function sg(a){var b=t("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);b.setAttribute("aria-label",b.title);return b}function qg(a,b,c,d,e,f,g){if(b){if(a.splitSpaces){var h=a.trailingSpace;if(1<b.length&&!/  /.test(b))h=b;else{for(var k="",l=0;l<b.length;l++){var m=b.charAt(l);
" "!=m||!h||l!=b.length-1&&32!=b.charCodeAt(l+1)||(m="\u00a0");k+=m;h=" "==m}h=k}}else h=b;k=h;l=a.cm.state.specialChars;m=!1;if(l.test(b)){h=document.createDocumentFragment();for(var p=0;;){l.lastIndex=p;var n=l.exec(b),q=n?n.index-p:b.length-p;if(q){var r=document.createTextNode(k.slice(p,p+q));C&&9>A?h.appendChild(t("span",[r])):h.appendChild(r);a.map.push(a.pos,a.pos+q,r);a.col+=q;a.pos+=q}if(!n)break;p+=q+1;"\t"==n[0]?(n=a.cm.options.tabSize,n-=a.col%n,q=h.appendChild(t("span",Oc(n),"cm-tab")),
q.setAttribute("role","presentation"),q.setAttribute("cm-text","\t"),a.col+=n):("\r"==n[0]||"\n"==n[0]?(q=h.appendChild(t("span","\r"==n[0]?"\u240d":"\u2424","cm-invalidchar")),q.setAttribute("cm-text",n[0])):(q=a.cm.options.specialCharPlaceholder(n[0]),q.setAttribute("cm-text",n[0]),C&&9>A?h.appendChild(t("span",[q])):h.appendChild(q)),a.col+=1);a.map.push(a.pos,a.pos+1,q);a.pos++}}else a.col+=b.length,h=document.createTextNode(k),a.map.push(a.pos,a.pos+b.length,h),C&&9>A&&(m=!0),a.pos+=b.length;
a.trailingSpace=32==k.charCodeAt(b.length-1);if(c||d||e||m||g)return b=c||"",d&&(b+=d),e&&(b+=e),d=t("span",[h],b,g),f&&(d.title=f),a.content.appendChild(d);a.content.appendChild(h)}}function rg(a,b){return function(c,d,e,f,g,h,k){e=e?e+" cm-force-border":"cm-force-border";for(var l=c.pos,m=l+d.length;;){for(var p=void 0,n=0;n<b.length&&!(p=b[n],p.to>l&&p.from<=l);n++);if(p.to>=m)return a(c,d,e,f,g,h,k);a(c,d.slice(0,p.to-l),e,f,null,h,k);f=null;d=d.slice(p.to-l);l=p.to}}}function re(a,b,c,d){var e=
!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e);!d&&a.cm.display.input.needsContentAttribute&&(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id));e&&(a.cm.display.input.setUneditable(e),a.content.appendChild(e));a.pos+=b;a.trailingSpace=!1}function se(a,b,c){for(var d=this.line=b,e;d=Ka(d,!1);)d=d.find(1,!0).line,(e||(e=[])).push(d);this.size=(this.rest=e)?D(y(this.rest))-c+1:1;this.node=this.text=null;this.hidden=La(a,b)}function qc(a,b,c){var d=[],e;for(e=
b;e<c;)b=new se(a.doc,u(a.doc,e),e),e+=b.size,d.push(b);return d}function tg(a,b){if(a=a.ownsGroup)try{var c=a.delayedCallbacks,d=0;do{for(;d<c.length;d++)c[d].call(null);for(var e=0;e<a.ops.length;e++){var f=a.ops[e];if(f.cursorActivityHandlers)for(;f.cursorActivityCalled<f.cursorActivityHandlers.length;)f.cursorActivityHandlers[f.cursorActivityCalled++].call(null,f.cm)}}while(d<c.length)}finally{fb=null,b(a)}}function O(a,b){var c=a._handlers&&a._handlers[b]||nc;if(c.length){var d=Array.prototype.slice.call(arguments,
2);if(fb)var e=fb.delayedCallbacks;else zb?e=zb:(e=zb=[],setTimeout(ug,0));for(var f=function(a){e.push(function(){return c[a].apply(null,d)})},g=0;g<c.length;++g)f(g)}}function ug(){var a=zb;zb=null;for(var b=0;b<a.length;++b)a[b]()}function te(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];if("text"==f){f=a;var g=b,h=g.text.className,k=ue(f,g);g.text==g.node&&(g.node=k.pre);g.text.parentNode.replaceChild(k.pre,g.text);g.text=k.pre;k.bgClass!=g.bgClass||k.textClass!=g.textClass?
(g.bgClass=k.bgClass,g.textClass=k.textClass,kd(f,g)):h&&(g.text.className=h)}else if("gutter"==f)ve(a,b,c,d);else if("class"==f)kd(a,b);else if("widget"==f){f=a;g=b;h=d;g.alignable&&(g.alignable=null);k=g.node.firstChild;for(var l;k;k=l)l=k.nextSibling,"CodeMirror-linewidget"==k.className&&g.node.removeChild(k);we(f,g,h)}}b.changes=null}function Ab(a){a.node==a.text&&(a.node=t("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),
C&&8>A&&(a.node.style.zIndex=2));return a.node}function ue(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):qe(a,b)}function kd(a,b){var c=b.bgClass?b.bgClass+" "+(b.line.bgClass||""):b.line.bgClass;c&&(c+=" CodeMirror-linebackground");if(b.background)c?b.background.className=c:(b.background.parentNode.removeChild(b.background),b.background=null);else if(c){var d=Ab(b);b.background=d.insertBefore(t("div",null,c),d.firstChild);
a.display.input.setUneditable(b.background)}b.line.wrapClass?Ab(b).className=b.line.wrapClass:b.node!=b.text&&(b.node.className="");b.text.className=(b.textClass?b.textClass+" "+(b.line.textClass||""):b.line.textClass)||""}function ve(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);b.gutterBackground&&(b.node.removeChild(b.gutterBackground),b.gutterBackground=null);if(b.line.gutterClass){var e=Ab(b);b.gutterBackground=t("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,
"left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px");a.display.input.setUneditable(b.gutterBackground);e.insertBefore(b.gutterBackground,b.text)}e=b.line.gutterMarkers;if(a.options.lineNumbers||e){var f=Ab(b),g=b.gutter=t("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px");a.display.input.setUneditable(g);f.insertBefore(g,b.text);b.line.gutterClass&&(g.className+=" "+b.line.gutterClass);!a.options.lineNumbers||
e&&e["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(t("div",Sc(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px")));if(e)for(b=0;b<a.options.gutters.length;++b)c=a.options.gutters[b],(f=e.hasOwnProperty(c)&&e[c])&&g.appendChild(t("div",[f],"CodeMirror-gutter-elt","left: "+d.gutterLeft[c]+"px; width: "+d.gutterWidth[c]+"px"))}}function vg(a,b,c,d){var e=ue(a,b);b.text=b.node=e.pre;e.bgClass&&
(b.bgClass=e.bgClass);e.textClass&&(b.textClass=e.textClass);kd(a,b);ve(a,b,c,d);we(a,b,d);return b.node}function we(a,b,c){xe(a,b.line,b,c,!0);if(b.rest)for(var d=0;d<b.rest.length;d++)xe(a,b.rest[d],b,c,!1)}function xe(a,b,c,d,e){if(b.widgets){var f=Ab(c),g=0;for(b=b.widgets;g<b.length;++g){var h=b[g],k=t("div",[h.node],"CodeMirror-linewidget");h.handleMouseEvents||k.setAttribute("cm-ignore-events","true");var l=h,m=k,p=d;if(l.noHScroll){(c.alignable||(c.alignable=[])).push(m);var n=p.wrapperWidth;
m.style.left=p.fixedPos+"px";l.coverGutter||(n-=p.gutterTotalWidth,m.style.paddingLeft=p.gutterTotalWidth+"px");m.style.width=n+"px"}l.coverGutter&&(m.style.zIndex=5,m.style.position="relative",l.noHScroll||(m.style.marginLeft=-p.gutterTotalWidth+"px"));a.display.input.setUneditable(k);e&&h.above?f.insertBefore(k,c.gutter||c.text):f.appendChild(k);O(h,"redraw")}}}function Bb(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!wa(document.body,a.node)){var c="position: relative;";
a.coverGutter&&(c+="margin-left: -"+b.display.gutters.offsetWidth+"px;");a.noHScroll&&(c+="width: "+b.display.wrapper.clientWidth+"px;");Y(b.display.measure,t("div",[a.node],null,c))}return a.height=a.node.parentNode.offsetHeight}function ua(a,b){for(b=b.target||b.srcElement;b!=a.wrapper;b=b.parentNode)if(!b||1==b.nodeType&&"true"==b.getAttribute("cm-ignore-events")||b.parentNode==a.sizer&&b!=a.mover)return!0}function ld(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function ye(a){if(a.cachedPaddingH)return a.cachedPaddingH;
var b=Y(a.measure,t("pre","x"));b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle;b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function oa(a){return 30-a.display.nativeBarWidth}function Oa(a){return a.display.scroller.clientWidth-oa(a)-a.display.barWidth}function md(a){return a.display.scroller.clientHeight-oa(a)-a.display.barHeight}function ze(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};
for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(b=0;b<a.rest.length;b++)if(D(a.rest[b])>c)return{map:a.measure.maps[b],cache:a.measure.caches[b],before:!0}}function nd(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[Pa(a,b)];if((a=a.display.externalMeasured)&&b>=a.lineN&&b<a.lineN+a.size)return a}function bb(a,b){var c=D(b),d=nd(a,c);d&&!d.text?d=null:d&&d.changes&&(te(a,d,c,od(a)),a.curOp.forceUpdate=!0);if(!d){var e=
la(b);d=D(e);e=a.display.externalMeasured=new se(a.doc,e,d);e.lineN=d;d=e.built=qe(a,e);e.text=d.pre;Y(a.display.lineMeasure,d.pre);d=e}a=ze(d,b,c);return{line:b,view:d,rect:null,map:a.map,cache:a.cache,before:a.before,hasHeights:!1}}function ra(a,b,c,d,e){b.before&&(c=-1);var f=c+(d||"");if(b.cache.hasOwnProperty(f))a=b.cache[f];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var g=b.view,h=b.rect,k=a.options.lineWrapping,l=k&&Oa(a);if(!g.measure.heights||k&&g.measure.width!=
l){var m=g.measure.heights=[];if(k)for(g.measure.width=l,g=g.text.firstChild.getClientRects(),k=0;k<g.length-1;k++){l=g[k];var p=g[k+1];2<Math.abs(l.bottom-p.bottom)&&m.push((l.bottom+p.top)/2-h.top)}m.push(h.bottom-h.top)}b.hasHeights=!0}m=d;g=Ae(b.map,c,m);d=g.node;h=g.start;k=g.end;c=g.collapse;if(3==d.nodeType){for(var n=0;4>n;n++){for(;h&&Qc(b.line.text.charAt(g.coverStart+h));)--h;for(;g.coverStart+k<g.coverEnd&&Qc(b.line.text.charAt(g.coverStart+k));)++k;if(C&&9>A&&0==h&&k==g.coverEnd-g.coverStart)var q=
d.parentNode.getBoundingClientRect();else{q=yb(d,h,k).getClientRects();k=Be;if("left"==m)for(l=0;l<q.length&&(k=q[l]).left==k.right;l++);else for(l=q.length-1;0<=l&&(k=q[l]).left==k.right;l--);q=k}if(q.left||q.right||0==h)break;k=h;--h;c="right"}C&&11>A&&((n=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI)||(null!=pd?n=pd:(m=Y(a.display.measure,t("span","x")),n=m.getBoundingClientRect(),m=yb(m,0,1).getBoundingClientRect(),n=pd=1<Math.abs(n.left-m.left)),n=!n),n||(n=
screen.logicalXDPI/screen.deviceXDPI,m=screen.logicalYDPI/screen.deviceYDPI,q={left:q.left*n,right:q.right*n,top:q.top*m,bottom:q.bottom*m}))}else 0<h&&(c=m="right"),q=a.options.lineWrapping&&1<(n=d.getClientRects()).length?n["right"==m?n.length-1:0]:d.getBoundingClientRect();!(C&&9>A)||h||q&&(q.left||q.right)||(q=(q=d.parentNode.getClientRects()[0])?{left:q.left,right:q.left+Cb(a.display),top:q.top,bottom:q.bottom}:Be);d=q.top-b.rect.top;h=q.bottom-b.rect.top;n=(d+h)/2;m=b.view.measure.heights;for(g=
0;g<m.length-1&&!(n<m[g]);g++);c={left:("right"==c?q.right:q.left)-b.rect.left,right:("left"==c?q.left:q.right)-b.rect.left,top:g?m[g-1]:0,bottom:m[g]};q.left||q.right||(c.bogus=!0);a.options.singleCursorHeightPerLine||(c.rtop=d,c.rbottom=h);a=c;a.bogus||(b.cache[f]=a)}return{left:a.left,right:a.right,top:e?a.rtop:a.top,bottom:e?a.rbottom:a.bottom}}function Ae(a,b,c){for(var d,e,f,g,h,k,l=0;l<a.length;l+=3){h=a[l];k=a[l+1];if(b<h)e=0,f=1,g="left";else if(b<k)e=b-h,f=e+1;else if(l==a.length-3||b==
k&&a[l+3]>b)f=k-h,e=f-1,b>=k&&(g="right");if(null!=e){d=a[l+2];h==k&&c==(d.insertLeft?"left":"right")&&(g=c);if("left"==c&&0==e)for(;l&&a[l-2]==a[l-3]&&a[l-1].insertLeft;)d=a[(l-=3)+2],g="left";if("right"==c&&e==k-h)for(;l<a.length-3&&a[l+3]==a[l+4]&&!a[l+5].insertLeft;)d=a[(l+=3)+2],g="right";break}}return{node:d,start:e,end:f,collapse:g,coverStart:h,coverEnd:k}}function Ce(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}
function De(a){a.display.externalMeasure=null;ca(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)Ce(a.display.view[b])}function Db(a){De(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function Ee(){return rc&&sc?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}
function Fe(){return rc&&sc?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ma(a,b,c,d,e){if(!e&&b.widgets)for(e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Bb(b.widgets[e]);c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=ma(b);b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=a.display.lineSpace.getBoundingClientRect(),
b+=a.top+("window"==d?0:Fe()),d=a.left+("window"==d?0:Ee()),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function Ge(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=Ee(),b-=Fe()):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),d+=c.left,b+=c.top);a=a.display.lineSpace.getBoundingClientRect();return{left:d-a.left,top:b-a.top}}function tc(a,b,c,d,e){d||(d=u(a.doc,b.line));var f=d;b=b.ch;d=ra(a,bb(a,d),b,e);return Ma(a,f,d,c)}function ha(a,b,c,d,e,f){function g(b,g){b=
ra(a,e,b,g?"right":"left",f);g?b.left=b.right:b.right=b.left;return Ma(a,d,b,c)}function h(a,b,d){return g(d?a-1:a,0!=k[b].level%2!=d)}d=d||u(a.doc,b.line);e||(e=bb(a,d));var k=za(d,a.doc.direction),l=b.ch;b=b.sticky;l>=d.text.length?(l=d.text.length,b="before"):0>=l&&(l=0,b="after");if(!k)return g("before"==b?l-1:l,"before"==b);var m=Zc(k,l,b),p=vb;m=h(l,m,"before"==b);null!=p&&(m.other=h(l,p,"before"!=b));return m}function He(a,b){var c=0;b=w(a.doc,b);a.options.lineWrapping||(c=Cb(a.display)*b.ch);
b=u(a.doc,b.line);a=ma(b)+a.display.lineSpace.offsetTop;return{left:c,right:c,top:a,bottom:a+b.height}}function qd(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return a=r(d.first,0,null),a.xRel=-1,a.outside=!0,a;var e=Ja(d,c),f=d.first+d.size-1;if(e>f)return a=u(d,f).text.length,a=r(d.first+d.size-1,a,null),a.xRel=1,a.outside=!0,a;0>b&&(b=0);for(f=u(d,e);;)if(d=wg(a,f,e,b,c),f=(e=Ka(f,!1))&&e.find(0,!0),e&&(d.ch>f.from.ch||d.ch==f.from.ch&&0<d.xRel))e=D(f=f.to.line);else return d}function de(a,
b,c,d){var e=b.text.length,f=ic(function(e){return Ma(a,b,ra(a,c,e-1),"line").bottom<=d},e,0);e=ic(function(e){return Ma(a,b,ra(a,c,e),"line").top>d},f,e);return{begin:f,end:e}}function wg(a,b,c,d,e){e-=ma(b);var f=0,g=b.text.length,h=bb(a,b);if(za(b,a.doc.direction)){if(a.options.lineWrapping){var k=de(a,b,h,e);f=k.begin;g=k.end;k}c=new r(c,Math.floor(f+(g-f)/2));var l=ha(a,c,"line",b,h).left;k=l<d?1:-1;var m=l-d,p=Math.ceil((g-f)/4);a:do{l=m;var n=c;for(var q=0;q<p;++q){var F=c;c=ce(a,b,c,k);if(null==
c||c.ch<f||g<=("before"==c.sticky?c.ch-1:c.ch)){c=F;break a}}m=ha(a,c,"line",b,h).left-d;1<p&&(p=Math.min(p,Math.ceil(Math.abs(m)/(Math.abs(m-l)/p))),k=0>m?1:-1)}while(0!=m&&(1<p||0>k!=0>m&&Math.abs(m)<=Math.abs(l)));if(Math.abs(m)>Math.abs(l)){if(0>m==0>l)throw Error("Broke out of infinite loop in coordsCharInner");c=n}}else f=ic(function(c){var f=Ma(a,b,ra(a,h,c),"line");return f.top>e?(g=Math.min(c,g),!0):f.bottom<=e?!1:f.left>d?!0:f.right<d?!1:d-f.left<f.right-d},f,g),f=Vd(b.text,f,1),c=new r(c,
f,f==g?"before":"after");f=ha(a,c,"line",b,h);if(e<f.top||f.bottom<e)c.outside=!0;c.xRel=d<f.left?-1:d>f.right?1:0;return c}function Qa(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Ra){Ra=t("pre");for(var b=0;49>b;++b)Ra.appendChild(document.createTextNode("x")),Ra.appendChild(t("br"));Ra.appendChild(document.createTextNode("x"))}Y(a.measure,Ra);b=Ra.offsetHeight/50;3<b&&(a.cachedTextHeight=b);ca(a.measure);return b||1}function Cb(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;
var b=t("span","xxxxxxxxxx"),c=t("pre",[b]);Y(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/10;2<b&&(a.cachedCharWidth=b);return b||10}function od(a){for(var b=a.display,c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,g=0;f;f=f.nextSibling,++g)c[a.options.gutters[g]]=f.offsetLeft+f.clientLeft+e,d[a.options.gutters[g]]=f.clientWidth;return{fixedPos:rd(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function rd(a){return a.scroller.getBoundingClientRect().left-
a.sizer.getBoundingClientRect().left}function Ie(a){var b=Qa(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/Cb(a.display)-3);return function(e){if(La(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function sd(a){var b=a.doc,c=Ie(a);b.iter(function(a){var b=c(a);b!=a.height&&ka(a,b)})}function Sa(a,b,c,d){var e=a.display;if(!c&&"true"==(b.target||
b.srcElement).getAttribute("cm-not-content"))return null;c=e.lineSpace.getBoundingClientRect();try{var f=b.clientX-c.left;var g=b.clientY-c.top}catch(k){return null}b=qd(a,f,g);var h;d&&1==b.xRel&&(h=u(a.doc,b.line).text).length==b.ch&&(d=da(h,h.length,a.options.tabSize)-h.length,b=r(b.line,Math.max(0,Math.round((f-ye(a.display).left)/Cb(a.display))-d)));return b}function Pa(a,b){if(b>=a.display.viewTo)return null;b-=a.display.viewFrom;if(0>b)return null;a=a.display.view;for(var c=0;c<a.length;c++)if(b-=
a[c].size,0>b)return c}function Eb(a){a.display.input.showSelection(a.display.input.prepareSelection())}function Je(a,b){for(var c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++)if(!1!==b||g!=c.sel.primIndex){var h=c.sel.ranges[g];if(!(h.from().line>=a.display.viewTo||h.to().line<a.display.viewFrom)){var k=h.empty();(k||a.options.showCursorWhenSelecting)&&Ke(a,h.head,e);k||xg(a,h,f)}}return d}function Ke(a,b,c){b=
ha(a,b,"div",null,null,!a.options.singleCursorHeightPerLine);var d=c.appendChild(t("div","\u00a0","CodeMirror-cursor"));d.style.left=b.left+"px";d.style.top=b.top+"px";d.style.height=Math.max(0,b.bottom-b.top)*a.options.cursorHeight+"px";b.other&&(a=c.appendChild(t("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),a.style.display="",a.style.left=b.other.left+"px",a.style.top=b.other.top+"px",a.style.height=.85*(b.other.bottom-b.other.top)+"px")}function xg(a,b,c){function d(a,b,d,c){0>
b&&(b=0);b=Math.round(b);c=Math.round(c);h.appendChild(t("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px;\n                             top: "+b+"px; width: "+(null==d?m-a:d)+"px;\n                             height: "+(c-b)+"px"))}function e(b,c,e){var f=u(g,b),h=f.text.length,k,n;hg(za(f,g.direction),c||0,null==e?h:e,function(g,p,q){var F=tc(a,r(b,g),"div",f,"left"),u;if(g==p){var t=F;q=u=F.left}else t=tc(a,r(b,p-1),"div",f,"right"),"rtl"==q&&(q=F,F=t,t=q),q=F.left,u=t.right;
null==c&&0==g&&(q=l);3<t.top-F.top&&(d(q,F.top,null,F.bottom),q=l,F.bottom<t.top&&d(q,F.bottom,null,t.top));null==e&&p==h&&(u=m);if(!k||F.top<k.top||F.top==k.top&&F.left<k.left)k=F;if(!n||t.bottom>n.bottom||t.bottom==n.bottom&&t.right>n.right)n=t;q<l+1&&(q=l);d(q,t.top,u-q,t.bottom)});return{start:k,end:n}}var f=a.display,g=a.doc,h=document.createDocumentFragment(),k=ye(a.display),l=k.left,m=Math.max(f.sizerWidth,Oa(a)-f.sizer.offsetLeft)-k.right;f=b.from();b=b.to();if(f.line==b.line)e(f.line,f.ch,
b.ch);else{var p=u(g,f.line);k=u(g,b.line);k=la(p)==la(k);f=e(f.line,f.ch,k?p.text.length+1:null).end;b=e(b.line,k?0:null,b.ch).start;k&&(f.top<b.top-2?(d(f.right,f.top,null,f.bottom),d(l,b.top,b.left,b.bottom)):d(f.right,f.top,b.left-f.right,f.bottom));f.bottom<b.top&&d(l,f.bottom,null,b.top)}c.appendChild(h)}function td(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){return b.cursorDiv.style.visibility=
(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility="hidden")}}function Le(a){a.state.focused||(a.display.input.focus(),ud(a))}function Me(a){a.state.delayingBlurEvent=!0;setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,Fb(a))},100)}function ud(a,b){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1);"nocursor"!=a.options.readOnly&&(a.state.focused||(G(a,"focus",a,b),a.state.focused=!0,Ga(a.display.wrapper,"CodeMirror-focused"),
a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),Q&&setTimeout(function(){return a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),td(a))}function Fb(a,b){a.state.delayingBlurEvent||(a.state.focused&&(G(a,"blur",a,b),a.state.focused=!1,Ta(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function uc(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=0;c<a.view.length;c++){var d=
a.view[c];if(!d.hidden){if(C&&8>A){var e=d.node.offsetTop+d.node.offsetHeight;var f=e-b;b=e}else f=d.node.getBoundingClientRect(),f=f.bottom-f.top;e=d.line.height-f;2>f&&(f=Qa(a));if(.005<e||-.005>e)if(ka(d.line,f),Ne(d.line),d.rest)for(f=0;f<d.rest.length;f++)Ne(d.rest[f])}}}function Ne(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.parentNode.offsetHeight}function vd(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop;d=Math.floor(d-a.lineSpace.offsetTop);
var e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight;d=Ja(b,d);e=Ja(b,e);if(c&&c.ensure){var f=c.ensure.from.line;c=c.ensure.to.line;f<d?(d=f,e=Ja(b,ma(u(b,f))+a.wrapper.clientHeight)):Math.min(c,b.lastLine())>=e&&(d=Ja(b,ma(u(b,c))-a.wrapper.clientHeight),e=c)}return{from:d,to:Math.max(e,d+1)}}function Oe(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=rd(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&
(c[g].gutter&&(c[g].gutter.style.left=f),c[g].gutterBackground&&(c[g].gutterBackground.style.left=f));var h=c[g].alignable;if(h)for(var k=0;k<h.length;k++)h[k].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function Pe(a){if(!a.options.lineNumbers)return!1;var b=a.doc;b=Sc(a.options,b.first+b.size-1);var c=a.display;if(b.length!=c.lineNumChars){var d=c.measure.appendChild(t("div",[t("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=d.firstChild.offsetWidth;d=d.offsetWidth-
e;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(e,c.lineGutter.offsetWidth-d)+1;c.lineNumWidth=c.lineNumInnerWidth+d;c.lineNumChars=c.lineNumInnerWidth?b.length:-1;c.lineGutter.style.width=c.lineNumWidth+"px";wd(a);return!0}return!1}function xd(a,b){var c=a.display,d=Qa(a.display);0>b.top&&(b.top=0);var e=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:c.scroller.scrollTop,f=md(a),g={};b.bottom-b.top>f&&(b.bottom=b.top+f);var h=a.doc.height+ld(c),k=b.top<d;d=b.bottom>h-d;b.top<e?g.scrollTop=
k?0:b.top:b.bottom>e+f&&(f=Math.min(b.top,(d?h:b.bottom)-f),f!=e&&(g.scrollTop=f));e=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:c.scroller.scrollLeft;a=Oa(a)-(a.options.fixedGutter?c.gutters.offsetWidth:0);if(c=b.right-b.left>a)b.right=b.left+a;10>b.left?g.scrollLeft=0:b.left<e?g.scrollLeft=Math.max(0,b.left-(c?0:10)):b.right>a+e-3&&(g.scrollLeft=b.right+(c?0:10)-a);return g}function vc(a,b){null!=b&&(wc(a),a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+b)}
function gb(a){wc(a);var b=a.getCursor();a.curOp.scrollToPos={from:b,to:b,margin:a.options.cursorScrollMargin}}function Gb(a,b,c){null==b&&null==c||wc(a);null!=b&&(a.curOp.scrollLeft=b);null!=c&&(a.curOp.scrollTop=c)}function wc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=He(a,b.from),d=He(a,b.to);Qe(a,c,d,b.margin)}}function Qe(a,b,c,d){b=xd(a,{left:Math.min(b.left,c.left),top:Math.min(b.top,c.top)-d,right:Math.max(b.right,c.right),bottom:Math.max(b.bottom,c.bottom)+d});Gb(a,
b.scrollLeft,b.scrollTop)}function Hb(a,b){2>Math.abs(a.doc.scrollTop-b)||(xa||yd(a,{top:b}),Re(a,b,!0),xa&&yd(a),Ib(a,100))}function Re(a,b,c){b=Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,b);if(a.display.scroller.scrollTop!=b||c)a.doc.scrollTop=b,a.display.scrollbars.setScrollTop(b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b)}function Ua(a,b,c,d){b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth);(c?b==a.doc.scrollLeft:
2>Math.abs(a.doc.scrollLeft-b))&&!d||(a.doc.scrollLeft=b,Oe(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function Jb(a){var b=a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+ld(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+
oa(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:c}}function hb(a,b){b||(b=Jb(a));var c=a.display.barWidth,d=a.display.barHeight;Se(a,b);for(b=0;4>b&&c!=a.display.barWidth||d!=a.display.barHeight;b++)c!=a.display.barWidth&&a.options.lineWrapping&&uc(a),Se(a,Jb(a)),c=a.display.barWidth,d=a.display.barHeight}function Se(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px";c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px";c.heightForcer.style.borderBottom=
d.bottom+"px solid transparent";d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=d.bottom+"px",c.scrollbarFiller.style.width=d.right+"px"):c.scrollbarFiller.style.display="";d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function Te(a){a.display.scrollbars&&(a.display.scrollbars.clear(),
a.display.scrollbars.addClass&&Ta(a.display.wrapper,a.display.scrollbars.addClass));a.display.scrollbars=new Ue[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller);v(b,"mousedown",function(){a.state.focused&&setTimeout(function(){return a.display.input.focus()},0)});b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?Ua(a,b):Hb(a,b)},a);a.display.scrollbars.addClass&&Ga(a.display.wrapper,a.display.scrollbars.addClass)}function Va(a){a.curOp=
{cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++yg};a=a.curOp;fb?fb.ops.push(a):a.ownsGroup=fb={ops:[a],delayedCallbacks:[]}}function Wa(a){tg(a.curOp,function(a){for(var b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;a=a.ops;for(b=0;b<a.length;b++){var d=a[b],e=d.cm,f=e.display,g=e.display;!g.scrollbarsClipped&&
g.scroller.offsetWidth&&(g.nativeBarWidth=g.scroller.offsetWidth-g.scroller.clientWidth,g.heightForcer.style.height=oa(e)+"px",g.sizer.style.marginBottom=-g.nativeBarWidth+"px",g.sizer.style.borderRightWidth=oa(e)+"px",g.scrollbarsClipped=!0);d.updateMaxLine&&Yc(e);d.mustUpdate=d.viewChanged||d.forceUpdate||null!=d.scrollTop||d.scrollToPos&&(d.scrollToPos.from.line<f.viewFrom||d.scrollToPos.to.line>=f.viewTo)||f.maxLineChanged&&e.options.lineWrapping;d.update=d.mustUpdate&&new xc(e,d.mustUpdate&&
{top:d.scrollTop,ensure:d.scrollToPos},d.forceUpdate)}for(b=0;b<a.length;b++)d=a[b],d.updatedDisplay=d.mustUpdate&&zd(d.cm,d.update);for(b=0;b<a.length;b++)if(d=a[b],e=d.cm,f=e.display,d.updatedDisplay&&uc(e),d.barMeasure=Jb(e),f.maxLineChanged&&!e.options.lineWrapping&&(g=f.maxLine.text.length,g=ra(e,bb(e,f.maxLine),g,void 0),d.adjustWidthTo=g.left+3,e.display.sizerWidth=d.adjustWidthTo,d.barMeasure.scrollWidth=Math.max(f.scroller.clientWidth,f.sizer.offsetLeft+d.adjustWidthTo+oa(e)+e.display.barWidth),
d.maxScrollLeft=Math.max(0,f.sizer.offsetLeft+d.adjustWidthTo-Oa(e))),d.updatedDisplay||d.selectionChanged)d.preparedSelection=f.input.prepareSelection(d.focus);for(b=0;b<a.length;b++)d=a[b],e=d.cm,null!=d.adjustWidthTo&&(e.display.sizer.style.minWidth=d.adjustWidthTo+"px",d.maxScrollLeft<e.doc.scrollLeft&&Ua(e,Math.min(e.display.scroller.scrollLeft,d.maxScrollLeft),!0),e.display.maxLineChanged=!1),f=d.focus&&d.focus==qa()&&(!document.hasFocus||document.hasFocus()),d.preparedSelection&&e.display.input.showSelection(d.preparedSelection,
f),(d.updatedDisplay||d.startHeight!=e.doc.height)&&hb(e,d.barMeasure),d.updatedDisplay&&Ad(e,d.barMeasure),d.selectionChanged&&td(e),e.state.focused&&d.updateInput&&e.display.input.reset(d.typing),f&&Le(d.cm);for(b=0;b<a.length;b++){var h=void 0;d=a[b];e=d.cm;f=e.display;g=e.doc;d.updatedDisplay&&Ve(e,d.update);null==f.wheelStartX||null==d.scrollTop&&null==d.scrollLeft&&!d.scrollToPos||(f.wheelStartX=f.wheelStartY=null);null!=d.scrollTop&&Re(e,d.scrollTop,d.forceScroll);null!=d.scrollLeft&&Ua(e,
d.scrollLeft,!0,!0);if(d.scrollToPos){var k=w(g,d.scrollToPos.from),l=w(g,d.scrollToPos.to),m=d.scrollToPos.margin;null==m&&(m=0);e.options.lineWrapping||k!=l||(k=k.ch?r(k.line,"before"==k.sticky?k.ch-1:k.ch,"after"):k,l="before"==k.sticky?r(k.line,k.ch+1,"before"):k);for(var p=0;5>p;p++){var n=!1;h=ha(e,k);var q=l&&l!=k?ha(e,l):h;h={left:Math.min(h.left,q.left),top:Math.min(h.top,q.top)-m,right:Math.max(h.left,q.left),bottom:Math.max(h.bottom,q.bottom)+m};q=xd(e,h);var F=e.doc.scrollTop,u=e.doc.scrollLeft;
null!=q.scrollTop&&(Hb(e,q.scrollTop),1<Math.abs(e.doc.scrollTop-F)&&(n=!0));null!=q.scrollLeft&&(Ua(e,q.scrollLeft),1<Math.abs(e.doc.scrollLeft-u)&&(n=!0));if(!n)break}l=h;K(e,"scrollCursorIntoView")||(m=e.display,p=m.sizer.getBoundingClientRect(),k=null,0>l.top+p.top?k=!0:l.bottom+p.top>(window.innerHeight||document.documentElement.clientHeight)&&(k=!1),null==k||zg||(l=t("div","\u200b",null,"position: absolute;\n                         top: "+(l.top-m.viewOffset-e.display.lineSpace.offsetTop)+
"px;\n                         height: "+(l.bottom-l.top+oa(e)+m.barHeight)+"px;\n                         left: "+l.left+"px; width: "+Math.max(2,l.right-l.left)+"px;"),e.display.lineSpace.appendChild(l),l.scrollIntoView(k),e.display.lineSpace.removeChild(l)))}l=d.maybeHiddenMarkers;k=d.maybeUnhiddenMarkers;if(l)for(m=0;m<l.length;++m)l[m].lines.length||G(l[m],"hide");if(k)for(l=0;l<k.length;++l)k[l].lines.length&&G(k[l],"unhide");f.wrapper.offsetHeight&&(g.scrollTop=e.display.scroller.scrollTop);
d.changeObjs&&G(e,"changes",e,d.changeObjs);d.update&&d.update.finish()}})}function W(a,b){if(a.curOp)return b();Va(a);try{return b()}finally{Wa(a)}}function L(a,b){return function(){if(a.curOp)return b.apply(a,arguments);Va(a);try{return b.apply(a,arguments)}finally{Wa(a)}}}function S(a){return function(){if(this.curOp)return a.apply(this,arguments);Va(this);try{return a.apply(this,arguments)}finally{Wa(this)}}}function M(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);
Va(b);try{return a.apply(this,arguments)}finally{Wa(b)}}}function U(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=a.display;d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b);a.curOp.viewChanged=!0;if(b>=e.viewTo)ya&&Wc(a.doc,b)<e.viewTo&&Aa(a);else if(c<=e.viewFrom)ya&&be(a.doc,c+d)>e.viewFrom?Aa(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)Aa(a);else if(b<=e.viewFrom){var f=yc(a,c,c+d,1);f?(e.view=
e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):Aa(a)}else if(c>=e.viewTo)(f=yc(a,b,b,-1))?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):Aa(a);else{f=yc(a,b,b,-1);var g=yc(a,c,c+d,1);f&&g?(e.view=e.view.slice(0,f.index).concat(qc(a,f.lineN,g.lineN)).concat(e.view.slice(g.index)),e.viewTo+=d):Aa(a)}if(a=e.externalMeasured)c<a.lineN?a.lineN+=d:b<a.lineN+a.size&&(e.externalMeasured=null)}function Ba(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;e&&b>=e.lineN&&b<
e.lineN+e.size&&(d.externalMeasured=null);b<d.viewFrom||b>=d.viewTo||(a=d.view[Pa(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==N(a,c)&&a.push(c)))}function Aa(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function yc(a,b,c,d){var e=Pa(a,b),f=a.display.view;if(!ya||c==a.doc.first+a.doc.size)return{index:e,lineN:c};for(var g=a.display.viewFrom,h=0;h<e;h++)g+=f[h].size;if(g!=b){if(0<d){if(e==f.length-1)return null;b=g+f[e].size-b;e++}else b=g-b;c+=
b}for(;Wc(a.doc,c)!=c;){if(e==(0>d?0:f.length-1))return null;c+=d*f[e-(0>d?1:0)].size;e+=d}return{index:e,lineN:c}}function We(a){a=a.display.view;for(var b=0,c=0;c<a.length;c++){var d=a[c];d.hidden||d.node&&!d.changes||++b}return b}function Ib(a,b){a.doc.highlightFrontier<a.display.viewTo&&a.state.highlight.set(b,Mc(Ag,a))}function Ag(a){var b=a.doc;if(!(b.highlightFrontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=xb(a,b.highlightFrontier),e=[];b.iter(d.line,Math.min(b.first+b.size,
a.display.viewTo+500),function(f){if(d.line>=a.display.viewFrom){var g=f.styles,h=f.text.length>a.options.maxHighlightLength?Na(b.mode,d.state):null,k=ie(a,f,d,!0);h&&(d.state=h);f.styles=k.styles;h=f.styleClasses;(k=k.classes)?f.styleClasses=k:h&&(f.styleClasses=null);k=!g||g.length!=f.styles.length||h!=k&&(!h||!k||h.bgClass!=k.bgClass||h.textClass!=k.textClass);for(h=0;!k&&h<g.length;++h)k=g[h]!=f.styles[h];k&&e.push(d.line);f.stateAfter=d.save()}else f.text.length<=a.options.maxHighlightLength&&
hd(a,f.text,d),f.stateAfter=0==d.line%5?d.save():null;d.nextLine();if(+new Date>c)return Ib(a,a.options.workDelay),!0});b.highlightFrontier=d.line;b.modeFrontier=Math.max(b.modeFrontier,d.line);e.length&&W(a,function(){for(var b=0;b<e.length;b++)Ba(a,e[b],"text")})}}function zd(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return Aa(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&0==We(a))return!1;
Pe(a)&&(Aa(a),b.dims=od(a));var e=d.first+d.size,f=Math.max(b.visible.from-a.options.viewportMargin,d.first),g=Math.min(e,b.visible.to+a.options.viewportMargin);c.viewFrom<f&&20>f-c.viewFrom&&(f=Math.max(d.first,c.viewFrom));c.viewTo>g&&20>c.viewTo-g&&(g=Math.min(e,c.viewTo));ya&&(f=Wc(a.doc,f),g=be(a.doc,g));d=f!=c.viewFrom||g!=c.viewTo||c.lastWrapHeight!=b.wrapperHeight||c.lastWrapWidth!=b.wrapperWidth;e=a.display;0==e.view.length||f>=e.viewTo||g<=e.viewFrom?(e.view=qc(a,f,g),e.viewFrom=f):(e.viewFrom>
f?e.view=qc(a,f,e.viewFrom).concat(e.view):e.viewFrom<f&&(e.view=e.view.slice(Pa(a,f))),e.viewFrom=f,e.viewTo<g?e.view=e.view.concat(qc(a,e.viewTo,g)):e.viewTo>g&&(e.view=e.view.slice(0,Pa(a,g))));e.viewTo=g;c.viewOffset=ma(u(a.doc,c.viewFrom));a.display.mover.style.top=c.viewOffset+"px";g=We(a);if(!d&&0==g&&!b.force&&c.renderedView==c.view&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;a.hasFocus()?f=null:(f=qa())&&wa(a.display.lineDiv,f)?(f={activeElt:f},window.getSelection&&
(e=window.getSelection(),e.anchorNode&&e.extend&&wa(a.display.lineDiv,e.anchorNode)&&(f.anchorNode=e.anchorNode,f.anchorOffset=e.anchorOffset,f.focusNode=e.focusNode,f.focusOffset=e.focusOffset))):f=null;4<g&&(c.lineDiv.style.display="none");Bg(a,c.updateLineNumbers,b.dims);4<g&&(c.lineDiv.style.display="");c.renderedView=c.view;(g=f)&&g.activeElt&&g.activeElt!=qa()&&(g.activeElt.focus(),g.anchorNode&&wa(document.body,g.anchorNode)&&wa(document.body,g.focusNode)&&(f=window.getSelection(),e=document.createRange(),
e.setEnd(g.anchorNode,g.anchorOffset),e.collapse(!1),f.removeAllRanges(),f.addRange(e),f.extend(g.focusNode,g.focusOffset)));ca(c.cursorDiv);ca(c.selectionDiv);c.gutters.style.height=c.sizer.style.minHeight=0;d&&(c.lastWrapHeight=b.wrapperHeight,c.lastWrapWidth=b.wrapperWidth,Ib(a,400));c.updateLineNumbers=null;return!0}function Ve(a,b){for(var c=b.viewport,d=!0;;d=!1){if(!d||!a.options.lineWrapping||b.oldDisplayWidth==Oa(a))if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+ld(a.display)-md(a),c.top)}),
b.visible=vd(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!zd(a,b))break;uc(a);d=Jb(a);Eb(a);hb(a,d);Ad(a,d);b.force=!1}b.signal(a,"update",a);if(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo}function yd(a,b){b=new xc(a,b);if(zd(a,b)){uc(a);Ve(a,b);var c=
Jb(a);Eb(a);hb(a,c);Ad(a,c);b.finish()}}function Bg(a,b,c){function d(b){var d=b.nextSibling;Q&&fa&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b);return d}var e=a.display,f=a.options.lineNumbers,g=e.lineDiv,h=g.firstChild,k=e.view;e=e.viewFrom;for(var l=0;l<k.length;l++){var m=k[l];if(!m.hidden)if(m.node&&m.node.parentNode==g){for(;h!=m.node;)h=d(h);h=f&&null!=b&&b<=e&&m.lineNumber;m.changes&&(-1<N(m.changes,"gutter")&&(h=!1),te(a,m,e,c));h&&(ca(m.lineNumber),
m.lineNumber.appendChild(document.createTextNode(Sc(a.options,e))));h=m.node.nextSibling}else{var p=vg(a,m,e,c);g.insertBefore(p,h)}e+=m.size}for(;h;)h=d(h)}function wd(a){a.display.sizer.style.marginLeft=a.display.gutters.offsetWidth+"px"}function Ad(a,b){a.display.sizer.style.minHeight=b.docHeight+"px";a.display.heightForcer.style.top=b.docHeight+"px";a.display.gutters.style.height=b.docHeight+a.display.barHeight+oa(a)+"px"}function Xe(a){var b=a.display.gutters,c=a.options.gutters;ca(b);for(var d=
0;d<c.length;++d){var e=c[d],f=b.appendChild(t("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none";wd(a)}function Bd(a){var b=N(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function Ye(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;null==b&&a.detail&&a.axis==
a.HORIZONTAL_AXIS&&(b=a.detail);null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta);return{x:b,y:c}}function Cg(a){a=Ye(a);a.x*=aa;a.y*=aa;return a}function Ze(a,b){var c=Ye(b),d=c.x;c=c.y;var e=a.display,f=e.scroller,g=f.scrollWidth>f.clientWidth,h=f.scrollHeight>f.clientHeight;if(d&&g||c&&h){if(c&&fa&&Q){g=b.target;var k=e.view;a:for(;g!=f;g=g.parentNode)for(var l=0;l<k.length;l++)if(k[l].node==g){a.display.currentWheelTarget=g;break a}}!d||xa||ia||null==aa?(c&&null!=
aa&&(b=c*aa,h=a.doc.scrollTop,g=h+e.wrapper.clientHeight,0>b?h=Math.max(0,h+b-50):g=Math.min(a.doc.height,g+b+50),yd(a,{top:h,bottom:g})),20>zc&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=d,e.wheelDY=c,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY;a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&(aa=(aa*zc+a)/(zc+1),++zc)}},200)):(e.wheelDX+=d,e.wheelDY+=
c))):(c&&h&&Hb(a,Math.max(0,f.scrollTop+c*aa)),Ua(a,Math.max(0,f.scrollLeft+d*aa)),(!c||c&&h)&&R(b),e.wheelStartX=null)}}function ja(a,b){b=a[b];a.sort(function(a,b){return z(a.from(),b.from())});b=N(a,b);for(var c=1;c<a.length;c++){var d=a[c],e=a[c-1];if(0<=z(e.to(),d.from())){var f=kc(e.from(),d.from()),g=jc(e.to(),d.to());d=e.empty()?d.from()==d.head:e.from()==e.head;c<=b&&--b;a.splice(--c,2,new B(d?g:f,d?f:g))}}return new ba(a,b)}function va(a,b){return new ba([new B(a,b||a)],0)}function Ca(a){return a.text?
r(a.from.line+a.text.length-1,y(a.text).length+(1==a.text.length?a.from.ch:0)):a.to}function $e(a,b){if(0>z(a,b.from))return a;if(0>=z(a,b.to))return Ca(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;a.line==b.to.line&&(d+=Ca(b).ch-b.to.ch);return r(c,d)}function Cd(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new B($e(e.anchor,b),$e(e.head,b)))}return ja(c,a.sel.primIndex)}function af(a,b,c){return a.line==b.line?r(c.line,a.ch-b.ch+c.ch):r(c.line+
(a.line-b.line),a.ch)}function Dd(a){a.doc.mode=fd(a.options,a.doc.modeOption);Kb(a)}function Kb(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first;Ib(a,100);a.state.modeGen++;a.curOp&&U(a)}function bf(a,b){return 0==b.from.ch&&0==b.to.ch&&""==y(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Ed(a,b,c,d){function e(a,c,e){a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=
a.order&&(a.order=null);Yd(a);Zd(a,e);c=d?d(a):1;c!=a.height&&ka(a,c);O(a,"change",a,b)}function f(a,b){for(var e=[];a<b;++a)e.push(new ib(k[a],c?c[a]:null,d));return e}var g=b.from,h=b.to,k=b.text,l=u(a,g.line),m=u(a,h.line),p=y(k),n=c?c[k.length-1]:null,q=h.line-g.line;b.full?(a.insert(0,f(0,k.length)),a.remove(k.length,a.size-k.length)):bf(a,b)?(h=f(0,k.length-1),e(m,m.text,n),q&&a.remove(g.line,q),h.length&&a.insert(g.line,h)):l==m?1==k.length?e(l,l.text.slice(0,g.ch)+p+l.text.slice(h.ch),n):
(q=f(1,k.length-1),q.push(new ib(p+l.text.slice(h.ch),n,d)),e(l,l.text.slice(0,g.ch)+k[0],c?c[0]:null),a.insert(g.line+1,q)):1==k.length?(e(l,l.text.slice(0,g.ch)+k[0]+m.text.slice(h.ch),c?c[0]:null),a.remove(g.line+1,q)):(e(l,l.text.slice(0,g.ch)+k[0],c?c[0]:null),e(m,p+m.text.slice(h.ch),n),n=f(1,k.length-1),1<q&&a.remove(g.line+1,q-1),a.insert(g.line+1,n));O(a,"change",a,b)}function Xa(a,b,c){function d(a,f,g){if(a.linked)for(var e=0;e<a.linked.length;++e){var k=a.linked[e];if(k.doc!=f){var l=
g&&k.sharedHist;if(!c||l)b(k.doc,l),d(k.doc,a,l)}}}d(a,null,!0)}function cf(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;sd(a);Dd(a);df(a);a.options.lineWrapping||Yc(a);a.options.mode=b.modeOption;U(a)}function df(a){("rtl"==a.doc.direction?Ga:Ta)(a.display.lineDiv,"CodeMirror-rtl")}function Dg(a){W(a,function(){df(a);U(a)})}function Ac(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=
this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function Fd(a,b){var c={from:Uc(b.from),to:Ca(b),text:Ia(a,b.from,b.to)};ef(a,c,b.from.line,b.to.line+1);Xa(a,function(a){return ef(a,c,b.from.line,b.to.line+1)},!0);return c}function ff(a){for(;a.length;)if(y(a).ranges)a.pop();else break}function gf(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g;if(g=e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>f-a.cm.options.historyEventDelay||
"*"==b.origin.charAt(0))){if(e.lastOp==d){ff(e.done);var h=y(e.done)}else e.done.length&&!y(e.done).ranges?h=y(e.done):1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),h=y(e.done)):h=void 0;g=h}if(g){var k=y(h.changes);0==z(b.from,b.to)&&0==z(b.from,k.to)?k.to=Ca(b):h.changes.push(Fd(a,b))}else for((h=y(e.done))&&h.ranges||Bc(a.sel,e.done),h={changes:[Fd(a,b)],generation:e.generation},e.done.push(h);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift();e.done.push(c);
e.generation=++e.maxGeneration;e.lastModTime=e.lastSelTime=f;e.lastOp=e.lastSelOp=d;e.lastOrigin=e.lastSelOrigin=b.origin;k||G(a,"historyAdded")}function Bc(a,b){var c=y(b);c&&c.ranges&&c.equals(a)||b.push(a)}function ef(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(d){d.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=d.markedSpans);++f})}function Eg(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):
b&&b.push(a[c]);return b?b.length?b:null:a}function hf(a,b){var c;if(c=b["spans_"+a.id]){for(var d=[],e=0;e<b.text.length;++e)d.push(Eg(c[e]));c=d}else c=null;a=Vc(a,b);if(!c)return a;if(!a)return c;for(b=0;b<c.length;++b)if(d=c[b],e=a[b],d&&e){var f=0;a:for(;f<e.length;++f){for(var g=e[f],h=0;h<d.length;++h)if(d[h].marker==g.marker)continue a;d.push(g)}}else e&&(c[b]=e);return c}function jb(a,b,c){for(var d=[],e=0;e<a.length;++e){var f=a[e];if(f.ranges)d.push(c?ba.prototype.deepCopy.call(f):f);else{f=
f.changes;var g=[];d.push({changes:g});for(var h=0;h<f.length;++h){var k=f[h],l;g.push({from:k.from,to:k.to,text:k.text});if(b)for(var m in k)(l=m.match(/^spans_(\d+)$/))&&-1<N(b,Number(l[1]))&&(y(g)[m]=k[m],delete k[m])}}}return d}function Gd(a,b,c,d){return d?(a=a.anchor,c&&(d=0>z(b,a),d!=0>z(c,a)?(a=b,b=c):d!=0>z(b,c)&&(b=c)),new B(a,b)):new B(c||b,b)}function Cc(a,b,c,d,e){null==e&&(e=a.cm&&(a.cm.display.shift||a.extend));P(a,new ba([Gd(a.sel.primary(),b,c,e)],0),d)}function jf(a,b,c){for(var d=
[],e=a.cm&&(a.cm.display.shift||a.extend),f=0;f<a.sel.ranges.length;f++)d[f]=Gd(a.sel.ranges[f],b[f],null,e);b=ja(d,a.sel.primIndex);P(a,b,c)}function Hd(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c;P(a,ja(e,a.sel.primIndex),d)}function Fg(a,b,c){c={ranges:b.ranges,update:function(b){this.ranges=[];for(var d=0;d<b.length;d++)this.ranges[d]=new B(w(a,b[d].anchor),w(a,b[d].head))},origin:c&&c.origin};G(a,"beforeSelectionChange",a,c);a.cm&&G(a.cm,"beforeSelectionChange",a.cm,c);return c.ranges!=b.ranges?
ja(c.ranges,c.ranges.length-1):b}function kf(a,b,c){var d=a.history.done,e=y(d);e&&e.ranges?(d[d.length-1]=b,Dc(a,b,c)):P(a,b,c)}function P(a,b,c){Dc(a,b,c);b=a.sel;var d=a.cm?a.cm.curOp.id:NaN,e=a.history,f=c&&c.origin,g;if(!(g=d==e.lastSelOp)&&(g=f&&e.lastSelOrigin==f)&&!(g=e.lastModTime==e.lastSelTime&&e.lastOrigin==f)){g=y(e.done);var h=f.charAt(0);g="*"==h||"+"==h&&g.ranges.length==b.ranges.length&&g.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:
500)}g?e.done[e.done.length-1]=b:Bc(b,e.done);e.lastSelTime=+new Date;e.lastSelOrigin=f;e.lastSelOp=d;c&&!1!==c.clearRedo&&ff(e.undone)}function Dc(a,b,c){if(ea(a,"beforeSelectionChange")||a.cm&&ea(a.cm,"beforeSelectionChange"))b=Fg(a,b,c);var d=c&&c.bias||(0>z(b.primary().head,a.sel.primary().head)?-1:1);lf(a,mf(a,b,d,!0));c&&!1===c.scroll||!a.cm||gb(a.cm)}function lf(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,ee(a.cm)),O(a,"cursorActivity",a))}function nf(a){lf(a,
mf(a,a.sel,null,!1))}function mf(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=b.ranges.length==a.sel.ranges.length&&a.sel.ranges[f],k=Id(a,g.anchor,h&&h.anchor,c,d);h=Id(a,g.head,h&&h.head,c,d);if(e||k!=g.anchor||h!=g.head)e||(e=b.ranges.slice(0,f)),e[f]=new B(k,h)}return e?ja(e,b.primIndex):b}function kb(a,b,c,d,e){var f=u(a,b.line);if(f.markedSpans)for(var g=0;g<f.markedSpans.length;++g){var h=f.markedSpans[g],k=h.marker;if((null==h.from||(k.inclusiveLeft?h.from<=b.ch:h.from<
b.ch))&&(null==h.to||(k.inclusiveRight?h.to>=b.ch:h.to>b.ch))){if(e&&(G(k,"beforeCursorEnter"),k.explicitlyCleared))if(f.markedSpans){--g;continue}else break;if(k.atomic){if(c){g=k.find(0>d?1:-1);h=void 0;if(0>d?k.inclusiveRight:k.inclusiveLeft)g=of(a,g,-d,g&&g.line==b.line?f:null);if(g&&g.line==b.line&&(h=z(g,c))&&(0>d?0>h:0<h))return kb(a,g,b,d,e)}c=k.find(0>d?-1:1);if(0>d?k.inclusiveLeft:k.inclusiveRight)c=of(a,c,d,c.line==b.line?f:null);return c?kb(a,c,b,d,e):null}}}return b}function Id(a,b,c,
d,e){d=d||1;b=kb(a,b,c,d,e)||!e&&kb(a,b,c,d,!0)||kb(a,b,c,-d,e)||!e&&kb(a,b,c,-d,!0);return b?b:(a.cantEdit=!0,r(a.first,0))}function of(a,b,c,d){return 0>c&&0==b.ch?b.line>a.first?w(a,r(b.line-1)):null:0<c&&b.ch==(d||u(a,b.line)).text.length?b.line<a.first+a.size-1?r(b.line+1,0):null:new r(b.line,b.ch+c)}function pf(a){a.setSelection(r(a.firstLine(),0),r(a.lastLine()),pa)}function qf(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){return d.canceled=!0}};
c&&(d.update=function(b,c,g,h){b&&(d.from=w(a,b));c&&(d.to=w(a,c));g&&(d.text=g);void 0!==h&&(d.origin=h)});G(a,"beforeChange",a,d);a.cm&&G(a.cm,"beforeChange",a.cm,d);return d.canceled?null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function lb(a,b,c){if(a.cm){if(!a.cm.curOp)return L(a.cm,lb)(a,b,c);if(a.cm.state.suppressEdits)return}if(ea(a,"beforeChange")||a.cm&&ea(a.cm,"beforeChange"))if(b=qf(a,b,!0),!b)return;if(c=rf&&!c&&gg(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)sf(a,{from:c[d].from,
to:c[d].to,text:d?[""]:b.text,origin:b.origin});else sf(a,b)}function sf(a,b){if(1!=b.text.length||""!=b.text[0]||0!=z(b.from,b.to)){var c=Cd(a,b);gf(a,b,c,a.cm?a.cm.curOp.id:NaN);Lb(a,b,c,Vc(a,b));var d=[];Xa(a,function(a,c){c||-1!=N(d,a.history)||(tf(a.history,b),d.push(a.history));Lb(a,b,null,Vc(a,b))})}}function Ec(a,b,c){if(!a.cm||!a.cm.state.suppressEdits||c){for(var d=a.history,e,f=a.sel,g="undo"==b?d.done:d.undone,h="undo"==b?d.undone:d.done,k=0;k<g.length&&(e=g[k],c?!e.ranges||e.equals(a.sel):
e.ranges);k++);if(k!=g.length){for(d.lastOrigin=d.lastSelOrigin=null;;)if(e=g.pop(),e.ranges){Bc(e,h);if(c&&!e.equals(a.sel)){P(a,e,{clearRedo:!1});return}f=e}else break;var l=[];Bc(f,h);h.push({changes:l,generation:d.generation});d.generation=e.generation||++d.maxGeneration;var m=ea(a,"beforeChange")||a.cm&&ea(a.cm,"beforeChange");c=function(d){var c=e.changes[d];c.origin=b;if(m&&!qf(a,c,!1))return g.length=0,{};l.push(Fd(a,c));var f=d?Cd(a,c):y(g);Lb(a,c,f,hf(a,c));!d&&a.cm&&a.cm.scrollIntoView({from:c.from,
to:Ca(c)});var h=[];Xa(a,function(a,b){b||-1!=N(h,a.history)||(tf(a.history,c),h.push(a.history));Lb(a,c,null,hf(a,c))})};for(d=e.changes.length-1;0<=d;--d)if(f=c(d))return f.v}}}function uf(a,b){if(0!=b&&(a.first+=b,a.sel=new ba(gc(a.sel.ranges,function(a){return new B(r(a.anchor.line+b,a.anchor.ch),r(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){U(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)Ba(a.cm,d,"gutter")}}function Lb(a,b,c,d){if(a.cm&&!a.cm.curOp)return L(a.cm,
Lb)(a,b,c,d);if(b.to.line<a.first)uf(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);uf(a,e);b={from:r(a.first,0),to:r(b.to.line+e,b.to.ch),text:[y(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:r(e,u(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=Ia(a,b.from,b.to);c||(c=Cd(a,b));a.cm?Gg(a.cm,b,d):Ed(a,b,d);Dc(a,c,pa)}}function Gg(a,b,c){var d=a.doc,e=a.display,
f=b.from,g=b.to,h=!1,k=f.line;a.options.lineWrapping||(k=D(la(u(d,f.line))),d.iter(k,g.line+1,function(a){if(a==e.maxLine)return h=!0}));-1<d.sel.contains(b.from,b.to)&&ee(a);Ed(d,b,c,Ie(a));a.options.lineWrapping||(d.iter(k,f.line+b.text.length,function(a){var b=mc(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,h=!1)}),h&&(a.curOp.updateMaxLine=!0));ng(d,f.line);Ib(a,400);c=b.text.length-(g.line-f.line)-1;b.full?U(a):f.line!=g.line||1!=b.text.length||bf(a.doc,b)?U(a,f.line,
g.line+1,c):Ba(a,f.line,"text");c=ea(a,"changes");if((d=ea(a,"change"))||c)b={from:f,to:g,text:b.text,removed:b.removed,origin:b.origin},d&&O(a,"change",a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function mb(a,b,c,d,e){d||(d=c);if(0>z(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=a.splitLines(b));lb(a,{from:c,to:d,text:b,origin:e})}function vf(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function wf(a,b,c,d){for(var e=0;e<a.length;++e){var f=
a[e],g=!0;if(f.ranges)for(f.copied||(f=a[e]=f.deepCopy(),f.copied=!0),g=0;g<f.ranges.length;g++)vf(f.ranges[g].anchor,b,c,d),vf(f.ranges[g].head,b,c,d);else{for(var h=0;h<f.changes.length;++h){var k=f.changes[h];if(c<k.from.line)k.from=r(k.from.line+d,k.from.ch),k.to=r(k.to.line+d,k.to.ch);else if(b<=k.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function tf(a,b){var c=b.from.line,d=b.to.line;b=b.text.length-(d-c)-1;wf(a.done,c,d,b);wf(a.undone,c,d,b)}function Mb(a,b,c,d){var e=b,f=b;"number"==
typeof b?f=u(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):e=D(b);if(null==e)return null;d(f,e)&&a.cm&&Ba(a.cm,e,c);return f}function Nb(a){this.lines=a;this.parent=null;for(var b=0,c=0;c<a.length;++c)a[c].parent=this,b+=a[c].height;this.height=b}function Ob(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d];b+=e.chunkSize();c+=e.height;e.parent=this}this.size=b;this.height=c;this.parent=null}function Hg(a,b,c,d){var e=new Pb(a,c,d),f=a.cm;f&&e.noHScroll&&(f.display.alignWidgets=
!0);Mb(a,b,"widget",function(b){var d=b.widgets||(b.widgets=[]);null==e.insertAt?d.push(e):d.splice(Math.min(d.length-1,Math.max(0,e.insertAt)),0,e);e.line=b;f&&!La(a,b)&&(d=ma(b)<a.scrollTop,ka(b,b.height+Bb(e)),d&&vc(f,e.height),f.curOp.forceUpdate=!0);return!0});O(f,"lineWidgetAdded",f,e,"number"==typeof b?b:D(b));return e}function nb(a,b,c,d,e){if(d&&d.shared)return Ig(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return L(a.cm,nb)(a,b,c,d,e);var f=new Da(a,e);e=z(b,c);d&&Ha(d,f,!1);if(0<e||0==e&&!1!==f.clearWhenEmpty)return f;
f.replacedWith&&(f.collapsed=!0,f.widgetNode=ab("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||f.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(f.widgetNode.insertLeft=!0));if(f.collapsed){if(ae(a,b.line,b,c,f)||b.line!=c.line&&ae(a,c.line,b,c,f))throw Error("Inserting collapsed marker partially overlapping an existing one");ya=!0}f.addToHistory&&gf(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var g=b.line,h=a.cm,k;a.iter(g,c.line+1,function(a){h&&f.collapsed&&
!h.options.lineWrapping&&la(a)==h.display.maxLine&&(k=!0);f.collapsed&&g!=b.line&&ka(a,0);var d=new lc(f,g==b.line?b.ch:null,g==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.attachLine(a);++g});f.collapsed&&a.iter(b.line,c.line+1,function(b){La(a,b)&&ka(b,0)});f.clearOnEnter&&v(f,"beforeCursorEnter",function(){return f.clear()});f.readOnly&&(rf=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());f.collapsed&&(f.id=++xf,f.atomic=!0);if(h){k&&
(h.curOp.updateMaxLine=!0);if(f.collapsed)U(h,b.line,c.line+1);else if(f.className||f.title||f.startStyle||f.endStyle||f.css)for(d=b.line;d<=c.line;d++)Ba(h,d,"text");f.atomic&&nf(h.doc);O(h,"markerAdded",h,f)}return f}function Ig(a,b,c,d,e){d=Ha(d);d.shared=!1;var f=[nb(a,b,c,d,e)],g=f[0],h=d.widgetNode;Xa(a,function(a){h&&(d.widgetNode=h.cloneNode(!0));f.push(nb(a,w(a,b),w(a,c),d,e));for(var k=0;k<a.linked.length;++k)if(a.linked[k].isParent)return;g=y(f)});return new Qb(f,g)}function yf(a){return a.findMarks(r(a.first,
0),a.clipPos(r(a.lastLine())),function(a){return a.parent})}function Jg(a){for(var b=function(b){b=a[b];var d=[b.primary.doc];Xa(b.primary.doc,function(a){return d.push(a)});for(var c=0;c<b.markers.length;c++){var g=b.markers[c];-1==N(d,g.doc)&&(g.parent=null,b.markers.splice(c--,1))}},c=0;c<a.length;c++)b(c)}function Kg(a){var b=this;zf(b);if(!K(b,a)&&!ua(b.display,a)){R(a);C&&(Af=+new Date);var c=Sa(b,a,!0),d=a.dataTransfer.files;if(c&&!b.isReadOnly())if(d&&d.length&&window.FileReader&&window.File)for(var e=
d.length,f=Array(e),g=0,h=function(a,d){if(!b.options.allowDropFileTypes||-1!=N(b.options.allowDropFileTypes,a.type)){var h=new FileReader;h.onload=L(b,function(){var a=h.result;/[\x00-\x08\x0e-\x1f]{2}/.test(a)&&(a="");f[d]=a;++g==e&&(c=w(b.doc,c),a={from:c,to:c,text:b.doc.splitLines(f.join(b.doc.lineSeparator())),origin:"paste"},lb(b.doc,a),kf(b.doc,va(c,Ca(a))))});h.readAsText(a)}},k=0;k<e;++k)h(d[k],k);else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),setTimeout(function(){return b.display.input.focus()},
20);else try{if(h=a.dataTransfer.getData("Text")){b.state.draggingText&&!b.state.draggingText.copy&&(k=b.listSelections());Dc(b.doc,va(c,c));if(k)for(d=0;d<k.length;++d)mb(b.doc,"",k[d].anchor,k[d].head,"drag");b.replaceSelection(h,"around","paste");b.display.input.focus()}}catch(l){}}}function zf(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function Bf(a){if(document.getElementsByClassName)for(var b=document.getElementsByClassName("CodeMirror"),
c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function Lg(){var a;v(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null;Bf(Mg)},100))});v(window,"blur",function(){return Bf(Fb)})}function Mg(a){var b=a.display;if(b.lastWrapHeight!=b.wrapper.clientHeight||b.lastWrapWidth!=b.wrapper.clientWidth)b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,a.setSize()}function Ng(a){var b=a.split(/-(?!$)/);a=b[b.length-1];for(var c,d,e,f,g=0;g<b.length-1;g++){var h=
b[g];if(/^(cmd|meta|m)$/i.test(h))f=!0;else if(/^a(lt)?$/i.test(h))c=!0;else if(/^(c|ctrl|control)$/i.test(h))d=!0;else if(/^s(hift)?$/i.test(h))e=!0;else throw Error("Unrecognized modifier name: "+h);}c&&(a="Alt-"+a);d&&(a="Ctrl-"+a);f&&(a="Cmd-"+a);e&&(a="Shift-"+a);return a}function Og(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!/^(name|fallthrough|(de|at)tach)$/.test(c)){if("..."!=d)for(var e=gc(c.split(" "),Ng),f=0;f<e.length;f++){if(f==e.length-1){var g=e.join(" ");var h=
d}else g=e.slice(0,f+1).join(" "),h="...";var k=b[g];if(!k)b[g]=h;else if(k!=h)throw Error("Inconsistent bindings for "+g);}delete a[c]}}for(var l in b)a[l]=b[l];return a}function ob(a,b,c,d){b=Fc(b);var e=b.call?b.call(a,d):b[a];if(!1===e)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return ob(a,b.fallthrough,c,d);for(e=0;e<b.fallthrough.length;e++){var f=ob(a,b.fallthrough[e],c,d);
if(f)return f}}}function Cf(a){a="string"==typeof a?a:Ea[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a}function Df(a,b,c){var d=a;b.altKey&&"Alt"!=d&&(a="Alt-"+a);(Ef?b.metaKey:b.ctrlKey)&&"Ctrl"!=d&&(a="Ctrl-"+a);(Ef?b.ctrlKey:b.metaKey)&&"Cmd"!=d&&(a="Cmd-"+a);!c&&b.shiftKey&&"Shift"!=d&&(a="Shift-"+a);return a}function Ff(a,b){if(ia&&34==a.keyCode&&a["char"])return!1;var c=Ea[a.keyCode];return null==c||a.altGraphKey?!1:Df(c,a,b)}function Fc(a){return"string"==typeof a?Rb[a]:a}function pb(a,
b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&0>=z(f.from,y(d).to);){var g=d.pop();if(0>z(g.from,f.from)){f.from=g.from;break}}d.push(f)}W(a,function(){for(var b=d.length-1;0<=b;b--)mb(a.doc,"",d[b].from,d[b].to,"+delete");gb(a)})}function Gf(a,b){var c=u(a.doc,b),d=la(c);d!=c&&(b=D(d));return bd(!0,a,d,b,1)}function Hf(a,b){var c=Gf(a,b.line),d=u(a.doc,c.line);a=za(d,a.doc.direction);return a&&0!=a[0].level?c:(d=Math.max(0,d.text.search(/\S/)),r(c.line,b.line==
c.line&&b.ch<=d&&b.ch?0:d,c.sticky))}function Gc(a,b,c){if("string"==typeof b&&(b=Sb[b],!b))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=Hc}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function Pg(a,b,c){for(var d=0;d<a.state.keyMaps.length;d++){var e=ob(b,a.state.keyMaps[d],c,a);if(e)return e}return a.options.extraKeys&&ob(b,a.options.extraKeys,c,a)||ob(b,a.options.keyMap,c,a)}function Tb(a,
b,c,d){var e=a.state.keySeq;if(e){if(Cf(b))return"handled";Qg.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())});b=e+" "+b}d=Pg(a,b,d);"multi"==d&&(a.state.keySeq=b);"handled"==d&&O(a,"keyHandled",a,b,c);if("handled"==d||"multi"==d)R(c),td(a);return e&&!d&&/\'$/.test(b)?(R(c),!0):!!d}function If(a,b){var c=Ff(b,!0);return c?b.shiftKey&&!a.state.keySeq?Tb(a,"Shift-"+c,b,function(b){return Gc(a,b,!0)})||Tb(a,c,b,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):
b.motion)return Gc(a,b)}):Tb(a,c,b,function(b){return Gc(a,b)}):!1}function Rg(a,b,c){return Tb(a,"'"+c+"'",b,function(b){return Gc(a,b,!0)})}function Jf(a){this.curOp.focus=qa();if(!K(this,a)){C&&11>A&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||a.shiftKey;var c=If(this,a);ia&&(Jd=c?b:null,!c&&88==b&&!Sg&&(fa?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||Tg(this)}}function Tg(a){function b(a){18!=
a.keyCode&&a.altKey||(Ta(c,"CodeMirror-crosshair"),Z(document,"keyup",b),Z(document,"mouseover",b))}var c=a.display.lineDiv;Ga(c,"CodeMirror-crosshair");v(document,"keyup",b);v(document,"mouseover",b)}function Kf(a){16==a.keyCode&&(this.doc.sel.shift=!1);K(this,a)}function Lf(a){if(!(ua(this.display,a)||K(this,a)||a.ctrlKey&&!a.altKey||fa&&a.metaKey)){var b=a.keyCode,c=a.charCode;if(ia&&b==Jd)Jd=null,R(a);else if(!ia||a.which&&!(10>a.which)||!If(this,a))if(b=String.fromCharCode(null==c?b:c),"\b"!=
b&&!Rg(this,a,b))this.display.input.onKeyPress(a)}}function Ug(a,b){var c=+new Date;if(Ub&&Ub.compare(c,a,b))return Vb=Ub=null,"triple";if(Vb&&Vb.compare(c,a,b))return Ub=new Kd(c,a,b),Vb=null,"double";Vb=new Kd(c,a,b);Ub=null;return"single"}function Mf(a){var b=this.display;if(!(K(this,a)||b.activeTouch&&b.input.supportsTouch()))if(b.input.ensurePolled(),b.shift=a.shiftKey,ua(b,a))Q||(b.scroller.draggable=!1,setTimeout(function(){return b.scroller.draggable=!0},100));else if(!Ld(this,a,"gutterClick",
!0)){var c=Sa(this,a),d=ge(a),e=c?Ug(c,d):"single";window.focus();1==d&&this.state.selectingText&&this.state.selectingText(a);c&&Vg(this,d,c,e,a)||(1==d?c?Wg(this,c,e,a):(a.target||a.srcElement)==b.scroller&&R(a):2==d?(c&&Cc(this.doc,c),setTimeout(function(){return b.input.focus()},20)):3==d&&(Md?Nf(this,a):Me(this)))}}function Vg(a,b,c,d,e){var f="Click";"double"==d?f="Double"+f:"triple"==d&&(f="Triple"+f);return Tb(a,Df((1==b?"Left":2==b?"Middle":"Right")+f,e),e,function(b){"string"==typeof b&&
(b=Sb[b]);if(!b)return!1;var d=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),d=b(a,c)!=Hc}finally{a.state.suppressEdits=!1}return d})}function Wg(a,b,c,d){C?setTimeout(Mc(Le,a),0):a.curOp.focus=qa();var e=a.getOption("configureMouse");e=e?e(a,c,d):{};null==e.unit&&(e.unit=(Xg?d.shiftKey&&d.metaKey:d.altKey)?"rectangle":"single"==c?"char":"double"==c?"word":"line");if(null==e.extend||a.doc.extend)e.extend=a.doc.extend||d.shiftKey;null==e.addNew&&(e.addNew=fa?d.metaKey:d.ctrlKey);null==e.moveOnDrag&&
(e.moveOnDrag=!(fa?d.altKey:d.ctrlKey));var f=a.doc.sel,g;a.options.dragDrop&&Yg&&!a.isReadOnly()&&"single"==c&&-1<(g=f.contains(b))&&(0>z((g=f.ranges[g]).from(),b)||0<b.xRel)&&(0<z(g.to(),b)||0>b.xRel)?Zg(a,d,b,e):$g(a,d,b,e)}function Zg(a,b,c,d){var e=a.display,f=!1,g=L(a,function(b){Q&&(e.scroller.draggable=!1);a.state.draggingText=!1;Z(document,"mouseup",g);Z(document,"mousemove",h);Z(e.scroller,"dragstart",k);Z(e.scroller,"drop",g);f||(R(b),d.addNew||Cc(a.doc,c,null,null,d.extend),Q||C&&9==A?
setTimeout(function(){document.body.focus();e.input.focus()},20):e.input.focus())}),h=function(a){f=f||10<=Math.abs(b.clientX-a.clientX)+Math.abs(b.clientY-a.clientY)},k=function(){return f=!0};Q&&(e.scroller.draggable=!0);a.state.draggingText=g;g.copy=!d.moveOnDrag;e.scroller.dragDrop&&e.scroller.dragDrop();v(document,"mouseup",g);v(document,"mousemove",h);v(e.scroller,"dragstart",k);v(e.scroller,"drop",g);Me(a);setTimeout(function(){return e.input.focus()},20)}function Of(a,b,c){if("char"==c)return new B(b,
b);if("word"==c)return a.findWordAt(b);if("line"==c)return new B(r(b.line,0),w(a.doc,r(b.line+1,0)));a=c(a,b);return new B(a.from,a.to)}function $g(a,b,c,d){function e(b){if(0!=z(q,b))if(q=b,"rectangle"==d.unit){var e=[],f=a.options.tabSize,g=da(u(k,c.line).text,c.ch,f),h=da(u(k,b.line).text,b.ch,f),m=Math.min(g,h);g=Math.max(g,h);h=Math.min(c.line,b.line);for(var t=Math.min(a.lastLine(),Math.max(c.line,b.line));h<=t;h++){var F=u(k,h).text,v=Nc(F,m,f);m==g?e.push(new B(r(h,v),r(h,v))):F.length>v&&
e.push(new B(r(h,v),r(h,Nc(F,g,f))))}e.length||e.push(new B(c,c));P(k,ja(l.ranges.slice(0,p).concat(e),p),{origin:"*mouse",scroll:!1});a.scrollIntoView(b)}else e=n,m=Of(a,b,d.unit),b=e.anchor,0<z(m.anchor,b)?(f=m.head,b=kc(e.from(),m.anchor)):(f=m.anchor,b=jc(e.to(),m.head)),e=l.ranges.slice(0),e[p]=new B(w(k,b),f),P(k,ja(e,p),Nd)}function f(b){var c=++x,g=Sa(a,b,!0,"rectangle"==d.unit);if(g)if(0!=z(g,q)){a.curOp.focus=qa();e(g);var l=vd(h,k);(g.line>=l.to||g.line<l.from)&&setTimeout(L(a,function(){x==
c&&f(b)}),150)}else{var m=b.clientY<t.top?-20:b.clientY>t.bottom?20:0;m&&setTimeout(L(a,function(){x==c&&(h.scroller.scrollTop+=m,f(b))}),50)}}function g(b){a.state.selectingText=!1;x=Infinity;R(b);h.input.focus();Z(document,"mousemove",y);Z(document,"mouseup",A);k.history.lastSelOrigin=null}var h=a.display,k=a.doc;R(b);var l=k.sel,m=l.ranges;if(d.addNew&&!d.extend){var p=k.sel.contains(c);var n=-1<p?m[p]:new B(c,c)}else n=k.sel.primary(),p=k.sel.primIndex;"rectangle"==d.unit?(d.addNew||(n=new B(c,
c)),c=Sa(a,b,!0,!0),p=-1):(b=Of(a,c,d.unit),n=d.extend?Gd(n,b.anchor,b.head,d.extend):b);d.addNew?-1==p?(p=m.length,P(k,ja(m.concat([n]),p),{scroll:!1,origin:"*mouse"})):1<m.length&&m[p].empty()&&"char"==d.unit&&!d.extend?(P(k,ja(m.slice(0,p).concat(m.slice(p+1)),0),{scroll:!1,origin:"*mouse"}),l=k.sel):Hd(k,p,n,Nd):(p=0,P(k,new ba([n],0),Nd),l=k.sel);var q=c,t=h.wrapper.getBoundingClientRect(),x=0,y=L(a,function(a){ge(a)?f(a):g(a)}),A=L(a,g);a.state.selectingText=A;v(document,"mousemove",y);v(document,
"mouseup",A)}function Ld(a,b,c,d){try{var e=b.clientX;var f=b.clientY}catch(k){return!1}if(e>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&R(b);d=a.display;var g=d.lineDiv.getBoundingClientRect();if(f>g.bottom||!ea(a,c))return cd(b);f-=g.top-d.viewOffset;for(g=0;g<a.options.gutters.length;++g){var h=d.gutters.childNodes[g];if(h&&h.getBoundingClientRect().right>=e)return e=Ja(a.doc,f),G(a,c,a,e,a.options.gutters[g],b),cd(b)}}function Nf(a,b){var c;(c=ua(a.display,b))||(c=
ea(a,"gutterContextMenu")?Ld(a,b,"gutterContextMenu",!1):!1);if(!c&&!K(a,b,"contextmenu"))a.display.input.onContextMenu(b)}function Pf(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");Db(a)}function Wb(a){Xe(a);U(a);Oe(a)}function ah(a,b,c){!b!=!(c&&c!=qb)&&(c=a.display.dragFunctions,b=b?v:Z,b(a.display.scroller,"dragstart",c.start),b(a.display.scroller,"dragenter",c.enter),b(a.display.scroller,"dragover",c.over),
b(a.display.scroller,"dragleave",c.leave),b(a.display.scroller,"drop",c.drop))}function bh(a){a.options.lineWrapping?(Ga(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(Ta(a.display.wrapper,"CodeMirror-wrap"),Yc(a));sd(a);U(a);Db(a);setTimeout(function(){return hb(a)},100)}function E(a,b){var c=this;if(!(this instanceof E))return new E(a,b);this.options=b=b?Ha(b):{};Ha(Qf,b,!1);Bd(b);var d=b.value;"string"==typeof d&&(d=new V(d,b.mode,null,b.lineSeparator,
b.direction));this.doc=d;var e=new E.inputStyles[b.inputStyle](this);a=this.display=new fg(a,d,e);a.wrapper.CodeMirror=this;Xe(this);Pf(this);b.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");Te(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Ya,keySeq:null,specialChars:null};b.autofocus&&!sb&&a.input.focus();C&&11>A&&setTimeout(function(){return c.display.input.reset(!0)},
20);ch(this);Rf||(Lg(),Rf=!0);Va(this);this.curOp.forceUpdate=!0;cf(this,d);b.autofocus&&!sb||this.hasFocus()?setTimeout(Mc(ud,this),20):Fb(this);for(var f in Ic)if(Ic.hasOwnProperty(f))Ic[f](c,b[f],qb);Pe(this);b.finishInit&&b.finishInit(this);for(d=0;d<Od.length;++d)Od[d](c);Wa(this);Q&&b.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}function ch(a){function b(){d.activeTouch&&(e=setTimeout(function(){return d.activeTouch=null},
1E3),f=d.activeTouch,f.end=+new Date)}function c(a,b){if(null==b.left)return!0;var d=b.left-a.left;a=b.top-a.top;return 400<d*d+a*a}var d=a.display;v(d.scroller,"mousedown",L(a,Mf));C&&11>A?v(d.scroller,"dblclick",L(a,function(b){if(!K(a,b)){var d=Sa(a,b);!d||Ld(a,b,"gutterClick",!0)||ua(a.display,b)||(R(b),b=a.findWordAt(d),Cc(a.doc,b.anchor,b.head))}})):v(d.scroller,"dblclick",function(b){return K(a,b)||R(b)});Md||v(d.scroller,"contextmenu",function(b){return Nf(a,b)});var e,f={end:0};v(d.scroller,
"touchstart",function(b){var c;if(c=!K(a,b))1!=b.touches.length?c=!1:(c=b.touches[0],c=1>=c.radiusX&&1>=c.radiusY),c=!c;c&&(d.input.ensurePolled(),clearTimeout(e),c=+new Date,d.activeTouch={start:c,moved:!1,prev:300>=c-f.end?f:null},1==b.touches.length&&(d.activeTouch.left=b.touches[0].pageX,d.activeTouch.top=b.touches[0].pageY))});v(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)});v(d.scroller,"touchend",function(e){var f=d.activeTouch;if(f&&!ua(d,e)&&null!=f.left&&!f.moved&&
300>new Date-f.start){var g=a.coordsChar(d.activeTouch,"page");f=!f.prev||c(f,f.prev)?new B(g,g):!f.prev.prev||c(f,f.prev.prev)?a.findWordAt(g):new B(r(g.line,0),w(a.doc,r(g.line+1,0)));a.setSelection(f.anchor,f.head);a.focus();R(e)}b()});v(d.scroller,"touchcancel",b);v(d.scroller,"scroll",function(){d.scroller.clientHeight&&(Hb(a,d.scroller.scrollTop),Ua(a,d.scroller.scrollLeft,!0),G(a,"scroll",a))});v(d.scroller,"mousewheel",function(b){return Ze(a,b)});v(d.scroller,"DOMMouseScroll",function(b){return Ze(a,
b)});v(d.wrapper,"scroll",function(){return d.wrapper.scrollTop=d.wrapper.scrollLeft=0});d.dragFunctions={enter:function(b){K(a,b)||wb(b)},over:function(b){if(!K(a,b)){var d=Sa(a,b);if(d){var c=document.createDocumentFragment();Ke(a,d,c);a.display.dragCursor||(a.display.dragCursor=t("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv));Y(a.display.dragCursor,c)}wb(b)}},start:function(b){if(C&&(!a.state.draggingText||100>
+new Date-Af))wb(b);else if(!K(a,b)&&!ua(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.effectAllowed="copyMove",b.dataTransfer.setDragImage&&!Sf)){var d=t("img",null,null,"position: fixed; left: 0; top: 0;");d.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw\x3d\x3d";ia&&(d.width=d.height=1,a.display.wrapper.appendChild(d),d._top=d.offsetTop);b.dataTransfer.setDragImage(d,0,0);ia&&d.parentNode.removeChild(d)}},drop:L(a,Kg),leave:function(b){K(a,
b)||zf(a)}};var g=d.input.getField();v(g,"keyup",function(b){return Kf.call(a,b)});v(g,"keydown",L(a,Jf));v(g,"keypress",L(a,Lf));v(g,"focus",function(b){return ud(a,b)});v(g,"blur",function(b){return Fb(a,b)})}function Xb(a,b,c,d){var e=a.doc,f;null==c&&(c="add");"smart"==c&&(e.mode.indent?f=xb(a,b).state:c="prev");var g=a.options.tabSize,h=u(e,b),k=da(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var l=h.text.match(/^\s*/)[0];if(!d&&!/\S/.test(h.text)){var m=0;c="not"}else if("smart"==c&&(m=
e.mode.indent(f,h.text.slice(l.length),h.text),m==Hc||150<m)){if(!d)return;c="prev"}"prev"==c?m=b>e.first?da(u(e,b-1).text,null,g):0:"add"==c?m=k+a.options.indentUnit:"subtract"==c?m=k-a.options.indentUnit:"number"==typeof c&&(m=k+c);m=Math.max(0,m);c="";d=0;if(a.options.indentWithTabs)for(a=Math.floor(m/g);a;--a)d+=g,c+="\t";d<m&&(c+=Oc(m-d));if(c!=l)return mb(e,c,r(b,0),r(b,l.length),"+input"),h.stateAfter=null,!0;for(g=0;g<e.sel.ranges.length;g++)if(h=e.sel.ranges[g],h.head.line==b&&h.head.ch<
l.length){b=r(b,l.length);Hd(e,g,new B(b,b));break}}function Pd(a,b,c,d,e){var f=a.doc;a.display.shift=!1;d||(d=f.sel);var g=a.state.pasteIncoming||"paste"==e,h=Qd(b),k=null;if(g&&1<d.ranges.length)if(X&&X.text.join("\n")==b){if(0==d.ranges.length%X.text.length){k=[];for(var l=0;l<X.text.length;l++)k.push(f.splitLines(X.text[l]))}}else h.length==d.ranges.length&&a.options.pasteLinesPerSelection&&(k=gc(h,function(a){return[a]}));for(l=d.ranges.length-1;0<=l;l--){var m=d.ranges[l];var p=m.from(),n=
m.to();m.empty()&&(c&&0<c?p=r(p.line,p.ch-c):a.state.overwrite&&!g?n=r(n.line,Math.min(u(f,n.line).text.length,n.ch+y(h).length)):X&&X.lineWise&&X.text.join("\n")==b&&(p=n=r(p.line,0)));m=a.curOp.updateInput;p={from:p,to:n,text:k?k[l%k.length]:h,origin:e||(g?"paste":a.state.cutIncoming?"cut":"+input")};lb(a.doc,p);O(a,"inputRead",a,p)}b&&!g&&Tf(a,b);gb(a);a.curOp.updateInput=m;a.curOp.typing=!0;a.state.pasteIncoming=a.state.cutIncoming=!1}function Uf(a,b){var c=a.clipboardData&&a.clipboardData.getData("Text");
if(c)return a.preventDefault(),b.isReadOnly()||b.options.disableInput||W(b,function(){return Pd(b,c,0,null,"paste")}),!0}function Tf(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;0<=d;d--){var e=c.ranges[d];if(!(100<e.head.ch||d&&c.ranges[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),g=!1;if(f.electricChars)for(var h=0;h<f.electricChars.length;h++){if(-1<b.indexOf(f.electricChars.charAt(h))){g=Xb(a,e.head.line,"smart");break}}else f.electricInput&&
f.electricInput.test(u(a.doc,e.head.line).text.slice(0,e.head.ch))&&(g=Xb(a,e.head.line,"smart"));g&&O(a,"electricInput",a,e.head.line)}}}function Vf(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line;e={anchor:r(e,0),head:r(e+1,0)};c.push(e);b.push(a.getRange(e.anchor,e.head))}return{text:b,ranges:c}}function Wf(a,b){a.setAttribute("autocorrect","off");a.setAttribute("autocapitalize","off");a.setAttribute("spellcheck",!!b)}function Xf(){var a=t("textarea",
null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),b=t("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");Q?a.style.width="1000px":a.setAttribute("wrap","off");Yb&&(a.style.border="1px solid black");Wf(a);return b}function Rd(a,b,c,d,e){function f(d){var f=e?ce(a.cm,k,b,c):ad(k,b,c);if(null==f){if(d=!d)d=b.line+c,d<a.first||d>=a.first+a.size?d=!1:(b=new r(d,b.ch,b.sticky),d=k=u(a,d));if(d)b=bd(e,a.cm,k,b.line,c);else return!1}else b=
f;return!0}var g=b,h=c,k=u(a,b.line);if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var l=null;d="group"==d;for(var m=a.cm&&a.cm.getHelper(b,"wordChars"),p=!0;!(0>c)||f(!p);p=!1){var n=k.text.charAt(b.ch)||"\n";n=hc(n,m)?"w":d&&"\n"==n?"n":!d||/\s/.test(n)?null:"p";!d||p||n||(n="s");if(l&&l!=n){0>c&&(c=1,f(),b.sticky="after");break}n&&(l=n);if(0<c&&!f(!p))break}}h=Id(a,b,g,h,!0);Tc(g,h)&&(h.hitSide=!0);return h}function Yf(a,b,c,d){var e=a.doc,f=b.left;if("page"==d){var g=
Math.max(Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight)-.5*Qa(a.display),3);g=(0<c?b.bottom:b.top)+c*g}else"line"==d&&(g=0<c?b.bottom+3:b.top-3);for(;;){b=qd(a,f,g);if(!b.outside)break;if(0>c?0>=g:g>=e.height){b.hitSide=!0;break}g+=5*c}return b}function Zf(a,b){var c=nd(a,b.line);if(!c||c.hidden)return null;var d=u(a.doc,b.line);c=ze(c,d,b.line);a=za(d,a.doc.direction);d="left";a&&(d=Zc(a,b.ch)%2?"right":"left");b=Ae(c.map,b.ch,d);b.offset="right"==
b.collapse?b.end:b.start;return b}function dh(a){for(;a;a=a.parentNode)if(/CodeMirror-gutter-wrapper/.test(a.className))return!0;return!1}function rb(a,b){b&&(a.bad=!0);return a}function eh(a,b,c,d,e){function f(a){return function(b){return b.id==a}}function g(a){a&&(l&&(k+=m,l=!1),k+=a)}function h(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(null!=c)g(c||b.textContent.replace(/\u200b/g,""));else{c=b.getAttribute("cm-marker");var q;if(c)b=a.findMarks(r(d,0),r(e+1,0),f(+c)),b.length&&(q=
b[0].find(0))&&g(Ia(a.doc,q.from,q.to).join(m));else if("false"!=b.getAttribute("contenteditable")){(q=/^(pre|div|p)$/i.test(b.nodeName))&&l&&(k+=m,l=!1);for(c=0;c<b.childNodes.length;c++)h(b.childNodes[c]);q&&(l=!0)}}}else 3==b.nodeType&&g(b.nodeValue)}for(var k="",l=!1,m=a.doc.lineSeparator();;){h(b);if(b==c)break;b=b.nextSibling}return k}function Jc(a,b,c){if(b==a.display.lineDiv){var d=a.display.lineDiv.childNodes[c];if(!d)return rb(a.clipPos(r(a.display.viewTo-1)),!0);b=null;c=0}else for(d=b;;d=
d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return fh(f,b,c)}}function fh(a,b,c){function d(b,d,c){for(var e=-1;e<(l?l.length:0);e++)for(var f=0>e?k.map:l[e],g=0;g<f.length;g+=3){var h=f[g+2];if(h==b||h==d){d=D(0>e?a.line:a.rest[e]);e=f[g]+c;if(0>c||h!=b)e=f[g+(c?1:0)];return r(d,e)}}}var e=a.text.firstChild,f=!1;if(!b||!wa(e,b))return rb(r(D(a.line),0),!0);
if(b==e&&(f=!0,b=e.childNodes[c],c=0,!b))return c=a.rest?y(a.rest):a.line,rb(r(D(c),c.text.length),f);var g=3==b.nodeType?b:null,h=b;g||1!=b.childNodes.length||3!=b.firstChild.nodeType||(g=b.firstChild,c&&(c=g.nodeValue.length));for(;h.parentNode!=e;)h=h.parentNode;var k=a.measure,l=k.maps;if(b=d(g,h,c))return rb(b,f);e=h.nextSibling;for(g=g?g.nodeValue.length-c:0;e;e=e.nextSibling){if(b=d(e,e.firstChild,0))return rb(r(b.line,b.ch-g),f);g+=e.textContent.length}for(h=h.previousSibling;h;h=h.previousSibling){if(b=
d(h,h.firstChild,-1))return rb(r(b.line,b.ch+c),f);c+=h.textContent.length}}var T=navigator.userAgent,$f=navigator.platform,xa=/gecko\/\d/i.test(T),ag=/MSIE \d/.test(T),bg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(T),Zb=/Edge\/(\d+)/.exec(T),C=ag||bg||Zb,A=C&&(ag?document.documentMode||6:+(Zb||bg)[1]),Q=!Zb&&/WebKit\//.test(T),gh=Q&&/Qt\/\d+\.\d+/.test(T),rc=!Zb&&/Chrome\//.test(T),ia=/Opera\//.test(T),Sf=/Apple Computer/.test(navigator.vendor),hh=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(T),zg=/PhantomJS/.test(T),
Yb=!Zb&&/AppleWebKit/.test(T)&&/Mobile\/\w+/.test(T),sc=/Android/.test(T),sb=Yb||sc||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(T),fa=Yb||/Mac/.test($f),Xg=/\bCrOS\b/.test(T),ih=/win/i.test($f),Za=ia&&T.match(/Version\/(\d*\.\d*)/);Za&&(Za=Number(Za[1]));Za&&15<=Za&&(ia=!1,Q=!0);var Ef=fa&&(gh||ia&&(null==Za||12.11>Za)),Md=xa||C&&9<=A,Ta=function(a,b){var c=a.className;if(b=Fa(b).exec(c)){var d=c.slice(b.index+b[0].length);a.className=c.slice(0,b.index)+(d?b[1]+d:"")}};var yb=document.createRange?
function(a,b,c,d){var e=document.createRange();e.setEnd(d||a,c);e.setStart(a,b);return e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(e){return d}d.collapse(!0);d.moveEnd("character",c);d.moveStart("character",b);return d};var $b=function(a){a.select()};Yb?$b=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:C&&($b=function(a){try{a.select()}catch(b){}});var Ya=function(){this.id=null};Ya.prototype.set=function(a,b){clearTimeout(this.id);
this.id=setTimeout(b,a)};var Hc={toString:function(){return"CodeMirror.Pass"}},pa={scroll:!1},Nd={origin:"*mouse"},ac={origin:"+move"},fc=[""],dg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,eg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
rf=!1,ya=!1,vb=null,ig=function(){function a(a){return 247>=a?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(a):1424<=a&&1524>=a?"R":1536<=a&&1785>=a?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(a-
1536):1774<=a&&2220>=a?"r":8192<=a&&8203>=a?"w":8204==a?"b":"L"}function b(a,b,d){this.level=a;this.from=b;this.to=d}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,e=/[LRr]/,f=/[Lb1n]/,g=/[1n]/;return function(h,k){var l="ltr"==k?"L":"R";if(0==h.length||"ltr"==k&&!c.test(h))return!1;for(var m=h.length,p=[],n=0;n<m;++n)p.push(a(h.charCodeAt(n)));n=0;for(var q=l;n<m;++n){var r=p[n];"m"==r?p[n]=q:q=r}n=0;for(q=l;n<m;++n)r=p[n],"1"==r&&"r"==q?p[n]="n":e.test(r)&&(q=r,"r"==r&&(p[n]="R"));
n=1;for(q=p[0];n<m-1;++n)r=p[n],"+"==r&&"1"==q&&"1"==p[n+1]?p[n]="1":","!=r||q!=p[n+1]||"1"!=q&&"n"!=q||(p[n]=q),q=r;for(n=0;n<m;++n)if(q=p[n],","==q)p[n]="N";else if("%"==q){for(q=n+1;q<m&&"%"==p[q];++q);for(r=n&&"!"==p[n-1]||q<m&&"1"==p[q]?"1":"N";n<q;++n)p[n]=r;n=q-1}n=0;for(q=l;n<m;++n)r=p[n],"L"==q&&"1"==r?p[n]="L":e.test(r)&&(q=r);for(q=0;q<m;++q)if(d.test(p[q])){for(n=q+1;n<m&&d.test(p[n]);++n);r="L"==(q?p[q-1]:l);for(r=r==("L"==(n<m?p[n]:l))?r?"L":"R":l;q<n;++q)p[q]=r;q=n-1}l=[];var t;for(n=
0;n<m;)if(f.test(p[n])){q=n;for(++n;n<m&&f.test(p[n]);++n);l.push(new b(0,q,n))}else{var u=n;q=l.length;for(++n;n<m&&"L"!=p[n];++n);for(r=u;r<n;)if(g.test(p[r])){u<r&&l.splice(q,0,new b(1,u,r));u=r;for(++r;r<n&&g.test(p[r]);++r);l.splice(q,0,new b(2,u,r));u=r}else++r;u<n&&l.splice(q,0,new b(1,u,n))}1==l[0].level&&(t=h.match(/^\s+/))&&(l[0].from=t[0].length,l.unshift(new b(0,0,t[0].length)));1==y(l).level&&(t=h.match(/\s+$/))&&(y(l).to-=t[0].length,l.push(new b(0,m-t[0].length,m)));return"rtl"==k?
l.reverse():l}}(),nc=[],v=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),a[b]=(a[b]||nc).concat(c))},Yg=function(){if(C&&9>A)return!1;var a=t("div");return"draggable"in a||"dragDrop"in a}(),dd,jd,Qd=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):
(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},jh=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Sg=function(){var a=t("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),pd=null,ed={},db={},eb={},I=function(a,b,c){this.pos=this.start=
0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0;this.lineOracle=c};I.prototype.eol=function(){return this.pos>=this.string.length};I.prototype.sol=function(){return this.pos==this.lineStart};I.prototype.peek=function(){return this.string.charAt(this.pos)||void 0};I.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)};I.prototype.eat=function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?
a.test(b):a(b)))return++this.pos,b};I.prototype.eatWhile=function(a){for(var b=this.pos;this.eat(a););return this.pos>b};I.prototype.eatSpace=function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a};I.prototype.skipToEnd=function(){this.pos=this.string.length};I.prototype.skipTo=function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0};I.prototype.backUp=function(a){this.pos-=a};I.prototype.column=function(){this.lastColumnPos<
this.start&&(this.lastColumnValue=da(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?da(this.string,this.lineStart,this.tabSize):0)};I.prototype.indentation=function(){return da(this.string,null,this.tabSize)-(this.lineStart?da(this.string,this.lineStart,this.tabSize):0)};I.prototype.match=function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,
a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}};I.prototype.current=function(){return this.string.slice(this.start,this.pos)};I.prototype.hideFirstChars=function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}};I.prototype.lookAhead=function(a){var b=this.lineOracle;return b&&b.lookAhead(a)};var pc=function(a,b){this.state=a;this.lookAhead=b},sa=function(a,
b,c,d){this.state=b;this.doc=a;this.line=c;this.maxLookAhead=d||0};sa.prototype.lookAhead=function(a){var b=this.doc.getLine(this.line+a);null!=b&&a>this.maxLookAhead&&(this.maxLookAhead=a);return b};sa.prototype.nextLine=function(){this.line++;0<this.maxLookAhead&&this.maxLookAhead--};sa.fromSaved=function(a,b,c){return b instanceof pc?new sa(a,Na(a.mode,b.state),c,b.lookAhead):new sa(a,Na(a.mode,b),c)};sa.prototype.save=function(a){a=!1!==a?Na(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?
new pc(a,this.maxLookAhead):a};var ne=function(a,b,c){this.start=a.start;this.end=a.pos;this.string=a.current();this.type=b||null;this.state=c},ib=function(a,b,c){this.text=a;Zd(this,b);this.height=c?c(this):1};ib.prototype.lineNo=function(){return D(this)};cb(ib);var pg={},og={},fb=null,zb=null,Be={left:0,right:0,top:0,bottom:0},Ra,$a=function(a,b,c){this.cm=c;var d=this.vert=t("div",[t("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),e=this.horiz=t("div",[t("div",null,null,"height: 100%; min-height: 1px")],
"CodeMirror-hscrollbar");a(d);a(e);v(d,"scroll",function(){d.clientHeight&&b(d.scrollTop,"vertical")});v(e,"scroll",function(){e.clientWidth&&b(e.scrollLeft,"horizontal")});this.checkedZeroWidth=!1;C&&8>A&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};$a.prototype.update=function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;c?(this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0",this.vert.firstChild.style.height=Math.max(0,
a.scrollHeight-a.clientHeight+(a.viewHeight-(b?d:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");b?(this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+(a.viewWidth-a.barLeft-(c?d:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedZeroWidth&&0<a.clientHeight&&(0==d&&this.zeroWidthHack(),this.checkedZeroWidth=
!0);return{right:c?d:0,bottom:b?d:0}};$a.prototype.setScrollLeft=function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a);this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")};$a.prototype.setScrollTop=function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a);this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")};$a.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=fa&&!hh?"12px":"18px";this.horiz.style.pointerEvents=
this.vert.style.pointerEvents="none";this.disableHoriz=new Ya;this.disableVert=new Ya};$a.prototype.enableZeroWidthBar=function(a,b,c){function d(){var e=a.getBoundingClientRect();("vert"==c?document.elementFromPoint(e.right-1,(e.top+e.bottom)/2):document.elementFromPoint((e.right+e.left)/2,e.bottom-1))!=a?a.style.pointerEvents="none":b.set(1E3,d)}a.style.pointerEvents="auto";b.set(1E3,d)};$a.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)};
var bc=function(){};bc.prototype.update=function(){return{bottom:0,right:0}};bc.prototype.setScrollLeft=function(){};bc.prototype.setScrollTop=function(){};bc.prototype.clear=function(){};var Ue={"native":$a,"null":bc},yg=0,xc=function(a,b,c){var d=a.display;this.viewport=b;this.visible=vd(d,a.doc,b);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;this.wrapperWidth=d.wrapper.clientWidth;this.oldDisplayWidth=Oa(a);this.force=c;this.dims=od(a);this.events=[]};xc.prototype.signal=
function(a,b){ea(a,b)&&this.events.push(arguments)};xc.prototype.finish=function(){for(var a=0;a<this.events.length;a++)G.apply(null,this.events[a])};var zc=0,aa=null;C?aa=-.53:xa?aa=15:rc?aa=-.7:Sf&&(aa=-1/3);var ba=function(a,b){this.ranges=a;this.primIndex=b};ba.prototype.primary=function(){return this.ranges[this.primIndex]};ba.prototype.equals=function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=
this.ranges[b],d=a.ranges[b];if(!Tc(c.anchor,d.anchor)||!Tc(c.head,d.head))return!1}return!0};ba.prototype.deepCopy=function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new B(Uc(this.ranges[b].anchor),Uc(this.ranges[b].head));return new ba(a,this.primIndex)};ba.prototype.somethingSelected=function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1};ba.prototype.contains=function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=z(b,
d.from())&&0>=z(a,d.to()))return c}return-1};var B=function(a,b){this.anchor=a;this.head=b};B.prototype.from=function(){return kc(this.anchor,this.head)};B.prototype.to=function(){return jc(this.anchor,this.head)};B.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};Nb.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;Yd(f);O(e,
"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Ob.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,
e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof Nb))&&(a=[],this.collapse(a),this.children=[new Nb(a)],this.children[0].parent=this)},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],
f=e.chunkSize();if(a<=f){e.insertInner(a,b,c);if(e.lines&&50<e.lines.length){for(b=a=e.lines.length%25+25;b<e.lines.length;)c=new Nb(e.lines.slice(b,b+=25)),e.height-=c.height,this.children.splice(++d,0,c),c.parent=this;e.lines=e.lines.slice(0,a);this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5);b=new Ob(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=N(a.parent.children,a);a.parent.children.splice(c+
1,0,b)}else c=new Ob(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){f=Math.min(b,f-a);if(e.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};var Pb=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.doc=a;this.node=b};Pb.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,
d=D(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=Bb(this);ka(c,Math.max(0,c.height-f));a&&(W(a,function(){var b=-f;ma(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&vc(a,b);Ba(a,d,"widget")}),O(a,"lineWidgetCleared",a,this,d))}};Pb.prototype.changed=function(){var a=this,b=this.height,c=this.doc.cm,d=this.line;this.height=null;var e=Bb(this)-b;e&&(ka(d,d.height+e),c&&W(c,function(){c.curOp.forceUpdate=!0;ma(d)<(c.curOp&&c.curOp.scrollTop||
c.doc.scrollTop)&&vc(c,e);O(c,"lineWidgetChanged",c,a,D(d))}))};cb(Pb);var xf=0,Da=function(a,b){this.lines=[];this.type=b;this.doc=a;this.id=++xf};Da.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&Va(a);if(ea(this,"clear")){var c=this.find();c&&O(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=ub(f.markedSpans,this);a&&!this.collapsed?Ba(a,D(f),"text"):a&&(null!=g.to&&(d=D(f)),null!=g.from&&(c=D(f)));for(var h=
f,k=void 0,l=f.markedSpans,m=g,p=0;p<l.length;++p)l[p]!=m&&(k||(k=[])).push(l[p]);h.markedSpans=k;null==g.from&&this.collapsed&&!La(this.doc,f)&&a&&ka(f,Qa(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)f=la(this.lines[e]),g=mc(f),g>a.display.maxLineLength&&(a.display.maxLine=f,a.display.maxLineLength=g,a.display.maxLineChanged=!0);null!=c&&a&&this.collapsed&&U(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=
!1,a&&nf(a.doc));a&&O(a,"markerCleared",a,this,c,d);b&&Wa(a);this.parent&&this.parent.clear()}};Da.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=ub(f.markedSpans,this);if(null!=g.from&&(c=r(b?f:D(f),g.from),-1==a))return c;if(null!=g.to&&(d=r(b?f:D(f),g.to),1==a))return d}return c&&{from:c,to:d}};Da.prototype.changed=function(){var a=this,b=this.find(-1,!0),c=this,d=this.doc.cm;b&&d&&W(d,function(){var e=b.line,f=
D(b.line);if(f=nd(d,f))Ce(f),d.curOp.selectionChanged=d.curOp.forceUpdate=!0;d.curOp.updateMaxLine=!0;La(c.doc,e)||null==c.height||(f=c.height,c.height=null,(f=Bb(c)-f)&&ka(e,e.height+f));O(d,"markerChanged",d,a)})};Da.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=N(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};Da.prototype.detachLine=function(a){this.lines.splice(N(this.lines,
a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};cb(Da);var Qb=function(a,b){this.markers=a;this.primary=b;for(b=0;b<a.length;++b)a[b].parent=this};Qb.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();O(this,"clear")}};Qb.prototype.find=function(a,b){return this.primary.find(a,b)};cb(Qb);var kh=0,V=function(a,b,c,d,e){if(!(this instanceof
V))return new V(a,b,c,d,e);null==c&&(c=0);Ob.call(this,[new Nb([new ib("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=c;c=r(c,0);this.sel=va(c);this.history=new Ac(null);this.id=++kh;this.modeOption=b;this.lineSep=d;this.direction="rtl"==e?"rtl":"ltr";this.extend=!1;"string"==typeof a&&(a=this.splitLines(a));Ed(this,{from:c,to:c,text:a});P(this,va(c),pa)};V.prototype=Td(Ob.prototype,{constructor:V,iter:function(a,
b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Rc(this,this.first,this.first+this.size);return!1===a?b:b.join(a||this.lineSeparator())},setValue:M(function(a){var b=r(this.first,0),c=this.first+this.size-1;lb(this,{from:b,to:r(c,u(this,c).text.length),text:this.splitLines(a),origin:"setValue",
full:!0},!0);this.cm&&Gb(this.cm,0,0);P(this,va(b),pa)}),replaceRange:function(a,b,c,d){b=w(this,b);c=c?w(this,c):b;mb(this,a,b,c,d)},getRange:function(a,b,c){a=Ia(this,w(this,a),w(this,b));return!1===c?a:a.join(c||this.lineSeparator())},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(tb(this,a))return u(this,a)},getLineNumber:function(a){return D(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=u(this,a));return la(a)},lineCount:function(){return this.size},
firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return w(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:M(function(a,b,c){a=w(this,"number"==typeof a?r(a,b||0):a);P(this,va(a,null),c)}),setSelection:M(function(a,
b,c){var d=w(this,a);a=w(this,b||a);P(this,va(d,a),c)}),extendSelection:M(function(a,b,c){Cc(this,w(this,a),b&&w(this,b),c)}),extendSelections:M(function(a,b){jf(this,Wd(this,a),b)}),extendSelectionsBy:M(function(a,b){a=gc(this.sel.ranges,a);jf(this,Wd(this,a),b)}),setSelections:M(function(a,b,c){if(a.length){for(var d=[],e=0;e<a.length;e++)d[e]=new B(w(this,a[e].anchor),w(this,a[e].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));P(this,ja(d,b),c)}}),addSelection:M(function(a,b,c){var d=
this.sel.ranges.slice(0);d.push(new B(w(this,a),w(this,b||a)));P(this,ja(d,d.length-1),c)}),getSelection:function(a){for(var b=this.sel.ranges,c,d=0;d<b.length;d++){var e=Ia(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return!1===a?c:c.join(a||this.lineSeparator())},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=Ia(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||this.lineSeparator()));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=
a;this.replaceSelections(d,b,c||"+input")},replaceSelections:M(function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),text:this.splitLines(a[f]),origin:c}}if(a=b&&"end"!=b){a=[];e=c=r(this.first,0);for(f=0;f<d.length;f++){var h=d[f];g=af(h.from,c,e);var k=af(Ca(h),c,e);c=h.to;e=k;"around"==b?(h=this.sel.ranges[f],h=0>z(h.head,h.anchor),a[f]=new B(h?k:g,h?g:k)):a[f]=new B(g,g)}a=new ba(a,this.sel.primIndex)}b=a;for(a=d.length-1;0<=a;a--)lb(this,
d[a]);b?kf(this,b):this.cm&&gb(this.cm)}),undo:M(function(){Ec(this,"undo")}),redo:M(function(){Ec(this,"redo")}),undoSelection:M(function(){Ec(this,"undo",!0)}),redoSelection:M(function(){Ec(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=
new Ac(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:jb(this.history.done),undone:jb(this.history.undone)}},setHistory:function(a){var b=this.history=new Ac(this.history.maxGeneration);b.done=jb(a.done.slice(0),
null,!0);b.undone=jb(a.undone.slice(0),null,!0)},setGutterMarker:M(function(a,b,c){return Mb(this,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});d[b]=c;!c&&Ud(d)&&(a.gutterMarkers=null);return!0})}),clearGutter:M(function(a){var b=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&Mb(b,c,"gutter",function(){c.gutterMarkers[a]=null;Ud(c.gutterMarkers)&&(c.gutterMarkers=null);return!0})})}),lineInfo:function(a){if("number"==typeof a){if(!tb(this,a))return null;var b=
a;a=u(this,a);if(!a)return null}else if(b=D(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},addLineClass:M(function(a,b,c){return Mb(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass";if(a[d]){if(Fa(c).test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:M(function(a,b,
c){return Mb(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass",f=a[d];if(f)if(null==c)a[d]=null;else{var g=f.match(Fa(c));if(!g)return!1;var h=g.index+g[0].length;a[d]=f.slice(0,g.index)+(g.index&&h!=f.length?" ":"")+f.slice(h)||null}else return!1;return!0})}),addLineWidget:M(function(a,b,c){return Hg(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return nb(this,w(this,a),w(this,
b),c,c&&c.type||"range")},setBookmark:function(a,b){b={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};a=w(this,a);return nb(this,a,a,b,"bookmark")},findMarksAt:function(a){a=w(this,a);var b=[],c=u(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=w(this,
a);b=w(this,b);var d=[],e=a.line;this.iter(a.line,b.line+1,function(f){if(f=f.markedSpans)for(var g=0;g<f.length;g++){var h=f[g];null!=h.to&&e==a.line&&a.ch>=h.to||null==h.from&&e!=a.line||null!=h.from&&e==b.line&&h.from>=b.ch||c&&!c(h.marker)||d.push(h.marker.parent||h.marker)}++e});return d},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first,d=this.lineSeparator().length;
this.iter(function(e){e=e.text.length+d;if(e>a)return b=a,!0;a-=e;++c});return w(this,r(c,b))},indexFromPos:function(a){a=w(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;var c=this.lineSeparator().length;this.iter(this.first,a.line,function(a){b+=a.text.length+c});return b},copy:function(a){var b=new V(Rc(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=
this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new V(Rc(this,b,c),a.mode||this.modeOption,b,this.lineSep,this.direction);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=yf(this);for(c=0;c<a.length;c++){var d=a[c],e=d.find(),
f=b.clipPos(e.from);e=b.clipPos(e.to);z(f,e)&&(f=nb(b,f,e,d.primary,d.primary.type),d.markers.push(f),f.parent=d)}return b},unlinkDoc:function(a){a instanceof E&&(a=a.doc);if(this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);Jg(yf(this));break}if(a.history==this.history){var c=[a.id];Xa(a,function(a){return c.push(a.id)},!0);a.history=new Ac(null);a.history.done=jb(this.history.done,c);a.history.undone=jb(this.history.undone,c)}},
iterLinkedDocs:function(a){Xa(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):Qd(a)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:M(function(a){"rtl"!=a&&(a="ltr");a!=this.direction&&(this.direction=a,this.iter(function(a){return a.order=null}),this.cm&&Dg(this.cm))})});V.prototype.eachLine=V.prototype.iter;for(var Af=0,Rf=!1,Ea={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",
17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"\x3d",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"\x3d",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",
63302:"Insert"},cc=0;10>cc;cc++)Ea[cc+48]=Ea[cc+96]=String(cc);for(var Kc=65;90>=Kc;Kc++)Ea[Kc]=String.fromCharCode(Kc);for(var dc=1;12>=dc;dc++)Ea[dc+111]=Ea[dc+63235]="F"+dc;var Rb={basic:{Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",
Esc:"singleSelection"},pcDefault:{"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",
"Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},emacsy:{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars",
"Ctrl-O":"openLine"},macDefault:{"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace",
"Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]}};Rb["default"]=fa?Rb.macDefault:Rb.pcDefault;var Sb={selectAll:pf,singleSelection:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),pa)},killLine:function(a){return pb(a,function(b){if(b.empty()){var c=
u(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:r(b.head.line+1,0)}:{from:b.head,to:r(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){return pb(a,function(b){return{from:r(b.from().line,0),to:w(a.doc,r(b.to().line+1,0))}})},delLineLeft:function(a){return pb(a,function(a){return{from:r(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){return pb(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,
top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){return pb(a,function(b){var c=a.charCoords(b.head,"div").top+5;c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(r(a.firstLine(),0))},goDocEnd:function(a){return a.extendSelection(r(a.lastLine()))},
goLineStart:function(a){return a.extendSelectionsBy(function(b){return Gf(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(b){return Hf(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(b){b=b.head.line;var c=u(a.doc,b);var d=c;for(var e;e=Ka(d,!1);)d=e.find(1,!0).line;d!=c&&(b=D(d));return bd(!0,a,c,b,-1)},{origin:"+move",bias:-1})},goLineRight:function(a){return a.extendSelectionsBy(function(b){b=
a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div")},ac)},goLineLeft:function(a){return a.extendSelectionsBy(function(b){b=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},ac)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5;c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?Hf(a,b.head):c},ac)},goLineUp:function(a){return a.moveV(-1,
"line")},goLineDown:function(a){return a.moveV(1,"line")},goPageUp:function(a){return a.moveV(-1,"page")},goPageDown:function(a){return a.moveV(1,"page")},goCharLeft:function(a){return a.moveH(-1,"char")},goCharRight:function(a){return a.moveH(1,"char")},goColumnLeft:function(a){return a.moveH(-1,"column")},goColumnRight:function(a){return a.moveH(1,"column")},goWordLeft:function(a){return a.moveH(-1,"word")},goGroupRight:function(a){return a.moveH(1,"group")},goGroupLeft:function(a){return a.moveH(-1,
"group")},goWordRight:function(a){return a.moveH(1,"word")},delCharBefore:function(a){return a.deleteH(-1,"char")},delCharAfter:function(a){return a.deleteH(1,"char")},delWordBefore:function(a){return a.deleteH(-1,"word")},delWordAfter:function(a){return a.deleteH(1,"word")},delGroupBefore:function(a){return a.deleteH(-1,"group")},delGroupAfter:function(a){return a.deleteH(1,"group")},indentAuto:function(a){return a.indentSelection("smart")},indentMore:function(a){return a.indentSelection("add")},
indentLess:function(a){return a.indentSelection("subtract")},insertTab:function(a){return a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from();f=da(a.getLine(f.line),f.ch,d);b.push(Oc(d-f%d))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){return W(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++)if(b[d].empty()){var e=
b[d].head,f=u(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new r(e.line,e.ch-1)),0<e.ch)e=new r(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),r(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=u(a.doc,e.line-1).text;g&&(e=new r(e.line,1),a.replaceRange(f.charAt(0)+a.doc.lineSeparator()+g.charAt(g.length-1),r(e.line-1,g.length-1),e,"+transpose"))}c.push(new B(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){return W(a,function(){for(var b=a.listSelections(),
c=b.length-1;0<=c;c--)a.replaceRange(a.doc.lineSeparator(),b[c].anchor,b[c].head,"+input");b=a.listSelections();for(c=0;c<b.length;c++)a.indentLine(b[c].from().line,null,!0);gb(a)})},openLine:function(a){return a.replaceSelection("\n","start")},toggleOverwrite:function(a){return a.toggleOverwrite()}},Qg=new Ya,Jd=null,Kd=function(a,b,c){this.time=a;this.pos=b;this.button=c};Kd.prototype.compare=function(a,b,c){return this.time+400>a&&0==z(b,this.pos)&&c==this.button};var Vb,Ub,qb={toString:function(){return"CodeMirror.Init"}},
Qf={},Ic={};E.defaults=Qf;E.optionHandlers=Ic;var Od=[];E.defineInitHook=function(a){return Od.push(a)};var X=null,x=function(a){this.cm=a;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new Ya;this.composing=null;this.gracePeriod=!1;this.readDOMTimeout=null};x.prototype.init=function(a){function b(a){if(!K(e,a)){if(e.somethingSelected())X={lineWise:!1,text:e.getSelections()},"cut"==a.type&&e.replaceSelection("",null,"cut");else if(e.options.lineWiseCopyCut){var b=
Vf(e);X={lineWise:!0,text:b.text};"cut"==a.type&&e.operation(function(){e.setSelections(b.ranges,0,pa);e.replaceSelection("",null,"cut")})}else return;if(a.clipboardData){a.clipboardData.clearData();var c=X.text.join("\n");a.clipboardData.setData("Text",c);if(a.clipboardData.getData("Text")==c){a.preventDefault();return}}var g=Xf();a=g.firstChild;e.display.lineSpace.insertBefore(g,e.display.lineSpace.firstChild);a.value=X.text.join("\n");var m=document.activeElement;$b(a);setTimeout(function(){e.display.lineSpace.removeChild(g);
m.focus();m==f&&d.showPrimarySelection()},50)}}var c=this,d=this,e=d.cm,f=d.div=a.lineDiv;Wf(f,e.options.spellcheck);v(f,"paste",function(a){K(e,a)||Uf(a,e)||11>=A&&setTimeout(L(e,function(){return c.updateFromDOM()}),20)});v(f,"compositionstart",function(a){c.composing={data:a.data,done:!1}});v(f,"compositionupdate",function(a){c.composing||(c.composing={data:a.data,done:!1})});v(f,"compositionend",function(a){c.composing&&(a.data!=c.composing.data&&c.readFromDOMSoon(),c.composing.done=!0)});v(f,
"touchstart",function(){return d.forceCompositionEnd()});v(f,"input",function(){c.composing||c.readFromDOMSoon()});v(f,"copy",b);v(f,"cut",b)};x.prototype.prepareSelection=function(){var a=Je(this.cm,!1);a.focus=this.cm.state.focused;return a};x.prototype.showSelection=function(a,b){a&&this.cm.display.view.length&&((a.focus||b)&&this.showPrimarySelection(),this.showMultipleSelections(a))};x.prototype.showPrimarySelection=function(){var a=window.getSelection(),b=this.cm,c=b.doc.sel.primary(),d=c.from();
c=c.to();if(b.display.viewTo==b.display.viewFrom||d.line>=b.display.viewTo||c.line<b.display.viewFrom)a.removeAllRanges();else{var e=Jc(b,a.anchorNode,a.anchorOffset),f=Jc(b,a.focusNode,a.focusOffset);if(!e||e.bad||!f||f.bad||0!=z(kc(e,f),d)||0!=z(jc(e,f),c))if(e=b.display.view,d=d.line>=b.display.viewFrom&&Zf(b,d)||{node:e[0].measure.map[2],offset:0},c=c.line<b.display.viewTo&&Zf(b,c),c||(c=e[e.length-1].measure,c=c.maps?c.maps[c.maps.length-1]:c.map,c={node:c[c.length-1],offset:c[c.length-2]-c[c.length-
3]}),d&&c){e=a.rangeCount&&a.getRangeAt(0);try{var g=yb(d.node,d.offset,c.offset,c.node)}catch(h){}g&&(!xa&&b.state.focused?(a.collapse(d.node,d.offset),g.collapsed||(a.removeAllRanges(),a.addRange(g))):(a.removeAllRanges(),a.addRange(g)),e&&null==a.anchorNode?a.addRange(e):xa&&this.startGracePeriod());this.rememberSelection()}else a.removeAllRanges()}};x.prototype.startGracePeriod=function(){var a=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){a.gracePeriod=!1;a.selectionChanged()&&
a.cm.operation(function(){return a.cm.curOp.selectionChanged=!0})},20)};x.prototype.showMultipleSelections=function(a){Y(this.cm.display.cursorDiv,a.cursors);Y(this.cm.display.selectionDiv,a.selection)};x.prototype.rememberSelection=function(){var a=window.getSelection();this.lastAnchorNode=a.anchorNode;this.lastAnchorOffset=a.anchorOffset;this.lastFocusNode=a.focusNode;this.lastFocusOffset=a.focusOffset};x.prototype.selectionInEditor=function(){var a=window.getSelection();if(!a.rangeCount)return!1;
a=a.getRangeAt(0).commonAncestorContainer;return wa(this.div,a)};x.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())};x.prototype.blur=function(){this.div.blur()};x.prototype.getField=function(){return this.div};x.prototype.supportsTouch=function(){return!0};x.prototype.receivedFocus=function(){function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=
this;this.selectionInEditor()?this.pollSelection():W(this.cm,function(){return b.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,a)};x.prototype.selectionChanged=function(){var a=window.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset};x.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var a=window.getSelection(),
b=this.cm;if(sc&&rc&&this.cm.options.gutters.length&&dh(a.anchorNode))this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();else if(!this.composing){this.rememberSelection();var c=Jc(b,a.anchorNode,a.anchorOffset),d=Jc(b,a.focusNode,a.focusOffset);c&&d&&W(b,function(){P(b.doc,va(c,d),pa);if(c.bad||d.bad)b.curOp.selectionChanged=!0})}}};x.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=
null);var a=this.cm,b=a.display,c=a.doc.sel.primary(),d=c.from(),e=c.to();0==d.ch&&d.line>a.firstLine()&&(d=r(d.line-1,u(a.doc,d.line-1).length));e.ch==u(a.doc,e.line).text.length&&e.line<a.lastLine()&&(e=r(e.line+1,0));if(d.line<b.viewFrom||e.line>b.viewTo-1)return!1;var f;d.line==b.viewFrom||0==(f=Pa(a,d.line))?(c=D(b.view[0].line),f=b.view[0].node):(c=D(b.view[f].line),f=b.view[f-1].node.nextSibling);var g=Pa(a,e.line);g==b.view.length-1?(e=b.viewTo-1,b=b.lineDiv.lastChild):(e=D(b.view[g+1].line)-
1,b=b.view[g+1].node.previousSibling);if(!f)return!1;b=a.doc.splitLines(eh(a,f,b,c,e));for(f=Ia(a.doc,r(c,0),r(e,u(a.doc,e).text.length));1<b.length&&1<f.length;)if(y(b)==y(f))b.pop(),f.pop(),e--;else if(b[0]==f[0])b.shift(),f.shift(),c++;else break;var h=0;g=0;for(var k=b[0],l=f[0],m=Math.min(k.length,l.length);h<m&&k.charCodeAt(h)==l.charCodeAt(h);)++h;k=y(b);l=y(f);for(m=Math.min(k.length-(1==b.length?h:0),l.length-(1==f.length?h:0));g<m&&k.charCodeAt(k.length-g-1)==l.charCodeAt(l.length-g-1);)++g;
if(1==b.length&&1==f.length&&c==d.line)for(;h&&h>d.ch&&k.charCodeAt(k.length-g-1)==l.charCodeAt(l.length-g-1);)h--,g++;b[b.length-1]=k.slice(0,k.length-g).replace(/^\u200b+/,"");b[0]=b[0].slice(h).replace(/\u200b+$/,"");d=r(c,h);c=r(e,f.length?y(f).length-g:0);if(1<b.length||b[0]||z(d,c))return mb(a.doc,b,d,c,"+input"),!0};x.prototype.ensurePolled=function(){this.forceCompositionEnd()};x.prototype.reset=function(){this.forceCompositionEnd()};x.prototype.forceCompositionEnd=function(){this.composing&&
(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())};x.prototype.readFromDOMSoon=function(){var a=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){a.readDOMTimeout=null;if(a.composing)if(a.composing.done)a.composing=null;else return;a.updateFromDOM()},80))};x.prototype.updateFromDOM=function(){var a=this;!this.cm.isReadOnly()&&this.pollContent()||W(this.cm,function(){return U(a.cm)})};x.prototype.setUneditable=function(a){a.contentEditable=
"false"};x.prototype.onKeyPress=function(a){0!=a.charCode&&(a.preventDefault(),this.cm.isReadOnly()||L(this.cm,Pd)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0))};x.prototype.readOnlyChanged=function(a){this.div.contentEditable=String("nocursor"!=a)};x.prototype.onContextMenu=function(){};x.prototype.resetPosition=function(){};x.prototype.needsContentAttribute=!0;var J=function(a){this.cm=a;this.prevInput="";this.pollingFast=!1;this.polling=new Ya;this.hasSelection=!1;this.composing=
null};J.prototype.init=function(a){function b(a){if(!K(e,a)){if(e.somethingSelected())X={lineWise:!1,text:e.getSelections()};else if(e.options.lineWiseCopyCut){var b=Vf(e);X={lineWise:!0,text:b.text};"cut"==a.type?e.setSelections(b.ranges,null,pa):(d.prevInput="",g.value=b.text.join("\n"),$b(g))}else return;"cut"==a.type&&(e.state.cutIncoming=!0)}}var c=this,d=this,e=this.cm,f=this.wrapper=Xf(),g=this.textarea=f.firstChild;a.wrapper.insertBefore(f,a.wrapper.firstChild);Yb&&(g.style.width="0px");v(g,
"input",function(){C&&9<=A&&c.hasSelection&&(c.hasSelection=null);d.poll()});v(g,"paste",function(a){K(e,a)||Uf(a,e)||(e.state.pasteIncoming=!0,d.fastPoll())});v(g,"cut",b);v(g,"copy",b);v(a.scroller,"paste",function(b){ua(a,b)||K(e,b)||(e.state.pasteIncoming=!0,d.focus())});v(a.lineSpace,"selectstart",function(b){ua(a,b)||R(b)});v(g,"compositionstart",function(){var a=e.getCursor("from");d.composing&&d.composing.range.clear();d.composing={start:a,range:e.markText(a,e.getCursor("to"),{className:"CodeMirror-composing"})}});
v(g,"compositionend",function(){d.composing&&(d.poll(),d.composing.range.clear(),d.composing=null)})};J.prototype.prepareSelection=function(){var a=this.cm,b=a.display,c=a.doc,d=Je(a);if(a.options.moveInputWithCursor){a=ha(a,c.sel.primary().head,"div");c=b.wrapper.getBoundingClientRect();var e=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+e.top-c.top));d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left))}return d};J.prototype.showSelection=
function(a){var b=this.cm.display;Y(b.cursorDiv,a.cursors);Y(b.selectionDiv,a.selection);null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")};J.prototype.reset=function(a){if(!this.contextMenuPending&&!this.composing){var b=this.cm;b.somethingSelected()?(this.prevInput="",a=b.getSelection(),this.textarea.value=a,b.state.focused&&$b(this.textarea),C&&9<=A&&(this.hasSelection=a)):a||(this.prevInput=this.textarea.value="",C&&9<=A&&(this.hasSelection=null))}};J.prototype.getField=
function(){return this.textarea};J.prototype.supportsTouch=function(){return!1};J.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!sb||qa()!=this.textarea))try{this.textarea.focus()}catch(a){}};J.prototype.blur=function(){this.textarea.blur()};J.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};J.prototype.receivedFocus=function(){this.slowPoll()};J.prototype.slowPoll=function(){var a=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,
function(){a.poll();a.cm.state.focused&&a.slowPoll()})};J.prototype.fastPoll=function(){function a(){c.poll()||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0;c.polling.set(20,a)};J.prototype.poll=function(){var a=this,b=this.cm,c=this.textarea,d=this.prevInput;if(this.contextMenuPending||!b.state.focused||jh(c)&&!d&&!this.composing||b.isReadOnly()||b.options.disableInput||b.state.keySeq)return!1;var e=c.value;if(e==d&&!b.somethingSelected())return!1;
if(C&&9<=A&&this.hasSelection===e||fa&&/[\uf700-\uf7ff]/.test(e))return b.display.input.reset(),!1;if(b.doc.sel==b.display.selForContextMenu){var f=e.charCodeAt(0);8203!=f||d||(d="\u200b");if(8666==f)return this.reset(),this.cm.execCommand("undo")}var g=0;for(f=Math.min(d.length,e.length);g<f&&d.charCodeAt(g)==e.charCodeAt(g);)++g;W(b,function(){Pd(b,e.slice(g),d.length-g,null,a.composing?"*compose":null);1E3<e.length||-1<e.indexOf("\n")?c.value=a.prevInput="":a.prevInput=e;a.composing&&(a.composing.range.clear(),
a.composing.range=b.markText(a.composing.start,b.getCursor("to"),{className:"CodeMirror-composing"}))});return!0};J.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)};J.prototype.onKeyPress=function(){C&&9<=A&&(this.hasSelection=null);this.fastPoll()};J.prototype.onContextMenu=function(a){function b(){if(null!=g.selectionStart){var a=e.somethingSelected(),b="\u200b"+(a?g.value:"");g.value=b;d.prevInput=a?"":"\u200b";g.selectionStart=1;g.selectionEnd=b.length;f.selForContextMenu=
e.doc.sel}}function c(){d.contextMenuPending=!1;d.wrapper.style.cssText=m;g.style.cssText=l;C&&9>A&&f.scrollbars.setScrollTop(f.scroller.scrollTop=k);if(null!=g.selectionStart){(!C||C&&9>A)&&b();var a=0,c=function(){f.selForContextMenu==e.doc.sel&&0==g.selectionStart&&0<g.selectionEnd&&"\u200b"==d.prevInput?L(e,pf)(e):10>a++?f.detectingSelectAll=setTimeout(c,500):(f.selForContextMenu=null,f.input.reset())};f.detectingSelectAll=setTimeout(c,200)}}var d=this,e=d.cm,f=e.display,g=d.textarea,h=Sa(e,a),
k=f.scroller.scrollTop;if(h&&!ia){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(h)&&L(e,P)(e.doc,va(h),pa);var l=g.style.cssText,m=d.wrapper.style.cssText;d.wrapper.style.cssText="position: absolute";h=d.wrapper.getBoundingClientRect();g.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(a.clientY-h.top-5)+"px; left: "+(a.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(C?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity\x3d5);";
if(Q)var p=window.scrollY;f.input.focus();Q&&window.scrollTo(null,p);f.input.reset();e.somethingSelected()||(g.value=d.prevInput=" ");d.contextMenuPending=!0;f.selForContextMenu=e.doc.sel;clearTimeout(f.detectingSelectAll);C&&9<=A&&b();if(Md){wb(a);var n=function(){Z(window,"mouseup",n);setTimeout(c,20)};v(window,"mouseup",n)}else setTimeout(c,50)}};J.prototype.readOnlyChanged=function(a){a||this.reset();this.textarea.disabled="nocursor"==a};J.prototype.setUneditable=function(){};J.prototype.needsContentAttribute=
!1;(function(a){function b(b,e,f,g){a.defaults[b]=e;f&&(c[b]=g?function(a,b,d){d!=qb&&f(a,b,d)}:f)}var c=a.optionHandlers;a.defineOption=b;a.Init=qb;b("value","",function(a,b){return a.setValue(b)},!0);b("mode",null,function(a,b){a.doc.modeOption=b;Dd(a)},!0);b("indentUnit",2,Dd,!0);b("indentWithTabs",!1);b("smartIndent",!0);b("tabSize",4,function(a){Kb(a);Db(a);U(a)},!0);b("lineSeparator",null,function(a,b){if(a.doc.lineSep=b){var d=[],c=a.doc.first;a.doc.iter(function(a){for(var e=0;;){var f=a.text.indexOf(b,
e);if(-1==f)break;e=f+b.length;d.push(r(c,f))}c++});for(var e=d.length-1;0<=e;e--)mb(a.doc,b,d[e],r(d[e].line,d[e].ch+b.length))}});b("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");c!=qb&&a.refresh()});b("specialCharPlaceholder",sg,function(a){return a.refresh()},!0);b("electricChars",!0);b("inputStyle",sb?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor");
},!0);b("spellcheck",!1,function(a,b){return a.getInputField().spellcheck=b},!0);b("rtlMoveVisually",!ih);b("wholeLineUpdateBefore",!0);b("theme","default",function(a){Pf(a);Wb(a)},!0);b("keyMap","default",function(a,b,c){b=Fc(b);(c=c!=qb&&Fc(c))&&c.detach&&c.detach(a,b);b.attach&&b.attach(a,c||null)});b("extraKeys",null);b("configureMouse",null);b("lineWrapping",!1,bh,!0);b("gutters",[],function(a){Bd(a.options);Wb(a)},!0);b("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?rd(a.display)+
"px":"0";a.refresh()},!0);b("coverGutterNextToScrollbar",!1,function(a){return hb(a)},!0);b("scrollbarStyle","native",function(a){Te(a);hb(a);a.display.scrollbars.setScrollTop(a.doc.scrollTop);a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0);b("lineNumbers",!1,function(a){Bd(a.options);Wb(a)},!0);b("firstLineNumber",1,Wb,!0);b("lineNumberFormatter",function(a){return a},Wb,!0);b("showCursorWhenSelecting",!1,Eb,!0);b("resetSelectionOnContextMenu",!0);b("lineWiseCopyCut",!0);b("pasteLinesPerSelection",
!0);b("readOnly",!1,function(a,b){"nocursor"==b&&(Fb(a),a.display.input.blur());a.display.input.readOnlyChanged(b)});b("disableInput",!1,function(a,b){b||a.display.input.reset()},!0);b("dragDrop",!0,ah);b("allowDropFileTypes",null);b("cursorBlinkRate",530);b("cursorScrollMargin",0);b("cursorHeight",1,Eb,!0);b("singleCursorHeightPerLine",!0,Eb,!0);b("workTime",100);b("workDelay",100);b("flattenSpans",!0,Kb,!0);b("addModeClass",!1,Kb,!0);b("pollInterval",100);b("undoDepth",200,function(a,b){return a.doc.history.undoDepth=
b});b("historyEventDelay",1250);b("viewportMargin",10,function(a){return a.refresh()},!0);b("maxHighlightLength",1E4,Kb,!0);b("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()});b("tabindex",null,function(a,b){return a.display.input.getField().tabIndex=b||""});b("autofocus",null);b("direction","ltr",function(a,b){return a.doc.setDirection(b)},!0)})(E);(function(a){var b=a.optionHandlers,c=a.helpers={};a.prototype={constructor:a,focus:function(){window.focus();this.display.input.focus()},
setOption:function(a,c){var d=this.options,e=d[a];if(d[a]!=c||"mode"==a)d[a]=c,b.hasOwnProperty(a)&&L(this,b[a])(this,c,e),G(this,"optionChange",this,a)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](Fc(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:S(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw Error("Overlays may not be stateful.");
cg(this.state.overlays,{mode:d,modeSpec:b,opaque:c&&c.opaque,priority:c&&c.priority||0},function(a){return a.priority});this.state.modeGen++;U(this)}),removeOverlay:S(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;U(this);break}}}),indentLine:S(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");tb(this.doc,a)&&Xb(this,
a,b,c)}),indentSelection:S(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var h=b[d];if(h.empty())h.head.line>c&&(Xb(this,h.head.line,a,!0),c=h.head.line,d==this.doc.sel.primIndex&&gb(this));else{var k=h.from();h=h.to();var l=Math.max(c,k.line);c=Math.min(this.lastLine(),h.line-(h.ch?0:1))+1;for(h=l;h<c;++h)Xb(this,h,a);h=this.doc.sel.ranges;0==k.ch&&b.length==h.length&&0<h[d].from().ch&&Hd(this.doc,d,new B(k,h[d].to()),pa)}}}),getTokenAt:function(a,b){return me(this,a,b)},getLineTokens:function(a,
b){return me(this,r(a),b,!0)},getTokenTypeAt:function(a){a=w(this.doc,a);var b=ke(this,u(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var h=c+d>>1;if((h?b[2*h-1]:0)>=a)d=h;else if(b[2*h+1]<a)c=h+1;else{b=b[2*h+2];break}}c=b?b.indexOf("overlay "):-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,
b){var d=[];if(!c.hasOwnProperty(b))return d;var e=c[b];a=this.getModeAt(a);if("string"==typeof a[b])e[a[b]]&&d.push(e[a[b]]);else if(a[b])for(var h=0;h<a[b].length;h++){var k=e[a[b][h]];k&&d.push(k)}else a.helperType&&e[a.helperType]?d.push(e[a.helperType]):e[a.name]&&d.push(e[a.name]);for(b=0;b<e._global.length;b++)h=e._global[b],h.pred(a,this)&&-1==N(d,h.val)&&d.push(h.val);return d},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-
1));return xb(this,a+1,b).state},cursorCoords:function(a,b){var c=this.doc.sel.primary();a=null==a?c.head:"object"==typeof a?w(this.doc,a):a?c.from():c.to();return ha(this,a,b||"page")},charCoords:function(a,b){return tc(this,w(this.doc,a),b||"page")},coordsChar:function(a,b){a=Ge(this,a,b||"page");return qd(this,a.left,a.top)},lineAtHeight:function(a,b){a=Ge(this,{top:a,left:0},b||"page").top;return Ja(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b,c){var d=!1;if("number"==typeof a){var e=
this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>e&&(a=e,d=!0);a=u(this.doc,a)}return Ma(this,a,{top:0,left:0},b||"page",c||d).top+(d?this.doc.height-ma(a):0)},defaultTextHeight:function(){return Qa(this.display)},defaultCharWidth:function(){return Cb(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,g,h){var d=this.display;a=ha(this,w(this.doc,a));var e=a.bottom,f=a.left;b.style.position="absolute";b.setAttribute("cm-ignore-events",
"true");this.display.input.setUneditable(b);d.sizer.appendChild(b);if("over"==g)e=a.top;else if("above"==g||"near"==g){var p=Math.max(d.wrapper.clientHeight,this.doc.height),n=Math.max(d.sizer.clientWidth,d.lineSpace.clientWidth);("above"==g||a.bottom+b.offsetHeight>p)&&a.top>b.offsetHeight?e=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=p&&(e=a.bottom);f+b.offsetWidth>n&&(f=n-b.offsetWidth)}b.style.top=e+"px";b.style.left=b.style.right="";"right"==h?(f=d.sizer.clientWidth-b.offsetWidth,b.style.right=
"0px"):("left"==h?f=0:"middle"==h&&(f=(d.sizer.clientWidth-b.offsetWidth)/2),b.style.left=f+"px");c&&(a=xd(this,{left:f,top:e,right:f+b.offsetWidth,bottom:e+b.offsetHeight}),null!=a.scrollTop&&Hb(this,a.scrollTop),null!=a.scrollLeft&&Ua(this,a.scrollLeft))},triggerOnKeyDown:S(Jf),triggerOnKeyPress:S(Lf),triggerOnKeyUp:Kf,triggerOnMouseDown:S(Mf),execCommand:function(a){if(Sb.hasOwnProperty(a))return Sb[a].call(null,this)},triggerElectric:S(function(a){Tf(this,a)}),findPosH:function(a,b,c,g){var d=
1;0>b&&(d=-1,b=-b);a=w(this.doc,a);for(var e=0;e<b&&(a=Rd(this.doc,a,d,c,g),!a.hitSide);++e);return a},moveH:S(function(a,b){var c=this;this.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?Rd(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},ac)}),deleteH:S(function(a,b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):pb(this,function(d){var e=Rd(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),
findPosV:function(a,b,c,g){var d=1;0>b&&(d=-1,b=-b);var e=w(this.doc,a);for(a=0;a<b&&(e=ha(this,e,"div"),null==g?g=e.left:e.left=g,e=Yf(this,e,d,c),!e.hitSide);++a);return e},moveV:S(function(a,b){var c=this,d=this.doc,e=[],k=!this.display.shift&&!d.extend&&d.sel.somethingSelected();d.extendSelectionsBy(function(f){if(k)return 0>a?f.from():f.to();var g=ha(c,f.head,"div");null!=f.goalColumn&&(g.left=f.goalColumn);e.push(g.left);var h=Yf(c,g,a,b);"page"==b&&f==d.sel.primary()&&vc(c,tc(c,h,"div").top-
g.top);return h},ac);if(e.length)for(var l=0;l<d.sel.ranges.length;l++)d.sel.ranges[l].goalColumn=e[l]}),findWordAt:function(a){var b=u(this.doc,a.line).text,c=a.ch,d=a.ch;if(b){var h=this.getHelper(a,"wordChars");"before"!=a.sticky&&d!=b.length||!c?++d:--c;var k=b.charAt(c);for(k=hc(k,h)?function(a){return hc(a,h)}:/\s/.test(k)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!hc(a)};0<c&&k(b.charAt(c-1));)--c;for(;d<b.length&&k(b.charAt(d));)++d}return new B(r(a.line,c),r(a.line,
d))},toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?Ga(this.display.cursorDiv,"CodeMirror-overwrite"):Ta(this.display.cursorDiv,"CodeMirror-overwrite"),G(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==qa()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:S(function(a,b){Gb(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,
top:a.scrollTop,height:a.scrollHeight-oa(this)-this.display.barHeight,width:a.scrollWidth-oa(this)-this.display.barWidth,clientHeight:md(this),clientWidth:Oa(this)}},scrollIntoView:S(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:r(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;null!=a.from.line?(wc(this),this.curOp.scrollToPos=a):Qe(this,a.from,a.to,a.margin)}),setSize:S(function(a,
b){var c=this,d=function(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a};null!=a&&(this.display.wrapper.style.width=d(a));null!=b&&(this.display.wrapper.style.height=d(b));this.options.lineWrapping&&De(this);var e=this.display.viewFrom;this.doc.iter(e,this.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){Ba(c,e,"widget");break}++e});this.curOp.forceUpdate=!0;G(this,"refresh",this)}),operation:function(a){return W(this,a)},startOperation:function(){return Va(this)},
endOperation:function(){return Wa(this)},refresh:S(function(){var a=this.display.cachedTextHeight;U(this);this.curOp.forceUpdate=!0;Db(this);Gb(this,this.doc.scrollLeft,this.doc.scrollTop);wd(this);(null==a||.5<Math.abs(a-Qa(this.display)))&&sd(this);G(this,"refresh",this)}),swapDoc:S(function(a){var b=this.doc;b.cm=null;cf(this,a);Db(this);this.display.input.reset();Gb(this,a.scrollLeft,a.scrollTop);this.curOp.forceScroll=!0;O(this,"swapDoc",this,b);return b}),getInputField:function(){return this.display.input.getField()},
getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};cb(a);a.registerHelper=function(b,e,f){c.hasOwnProperty(b)||(c[b]=a[b]={_global:[]});c[b][e]=f};a.registerGlobalHelper=function(b,e,f,g){a.registerHelper(b,e,g);c[b]._global.push({pred:f,val:g})}})(E);var lh="iter insert remove copy getEditor constructor".split(" "),ec;for(ec in V.prototype)V.prototype.hasOwnProperty(ec)&&0>
N(lh,ec)&&(E.prototype[ec]=function(a){return function(){return a.apply(this.doc,arguments)}}(V.prototype[ec]));cb(V);E.inputStyles={textarea:J,contenteditable:x};E.defineMode=function(a){E.defaults.mode||"null"==a||(E.defaults.mode=a);kg.apply(this,arguments)};E.defineMIME=function(a,b){db[a]=b};E.defineMode("null",function(){return{token:function(a){return a.skipToEnd()}}});E.defineMIME("text/plain","null");E.defineExtension=function(a,b){E.prototype[a]=b};E.defineDocExtension=function(a,b){V.prototype[a]=
b};E.fromTextArea=function(a,b){function c(){a.value=h.getValue()}b=b?Ha(b):{};b.value=a.value;!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex);!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder);if(null==b.autofocus){var d=qa();b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}if(a.form&&(v(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var e=a.form;var f=e.submit;try{var g=e.submit=function(){c();e.submit=f;e.submit();e.submit=g}}catch(k){}}b.finishInit=function(b){b.save=
c;b.getTextArea=function(){return a};b.toTextArea=function(){b.toTextArea=isNaN;c();a.parentNode.removeChild(b.getWrapperElement());a.style.display="";a.form&&(Z(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=f))}};a.style.display="none";var h=E(function(b){return a.parentNode.insertBefore(b,a.nextSibling)},b);return h};(function(a){a.off=Z;a.on=v;a.wheelEventPixels=Cg;a.Doc=V;a.splitLines=Qd;a.countColumn=da;a.findColumn=Nc;a.isWordChar=Pc;a.Pass=Hc;a.signal=G;a.Line=ib;a.changeEnd=
Ca;a.scrollbarModel=Ue;a.Pos=r;a.cmpPos=z;a.modes=ed;a.mimeModes=db;a.resolveMode=oc;a.getMode=fd;a.modeExtensions=eb;a.extendMode=lg;a.copyState=Na;a.startState=he;a.innerMode=gd;a.commands=Sb;a.keyMap=Rb;a.keyName=Ff;a.isModifierKey=Cf;a.lookupKey=ob;a.normalizeKeyMap=Og;a.StringStream=I;a.SharedTextMarker=Qb;a.TextMarker=Da;a.LineWidget=Pb;a.e_preventDefault=R;a.e_stopPropagation=fe;a.e_stop=wb;a.addClass=Ga;a.contains=wa;a.rmClass=Ta;a.keyNames=Ea})(E);E.version="5.29.0";return E});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror-raw', location = '/static/lib/CodeMirror/addon/selection/mark-selection.js' */
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function n(a){a.state.markedSelection&&a.operation(function(){t(a)})}function p(a){a.state.markedSelection&&a.state.markedSelection.length&&a.operation(function(){h(a)})}function e(a,c,d,q){if(0!=k(c,d))for(var f=a.state.markedSelection,g=a.state.markedSelectionStyle,b=c.line;;){var e=b==c.line?c:r(b,
0);b+=m;var h=b>=d.line,l=h?d:r(b,0);e=a.markText(e,l,{className:g});null==q?f.push(e):f.splice(q++,0,e);if(h)break}}function h(a){a=a.state.markedSelection;for(var c=0;c<a.length;++c)a[c].clear();a.length=0}function l(a){h(a);for(var c=a.listSelections(),d=0;d<c.length;d++)e(a,c[d].from(),c[d].to())}function t(a){if(!a.somethingSelected())return h(a);if(1<a.listSelections().length)return l(a);var c=a.getCursor("start"),d=a.getCursor("end"),b=a.state.markedSelection;if(!b.length)return e(a,c,d);var f=
b[0].find(),g=b[b.length-1].find();if(!f||!g||d.line-c.line<m||0<=k(c,g.to)||0>=k(d,f.from))return l(a);for(;0<k(c,f.from);)b.shift().clear(),f=b[0].find();0>k(c,f.from)&&(f.to.line-c.line<m?(b.shift().clear(),e(a,c,f.to,0)):e(a,c,f.from,0));for(;0>k(d,g.to);)b.pop().clear(),g=b[b.length-1].find();0<k(d,g.to)&&(d.line-g.from.line<m?(b.pop().clear(),e(a,g.from,d)):e(a,g.to,d))}b.defineOption("styleSelectedText",!1,function(a,c,d){d=d&&d!=b.Init;c&&!d?(a.state.markedSelection=[],a.state.markedSelectionStyle=
"string"==typeof c?c:"CodeMirror-selectedtext",l(a),a.on("cursorActivity",n),a.on("change",p)):!c&&d&&(a.off("cursorActivity",n),a.off("change",p),h(a),a.state.markedSelection=a.state.markedSelectionStyle=null)});var m=8,r=b.Pos,k=b.cmpPos});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror-raw', location = '/static/lib/CodeMirror/addon/selection/active-line.js' */
(function(d){"object"==typeof exports&&"object"==typeof module?d(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],d):d(CodeMirror)})(function(d){function g(a){for(var b=0;b<a.state.activeLines.length;b++)a.removeLineClass(a.state.activeLines[b],"wrap","CodeMirror-activeline"),a.removeLineClass(a.state.activeLines[b],"background","CodeMirror-activeline-background"),a.removeLineClass(a.state.activeLines[b],"gutter","CodeMirror-activeline-gutter")}
function k(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0}function f(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=a.getOption("styleActiveLine");if("object"==typeof f&&f.nonEmpty?e.anchor.line==e.head.line:e.empty())e=a.getLineHandleVisualStart(e.head.line),c[c.length-1]!=e&&c.push(e)}k(a.state.activeLines,c)||a.operation(function(){g(a);for(var b=0;b<c.length;b++)a.addLineClass(c[b],"wrap","CodeMirror-activeline"),a.addLineClass(c[b],"background",
"CodeMirror-activeline-background"),a.addLineClass(c[b],"gutter","CodeMirror-activeline-gutter");a.state.activeLines=c})}function h(a,b){f(a,b.ranges)}d.defineOption("styleActiveLine",!1,function(a,b,c){c=c==d.Init?!1:c;b!=c&&(c&&(a.off("beforeSelectionChange",h),g(a),delete a.state.activeLines),b&&(a.state.activeLines=[],f(a,a.listSelections()),a.on("beforeSelectionChange",h)))})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror-raw', location = '/static/lib/CodeMirror/addon/selection/selection-pointer.js' */
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){function e(b){b.state.selectionPointer.rects=null;f(b)}function f(b){b.state.selectionPointer.willUpdate||(b.state.selectionPointer.willUpdate=!0,setTimeout(function(){var a=b.state.selectionPointer;if(a){if(null==a.rects&&null!=a.mouseX&&(a.rects=[],b.somethingSelected()))for(var d=b.display.selectionDiv.firstChild;d;d=
d.nextSibling)a.rects.push(d.getBoundingClientRect());d=!1;if(null!=a.mouseX)for(var g=0;g<a.rects.length;g++){var c=a.rects[g];c.left<=a.mouseX&&c.right>=a.mouseX&&c.top<=a.mouseY&&c.bottom>=a.mouseY&&(d=!0)}a=d?a.value:"";b.display.lineDiv.style.cursor!=a&&(b.display.lineDiv.style.cursor=a)}b.state.selectionPointer.willUpdate=!1},50))}c.defineOption("selectionPointer",!1,function(b,a){var d=b.state.selectionPointer;d&&(c.off(b.getWrapperElement(),"mousemove",d.mousemove),c.off(b.getWrapperElement(),
"mouseout",d.mouseout),c.off(window,"scroll",d.windowScroll),b.off("cursorActivity",e),b.off("scroll",e),b.state.selectionPointer=null,b.display.lineDiv.style.cursor="");a&&(d=b.state.selectionPointer={value:"string"==typeof a?a:"default",mousemove:function(a){var c=b.state.selectionPointer;(null==a.buttons?a.which:a.buttons)?c.mouseX=c.mouseY=null:(c.mouseX=a.clientX,c.mouseY=a.clientY);f(b)},mouseout:function(a){b.getWrapperElement().contains(a.relatedTarget)||(a=b.state.selectionPointer,a.mouseX=
a.mouseY=null,f(b))},windowScroll:function(){e(b)},rects:null,mouseX:null,mouseY:null,willUpdate:!1},c.on(b.getWrapperElement(),"mousemove",d.mousemove),c.on(b.getWrapperElement(),"mouseout",d.mouseout),c.on(window,"scroll",d.windowScroll),b.on("cursorActivity",e),b.on("scroll",e))})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror-raw', location = '/static/lib/CodeMirror/addon/search/matchesonscrollbar.js' */
(function(d){"object"==typeof exports&&"object"==typeof module?d(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],d):d(CodeMirror)})(function(d){function g(a,c,b,e){this.cm=a;this.options=e;var f={listenForChanges:!1},d;for(d in e)f[d]=e[d];f.className||(f.className="CodeMirror-search-match");this.annotation=a.annotateScrollbar(f);this.query=
c;this.caseFold=b;this.gap={from:a.firstLine(),to:a.lastLine()+1};this.matches=[];this.update=null;this.findMatches();this.annotation.update(this.matches);var g=this;a.on("change",this.changeHandler=function(a,b){g.onChange(b)})}function h(a,c,b){return a<=c?a:Math.max(c,a+b)}d.defineExtension("showMatchesOnScrollbar",function(a,c,b){"string"==typeof b&&(b={className:b});b||(b={});return new g(this,a,c,b)});g.prototype.findMatches=function(){if(this.gap){for(var a=0;a<this.matches.length;a++){var c=
this.matches[a];if(c.from.line>=this.gap.to)break;c.to.line>=this.gap.from&&this.matches.splice(a--,1)}for(var b=this.cm.getSearchCursor(this.query,d.Pos(this.gap.from,0),this.caseFold),e=this.options&&this.options.maxMatches||1E3;b.findNext();){c={from:b.from(),to:b.to()};if(c.from.line>=this.gap.to)break;this.matches.splice(a++,0,c);if(this.matches.length>e)break}this.gap=null}};g.prototype.onChange=function(a){var c=a.from.line,b=d.changeEnd(a).line,e=b-a.to.line;this.gap?(this.gap.from=Math.min(h(this.gap.from,
c,e),a.from.line),this.gap.to=Math.max(h(this.gap.to,c,e),a.from.line)):this.gap={from:a.from.line,to:b+1};if(e)for(a=0;a<this.matches.length;a++){b=this.matches[a];var f=h(b.from.line,c,e);f!=b.from.line&&(b.from=d.Pos(f,b.from.ch));f=h(b.to.line,c,e);f!=b.to.line&&(b.to=d.Pos(f,b.to.ch))}clearTimeout(this.update);var g=this;this.update=setTimeout(function(){g.updateAfterChange()},250)};g.prototype.updateAfterChange=function(){this.findMatches();this.annotation.update(this.matches)};g.prototype.clear=
function(){this.cm.off("change",this.changeHandler);this.annotation.clear()}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror-raw', location = '/static/lib/CodeMirror/addon/search/search.js' */
(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],f):f(CodeMirror)})(function(f){function y(a,b){"string"==typeof a?a=new RegExp(a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26"),b?"gi":"g"):a.global||(a=new RegExp(a.source,a.ignoreCase?"gi":"g"));return{token:function(b){a.lastIndex=
b.pos;var c=a.exec(b.string);if(c&&c.index==b.pos)return b.pos+=c[0].length||1,"searching";c?b.pos=c.index:b.skipToEnd()}}}function z(){this.overlay=this.posFrom=this.posTo=this.lastQuery=this.query=null}function h(a){return a.state.search||(a.state.search=new z)}function m(a){return"string"==typeof a&&a==a.toLowerCase()}function k(a,b,e){return a.getSearchCursor(b,e,{caseFold:m(b),multiline:!0})}function A(a,b,e,c,d){a.openDialog(b,c,{value:e,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){l(a)},
onKeyDown:d})}function r(a,b,e,c,d){a.openDialog?a.openDialog(b,d,{value:c,selectValueOnOpen:!0}):d(prompt(e,c))}function B(a,b,e,c){if(a.openConfirm)a.openConfirm(b,c);else if(confirm(e))c[0]()}function u(a){return a.replace(/\\(.)/g,function(a,e){return"n"==e?"\n":"r"==e?"\r":e})}function v(a){var b=a.match(/^\/(.*)\/([a-z]*)$/);if(b)try{a=new RegExp(b[1],-1==b[2].indexOf("i")?"":"i")}catch(e){}else a=u(a);if("string"==typeof a?""==a:a.test(""))a=/x^/;return a}function n(a,b,e){b.queryText=e;b.query=
v(e);a.removeOverlay(b.overlay,m(b.query));b.overlay=y(b.query,m(b.query));a.addOverlay(b.overlay);a.showMatchesOnScrollbar&&(b.annotate&&(b.annotate.clear(),b.annotate=null),b.annotate=a.showMatchesOnScrollbar(b.query,m(b.query)))}function g(a,b,e,c){var d=h(a);if(d.query)return p(a,b);var q=a.getSelection()||d.lastQuery;if(e&&a.openDialog){var t=null,g=function(b,c){f.e_stop(c);b&&(b!=d.queryText&&(n(a,d,b),d.posFrom=d.posTo=a.getCursor()),t&&(t.style.opacity=1),p(a,c.shiftKey,function(b,d){var c;
3>d.line&&document.querySelector&&(c=a.display.wrapper.querySelector(".CodeMirror-dialog"))&&c.getBoundingClientRect().bottom-4>a.cursorCoords(d,"window").top&&((t=c).style.opacity=.4)}))};A(a,'\x3cspan class\x3d"CodeMirror-search-label"\x3eSearch:\x3c/span\x3e \x3cinput type\x3d"text" style\x3d"width: 10em" class\x3d"CodeMirror-search-field"/\x3e \x3cspan style\x3d"color: #888" class\x3d"CodeMirror-search-hint"\x3e(Use /re/ syntax for regexp search)\x3c/span\x3e',q,g,function(b,d){var c=f.keyName(b),
e=a.getOption("extraKeys");c=e&&e[c]||f.keyMap[a.getOption("keyMap")][c];if("findNext"==c||"findPrev"==c||"findPersistentNext"==c||"findPersistentPrev"==c)f.e_stop(b),n(a,h(a),d),a.execCommand(c);else if("find"==c||"findPersistent"==c)f.e_stop(b),g(d,b)});c&&q&&(n(a,d,q),p(a,b))}else r(a,'\x3cspan class\x3d"CodeMirror-search-label"\x3eSearch:\x3c/span\x3e \x3cinput type\x3d"text" style\x3d"width: 10em" class\x3d"CodeMirror-search-field"/\x3e \x3cspan style\x3d"color: #888" class\x3d"CodeMirror-search-hint"\x3e(Use /re/ syntax for regexp search)\x3c/span\x3e',
"Search for:",q,function(c){c&&!d.query&&a.operation(function(){n(a,d,c);d.posFrom=d.posTo=a.getCursor();p(a,b)})})}function p(a,b,e){a.operation(function(){var c=h(a),d=k(a,c.query,b?c.posFrom:c.posTo);if(!d.find(b)&&(d=k(a,c.query,b?f.Pos(a.lastLine()):f.Pos(a.firstLine(),0)),!d.find(b)))return;a.setSelection(d.from(),d.to());a.scrollIntoView({from:d.from(),to:d.to()},20);c.posFrom=d.from();c.posTo=d.to();e&&e(d.from(),d.to())})}function l(a){a.operation(function(){var b=h(a);if(b.lastQuery=b.query)b.query=
b.queryText=null,a.removeOverlay(b.overlay),b.annotate&&(b.annotate.clear(),b.annotate=null)})}function w(a,b,e){a.operation(function(){for(var c=k(a,b);c.findNext();)if("string"!=typeof b){var d=a.getRange(c.from(),c.to()).match(b);c.replace(e.replace(/\$(\d)/g,function(a,b){return d[b]}))}else c.replace(e)})}function x(a,b){if(!a.getOption("readOnly")){var e=a.getSelection()||h(a).lastQuery,c='\x3cspan class\x3d"CodeMirror-search-label"\x3e'+(b?"Replace all:":"Replace:")+"\x3c/span\x3e";r(a,c+' \x3cinput type\x3d"text" style\x3d"width: 10em" class\x3d"CodeMirror-search-field"/\x3e \x3cspan style\x3d"color: #888" class\x3d"CodeMirror-search-hint"\x3e(Use /re/ syntax for regexp search)\x3c/span\x3e',
c,e,function(c){c&&(c=v(c),r(a,'\x3cspan class\x3d"CodeMirror-search-label"\x3eWith:\x3c/span\x3e \x3cinput type\x3d"text" style\x3d"width: 10em" class\x3d"CodeMirror-search-field"/\x3e',"Replace with:","",function(d){d=u(d);if(b)w(a,c,d);else{l(a);var e=k(a,c,a.getCursor("from")),f=function(){var b=e.from(),h;if(!(h=e.findNext())&&(e=k(a,c),!(h=e.findNext())||b&&e.from().line==b.line&&e.from().ch==b.ch))return;a.setSelection(e.from(),e.to());a.scrollIntoView({from:e.from(),to:e.to()});B(a,'\x3cspan class\x3d"CodeMirror-search-label"\x3eReplace?\x3c/span\x3e \x3cbutton\x3eYes\x3c/button\x3e \x3cbutton\x3eNo\x3c/button\x3e \x3cbutton\x3eAll\x3c/button\x3e \x3cbutton\x3eStop\x3c/button\x3e',
"Replace?",[function(){g(h)},f,function(){w(a,c,d)}])},g=function(a){e.replace("string"==typeof c?d:d.replace(/\$(\d)/g,function(b,c){return a[c]}));f()};f()}}))})}}f.commands.find=function(a){l(a);g(a)};f.commands.findPersistent=function(a){l(a);g(a,!1,!0)};f.commands.findPersistentNext=function(a){g(a,!1,!0,!0)};f.commands.findPersistentPrev=function(a){g(a,!0,!0,!0)};f.commands.findNext=g;f.commands.findPrev=function(a){g(a,!0)};f.commands.clearSearch=l;f.commands.replace=x;f.commands.replaceAll=
function(a){x(a,!0)}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror-raw', location = '/static/lib/CodeMirror/addon/search/jump-to-line.js' */
(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../dialog/dialog"],e):e(CodeMirror)})(function(e){function g(a,d,b,c,e){a.openDialog?a.openDialog(d,e,{value:c,selectValueOnOpen:!0}):e(prompt(b,c))}function f(a,d){var b=Number(d);return/^[-+]/.test(d)?a.getCursor().line+b:b-1}e.commands.jumpToLine=function(a){var d=a.getCursor();g(a,'Jump to line: \x3cinput type\x3d"text" style\x3d"width: 10em" class\x3d"CodeMirror-search-field"/\x3e \x3cspan style\x3d"color: #888" class\x3d"CodeMirror-search-hint"\x3e(Use line:column or scroll% syntax)\x3c/span\x3e',
"Jump to line:",d.line+1+":"+d.ch,function(b){if(b){var c;(c=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(b))?a.setCursor(f(a,c[1]),Number(c[2])):(c=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(b))?(b=Math.round(a.lineCount()*Number(c[1])/100),/^[-+]/.test(c[1])&&(b=d.line+b+1),a.setCursor(b-1,d.ch)):(c=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(b))&&a.setCursor(f(a,c[1]),d.ch)}})};e.keyMap["default"]["Alt-G"]="jumpToLine"});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror-raw', location = '/static/lib/CodeMirror/addon/search/match-highlighter.js' */
(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror"),require("./matchesonscrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./matchesonscrollbar"],f):f(CodeMirror)})(function(f){function q(a){this.options={};for(var b in g)this.options[b]=(a&&a.hasOwnProperty(b)?a:g)[b];this.matchesonscroll=this.overlay=this.timeout=null;this.active=!1}function h(a){var b=a.state.matchHighlighter;(b.active||a.hasFocus())&&k(a,b)}function l(a){var b=
a.state.matchHighlighter;b.active||(b.active=!0,k(a,b))}function k(a,b){clearTimeout(b.timeout);b.timeout=setTimeout(function(){m(a)},b.options.delay)}function n(a,b,d,c){var e=a.state.matchHighlighter;a.addOverlay(e.overlay=r(b,d,c));e.options.annotateScrollbar&&a.showMatchesOnScrollbar&&(e.matchesonscroll=a.showMatchesOnScrollbar(d?new RegExp("\\b"+b+"\\b"):b,!1,{className:"CodeMirror-selection-highlight-scrollbar"}))}function p(a){var b=a.state.matchHighlighter;b.overlay&&(a.removeOverlay(b.overlay),
b.overlay=null,b.matchesonscroll&&(b.matchesonscroll.clear(),b.matchesonscroll=null))}function m(a){a.operation(function(){var b=a.state.matchHighlighter;p(a);if(!a.somethingSelected()&&b.options.showToken){for(var d=!0===b.options.showToken?/[\w$]/:b.options.showToken,c=a.getCursor(),e=a.getLine(c.line),f=c=c.ch;c&&d.test(e.charAt(c-1));)--c;for(;f<e.length&&d.test(e.charAt(f));)++f;c<f&&n(a,e.slice(c,f),d,b.options.style)}else if(d=a.getCursor("from"),e=a.getCursor("to"),d.line==e.line){if(c=b.options.wordsOnly){a:if(null!==
a.getRange(d,e).match(/^\w+$/)){if(0<d.ch&&(c={line:d.line,ch:d.ch-1},c=a.getRange(c,d),null===c.match(/\W/))){c=!1;break a}if(e.ch<a.getLine(d.line).length&&(c={line:e.line,ch:e.ch+1},c=a.getRange(e,c),null===c.match(/\W/))){c=!1;break a}c=!0}else c=!1;c=!c}c||(d=a.getRange(d,e),b.options.trim&&(d=d.replace(/^\s+|\s+$/g,"")),d.length>=b.options.minChars&&n(a,d,!1,b.options.style))}})}function r(a,b,d){return{token:function(c){var e;if(e=c.match(a))(e=!b)||(e=(!c.start||!b.test(c.string.charAt(c.start-
1)))&&(c.pos==c.string.length||!b.test(c.string.charAt(c.pos))));if(e)return d;c.next();c.skipTo(a.charAt(0))||c.skipToEnd()}}}var g={style:"matchhighlight",minChars:2,delay:100,wordsOnly:!1,annotateScrollbar:!1,showToken:!1,trim:!0};f.defineOption("highlightSelectionMatches",!1,function(a,b,d){d&&d!=f.Init&&(p(a),clearTimeout(a.state.matchHighlighter.timeout),a.state.matchHighlighter=null,a.off("cursorActivity",h),a.off("focus",l));if(b){b=a.state.matchHighlighter=new q(b);if(a.hasFocus())b.active=
!0,m(a);else a.on("focus",l);a.on("cursorActivity",h)}})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror-raw', location = '/static/lib/CodeMirror/addon/search/searchcursor.js' */
(function(m){"object"==typeof exports&&"object"==typeof module?m(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],m):m(CodeMirror)})(function(m){function p(b){if(!b.global){var a=b.flags;b=new RegExp(b.source,(null!=a?a:(b.ignoreCase?"i":"")+(b.global?"g":"")+(b.multiline?"m":""))+"g")}return b}function v(b,a,c){a=p(a);var d=c.line,e=c.ch;for(c=b.lastLine();d<=c;d++,e=0)if(a.lastIndex=e,e=b.getLine(d),e=a.exec(e))return{from:h(d,e.index),to:h(d,
e.index+e[0].length),match:e}}function x(b,a,c){if(!/\\s|\\n|\n|\\W|\\D|\[\^/.test(a.source))return v(b,a,c);a=p(a);for(var d,e=1,f=c.line,n=b.lastLine();f<=n;){for(var g=0;g<e;g++){var k=b.getLine(f++);d=null==d?k:d+"\n"+k}e*=2;a.lastIndex=c.ch;if(g=a.exec(d))return a=d.slice(0,g.index).split("\n"),b=g[0].split("\n"),c=c.line+a.length-1,a=a[a.length-1].length,{from:h(c,a),to:h(c+b.length-1,1==b.length?a+b[0].length:b[b.length-1].length),match:g}}}function w(b,a){for(var c=0,d;;){a.lastIndex=c;c=
a.exec(b);if(!c)return d;d=c;c=d.index+(d[0].length||1);if(c==b.length)return d}}function y(b,a,c){a=p(a);var d=c.line,e=c.ch;for(c=b.firstLine();d>=c;d--,e=-1){var f=b.getLine(d);-1<e&&(f=f.slice(0,e));if(e=w(f,a))return{from:h(d,e.index),to:h(d,e.index+e[0].length),match:e}}}function z(b,a,c){a=p(a);for(var d,e=1,f=c.line,n=b.firstLine();f>=n;){for(var g=0;g<e;g++){var k=b.getLine(f--);d=null==d?k.slice(0,c.ch):k+"\n"+d}e*=2;if(g=w(d,a))return a=d.slice(0,g.index).split("\n"),b=g[0].split("\n"),
f+=a.length,a=a[a.length-1].length,{from:h(f,a),to:h(f+b.length-1,1==b.length?a+b[0].length:b[b.length-1].length),match:g}}}function q(b,a,c,d){if(b.length==a.length)return c;var e=0;for(a=c+Math.max(0,b.length-a.length);;){if(e==a)return e;var f=e+a>>1,h=d(b.slice(0,f)).length;if(h==c)return f;h>c?a=f:e=f+1}}function A(b,a,c,d){if(!a.length)return null;d=d?r:t;a=d(a).split(/\r|\n\r?/);var e=c.line;c=c.ch;var f=b.lastLine()+1-a.length;a:for(;e<=f;e++,c=0){var n=b.getLine(e).slice(c),g=d(n);if(1==
a.length){var k=g.indexOf(a[0]);if(-1==k)continue a;q(n,g,k,d);return{from:h(e,q(n,g,k,d)+c),to:h(e,q(n,g,k+a[0].length,d)+c)}}k=g.length-a[0].length;if(g.slice(k)!=a[0])continue a;for(var l=1;l<a.length-1;l++)if(d(b.getLine(e+l))!=a[l])continue a;l=b.getLine(e+a.length-1);var m=d(l),p=a[a.length-1];if(l.slice(0,p.length)!=p)continue a;return{from:h(e,q(n,g,k,d)+c),to:h(e+a.length-1,q(l,m,p.length,d))}}}function B(b,a,c,d){if(!a.length)return null;d=d?r:t;a=d(a).split(/\r|\n\r?/);var e=c.line,f=c.ch,
n=b.firstLine()-1+a.length;a:for(;e>=n;e--,f=-1){var g=b.getLine(e);-1<f&&(g=g.slice(0,f));f=d(g);if(1==a.length){c=f.lastIndexOf(a[0]);if(-1==c)continue a;return{from:h(e,q(g,f,c,d)),to:h(e,q(g,f,c+a[0].length,d))}}var k=a[a.length-1];if(f.slice(0,k.length)!=k)continue a;var l=1;for(c=e-a.length+1;l<a.length-1;l++)if(d(b.getLine(c+l))!=a[l])continue a;c=b.getLine(e+1-a.length);l=d(c);if(l.slice(l.length-a[0].length)!=a[0])continue a;return{from:h(e+1-a.length,q(c,l,c.length-a[0].length,d)),to:h(e,
q(g,f,k.length,d))}}}function u(b,a,c,d){this.atOccurrence=!1;this.doc=b;c=c?b.clipPos(c):h(0,0);this.pos={from:c,to:c};if("object"==typeof d)var e=d.caseFold;else e=d,d=null;"string"==typeof a?(null==e&&(e=!1),this.matches=function(c,d){return(c?B:A)(b,a,d,e)}):(a=p(a),this.matches=d&&!1===d.multiline?function(c,d){return(c?y:v)(b,a,d)}:function(c,d){return(c?z:x)(b,a,d)})}var h=m.Pos;if(String.prototype.normalize){var r=function(b){return b.normalize("NFD").toLowerCase()};var t=function(b){return b.normalize("NFD")}}else r=
function(b){return b.toLowerCase()},t=function(b){return b};u.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(b){for(var a=this.matches(b,this.doc.clipPos(b?this.pos.from:this.pos.to));a&&0==m.cmpPos(a.from,a.to);)b?a.from.ch?a.from=h(a.from.line,a.from.ch-1):a=a.from.line==this.doc.firstLine()?null:this.matches(b,this.doc.clipPos(h(a.from.line-1))):a.to.ch<this.doc.getLine(a.to.line).length?a.to=h(a.to.line,a.to.ch+1):a=a.to.line==
this.doc.lastLine()?null:this.matches(b,h(a.to.line+1,0));if(a)return this.pos=a,this.atOccurrence=!0,this.pos.match||!0;b=h(b?this.doc.firstLine():this.doc.lastLine()+1,0);this.pos={from:b,to:b};return this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(b,a){this.atOccurrence&&(b=m.splitLines(b),this.doc.replaceRange(b,this.pos.from,this.pos.to,a),this.pos.to=h(this.pos.from.line+b.length-1,b[b.length-
1].length+(1==b.length?this.pos.from.ch:0)))}};m.defineExtension("getSearchCursor",function(b,a,c){return new u(this.doc,b,a,c)});m.defineDocExtension("getSearchCursor",function(b,a,c){return new u(this,b,a,c)});m.defineExtension("selectMatches",function(b,a){var c=[];for(b=this.getSearchCursor(b,this.getCursor("from"),a);b.findNext()&&!(0<m.cmpPos(b.to(),this.getCursor("to")));)c.push({anchor:b.from(),head:b.to()});c.length&&this.setSelections(c,0)})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror-raw', location = '/static/lib/CodeMirror/addon/dialog/dialog.js' */
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){function l(a,c,b){a=a.getWrapperElement().appendChild(document.createElement("div"));a.className=b?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top";"string"==typeof c?a.innerHTML=c:a.appendChild(c);return a}function m(a,c){a.state.currentNotificationClose&&a.state.currentNotificationClose();
a.state.currentNotificationClose=c}c.defineExtension("openDialog",function(a,g,b){function e(a){if("string"==typeof a)d.value=a;else if(!h&&(h=!0,f.parentNode.removeChild(f),k.focus(),b.onClose))b.onClose(f)}b||(b={});m(this,null);var f=l(this,a,b.bottom),h=!1,k=this,d=f.getElementsByTagName("input")[0];if(d){d.focus();b.value&&(d.value=b.value,!1!==b.selectValueOnOpen&&d.select());if(b.onInput)c.on(d,"input",function(a){b.onInput(a,d.value,e)});if(b.onKeyUp)c.on(d,"keyup",function(a){b.onKeyUp(a,
d.value,e)});c.on(d,"keydown",function(a){if(!(b&&b.onKeyDown&&b.onKeyDown(a,d.value,e))){if(27==a.keyCode||!1!==b.closeOnEnter&&13==a.keyCode)d.blur(),c.e_stop(a),e();13==a.keyCode&&g(d.value,a)}});if(!1!==b.closeOnBlur)c.on(d,"blur",e)}else if(a=f.getElementsByTagName("button")[0]){c.on(a,"click",function(){e();k.focus()});if(!1!==b.closeOnBlur)c.on(a,"blur",e);a.focus()}return e});c.defineExtension("openConfirm",function(a,g,b){function e(){h||(h=!0,f.parentNode.removeChild(f),k.focus())}m(this,
null);var f=l(this,a,b&&b.bottom);a=f.getElementsByTagName("button");var h=!1,k=this,d=1;a[0].focus();for(b=0;b<a.length;++b){var n=a[b];(function(a){c.on(n,"click",function(b){c.e_preventDefault(b);e();a&&a(k)})})(g[b]);c.on(n,"blur",function(){--d;setTimeout(function(){0>=d&&e()},200)});c.on(n,"focus",function(){++d})}});c.defineExtension("openNotification",function(a,g){function b(){f||(f=!0,clearTimeout(h),e.parentNode.removeChild(e))}m(this,b);var e=l(this,a,g&&g.bottom),f=!1,h;a=g&&"undefined"!==
typeof g.duration?g.duration:5E3;c.on(e,"click",function(a){c.e_preventDefault(a);b()});a&&(h=setTimeout(b,a));return b})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror', location = '/static/lib/CodeMirror/codemirror-AMD.js' */
define("codemirror",function(){return CodeMirror});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror', location = '/static/lib/CodeMirror/addon/runmode/runmode.js' */
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.runMode=function(k,c,f,d){c=a.getMode(a.defaults,c);var n=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||9>document.documentMode);if(f.appendChild){var m=d&&d.tabSize||a.defaults.tabSize,l=f,g=0;l.innerHTML="";f=function(a,d){if("\n"==a)l.appendChild(document.createTextNode(n?"\r":
a)),g=0;else{for(var b="",e=0;;){var c=a.indexOf("\t",e);if(-1==c){b+=a.slice(e);g+=a.length-e;break}else{g+=c-e;b+=a.slice(e,c);e=m-g%m;g+=e;for(var f=0;f<e;++f)b+=" ";e=c+1}}d?(a=l.appendChild(document.createElement("span")),a.className="cm-"+d.replace(/ +/g," cm-"),a.appendChild(document.createTextNode(b))):l.appendChild(document.createTextNode(b))}}}k=a.splitLines(k);d=d&&d.state||a.startState(c);for(var h=0,p=k.length;h<p;++h){h&&f("\n");var b=new a.StringStream(k[h]);for(!b.string&&c.blankLine&&
c.blankLine(d);!b.eol();){var q=c.token(b,d);f(b.current(),q,h,b.start,d);b.start=b.pos}}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror-util', location = '/static/bitbucket/internal/util/codemirror.js' */
define("bitbucket/internal/util/codemirror",["module","exports","codemirror"],function(b,a,d){Object.defineProperty(a,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(d),c=null;a.default={doInOperation:function(a){if(null===c){var b=document.createElement("div");c=(0,e.default)(b)}return c.operation(a)}};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:string-replacer', location = '/static/bitbucket/internal/util/string-replacer.js' */
define("bitbucket/internal/util/string-replacer",["module","exports","lodash"],function(k,f,g){Object.defineProperty(f,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(g);g=function(){function f(){babelHelpers.classCallCheck(this,f);this.replacers=[]}babelHelpers.createClass(f,[{key:"registerReplacer",value:function(d){this.replacers.push({replacer:d,weight:1<arguments.length&&void 0!==arguments[1]?arguments[1]:1E3});return this.replacers.sort(function(a,b){return a.weight-b.weight})}},
{key:"occurrenceIndexes",value:function(d,a){var b=a.find;a=!1!==a.multiple;for(var c=[],e=-1;(-1===e||a)&&-1!==(e=d.indexOf(b,e+1));)c.push(e);return c}},{key:"addIndexes",value:function(d,a){var b=this;return h.default.flattenDeep(a.map(function(c){c=babelHelpers.slicedToArray(c,2);var a=c[0];return c[1].map(function(c){return b.occurrenceIndexes(d,c).map(function(b){return{weight:a.weight,start:b,end:b+c.find.length,replacement:c}})})}))}},{key:"sortByWeightOrPosition",value:function(d){return d.sort(function(a,
b){return a.weight-b.weight||a.start-b.start})}},{key:"sortByPosition",value:function(d){return d.sort(function(a,b){return a.start-b.start})}},{key:"dedupe",value:function(d,a){return a.reduce(function(a,c){return a.some(function(a){return a.start<=c.start&&a.end>c.start||c.start<=a.start&&c.end>a.start})?a:a.concat(c)},[])}},{key:"replace",value:function(d,a,b){"undefined"===typeof b&&(b=function(a){return a});if(!a.length)return b(d);a=a.reduce(function(a,e){a.pointer<e.start&&a.replacements.push(b(d.substring(a.pointer,
e.start)));a.replacements.push(e.replacement.replace);return{pointer:e.end,replacements:a.replacements}},{pointer:0,replacements:[]});a.pointer<d.length&&a.replacements.push(b(d.substring(a.pointer,d.length)));return a.replacements.join("")}},{key:"process",value:function(d,a,b){var c=this,e=this.replacers.map(function(c){var b=c.replacer;return b(d,a).catch(function(a){console.error(a,b," failed");return[]})});return Promise.all(e).then(function(a){return c.addIndexes(d,h.default.zip(c.replacers,
a))}).then(this.sortByWeightOrPosition).then(function(a){return c.dedupe(d,a)}).then(this.sortByPosition).then(function(a){return c.replace(d,a,b)})}}]);return f}();f.default=g;k.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-message-enricher', location = '/static/bitbucket/internal/feature/commits/commit-message-enricher.js' */
define("bitbucket/internal/feature/commits/commit-message-enricher",["module","exports","../../util/string-replacer"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});b=new (babelHelpers.interopRequireDefault(b).default);a.default=b;c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:abbreviate-commit-message-util', location = '/static/bitbucket/internal/util/abbreviate-commit-message.js' */
define("bitbucket/internal/util/abbreviate-commit-message",["module","exports"],function(e,d){Object.defineProperty(d,"__esModule",{value:!0});d.default=function(b,a){a=parseInt(a,10);if(b.length<=a)return b;var c=b.indexOf("\n");return 0<c&&c<=a?b.substring(0,c+3>a?a-3:c)+"...":b.substring(0,a-3)+"..."};e.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:lozenge-internal', location = '/static/bitbucket/internal/widget/lozenge/lozenge.soy' */
// This file was automatically generated from lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.lozenge.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.lozenge == 'undefined') { bitbucket.internal.widget.lozenge = {}; }


bitbucket.internal.widget.lozenge.lozenge = function(opt_data, opt_ignored) {
  var output = '';
  var tag__soy3 = opt_data.href ? 'a' : opt_data.htmlElement ? opt_data.htmlElement : opt_data.clickable ? 'button' : 'span';
  output += '<' + soy.$$escapeHtml(tag__soy3) + ' class="aui-lozenge' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + ((opt_data.monospace) ? ' monospace-lozenge' : '') + '"' + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + ((opt_data.maxLength) ? soy.$$escapeHtml(soy.$$truncate(opt_data.text, opt_data.maxLength, true)) : soy.$$escapeHtml(opt_data.text)) + '</' + soy.$$escapeHtml(tag__soy3) + '>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.lozenge.lozenge.soyTemplateName = 'bitbucket.internal.widget.lozenge.lozenge';
}


bitbucket.internal.widget.lozenge.htmlLozenge = function(opt_data, opt_ignored) {
  return '<' + ((opt_data.htmlElement) ? soy.$$escapeHtml(opt_data.htmlElement) : 'a') + ' class="aui-lozenge' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + ((opt_data.monospace) ? ' monospace-lozenge' : '') + '"' + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + ((opt_data.extraAttributes) ? aui.renderExtraAttributes(opt_data) : '') + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + ((opt_data.htmlElement) ? soy.$$escapeHtml(opt_data.htmlElement) : 'a') + '>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.lozenge.htmlLozenge.soyTemplateName = 'bitbucket.internal.widget.lozenge.htmlLozenge';
}


bitbucket.internal.widget.lozenge.merge = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'merge-lozenge' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : '') + (opt_data.abbreviated ? ' abbreviated' : ''), text: '' + soy.$$escapeHtml(opt_data.abbreviated ? 'M' : 'Merge'), tooltip: '' + soy.$$escapeHtml('This commit is a merge.')});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.lozenge.merge.soyTemplateName = 'bitbucket.internal.widget.lozenge.merge';
}


bitbucket.internal.widget.lozenge.pullRequestState = function(opt_data, opt_ignored) {
  var output = '';
  var commonClasses__soy84 = opt_data.extraClasses ? ' ' + opt_data.extraClasses + ' pull-request-state-lozenge' : ' pull-request-state-lozenge';
  switch (opt_data.state) {
    case 'OPEN':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-complete open' + commonClasses__soy84, text: 'OPEN', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request is in progress.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'OPENED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-complete opened' + commonClasses__soy84, text: opt_data.isActivityContext ? 'opened' : 'OPENED', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request is in progress.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'MERGED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-success merged' + commonClasses__soy84, text: opt_data.isActivityContext ? 'merged' : 'MERGED', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request has been merged.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'DECLINED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-error declined' + commonClasses__soy84, text: opt_data.isActivityContext ? 'declined' : 'DECLINED', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request has been declined.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'REOPENED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-complete reopened' + commonClasses__soy84, text: opt_data.isActivityContext ? 'reopened' : 'REOPENED', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request has been reopened.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'UPDATED':
    case 'RESCOPED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-current updated' + commonClasses__soy84, text: opt_data.isActivityContext ? 'updated' : 'UPDATED', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request has been updated.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'APPROVED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-success approved' + commonClasses__soy84, text: opt_data.isActivityContext ? 'approved' : 'Approved', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request has been approved.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'UNAPPROVED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-error unapproved' + commonClasses__soy84, text: opt_data.isActivityContext ? 'unapproved' : 'Unapproved', tooltip: opt_data.tooltip ? opt_data.tooltip : 'The approval has been withdrawn from this pull request.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'REVIEWED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'needs-work' + commonClasses__soy84, text: opt_data.isActivityContext ? 'needs work' : 'Needs work', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request needs work.', clickable: opt_data.clickable, href: opt_data.href});
      break;
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.lozenge.pullRequestState.soyTemplateName = 'bitbucket.internal.widget.lozenge.pullRequestState';
}


bitbucket.internal.widget.lozenge.enabled = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.lozenge.lozenge({extraClasses: opt_data.isEnabled ? 'lozenge-enabled' : 'lozenge-disabled', text: opt_data.isEnabled ? 'Enabled' : 'Disabled', tooltip: opt_data.tooltip});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.lozenge.enabled.soyTemplateName = 'bitbucket.internal.widget.lozenge.enabled';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-link', location = '/static/bitbucket/internal/feature/commit/commit-link/commit-link.soy' */
// This file was automatically generated from commit-link.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.commit.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.commit == 'undefined') { bitbucket.internal.feature.commit = {}; }


bitbucket.internal.feature.commit.link = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.repository ? 'a' : 'span') + ' class="commitid"' + ((opt_data.pullRequest && opt_data.repository) ? ' href="' + soy.$$escapeHtml(require('bitbucket/util/navbuilder').project(opt_data.repository.project).repo(opt_data.repository).pullRequest(opt_data.pullRequest).commit(opt_data.commit.id).build()) + '"' : (opt_data.repository) ? ' href="' + soy.$$escapeHtml(require('bitbucket/util/navbuilder').project(opt_data.repository.project).repo(opt_data.repository).commit(opt_data.commit.id).withParams(null).withFragment(opt_data.filePath).build()) + '"' : '') + ((opt_data.commit.message) ? ' data-commit-message="' + soy.$$escapeHtml(opt_data.commit.message) + '"' : '') + ' data-commitid="' + soy.$$escapeHtml(opt_data.commit.id) + '">' + soy.$$escapeHtml((opt_data.commit.id).substring(0, 11)) + '</' + soy.$$escapeHtml(opt_data.repository ? 'a' : 'span') + '>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commit.link.soyTemplateName = 'bitbucket.internal.feature.commit.link';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:user-link', location = '/static/bitbucket/internal/widget/user/user-link.soy' */
// This file was automatically generated from user-link.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.userLink = function(opt_data, opt_ignored) {
  var output = '';
  var displayName__soy3 = opt_data.user.displayName || opt_data.user.name;
  output += (opt_data.href || opt_data.user.type == 'NORMAL' && opt_data.user.slug && !!(require('bitbucket/internal/model/page-state').getCurrentUser())) ? '<a href="' + soy.$$escapeHtml(opt_data.href ? opt_data.href : require('bitbucket/util/navbuilder').user(opt_data.user).build()) + '" ' + ((opt_data.extraClasses) ? 'class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + ((! opt_data.skipTitle) ? 'title="' + soy.$$escapeHtml(displayName__soy3) + '"' : '') + '>' + soy.$$escapeHtml(soy.$$truncate(displayName__soy3, 100, true)) + '</a>' : '<span' + ((opt_data.extraClasses) ? ' class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + ((! opt_data.skipTitle) ? ' title="' + soy.$$escapeHtml(displayName__soy3) + '"' : '') + '>' + soy.$$escapeHtml(soy.$$truncate(displayName__soy3, 100, true)) + '</span>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.userLink.soyTemplateName = 'bitbucket.internal.widget.userLink';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:avatar', location = '/static/bitbucket/internal/widget/avatar/access-key-avatar.soy' */
// This file was automatically generated from access-key-avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.accessKey = function(opt_data, opt_ignored) {
  return '<span title="' + soy.$$escapeHtml(opt_data.text) + '"><span class="aui-avatar aui-avatar-' + soy.$$escapeHtml(opt_data.size) + ' key-avatar"></span><span class="access-key-label">' + soy.$$escapeHtml(opt_data.label || opt_data.text) + '</span></span>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.accessKey.soyTemplateName = 'bitbucket.internal.widget.accessKey';
}


bitbucket.internal.widget.accessKeyWithText = function(opt_data, opt_ignored) {
  return bitbucket.internal.widget.accessKey(opt_data) + '<span class="access-key-text" title="' + soy.$$escapeHtml(opt_data.text) + '">' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.accessKeyWithText.soyTemplateName = 'bitbucket.internal.widget.accessKeyWithText';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:avatar', location = '/static/bitbucket/internal/widget/avatar/group-avatar.soy' */
// This file was automatically generated from group-avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.groupAvatar = function(opt_data, opt_ignored) {
  return '<span class="aui-avatar aui-avatar-' + soy.$$escapeHtml(opt_data.size) + ' group-avatar' + soy.$$escapeHtml(opt_data.extraClasses ? ' ' + opt_data.extraClasses : '') + '" data-groupname="' + soy.$$escapeHtml(opt_data.name) + '"></span>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.groupAvatar.soyTemplateName = 'bitbucket.internal.widget.groupAvatar';
}


bitbucket.internal.widget.groupAvatarWithName = function(opt_data, opt_ignored) {
  return '<span title="' + soy.$$escapeHtml(opt_data.name) + '"' + ((opt_data.extraClasses) ? ' class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + '><span class="aui-avatar aui-avatar-' + soy.$$escapeHtml(opt_data.size) + ' group-avatar' + soy.$$escapeHtml(opt_data.avatarClasses ? ' ' + opt_data.avatarClasses : '') + '" data-groupname="' + soy.$$escapeHtml(opt_data.name) + '"></span>' + soy.$$escapeHtml(opt_data.name) + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.groupAvatarWithName.soyTemplateName = 'bitbucket.internal.widget.groupAvatarWithName';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:avatar', location = '/static/bitbucket/internal/widget/avatar/avatar.soy' */
// This file was automatically generated from avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.avatar = function(opt_data, opt_ignored) {
  return '' + aui.avatar.avatar({size: opt_data.size, avatarImageUrl: require('bitbucket/util/navbuilder')._avatarUrl(opt_data.person, ({XSMALL:32,SMALL:48,MEDIUM:64,LARGE:96,XLARGE:128,XXLARGE:192,XXXLARGE:256})[opt_data.size.toUpperCase()]).build(), accessibilityText: opt_data.person.displayName || opt_data.person.name, title: opt_data.tooltip, badgeContent: opt_data.badgeContent, extraClasses: 'user-avatar' + (opt_data.hideBadge ? ' badge-hidden' : '') + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), imageClasses: opt_data.imageClasses, extraAttributes: {'data-username': opt_data.person.name}, id: opt_data.id});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.avatar.soyTemplateName = 'bitbucket.internal.widget.avatar';
}


bitbucket.internal.widget.avatarWithName = function(opt_data, opt_ignored) {
  var output = '';
  var personName__soy14 = opt_data.person.displayName || opt_data.person.name;
  output += '<div class="avatar-with-name' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + ((opt_data.deleted) ? ' deleted-user' : '') + '" title="' + soy.$$escapeHtml(personName__soy14) + '">' + bitbucket.internal.widget.avatar({size: opt_data.size, person: opt_data.person, imageClasses: opt_data.imageClasses, extraClasses: opt_data.avatarClasses, badgeContent: opt_data.badgeContent, hideBadge: opt_data.hideBadge, id: opt_data.id}) + ((opt_data.link && ! opt_data.deleted) ? bitbucket.internal.widget.userLink({user: opt_data.person, href: opt_data.href, extraClasses: opt_data.linkExtraClasses, skipTitle: true}) : '<span class="display-name">' + soy.$$escapeHtml(personName__soy14) + '</span>') + '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.avatarWithName.soyTemplateName = 'bitbucket.internal.widget.avatarWithName';
}


bitbucket.internal.widget.avatarWithNameAndEmail = function(opt_data, opt_ignored) {
  return bitbucket.internal.widget.avatarWithName(opt_data) + '<span class="email-address" title="' + soy.$$escapeHtml(opt_data.person.emailAddress) + '">' + soy.$$escapeHtml(opt_data.person.emailAddress) + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.avatarWithNameAndEmail.soyTemplateName = 'bitbucket.internal.widget.avatarWithNameAndEmail';
}


bitbucket.internal.widget.avatarSizeInPx = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(({XSMALL:32,SMALL:48,MEDIUM:64,LARGE:96,XLARGE:128,XXLARGE:192,XXXLARGE:256})[opt_data.size.toUpperCase()]) + ((opt_data.showPx) ? 'px' : '');
};
if (goog.DEBUG) {
  bitbucket.internal.widget.avatarSizeInPx.soyTemplateName = 'bitbucket.internal.widget.avatarSizeInPx';
}


bitbucket.internal.widget.avatarWithBadge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.avatar({size: opt_data.size, person: opt_data.person, tooltip: opt_data.tooltip, imageClasses: opt_data.imageClasses, extraClasses: opt_data.extraClasses, id: opt_data.id, hideBadge: opt_data.hideBadge, badgeContent: '<span class="badge' + soy.$$escapeHtml(opt_data.badgeClasses ? ' ' + opt_data.badgeClasses : '') + '">' + soy.$$escapeHtml(opt_data.badgeText) + '</span>'});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.avatarWithBadge.soyTemplateName = 'bitbucket.internal.widget.avatarWithBadge';
}


bitbucket.internal.widget.avatarWithNameAndBadge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.avatarWithName({size: opt_data.size, person: opt_data.person, extraClasses: opt_data.extraClasses, avatarClasses: opt_data.avatarClasses, imageClasses: opt_data.imageClasses, id: opt_data.id, hideBadge: opt_data.hideBadge, badgeContent: '<span class="badge' + soy.$$escapeHtml(opt_data.badgeClasses ? ' ' + opt_data.badgeClasses : '') + '">' + soy.$$escapeHtml(opt_data.badgeText) + '</span>'});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.avatarWithNameAndBadge.soyTemplateName = 'bitbucket.internal.widget.avatarWithNameAndBadge';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:loaded-range', location = '/static/bitbucket/internal/widget/loaded-range.js' */
define("bitbucket/internal/widget/loaded-range",["module","exports"],function(f,c){function b(a){this.nextPageStart=this.start=void 0;this._reachedCapacity=this._reachedEnd=this._reachedStart=!1;this._capacity=a||Infinity}Object.defineProperty(c,"__esModule",{value:!0});b.prototype.isEmpty=function(){return void 0===this.start};b.prototype.isBeforeStart=function(a){return a<this.start};b.prototype.isAfterNextPageStart=function(a){return a>this.nextPageStart};b.prototype.isLoaded=function(a){return!(this.isEmpty()||
this.isBeforeStart(a)||this.isAfterNextPageStart(a))};b.prototype.getAttachmentMethod=function(a,b){return this.isEmpty()?"html":this.isBeforeStart(a)?"prepend":"append"};b.prototype.add=function(a,b,c,d){var e=this.isEmpty();d=d||a+b;if(e||this.isBeforeStart(a))this.start=a;if(e||this.isAfterNextPageStart(d))this.nextPageStart=d;this._reachedStart=this._reachedStart||0>=a;!(this._reachedEnd=this._reachedEnd||c)&&this.nextPageStart>=this._capacity&&(this._reachedCapacity=this._reachedEnd=!0);return this};
b.prototype.reachedStart=function(){return this._reachedStart};b.prototype.reachedEnd=function(){return this._reachedEnd};b.prototype.reachedCapacity=function(){return this._reachedCapacity};b.prototype.pageBefore=function(a){if(this.reachedStart())return null;a=Math.max(0,this.start-a);return{start:a,limit:this.start-a}};b.prototype.pageAfter=function(a){return this.reachedEnd()?null:{start:this.nextPageStart,limit:a}};c.default=b;f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:paged-scrollable', location = '/static/bitbucket/internal/widget/paged-scrollable.js' */
define("bitbucket/internal/widget/paged-scrollable","module exports aui jquery lodash bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/navigator bitbucket/internal/widget/loaded-range".split(" "),function(q,g,h,r,t,u,v,w,x){function b(a,e){this.options=d.default.extend({},b.defaults,e);this.$scrollElement=(0,d.default)(a||window);if(d.default.isWindow(this.$scrollElement[0])){var c=window.document.documentElement;this.getPaneHeight=function(){return c.clientHeight};
this.getContentHeight=function(){return c.scrollHeight}}this._eventHandlers=[]}function k(a,b,c){if(a.currentXHR)return d.default.Deferred().reject();a.currentXHR=a.requestData(b,c);return a.currentXHR.always(function(){a.currentXHR=null}).done(function(e){!a.loadedRange.isEmpty()&&a.options.paginationContext&&m.default.trigger("bitbucket.internal.ui.nav.pagination",null,{context:a.options.paginationContext,page:(e.start||b)/(e.limit||c)+1});a.onDataLoaded(b,c,e)}).fail(function(){a.suspend()})}Object.defineProperty(g,
"__esModule",{value:!0});var y=babelHelpers.interopRequireDefault(h),d=babelHelpers.interopRequireDefault(r),f=babelHelpers.interopRequireDefault(t),m=babelHelpers.interopRequireDefault(u),n=babelHelpers.interopRequireDefault(v);h=babelHelpers.interopRequireDefault(w);var z=babelHelpers.interopRequireDefault(x),p=h.default.isIE();b.defaults={pageSize:50,scrollDelay:250,bufferPixels:0,precedingSpaceMaintained:!0,suspendOnFailure:!0,dataLoadedEvent:"bitbucket.internal.widget.pagedscrollable.dataLoaded",
autoLoad:!0,preventOverscroll:!1,idForEntity:null,paginationContext:null};b.prototype.init=function(a){b.prototype.reset.call(this);a=a||{};this.loadedRange=a.loadedRange||new z.default;var e=this,c=this.options.pageSize,l=a.targetedItem?Math.floor(a.targetedItem/c)*c:0;a.suspended&&this.suspend();return this.loadedRange.isLoaded(l)?(this.loadIfRequired()||d.default.Deferred().resolve()).done(function(){e.onFirstDataLoaded()}):k(this,l,c).then(void 0,function(){return 0!==l?k(e,0,c):d.default.Deferred().rejectWith(this,
arguments)}).fail(function(a,c,b,d){f.default.get(d,"errors.length")&&e.handleErrors(d.errors)})};b.prototype.reset=function(){this.currentXHR&&this.cancelRequest();this.clearListeners();this._resizeHandler&&((0,d.default)(window).off("resize",this._resizeHandler),this._resizeHandler=null);this.options.idForEntity&&(this._ids={});this._suspended=!1};b.prototype.destroy=function(){this.reset();delete this.$scrollElement};b.prototype.suspend=function(){this._suspended=!0};b.prototype.resume=function(){this._suspended=
!1;return this.loadIfRequired()};b.prototype.isSuspended=function(){return this._suspended};b.prototype.getScrollTop=function(){return this.$scrollElement.scrollTop()};b.prototype.setScrollTop=function(a){this.$scrollElement.scrollTop(a)};b.prototype.getPane=function(){return this.$scrollElement};b.prototype.getPaneHeight=function(){return this.$scrollElement[0].clientHeight};b.prototype.getContentHeight=function(){return this.$scrollElement[0].scrollHeight};b.prototype.getOption=function(a){if(Object.prototype.hasOwnProperty.call(this.options,
a))return this.options[a]};b.prototype.setOptions=function(a){d.default.isPlainObject(a)&&(this.options=d.default.extend(this.options,a))};b.prototype.addScrollListener=function(a){a=this.scrollDelay?f.default.debounce(a,this.scrollDelay):a;this._eventHandlers.push(a);this.$scrollElement.on("scroll.paged-scrollable",a)};b.prototype._bindOverscrollPrevention=function(){function a(a,c){var b=this.scrollHeight-(0,d.default)(this).outerHeight()-1,e=0>c||isNaN(c);c=0<c||isNaN(c);(this.scrollTop>b&&e||
1>this.scrollTop&&c)&&a.preventDefault()}this._eventHandlers.push(a);this.$scrollElement.on("mousewheel.paged-scrollable",a)};b.prototype.clearListeners=function(){var a=this;f.default.forEach(this._eventHandlers,function(b){a.$scrollElement.unbind(".paged-scrollable",b)});this._eventHandlers.length=0};b.prototype.loadIfRequired=function(){if(!(this.isSuspended()||this.loadedRange.reachedEnd()&&this.loadedRange.reachedStart())){var a=this.getScrollTop(),b=this.getPaneHeight(),c=this.getContentHeight();
b+=a;if(d.default.isWindow(this.getPane()[0])||!this.getPane().is(":hidden")){if(f.default.some([!0,"previous"],n.default.eq(this.options.autoLoad))&&a<this.options.bufferPixels+this.loadedRange.start/this.loadedRange.nextPageStart*c&&(a=this.loadedRange.pageBefore(this.options.pageSize)))return this.load(a.start,a.limit);if(f.default.some([!0,"next"],n.default.eq(this.options.autoLoad))&&b+1>=c-this.options.bufferPixels&&(c=this.loadedRange.pageAfter(this.options.pageSize)))return this.load(c.start,
c.limit)}}};b.prototype.load=function(a,b){var c=this;return k(this,a,b).fail(function(a,b,e,d){d&&d.errors&&c.handleErrors(d.errors)})};b.prototype.loadAfter=function(){var a=this.loadedRange.pageAfter(this.options.pageSize);return a&&this.load(a.start,a.limit)};b.prototype.loadBefore=function(){var a=this.loadedRange.pageBefore(this.options.pageSize);return a&&this.load(a.start,a.limit)};b.prototype.onDataLoaded=function(a,b,c){void 0!==c.start&&(a=c.start);var e=this.loadedRange.isEmpty(),d=this.loadedRange.getAttachmentMethod(a,
c.size),f="prepend"===d;this.loadedRange.add(a,c.size,c.isLastPage,c.nextPageStart);if(f||p){var g=this.getScrollTop();var h=this.getContentHeight()}c=this._addPage(c,d);if(f||p)d=f?this.getContentHeight()-h:0,this.setScrollTop(g+d);if(e)this.onFirstDataLoaded(a,b,c);m.default.trigger(this.options.dataLoadedEvent,this,a,b,c);this.loadIfRequired()};b.prototype._addPage=function(a,b){a=this._dedupe(a);this.attachNewContent(a,b);return a};b.prototype._dedupe=function(a){if(a&&a.values&&this.options.idForEntity){var b=
this._ids,c=this.options.idForEntity;a=d.default.extend({},a,{values:f.default.filter(a.values,function(a){a=c(a);return f.default.has(b,a)?!1:b[a]=!0})})}return a};b.prototype.onFirstDataLoaded=function(){var a=this;this.addScrollListener(function(){a.loadIfRequired()});this.options.preventOverscroll&&this._bindOverscrollPrevention();(0,d.default)(window).on("resize",this._resizeHandler=function(){a.loadIfRequired()})};b.prototype.cancelRequest=function(){this.currentXHR&&(this.currentXHR.abort?
this.currentXHR.abort():this.currentXHR.reject?this.currentXHR.reject():y.default.log("Couldn't cancel the current request."),this.currentXHR=null)};b.prototype.add=function(a,b){return a.length?(this._addPage({values:a,size:a.length},b||"prepend"),!0):!1};b.prototype.remove=function(a){return this.options.idForEntity&&(a=this.options.idForEntity(a),f.default.has(this._ids,a))?(delete this._ids[a],"number"===typeof this.loadedRange.nextPageStart&&(this.loadedRange.nextPageStart=Math.max(0,this.loadedRange.nextPageStart-
1)),!0):!1};b.prototype.attachNewContent=function(a,b){throw Error("attachNewContent is abstract and must be implemented.");};b.prototype.requestData=function(a,b){throw Error("requestData is abstract and must be implemented.  It must return a promise. It is preferred to return a jqXHR.");};b.prototype.handleErrors=function(a){throw Error("handleErrors is abstract and must be implemented.");};g.default=b;q.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:paged-table', location = '/static/bitbucket/internal/widget/paged-table/paged-table.soy' */
// This file was automatically generated from paged-table.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.pagedTable = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.filterable) ? bitbucket.internal.widget.pagedTableFilter({forId: opt_data.id, filter: opt_data.filter, filterPlaceholder: opt_data.filterPlaceholder}) : '');
  var pageAttributes__soy9 = opt_data.page ? atl_soy.concat({start: opt_data.page.start, size: opt_data.page.size, lastpage: opt_data.page.isLastPage}, opt_data.page.nextPageRequest ? {nextpagestart: opt_data.page.nextPageRequest.start} : {}) : {};
  output += widget.aui.table({id: opt_data.id, dataAttributes: atl_soy.concat(pageAttributes__soy9, opt_data.extraDataAttributes ? opt_data.extraDataAttributes : {}), extraClasses: 'paged-table' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + ((! opt_data.page || opt_data.page.size == 0) ? ' no-rows' : ''), theadContent: opt_data.theadContent, content: opt_data.content}) + ((opt_data.page && opt_data.page.size == 0) ? bitbucket.internal.widget.pagedTableMessage({content: opt_data.filterable && opt_data.filter ? (opt_data.noneMatchingMessageContent ? opt_data.noneMatchingMessageContent : '') : opt_data.noneFoundMessageContent ? opt_data.noneFoundMessageContent : ''}) : '');
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.pagedTable.soyTemplateName = 'bitbucket.internal.widget.pagedTable';
}


bitbucket.internal.widget.pagedTableMessage = function(opt_data, opt_ignored) {
  return '<div class="paged-table-message">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.pagedTableMessage.soyTemplateName = 'bitbucket.internal.widget.pagedTableMessage';
}


bitbucket.internal.widget.pagedTableFilter = function(opt_data, opt_ignored) {
  return '' + aui.group.group({extraClasses: 'paged-table-filter', content: '' + aui.group.item({content: '' + bitbucket.internal.widget.pagedTableFilterField(opt_data)})});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.pagedTableFilter.soyTemplateName = 'bitbucket.internal.widget.pagedTableFilter';
}


bitbucket.internal.widget.pagedTableFilterField = function(opt_data, opt_ignored) {
  return '<label class="assistive" for="paged-table-input-for-' + soy.$$escapeHtml(opt_data.forId) + '">' + soy.$$escapeHtml(opt_data.filterPlaceholder ? opt_data.filterPlaceholder : 'Find') + '</label><input type="text" id="paged-table-input-for-' + soy.$$escapeHtml(opt_data.forId) + '" class="paged-table-filter-input" data-for="' + soy.$$escapeHtml(opt_data.forId) + '" autocomplete="off" placeholder="' + soy.$$escapeHtml(opt_data.filterPlaceholder ? opt_data.filterPlaceholder : 'Find') + '" value="' + soy.$$escapeHtml(opt_data.filter ? opt_data.filter : '') + '">';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.pagedTableFilterField.soyTemplateName = 'bitbucket.internal.widget.pagedTableFilterField';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:paged-table', location = '/static/bitbucket/internal/widget/paged-table/paged-table.js' */
define("bitbucket/internal/widget/paged-table/paged-table","module exports aui jquery lodash bitbucket/internal/util/ajax bitbucket/internal/widget/error-dialog/error-dialog bitbucket/internal/widget/paged-scrollable".split(" "),function(l,g,m,n,p,q,r,t){function b(a){a=d.default.extend(!0,{},b.defaults,a);e.default.call(this,a.scrollPaneSelector,a);this.$table=(0,d.default)(a.target);if(a.filterable){this.$filter=a.filter?(0,d.default)(a.filter):this.$table.prev(".paged-table-filter").find(".paged-table-filter-input");
this._currentFilterText=d.default.trim(this.$filter.val());var h=f.default.debounce(f.default.bind(this._onFilterChanged,this),a.filterDebounce);this.$filter.on("keyup.paged-table-filter",function(a){a.which===k.default.keyCode.ESCAPE?(0,d.default)(this).blur():h(a)}).on("paste.paged-table-filter",h)}this.$spinner=(0,d.default)("\x3cdiv class\x3d'spinner'/\x3e").hide().insertAfter(this.$table);this.spinnerShowing=!1;this.processedDomData=null==this.$table.attr("data-lastpage")}Object.defineProperty(g,
"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(m),d=babelHelpers.interopRequireDefault(n),f=babelHelpers.interopRequireDefault(p),u=babelHelpers.interopRequireDefault(q),v=babelHelpers.interopRequireDefault(r),e=babelHelpers.interopRequireDefault(t);b.defaults={ajaxDataType:"json",spinnerSize:"large",filterable:!1,bufferPixels:150,filterDebounce:350,rowSelector:"\x3e tbody \x3e tr",focusOptions:{escToCancel:!1,focusedClass:"focused",rowSelector:"\x3e tbody \x3e tr",wrapAround:!1}};
d.default.extend(b.prototype,e.default.prototype);b.prototype.init=function(){return e.default.prototype.init.apply(this,arguments).done(f.default.bind(function(){this.shortcutsInitialised&&this.focusInitialRow()},this))};b.prototype.getFilterText=function(){return this._currentFilterText};b.prototype._onFilterChanged=function(){var a=d.default.trim(this.$filter.val());this._currentFilterText!==a&&(this._currentFilterText=a,this.update())};b.prototype.requestData=function(a,b){if(!this.processedDomData)return d.default.Deferred().resolve(this.createDataFromJQuery(a,
b,this.$table));var c=this;c.spinnerShowing=!0;c.$spinner.show().spin(c.options.spinnerSize,{zIndex:10});return c.performAjax(a,b).always(function(){c._hideSpinnerTimeout=setTimeout(function(){c.spinnerShowing&&c.$spinner.spinStop().hide();c.spinnerShowing=!1},0)})};b.prototype.performAjax=function(a,b){return u.default.ajax({url:this.buildUrl(a,b,this.getFilterText()),dataType:this.options.ajaxDataType,statusCode:this.options.statusCode})};b.prototype.cancelRequest=function(){e.default.prototype.cancelRequest.call(this);
this._hideSpinnerTimeout&&clearTimeout(this._hideSpinnerTimeout)};b.prototype.reset=function(){e.default.prototype.reset.call(this);this.processedDomData&&this.$table.find(this.options.rowSelector).remove().end().next(".paged-table-message").remove().end();this.$table.addClass("no-rows")};b.prototype.update=function(a){this.reset();return this.init(a)};b.prototype.createDataFromJQuery=function(a,b,c){b=c.find(this.options.rowSelector);var d="true"===c.attr("data-lastpage");a=c.attr("data-nextpagestart");
c={start:Number(c.attr("data-start")),size:Number(c.attr("data-size")),values:b,isLastPage:d};null!=a&&(c.nextPageStart=Number(a));return c};b.prototype.attachNewContent=function(a,b){if(a.size){if(this.processedDomData){if(a&&a.errors){this.handleErrors(a.errors);return}this.handleNewRows(a,b)}0<a.start&&a.isLastPage&&this.handleLastPage();this.$table.removeClass("no-rows")}else a.isLastPage&&this.handleNoData();this.updateTimestamp();this.processedDomData=!0};b.prototype.updateTimestamp=function(){this.$table.attr("data-last-updated",
(new Date).getTime())};b.prototype.focusInitialRow=function(){this.$table.find(this.options.focusOptions.rowSelector).first().addClass(this.options.focusOptions.focusedClass)};b.prototype.initShortcuts=function(){this.shortcutsInitialised=!0;this.focusInitialRow();return{destroy:f.default.bind(this.resetShortcuts,this)}};b.prototype.resetShortcuts=function(){this.shortcutsInitialised=!1};b.prototype._new$Message=function(a){return(0,d.default)('\x3cdiv class\x3d"paged-table-message"/\x3e').addClass(this.options.tableMessageClass).html(a||
"")};b.prototype.handleLastPage=function(){this.$table.after(this._new$Message(this.options.allFetchedMessageHtml))};b.prototype.handleNoData=function(){var a=this.getFilterText();a=a&&a.length?this.options.noneMatchingMessageHtml:this.options.noneFoundMessageHtml;this.$table.addClass("no-rows").after(this._new$Message(a))};b.prototype.handleErrors=function(a){(new v.default({panelContent:"\x3cp\x3e"+k.default.escapeHtml(a[0].message)+"\x3c/p\x3e"})).show()};b.prototype.buildUrl=function(a,b,c){throw Error("buildUrl is abstract and must be implemented.");
};b.prototype.handleNewRows=function(a,b){throw Error("handleNewRows is abstract and must be implemented.");};g.default=b;l.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comment-count', location = '/static/bitbucket/internal/feature/comment-count/comment-count.soy' */
// This file was automatically generated from comment-count.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }


bitbucket.internal.feature.commentCount = function(opt_data, opt_ignored) {
  var output = '<span class="comment-count" title="' + soy.$$escapeHtml(AJS.format('{0} {0,choice,1#comment|1\x3ccomments}',parseInt(opt_data.count))) + '">';
  switch (opt_data.size ? opt_data.size : 'small') {
    case 'small':
    case 'large':
      output += aui.icons.icon({icon: 'comment', size: opt_data.size, useIconFont: true, accessibilityText: AJS.format('{0} {0,choice,1#comment|1\x3ccomments}',parseInt(opt_data.count))});
      break;
    case 'tiny':
      output += '<img width="10" height="12" src="' + soy.$$escapeHtml('/s/-1609296852/cad3c23/10/1.0/_/download/resources/com.atlassian.bitbucket.server.bitbucket-web:comment-count/icons/icon-comment-tiny.svg') + '" alt="' + soy.$$escapeHtml(AJS.format('{0} {0,choice,1#comment|1\x3ccomments}',parseInt(opt_data.count))) + '" />';
      break;
    default:
      output += 'INVALID SIZE PROVIDED TO commentCount: ' + soy.$$escapeHtml(opt_data.size);
  }
  output += '<span class="count">' + soy.$$escapeHtml(require('bitbucket/internal/util/text').capInt(opt_data.count, 99)) + '</span></span>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentCount.soyTemplateName = 'bitbucket.internal.feature.commentCount';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comment-count', location = '/static/bitbucket/internal/feature/comment-count/comment-count.js' */
define("bitbucket/internal/feature/comment-count/comment-count",["module","exports"],function(c,b){Object.defineProperty(b,"__esModule",{value:!0});b.default={pullRequestRowItem:function(a){a=a.pullRequest;return a.properties&&a.properties.commentCount?bitbucket.internal.feature.commentCount({count:a.properties.commentCount}):""}};c.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commits-table', location = '/static/bitbucket/internal/feature/commits/commits-table-clientside.soy' */
// This file was automatically generated from commits-table-clientside.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.commits.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.commits == 'undefined') { bitbucket.internal.feature.commits = {}; }


bitbucket.internal.feature.commits.commitsTableImpl = function(opt_data, opt_ignored) {
  var param13 = '';
  if (opt_data.commitPage) {
    var commitList16 = opt_data.commitPage.values;
    var commitListLen16 = commitList16.length;
    for (var commitIndex16 = 0; commitIndex16 < commitListLen16; commitIndex16++) {
      var commitData16 = commitList16[commitIndex16];
      param13 += bitbucket.internal.feature.commits.commitsTableRow({commit: commitData16, cellsContent: '' + bitbucket.internal.feature.commits.commitsTableCells({repository: opt_data.repository, commit: commitData16, webSections: opt_data.webSections, pullRequest: opt_data.pullRequest})});
    }
  }
  var output = '' + bitbucket.internal.widget.pagedTable({id: opt_data.tableId, page: opt_data.commitPage, extraClasses: 'commits-table' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), theadContent: '' + ((opt_data.commitPage && (opt_data.commitPage.size > 0 || opt_data.commitPage.start > 0) || ! opt_data.commitPage) ? '<tr>' + bitbucket.internal.feature.commits.commitsTableHeaderCells(opt_data) + '</tr>' : ''), content: param13});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commits.commitsTableImpl.soyTemplateName = 'bitbucket.internal.feature.commits.commitsTableImpl';
}


bitbucket.internal.feature.commits.commitsTableHeaderCells = function(opt_data, opt_ignored) {
  var output = '<th class="author" title="' + soy.$$escapeHtml('Author') + '" scope="col">' + soy.$$escapeHtml('Author') + '</th><th class="commit" title="' + soy.$$escapeHtml('Commit') + '" scope="col">' + soy.$$escapeHtml('Commit') + '</th><th class="message" title="' + soy.$$escapeHtml('Message') + '" scope="col">' + soy.$$escapeHtml('Message') + '</th><th class="comment-count" scope="col"></th><th class="timestamp" title="' + soy.$$escapeHtml('Commit date') + '" scope="col">' + soy.$$escapeHtml('Commit date') + '</th>';
  if (opt_data.webSections) {
    var webSectionList47 = opt_data.webSections;
    var webSectionListLen47 = webSectionList47.length;
    for (var webSectionIndex47 = 0; webSectionIndex47 < webSectionListLen47; webSectionIndex47++) {
      var webSectionData47 = webSectionList47[webSectionIndex47];
      output += '<th class="' + soy.$$escapeHtml(webSectionData47.key) + '" title="' + soy.$$escapeHtml(webSectionData47.labelText) + '" scope="col">' + soy.$$escapeHtml(webSectionData47.labelText) + '</th>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commits.commitsTableHeaderCells.soyTemplateName = 'bitbucket.internal.feature.commits.commitsTableHeaderCells';
}


bitbucket.internal.feature.commits.commitsTableRow = function(opt_data, opt_ignored) {
  return '<tr data-commitid="' + soy.$$escapeHtml(opt_data.commit.id) + '" class="commit-row ' + ((opt_data.commit.parents.length >= 2) ? 'merge' : '') + '" data-commit-json="' + soy.$$escapeHtml(JSON.stringify(opt_data.commit).replace(/\//g, '\\/')) + '">' + soy.$$filterNoAutoescape(opt_data.cellsContent) + '</tr>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commits.commitsTableRow.soyTemplateName = 'bitbucket.internal.feature.commits.commitsTableRow';
}


bitbucket.internal.feature.commits.commitsTableCells = function(opt_data, opt_ignored) {
  var output = '<td class="author">' + bitbucket.internal.widget.avatarWithName({size: 'small', person: opt_data.commit.author, link: true, linkExtraClasses: 'secondary-link'}) + '</td><td class="commit">' + bitbucket.internal.feature.commit.link(opt_data) + '<!-- show merge lozenge/icon if is a merge commit, eg has 2+ parents -->' + ((opt_data.commit.parents.length >= 2) ? bitbucket.internal.widget.lozenge.merge({abbreviated: true}) : '') + '</td><td class="message">';
  var parsedCommitMessage__soy87 = require('bitbucket/internal/util/parse-commit-message').splitIntoSubjectAndBody(opt_data.commit.message);
  output += '<span class="message-subject">' + soy.$$escapeHtml(soy.$$truncate(parsedCommitMessage__soy87.subject, 400, true)) + '</span><span class="message-body">' + soy.$$escapeHtml(soy.$$truncate(parsedCommitMessage__soy87.body, 400, true)) + '</span></td><td class="comment-count">' + ((opt_data.commit.properties && opt_data.commit.properties.commentCount) ? bitbucket.internal.feature.commentCount({count: opt_data.commit.properties.commentCount}) : '') + '</td><td class="timestamp">' + bitbucket.internal.widget.date.shortAge({date: opt_data.commit.authorTimestamp}) + '</td>' + ((opt_data.webSections) ? bitbucket.internal.feature.commits.commitsRowExtras(opt_data) : '');
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commits.commitsTableCells.soyTemplateName = 'bitbucket.internal.feature.commits.commitsTableCells';
}


bitbucket.internal.feature.commits.link = function(opt_data, opt_ignored) {
  return ((opt_data.leadingSpaces) ? soy.$$escapeHtml(opt_data.leadingSpaces) : '') + '<a href="' + soy.$$escapeHtml(opt_data.commitUrl) + '" class="commit-preview-trigger commit-link" data-commit-id="' + soy.$$escapeHtml(opt_data.commit.id) + '" data-commit-message="' + soy.$$escapeHtml(opt_data.commit.message) + '">' + soy.$$escapeHtml(opt_data.shortMessage) + '</a>' + ((opt_data.trailingSpaces) ? soy.$$escapeHtml(opt_data.trailingSpaces) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commits.link.soyTemplateName = 'bitbucket.internal.feature.commits.link';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commits-table', location = '/static/bitbucket/internal/feature/commits/commits-table.js' */
define("bitbucket/internal/feature/commits/commits-table","module exports aui aui/flag jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/commits/commit-message-enricher bitbucket/internal/util/events bitbucket/internal/widget/paged-table/paged-table".split(" "),function(n,g,p,q,r,t,u,v,w,x){function c(a,b){this.getCommitsUrlBuilder=a;a={target:"#commits-table",ajaxDataType:"html",tableMessageClass:"commits-table-message",allFetchedMessageHtml:'\x3cp class\x3d"no-more-results"\x3e'+
d.default.escapeHtml("No more history")+"\x3c/p\x3e",noneFoundMessageHtml:'\x3ch3 class\x3d"no-results entity-empty"\x3e'+d.default.escapeHtml("No history found")+"\x3c/h3\x3e",paginationContext:"commits-table"};b=h.default.extend({},a,b);f.default.call(this,b);this.$spinner.addClass("commits-table-spinner");this._destroyables=[]}Object.defineProperty(g,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(p),
y=babelHelpers.interopRequireDefault(q),h=babelHelpers.interopRequireDefault(r),m=babelHelpers.interopRequireDefault(t),z=babelHelpers.interopRequireDefault(u),A=babelHelpers.interopRequireDefault(v),k=babelHelpers.interopRequireDefault(w),f=babelHelpers.interopRequireDefault(x);h.default.extend(c.prototype,f.default.prototype);c.prototype.buildUrl=function(a,b){return this.getCommitsUrlBuilder().withParams({start:a,limit:b,contents:""}).build()};c.prototype.onDataLoaded=function(a,b,e){"string"===
typeof e&&(e=this.createDataFromJQuery(a,b,(0,h.default)(e)));return f.default.prototype.onDataLoaded.call(this,a,b,e)};c.prototype.onFirstDataLoaded=function(){var a=this;f.default.prototype.onFirstDataLoaded.call(this);m.default.defer(function(){a.$table.find("tr.commit-row").each(a.enrichCommitMessage);k.default.trigger("bitbucket.internal.widget.commitsTable.serverContentAdded",a)})};c.prototype.attachNewContent=function(a,b){f.default.prototype.attachNewContent.call(this,a,b);a.values.each(this.enrichCommitMessage);
k.default.trigger("bitbucket.internal.widget.commitsTable.contentAdded",this,a)};c.prototype.handleNewRows=function(a,b){this.$table.show().children("tbody")["html"!==b?b:"append"](a.values)};c.prototype.focusInitialRow=function(){this.$table.find("tbody tr.commit-row:first").addClass("focused-commit")};c.prototype.bindKeyboardShortcuts=function(){var a=this,b=this.$table.selector,e=!1,c={focusedClass:"focused-commit",wrapAround:!1,escToCancel:!1},g=b+" .commit-row."+c.focusedClass,l=g+", "+b+".show-merges .commit-row, "+
b+":not(.show-merges) .commit-row:not(.merge)";this._onDisableOpenItemHandler=function(){e=!0};this._onEnableOpenItemHandler=function(){e=!1};this.bindMoveToNextHandler=function(a){(this.moveToNextItem?this:d.default.whenIType(a)).moveToNextItem(l,c).execute(function(){(0,h.default)(l).last().hasClass(c.focusedClass)&&window.scrollTo(0,document.documentElement.scrollHeight)})};this.bindMoveToPreviousHandler=function(a){(this.moveToPrevItem?this:d.default.whenIType(a)).moveToPrevItem(l,c)};this.bindOpenItemHandler=
function(a){(this.execute?this:d.default.whenIType(a)).execute(function(){if(!e){var a=jQuery(g);a.length&&(window.location.href=a.find("td.commit a").attr("href"))}})};this.bindToggleMergesHandler=function(b){var c;(this.execute?this:d.default.whenIType(b)).execute(function(){a.$table.toggleClass("show-merges");var b=a.$table.hasClass("show-merges")?"Showing all commits":"Hiding merge commits";c&&c.close();c=(0,y.default)({type:"info",
title:b,close:"auto"})})};this._destroyables.push(k.default.chain().on("bitbucket.internal.keyboard.shortcuts.requestMoveToNextHandler",this.bindMoveToNextHandler).on("bitbucket.internal.keyboard.shortcuts.requestMoveToPreviousHandler",this.bindMoveToPreviousHandler).on("bitbucket.internal.keyboard.shortcuts.requestOpenItemHandler",this.bindOpenItemHandler).on("bitbucket.internal.keyboard.shortcuts.requestToggleMergesHandler",this.bindToggleMergesHandler).on("bitbucket.internal.keyboard.shortcuts.disableOpenItemHandler",
this._onDisableOpenItemHandler).on("bitbucket.internal.keyboard.shortcuts.enableOpenItemHandler",this._onEnableOpenItemHandler));this._destroyables.push(f.default.prototype.initShortcuts.call(this))};c.prototype.enrichCommitMessage=function(a,b){a=(0,h.default)(b);var c=a.data("commit-json"),d=z.default.currentRepo().commit(c.id).build();a.find(".message-subject, .message-body").each(function(a,b){var e=(0,h.default)(b);A.default.process(e.text(),c,function(a){return bitbucket.internal.feature.commits.link({commit:c,
commitUrl:d,shortMessage:a.trim(),leadingSpaces:a.match(/^\s*/)[0],trailingSpaces:a.match(/\s*$/)[0]})}).then(function(a){e.html(a)})})};c.prototype.destroy=function(){f.default.prototype.destroy.call(this);m.default.invokeMap(this._destroyables,"destroy")};g.default=c;n.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:enums', location = '/static/bitbucket/internal/enums.js' */
define("bitbucket/internal/enums",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});var c=a.Entities={PROJECT:"project",REPOSITORY:"repository",USER:"user"},d=a.EntityGroups={PROJECTS:"projects",REPOSITORIES:"repositories",USERS:"users"},e=a.UserType={NORMAL:"NORMAL",SERVICE:"SERVICE"},f=a.ProjectType={NORMAL:"NORMAL",PERSONAL:"PERSONAL"},g=a.scmId={GIT:"git",HG:"hg"},h=a.RefType={TAG:"tag",BRANCH:"branch",COMMIT:"commit"},b=a.ParticipantRole={AUTHOR:"author",REVIEWER:"reviewer",
PARTICIPANT:"participant"};a.UserRole=b;var k=a.ApprovalStatus={APPROVED:"APPROVED",NEEDS_WORK:"NEEDS_WORK",UNAPPROVED:"UNAPPROVED"},l=a.SelfAction={ADD_SELF:"ADD_SELF",REMOVE_SELF:"REMOVE_SELF"},m=a.PullRequestState={OPEN:"OPEN",MERGED:"MERGED",DECLINED:"DECLINED"},n=a.BranchStability={STABLE:"stable",UNSTABLE:"unstable"};a.MergeOutcome={CLEAN:"CLEAN",CONFLICTED:"CONFLICTED",UNKNOWN:"UNKNOWN"};a.default={ApprovalStatus:k,BranchStability:n,Entities:c,EntityGroups:d,ProjectType:f,PullRequestState:m,
RefType:h,ParticipantRole:b,SelfAction:l,scmId:g,UserRole:b,UserType:e}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-change-types', location = '/static/bitbucket/internal/model/file-change-types.js' */
define("bitbucket/internal/model/file-change-types",["module","exports"],function(c,b){Object.defineProperty(b,"__esModule",{value:!0});b.default={ADD:"ADD",DELETE:"DELETE",MODIFY:"MODIFY",COPY:"COPY",MOVE:"MOVE",RENAME:"RENAME",UNKNOWN:"UNKNOWN",changeTypeFromId:function(a){if(Object.prototype.hasOwnProperty.call(this,a)&&"string"===typeof this[a])return this[a]},guessChangeTypeFromDiff:function(a){return a?a.binary?null===a.source?this.ADD:null===a.destination?this.DELETE:this.MODIFY:(a=a.hunks[0])?
0===a.sourceLine?this.ADD:0===a.destinationLine?this.DELETE:this.MODIFY:this.UNKNOWN:this.UNKNOWN}};c.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:conflict-change-model', location = '/static/bitbucket/internal/model/conflict-change.js' */
define("bitbucket/internal/model/conflict-change",["module","exports","backbone-brace","bitbucket/internal/model/file-change-types","bitbucket/internal/model/path"],function(f,b,c,a,g){Object.defineProperty(b,"__esModule",{value:!0});c=babelHelpers.interopRequireDefault(c);var d=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(g);var e=c.default.Model.extend({namedAttributes:{srcPath:a.default,path:a.default,type:null},initialize:function(){this.setType(e._mapChangeType(this.getType(),
this.getSrcPath(),this.getPath()))}},{_mapChangeType:function(a,b,c){return a===d.default.MOVE&&b&&b.isSameDirectory(c)?d.default.RENAME:d.default.changeTypeFromId(a)}});b.default=e;f.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:conflict-model', location = '/static/bitbucket/internal/model/conflict.js' */
define("bitbucket/internal/model/conflict","module exports aui backbone-brace bitbucket/internal/model/conflict-change bitbucket/internal/model/file-change-types".split(" "),function(g,e,c,f,d,a){Object.defineProperty(e,"__esModule",{value:!0});c=babelHelpers.interopRequireDefault(c);f=babelHelpers.interopRequireDefault(f);d=babelHelpers.interopRequireDefault(d);a=babelHelpers.interopRequireDefault(a);var b={};b[a.default.ADD]={};b[a.default.ADD][a.default.ADD]="Conflict: Added file to Source, Added same file to Target";
b[a.default.ADD][a.default.RENAME]="Conflict: Added file to Source, Renamed to same on Target";b[a.default.ADD][a.default.MOVE]="Conflict: Added file to Source, Moved to same on Target";b[a.default.MODIFY]={};b[a.default.MODIFY][a.default.MODIFY]="Conflict: Modified on Source, Modified on Target";b[a.default.MODIFY][a.default.RENAME]="Conflict: Modified on Source, Renamed on Target";
b[a.default.MODIFY][a.default.MOVE]="Conflict: Modified on Source, Moved on Target";b[a.default.MODIFY][a.default.DELETE]="Conflict: Modified on Source, Deleted on Target";b[a.default.RENAME]={};b[a.default.RENAME][a.default.ADD]="Conflict: Renamed on Source, Added same to Target";b[a.default.RENAME][a.default.RENAME]="Conflict: Renamed on Source, Renamed on Target";
b[a.default.RENAME][a.default.MOVE]="Conflict: Renamed on Source, Moved on Target";b[a.default.RENAME][a.default.DELETE]="Conflict: Renamed on Source, Deleted on Target";b[a.default.MOVE]={};b[a.default.MOVE][a.default.ADD]="Conflict: Moved on Source, Added same to Target";b[a.default.MOVE][a.default.RENAME]="Conflict: Moved on Source, Renamed on Target";b[a.default.MOVE][a.default.MOVE]=
"Conflict: Moved on Source, Moved on Target";b[a.default.MOVE][a.default.DELETE]="Conflict: Moved on Source, Deleted on Target";b[a.default.DELETE]={};b[a.default.DELETE][a.default.MODIFY]="Conflict: Deleted on Source, Modified on Target";b[a.default.DELETE][a.default.RENAME]="Conflict: Deleted on Source, Renamed on Target";b[a.default.DELETE][a.default.MOVE]=
"Conflict: Deleted on Source, Moved on Target";a=f.default.Model.extend({namedAttributes:{ourChange:d.default,theirChange:d.default},getConflictMessage:function(){var a=this.getOurChange()&&this.getOurChange().getType(),c=this.getTheirChange()&&this.getTheirChange().getType();return b[c]&&b[c][a]||""}});e.default=a;g.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-change', location = '/static/bitbucket/internal/model/file-change.js' */
define("bitbucket/internal/model/file-change","module exports backbone-brace bitbucket/internal/model/commit-range bitbucket/internal/model/conflict bitbucket/internal/model/file-change-types bitbucket/internal/model/path bitbucket/internal/model/repository".split(" "),function(l,b,e,f,g,a,m,h){Object.defineProperty(b,"__esModule",{value:!0});e=babelHelpers.interopRequireDefault(e);f=babelHelpers.interopRequireDefault(f);g=babelHelpers.interopRequireDefault(g);var d=babelHelpers.interopRequireDefault(a);
a=babelHelpers.interopRequireDefault(m);h=babelHelpers.interopRequireDefault(h);var k=e.default.Model.extend({namedAttributes:{repository:h.default,commitRange:f.default,srcPath:a.default,path:a.default,line:null,search:null,type:null,nodeType:null,conflict:g.default,diff:null,srcExecutable:null,executable:null},initialize:function(){this.setType(k._mapChangeType(this.getType(),this.getSrcPath(),this.getPath()))}},{fromDiff:function(c,a,b){return new k({repository:b,commitRange:a,srcPath:c.source,
path:c.destination,diff:c,type:d.default.guessChangeTypeFromDiff(c)})},_mapChangeType:function(c,a,b){return c===d.default.MOVE&&a&&a.isSameDirectory(b)?d.default.RENAME:d.default.changeTypeFromId(c)}});b.default=k;l.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:bacon', location = '/static/bower/bacon/dist/Bacon.js' */
(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib={}.hasOwnProperty,jb=[].slice,kb=function(a,b){function c(){this.constructor=a}for(var d in b)ib.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},lb=function(a,b){return function(){return a.apply(b,arguments)}};a={toString:function(){return"Bacon"}},a.version="0.7.42",l=("undefined"!=typeof global&&null!==global?global:this).Error,gb={indexOf:Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){var c,d,e,f;for(c=e=0,f=a.length;f>e;c=++e)if(d=a[c],b===d)return c;return-1},indexWhere:function(a,b){var c,d,e,f;for(c=e=0,f=a.length;f>e;c=++e)if(d=a[c],b(d))return c;return-1},head:function(a){return a[0]},always:function(a){return function(){return a}},negate:function(a){return function(b){return!a(b)}},empty:function(a){return 0===a.length},tail:function(a){return a.slice(1,a.length)},filter:function(a,b){var c,d,e,f;for(c=[],e=0,f=b.length;f>e;e++)d=b[e],a(d)&&c.push(d);return c},map:function(a,b){var c,d,e,f;for(f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push(a(c));return f},each:function(a,b){var c,d;for(c in a)d=a[c],b(c,d);return void 0},toArray:function(a){return J(a)?a:[a]},contains:function(a,b){return-1!==gb.indexOf(a,b)},id:function(a){return a},last:function(a){return a[a.length-1]},all:function(a,b){var c,d,e;for(null==b&&(b=gb.id),d=0,e=a.length;e>d;d++)if(c=a[d],!b(c))return!1;return!0},any:function(a,b){var c,d,e;for(null==b&&(b=gb.id),d=0,e=a.length;e>d;d++)if(c=a[d],b(c))return!0;return!1},without:function(a,b){return gb.filter(function(b){return b!==a},b)},remove:function(a,b){var c;return c=gb.indexOf(b,a),c>=0?b.splice(c,1):void 0},fold:function(a,b,c){var d,e,f;for(e=0,f=a.length;f>e;e++)d=a[e],b=c(b,d);return b},flatMap:function(a,b){return gb.fold(b,[],function(b,c){return b.concat(a(c))})},cached:function(a){var b;return b=o,function(){return b===o&&(b=a(),a=void 0),b}},toString:function(a){var b,c,d,e;try{return X++,null==a?"undefined":L(a)?"function":J(a)?X>5?"[..]":"["+gb.map(gb.toString,a).toString()+"]":null!=(null!=a?a.toString:void 0)&&a.toString!==Object.prototype.toString?a.toString():"object"==typeof a?X>5?"{..}":(c=function(){var c;c=[];for(d in a)ib.call(a,d)&&(e=function(){try{return a[d]}catch(c){return b=c}}(),c.push(gb.toString(d)+":"+gb.toString(e)));return c}(),"{"+c+"}"):a}finally{X--}}},X=0,a._=gb,a.scheduler={setTimeout:function(a,b){return setTimeout(a,b)},setInterval:function(a,b){return setInterval(a,b)},clearInterval:function(a){return clearInterval(a)},now:function(){return(new Date).getTime()}},a.fromBinder=function(b,c){return null==c&&(c=gb.id),new k(B(a,"fromBinder",b,c),function(d){var e,f,g,h;return h=!1,e=!1,f=function(){return h?void 0:"undefined"!=typeof g&&null!==g?(g(),h=!0):e=!0},g=b(function(){var b,e,g,h,i,k;for(b=1<=arguments.length?jb.call(arguments,0):[],h=c.apply(this,b),J(h)&&gb.last(h)instanceof j||(h=[h]),g=a.more,i=0,k=h.length;k>i;i++)if(e=h[i],g=d(e=_(e)),g===a.noMore||e.isEnd())return f(),g;return g}),e&&f(),f})},a.$={},a.$.asEventStream=function(b,c,d){var e;return L(c)&&(e=[c,void 0],d=e[0],c=e[1]),eb(this.selector||this,"asEventStream",b,a.fromBinder(function(a){return function(d){return a.on(b,c,d),function(){return a.off(b,c,d)}}}(this),d))},null!=(hb="undefined"!=typeof jQuery&&null!==jQuery?jQuery:"undefined"!=typeof Zepto&&null!==Zepto?Zepto:void 0)&&(hb.fn.asEventStream=a.$.asEventStream),a.fromEventTarget=function(b,c,d){var e,f,g,h,i,j,k,l;return e=null!=(g=null!=(h=null!=(i=b.addEventListener)?i:b.addListener)?h:b.bind)?g:b.on,f=null!=(j=null!=(k=null!=(l=b.removeEventListener)?l:b.removeListener)?k:b.unbind)?j:b.off,eb(a,"fromEventTarget",b,c,a.fromBinder(function(a){return e.call(b,c,a),function(){return f.call(b,c,a)}},d))},a.fromPromise=function(b,c){return eb(a,"fromPromise",b,a.fromBinder(function(a){return b.then(a,function(b){return a(new i(b))}),function(){return c&&"function"==typeof b.abort?b.abort():void 0}},function(a){return[a,C()]}))},a.noMore=["<no-more>"],a.more=["<more>"],a.later=function(b,c){return eb(a,"later",b,c,a.fromPoll(b,function(){return[c,C()]}))},a.sequentially=function(b,c){var d;return d=0,eb(a,"sequentially",b,c,a.fromPoll(b,function(){var a;return a=c[d++],d<c.length?a:d===c.length?[a,C()]:C()}))},a.repeatedly=function(b,c){var d;return d=0,eb(a,"repeatedly",b,c,a.fromPoll(b,function(){return c[d++%c.length]}))},a.spy=function(a){return Z.push(a)},Z=[],Y=function(a){var b,c,d;if(Z.length&&!Y.running)try{for(Y.running=!0,c=0,d=Z.length;d>c;c++)(b=Z[c])(a)}finally{delete Y.running}return void 0},fb=function(a){return function(){var b,c,d,e;return d=arguments[0],b=2<=arguments.length?jb.call(arguments,1):[],"object"==typeof d&&b.length&&(c=d,e=b[0],d=function(){return c[e].apply(c,arguments)},b=b.slice(1)),a.apply(null,[d].concat(jb.call(b)))}},O=function(b,c){return fb(function(){var d,e,f;return e=arguments[0],d=2<=arguments.length?jb.call(arguments,1):[],f=W(c,[function(a,b){return e.apply(null,jb.call(a).concat([b]))}]),eb.apply(null,[a,b,e].concat(jb.call(d),[a.combineAsArray(d).flatMap(f)]))})},a.fromCallback=O("fromCallback",function(){var b,c;return c=arguments[0],b=2<=arguments.length?jb.call(arguments,1):[],a.fromBinder(function(a){return P(c,b)(a),V},function(a){return[a,C()]})}),a.fromNodeCallback=O("fromNodeCallback",function(){var b,c;return c=arguments[0],b=2<=arguments.length?jb.call(arguments,1):[],a.fromBinder(function(a){return P(c,b)(a),V},function(a,b){return a?[new i(a),C()]:[b,C()]})}),a.fromPoll=function(b,c){return eb(a,"fromPoll",b,c,a.fromBinder(function(c){var d;return d=a.scheduler.setInterval(c,b),function(){return a.scheduler.clearInterval(d)}},c))},a.interval=function(b,c){return null==c&&(c={}),eb(a,"interval",b,c,a.fromPoll(b,function(){return U(c)}))},a.constant=function(b){return new q(B(a,"constant",b),function(a){return a(I(b)),a(C()),V})},a.never=function(){return new k(B(a,"never"),function(a){return a(C()),V})},a.once=function(b){return new k(B(a,"once",b),function(a){return a(_(b)),a(C()),V})},a.fromArray=function(b){var c;return b.length?(c=0,new k(B(a,"fromArray",b),function(d){var e,f,g;return g=!1,f=a.more,e=function(){var h;return f===a.noMore||g||(h=b[c++],f=d(_(h)),f===a.noMore)?void 0:c===b.length?d(C()):u.afterTransaction(e)},e(),function(){return g=!0}})):eb(a,"fromArray",b,a.never())},a.mergeAll=function(){var b;return b=1<=arguments.length?jb.call(arguments,0):[],J(b[0])&&(b=b[0]),b.length?new k(B.apply(null,[a,"mergeAll"].concat(jb.call(b))),function(c){var d,e,f;return d=0,f=function(e){return function(f){return e.dispatcher.subscribe(function(e){var g;return e.isEnd()?(d++,d===b.length?c(C()):a.more):(g=c(e),g===a.noMore&&f(),g)})}},e=gb.map(f,b),x.apply(null,e)}):a.never()},a.zipAsArray=function(){var b;return b=1<=arguments.length?jb.call(arguments,0):[],J(b[0])&&(b=b[0]),eb.apply(null,[a,"zipAsArray"].concat(jb.call(b),[a.zipWith(b,function(){var a;return a=1<=arguments.length?jb.call(arguments,0):[]})]))},a.zipWith=function(){var b,c,d;return b=arguments[0],c=2<=arguments.length?jb.call(arguments,1):[],L(b)||(d=[b,c[0]],c=d[0],b=d[1]),c=gb.map(function(a){return a.toEventStream()},c),eb.apply(null,[a,"zipWith",b].concat(jb.call(c),[a.when(c,b)]))},a.groupSimultaneous=function(){var c,d,e;return e=1<=arguments.length?jb.call(arguments,0):[],1===e.length&&J(e[0])&&(e=e[0]),d=function(){var a,d,f;for(f=[],a=0,d=e.length;d>a;a++)c=e[a],f.push(new b(c));return f}(),eb.apply(null,[a,"groupSimultaneous"].concat(jb.call(e),[a.when(d,function(){var a;return a=1<=arguments.length?jb.call(arguments,0):[]})]))},a.combineAsArray=function(){var b,c,d,e,f,g,h;for(f=1<=arguments.length?jb.call(arguments,0):[],1===f.length&&J(f[0])&&(f=f[0]),b=g=0,h=f.length;h>g;b=++g)e=f[b],M(e)||(f[b]=a.constant(e));return f.length?(d=function(){var a,b,d;for(d=[],a=0,b=f.length;b>a;a++)c=f[a],d.push(new t(c,!0));return d}(),eb.apply(null,[a,"combineAsArray"].concat(jb.call(f),[a.when(d,function(){var a;return a=1<=arguments.length?jb.call(arguments,0):[]}).toProperty()]))):a.constant([])},a.onValues=function(){var b,c,d;return c=2<=arguments.length?jb.call(arguments,0,d=arguments.length-1):(d=0,[]),b=arguments[d++],a.combineAsArray(c).onValues(b)},a.combineWith=function(){var b,c;return b=arguments[0],c=2<=arguments.length?jb.call(arguments,1):[],eb.apply(null,[a,"combineWith",b].concat(jb.call(c),[a.combineAsArray(c).map(function(a){return b.apply(null,a)})]))},a.combineTemplate=function(b){var c,d,e,f,g,h,i,j,k,l;return i=[],l=[],h=function(a){return a[a.length-1]},k=function(a,b,c){return h(a)[b]=c},c=function(a,b){return function(c,d){return k(c,a,d[b])}},g=function(a,b){return function(c){return k(c,a,b)}},j=function(a){return J(a)?[]:{}},e=function(a,b){var d,e;return M(b)?(l.push(b),i.push(c(a,l.length-1))):b!==Object(b)||"function"==typeof b||b instanceof RegExp||b instanceof Date?i.push(g(a,b)):(e=function(a){return function(c){var d;return d=j(b),k(c,a,d),c.push(d)}},d=function(a){return a.pop()},i.push(e(a)),f(b),i.push(d))},f=function(a){return gb.each(a,e)},f(b),d=function(a){var c,d,e,f,g;for(e=j(b),c=[e],f=0,g=i.length;g>f;f++)(d=i[f])(c,a);return e},eb(a,"combineTemplate",b,a.combineAsArray(l).map(d))},a.retry=function(b){var c,d,e,f,g,h;if(!L(b.source))throw new l("'source' option has to be a function");return h=b.source,f=b.retries||0,e=b.maxRetries||f,c=b.delay||function(){return 0},d=b.isRetryable||function(){return!0},g=function(b){var g,i;return i={source:h,retries:f-1,maxRetries:e,delay:c,isRetryable:d},g=function(){return a.retry(i)},a.later(c(b)).filter(!1).concat(a.once().flatMap(g))},eb(a,"retry",b,h().flatMapError(function(b){return d(b)&&f>0?g({error:b,retriesDone:e-f}):a.once(new i(b))}))},D=0,j=function(){function a(){this.id=++D}return a.prototype.isEvent=function(){return!0},a.prototype.isEnd=function(){return!1},a.prototype.isInitial=function(){return!1},a.prototype.isNext=function(){return!1},a.prototype.isError=function(){return!1},a.prototype.hasValue=function(){return!1},a.prototype.filter=function(){return!0},a.prototype.inspect=function(){return this.toString()},a.prototype.log=function(){return this.toString()},a}(),n=function(a){function b(a,c){b.__super__.constructor.call(this),!c&&L(a)||a instanceof b?(this.valueF=a,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=a)}return kb(b,a),b.prototype.isNext=function(){return!0},b.prototype.hasValue=function(){return!0},b.prototype.value=function(){return this.valueF instanceof b?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},b.prototype.fmap=function(a){var b,c;return this.valueInternal?(c=this.valueInternal,this.apply(function(){return a(c)})):(b=this,this.apply(function(){return a(b.value())}))},b.prototype.apply=function(a){return new b(a)},b.prototype.filter=function(a){return a(this.value())},b.prototype.toString=function(){return gb.toString(this.value())},b.prototype.log=function(){return this.value()},b}(j),m=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return kb(b,a),b.prototype.isInitial=function(){return!0},b.prototype.isNext=function(){return!1},b.prototype.apply=function(a){return new b(a)},b.prototype.toNext=function(){return new n(this)},b}(n),h=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return kb(b,a),b.prototype.isEnd=function(){return!0},b.prototype.fmap=function(){return this},b.prototype.apply=function(){return this},b.prototype.toString=function(){return"<end>"},b}(j),i=function(a){function b(a){this.error=a}return kb(b,a),b.prototype.isError=function(){return!0},b.prototype.fmap=function(){return this},b.prototype.apply=function(){return this},b.prototype.toString=function(){return"<error> "+gb.toString(this.error)},b}(j),H=0,p=function(){function b(a){this.id=++H,eb(a,this),this.initialDesc=this.desc}return b.prototype.subscribe=function(a){return u.wrappedSubscribe(this,a)},b.prototype.subscribeInternal=function(a){return this.dispatcher.subscribe(a)},b.prototype.onValue=function(){var a;return a=Q(arguments),this.subscribe(function(b){return b.hasValue()?a(b.value()):void 0})},b.prototype.onValues=function(a){return this.onValue(function(b){return a.apply(null,b)})},b.prototype.onError=function(){var a;return a=Q(arguments),this.subscribe(function(b){return b.isError()?a(b.error):void 0})},b.prototype.onEnd=function(){var a;return a=Q(arguments),this.subscribe(function(b){return b.isEnd()?a():void 0})},b.prototype.errors=function(){return eb(this,"errors",this.filter(function(){return!1}))},b.prototype.filter=function(){var b,c;return c=arguments[0],b=2<=arguments.length?jb.call(arguments,1):[],A(this,c,b,function(b){return eb(this,"filter",b,this.withHandler(function(c){return c.filter(b)?this.push(c):a.more}))})},b.prototype.takeWhile=function(){var b,c;return c=arguments[0],b=2<=arguments.length?jb.call(arguments,1):[],A(this,c,b,function(b){return eb(this,"takeWhile",b,this.withHandler(function(c){return c.filter(b)?this.push(c):(this.push(C()),a.noMore)}))})},b.prototype.endOnError=function(){var a,b;return b=arguments[0],a=2<=arguments.length?jb.call(arguments,1):[],null==b&&(b=!0),A(this,b,a,function(a){return eb(this,"endOnError",this.withHandler(function(b){return b.isError()&&a(b.error)?(this.push(b),this.push(C())):this.push(b)}))})},b.prototype.take=function(b){return 0>=b?a.never():eb(this,"take",b,this.withHandler(function(c){return c.hasValue()?(b--,b>0?this.push(c):(0===b&&this.push(c),this.push(C()),a.noMore)):this.push(c)}))},b.prototype.map=function(){var a,b;return b=arguments[0],a=2<=arguments.length?jb.call(arguments,1):[],b instanceof q?b.sampledBy(this,G):A(this,b,a,function(a){return eb(this,"map",a,this.withHandler(function(b){return this.push(b.fmap(a))}))})},b.prototype.mapError=function(){var a;return a=Q(arguments),eb(this,"mapError",a,this.withHandler(function(b){return this.push(b.isError()?U(a(b.error)):b)}))},b.prototype.mapEnd=function(){var b;return b=Q(arguments),eb(this,"mapEnd",b,this.withHandler(function(c){return c.isEnd()?(this.push(U(b(c))),this.push(C()),a.noMore):this.push(c)}))},b.prototype.doAction=function(){var a;return a=Q(arguments),eb(this,"doAction",a,this.withHandler(function(b){return b.hasValue()&&a(b.value()),this.push(b)}))},b.prototype.skip=function(b){return eb(this,"skip",b,this.withHandler(function(c){return c.hasValue()&&b>0?(b--,a.more):this.push(c)}))},b.prototype.skipDuplicates=function(a){return null==a&&(a=function(a,b){return a===b}),eb(this,"skipDuplicates",this.withStateMachine(o,function(b,c){return c.hasValue()?c.isInitial()||b===o||!a(b.get(),c.value())?[new s(c.value()),[c]]:[b,[]]:[b,[c]]}))},b.prototype.skipErrors=function(){return eb(this,"skipErrors",this.withHandler(function(b){return b.isError()?a.more:this.push(b)}))},b.prototype.withStateMachine=function(b,c){var d;return d=b,eb(this,"withStateMachine",b,c,this.withHandler(function(b){var e,f,g,h,i,j,k;for(e=c(d,b),f=e[0],h=e[1],d=f,i=a.more,j=0,k=h.length;k>j;j++)if(g=h[j],i=this.push(g),i===a.noMore)return i;return i}))},b.prototype.scan=function(b,c){var d,e,f;return c=$(c),d=cb(b),f=function(b){return function(f){var g,h,i,j;return g=!1,j=V,h=a.more,i=function(){return g?void 0:d.forEach(function(b){return g=!0,h=f(new m(function(){return b})),h===a.noMore?(j(),j=V):void 0})},j=b.dispatcher.subscribe(function(b){var e,j;return b.hasValue()?g&&b.isInitial()?a.more:(b.isInitial()||i(),g=!0,j=d.getOrElse(void 0),e=c(j,b.value()),d=new s(e),f(b.apply(function(){return e}))):(b.isEnd()&&(h=i()),h!==a.noMore?f(b):void 0)}),u.whenDoneWith(e,i),j}}(this),e=new q(B(this,"scan",b,c),f)},b.prototype.fold=function(a,b){return eb(this,"fold",a,b,this.scan(a,b).sampledBy(this.filter(!1).mapEnd().toProperty()))},b.prototype.zip=function(b,c){return null==c&&(c=Array),eb(this,"zip",b,a.zipWith([this,b],c))},b.prototype.diff=function(a,b){return b=$(b),eb(this,"diff",a,b,this.scan([a],function(a,c){return[c,b(a[0],c)]}).filter(function(a){return 2===a.length}).map(function(a){return a[1]}))},b.prototype.flatMap=function(){return F(this,T(arguments))},b.prototype.flatMapFirst=function(){return F(this,T(arguments),!0)},b.prototype.flatMapWithConcurrencyLimit=function(){var a,b;return b=arguments[0],a=2<=arguments.length?jb.call(arguments,1):[],eb.apply(null,[this,"flatMapWithConcurrencyLimit",b].concat(jb.call(a),[F(this,T(a),!1,b)]))},b.prototype.flatMapLatest=function(){var a,b;return a=T(arguments),b=this.toEventStream(),eb(this,"flatMapLatest",a,b.flatMap(function(c){return S(a(c)).takeUntil(b)}))},b.prototype.flatMapError=function(b){return eb(this,"flatMapError",b,this.mapError(function(a){return new i(a)}).flatMap(function(c){return c instanceof i?b(c.error):a.once(c)}))},b.prototype.flatMapConcat=function(){return eb.apply(null,[this,"flatMapConcat"].concat(jb.call(arguments),[this.flatMapWithConcurrencyLimit.apply(this,[1].concat(jb.call(arguments)))]))},b.prototype.bufferingThrottle=function(b){return eb(this,"bufferingThrottle",b,this.flatMapConcat(function(c){return a.once(c).concat(a.later(b).filter(!1))}))},b.prototype.not=function(){return eb(this,"not",this.map(function(a){return!a}))},b.prototype.log=function(){var a;return a=1<=arguments.length?jb.call(arguments,0):[],this.subscribe(function(b){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log.apply(console,jb.call(a).concat([b.log()])):void 0}),this},b.prototype.slidingWindow=function(a,b){return null==b&&(b=0),eb(this,"slidingWindow",a,b,this.scan([],function(b,c){return b.concat([c]).slice(-a)}).filter(function(a){return a.length>=b}))},b.prototype.combine=function(b,c){var d;return d=$(c),eb(this,"combine",b,c,a.combineAsArray(this,b).map(function(a){return d(a[0],a[1])}))},b.prototype.decode=function(b){return eb(this,"decode",b,this.combine(a.combineTemplate(b),function(a,b){return b[a]}))},b.prototype.awaiting=function(b){return eb(this,"awaiting",b,a.groupSimultaneous(this,b).map(function(a){var b,c;return b=a[0],c=a[1],0===c.length}).toProperty(!1).skipDuplicates())},b.prototype.name=function(a){return this._name=a,this},b.prototype.withDescription=function(){return B.apply(null,arguments).apply(this)},b.prototype.toString=function(){return this._name?this._name:this.desc.toString()},b.prototype.internalDeps=function(){return this.initialDesc.deps()},b}(),p.prototype.reduce=p.prototype.fold,p.prototype.assign=p.prototype.onValue,p.prototype.inspect=p.prototype.toString,F=function(b,c,e,f){var g,h,i;return i=[b],g=[],h=new k(B(b,"flatMap"+(e?"First":""),c),function(h){var i,j,k,l,n;return k=new d,l=[],n=function(b){var d;return d=S(c(b.value())),g.push(d),k.add(function(b,c){return d.dispatcher.subscribe(function(e){var f;return e.isEnd()?(gb.remove(d,g),j(),i(c),a.noMore):(e instanceof m&&(e=e.toNext()),f=h(e),f===a.noMore&&b(),f)})})},j=function(){var a;return a=l.shift(),a?n(a):void 0},i=function(a){return a(),k.empty()?h(C()):void 0},k.add(function(c,d){return b.dispatcher.subscribe(function(b){return b.isEnd()?i(d):b.isError()?h(b):e&&k.count()>1?a.more:k.unsubscribed?a.noMore:f&&k.count()>f?l.push(b):n(b)})}),k.unsubscribe}),h.internalDeps=function(){return g.length?i.concat(g):i},h},k=function(b){function c(a,b,d){L(a)&&(d=b,b=a,a=[]),c.__super__.constructor.call(this,a),this.dispatcher=new g(b,d),Y(this)}return kb(c,b),c.prototype.delay=function(b){return eb(this,"delay",b,this.flatMap(function(c){return a.later(b,c)}))},c.prototype.debounce=function(b){return eb(this,"debounce",b,this.flatMapLatest(function(c){return a.later(b,c)}))},c.prototype.debounceImmediate=function(b){return eb(this,"debounceImmediate",b,this.flatMapFirst(function(c){return a.once(c).concat(a.later(b).filter(!1))}))},c.prototype.throttle=function(a){return eb(this,"throttle",a,this.bufferWithTime(a).map(function(a){return a[a.length-1]}))},c.prototype.bufferWithTime=function(a){return eb(this,"bufferWithTime",a,this.bufferWithTimeOrCount(a,Number.MAX_VALUE))},c.prototype.bufferWithCount=function(a){return eb(this,"bufferWithCount",a,this.bufferWithTimeOrCount(void 0,a))},c.prototype.bufferWithTimeOrCount=function(a,b){var c;return c=function(c){return c.values.length===b?c.flush():void 0!==a?c.schedule():void 0},eb(this,"bufferWithTimeOrCount",a,b,this.buffer(a,c,c))},c.prototype.buffer=function(b,c,d){var e,f,g;return null==c&&(c=V),null==d&&(d=V),e={scheduled:!1,end:void 0,values:[],flush:function(){var b;if(this.scheduled=!1,this.values.length>0){if(b=this.push(U(this.values)),this.values=[],null!=this.end)return this.push(this.end);if(b!==a.noMore)return d(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){return this.scheduled?void 0:(this.scheduled=!0,b(function(a){return function(){return a.flush()}}(this)))}},g=a.more,L(b)||(f=b,b=function(b){return a.scheduler.setTimeout(b,f)}),eb(this,"buffer",this.withHandler(function(a){return e.push=function(a){return function(b){return a.push(b)}}(this),a.isError()?g=this.push(a):a.isEnd()?(e.end=a,e.scheduled||e.flush()):(e.values.push(a.value()),c(e)),g}))},c.prototype.merge=function(b){var c;return c=this,eb(c,"merge",b,a.mergeAll(this,b))},c.prototype.toProperty=function(b){var c,d;return d=0===arguments.length?o:cb(function(){return b}),c=this.dispatcher,new q(B(this,"toProperty",b),function(b){var e,f,g,h;return e=!1,h=V,f=a.more,g=function(){return e?void 0:d.forEach(function(c){return e=!0,f=b(new m(c)),f===a.noMore?(h(),h=V):void 0})},h=c.subscribe(function(c){return c.hasValue()?e&&c.isInitial()?a.more:(c.isInitial()||g(),e=!0,d=new s(c),b(c)):(c.isEnd()&&(f=g()),f!==a.noMore?b(c):void 0)}),g(),h})},c.prototype.toEventStream=function(){return this},c.prototype.sampledBy=function(a,b){return eb(this,"sampledBy",a,b,this.toProperty().sampledBy(a,b))},c.prototype.concat=function(a){var b;return b=this,new c(B(b,"concat",a),function(c){var d,e;return e=V,d=b.dispatcher.subscribe(function(b){return b.isEnd()?e=a.dispatcher.subscribe(c):c(b)}),function(){return d(),e()}})},c.prototype.takeUntil=function(b){var c;return c={},eb(this,"takeUntil",b,a.groupSimultaneous(this.mapEnd(c),b.skipErrors()).withHandler(function(d){var e,f,g,h,i,j;if(d.hasValue()){if(j=d.value(),e=j[0],b=j[1],b.length)return this.push(C());for(f=a.more,h=0,i=e.length;i>h;h++)g=e[h],f=this.push(g===c?C():U(g));return f}return this.push(d)}))},c.prototype.skipUntil=function(a){var b;return b=a.take(1).map(!0).toProperty(!1),eb(this,"skipUntil",a,this.filter(b))},c.prototype.skipWhile=function(){var b,c,d;return c=arguments[0],b=2<=arguments.length?jb.call(arguments,1):[],d=!1,A(this,c,b,function(b){return eb(this,"skipWhile",b,this.withHandler(function(c){return!d&&c.hasValue()&&b(c.value())?a.more:(c.hasValue()&&(d=!0),this.push(c))}))})},c.prototype.holdWhen=function(b){var c,d,e;return e=b.startWith(!1),d=e.filter(function(a){return!a}),c=e.filter(gb.id),eb(this,"holdWhen",b,this.filter(!1).merge(e.flatMapConcat(function(b){return function(e){return e?b.scan([],function(a,b){return a.concat(b)}).sampledBy(d).take(1).flatMap(a.fromArray):b.takeUntil(c)}}(this))))},c.prototype.startWith=function(b){return eb(this,"startWith",b,a.once(b).concat(this))},c.prototype.withHandler=function(a){return new c(B(this,"withHandler",a),this.dispatcher.subscribe,a)},c}(p),q=function(b){function c(a,b,d){L(a)&&(d=b,b=a,a=[]),c.__super__.constructor.call(this,a),this.dispatcher=new r(this,b,d),Y(this)}return kb(c,b),c.prototype.sampledBy=function(b,d){var e,f,g,h,i;return null!=d?d=$(d):(e=!0,d=function(a){return a.value()}),i=new t(this,!1,e),g=new t(b,!0,e),h=a.when([i,g],d),f=b instanceof c?h.toProperty():h,eb(this,"sampledBy",b,d,f)},c.prototype.sample=function(b){return eb(this,"sample",b,this.sampledBy(a.interval(b,{})))},c.prototype.changes=function(){return new k(B(this,"changes"),function(a){return function(b){return a.dispatcher.subscribe(function(a){return a.isInitial()?void 0:b(a)})}}(this))},c.prototype.withHandler=function(a){return new c(B(this,"withHandler",a),this.dispatcher.subscribe,a)},c.prototype.toProperty=function(){return this},c.prototype.toEventStream=function(){return new k(B(this,"toEventStream"),function(a){return function(b){return a.dispatcher.subscribe(function(a){return a.isInitial()&&(a=a.toNext()),b(a)})}}(this))},c.prototype.and=function(a){return eb(this,"and",a,this.combine(a,function(a,b){return a&&b}))},c.prototype.or=function(a){return eb(this,"or",a,this.combine(a,function(a,b){return a||b}))},c.prototype.delay=function(a){return this.delayChanges("delay",a,function(b){return b.delay(a)})},c.prototype.debounce=function(a){return this.delayChanges("debounce",a,function(b){return b.debounce(a)})},c.prototype.throttle=function(a){return this.delayChanges("throttle",a,function(b){return b.throttle(a)})},c.prototype.delayChanges=function(){var a,b,c;return a=2<=arguments.length?jb.call(arguments,0,c=arguments.length-1):(c=0,[]),b=arguments[c++],eb.apply(null,[this].concat(jb.call(a),[v(this,b(this.changes()))]))},c.prototype.takeUntil=function(a){var b;return b=this.changes().takeUntil(a),eb(this,"takeUntil",a,v(this,b))},c.prototype.startWith=function(a){return eb(this,"startWith",a,this.scan(a,function(a,b){return b}))},c.prototype.bufferingThrottle=function(){var a;return(a=c.__super__.bufferingThrottle.apply(this,arguments)).bufferingThrottle.apply(a,arguments).toProperty()},c}(p),A=function(a,b,c,d){var e;return b instanceof q?(e=b.sampledBy(a,function(a,b){return[a,b]}),d.call(e,function(a){var b,c;return b=a[0],c=a[1],b}).map(function(a){var b,c;return b=a[0],c=a[1]})):(b=P(b,c),d.call(a,b))},v=function(b,c){var d;return d=new k(B(b,"justInitValue"),function(c){var e,f;return f=void 0,e=b.dispatcher.subscribe(function(b){return b.isEnd()||(f=b),a.noMore}),u.whenDoneWith(d,function(){return null!=f&&c(f),c(C())}),e}),d.concat(c).toProperty()},g=function(){function b(a,b){this._subscribe=a,this._handleEvent=b,this.subscribe=lb(this.subscribe,this),this.handleEvent=lb(this.handleEvent,this),this.subscriptions=[],this.queue=[],this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0}return b.prototype.hasSubscribers=function(){return this.subscriptions.length>0},b.prototype.removeSub=function(a){return this.subscriptions=gb.without(a,this.subscriptions)},b.prototype.push=function(a){return a.isEnd()&&(this.ended=!0),u.inTransaction(a,this,this.pushIt,[a])},b.prototype.pushToSubscriptions=function(b){var c,d,e,f,g,h;try{for(f=this.subscriptions,g=0,h=f.length;h>g;g++)e=f[g],d=e.sink(b),(d===a.noMore||b.isEnd())&&this.removeSub(e);return!0}catch(i){throw c=i,this.pushing=!1,this.queue=[],c}},b.prototype.pushIt=function(b){if(this.pushing)return this.queue.push(b),a.more;if(b!==this.prevError){for(b.isError()&&(this.prevError=b),this.pushing=!0,this.pushToSubscriptions(b),this.pushing=!1;this.queue.length;)b=this.queue.shift(),this.push(b);return this.hasSubscribers()?a.more:(this.unsubscribeFromSource(),a.noMore)}},b.prototype.handleEvent=function(a){return this._handleEvent?this._handleEvent(a):this.push(a)},b.prototype.unsubscribeFromSource=function(){return this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},b.prototype.subscribe=function(a){var b;return this.ended?(a(C()),V):(b={sink:a},this.subscriptions.push(b),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent)),function(a){return function(){return a.removeSub(b),a.hasSubscribers()?void 0:a.unsubscribeFromSource()}}(this))},b}(),r=function(b){function c(a,b,d){this.property=a,this.subscribe=lb(this.subscribe,this),c.__super__.constructor.call(this,b,d),this.current=o,this.currentValueRootId=void 0,this.propertyEnded=!1}return kb(c,b),c.prototype.push=function(a){return a.isEnd()&&(this.propertyEnded=!0),a.hasValue()&&(this.current=new s(a),this.currentValueRootId=u.currentEventId()),c.__super__.push.call(this,a)},c.prototype.maybeSubSource=function(b,c){return c===a.noMore?V:this.propertyEnded?(b(C()),V):g.prototype.subscribe.call(this,b)},c.prototype.subscribe=function(b){var c,d,e,f;return d=!1,e=a.more,this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)?(c=u.currentEventId(),f=this.currentValueRootId,!this.propertyEnded&&f&&c&&c!==f?(u.whenDoneWith(this.property,function(a){return function(){return a.currentValueRootId===f?b(I(a.current.get().value())):void 0}}(this)),this.maybeSubSource(b,e)):(u.inTransaction(void 0,this,function(){return e=b(I(this.current.get().value()))},[]),this.maybeSubSource(b,e))):this.maybeSubSource(b,e)},c}(g),c=function(b){function c(){this.guardedSink=lb(this.guardedSink,this),this.subscribeAll=lb(this.subscribeAll,this),this.unsubAll=lb(this.unsubAll,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,c.__super__.constructor.call(this,B(a,"Bus"),this.subscribeAll)}return kb(c,b),c.prototype.unsubAll=function(){var a,b,c,d;for(d=this.subscriptions,b=0,c=d.length;c>b;b++)a=d[b],"function"==typeof a.unsub&&a.unsub();return void 0},c.prototype.subscribeAll=function(a){var b,c,d,e;for(this.sink=a,e=w(this.subscriptions),c=0,d=e.length;d>c;c++)b=e[c],this.subscribeInput(b);return this.unsubAll},c.prototype.guardedSink=function(b){return function(c){return function(d){return d.isEnd()?(c.unsubscribeInput(b),a.noMore):c.sink(d)}}(this)},c.prototype.subscribeInput=function(a){return a.unsub=a.input.dispatcher.subscribe(this.guardedSink(a.input))},c.prototype.unsubscribeInput=function(a){var b,c,d,e,f;for(f=this.subscriptions,b=d=0,e=f.length;e>d;b=++d)if(c=f[b],c.input===a)return"function"==typeof c.unsub&&c.unsub(),void this.subscriptions.splice(b,1)},c.prototype.plug=function(a){var b;if(!this.ended)return b={input:a},this.subscriptions.push(b),null!=this.sink&&this.subscribeInput(b),function(b){return function(){return b.unsubscribeInput(a)}}(this)},c.prototype.end=function(){return this.ended=!0,this.unsubAll(),"function"==typeof this.sink?this.sink(C()):void 0},c.prototype.push=function(a){return"function"==typeof this.sink?this.sink(U(a)):void 0},c.prototype.error=function(a){return"function"==typeof this.sink?this.sink(new i(a)):void 0},c}(k),t=function(){function a(a,b,c){this.obs=a,this.sync=b,this.lazy=null!=c?c:!1,this.queue=[]}return a.prototype.subscribe=function(a){return this.obs.dispatcher.subscribe(a)},a.prototype.toString=function(){return this.obs.toString()},a.prototype.markEnded=function(){return this.ended=!0},a.prototype.consume=function(){return this.lazy?{value:gb.always(this.queue[0])}:this.queue[0]},a.prototype.push=function(a){return this.queue=[a]},a.prototype.mayHave=function(){return!0},a.prototype.hasAtLeast=function(){return this.queue.length},a.prototype.flatten=!0,a}(),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return kb(b,a),b.prototype.consume=function(){return this.queue.shift()},b.prototype.push=function(a){return this.queue.push(a)},b.prototype.mayHave=function(a){return!this.ended||this.queue.length>=a},b.prototype.hasAtLeast=function(a){return this.queue.length>=a},b.prototype.flatten=!1,b}(t),b=function(a){function b(a){b.__super__.constructor.call(this,a,!0)}return kb(b,a),b.prototype.consume=function(){var a;return a=this.queue,this.queue=[],{value:function(){return a}}},b.prototype.push=function(a){return this.queue.push(a.value())},b.prototype.hasAtLeast=function(){return!0},b}(t),t.isTrigger=function(a){return a instanceof t?a.sync:a instanceof k},t.fromObservable=function(a){return a instanceof t?a:a instanceof q?new t(a,!1):new e(a,!0)},B=function(){var a,b,c;return b=arguments[0],c=arguments[1],a=3<=arguments.length?jb.call(arguments,2):[],(b||c)instanceof f?b||c:new f(b,c,a)},E=function(a){return J(a)?gb.flatMap(E,a):M(a)?[a]:a instanceof t?[a.obs]:[]},f=function(){function a(a,b,c){this.context=a,this.method=b,this.args=c,this.cached=void 0
}return a.prototype.deps=function(){return this.cached||(this.cached=E([this.context].concat(this.args)))},a.prototype.apply=function(a){return a.desc=this,a},a.prototype.toString=function(){return gb.toString(this.context)+"."+gb.toString(this.method)+"("+gb.map(gb.toString,this.args)+")"},a}(),eb=function(){var a,b,c;return a=2<=arguments.length?jb.call(arguments,0,c=arguments.length-1):(c=0,[]),b=arguments[c++],B.apply(null,a).apply(b)},a.when=function(){var b,c,d,e,f,g,h,i,j,l,m,n,o,p,q,r,s,v,w,A;if(0===arguments.length)return a.never();for(f=arguments.length,q="when: expecting arguments in the form (Observable+,function)+",o=[],j=[],c=0,l=[];f>c;){for(l[c]=arguments[c],l[c+1]=arguments[c+1],i=gb.toArray(arguments[c]),b=y(arguments[c+1]),h={f:b,ixs:[]},p=!1,r=0,v=i.length;v>r;r++){for(n=i[r],d=gb.indexOf(o,n),p||(p=t.isTrigger(n)),0>d&&(o.push(n),d=o.length-1),A=h.ixs,s=0,w=A.length;w>s;s++)e=A[s],e.index===d&&e.count++;h.ixs.push({index:d,count:1})}i.length>0&&j.push(h),c+=2}return o.length?(o=gb.map(t.fromObservable,o),g=gb.any(o,function(a){return a.flatten})&&z(gb.map(function(a){return a.obs},o)),m=new k(B.apply(null,[a,"when"].concat(jb.call(l))),function(b){var d,e,f,h,i,k,l;return l=[],f=!1,h=function(a){var b,d,e;for(e=a.ixs,b=0,d=e.length;d>b;b++)if(c=e[b],!o[c.index].hasAtLeast(c.count))return!1;return!0},e=function(a){return!a.sync||a.ended},d=function(a){var b,d,e;for(e=a.ixs,b=0,d=e.length;d>b;b++)if(c=e[b],!o[c.index].mayHave(c.count))return!0},i=function(a){return!a.source.flatten},k=function(k){return function(n){var p,q,r;return q=function(){return u.whenDoneWith(m,p)},r=function(){var d,e,f,g,k,m;if(!(l.length>0))return a.more;for(f=a.more,g=l.pop(),k=0,m=j.length;m>k;k++)if(e=j[k],h(e))return d=function(){var a,b,d,f;for(d=e.ixs,f=[],a=0,b=d.length;b>a;a++)c=d[a],f.push(o[c.index].consume());return f}(),f=b(g.e.apply(function(){var a,b;return b=function(){var b,c,e;for(e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.value());return e}(),e.f.apply(e,b)})),l.length&&(l=gb.filter(i,l)),f===a.noMore?f:r()},p=function(){var c;return c=r(),f&&(f=!1,(gb.all(o,e)||gb.all(j,d))&&(c=a.noMore,b(C()))),c===a.noMore&&n(),c},k.subscribe(function(c){var d;return c.isEnd()?(f=!0,k.markEnded(),q()):c.isError()?d=b(c):(k.push(c),k.sync&&(l.push({source:k,e:c}),g||u.hasWaiters()?q():p())),d===a.noMore&&n(),d||a.more})}},x.apply(null,function(){var a,b,c;for(c=[],a=0,b=o.length;b>a;a++)n=o[a],c.push(k(n));return c}())})):a.never()},z=function(a,b){var c;return null==b&&(b=[]),c=function(a){var d;return gb.contains(b,a)?!0:(d=a.internalDeps(),d.length?(b.push(a),gb.any(d,c)):(b.push(a),!1))},gb.any(a,c)},a.update=function(){var b,c,d,e;for(c=arguments[0],e=2<=arguments.length?jb.call(arguments,1):[],d=function(a){return function(){var b;return b=1<=arguments.length?jb.call(arguments,0):[],function(c){return a.apply(null,[c].concat(b))}}},b=e.length-1;b>0;)e[b]instanceof Function||(e[b]=function(a){return function(){return a}}(e[b])),e[b]=d(e[b]),b-=2;return eb.apply(null,[a,"update",c].concat(jb.call(e),[a.when.apply(a,e).scan(c,function(a,b){return b(a)})]))},x=function(){var a;return a=1<=arguments.length?jb.call(arguments,0):[],new d(a).unsubscribe},d=function(){function a(a){var b,c,d;for(null==a&&(a=[]),this.unsubscribe=lb(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[],c=0,d=a.length;d>c;c++)b=a[c],this.add(b)}return a.prototype.add=function(a){var b,c,d;if(!this.unsubscribed)return b=!1,c=V,this.starting.push(a),d=function(d){return function(){return d.unsubscribed?void 0:(b=!0,d.remove(c),gb.remove(a,d.starting))}}(this),c=a(this.unsubscribe,d),this.unsubscribed||b||this.subscriptions.push(c),gb.remove(a,this.starting),c},a.prototype.remove=function(a){return this.unsubscribed?void 0:void 0!==gb.remove(a,this.subscriptions)?a():void 0},a.prototype.unsubscribe=function(){var a,b,c,d;if(!this.unsubscribed){for(this.unsubscribed=!0,d=this.subscriptions,b=0,c=d.length;c>b;b++)(a=d[b])();return this.subscriptions=[],this.starting=[]}},a.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},a.prototype.empty=function(){return 0===this.count()},a}(),a.CompositeUnsubscribe=d,s=function(){function a(a){this.value=a}return a.prototype.getOrElse=function(){return this.value},a.prototype.get=function(){return this.value},a.prototype.filter=function(b){return b(this.value)?new a(this.value):o},a.prototype.map=function(b){return new a(b(this.value))},a.prototype.forEach=function(a){return a(this.value)},a.prototype.isDefined=!0,a.prototype.toArray=function(){return[this.value]},a.prototype.inspect=function(){return"Some("+this.value+")"},a.prototype.toString=function(){return this.inspect()},a}(),o={getOrElse:function(a){return a},filter:function(){return o},map:function(){return o},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},u=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;return k=void 0,l=[],m={},c=[],d=0,b=function(a){return k?c.push(a):a()},n=function(a,b){var c;return k?(c=m[a.id],null==c?(c=m[a.id]=[b],l.push(a)):c.push(b)):b()},f=function(){for(;l.length>0;)h(0);return void 0},h=function(a){var b,c,d,e,f,h;for(c=l[a],d=c.id,e=m[d],l.splice(a,1),delete m[d],g(c),f=0,h=e.length;h>f;f++)(b=e[f])();return void 0},g=function(a){var b,c,d,e,f;for(c=a.internalDeps(),e=0,f=c.length;f>e;e++)b=c[e],g(b),m[b.id]&&(d=gb.indexOf(l,b),h(d));return void 0},j=function(a,b,e,g){var h,i;if(k)return e.apply(b,g);k=a;try{i=e.apply(b,g),f()}finally{for(k=void 0;d<c.length;)h=c[d],d++,h();d=0,c=[]}return i},e=function(){return k?k.id:void 0},o=function(c,d){var e,f,g,h;return h=!1,f=!1,e=function(){return f=!0},g=function(){return h=!0,e()},e=c.dispatcher.subscribe(function(c){return b(function(){var b;return h||(b=d(c),b!==a.noMore)?void 0:g()})}),f&&e(),g},i=function(){return l.length>0},{whenDoneWith:n,hasWaiters:i,inTransaction:j,currentEventId:e,wrappedSubscribe:o,afterTransaction:b}}(),a.EventStream=k,a.Property=q,a.Observable=p,a.Bus=c,a.Initial=m,a.Next=n,a.End=h,a.Error=i,V=function(){},N=function(a,b){return b},G=function(a){return a},I=function(a){return new m(a,!0)},U=function(a){return new n(a,!0)},C=function(){return new h},_=function(a){return a instanceof j?a:U(a)},w=function(a){return a.slice(0)},L=function(a){return"function"==typeof a},J=function(a){return a instanceof Array},M=function(a){return a instanceof p},W=function(a,b){return function(){var c;return c=1<=arguments.length?jb.call(arguments,0):[],a.apply(null,b.concat(c))}},T=function(a){return 1===a.length&&M(a[0])?gb.always(a[0]):Q(a)},Q=function(a){return a=Array.prototype.slice.call(a),R.apply(null,a)},R=fb(function(){var a,b;return b=arguments[0],a=2<=arguments.length?jb.call(arguments,1):[],L(b)?a.length?W(b,a):b:K(b)?ab(b,a):gb.always(b)}),P=function(a,b){return R.apply(null,[a].concat(jb.call(b)))},y=function(a){return L(a)?a:gb.always(a)},S=function(b){return M(b)?b:a.once(b)},K=function(a){return"string"==typeof a&&a.length>1&&"."===a.charAt(0)},a.isFieldKey=K,ab=function(a,b){var c,d;return d=a.slice(1).split("."),c=gb.map(db(b),d),function(b){var d,e;for(d=0,e=c.length;e>d;d++)a=c[d],b=a(b);return b}},db=function(a){return function(b){return function(c){var d;return null==c?void 0:(d=c[b],L(d)?d.apply(c,a):d)}}},bb=function(a){return a.slice(1)},$=function(a){var b;return L(a)?a:K(a)?(b=bb(a),function(a,c){return a[b](c)}):void 0},cb=function(a){return a instanceof s||a===o?a:new s(a)},"undefined"!=typeof define&&null!==define&&null!=define.amd?(define([],function(){return a}),this.Bacon=a):"undefined"!=typeof module&&null!==module&&null!=module.exports?(module.exports=a,a.Bacon=a):this.Bacon=a}).call(this);
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:bacon', location = '/static/lib/Bacon-AMD.js' */
define("bacon",["jquery"],function(b){var a=window.Bacon||window.module.exports;b.fn.asEventStream=a.$.asEventStream;return a});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:performance-util', location = '/static/bitbucket/internal/util/performance.js' */
define("bitbucket/internal/util/performance",["module","exports","jquery"],function(p,e,q){function n(f,a){function c(){d=null;l=!0;b.fire();b=new g.default.Callbacks;l=!1;a()}var b=new g.default.Callbacks,l=!1,d=null;return{name:f,forceExecute:function(){d&&(clearTimeout(d),c())},queue:function(a){l?a():(b.add(a),d||(d=setTimeout(c,0)))}}}Object.defineProperty(e,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(q),m=n("READ",function(){h.forceExecute()}),h=n("WRITE",function(){m.forceExecute()});
e.default={queueDOMRead:m.queue.bind(m),queueDOMWrite:h.queue.bind(h),enqueueCapped:function(f,a,c){c=c||1;var b=0;return function(){b>=c||(b++,f(function(){try{return a.apply(this,arguments)}finally{b--}}))}},frameBatchedMap:function(f,a,c){a=g.default.extend({initial:500,min:10,max:Infinity},a);c=c||function(b){b()};return function(b){function l(){for(var a=Math.min(k+d,b.length);k<a;k++)h[k]=f(b[k])}var d=a.initial,e=g.default.Deferred(),k=0,h=[];requestAnimationFrame(function r(){if("pending"===
e.state()){var f=(new Date).getTime();c(l);var g=(new Date).getTime();d=Math.min(a.max,Math.max(a.min,Math.ceil(15/(g-f)*d)));k===b.length?e.resolve(h):requestAnimationFrame(r)}});return e}}};p.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:bacon-util', location = '/static/bitbucket/internal/util/bacon.js' */
define("bitbucket/internal/util/bacon","module exports bacon jquery lodash bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/performance".split(" "),function(r,m,n,p,t,u,v,w){Object.defineProperty(m,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(n),f=babelHelpers.interopRequireDefault(p),g=babelHelpers.interopRequireDefault(t),q=babelHelpers.interopRequireDefault(u),x=babelHelpers.interopRequireDefault(v),y=babelHelpers.interopRequireDefault(w);
n=g.default.once(function(){function a(){return{left:b.scrollLeft(),top:b.scrollTop()}}var b=(0,f.default)(window),c=e.default.fromBinder(function(a){var d=y.default.enqueueCapped(requestAnimationFrame,a),c=g.default.debounce(d,20);b.on("scroll",d).on("scroll",c);return function(){b.off("scroll",d).off("scroll",c)}}).map(a).skipDuplicates(function(a,b){return a.left===b.left&&a.top===b.top}).toProperty(a());c.onValue(f.default.noop);return c});p=g.default.once(function(){var a=(0,f.default)(window);
a=e.default.fromBinder(function(a){var b=q.default.chain().on("window.resize",function(b,c){a(new e.default.Next({width:b,height:c}))});return function(){b.destroy()}}).toProperty({width:a.width(),height:a.height()});a.onValue(f.default.noop);return a});m.default={events:function(a){return e.default.fromBinder(function(b){return q.default.chain().on(a,b).destroy})},split:function(a,b){return e.default.fromBinder(function(c){var h=[],d,k=[];k.push(a.onValue(function(a){var e=b(a);d&&e!==d&&(c(h),h=
[]);d=e;h.push(a)}));k.push(a.onEnd(function(){0<h.length&&c(h);c(new e.default.End)}));return g.default.partial(x.default.applyAll,k)})},toArray:function(a){var b=[];a.onValue(function(a){b.push(a)});return b},getWindowScrollProperty:n,getWindowSizeProperty:p,takeBetween:function(a,b){var c=b.start,h=b.end,d=b.startInclusive,k=b.endInclusive,l=b.equals||function(a,b){return a===b};if(l(c,h))return d||k?a.skipWhile(function(a){return!l(a,c)}).take(1):e.default.never();var f,g;return a.skipWhile(function(a){return g||
f?!1:l(a,c)?(f=!0,!d):l(a,h)?(g=!0,!k):!0}).takeWhile(function(a){return l(a,c)?(f=!0,d):l(a,h)?(g=!0,k):!(g&&f)})}};r.exports=m["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comment-tips', location = '/static/bitbucket/internal/feature/comments/comment-tips.js' */
define("bitbucket/internal/feature/comments/comment-tips",["module","exports","aui","bitbucket/internal/util/navigator"],function(d,b,a,c){Object.defineProperty(b,"__esModule",{value:!0});a=babelHelpers.interopRequireDefault(a);c=babelHelpers.interopRequireDefault(c);b.default={tips:[c.default.isMac()?"\u2318 + Enter to post your comment":"Ctrl + Enter to post your comment","Type \u0027@\u0027 to mention other users",a.default.format("You can use {0}Markdown{1} in comments",
"\x3ca href\x3d'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Markdown+syntax+guide?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash' target\x3d\"_blank\"\x3e","\x3c/a\x3e")]};d.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:submit-spinner', location = '/static/bitbucket/internal/widget/submit-spinner/submit-spinner.js' */
define("bitbucket/internal/widget/submit-spinner/submit-spinner",["module","exports","jquery"],function(c,b,e){function a(b,c){if(!(this instanceof a))return new (Function.prototype.bind.apply(a,[null].concat(Array.prototype.slice.call(arguments))));this.$button=(0,d.default)(b);this.$spinner=(0,d.default)('\x3cdiv class\x3d"submit-spinner invisible" /\x3e');"before"===c?this.$spinner.insertBefore(this.$button):this.$spinner.insertAfter(this.$button)}Object.defineProperty(b,"__esModule",{value:!0});
var d=babelHelpers.interopRequireDefault(e);a.prototype.show=function(){this.$spinner.removeClass("invisible");this.$spinner.spin();return this};a.prototype.hide=function(){this.$spinner.addClass("invisible");this.$spinner.spinStop();return this};a.prototype.remove=function(){this.$spinner.remove();return this};b.default=a;c.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:backbone', location = '/static/lib/backbone/backbone-sync-shim.js' */
require(["aui","backbone","lodash","bitbucket/internal/util/ajax"],function(e,c,d,f){var g={create:"POST",read:"GET",update:"PUT","delete":"DELETE"};c.sync=function(a,b,c){a=d.extend({url:d.isFunction(b.url)?b.url():b.url,type:g[a],data:b.toJSON()},c);e.hasOwnProperty("RestfulTable")&&b instanceof e.RestfulTable.EntryModel&&(a=d.extend({statusCode:{400:!1}},a));return f.rest(a)}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:time', location = '/static/bitbucket/internal/widget/date/time.soy' */
// This file was automatically generated from time.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.date.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.date == 'undefined') { bitbucket.internal.widget.date = {}; }


bitbucket.internal.widget.date.customAge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.date.time({date: opt_data.date, title: opt_data.title, customMapping: opt_data.customMapping, extraClasses: opt_data.extraClasses, type: 'shortAge'});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.date.customAge.soyTemplateName = 'bitbucket.internal.widget.date.customAge';
}


bitbucket.internal.widget.date.shortAge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.date.time({date: opt_data.date, title: opt_data.title, extraClasses: opt_data.extraClasses, type: 'shortAge'});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.date.shortAge.soyTemplateName = 'bitbucket.internal.widget.date.shortAge';
}


bitbucket.internal.widget.date.short = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.date.time({date: opt_data.date, title: opt_data.title, extraClasses: opt_data.extraClasses, type: 'short'});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.date.short.soyTemplateName = 'bitbucket.internal.widget.date.short';
}


bitbucket.internal.widget.date.time = function(opt_data, opt_ignored) {
  return '' + ((opt_data.date) ? '<time datetime="' + soy.$$escapeHtml(require('bitbucket/internal/util/time').format(opt_data.date, 'timestamp')) + '"' + ((opt_data.title != false) ? ' title="' + soy.$$escapeHtml(opt_data.title ? opt_data.title : require('bitbucket/internal/util/time').format(opt_data.date, 'full')) + '"' : '') + ((opt_data.extraClasses) ? ' class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + '>' + soy.$$escapeHtml(require('bitbucket/internal/util/time').format(opt_data.date, opt_data.type, opt_data.customMapping)) + '</time>' : '<time' + ((opt_data.extraClasses) ? ' class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + '>' + soy.$$escapeHtml('Unknown Date') + '</time>');
};
if (goog.DEBUG) {
  bitbucket.internal.widget.date.time.soyTemplateName = 'bitbucket.internal.widget.date.time';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:time', location = '/static/bitbucket/internal/widget/date/deprecated-time.soy' */
// This file was automatically generated from deprecated-time.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.date.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.date == 'undefined') { widget.date = {}; }


widget.date.shortAge = function(opt_data, opt_ignored) {
  return '' + widget.date.time({date: opt_data.date, title: opt_data.title, extraClasses: opt_data.extraClasses, type: 'shortAge'});
};
if (goog.DEBUG) {
  widget.date.shortAge.soyTemplateName = 'widget.date.shortAge';
}


widget.date.short = function(opt_data, opt_ignored) {
  return '' + widget.date.time({date: opt_data.date, title: opt_data.title, extraClasses: opt_data.extraClasses, type: 'short'});
};
if (goog.DEBUG) {
  widget.date.short.soyTemplateName = 'widget.date.short';
}


widget.date.time = function(opt_data, opt_ignored) {
  return '' + ((opt_data.date) ? '<time title="' + soy.$$escapeHtml(opt_data.title ? opt_data.title : require('bitbucket/internal/util/time').format(opt_data.date, 'full')) + '" datetime="' + soy.$$escapeHtml(require('bitbucket/internal/util/time').format(opt_data.date, 'timestamp')) + '" class="deprecated' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + soy.$$escapeHtml(require('bitbucket/internal/util/time').format(opt_data.date, opt_data.type)) + '</time>' : '<time class="deprecated' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + soy.$$escapeHtml('Unknown Date') + '</time>');
};
if (goog.DEBUG) {
  widget.date.time.soyTemplateName = 'widget.date.time';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:confirm-dialog', location = '/static/bitbucket/internal/widget/confirm-dialog.js' */
define("bitbucket/internal/widget/confirm-dialog","module exports aui jquery lodash bitbucket/internal/util/ajax bitbucket/internal/widget/submit-spinner/submit-spinner".split(" "),function(m,c,n,r,t,u,v){function a(b,l){this.dialogOptions=e.default.extend({},a.dialogDefaults,b);this.ajaxOptions=l||{};this._selectors=[];this._okCallbacks=e.default.Callbacks();this._cancelCallback=e.default.Callbacks();this._detachers=e.default.Callbacks();this._attached=!1}Object.defineProperty(c,"__esModule",{value:!0});
var k=babelHelpers.interopRequireDefault(n),e=babelHelpers.interopRequireDefault(r),w=babelHelpers.interopRequireDefault(t),x=babelHelpers.interopRequireDefault(u),y=babelHelpers.interopRequireDefault(v);a.prototype.getConfirmButton=function(){return(0,e.default)("#"+this.dialogOptions.id+" ."+this.dialogOptions.confirmButtonClass)};a.prototype.getButtons=function(){var b=this.getConfirmButton(),a=this.dialogOptions.id;w.default.forEach(this._selectors,function(l){b=b.add((0,e.default)("#"+a+" "+
l))});return b};a.prototype.setButtonsDisabled=function(b){this.getButtons().each(function(){var a=(0,e.default)(this);a.prop("disabled",b).toggleClass("disabled",b);b?a.attr("aria-disabled","true"):a.removeAttr("aria-disabled")})};a.prototype.destroy=function(){this._detachers.fire();this._detachers=null};a.prototype.attachTo=function(b,a,c){var g=this,d=this.dialogOptions,l=this.ajaxOptions,m=this._okCallbacks,n=this._cancelCallback;c=c||document;var f=(0,e.default)(c);this._selectors.push(b);var p=
function(){g.setButtonsDisabled(!1)};f.on("hideLayer",p);var q=function(b){b.preventDefault();var c=(0,e.default)(this);if(!c.is(":disabled")){var f=function(a){g.setButtonsDisabled(!1);a.remove()},h=new k.default.Dialog({width:d.width,height:d.height,id:d.id,focusSelector:d.focusSelector,closeOnOutsideClick:!1,keypressListener:function(a){a.stopImmediatePropagation();a.keyCode===k.default.keyCode.ESCAPE&&(a.preventDefault(),f(h))}});h.addHeader(d.titleText,d.titleClass);h.addPanel("",d.panelContent,
d.panelClass);h.addButton(d.submitText,function(a){g.setButtonsDisabled(!0);var b=null,d=new y.default(g.getConfirmButton(),"before");g.dialogOptions.submitToHref&&(d.show(),"A"===c[0].tagName?b=x.default.rest(e.default.extend({url:c.attr("href")},l)).always(function(){d.hide();f(a)}):c.closest("form")[0].submit());m.fire(b,c,function(){f(a)},a,d)},"button "+(d.confirmButtonClass||""));h.addCancel("Cancel",function(a){f(a);n.fire(c)});a&&a(this,h,g);h.show();
g._attached=!0}};f.on("click",b,q);this._detachers.add(function(){f.off("hideLayer",p);f.off("click",b,q)})};a.prototype.addConfirmListener=function(a){this._okCallbacks.add(a)};a.prototype.addCancelListener=function(a){this._cancelCallback.add(a)};a.dialogDefaults={id:void 0,titleText:"Confirm",titleClass:"confirm-header",confirmButtonClass:"confirm-button",panelContent:"\x3cp\x3e"+"Are you sure you want to do that?"+"\x3c/p\x3e",panelClass:"panel-body",
submitText:"Confirm",submitToHref:!0,height:230,width:433,focusSelector:".confirm-button"};c.default=a;m.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:imagesloaded', location = '/static/bower/imagesloaded/jquery.imagesloaded.js' */
(function(c,q){var m="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";c.fn.imagesLoaded=function(f){function n(){var b=c(j),a=c(h);d&&(h.length?d.reject(e,b,a):d.resolve(e));c.isFunction(f)&&f.call(g,e,b,a)}function p(b){k(b.target,"error"===b.type)}function k(b,a){b.src===m||-1!==c.inArray(b,l)||(l.push(b),a?h.push(b):j.push(b),c.data(b,"imagesLoaded",{isBroken:a,src:b.src}),r&&d.notifyWith(c(b),[a,e,c(j),c(h)]),e.length===l.length&&(setTimeout(n),e.unbind(".imagesLoaded",
p)))}var g=this,d=c.isFunction(c.Deferred)?c.Deferred():0,r=c.isFunction(d.notify),e=g.find("img").add(g.filter("img")),l=[],j=[],h=[];c.isPlainObject(f)&&c.each(f,function(b,a){if("callback"===b)f=a;else if(d)d[b](a)});e.length?e.bind("load.imagesLoaded error.imagesLoaded",p).each(function(b,a){var d=a.src,e=c.data(a,"imagesLoaded");if(e&&e.src===d)k(a,e.isBroken);else if(a.complete&&a.naturalWidth!==q)k(a,0===a.naturalWidth||0===a.naturalHeight);else if(a.readyState||a.complete)a.src=m,a.src=d}):
n();return d?d.promise(g):g}})(jQuery);
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:imagesloaded', location = '/static/lib/imagesloaded-AMD.js' */
define("bitbucket/internal/imagesloaded",function(){});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:scroll', location = '/static/bitbucket/internal/util/scroll.js' */
define("bitbucket/internal/util/scroll",["module","exports","jquery","lodash","bitbucket/internal/util/feature-detect"],function(l,f,m,h,n){function k(b,a){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(!b)return d;var c=b.offsetParent;return c===a||c===document.body||c===document.documentElement?d+b.offsetTop:k(c,a,d+b.offsetTop)}Object.defineProperty(f,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(m),p=babelHelpers.interopRequireDefault(n),q={waitForImages:!1,
cancelIfScrolled:!1,duration:400,getScrollPadding:function(){return document.documentElement.clientHeight/4}},r=function(b){if(b=(0,h.last)(b.querySelectorAll(":hover"))){var a=b.style.display;b.style.display="none";b.offsetHeight;b.style.display=a}};f.default={centerElementInScrollContainer:function(b){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window,d=k(b,a)-((a.clientHeight||a.innerHeight)-b.getBoundingClientRect().height)/2;a.scrollTo?a.scrollTo(0,d):a.scrollTop=d},disableHoverUntilMouseMove:function(b){if("none"!==
b.style.pointerEvents){var a=b.style.pointerEvents;b.style.pointerEvents="none";r(b);(0,g.default)(window).one("mousemove",function(){b.style.pointerEvents=a})}},scrollTo:function(b,a){function d(){if(!e){var a=b.offset();if(a){a=a.top;var d=c.getScrollPadding(),f=c.duration;(0,g.default)("html, body").animate({scrollTop:Math.max(0,a-d)},f)}}}var c=g.default.extend({},q,a),e=!1;if(c.cancelIfScrolled)(0,g.default)(document).one("scroll",function(){e=!0});c.waitForImages?(0,g.default)(document).imagesLoaded(d):
d()},fakeScroll:function(b,a){var d=p.default.cssTransform(),c={left:0,top:0},e=-1;a&&!0===a.withDocument&&(e=1);switch(d){case "msTransform":a=function(a){b.style[d]=null===a?"":"translate("+Math.round(a.left)*e+"px, "+Math.round(a.top)*e+"px)"};break;case void 0:a=function(a){b.style.left=null===a?"":Math.round(a.left)*e;b.style.top=null===a?"":Math.round(a.top)*e};break;default:a=function(a){b.style[d]=null===a?"":"translate3d("+Math.round(a.left)*e+"px, "+Math.round(a.top)*e+"px, 0)"}}return(0,
h.flow)(function(a,b){c.left=null==a?c.left:a;c.top=null==b?c.top:b;return 0===c.left&&0===c.top?null:c},a)}};l.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:scroll', location = '/static/bitbucket/internal/util/horizontal-keyboard-scrolling.js' */
define("bitbucket/internal/util/horizontal-keyboard-scrolling",["module","exports","jquery"],function(g,a,h){Object.defineProperty(a,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(h),f=!1,e=!1,l=/INPUT|SELECT|TEXTAREA/i,c=null;a.default={init:function(){f||(f=!0,(0,k.default)(document).on("keydown",function(d){if(!e&&(37===d.keyCode||39===d.keyCode)){var a=d.target;a&&l.test(a.tagName)||c&&c.length&&c.forEach(function(a){var b=a.getScrollInfo();if(b.width>b.clientWidth){var c=b.left+
(37===d.keyCode?-50:50);b=b.width-b.clientWidth;a.scrollTo(c>b?b:c,null);d.preventDefault()}})}}))},setEditors:function(a){c=a},pause:function(){e=!0},resume:function(){e=!1}};g.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-segment-types', location = '/static/bitbucket/internal/feature/file-content/diff-view-segment-types.js' */
define("bitbucket/internal/feature/file-content/diff-view-segment-types",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={ADDED:"ADDED",REMOVED:"REMOVED",CONTEXT:"CONTEXT"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-file-types', location = '/static/bitbucket/internal/feature/file-content/diff-view-file-types.js' */
define("bitbucket/internal/feature/file-content/diff-view-file-types",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={FROM:"FROM",TO:"TO"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:expanding-textarea', location = '/static/bower/ExpandingTextareas/expanding.js' */
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function e(){a(this).closest(".expandingText").find("div").text(this.value.replace(/\r\n/g,"\n")+" ");a(this).trigger("resize.expanding")}a.expandingTextarea=a.extend({autoInitialize:!0,initialSelector:"textarea.expanding",opts:{resize:function(){}}},a.expandingTextarea||{});var g="lineHeight textDecoration letterSpacing fontSize fontFamily fontStyle fontWeight textTransform textAlign direction wordSpacing fontSizeAdjust wordWrap word-break borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom boxSizing webkitBoxSizing mozBoxSizing msBoxSizing".split(" "),
h={position:"absolute",height:"100%",resize:"none"},k={visibility:"hidden",border:"0 solid",whiteSpace:"pre-wrap"},l={position:"relative"};a.fn.expandingTextarea=function(c){var f=a.extend({},a.expandingTextarea.opts,c);if("resize"===c)return this.trigger("input.expanding");if("destroy"===c)return this.filter(".expanding-init").each(function(){var b=a(this).removeClass("expanding-init");b.closest(".expandingText").before(b).remove();b.attr("style",b.data("expanding-styles")||"").removeData("expanding-styles")}),
this;this.filter("textarea").not(".expanding-init").addClass("expanding-init").each(function(){var b=a(this);b.wrap("\x3cdiv class\x3d'expandingText'\x3e\x3c/div\x3e");b.after("\x3cpre class\x3d'textareaClone'\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/pre\x3e");var c=b.parent().css(l).find("pre").css(k);b.data("expanding-styles",b.attr("style"));b.css(h);a.each(g,function(a,d){a=b.css(d);c.css(d)!==a&&c.css(d,a)});b.bind("input.expanding propertychange.expanding keyup.expanding",e);e.apply(this);f.resize&&b.bind("resize.expanding",
f.resize)});return this};a(function(){a.expandingTextarea.autoInitialize&&a(a.expandingTextarea.initialSelector).expandingTextarea()})});;
;
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-progressive-data-set', location = 'src/js/aui/progressive-data-set.js' */
("undefined"===typeof window?global:window).__bc3aa98a1624c420c64de6459784d4cc=function(){function g(a){return a&&a.__esModule?a:{"default":a}}var f={};"use strict";Object.defineProperty(f,"__esModule",{value:!0});var e=g(__e622bd457fe11fb15e9fb452ca3772d0),h=g(__07cdfb826f754040b351a0110fde6536),j=g(__77af00e80ac034b223816679459a4692),i=h.default.Collection.extend({initialize:function(a,b){b||(b={});b.matcher&&(this.matcher=b.matcher);b.model&&(this.model=b.model);this._idAttribute=(new this.model).idAttribute;
this._maxResults=b.maxResults||5;this._queryData=b.queryData||{};this._queryParamKey=b.queryParamKey||"q";this._queryEndpoint=b.queryEndpoint||"";this.value=null;this.queryCache={};this.activeQueryCount=0;e.default.bindAll(this,"query","respond")},url:function(){return this._queryEndpoint},query:function(a){var b=this,c,d;this.value=a;d=this.getFilteredResults(a);this.respond(a,d);a&&(this._queryEndpoint&&!this.hasQueryCache(a)&&this.shouldGetMoreResults(d))&&(c=this.fetch(a),this.activeQueryCount++,
this.trigger("activity",{activity:!0}),c.always(function(){b.activeQueryCount--;b.trigger("activity",{activity:!!b.activeQueryCount})}),c.done(function(c,d,e){b.addQueryCache(a,c,e)}),c.done(function(){a=b.value;d=b.getFilteredResults(a);b.respond(a,d)}))},getQueryData:function(a){var b=e.default.isFunction(this._queryData)?this._queryData(a):this._queryData,b=e.default.extend({},b);b[this._queryParamKey]=a;return b},fetch:function(a){a={add:!0,update:!0,remove:!1,data:this.getQueryData(a)};return h.default.Collection.prototype.fetch.call(this,
a)},respond:function(a,b){this.trigger("respond",{query:a,results:b});return b},matcher:function(){},getFilteredResults:function(a){var b=[];if(!a)return b;b=this.filter(function(b){return!!this.matcher(b,a)},this);this._maxResults&&(b=e.default.first(b,this._maxResults));return b},addQueryCache:function(a,b,c){var d=this.queryCache,b=this.parse(b,c);d[a]=e.default.pluck(b,this._idAttribute)},hasQueryCache:function(a){return this.queryCache.hasOwnProperty(a)},findQueryCache:function(a){return this.queryCache[a]},
shouldGetMoreResults:function(a){return a.length<this._maxResults},setMaxResults:function(a){this._maxResults=a;this.value&&this.respond(this.value,this.getFilteredResults(this.value))}});(0,j.default)("ProgressiveDataSet",i);f.default=i;return f=f["default"]}.call(this);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:ajs-progressive-dataset', location = '/static/lib/AJS.progressive-dataset-AMD.js' */
define("aui/progressive-dataset",["aui"],function(a){return a.ProgressiveDataSet});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:autocomplete-dialog', location = '/static/bitbucket/internal/widget/autocomplete-dialog/autocomplete-dialog.js' */
define("bitbucket/internal/widget/autocomplete-dialog/autocomplete-dialog",["module","exports","backbone","jquery","lodash"],function(g,e,h,k,l){Object.defineProperty(e,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(h),d=babelHelpers.interopRequireDefault(k),m=babelHelpers.interopRequireDefault(l);e.default=f.default.View.extend({className:"aui-dropdown2 aui-style-default aui-dropdown2-tailed",initialize:function(){var a=parseInt(this.options.minZIndex,10);a&&this.$el.css("z-index",
a+1);(0,d.default)(document.body).append(this.el);this.options.anchor&&this.updateAnchorPosition(this.options.anchor);this.template=this.options.template||d.default.noop;this.highlighter=this.options.highlighter;this.collection=this.collection||new f.default.Collection;this.collection.bind("reset",this.render,this);this.render()},events:{"click li.result":"onClickItem"},render:function(){var a=this.collection.toJSON(),c=this.collection.query,b=this.collection.indexOf(this.selectedResult);b=(0,d.default)(this.template({query:c,
results:a,activeItemIndex:0<=b?b:0}));c&&a.length&&m.default.isFunction(this.highlighter)&&(b=this.highlighter(b,c));this.$el.html(b);this.$spinner&&this.$spinner.appendTo(this.$("ul"));return this},toggleSpinner:function(a){a?this.$spinner||(this.$spinner=(0,d.default)("\x3cli/\x3e").addClass("spinContainer").appendTo(this.$("ul")).spin("small")):(this.$spinner&&this.$spinner.spinStop().remove(),this.$spinner=null)},moveSelectionUp:function(){this.moveSelection(this.DIRECTION_UP)},moveSelectionDown:function(){this.moveSelection(this.DIRECTION_DOWN)},
moveSelection:function(a){var c=this.$("li");if(!(1>=c.length)){var b=c.filter(".active");b=d.default.inArray(b.get(0),c);if(a===this.DIRECTION_DOWN?b<c.length-1:0<b)b+=a,c.removeClass("active").eq(b).addClass("active"),this.selectedResult=this.collection.at(b)}},getSelectedItemIndex:function(){return this.$("li.active").index()},onClickItem:function(a){this.trigger("itemSelected",this.$(a.currentTarget).index())},anchorOptions:{dropdownTailBufferLeft:25,dropdownTailBufferRight:35,viewportWidth:(0,
d.default)(window).width(),bufferTop:2},updateAnchorPosition:function(a){this.anchorOptions.viewportWidth-a.left>this.$el.outerWidth()?this.$el.css({top:a.top+this.anchorOptions.bufferTop,left:a.left-this.anchorOptions.dropdownTailBufferLeft}).attr("data-dropdown2-alignment","left"):this.$el.css({top:a.top+this.anchorOptions.bufferTop,left:a.left-this.$el.outerWidth()+this.anchorOptions.dropdownTailBufferRight}).attr("data-dropdown2-alignment","right")},DIRECTION_UP:-1,DIRECTION_DOWN:1});g.exports=
e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:textarea-caret-position', location = '/static/bower/textarea-caret-position/index.js' */
define("textarea-caret-position",function(){var g="direction boxSizing width height overflowX overflowY borderTopWidth borderRightWidth borderBottomWidth borderLeftWidth paddingTop paddingRight paddingBottom paddingLeft fontStyle fontVariant fontWeight fontStretch fontSize fontSizeAdjust lineHeight fontFamily textAlign textTransform textIndent textDecoration letterSpacing wordSpacing".split(" "),h=null!=window.mozInnerScreenX,d=function(a,d,b){b=document.createElement("div");b.id="input-textarea-caret-position-mirror-div";
document.body.appendChild(b);var c=b.style,e=window.getComputedStyle?getComputedStyle(a):a.currentStyle;c.whiteSpace="pre-wrap";"INPUT"!==a.nodeName&&(c.wordWrap="break-word");c.position="absolute";c.visibility="hidden";g.forEach(function(a){c[a]=e[a]});h?(c.width=parseInt(e.width)-2+"px",a.scrollHeight>parseInt(e.height)&&(c.overflowY="scroll")):c.overflow="hidden";b.textContent=a.value.substring(0,d);"INPUT"===a.nodeName&&(b.textContent=b.textContent.replace(/\s/g,"\u00a0"));var f=document.createElement("span");
f.textContent=a.value.substring(d)||".";b.appendChild(f);a={top:f.offsetTop+parseInt(e.borderTopWidth),left:f.offsetLeft+parseInt(e.borderLeftWidth)};document.body.removeChild(b);return a};if("undefined"!==typeof Package)getCaretCoordinates=d;else if("undefined"!==typeof module&&module.exports)module.exports=d;else return d});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:xregexp', location = '/static/bower/xregexp/src/xregexp.js' */
/*
 XRegExp 3.0.0
 <http://xregexp.com/>
 Steven Levithan (c) 2007-2015 MIT License
*/
var XRegExp=function(n){function B(a,b,c,e,g){var h;a.xregexp={captureNames:b};if(g)return a;if(a.__proto__)a.__proto__=d.prototype;else for(h in d.prototype)a[h]=d.prototype[h];a.xregexp.source=c;a.xregexp.flags=e?e.split("").sort().join(""):e;return a}function w(a){return l.replace.call(a,/([\s\S])(?=[\s\S]*\1)/g,"")}function u(a,b){if(!d.isRegExp(a))throw new TypeError("Type RegExp expected");var c=a.xregexp||{},e=J?a.flags:l.exec.call(/\/([a-z]*)$/i,RegExp.prototype.toString.call(a))[1],g="",
h="",m=null,f=null;b=b||{};b.removeG&&(h+="g");b.removeY&&(h+="y");h&&(e=l.replace.call(e,new RegExp("["+h+"]+","g"),""));b.addG&&(g+="g");b.addY&&(g+="y");g&&(e=w(e+g));b.isInternalOnly||(void 0!==c.source&&(m=c.source),null!=c.flags&&(f=g?w(c.flags+g):c.flags));return a=B(new RegExp(a.source,e),a.xregexp&&a.xregexp.captureNames?c.captureNames.slice(0):null,m,f,b.isInternalOnly)}function v(a,b){var c=a.length,e;for(e=0;e<c;++e)if(a[e]===b)return e;return-1}function z(a,b){return C.call(a)==="[object "+
b+"]"}function D(a,b,c){return l.test.call(-1<c.indexOf("x")?/^(?:\s+|#.*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,a.slice(b))}function K(a,b){var c;if(w(b)!==b)throw new SyntaxError("Invalid duplicate regex flag "+b);a=l.replace.call(a,/^\(\?([\w$]+)\)/,function(a,c){if(l.test.call(/[gy]/,c))throw new SyntaxError("Cannot use flag g or y in mode modifier "+a);b=w(b+c);return""});for(c=0;c<b.length;++c)if(!E[b.charAt(c)])throw new SyntaxError("Unknown regex flag "+
b.charAt(c));return{pattern:a,flags:b}}function F(a){var b={};return z(a,"String")?(d.forEach(a,/[^\s,]+/,function(a){b[a]=!0}),b):a}function G(a){if(!/^[\w$]$/.test(a))throw Error("Flag must be a single character A-Za-z0-9_$");E[a]=!0}function H(a){RegExp.prototype.exec=(a?k:l).exec;RegExp.prototype.test=(a?k:l).test;String.prototype.match=(a?k:l).match;String.prototype.replace=(a?k:l).replace;String.prototype.split=(a?k:l).split;p.natives=a}function r(a){if(null==a)throw new TypeError("Cannot convert null or undefined to object");
return a}var p={astral:!1,natives:!1},l={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},k={},t={},x={},A=[],L={"default":/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,"class":/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|[\s\S]/},M=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,
N=void 0===l.exec.call(/()??/,"")[1],I=function(){var a=!0;try{RegExp("","u")}catch(b){a=!1}return a}(),y=function(){var a=!0;try{RegExp("","y")}catch(b){a=!1}return a}(),J=void 0!==/a/.flags,E={g:!0,i:!0,m:!0,u:I,y:y},C={}.toString;var d=function(a,b){var c={hasNamedCapture:!1,captureNames:[]},e="default",g="",h=0,m;if(d.isRegExp(a)){if(void 0!==b)throw new TypeError("Cannot supply flags when copying a RegExp");return u(a)}a=void 0===a?"":String(a);b=void 0===b?"":String(b);d.isInstalled("astral")&&
-1===b.indexOf("A")&&(b+="A");x[a]||(x[a]={});if(!x[a][b]){var f=K(a,b);var k=f.pattern;for(m=f.flags;h<k.length;){do{for(var q,n=k,p=m,r=h,t=e,w=c,v=A.length,z=n.charAt(r),y=null;v--;)if(f=A[v],!(f.leadChar&&f.leadChar!==z||f.scope!==t&&"all"!==f.scope||f.flag&&-1===p.indexOf(f.flag))&&(q=d.exec(n,f.regex,r,"sticky"))){y={matchLength:q[0].length,output:f.handler.call(w,q,t,p),reparse:f.reparse};break}(f=y)&&f.reparse&&(k=k.slice(0,h)+f.output+k.slice(h+f.matchLength))}while(f&&f.reparse);f?(g+=f.output,
h+=f.matchLength||1):(f=d.exec(k,L[e],h,"sticky")[0],g+=f,h+=f.length,"["===f&&"default"===e?e="class":"]"===f&&"class"===e&&(e="default"))}x[a][b]={pattern:l.replace.call(g,/\(\?:\)(?=\(\?:\))|^\(\?:\)|\(\?:\)$/g,""),flags:l.replace.call(m,/[^gimuy]+/g,""),captures:c.hasNamedCapture?c.captureNames:null}}c=x[a][b];return B(new RegExp(c.pattern,c.flags),c.captures,a,b)};d.prototype=RegExp();d.version="3.0.0";d.addToken=function(a,b,c){c=c||{};var e=c.optionalFlags,g;c.flag&&G(c.flag);if(e)for(e=l.split.call(e,
""),g=0;g<e.length;++g)G(e[g]);A.push({regex:u(a,{addG:!0,addY:y,isInternalOnly:!0}),handler:b,scope:c.scope||"default",flag:c.flag,reparse:c.reparse,leadChar:c.leadChar});d.cache.flush("patterns")};d.cache=function(a,b){t[a]||(t[a]={});return t[a][b]||(t[a][b]=d(a,b))};d.cache.flush=function(a){"patterns"===a?x={}:t={}};d.escape=function(a){return l.replace.call(r(a),/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")};d.exec=function(a,b,c,e){var g="g",d;(d=y&&!!(e||b.sticky&&!1!==e))&&(g+="y");b.xregexp=b.xregexp||
{};g=b.xregexp[g]||(b.xregexp[g]=u(b,{addG:!0,addY:d,removeY:!1===e,isInternalOnly:!0}));g.lastIndex=c=c||0;a=k.exec.call(g,a);e&&a&&a.index!==c&&(a=null);b.global&&(b.lastIndex=a?g.lastIndex:0);return a};d.forEach=function(a,b,c){for(var e=0,g=-1;e=d.exec(a,b,e);)c(e,++g,a,b),e=e.index+(e[0].length||1)};d.globalize=function(a){return u(a,{addG:!0})};d.install=function(a){a=F(a);!p.astral&&a.astral&&(p.astral=!0);!p.natives&&a.natives&&H(!0)};d.isInstalled=function(a){return!!p[a]};d.isRegExp=function(a){return"[object RegExp]"===
C.call(a)};d.match=function(a,b,c){var e=b.global&&"one"!==c||"all"===c,d=(e?"g":"")+(b.sticky?"y":"")||"noGY";b.xregexp=b.xregexp||{};d=b.xregexp[d]||(b.xregexp[d]=u(b,{addG:!!e,addY:!!b.sticky,removeG:"one"===c,isInternalOnly:!0}));a=l.match.call(r(a),d);b.global&&(b.lastIndex="one"===c&&a?a.index+a[0].length:0);return e?a||[]:a&&a[0]};d.matchChain=function(a,b){return function e(a,h){var m=b[h].regex?b[h]:{regex:b[h]},f=[],g=function(a){if(m.backref){if(!(a.hasOwnProperty(m.backref)||+m.backref<
a.length))throw new ReferenceError("Backreference to undefined group: "+m.backref);f.push(a[m.backref]||"")}else f.push(a[0])},q;for(q=0;q<a.length;++q)d.forEach(a[q],m.regex,g);return h!==b.length-1&&f.length?e(f,h+1):f}([a],0)};d.replace=function(a,b,c,e){var g=d.isRegExp(b),h=b.global&&"one"!==e||"all"===e,m=(h?"g":"")+(b.sticky?"y":"")||"noGY",f=b;g?(b.xregexp=b.xregexp||{},f=b.xregexp[m]||(b.xregexp[m]=u(b,{addG:!!h,addY:!!b.sticky,removeG:"one"===e,isInternalOnly:!0}))):h&&(f=new RegExp(d.escape(String(b)),
"g"));a=k.replace.call(r(a),f,c);g&&b.global&&(b.lastIndex=0);return a};d.replaceEach=function(a,b){var c;for(c=0;c<b.length;++c){var e=b[c];a=d.replace(a,e[0],e[1],e[2])}return a};d.split=function(a,b,c){return k.split.call(r(a),b,c)};d.test=function(a,b,c,e){return!!d.exec(a,b,c,e)};d.uninstall=function(a){a=F(a);p.astral&&a.astral&&(p.astral=!1);p.natives&&a.natives&&H(!1)};d.union=function(a,b){var c=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,e=[],g=0,h=function(a,b,c){var e=
q[g-k];if(b){if(++g,e)return"(?\x3c"+e+"\x3e"}else if(c)return"\\"+(+c+k);return a},m;if(!z(a,"Array")||!a.length)throw new TypeError("Must provide a nonempty array of patterns to merge");for(m=0;m<a.length;++m){var f=a[m];if(d.isRegExp(f)){var k=g;var q=f.xregexp&&f.xregexp.captureNames||[];e.push(l.replace.call(d(f.source).source,c,h))}else e.push(d.escape(f))}return d(e.join("|"),b)};k.exec=function(a){var b=this.lastIndex,c=l.exec.apply(this,arguments),e;if(c){if(!N&&1<c.length&&-1<v(c,"")){var d=
u(this,{removeG:!0,isInternalOnly:!0});l.replace.call(String(a).slice(c.index),d,function(){var a=arguments.length,b;for(b=1;b<a-2;++b)void 0===arguments[b]&&(c[b]=void 0)})}if(this.xregexp&&this.xregexp.captureNames)for(e=1;e<c.length;++e)(d=this.xregexp.captureNames[e-1])&&(c[d]=c[e]);this.global&&!c[0].length&&this.lastIndex>c.index&&(this.lastIndex=c.index)}this.global||(this.lastIndex=b);return c};k.test=function(a){return!!k.exec.call(this,a)};k.match=function(a){if(!d.isRegExp(a))a=new RegExp(a);
else if(a.global){var b=l.match.apply(this,arguments);a.lastIndex=0;return b}return k.exec.call(a,r(this))};k.replace=function(a,b){var c=d.isRegExp(a);if(c){if(a.xregexp)var e=a.xregexp.captureNames;var g=a.lastIndex}else a+="";var h=z(b,"Function")?l.replace.call(String(this),a,function(){var d=arguments,f;if(e)for(d[0]=new String(d[0]),f=0;f<e.length;++f)e[f]&&(d[0][e[f]]=d[f+1]);c&&a.global&&(a.lastIndex=d[d.length-2]+d[0].length);return b.apply(void 0,d)}):l.replace.call(null==this?this:String(this),
a,function(){var a=arguments;return l.replace.call(String(b),M,function(b,c,d){if(c){d=+c;if(d<=a.length-3)return a[d]||"";d=e?v(e,c):-1;if(0>d)throw new SyntaxError("Backreference to undefined group "+b);return a[d+1]||""}if("$"===d)return"$";if("\x26"===d||0===+d)return a[0];if("`"===d)return a[a.length-1].slice(0,a[a.length-2]);if("'"===d)return a[a.length-1].slice(a[a.length-2]+a[0].length);d=+d;if(!isNaN(d)){if(d>a.length-3)throw new SyntaxError("Backreference to undefined group "+b);return a[d]||
""}throw new SyntaxError("Invalid token "+b);})});c&&(a.lastIndex=a.global?0:g);return h};k.split=function(a,b){if(!d.isRegExp(a))return l.split.apply(this,arguments);var c=String(this),e=[],g=a.lastIndex,h=0,k;b=(void 0===b?-1:b)>>>0;d.forEach(c,a,function(a){a.index+a[0].length>h&&(e.push(c.slice(h,a.index)),1<a.length&&a.index<c.length&&Array.prototype.push.apply(e,a.slice(1)),k=a[0].length,h=a.index+k)});h===c.length?l.test.call(a,"")&&!k||e.push(""):e.push(c.slice(h));a.lastIndex=g;return e.length>
b?e.slice(0,b):e};n=d.addToken;n(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4}|{[\dA-Fa-f]+})|x(?![\dA-Fa-f]{2}))/,function(a,b){if("B"===a[1]&&"default"===b)return a[0];throw new SyntaxError("Invalid escape "+a[0]);},{scope:"all",leadChar:"\\"});n(/\\u{([\dA-Fa-f]+)}/,function(a,b,c){b=parseInt(a[1],16);if(1114111<b)throw new SyntaxError("Invalid Unicode code point "+a[0]);if(65535>=b){for(a=parseInt(b,10).toString(16);4>a.length;)a="0"+a;return"\\u"+a}if(I&&-1<c.indexOf("u"))return a[0];
throw new SyntaxError("Cannot use Unicode code point above \\u{FFFF} without flag u");},{scope:"all",leadChar:"\\"});n(/\[(\^?)]/,function(a){return a[1]?"[\\s\\S]":"\\b\\B"},{leadChar:"["});n(/\(\?#[^)]*\)/,function(a,b,c){return D(a.input,a.index+a[0].length,c)?"":"(?:)"},{leadChar:"("});n(/\s+|#.*/,function(a,b,c){return D(a.input,a.index+a[0].length,c)?"":"(?:)"},{flag:"x"});n(/\./,function(){return"[\\s\\S]"},{flag:"s",leadChar:"."});n(/\\k<([\w$]+)>/,function(a){var b=isNaN(a[1])?v(this.captureNames,
a[1])+1:+a[1],c=a.index+a[0].length;if(!b||b>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+a[0]);return"\\"+b+(c===a.input.length||isNaN(a.input.charAt(c))?"":"(?:)")},{leadChar:"\\"});n(/\\(\d+)/,function(a,b){if(!("default"===b&&/^[1-9]/.test(a[1])&&+a[1]<=this.captureNames.length)&&"0"!==a[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+a[0]);return a[0]},{scope:"all",leadChar:"\\"});n(/\(\?P?<([\w$]+)>/,function(a){if(!isNaN(a[1]))throw new SyntaxError("Cannot use integer as capture name "+
a[0]);if("length"===a[1]||"__proto__"===a[1])throw new SyntaxError("Cannot use reserved word as capture name "+a[0]);if(-1<v(this.captureNames,a[1]))throw new SyntaxError("Cannot use same name for multiple groups "+a[0]);this.captureNames.push(a[1]);this.hasNamedCapture=!0;return"("},{leadChar:"("});n(/\((?!\?)/,function(a,b,c){if(-1<c.indexOf("n"))return"(?:";this.captureNames.push(null);return"("},{optionalFlags:"n",leadChar:"("});return d}();;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:xregexp', location = '/static/lib/xregexp/xregexp-AMD.js' */
define("xregexp",[],function(){return XRegExp});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:xregexp', location = '/static/bower/xregexp/src/addons/unicode-base.js' */
/*
 XRegExp Unicode Base 3.0.0
 <http://xregexp.com/>
 Steven Levithan (c) 2008-2015 MIT License
*/
(function(h){function k(b){return b.replace(/[- _]+/g,"").toLowerCase()}function l(b){for(;4>b.length;)b="0"+b;return b}function m(b){var c=/^\\[xu](.+)/.exec(b);return c?parseInt(c[1],16):b.charCodeAt("\\"===b.charAt(0)?1:0)}function n(b){var c="",a=-1,d;h.forEach(b,/(\\x..|\\u....|\\?[\s\S])(?:-(\\x..|\\u....|\\?[\s\S]))?/,function(b){d=m(b[1]);d>a+1&&(c+="\\u"+l(parseInt(a+1,10).toString(16)),d>a+2&&(c+="-\\u"+l(parseInt(d-1,10).toString(16))));a=m(b[2]||b[1])});65535>a&&(c+="\\u"+l(parseInt(a+
1,10).toString(16)),65534>a&&(c+="-\\uFFFF"));return c}var d={};h.addToken(/\\([pP])(?:{(\^?)([^}]*)}|([A-Za-z]))/,function(b,c,a){var g="P"===b[1]||!!b[2],e=-1<a.indexOf("A");a=k(b[4]||b[3]);var f=d[a];if("P"===b[1]&&b[2])throw new SyntaxError("Invalid double negation "+b[0]);if(!d.hasOwnProperty(a))throw new SyntaxError("Unknown Unicode token "+b[0]);if(f.inverseOf){a=k(f.inverseOf);if(!d.hasOwnProperty(a))throw new ReferenceError("Unicode token missing data "+b[0]+" -\x3e "+f.inverseOf);f=d[a];
g=!g}if(!f.bmp&&!e)throw new SyntaxError("Astral mode required for Unicode token "+b[0]);if(e){if("class"===c)throw new SyntaxError("Astral mode does not support Unicode tokens within character classes");b=g?"a!":"a\x3d";(c=d[a][b])||(c=d[a],a=d[a],e="",a.bmp&&!a.isBmpLast&&(e="["+a.bmp+"]"+(a.astral?"|":"")),a.astral&&(e+=a.astral),a.isBmpLast&&a.bmp&&(e+=(a.astral?"|":"")+"["+a.bmp+"]"),c=c[b]=g?"(?:(?!"+e+")(?:[\ud800-\udbff][\udc00-\udfff]|[\x00-\uffff]))":"(?:"+e+")");return c}return"class"===
c?g?d[a]["b!"]||(d[a]["b!"]=n(d[a].bmp)):f.bmp:(g?"[^":"[")+f.bmp+"]"},{scope:"all",optionalFlags:"A",leadChar:"\\"});h.addUnicodeData=function(b){var c;for(c=0;c<b.length;++c){var a=b[c];if(!a.name)throw Error("Unicode token requires name");if(!(a.inverseOf||a.bmp||a.astral))throw Error("Unicode token has no character data "+a.name);d[k(a.name)]=a;a.alias&&(d[k(a.alias)]=a)}h.cache.flush("patterns")}})(XRegExp);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:xregexp', location = '/static/bower/xregexp/src/addons/unicode-categories.js' */
/*
 XRegExp Unicode Categories 3.0.0
 <http://xregexp.com/>
 Steven Levithan (c) 2010-2015 MIT License
 Unicode data provided by Mathias Bynens <http://mathiasbynens.be/>
*/
(function(a){if(!a.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Categories");a.addUnicodeData([{name:"C",alias:"Other",isBmpLast:!0,bmp:"\x00-\u001f\u007f-\u009f\u00ad\u0378\u0379\u0380-\u0383\u038b\u038d\u03a2\u0530\u0557\u0558\u0560\u0588\u058b\u058c\u0590\u05c8-\u05cf\u05eb-\u05ef\u05f5-\u0605\u061c\u061d\u06dd\u070e\u070f\u074b\u074c\u07b2-\u07bf\u07fb-\u07ff\u082e\u082f\u083f\u085c\u085d\u085f-\u089f\u08b5-\u08e2\u0984\u098d\u098e\u0991\u0992\u09a9\u09b1\u09b3-\u09b5\u09ba\u09bb\u09c5\u09c6\u09c9\u09ca\u09cf-\u09d6\u09d8-\u09db\u09de\u09e4\u09e5\u09fc-\u0a00\u0a04\u0a0b-\u0a0e\u0a11\u0a12\u0a29\u0a31\u0a34\u0a37\u0a3a\u0a3b\u0a3d\u0a43-\u0a46\u0a49\u0a4a\u0a4e-\u0a50\u0a52-\u0a58\u0a5d\u0a5f-\u0a65\u0a76-\u0a80\u0a84\u0a8e\u0a92\u0aa9\u0ab1\u0ab4\u0aba\u0abb\u0ac6\u0aca\u0ace\u0acf\u0ad1-\u0adf\u0ae4\u0ae5\u0af2-\u0af8\u0afa-\u0b00\u0b04\u0b0d\u0b0e\u0b11\u0b12\u0b29\u0b31\u0b34\u0b3a\u0b3b\u0b45\u0b46\u0b49\u0b4a\u0b4e-\u0b55\u0b58-\u0b5b\u0b5e\u0b64\u0b65\u0b78-\u0b81\u0b84\u0b8b-\u0b8d\u0b91\u0b96-\u0b98\u0b9b\u0b9d\u0ba0-\u0ba2\u0ba5-\u0ba7\u0bab-\u0bad\u0bba-\u0bbd\u0bc3-\u0bc5\u0bc9\u0bce\u0bcf\u0bd1-\u0bd6\u0bd8-\u0be5\u0bfb-\u0bff\u0c04\u0c0d\u0c11\u0c29\u0c3a-\u0c3c\u0c45\u0c49\u0c4e-\u0c54\u0c57\u0c5b-\u0c5f\u0c64\u0c65\u0c70-\u0c77\u0c80\u0c84\u0c8d\u0c91\u0ca9\u0cb4\u0cba\u0cbb\u0cc5\u0cc9\u0cce-\u0cd4\u0cd7-\u0cdd\u0cdf\u0ce4\u0ce5\u0cf0\u0cf3-\u0d00\u0d04\u0d0d\u0d11\u0d3b\u0d3c\u0d45\u0d49\u0d4f-\u0d56\u0d58-\u0d5e\u0d64\u0d65\u0d76-\u0d78\u0d80\u0d81\u0d84\u0d97-\u0d99\u0db2\u0dbc\u0dbe\u0dbf\u0dc7-\u0dc9\u0dcb-\u0dce\u0dd5\u0dd7\u0de0-\u0de5\u0df0\u0df1\u0df5-\u0e00\u0e3b-\u0e3e\u0e5c-\u0e80\u0e83\u0e85\u0e86\u0e89\u0e8b\u0e8c\u0e8e-\u0e93\u0e98\u0ea0\u0ea4\u0ea6\u0ea8\u0ea9\u0eac\u0eba\u0ebe\u0ebf\u0ec5\u0ec7\u0ece\u0ecf\u0eda\u0edb\u0ee0-\u0eff\u0f48\u0f6d-\u0f70\u0f98\u0fbd\u0fcd\u0fdb-\u0fff\u10c6\u10c8-\u10cc\u10ce\u10cf\u1249\u124e\u124f\u1257\u1259\u125e\u125f\u1289\u128e\u128f\u12b1\u12b6\u12b7\u12bf\u12c1\u12c6\u12c7\u12d7\u1311\u1316\u1317\u135b\u135c\u137d-\u137f\u139a-\u139f\u13f6\u13f7\u13fe\u13ff\u169d-\u169f\u16f9-\u16ff\u170d\u1715-\u171f\u1737-\u173f\u1754-\u175f\u176d\u1771\u1774-\u177f\u17de\u17df\u17ea-\u17ef\u17fa-\u17ff\u180e\u180f\u181a-\u181f\u1878-\u187f\u18ab-\u18af\u18f6-\u18ff\u191f\u192c-\u192f\u193c-\u193f\u1941-\u1943\u196e\u196f\u1975-\u197f\u19ac-\u19af\u19ca-\u19cf\u19db-\u19dd\u1a1c\u1a1d\u1a5f\u1a7d\u1a7e\u1a8a-\u1a8f\u1a9a-\u1a9f\u1aae\u1aaf\u1abf-\u1aff\u1b4c-\u1b4f\u1b7d-\u1b7f\u1bf4-\u1bfb\u1c38-\u1c3a\u1c4a-\u1c4c\u1c80-\u1cbf\u1cc8-\u1ccf\u1cf7\u1cfa-\u1cff\u1df6-\u1dfb\u1f16\u1f17\u1f1e\u1f1f\u1f46\u1f47\u1f4e\u1f4f\u1f58\u1f5a\u1f5c\u1f5e\u1f7e\u1f7f\u1fb5\u1fc5\u1fd4\u1fd5\u1fdc\u1ff0\u1ff1\u1ff5\u1fff\u200b-\u200f\u202a-\u202e\u2060-\u206f\u2072\u2073\u208f\u209d-\u209f\u20bf-\u20cf\u20f1-\u20ff\u218c-\u218f\u23fb-\u23ff\u2427-\u243f\u244b-\u245f\u2b74\u2b75\u2b96\u2b97\u2bba-\u2bbc\u2bc9\u2bd2-\u2beb\u2bf0-\u2bff\u2c2f\u2c5f\u2cf4-\u2cf8\u2d26\u2d28-\u2d2c\u2d2e\u2d2f\u2d68-\u2d6e\u2d71-\u2d7e\u2d97-\u2d9f\u2da7\u2daf\u2db7\u2dbf\u2dc7\u2dcf\u2dd7\u2ddf\u2e43-\u2e7f\u2e9a\u2ef4-\u2eff\u2fd6-\u2fef\u2ffc-\u2fff\u3040\u3097\u3098\u3100-\u3104\u312e-\u3130\u318f\u31bb-\u31bf\u31e4-\u31ef\u321f\u32ff\u4db6-\u4dbf\u9fd6-\u9fff\ua48d-\ua48f\ua4c7-\ua4cf\ua62c-\ua63f\ua6f8-\ua6ff\ua7ae\ua7af\ua7b8-\ua7f6\ua82c-\ua82f\ua83a-\ua83f\ua878-\ua87f\ua8c5-\ua8cd\ua8da-\ua8df\ua8fe\ua8ff\ua954-\ua95e\ua97d-\ua97f\ua9ce\ua9da-\ua9dd\ua9ff\uaa37-\uaa3f\uaa4e\uaa4f\uaa5a\uaa5b\uaac3-\uaada\uaaf7-\uab00\uab07\uab08\uab0f\uab10\uab17-\uab1f\uab27\uab2f\uab66-\uab6f\uabee\uabef\uabfa-\uabff\ud7a4-\ud7af\ud7c7-\ud7ca\ud7fc-\uf8ff\ufa6e\ufa6f\ufada-\ufaff\ufb07-\ufb12\ufb18-\ufb1c\ufb37\ufb3d\ufb3f\ufb42\ufb45\ufbc2-\ufbd2\ufd40-\ufd4f\ufd90\ufd91\ufdc8-\ufdef\ufdfe\ufdff\ufe1a-\ufe1f\ufe53\ufe67\ufe6c-\ufe6f\ufe75\ufefd-\uff00\uffbf-\uffc1\uffc8\uffc9\uffd0\uffd1\uffd8\uffd9\uffdd-\uffdf\uffe7\uffef-\ufffb\ufffe\uffff",
astral:"\ud834[\udcf6-\udcff\udd27\udd28\udd73-\udd7a\udde9-\uddff\ude46-\udeff\udf57-\udf5f\udf72-\udfff]|\ud836[\ude8c-\ude9a\udea0\udeb0-\udfff]|\ud83c[\udc2c-\udc2f\udc94-\udc9f\udcaf\udcb0\udcc0\udcd0\udcf6-\udcff\udd0d-\udd0f\udd2f\udd6c-\udd6f\udd9b-\udde5\ude03-\ude0f\ude3b-\ude3f\ude49-\ude4f\ude52-\udeff]|\ud81a[\ude39-\ude3f\ude5f\ude6a-\ude6d\ude70-\udecf\udeee\udeef\udef6-\udeff\udf46-\udf4f\udf5a\udf62\udf78-\udf7c\udf90-\udfff]|\ud809[\udc6f\udc75-\udc7f\udd44-\udfff]|\ud81b[\udc00-\udeff\udf45-\udf4f\udf7f-\udf8e\udfa0-\udfff]|\ud86e[\udc1e\udc1f]|\ud83d[\udd7a\udda4\uded1-\udedf\udeed-\udeef\udef4-\udeff\udf74-\udf7f\udfd5-\udfff]|\ud801[\udc9e\udc9f\udcaa-\udcff\udd28-\udd2f\udd64-\udd6e\udd70-\uddff\udf37-\udf3f\udf56-\udf5f\udf68-\udfff]|\ud800[\udc0c\udc27\udc3b\udc3e\udc4e\udc4f\udc5e-\udc7f\udcfb-\udcff\udd03-\udd06\udd34-\udd36\udd8d-\udd8f\udd9c-\udd9f\udda1-\uddcf\uddfe-\ude7f\ude9d-\ude9f\uded1-\udedf\udefc-\udeff\udf24-\udf2f\udf4b-\udf4f\udf7b-\udf7f\udf9e\udfc4-\udfc7\udfd6-\udfff]|\ud869[\uded7-\udeff]|\ud83b[\udc00-\uddff\ude04\ude20\ude23\ude25\ude26\ude28\ude33\ude38\ude3a\ude3c-\ude41\ude43-\ude46\ude48\ude4a\ude4c\ude50\ude53\ude55\ude56\ude58\ude5a\ude5c\ude5e\ude60\ude63\ude65\ude66\ude6b\ude73\ude78\ude7d\ude7f\ude8a\ude9c-\udea0\udea4\udeaa\udebc-\udeef\udef2-\udfff]|\ud87e[\ude1e-\udfff]|\udb40[\udc00-\udcff\uddf0-\udfff]|\ud804[\udc4e-\udc51\udc70-\udc7e\udcbd\udcc2-\udccf\udce9-\udcef\udcfa-\udcff\udd35\udd44-\udd4f\udd77-\udd7f\uddce\uddcf\udde0\uddf5-\uddff\ude12\ude3e-\ude7f\ude87\ude89\ude8e\ude9e\udeaa-\udeaf\udeeb-\udeef\udefa-\udeff\udf04\udf0d\udf0e\udf11\udf12\udf29\udf31\udf34\udf3a\udf3b\udf45\udf46\udf49\udf4a\udf4e\udf4f\udf51-\udf56\udf58-\udf5c\udf64\udf65\udf6d-\udf6f\udf75-\udfff]|\ud83a[\udcc5\udcc6\udcd7-\udfff]|\ud80d[\udc2f-\udfff]|\ud86d[\udf35-\udf3f]|[\ud807\ud80a\ud80b\ud80e-\ud810\ud812-\ud819\ud81c-\ud82b\ud82d\ud82e\ud830-\ud833\ud837-\ud839\ud83f\ud874-\ud87d\ud87f-\udb3f\udb41-\udbff][\udc00-\udfff]|\ud806[\udc00-\udc9f\udcf3-\udcfe\udd00-\udebf\udef9-\udfff]|\ud803[\udc49-\udc7f\udcb3-\udcbf\udcf3-\udcf9\udd00-\ude5f\ude7f-\udfff]|\ud835[\udc55\udc9d\udca0\udca1\udca3\udca4\udca7\udca8\udcad\udcba\udcbc\udcc4\udd06\udd0b\udd0c\udd15\udd1d\udd3a\udd3f\udd45\udd47-\udd49\udd51\udea6\udea7\udfcc\udfcd]|\ud805[\udc00-\udc7f\udcc8-\udccf\udcda-\udd7f\uddb6\uddb7\uddde-\uddff\ude45-\ude4f\ude5a-\ude7f\udeb8-\udebf\udeca-\udeff\udf1a-\udf1c\udf2c-\udf2f\udf40-\udfff]|\ud802[\udc06\udc07\udc09\udc36\udc39-\udc3b\udc3d\udc3e\udc56\udc9f-\udca6\udcb0-\udcdf\udcf3\udcf6-\udcfa\udd1c-\udd1e\udd3a-\udd3e\udd40-\udd7f\uddb8-\uddbb\uddd0\uddd1\ude04\ude07-\ude0b\ude14\ude18\ude34-\ude37\ude3b-\ude3e\ude48-\ude4f\ude59-\ude5f\udea0-\udebf\udee7-\udeea\udef7-\udeff\udf36-\udf38\udf56\udf57\udf73-\udf77\udf92-\udf98\udf9d-\udfa8\udfb0-\udfff]|\ud808[\udf9a-\udfff]|\ud82f[\udc6b-\udc6f\udc7d-\udc7f\udc89-\udc8f\udc9a\udc9b\udca0-\udfff]|\ud82c[\udc02-\udfff]|\ud811[\ude47-\udfff]|\ud83e[\udc0c-\udc0f\udc48-\udc4f\udc5a-\udc5f\udc88-\udc8f\udcae-\udd0f\udd19-\udd7f\udd85-\uddbf\uddc1-\udfff]|\ud873[\udea2-\udfff]"},
{name:"Cc",alias:"Control",bmp:"\x00-\u001f\u007f-\u009f"},{name:"Cf",alias:"Format",bmp:"\u00ad\u0600-\u0605\u061c\u06dd\u070f\u180e\u200b-\u200f\u202a-\u202e\u2060-\u2064\u2066-\u206f\ufeff\ufff9-\ufffb",astral:"\udb40[\udc01\udc20-\udc7f]|\ud82f[\udca0-\udca3]|\ud834[\udd73-\udd7a]|\ud804\udcbd"},{name:"Cn",alias:"Unassigned",bmp:"\u0378\u0379\u0380-\u0383\u038b\u038d\u03a2\u0530\u0557\u0558\u0560\u0588\u058b\u058c\u0590\u05c8-\u05cf\u05eb-\u05ef\u05f5-\u05ff\u061d\u070e\u074b\u074c\u07b2-\u07bf\u07fb-\u07ff\u082e\u082f\u083f\u085c\u085d\u085f-\u089f\u08b5-\u08e2\u0984\u098d\u098e\u0991\u0992\u09a9\u09b1\u09b3-\u09b5\u09ba\u09bb\u09c5\u09c6\u09c9\u09ca\u09cf-\u09d6\u09d8-\u09db\u09de\u09e4\u09e5\u09fc-\u0a00\u0a04\u0a0b-\u0a0e\u0a11\u0a12\u0a29\u0a31\u0a34\u0a37\u0a3a\u0a3b\u0a3d\u0a43-\u0a46\u0a49\u0a4a\u0a4e-\u0a50\u0a52-\u0a58\u0a5d\u0a5f-\u0a65\u0a76-\u0a80\u0a84\u0a8e\u0a92\u0aa9\u0ab1\u0ab4\u0aba\u0abb\u0ac6\u0aca\u0ace\u0acf\u0ad1-\u0adf\u0ae4\u0ae5\u0af2-\u0af8\u0afa-\u0b00\u0b04\u0b0d\u0b0e\u0b11\u0b12\u0b29\u0b31\u0b34\u0b3a\u0b3b\u0b45\u0b46\u0b49\u0b4a\u0b4e-\u0b55\u0b58-\u0b5b\u0b5e\u0b64\u0b65\u0b78-\u0b81\u0b84\u0b8b-\u0b8d\u0b91\u0b96-\u0b98\u0b9b\u0b9d\u0ba0-\u0ba2\u0ba5-\u0ba7\u0bab-\u0bad\u0bba-\u0bbd\u0bc3-\u0bc5\u0bc9\u0bce\u0bcf\u0bd1-\u0bd6\u0bd8-\u0be5\u0bfb-\u0bff\u0c04\u0c0d\u0c11\u0c29\u0c3a-\u0c3c\u0c45\u0c49\u0c4e-\u0c54\u0c57\u0c5b-\u0c5f\u0c64\u0c65\u0c70-\u0c77\u0c80\u0c84\u0c8d\u0c91\u0ca9\u0cb4\u0cba\u0cbb\u0cc5\u0cc9\u0cce-\u0cd4\u0cd7-\u0cdd\u0cdf\u0ce4\u0ce5\u0cf0\u0cf3-\u0d00\u0d04\u0d0d\u0d11\u0d3b\u0d3c\u0d45\u0d49\u0d4f-\u0d56\u0d58-\u0d5e\u0d64\u0d65\u0d76-\u0d78\u0d80\u0d81\u0d84\u0d97-\u0d99\u0db2\u0dbc\u0dbe\u0dbf\u0dc7-\u0dc9\u0dcb-\u0dce\u0dd5\u0dd7\u0de0-\u0de5\u0df0\u0df1\u0df5-\u0e00\u0e3b-\u0e3e\u0e5c-\u0e80\u0e83\u0e85\u0e86\u0e89\u0e8b\u0e8c\u0e8e-\u0e93\u0e98\u0ea0\u0ea4\u0ea6\u0ea8\u0ea9\u0eac\u0eba\u0ebe\u0ebf\u0ec5\u0ec7\u0ece\u0ecf\u0eda\u0edb\u0ee0-\u0eff\u0f48\u0f6d-\u0f70\u0f98\u0fbd\u0fcd\u0fdb-\u0fff\u10c6\u10c8-\u10cc\u10ce\u10cf\u1249\u124e\u124f\u1257\u1259\u125e\u125f\u1289\u128e\u128f\u12b1\u12b6\u12b7\u12bf\u12c1\u12c6\u12c7\u12d7\u1311\u1316\u1317\u135b\u135c\u137d-\u137f\u139a-\u139f\u13f6\u13f7\u13fe\u13ff\u169d-\u169f\u16f9-\u16ff\u170d\u1715-\u171f\u1737-\u173f\u1754-\u175f\u176d\u1771\u1774-\u177f\u17de\u17df\u17ea-\u17ef\u17fa-\u17ff\u180f\u181a-\u181f\u1878-\u187f\u18ab-\u18af\u18f6-\u18ff\u191f\u192c-\u192f\u193c-\u193f\u1941-\u1943\u196e\u196f\u1975-\u197f\u19ac-\u19af\u19ca-\u19cf\u19db-\u19dd\u1a1c\u1a1d\u1a5f\u1a7d\u1a7e\u1a8a-\u1a8f\u1a9a-\u1a9f\u1aae\u1aaf\u1abf-\u1aff\u1b4c-\u1b4f\u1b7d-\u1b7f\u1bf4-\u1bfb\u1c38-\u1c3a\u1c4a-\u1c4c\u1c80-\u1cbf\u1cc8-\u1ccf\u1cf7\u1cfa-\u1cff\u1df6-\u1dfb\u1f16\u1f17\u1f1e\u1f1f\u1f46\u1f47\u1f4e\u1f4f\u1f58\u1f5a\u1f5c\u1f5e\u1f7e\u1f7f\u1fb5\u1fc5\u1fd4\u1fd5\u1fdc\u1ff0\u1ff1\u1ff5\u1fff\u2065\u2072\u2073\u208f\u209d-\u209f\u20bf-\u20cf\u20f1-\u20ff\u218c-\u218f\u23fb-\u23ff\u2427-\u243f\u244b-\u245f\u2b74\u2b75\u2b96\u2b97\u2bba-\u2bbc\u2bc9\u2bd2-\u2beb\u2bf0-\u2bff\u2c2f\u2c5f\u2cf4-\u2cf8\u2d26\u2d28-\u2d2c\u2d2e\u2d2f\u2d68-\u2d6e\u2d71-\u2d7e\u2d97-\u2d9f\u2da7\u2daf\u2db7\u2dbf\u2dc7\u2dcf\u2dd7\u2ddf\u2e43-\u2e7f\u2e9a\u2ef4-\u2eff\u2fd6-\u2fef\u2ffc-\u2fff\u3040\u3097\u3098\u3100-\u3104\u312e-\u3130\u318f\u31bb-\u31bf\u31e4-\u31ef\u321f\u32ff\u4db6-\u4dbf\u9fd6-\u9fff\ua48d-\ua48f\ua4c7-\ua4cf\ua62c-\ua63f\ua6f8-\ua6ff\ua7ae\ua7af\ua7b8-\ua7f6\ua82c-\ua82f\ua83a-\ua83f\ua878-\ua87f\ua8c5-\ua8cd\ua8da-\ua8df\ua8fe\ua8ff\ua954-\ua95e\ua97d-\ua97f\ua9ce\ua9da-\ua9dd\ua9ff\uaa37-\uaa3f\uaa4e\uaa4f\uaa5a\uaa5b\uaac3-\uaada\uaaf7-\uab00\uab07\uab08\uab0f\uab10\uab17-\uab1f\uab27\uab2f\uab66-\uab6f\uabee\uabef\uabfa-\uabff\ud7a4-\ud7af\ud7c7-\ud7ca\ud7fc-\ud7ff\ufa6e\ufa6f\ufada-\ufaff\ufb07-\ufb12\ufb18-\ufb1c\ufb37\ufb3d\ufb3f\ufb42\ufb45\ufbc2-\ufbd2\ufd40-\ufd4f\ufd90\ufd91\ufdc8-\ufdef\ufdfe\ufdff\ufe1a-\ufe1f\ufe53\ufe67\ufe6c-\ufe6f\ufe75\ufefd\ufefe\uff00\uffbf-\uffc1\uffc8\uffc9\uffd0\uffd1\uffd8\uffd9\uffdd-\uffdf\uffe7\uffef-\ufff8\ufffe\uffff",
astral:"\udb40[\udc00\udc02-\udc1f\udc80-\udcff\uddf0-\udfff]|\ud834[\udcf6-\udcff\udd27\udd28\udde9-\uddff\ude46-\udeff\udf57-\udf5f\udf72-\udfff]|\ud83c[\udc2c-\udc2f\udc94-\udc9f\udcaf\udcb0\udcc0\udcd0\udcf6-\udcff\udd0d-\udd0f\udd2f\udd6c-\udd6f\udd9b-\udde5\ude03-\ude0f\ude3b-\ude3f\ude49-\ude4f\ude52-\udeff]|\ud81a[\ude39-\ude3f\ude5f\ude6a-\ude6d\ude70-\udecf\udeee\udeef\udef6-\udeff\udf46-\udf4f\udf5a\udf62\udf78-\udf7c\udf90-\udfff]|\ud809[\udc6f\udc75-\udc7f\udd44-\udfff]|\ud81b[\udc00-\udeff\udf45-\udf4f\udf7f-\udf8e\udfa0-\udfff]|\ud86e[\udc1e\udc1f]|\ud83d[\udd7a\udda4\uded1-\udedf\udeed-\udeef\udef4-\udeff\udf74-\udf7f\udfd5-\udfff]|\ud801[\udc9e\udc9f\udcaa-\udcff\udd28-\udd2f\udd64-\udd6e\udd70-\uddff\udf37-\udf3f\udf56-\udf5f\udf68-\udfff]|\ud800[\udc0c\udc27\udc3b\udc3e\udc4e\udc4f\udc5e-\udc7f\udcfb-\udcff\udd03-\udd06\udd34-\udd36\udd8d-\udd8f\udd9c-\udd9f\udda1-\uddcf\uddfe-\ude7f\ude9d-\ude9f\uded1-\udedf\udefc-\udeff\udf24-\udf2f\udf4b-\udf4f\udf7b-\udf7f\udf9e\udfc4-\udfc7\udfd6-\udfff]|\ud869[\uded7-\udeff]|\ud83b[\udc00-\uddff\ude04\ude20\ude23\ude25\ude26\ude28\ude33\ude38\ude3a\ude3c-\ude41\ude43-\ude46\ude48\ude4a\ude4c\ude50\ude53\ude55\ude56\ude58\ude5a\ude5c\ude5e\ude60\ude63\ude65\ude66\ude6b\ude73\ude78\ude7d\ude7f\ude8a\ude9c-\udea0\udea4\udeaa\udebc-\udeef\udef2-\udfff]|[\udbbf\udbff][\udffe\udfff]|\ud87e[\ude1e-\udfff]|\ud82f[\udc6b-\udc6f\udc7d-\udc7f\udc89-\udc8f\udc9a\udc9b\udca4-\udfff]|\ud83a[\udcc5\udcc6\udcd7-\udfff]|\ud80d[\udc2f-\udfff]|\ud86d[\udf35-\udf3f]|[\ud807\ud80a\ud80b\ud80e-\ud810\ud812-\ud819\ud81c-\ud82b\ud82d\ud82e\ud830-\ud833\ud837-\ud839\ud83f\ud874-\ud87d\ud87f-\udb3f\udb41-\udb7f][\udc00-\udfff]|\ud806[\udc00-\udc9f\udcf3-\udcfe\udd00-\udebf\udef9-\udfff]|\ud803[\udc49-\udc7f\udcb3-\udcbf\udcf3-\udcf9\udd00-\ude5f\ude7f-\udfff]|\ud835[\udc55\udc9d\udca0\udca1\udca3\udca4\udca7\udca8\udcad\udcba\udcbc\udcc4\udd06\udd0b\udd0c\udd15\udd1d\udd3a\udd3f\udd45\udd47-\udd49\udd51\udea6\udea7\udfcc\udfcd]|\ud836[\ude8c-\ude9a\udea0\udeb0-\udfff]|\ud805[\udc00-\udc7f\udcc8-\udccf\udcda-\udd7f\uddb6\uddb7\uddde-\uddff\ude45-\ude4f\ude5a-\ude7f\udeb8-\udebf\udeca-\udeff\udf1a-\udf1c\udf2c-\udf2f\udf40-\udfff]|\ud802[\udc06\udc07\udc09\udc36\udc39-\udc3b\udc3d\udc3e\udc56\udc9f-\udca6\udcb0-\udcdf\udcf3\udcf6-\udcfa\udd1c-\udd1e\udd3a-\udd3e\udd40-\udd7f\uddb8-\uddbb\uddd0\uddd1\ude04\ude07-\ude0b\ude14\ude18\ude34-\ude37\ude3b-\ude3e\ude48-\ude4f\ude59-\ude5f\udea0-\udebf\udee7-\udeea\udef7-\udeff\udf36-\udf38\udf56\udf57\udf73-\udf77\udf92-\udf98\udf9d-\udfa8\udfb0-\udfff]|\ud808[\udf9a-\udfff]|\ud804[\udc4e-\udc51\udc70-\udc7e\udcc2-\udccf\udce9-\udcef\udcfa-\udcff\udd35\udd44-\udd4f\udd77-\udd7f\uddce\uddcf\udde0\uddf5-\uddff\ude12\ude3e-\ude7f\ude87\ude89\ude8e\ude9e\udeaa-\udeaf\udeeb-\udeef\udefa-\udeff\udf04\udf0d\udf0e\udf11\udf12\udf29\udf31\udf34\udf3a\udf3b\udf45\udf46\udf49\udf4a\udf4e\udf4f\udf51-\udf56\udf58-\udf5c\udf64\udf65\udf6d-\udf6f\udf75-\udfff]|\ud82c[\udc02-\udfff]|\ud811[\ude47-\udfff]|\ud83e[\udc0c-\udc0f\udc48-\udc4f\udc5a-\udc5f\udc88-\udc8f\udcae-\udd0f\udd19-\udd7f\udd85-\uddbf\uddc1-\udfff]|\ud873[\udea2-\udfff]"},
{name:"Co",alias:"Private_Use",bmp:"\ue000-\uf8ff",astral:"[\udb80-\udbbe\udbc0-\udbfe][\udc00-\udfff]|[\udbbf\udbff][\udc00-\udffd]"},{name:"Cs",alias:"Surrogate",bmp:"\ud800-\udfff"},{name:"L",alias:"Letter",bmp:"A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ad\ua7b0-\ua7b7\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
astral:"\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud803[\udc00-\udc48\udc80-\udcb2\udcc0-\udcf2]|\ud83a[\udc00-\udcc4]|\ud801[\udc00-\udc9d\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\ude80-\ude9c\udea0-\uded0\udf00-\udf1f\udf30-\udf40\udf42-\udf49\udf50-\udf75\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf]|\ud80d[\udc00-\udc2e]|\ud87e[\udc00-\ude1d]|\ud81b[\udf00-\udf44\udf50\udf93-\udf9f]|[\ud80c\ud840-\ud868\ud86a-\ud86c\ud86f-\ud872][\udc00-\udfff]|\ud805[\udc80-\udcaf\udcc4\udcc5\udcc7\udd80-\uddae\uddd8-\udddb\ude00-\ude2f\ude44\ude80-\udeaa\udf00-\udf19]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udf00-\udf2f\udf40-\udf43\udf63-\udf77\udf7d-\udf8f]|\ud809[\udc80-\udd43]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00\ude10-\ude13\ude15-\ude17\ude19-\ude33\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee4\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud804[\udc03-\udc37\udc83-\udcaf\udcd0-\udce8\udd03-\udd26\udd50-\udd72\udd76\udd83-\uddb2\uddc1-\uddc4\uddda\udddc\ude00-\ude11\ude13-\ude2b\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udede\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3d\udf50\udf5d-\udf61]|\ud808[\udc00-\udf99]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud806[\udca0-\udcdf\udcff\udec0-\udef8]|\ud811[\udc00-\ude46]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99]|\ud82c[\udc00\udc01]|\ud873[\udc00-\udea1]"},
{name:"Ll",alias:"Lowercase_Letter",bmp:"a-z\u00b5\u00df-\u00f6\u00f8-\u00ff\u0101\u0103\u0105\u0107\u0109\u010b\u010d\u010f\u0111\u0113\u0115\u0117\u0119\u011b\u011d\u011f\u0121\u0123\u0125\u0127\u0129\u012b\u012d\u012f\u0131\u0133\u0135\u0137\u0138\u013a\u013c\u013e\u0140\u0142\u0144\u0146\u0148\u0149\u014b\u014d\u014f\u0151\u0153\u0155\u0157\u0159\u015b\u015d\u015f\u0161\u0163\u0165\u0167\u0169\u016b\u016d\u016f\u0171\u0173\u0175\u0177\u017a\u017c\u017e-\u0180\u0183\u0185\u0188\u018c\u018d\u0192\u0195\u0199-\u019b\u019e\u01a1\u01a3\u01a5\u01a8\u01aa\u01ab\u01ad\u01b0\u01b4\u01b6\u01b9\u01ba\u01bd-\u01bf\u01c6\u01c9\u01cc\u01ce\u01d0\u01d2\u01d4\u01d6\u01d8\u01da\u01dc\u01dd\u01df\u01e1\u01e3\u01e5\u01e7\u01e9\u01eb\u01ed\u01ef\u01f0\u01f3\u01f5\u01f9\u01fb\u01fd\u01ff\u0201\u0203\u0205\u0207\u0209\u020b\u020d\u020f\u0211\u0213\u0215\u0217\u0219\u021b\u021d\u021f\u0221\u0223\u0225\u0227\u0229\u022b\u022d\u022f\u0231\u0233-\u0239\u023c\u023f\u0240\u0242\u0247\u0249\u024b\u024d\u024f-\u0293\u0295-\u02af\u0371\u0373\u0377\u037b-\u037d\u0390\u03ac-\u03ce\u03d0\u03d1\u03d5-\u03d7\u03d9\u03db\u03dd\u03df\u03e1\u03e3\u03e5\u03e7\u03e9\u03eb\u03ed\u03ef-\u03f3\u03f5\u03f8\u03fb\u03fc\u0430-\u045f\u0461\u0463\u0465\u0467\u0469\u046b\u046d\u046f\u0471\u0473\u0475\u0477\u0479\u047b\u047d\u047f\u0481\u048b\u048d\u048f\u0491\u0493\u0495\u0497\u0499\u049b\u049d\u049f\u04a1\u04a3\u04a5\u04a7\u04a9\u04ab\u04ad\u04af\u04b1\u04b3\u04b5\u04b7\u04b9\u04bb\u04bd\u04bf\u04c2\u04c4\u04c6\u04c8\u04ca\u04cc\u04ce\u04cf\u04d1\u04d3\u04d5\u04d7\u04d9\u04db\u04dd\u04df\u04e1\u04e3\u04e5\u04e7\u04e9\u04eb\u04ed\u04ef\u04f1\u04f3\u04f5\u04f7\u04f9\u04fb\u04fd\u04ff\u0501\u0503\u0505\u0507\u0509\u050b\u050d\u050f\u0511\u0513\u0515\u0517\u0519\u051b\u051d\u051f\u0521\u0523\u0525\u0527\u0529\u052b\u052d\u052f\u0561-\u0587\u13f8-\u13fd\u1d00-\u1d2b\u1d6b-\u1d77\u1d79-\u1d9a\u1e01\u1e03\u1e05\u1e07\u1e09\u1e0b\u1e0d\u1e0f\u1e11\u1e13\u1e15\u1e17\u1e19\u1e1b\u1e1d\u1e1f\u1e21\u1e23\u1e25\u1e27\u1e29\u1e2b\u1e2d\u1e2f\u1e31\u1e33\u1e35\u1e37\u1e39\u1e3b\u1e3d\u1e3f\u1e41\u1e43\u1e45\u1e47\u1e49\u1e4b\u1e4d\u1e4f\u1e51\u1e53\u1e55\u1e57\u1e59\u1e5b\u1e5d\u1e5f\u1e61\u1e63\u1e65\u1e67\u1e69\u1e6b\u1e6d\u1e6f\u1e71\u1e73\u1e75\u1e77\u1e79\u1e7b\u1e7d\u1e7f\u1e81\u1e83\u1e85\u1e87\u1e89\u1e8b\u1e8d\u1e8f\u1e91\u1e93\u1e95-\u1e9d\u1e9f\u1ea1\u1ea3\u1ea5\u1ea7\u1ea9\u1eab\u1ead\u1eaf\u1eb1\u1eb3\u1eb5\u1eb7\u1eb9\u1ebb\u1ebd\u1ebf\u1ec1\u1ec3\u1ec5\u1ec7\u1ec9\u1ecb\u1ecd\u1ecf\u1ed1\u1ed3\u1ed5\u1ed7\u1ed9\u1edb\u1edd\u1edf\u1ee1\u1ee3\u1ee5\u1ee7\u1ee9\u1eeb\u1eed\u1eef\u1ef1\u1ef3\u1ef5\u1ef7\u1ef9\u1efb\u1efd\u1eff-\u1f07\u1f10-\u1f15\u1f20-\u1f27\u1f30-\u1f37\u1f40-\u1f45\u1f50-\u1f57\u1f60-\u1f67\u1f70-\u1f7d\u1f80-\u1f87\u1f90-\u1f97\u1fa0-\u1fa7\u1fb0-\u1fb4\u1fb6\u1fb7\u1fbe\u1fc2-\u1fc4\u1fc6\u1fc7\u1fd0-\u1fd3\u1fd6\u1fd7\u1fe0-\u1fe7\u1ff2-\u1ff4\u1ff6\u1ff7\u210a\u210e\u210f\u2113\u212f\u2134\u2139\u213c\u213d\u2146-\u2149\u214e\u2184\u2c30-\u2c5e\u2c61\u2c65\u2c66\u2c68\u2c6a\u2c6c\u2c71\u2c73\u2c74\u2c76-\u2c7b\u2c81\u2c83\u2c85\u2c87\u2c89\u2c8b\u2c8d\u2c8f\u2c91\u2c93\u2c95\u2c97\u2c99\u2c9b\u2c9d\u2c9f\u2ca1\u2ca3\u2ca5\u2ca7\u2ca9\u2cab\u2cad\u2caf\u2cb1\u2cb3\u2cb5\u2cb7\u2cb9\u2cbb\u2cbd\u2cbf\u2cc1\u2cc3\u2cc5\u2cc7\u2cc9\u2ccb\u2ccd\u2ccf\u2cd1\u2cd3\u2cd5\u2cd7\u2cd9\u2cdb\u2cdd\u2cdf\u2ce1\u2ce3\u2ce4\u2cec\u2cee\u2cf3\u2d00-\u2d25\u2d27\u2d2d\ua641\ua643\ua645\ua647\ua649\ua64b\ua64d\ua64f\ua651\ua653\ua655\ua657\ua659\ua65b\ua65d\ua65f\ua661\ua663\ua665\ua667\ua669\ua66b\ua66d\ua681\ua683\ua685\ua687\ua689\ua68b\ua68d\ua68f\ua691\ua693\ua695\ua697\ua699\ua69b\ua723\ua725\ua727\ua729\ua72b\ua72d\ua72f-\ua731\ua733\ua735\ua737\ua739\ua73b\ua73d\ua73f\ua741\ua743\ua745\ua747\ua749\ua74b\ua74d\ua74f\ua751\ua753\ua755\ua757\ua759\ua75b\ua75d\ua75f\ua761\ua763\ua765\ua767\ua769\ua76b\ua76d\ua76f\ua771-\ua778\ua77a\ua77c\ua77f\ua781\ua783\ua785\ua787\ua78c\ua78e\ua791\ua793-\ua795\ua797\ua799\ua79b\ua79d\ua79f\ua7a1\ua7a3\ua7a5\ua7a7\ua7a9\ua7b5\ua7b7\ua7fa\uab30-\uab5a\uab60-\uab65\uab70-\uabbf\ufb00-\ufb06\ufb13-\ufb17\uff41-\uff5a",
astral:"\ud803[\udcc0-\udcf2]|\ud835[\udc1a-\udc33\udc4e-\udc54\udc56-\udc67\udc82-\udc9b\udcb6-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udccf\udcea-\udd03\udd1e-\udd37\udd52-\udd6b\udd86-\udd9f\uddba-\uddd3\uddee-\ude07\ude22-\ude3b\ude56-\ude6f\ude8a-\udea5\udec2-\udeda\udedc-\udee1\udefc-\udf14\udf16-\udf1b\udf36-\udf4e\udf50-\udf55\udf70-\udf88\udf8a-\udf8f\udfaa-\udfc2\udfc4-\udfc9\udfcb]|\ud801[\udc28-\udc4f]|\ud806[\udcc0-\udcdf]"},{name:"Lm",alias:"Modifier_Letter",bmp:"\u02b0-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0374\u037a\u0559\u0640\u06e5\u06e6\u07f4\u07f5\u07fa\u081a\u0824\u0828\u0971\u0e46\u0ec6\u10fc\u17d7\u1843\u1aa7\u1c78-\u1c7d\u1d2c-\u1d6a\u1d78\u1d9b-\u1dbf\u2071\u207f\u2090-\u209c\u2c7c\u2c7d\u2d6f\u2e2f\u3005\u3031-\u3035\u303b\u309d\u309e\u30fc-\u30fe\ua015\ua4f8-\ua4fd\ua60c\ua67f\ua69c\ua69d\ua717-\ua71f\ua770\ua788\ua7f8\ua7f9\ua9cf\ua9e6\uaa70\uaadd\uaaf3\uaaf4\uab5c-\uab5f\uff70\uff9e\uff9f",
astral:"\ud81a[\udf40-\udf43]|\ud81b[\udf93-\udf9f]"},{name:"Lo",alias:"Other_Letter",bmp:"\u00aa\u00ba\u01bb\u01c0-\u01c3\u0294\u05d0-\u05ea\u05f0-\u05f2\u0620-\u063f\u0641-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u0800-\u0815\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e45\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10d0-\u10fa\u10fd-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17dc\u1820-\u1842\u1844-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c77\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u2135-\u2138\u2d30-\u2d67\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3006\u303c\u3041-\u3096\u309f\u30a1-\u30fa\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua014\ua016-\ua48c\ua4d0-\ua4f7\ua500-\ua60b\ua610-\ua61f\ua62a\ua62b\ua66e\ua6a0-\ua6e5\ua78f\ua7f7\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9e0-\ua9e4\ua9e7-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa6f\uaa71-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb\uaadc\uaae0-\uaaea\uaaf2\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff66-\uff6f\uff71-\uff9d\uffa0-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
astral:"\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud83a[\udc00-\udcc4]|\ud803[\udc00-\udc48]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\ude80-\ude9c\udea0-\uded0\udf00-\udf1f\udf30-\udf40\udf42-\udf49\udf50-\udf75\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf]|\ud80d[\udc00-\udc2e]|\ud87e[\udc00-\ude1d]|\ud81b[\udf00-\udf44\udf50]|[\ud80c\ud840-\ud868\ud86a-\ud86c\ud86f-\ud872][\udc00-\udfff]|\ud805[\udc80-\udcaf\udcc4\udcc5\udcc7\udd80-\uddae\uddd8-\udddb\ude00-\ude2f\ude44\ude80-\udeaa\udf00-\udf19]|\ud806[\udcff\udec0-\udef8]|\ud809[\udc80-\udd43]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00\ude10-\ude13\ude15-\ude17\ude19-\ude33\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee4\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud804[\udc03-\udc37\udc83-\udcaf\udcd0-\udce8\udd03-\udd26\udd50-\udd72\udd76\udd83-\uddb2\uddc1-\uddc4\uddda\udddc\ude00-\ude11\ude13-\ude2b\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udede\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3d\udf50\udf5d-\udf61]|\ud808[\udc00-\udf99]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udf00-\udf2f\udf63-\udf77\udf7d-\udf8f]|\ud801[\udc50-\udc9d\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud811[\udc00-\ude46]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99]|\ud82c[\udc00\udc01]|\ud873[\udc00-\udea1]"},
{name:"Lt",alias:"Titlecase_Letter",bmp:"\u01c5\u01c8\u01cb\u01f2\u1f88-\u1f8f\u1f98-\u1f9f\u1fa8-\u1faf\u1fbc\u1fcc\u1ffc"},{name:"Lu",alias:"Uppercase_Letter",bmp:"A-Z\u00c0-\u00d6\u00d8-\u00de\u0100\u0102\u0104\u0106\u0108\u010a\u010c\u010e\u0110\u0112\u0114\u0116\u0118\u011a\u011c\u011e\u0120\u0122\u0124\u0126\u0128\u012a\u012c\u012e\u0130\u0132\u0134\u0136\u0139\u013b\u013d\u013f\u0141\u0143\u0145\u0147\u014a\u014c\u014e\u0150\u0152\u0154\u0156\u0158\u015a\u015c\u015e\u0160\u0162\u0164\u0166\u0168\u016a\u016c\u016e\u0170\u0172\u0174\u0176\u0178\u0179\u017b\u017d\u0181\u0182\u0184\u0186\u0187\u0189-\u018b\u018e-\u0191\u0193\u0194\u0196-\u0198\u019c\u019d\u019f\u01a0\u01a2\u01a4\u01a6\u01a7\u01a9\u01ac\u01ae\u01af\u01b1-\u01b3\u01b5\u01b7\u01b8\u01bc\u01c4\u01c7\u01ca\u01cd\u01cf\u01d1\u01d3\u01d5\u01d7\u01d9\u01db\u01de\u01e0\u01e2\u01e4\u01e6\u01e8\u01ea\u01ec\u01ee\u01f1\u01f4\u01f6-\u01f8\u01fa\u01fc\u01fe\u0200\u0202\u0204\u0206\u0208\u020a\u020c\u020e\u0210\u0212\u0214\u0216\u0218\u021a\u021c\u021e\u0220\u0222\u0224\u0226\u0228\u022a\u022c\u022e\u0230\u0232\u023a\u023b\u023d\u023e\u0241\u0243-\u0246\u0248\u024a\u024c\u024e\u0370\u0372\u0376\u037f\u0386\u0388-\u038a\u038c\u038e\u038f\u0391-\u03a1\u03a3-\u03ab\u03cf\u03d2-\u03d4\u03d8\u03da\u03dc\u03de\u03e0\u03e2\u03e4\u03e6\u03e8\u03ea\u03ec\u03ee\u03f4\u03f7\u03f9\u03fa\u03fd-\u042f\u0460\u0462\u0464\u0466\u0468\u046a\u046c\u046e\u0470\u0472\u0474\u0476\u0478\u047a\u047c\u047e\u0480\u048a\u048c\u048e\u0490\u0492\u0494\u0496\u0498\u049a\u049c\u049e\u04a0\u04a2\u04a4\u04a6\u04a8\u04aa\u04ac\u04ae\u04b0\u04b2\u04b4\u04b6\u04b8\u04ba\u04bc\u04be\u04c0\u04c1\u04c3\u04c5\u04c7\u04c9\u04cb\u04cd\u04d0\u04d2\u04d4\u04d6\u04d8\u04da\u04dc\u04de\u04e0\u04e2\u04e4\u04e6\u04e8\u04ea\u04ec\u04ee\u04f0\u04f2\u04f4\u04f6\u04f8\u04fa\u04fc\u04fe\u0500\u0502\u0504\u0506\u0508\u050a\u050c\u050e\u0510\u0512\u0514\u0516\u0518\u051a\u051c\u051e\u0520\u0522\u0524\u0526\u0528\u052a\u052c\u052e\u0531-\u0556\u10a0-\u10c5\u10c7\u10cd\u13a0-\u13f5\u1e00\u1e02\u1e04\u1e06\u1e08\u1e0a\u1e0c\u1e0e\u1e10\u1e12\u1e14\u1e16\u1e18\u1e1a\u1e1c\u1e1e\u1e20\u1e22\u1e24\u1e26\u1e28\u1e2a\u1e2c\u1e2e\u1e30\u1e32\u1e34\u1e36\u1e38\u1e3a\u1e3c\u1e3e\u1e40\u1e42\u1e44\u1e46\u1e48\u1e4a\u1e4c\u1e4e\u1e50\u1e52\u1e54\u1e56\u1e58\u1e5a\u1e5c\u1e5e\u1e60\u1e62\u1e64\u1e66\u1e68\u1e6a\u1e6c\u1e6e\u1e70\u1e72\u1e74\u1e76\u1e78\u1e7a\u1e7c\u1e7e\u1e80\u1e82\u1e84\u1e86\u1e88\u1e8a\u1e8c\u1e8e\u1e90\u1e92\u1e94\u1e9e\u1ea0\u1ea2\u1ea4\u1ea6\u1ea8\u1eaa\u1eac\u1eae\u1eb0\u1eb2\u1eb4\u1eb6\u1eb8\u1eba\u1ebc\u1ebe\u1ec0\u1ec2\u1ec4\u1ec6\u1ec8\u1eca\u1ecc\u1ece\u1ed0\u1ed2\u1ed4\u1ed6\u1ed8\u1eda\u1edc\u1ede\u1ee0\u1ee2\u1ee4\u1ee6\u1ee8\u1eea\u1eec\u1eee\u1ef0\u1ef2\u1ef4\u1ef6\u1ef8\u1efa\u1efc\u1efe\u1f08-\u1f0f\u1f18-\u1f1d\u1f28-\u1f2f\u1f38-\u1f3f\u1f48-\u1f4d\u1f59\u1f5b\u1f5d\u1f5f\u1f68-\u1f6f\u1fb8-\u1fbb\u1fc8-\u1fcb\u1fd8-\u1fdb\u1fe8-\u1fec\u1ff8-\u1ffb\u2102\u2107\u210b-\u210d\u2110-\u2112\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u2130-\u2133\u213e\u213f\u2145\u2183\u2c00-\u2c2e\u2c60\u2c62-\u2c64\u2c67\u2c69\u2c6b\u2c6d-\u2c70\u2c72\u2c75\u2c7e-\u2c80\u2c82\u2c84\u2c86\u2c88\u2c8a\u2c8c\u2c8e\u2c90\u2c92\u2c94\u2c96\u2c98\u2c9a\u2c9c\u2c9e\u2ca0\u2ca2\u2ca4\u2ca6\u2ca8\u2caa\u2cac\u2cae\u2cb0\u2cb2\u2cb4\u2cb6\u2cb8\u2cba\u2cbc\u2cbe\u2cc0\u2cc2\u2cc4\u2cc6\u2cc8\u2cca\u2ccc\u2cce\u2cd0\u2cd2\u2cd4\u2cd6\u2cd8\u2cda\u2cdc\u2cde\u2ce0\u2ce2\u2ceb\u2ced\u2cf2\ua640\ua642\ua644\ua646\ua648\ua64a\ua64c\ua64e\ua650\ua652\ua654\ua656\ua658\ua65a\ua65c\ua65e\ua660\ua662\ua664\ua666\ua668\ua66a\ua66c\ua680\ua682\ua684\ua686\ua688\ua68a\ua68c\ua68e\ua690\ua692\ua694\ua696\ua698\ua69a\ua722\ua724\ua726\ua728\ua72a\ua72c\ua72e\ua732\ua734\ua736\ua738\ua73a\ua73c\ua73e\ua740\ua742\ua744\ua746\ua748\ua74a\ua74c\ua74e\ua750\ua752\ua754\ua756\ua758\ua75a\ua75c\ua75e\ua760\ua762\ua764\ua766\ua768\ua76a\ua76c\ua76e\ua779\ua77b\ua77d\ua77e\ua780\ua782\ua784\ua786\ua78b\ua78d\ua790\ua792\ua796\ua798\ua79a\ua79c\ua79e\ua7a0\ua7a2\ua7a4\ua7a6\ua7a8\ua7aa-\ua7ad\ua7b0-\ua7b4\ua7b6\uff21-\uff3a",
astral:"\ud806[\udca0-\udcbf]|\ud803[\udc80-\udcb2]|\ud801[\udc00-\udc27]|\ud835[\udc00-\udc19\udc34-\udc4d\udc68-\udc81\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb5\udcd0-\udce9\udd04\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd38\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd6c-\udd85\udda0-\uddb9\uddd4-\udded\ude08-\ude21\ude3c-\ude55\ude70-\ude89\udea8-\udec0\udee2-\udefa\udf1c-\udf34\udf56-\udf6e\udf90-\udfa8\udfca]"},{name:"M",alias:"Mark",bmp:"\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1ab0-\u1abe\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf8\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9e5\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f",
astral:"\ud805[\udcb0-\udcc3\uddaf-\uddb5\uddb8-\uddc0\udddc\udddd\ude30-\ude40\udeab-\udeb7\udf1d-\udf2b]|\ud834[\udd65-\udd69\udd6d-\udd72\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud804[\udc00-\udc02\udc38-\udc46\udc7f-\udc82\udcb0-\udcba\udd00-\udd02\udd27-\udd34\udd73\udd80-\udd82\uddb3-\uddc0\uddca-\uddcc\ude2c-\ude37\udedf-\udeea\udf00-\udf03\udf3c\udf3e-\udf44\udf47\udf48\udf4b-\udf4d\udf57\udf62\udf63\udf66-\udf6c\udf70-\udf74]|\ud81b[\udf51-\udf7e\udf8f-\udf92]|\ud81a[\udef0-\udef4\udf30-\udf36]|\ud82f[\udc9d\udc9e]|\ud800[\uddfd\udee0\udf76-\udf7a]|\ud836[\ude00-\ude36\ude3b-\ude6c\ude75\ude84\ude9b-\ude9f\udea1-\udeaf]|\ud802[\ude01-\ude03\ude05\ude06\ude0c-\ude0f\ude38-\ude3a\ude3f\udee5\udee6]|\ud83a[\udcd0-\udcd6]|\udb40[\udd00-\uddef]"},
{name:"Mc",alias:"Spacing_Mark",bmp:"\u0903\u093b\u093e-\u0940\u0949-\u094c\u094e\u094f\u0982\u0983\u09be-\u09c0\u09c7\u09c8\u09cb\u09cc\u09d7\u0a03\u0a3e-\u0a40\u0a83\u0abe-\u0ac0\u0ac9\u0acb\u0acc\u0b02\u0b03\u0b3e\u0b40\u0b47\u0b48\u0b4b\u0b4c\u0b57\u0bbe\u0bbf\u0bc1\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcc\u0bd7\u0c01-\u0c03\u0c41-\u0c44\u0c82\u0c83\u0cbe\u0cc0-\u0cc4\u0cc7\u0cc8\u0cca\u0ccb\u0cd5\u0cd6\u0d02\u0d03\u0d3e-\u0d40\u0d46-\u0d48\u0d4a-\u0d4c\u0d57\u0d82\u0d83\u0dcf-\u0dd1\u0dd8-\u0ddf\u0df2\u0df3\u0f3e\u0f3f\u0f7f\u102b\u102c\u1031\u1038\u103b\u103c\u1056\u1057\u1062-\u1064\u1067-\u106d\u1083\u1084\u1087-\u108c\u108f\u109a-\u109c\u17b6\u17be-\u17c5\u17c7\u17c8\u1923-\u1926\u1929-\u192b\u1930\u1931\u1933-\u1938\u1a19\u1a1a\u1a55\u1a57\u1a61\u1a63\u1a64\u1a6d-\u1a72\u1b04\u1b35\u1b3b\u1b3d-\u1b41\u1b43\u1b44\u1b82\u1ba1\u1ba6\u1ba7\u1baa\u1be7\u1bea-\u1bec\u1bee\u1bf2\u1bf3\u1c24-\u1c2b\u1c34\u1c35\u1ce1\u1cf2\u1cf3\u302e\u302f\ua823\ua824\ua827\ua880\ua881\ua8b4-\ua8c3\ua952\ua953\ua983\ua9b4\ua9b5\ua9ba\ua9bb\ua9bd-\ua9c0\uaa2f\uaa30\uaa33\uaa34\uaa4d\uaa7b\uaa7d\uaaeb\uaaee\uaaef\uaaf5\uabe3\uabe4\uabe6\uabe7\uabe9\uabea\uabec",
astral:"\ud834[\udd65\udd66\udd6d-\udd72]|\ud804[\udc00\udc02\udc82\udcb0-\udcb2\udcb7\udcb8\udd2c\udd82\uddb3-\uddb5\uddbf\uddc0\ude2c-\ude2e\ude32\ude33\ude35\udee0-\udee2\udf02\udf03\udf3e\udf3f\udf41-\udf44\udf47\udf48\udf4b-\udf4d\udf57\udf62\udf63]|\ud805[\udcb0-\udcb2\udcb9\udcbb-\udcbe\udcc1\uddaf-\uddb1\uddb8-\uddbb\uddbe\ude30-\ude32\ude3b\ude3c\ude3e\udeac\udeae\udeaf\udeb6\udf20\udf21\udf26]|\ud81b[\udf51-\udf7e]"},{name:"Me",alias:"Enclosing_Mark",bmp:"\u0488\u0489\u1abe\u20dd-\u20e0\u20e2-\u20e4\ua670-\ua672"},
{name:"Mn",alias:"Nonspacing_Mark",bmp:"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962\u0963\u0981\u09bc\u09c1-\u09c4\u09cd\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b62\u0b63\u0b82\u0bc0\u0bcd\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c81\u0cbc\u0cbf\u0cc6\u0ccc\u0ccd\u0ce2\u0ce3\u0d01\u0d41-\u0d44\u0d4d\u0d62\u0d63\u0dca\u0dd2-\u0dd4\u0dd6\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1bab-\u1bad\u1be6\u1be8\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u3099\u309a\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaec\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f",
astral:"\ud805[\udcb3-\udcb8\udcba\udcbf\udcc0\udcc2\udcc3\uddb2-\uddb5\uddbc\uddbd\uddbf\uddc0\udddc\udddd\ude33-\ude3a\ude3d\ude3f\ude40\udeab\udead\udeb0-\udeb5\udeb7\udf1d-\udf1f\udf22-\udf25\udf27-\udf2b]|\ud834[\udd67-\udd69\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud81a[\udef0-\udef4\udf30-\udf36]|\ud81b[\udf8f-\udf92]|\ud82f[\udc9d\udc9e]|\ud800[\uddfd\udee0\udf76-\udf7a]|\ud836[\ude00-\ude36\ude3b-\ude6c\ude75\ude84\ude9b-\ude9f\udea1-\udeaf]|\ud802[\ude01-\ude03\ude05\ude06\ude0c-\ude0f\ude38-\ude3a\ude3f\udee5\udee6]|\ud804[\udc01\udc38-\udc46\udc7f-\udc81\udcb3-\udcb6\udcb9\udcba\udd00-\udd02\udd27-\udd2b\udd2d-\udd34\udd73\udd80\udd81\uddb6-\uddbe\uddca-\uddcc\ude2f-\ude31\ude34\ude36\ude37\udedf\udee3-\udeea\udf00\udf01\udf3c\udf40\udf66-\udf6c\udf70-\udf74]|\ud83a[\udcd0-\udcd6]|\udb40[\udd00-\uddef]"},
{name:"N",alias:"Number",bmp:"0-9\u00b2\u00b3\u00b9\u00bc-\u00be\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u09f4-\u09f9\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0b72-\u0b77\u0be6-\u0bf2\u0c66-\u0c6f\u0c78-\u0c7e\u0ce6-\u0cef\u0d66-\u0d75\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f33\u1040-\u1049\u1090-\u1099\u1369-\u137c\u16ee-\u16f0\u17e0-\u17e9\u17f0-\u17f9\u1810-\u1819\u1946-\u194f\u19d0-\u19da\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249b\u24ea-\u24ff\u2776-\u2793\u2cfd\u3007\u3021-\u3029\u3038-\u303a\u3192-\u3195\u3220-\u3229\u3248-\u324f\u3251-\u325f\u3280-\u3289\u32b1-\u32bf\ua620-\ua629\ua6e6-\ua6ef\ua830-\ua835\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19",
astral:"\ud800[\udd07-\udd33\udd40-\udd78\udd8a\udd8b\udee1-\udefb\udf20-\udf23\udf41\udf4a\udfd1-\udfd5]|\ud801[\udca0-\udca9]|\ud803[\udcfa-\udcff\ude60-\ude7e]|\ud835[\udfce-\udfff]|\ud83a[\udcc7-\udccf]|\ud81a[\ude60-\ude69\udf50-\udf59\udf5b-\udf61]|\ud806[\udce0-\udcf2]|\ud804[\udc52-\udc6f\udcf0-\udcf9\udd36-\udd3f\uddd0-\uddd9\udde1-\uddf4\udef0-\udef9]|\ud834[\udf60-\udf71]|\ud83c[\udd00-\udd0c]|\ud809[\udc00-\udc6e]|\ud802[\udc58-\udc5f\udc79-\udc7f\udca7-\udcaf\udcfb-\udcff\udd16-\udd1b\uddbc\uddbd\uddc0-\uddcf\uddd2-\uddff\ude40-\ude47\ude7d\ude7e\ude9d-\ude9f\udeeb-\udeef\udf58-\udf5f\udf78-\udf7f\udfa9-\udfaf]|\ud805[\udcd0-\udcd9\ude50-\ude59\udec0-\udec9\udf30-\udf3b]"},
{name:"Nd",alias:"Decimal_Number",bmp:"0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19",
astral:"\ud801[\udca0-\udca9]|\ud835[\udfce-\udfff]|\ud805[\udcd0-\udcd9\ude50-\ude59\udec0-\udec9\udf30-\udf39]|\ud806[\udce0-\udce9]|\ud804[\udc66-\udc6f\udcf0-\udcf9\udd36-\udd3f\uddd0-\uddd9\udef0-\udef9]|\ud81a[\ude60-\ude69\udf50-\udf59]"},{name:"Nl",alias:"Letter_Number",bmp:"\u16ee-\u16f0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303a\ua6e6-\ua6ef",astral:"\ud809[\udc00-\udc6e]|\ud800[\udd40-\udd74\udf41\udf4a\udfd1-\udfd5]"},{name:"No",alias:"Other_Number",bmp:"\u00b2\u00b3\u00b9\u00bc-\u00be\u09f4-\u09f9\u0b72-\u0b77\u0bf0-\u0bf2\u0c78-\u0c7e\u0d70-\u0d75\u0f2a-\u0f33\u1369-\u137c\u17f0-\u17f9\u19da\u2070\u2074-\u2079\u2080-\u2089\u2150-\u215f\u2189\u2460-\u249b\u24ea-\u24ff\u2776-\u2793\u2cfd\u3192-\u3195\u3220-\u3229\u3248-\u324f\u3251-\u325f\u3280-\u3289\u32b1-\u32bf\ua830-\ua835",
astral:"\ud804[\udc52-\udc65\udde1-\uddf4]|\ud803[\udcfa-\udcff\ude60-\ude7e]|\ud83c[\udd00-\udd0c]|\ud806[\udcea-\udcf2]|\ud83a[\udcc7-\udccf]|\ud802[\udc58-\udc5f\udc79-\udc7f\udca7-\udcaf\udcfb-\udcff\udd16-\udd1b\uddbc\uddbd\uddc0-\uddcf\uddd2-\uddff\ude40-\ude47\ude7d\ude7e\ude9d-\ude9f\udeeb-\udeef\udf58-\udf5f\udf78-\udf7f\udfa9-\udfaf]|\ud805[\udf3a\udf3b]|\ud81a[\udf5b-\udf61]|\ud834[\udf60-\udf71]|\ud800[\udd07-\udd33\udd75-\udd78\udd8a\udd8b\udee1-\udefb\udf20-\udf23]"},{name:"P",alias:"Punctuation",
bmp:"!-#%-\\x2A,-/:;\\x3F@\\x5B-\\x5D_\\x7B}\u00a1\u00a7\u00ab\u00b6\u00b7\u00bb\u00bf\u037e\u0387\u055a-\u055f\u0589\u058a\u05be\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c\u060d\u061b\u061e\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0830-\u083e\u085e\u0964\u0965\u0970\u0af0\u0df4\u0e4f\u0e5a\u0e5b\u0f04-\u0f12\u0f14\u0f3a-\u0f3d\u0f85\u0fd0-\u0fd4\u0fd9\u0fda\u104a-\u104f\u10fb\u1360-\u1368\u1400\u166d\u166e\u169b\u169c\u16eb-\u16ed\u1735\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u180a\u1944\u1945\u1a1e\u1a1f\u1aa0-\u1aa6\u1aa8-\u1aad\u1b5a-\u1b60\u1bfc-\u1bff\u1c3b-\u1c3f\u1c7e\u1c7f\u1cc0-\u1cc7\u1cd3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205e\u207d\u207e\u208d\u208e\u2308-\u230b\u2329\u232a\u2768-\u2775\u27c5\u27c6\u27e6-\u27ef\u2983-\u2998\u29d8-\u29db\u29fc\u29fd\u2cf9-\u2cfc\u2cfe\u2cff\u2d70\u2e00-\u2e2e\u2e30-\u2e42\u3001-\u3003\u3008-\u3011\u3014-\u301f\u3030\u303d\u30a0\u30fb\ua4fe\ua4ff\ua60d-\ua60f\ua673\ua67e\ua6f2-\ua6f7\ua874-\ua877\ua8ce\ua8cf\ua8f8-\ua8fa\ua8fc\ua92e\ua92f\ua95f\ua9c1-\ua9cd\ua9de\ua9df\uaa5c-\uaa5f\uaade\uaadf\uaaf0\uaaf1\uabeb\ufd3e\ufd3f\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe61\ufe63\ufe68\ufe6a\ufe6b\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a\uff1b\uff1f\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65",
astral:"\ud802[\udc57\udd1f\udd3f\ude50-\ude58\ude7f\udef0-\udef6\udf39-\udf3f\udf99-\udf9c]|\ud809[\udc70-\udc74]|\ud805[\udcc6\uddc1-\uddd7\ude41-\ude43\udf3c-\udf3e]|\ud836[\ude87-\ude8b]|\ud801\udd6f|\ud82f\udc9f|\ud804[\udc47-\udc4d\udcbb\udcbc\udcbe-\udcc1\udd40-\udd43\udd74\udd75\uddc5-\uddc9\uddcd\udddb\udddd-\udddf\ude38-\ude3d\udea9]|\ud800[\udd00-\udd02\udf9f\udfd0]|\ud81a[\ude6e\ude6f\udef5\udf37-\udf3b\udf44]"},{name:"Pc",alias:"Connector_Punctuation",bmp:"_\u203f\u2040\u2054\ufe33\ufe34\ufe4d-\ufe4f\uff3f"},
{name:"Pd",alias:"Dash_Punctuation",bmp:"\\x2D\u058a\u05be\u1400\u1806\u2010-\u2015\u2e17\u2e1a\u2e3a\u2e3b\u2e40\u301c\u3030\u30a0\ufe31\ufe32\ufe58\ufe63\uff0d"},{name:"Pe",alias:"Close_Punctuation",bmp:"\\x29\\x5D}\u0f3b\u0f3d\u169c\u2046\u207e\u208e\u2309\u230b\u232a\u2769\u276b\u276d\u276f\u2771\u2773\u2775\u27c6\u27e7\u27e9\u27eb\u27ed\u27ef\u2984\u2986\u2988\u298a\u298c\u298e\u2990\u2992\u2994\u2996\u2998\u29d9\u29db\u29fd\u2e23\u2e25\u2e27\u2e29\u3009\u300b\u300d\u300f\u3011\u3015\u3017\u3019\u301b\u301e\u301f\ufd3e\ufe18\ufe36\ufe38\ufe3a\ufe3c\ufe3e\ufe40\ufe42\ufe44\ufe48\ufe5a\ufe5c\ufe5e\uff09\uff3d\uff5d\uff60\uff63"},
{name:"Pf",alias:"Final_Punctuation",bmp:"\u00bb\u2019\u201d\u203a\u2e03\u2e05\u2e0a\u2e0d\u2e1d\u2e21"},{name:"Pi",alias:"Initial_Punctuation",bmp:"\u00ab\u2018\u201b\u201c\u201f\u2039\u2e02\u2e04\u2e09\u2e0c\u2e1c\u2e20"},{name:"Po",alias:"Other_Punctuation",bmp:"!-#%-'\\x2A,\\x2E/:;\\x3F@\\x5C\u00a1\u00a7\u00b6\u00b7\u00bf\u037e\u0387\u055a-\u055f\u0589\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c\u060d\u061b\u061e\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0830-\u083e\u085e\u0964\u0965\u0970\u0af0\u0df4\u0e4f\u0e5a\u0e5b\u0f04-\u0f12\u0f14\u0f85\u0fd0-\u0fd4\u0fd9\u0fda\u104a-\u104f\u10fb\u1360-\u1368\u166d\u166e\u16eb-\u16ed\u1735\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u1805\u1807-\u180a\u1944\u1945\u1a1e\u1a1f\u1aa0-\u1aa6\u1aa8-\u1aad\u1b5a-\u1b60\u1bfc-\u1bff\u1c3b-\u1c3f\u1c7e\u1c7f\u1cc0-\u1cc7\u1cd3\u2016\u2017\u2020-\u2027\u2030-\u2038\u203b-\u203e\u2041-\u2043\u2047-\u2051\u2053\u2055-\u205e\u2cf9-\u2cfc\u2cfe\u2cff\u2d70\u2e00\u2e01\u2e06-\u2e08\u2e0b\u2e0e-\u2e16\u2e18\u2e19\u2e1b\u2e1e\u2e1f\u2e2a-\u2e2e\u2e30-\u2e39\u2e3c-\u2e3f\u2e41\u3001-\u3003\u303d\u30fb\ua4fe\ua4ff\ua60d-\ua60f\ua673\ua67e\ua6f2-\ua6f7\ua874-\ua877\ua8ce\ua8cf\ua8f8-\ua8fa\ua8fc\ua92e\ua92f\ua95f\ua9c1-\ua9cd\ua9de\ua9df\uaa5c-\uaa5f\uaade\uaadf\uaaf0\uaaf1\uabeb\ufe10-\ufe16\ufe19\ufe30\ufe45\ufe46\ufe49-\ufe4c\ufe50-\ufe52\ufe54-\ufe57\ufe5f-\ufe61\ufe68\ufe6a\ufe6b\uff01-\uff03\uff05-\uff07\uff0a\uff0c\uff0e\uff0f\uff1a\uff1b\uff1f\uff20\uff3c\uff61\uff64\uff65",
astral:"\ud802[\udc57\udd1f\udd3f\ude50-\ude58\ude7f\udef0-\udef6\udf39-\udf3f\udf99-\udf9c]|\ud809[\udc70-\udc74]|\ud805[\udcc6\uddc1-\uddd7\ude41-\ude43\udf3c-\udf3e]|\ud836[\ude87-\ude8b]|\ud801\udd6f|\ud82f\udc9f|\ud804[\udc47-\udc4d\udcbb\udcbc\udcbe-\udcc1\udd40-\udd43\udd74\udd75\uddc5-\uddc9\uddcd\udddb\udddd-\udddf\ude38-\ude3d\udea9]|\ud800[\udd00-\udd02\udf9f\udfd0]|\ud81a[\ude6e\ude6f\udef5\udf37-\udf3b\udf44]"},{name:"Ps",alias:"Open_Punctuation",bmp:"\\x28\\x5B\\x7B\u0f3a\u0f3c\u169b\u201a\u201e\u2045\u207d\u208d\u2308\u230a\u2329\u2768\u276a\u276c\u276e\u2770\u2772\u2774\u27c5\u27e6\u27e8\u27ea\u27ec\u27ee\u2983\u2985\u2987\u2989\u298b\u298d\u298f\u2991\u2993\u2995\u2997\u29d8\u29da\u29fc\u2e22\u2e24\u2e26\u2e28\u2e42\u3008\u300a\u300c\u300e\u3010\u3014\u3016\u3018\u301a\u301d\ufd3f\ufe17\ufe35\ufe37\ufe39\ufe3b\ufe3d\ufe3f\ufe41\ufe43\ufe47\ufe59\ufe5b\ufe5d\uff08\uff3b\uff5b\uff5f\uff62"},
{name:"S",alias:"Symbol",bmp:"\\x24\\x2B\x3c-\x3e\\x5E`\\x7C~\u00a2-\u00a6\u00a8\u00a9\u00ac\u00ae-\u00b1\u00b4\u00b8\u00d7\u00f7\u02c2-\u02c5\u02d2-\u02df\u02e5-\u02eb\u02ed\u02ef-\u02ff\u0375\u0384\u0385\u03f6\u0482\u058d-\u058f\u0606-\u0608\u060b\u060e\u060f\u06de\u06e9\u06fd\u06fe\u07f6\u09f2\u09f3\u09fa\u09fb\u0af1\u0b70\u0bf3-\u0bfa\u0c7f\u0d79\u0e3f\u0f01-\u0f03\u0f13\u0f15-\u0f17\u0f1a-\u0f1f\u0f34\u0f36\u0f38\u0fbe-\u0fc5\u0fc7-\u0fcc\u0fce\u0fcf\u0fd5-\u0fd8\u109e\u109f\u1390-\u1399\u17db\u1940\u19de-\u19ff\u1b61-\u1b6a\u1b74-\u1b7c\u1fbd\u1fbf-\u1fc1\u1fcd-\u1fcf\u1fdd-\u1fdf\u1fed-\u1fef\u1ffd\u1ffe\u2044\u2052\u207a-\u207c\u208a-\u208c\u20a0-\u20be\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211e-\u2123\u2125\u2127\u2129\u212e\u213a\u213b\u2140-\u2144\u214a-\u214d\u214f\u218a\u218b\u2190-\u2307\u230c-\u2328\u232b-\u23fa\u2400-\u2426\u2440-\u244a\u249c-\u24e9\u2500-\u2767\u2794-\u27c4\u27c7-\u27e5\u27f0-\u2982\u2999-\u29d7\u29dc-\u29fb\u29fe-\u2b73\u2b76-\u2b95\u2b98-\u2bb9\u2bbd-\u2bc8\u2bca-\u2bd1\u2bec-\u2bef\u2ce5-\u2cea\u2e80-\u2e99\u2e9b-\u2ef3\u2f00-\u2fd5\u2ff0-\u2ffb\u3004\u3012\u3013\u3020\u3036\u3037\u303e\u303f\u309b\u309c\u3190\u3191\u3196-\u319f\u31c0-\u31e3\u3200-\u321e\u322a-\u3247\u3250\u3260-\u327f\u328a-\u32b0\u32c0-\u32fe\u3300-\u33ff\u4dc0-\u4dff\ua490-\ua4c6\ua700-\ua716\ua720\ua721\ua789\ua78a\ua828-\ua82b\ua836-\ua839\uaa77-\uaa79\uab5b\ufb29\ufbb2-\ufbc1\ufdfc\ufdfd\ufe62\ufe64-\ufe66\ufe69\uff04\uff0b\uff1c-\uff1e\uff3e\uff40\uff5c\uff5e\uffe0-\uffe6\uffe8-\uffee\ufffc\ufffd",
astral:"\ud83e[\udc00-\udc0b\udc10-\udc47\udc50-\udc59\udc60-\udc87\udc90-\udcad\udd10-\udd18\udd80-\udd84\uddc0]|\ud83c[\udc00-\udc2b\udc30-\udc93\udca0-\udcae\udcb1-\udcbf\udcc1-\udccf\udcd1-\udcf5\udd10-\udd2e\udd30-\udd6b\udd70-\udd9a\udde6-\ude02\ude10-\ude3a\ude40-\ude48\ude50\ude51\udf00-\udfff]|\ud83d[\udc00-\udd79\udd7b-\udda3\udda5-\uded0\udee0-\udeec\udef0-\udef3\udf00-\udf73\udf80-\udfd4]|\ud835[\udec1\udedb\udefb\udf15\udf35\udf4f\udf6f\udf89\udfa9\udfc3]|\ud800[\udd37-\udd3f\udd79-\udd89\udd8c\udd90-\udd9b\udda0\uddd0-\uddfc]|\ud82f\udc9c|\ud805\udf3f|\ud802[\udc77\udc78\udec8]|\ud81a[\udf3c-\udf3f\udf45]|\ud836[\udc00-\uddff\ude37-\ude3a\ude6d-\ude74\ude76-\ude83\ude85\ude86]|\ud834[\udc00-\udcf5\udd00-\udd26\udd29-\udd64\udd6a-\udd6c\udd83\udd84\udd8c-\udda9\uddae-\udde8\ude00-\ude41\ude45\udf00-\udf56]|\ud83b[\udef0\udef1]"},
{name:"Sc",alias:"Currency_Symbol",bmp:"\\x24\u00a2-\u00a5\u058f\u060b\u09f2\u09f3\u09fb\u0af1\u0bf9\u0e3f\u17db\u20a0-\u20be\ua838\ufdfc\ufe69\uff04\uffe0\uffe1\uffe5\uffe6"},{name:"Sk",alias:"Modifier_Symbol",bmp:"\\x5E`\u00a8\u00af\u00b4\u00b8\u02c2-\u02c5\u02d2-\u02df\u02e5-\u02eb\u02ed\u02ef-\u02ff\u0375\u0384\u0385\u1fbd\u1fbf-\u1fc1\u1fcd-\u1fcf\u1fdd-\u1fdf\u1fed-\u1fef\u1ffd\u1ffe\u309b\u309c\ua700-\ua716\ua720\ua721\ua789\ua78a\uab5b\ufbb2-\ufbc1\uff3e\uff40\uffe3",astral:"\ud83c[\udffb-\udfff]"},
{name:"Sm",alias:"Math_Symbol",bmp:"\\x2B\x3c-\x3e\\x7C~\u00ac\u00b1\u00d7\u00f7\u03f6\u0606-\u0608\u2044\u2052\u207a-\u207c\u208a-\u208c\u2118\u2140-\u2144\u214b\u2190-\u2194\u219a\u219b\u21a0\u21a3\u21a6\u21ae\u21ce\u21cf\u21d2\u21d4\u21f4-\u22ff\u2320\u2321\u237c\u239b-\u23b3\u23dc-\u23e1\u25b7\u25c1\u25f8-\u25ff\u266f\u27c0-\u27c4\u27c7-\u27e5\u27f0-\u27ff\u2900-\u2982\u2999-\u29d7\u29dc-\u29fb\u29fe-\u2aff\u2b30-\u2b44\u2b47-\u2b4c\ufb29\ufe62\ufe64-\ufe66\uff0b\uff1c-\uff1e\uff5c\uff5e\uffe2\uffe9-\uffec",
astral:"\ud83b[\udef0\udef1]|\ud835[\udec1\udedb\udefb\udf15\udf35\udf4f\udf6f\udf89\udfa9\udfc3]"},{name:"So",alias:"Other_Symbol",bmp:"\u00a6\u00a9\u00ae\u00b0\u0482\u058d\u058e\u060e\u060f\u06de\u06e9\u06fd\u06fe\u07f6\u09fa\u0b70\u0bf3-\u0bf8\u0bfa\u0c7f\u0d79\u0f01-\u0f03\u0f13\u0f15-\u0f17\u0f1a-\u0f1f\u0f34\u0f36\u0f38\u0fbe-\u0fc5\u0fc7-\u0fcc\u0fce\u0fcf\u0fd5-\u0fd8\u109e\u109f\u1390-\u1399\u1940\u19de-\u19ff\u1b61-\u1b6a\u1b74-\u1b7c\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116\u2117\u211e-\u2123\u2125\u2127\u2129\u212e\u213a\u213b\u214a\u214c\u214d\u214f\u218a\u218b\u2195-\u2199\u219c-\u219f\u21a1\u21a2\u21a4\u21a5\u21a7-\u21ad\u21af-\u21cd\u21d0\u21d1\u21d3\u21d5-\u21f3\u2300-\u2307\u230c-\u231f\u2322-\u2328\u232b-\u237b\u237d-\u239a\u23b4-\u23db\u23e2-\u23fa\u2400-\u2426\u2440-\u244a\u249c-\u24e9\u2500-\u25b6\u25b8-\u25c0\u25c2-\u25f7\u2600-\u266e\u2670-\u2767\u2794-\u27bf\u2800-\u28ff\u2b00-\u2b2f\u2b45\u2b46\u2b4d-\u2b73\u2b76-\u2b95\u2b98-\u2bb9\u2bbd-\u2bc8\u2bca-\u2bd1\u2bec-\u2bef\u2ce5-\u2cea\u2e80-\u2e99\u2e9b-\u2ef3\u2f00-\u2fd5\u2ff0-\u2ffb\u3004\u3012\u3013\u3020\u3036\u3037\u303e\u303f\u3190\u3191\u3196-\u319f\u31c0-\u31e3\u3200-\u321e\u322a-\u3247\u3250\u3260-\u327f\u328a-\u32b0\u32c0-\u32fe\u3300-\u33ff\u4dc0-\u4dff\ua490-\ua4c6\ua828-\ua82b\ua836\ua837\ua839\uaa77-\uaa79\ufdfd\uffe4\uffe8\uffed\uffee\ufffc\ufffd",
astral:"\ud83e[\udc00-\udc0b\udc10-\udc47\udc50-\udc59\udc60-\udc87\udc90-\udcad\udd10-\udd18\udd80-\udd84\uddc0]|\ud83d[\udc00-\udd79\udd7b-\udda3\udda5-\uded0\udee0-\udeec\udef0-\udef3\udf00-\udf73\udf80-\udfd4]|\ud83c[\udc00-\udc2b\udc30-\udc93\udca0-\udcae\udcb1-\udcbf\udcc1-\udccf\udcd1-\udcf5\udd10-\udd2e\udd30-\udd6b\udd70-\udd9a\udde6-\ude02\ude10-\ude3a\ude40-\ude48\ude50\ude51\udf00-\udffa]|\ud800[\udd37-\udd3f\udd79-\udd89\udd8c\udd90-\udd9b\udda0\uddd0-\uddfc]|\ud82f\udc9c|\ud805\udf3f|\ud802[\udc77\udc78\udec8]|\ud81a[\udf3c-\udf3f\udf45]|\ud836[\udc00-\uddff\ude37-\ude3a\ude6d-\ude74\ude76-\ude83\ude85\ude86]|\ud834[\udc00-\udcf5\udd00-\udd26\udd29-\udd64\udd6a-\udd6c\udd83\udd84\udd8c-\udda9\uddae-\udde8\ude00-\ude41\ude45\udf00-\udf56]"},
{name:"Z",alias:"Separator",bmp:" \u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000"},{name:"Zl",alias:"Line_Separator",bmp:"\u2028"},{name:"Zp",alias:"Paragraph_Separator",bmp:"\u2029"},{name:"Zs",alias:"Space_Separator",bmp:" \u00a0\u1680\u2000-\u200a\u202f\u205f\u3000"}])})(XRegExp);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:rangy-inputs', location = '/static/lib/rangy-inputs.js' */
/*
 Rangy Text Inputs, a cross-browser textarea and text input library plug-in for jQuery.

 Part of Rangy, a cross-browser JavaScript range and selection library
 http://code.google.com/p/rangy/

 Depends on jQuery 1.0 or later.

 Copyright 2010, Tim Down
 Licensed under the MIT license.
 Version: 0.1.205
 Build date: 5 November 2010

 Modified by Atlassian
*/
(function(p){function q(d,e){var g=typeof d[e];return"function"===g||!("object"!=g||!d[e])||"unknown"==g}function r(d,e){return!("object"!=typeof d[e]||!d[e])}function t(d,e,g){0>e&&(e+=d.value.length);"undefined"==typeof g&&(g=e);0>g&&(g+=d.value.length);return{start:e,end:g}}function l(){return r(document,"body")?document.body:document.getElementsByTagName("body")[0]}var k,h,u,m,v,w,x,y,n;p(document).ready(function(){function d(b,a){return function(){var c=this.jquery?this[0]:this,f=c.nodeName.toLowerCase();
if(1==c.nodeType&&("textarea"==f||"input"==f&&"text"==c.type)&&(c=[c].concat(Array.prototype.slice.call(arguments)),c=b.apply(this,c),!a))return c;if(a)return this}}var e=document.createElement("textarea");l().appendChild(e);if("undefined"!=typeof e.selectionStart&&"undefined"!=typeof e.selectionEnd)k=function(b){var a=b.selectionStart,c=b.selectionEnd;return{start:a,end:c,length:c-a,text:b.value.slice(a,c)}},h=function(b,a,c){a=t(b,a,c);b.selectionStart=a.start;b.selectionEnd=a.end},n=function(b,
a){a?b.selectionEnd=b.selectionStart:b.selectionStart=b.selectionEnd};else if(q(e,"createTextRange")&&r(document,"selection")&&q(document.selection,"createRange")){k=function(b){var a=0,c=0,f;if((f=document.selection.createRange())&&f.parentElement()==b){var d=b.value.replace(/\r\n/g,"\n");var e=d.length;c=b.createTextRange();c.moveToBookmark(f.getBookmark());f=b.createTextRange();f.collapse(!1);-1<c.compareEndPoints("StartToEnd",f)?a=c=e:(a=-c.moveStart("character",-e),a+=d.slice(0,a).split("\n").length-
1,-1<c.compareEndPoints("EndToEnd",f)?c=e:(c=-c.moveEnd("character",-e),c+=d.slice(0,c).split("\n").length-1))}return{start:a,end:c,length:c-a,text:b.value.slice(a,c)}};var g=function(b,a){return a-(b.value.slice(0,a).split("\r\n").length-1)};h=function(b,a,c){a=t(b,a,c);c=b.createTextRange();var f=g(b,a.start);c.collapse(!0);a.start==a.end?c.move("character",f):(c.moveEnd("character",g(b,a.end)),c.moveStart("character",f));c.select()};n=function(b,a){b=document.selection.createRange();b.collapse(a);
b.select()}}else{l().removeChild(e);window.console&&window.console.log&&window.console.log("TextInputs module for Rangy not supported in your browser. Reason: No means of finding text input caret position");return}l().removeChild(e);m=function(b,a,c,f){if(a!=c){var d=b.value;b.value=d.slice(0,a)+d.slice(c)}f&&h(b,a,a)};u=function(b){var a=k(b);m(b,a.start,a.end,!0)};y=function(b){var a=k(b);if(a.start!=a.end){var c=b.value;b.value=c.slice(0,a.start)+c.slice(a.end)}h(b,a.start,a.start);return a.text};
v=function(b,a,c,f){var d=b.value;b.value=d.slice(0,c)+a+d.slice(c);f&&(a=c+a.length,h(b,a,a))};w=function(b,a){var c=k(b),d=b.value;b.value=d.slice(0,c.start)+a+d.slice(c.end);a=c.start+a.length;h(b,a,a)};x=function(b,a,c){var d=k(b),e=b.value;b.value=e.slice(0,d.start)+a+d.text+c+e.slice(d.end);a=d.start+a.length;h(b,a,a+d.length)};p.fn.extend({getSelection:d(k,!1),setSelection:d(h,!0),collapseSelection:d(n,!0),deleteSelectedText:d(u,!0),deleteText:d(m,!0),extractSelectedText:d(y,!1),insertText:d(v,
!0),replaceSelectedText:d(w,!0),surroundSelectedText:d(x,!0)})})})(jQuery);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:markup-util', location = '/static/bitbucket/internal/util/markup.js' */
define("bitbucket/internal/util/markup",["module","exports"],function(q,g){function r(b,a,c,d){b=b.indexOf(a,c||0);return-1===b||d&&b>d?null:b}function l(b){for(var a=0,c=[],d=!1,h=!1,e=/`/,g=/`|~/,l=/^(~~~+|```+[\S]*)/,q=/\\/,t=0;a<b.length;){var m=a,n=b[a++],k=n;"\n"===n&&(t=a,d&&(c.push({start:m,end:a,value:k,blockType:p.INLINE,type:f.CODE_END}),d=!1));if(g.test(n)){var u=b.substring(t,r(b,"\n",a)||b.length);if(l.test(u)){for(;"\n"!==b[a]&&a<b.length;)k+=b[a++];if(h){if(c[c.length-1].value.substring(0,
3)!==k.substring(0,3))continue;h=!1}else h=!0;c.push({start:m,end:a,value:k,blockType:p.FENCED,type:h?f.CODE_START:f.CODE_END})}else q.test(b[m-1])||h||!e.test(n)||(d=d?!1:!0,c.push({start:m,end:a,value:k,blockType:p.INLINE,type:d?f.CODE_START:f.CODE_END}))}}return c}Object.defineProperty(g,"__esModule",{value:!0});var f={CODE_START:"CODE_START",CODE_END:"CODE_END"},p={INLINE:"INLINE",FENCED:"FENCED"};g.default={TokenTypes:f,BlockTypes:p,isPositionInsideCodeBlock:function(b,a){var c=l(a),d=!1;c.forEach(function(a,
e){if(a.type===f.CODE_START&&a.start<b&&((e=c[e+1])&&e.type===f.CODE_END&&e.blockType===a.blockType&&e.start>=b||!e))return d=!0,!1});return d},codeBlockTokenizer:l,findNextTokenIndex:r};q.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:mentionable-textarea', location = '/static/bitbucket/internal/widget/mentionable-textarea/mentionable-textarea.soy' */
// This file was automatically generated from mentionable-textarea.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.mentionableTextarea.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.mentionableTextarea == 'undefined') { bitbucket.internal.widget.mentionableTextarea = {}; }


bitbucket.internal.widget.mentionableTextarea.dialog = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var minimumInputLength__soy3 = 2;
  output += '<ul>';
  if (opt_data.results && opt_data.results.length) {
    var resultList7 = opt_data.results;
    var resultListLen7 = resultList7.length;
    for (var resultIndex7 = 0; resultIndex7 < resultListLen7; resultIndex7++) {
      var resultData7 = resultList7[resultIndex7];
      output += bitbucket.internal.widget.mentionableTextarea.result({result: resultData7, isActive: opt_data.activeItemIndex ? resultIndex7 == opt_data.activeItemIndex : resultIndex7 == 0});
    }
  } else {
    output += (opt_data.query && opt_data.query.length >= minimumInputLength__soy3) ? '<li class="no-results"><span>' + soy.$$escapeHtml('No matching users found') + '</span></li>' : '<li class="mentions-help"><span>' + soy.$$escapeHtml('Start typing to find people') + '</span></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.mentionableTextarea.dialog.soyTemplateName = 'bitbucket.internal.widget.mentionableTextarea.dialog';
}


bitbucket.internal.widget.mentionableTextarea.result = function(opt_data, opt_ignored) {
  return '<li class="result ' + soy.$$escapeHtml(opt_data.isActive ? 'active' : '') + '">' + bitbucket.internal.widget.avatarWithNameAndEmail({size: 'small', person: opt_data.result}) + '</li>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.mentionableTextarea.result.soyTemplateName = 'bitbucket.internal.widget.mentionableTextarea.result';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:mentionable-textarea', location = '/static/bitbucket/internal/widget/mentionable-textarea/mentionable-textarea.js' */
define("bitbucket/internal/widget/mentionable-textarea/mentionable-textarea","module exports aui aui/progressive-dataset backbone jquery lodash textarea-caret-position xregexp bitbucket/util/navbuilder bitbucket/internal/model/page-state bitbucket/internal/model/stash-user bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/markup bitbucket/internal/widget/autocomplete-dialog/autocomplete-dialog".split(" "),function(n,l,p,q,r,t,u,v,w,x,y,z,A,B,C,D){function b(){this.init.apply(this,
arguments)}Object.defineProperty(l,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(p),E=babelHelpers.interopRequireDefault(q),F=babelHelpers.interopRequireDefault(r),g=babelHelpers.interopRequireDefault(t),e=babelHelpers.interopRequireDefault(u),G=babelHelpers.interopRequireDefault(v),k=babelHelpers.interopRequireDefault(w),H=babelHelpers.interopRequireDefault(x),h=babelHelpers.interopRequireDefault(y),I=babelHelpers.interopRequireDefault(z),m=babelHelpers.interopRequireDefault(A),
J=babelHelpers.interopRequireDefault(B),K=babelHelpers.interopRequireDefault(C),L=babelHelpers.interopRequireDefault(D);b.defaults={$container:(0,g.default)(document.body),selector:"textarea",dialogId:"mention-autocomplete-dialog"};b.prototype.init=function(a){this.options&&this.reset();this.options=g.default.extend({},b.defaults,a);e.default.bindAll(this,"onKeyDown","onKeyPress","onPaste","onDocumentClick","updateDialogAnchorPosition","updateResults","onActivity","selectItem","highlightMatches");
a=[];h.default.getPullRequest()?a=e.default.invokeMap([h.default.getPullRequest().getAuthor()].concat(h.default.getPullRequest().getReviewers().models,h.default.getPullRequest().getParticipants().models),"getUser"):h.default.getCommitParticipants&&h.default.getCommitParticipants()&&(a=h.default.getCommitParticipants().map(function(a){return a.getUser()}));this.dataSource=M(a,this.matcher);this.dataSource.on("respond",this.updateResults);this.dataSource.on("activity",this.onActivity);this.isMentioningSelector=
e.default.map(this.options.selector.split(","),function(a){return g.default.trim(a)+".isMentioning"}).join(", ");this.options.$container.on("keypress",this.options.selector,this.onKeyPress);this.options.$container.on("keydown",this.isMentioningSelector,this.onKeyDown);this.options.$container.on("paste",this.isMentioningSelector,this.onPaste)};b.prototype.onKeyDown=function(a){if(this.dialog)switch(a.which){case f.default.keyCode.ENTER:case f.default.keyCode.TAB:this.selectHighlightedItem();a.preventDefault();
break;case f.default.keyCode.UP:this.dialog.moveSelectionUp();a.preventDefault();break;case f.default.keyCode.DOWN:this.dialog.moveSelectionDown();a.preventDefault();break;case f.default.keyCode.ESCAPE:this.endAutocomplete();a.preventDefault();a.stopPropagation();break;case f.default.keyCode.BACKSPACE:case f.default.keyCode.DELETE:this.onKeyPress(a)}};b.prototype.onKeyPress=function(a){a.which&&e.default.defer(e.default.bind(function(a){var d=(0,g.default)(a.target);if(d.hasClass("isMentioning"))this.updateAutocomplete();
else{var c=d.getSelection().start;"@"!==String.fromCharCode(a.which)||K.default.isPositionInsideCodeBlock(c,d.val())||this.beginAutocomplete(d)}},this),a)};b.prototype.onPaste=function(){e.default.defer(e.default.bind(this.updateAutocomplete,this))};b.prototype.onDocumentClick=function(a){var c=a.target;a=[];this.$textarea&&a.push(this.$textarea);this.dialog&&a.push(this.dialog.$el);e.default.some(a,function(a){return a.is(c)||g.default.contains(a[0],c)})||this.endAutocomplete()};b.prototype.beginAutocomplete=
function(a){var c=a.getSelection().start-1;0<c&&/^\w$/.test(a.val().substr(c-1,1))||(this.$textarea=a,this.$textarea.addClass("isMentioning"),this.mentionTriggerPos=c,this.resultsCollection=new F.default.Collection,this.dialog=new L.default({id:this.options.dialogId,collection:this.resultsCollection,minZIndex:this.options.$container.zIndex(),anchor:this.getCaretDocumentCoordinates(this.$textarea),template:bitbucket.internal.widget.mentionableTextarea.dialog,highlighter:this.highlightMatches}),this.dialog.on("itemSelected",
this.selectItem),m.default.on("window.resize.debounced",this.updateDialogAnchorPosition),(0,g.default)(document).on("click focusin mousedown",this.onDocumentClick),this.updateAutocomplete())};b.prototype.updateAutocomplete=function(){if(this.$textarea){this.currentCaretPos=this.$textarea.getSelection().start;var a=this.$textarea.val().substring(this.mentionTriggerPos,this.currentCaretPos);a&&e.default.startsWith(a,"@")&&!e.default.includes(a,"\n")?(a=a.substr(1),this.dataSource.query(a)):this.endAutocomplete()}};
b.prototype.updateDialogAnchorPosition=function(){e.default.defer(e.default.bind(function(){this.dialog&&this.$textarea&&this.dialog.updateAnchorPosition(this.getCaretDocumentCoordinates(this.$textarea))},this))};b.prototype.updateResults=function(a){this.resultsCollection&&(this.resultsCollection.query=a.query,this.resultsCollection.reset(a.results))};b.prototype.onActivity=function(a){this.dialog&&this.dialog.toggleSpinner(a.activity)};b.prototype.endAutocomplete=function(){this.$textarea&&(this.$textarea.removeClass("isMentioning"),
this.$textarea=null);this.currentCaretPos=this.mentionTriggerPos=void 0;this.dialog&&(this.dialog.off("itemSelected",this.selectItem),this.dialog.remove(),this.dialog=null);this.resultsCollection=null;m.default.off("window.resize.debounced",this.updateDialogAnchorPosition);(0,g.default)(document).off("click focusin mousedown",this.onDocumentClick)};b.prototype.selectHighlightedItem=function(){this.selectItem(this.dialog.getSelectedItemIndex())};b.prototype.selectItem=function(a){if(a=this.resultsCollection.at(a)){a=
this.escapeUsername(a.getName());var c=this.$textarea.val(),d=c.substring(0,this.mentionTriggerPos+1);c=c.substring(this.currentCaretPos,c.length);var b=d.length+a.length+1;" "!==c.charAt(0)&&(c=" "+c);this.$textarea.val(d+a+c);this.$textarea.setSelection(b,b)}this.endAutocomplete()};b.prototype.matcher=function(a,c){if(h.default.getCurrentUser()&&a.getName()===h.default.getCurrentUser().getName())return!1;var d=k.default.cache("(\\b|^|[^\\p{L}\\p{N}])"+k.default.escape(c),"i");a=[a.getName(),a.getEmailAddress(),
a.getDisplayName()];return e.default.some(a,function(a){return!(!a||!d.test(a))})};b.prototype.getMatchParts=function(a,c){var d=k.default.cache("(^|.*?(\\b|\\())("+k.default.escape(c)+")(.*)","i"),b={text:a};e.default.includes(a.toLowerCase(),c.toLowerCase())&&a.replace(d,function(a,d,c,e,N){b={prefix:d,match:e,suffix:N}});return b};b.prototype.highlightMatches=function(a,c){var d=this;a.find(".display-name, .email-address").each(function(){var a=(0,g.default)(this).contents().filter(function(){return this.nodeType===
Node.TEXT_NODE}),b=e.default.reduce(d.getMatchParts(a.text(),c),function(a,d,b){return a+("match"===b?"\x3cb\x3e"+f.default.escapeHtml(d)+"\x3c/b\x3e":f.default.escapeHtml(d))},"");a.replaceWith(b)});return a};b.prototype.getCaretDocumentCoordinates=function(a){var b=a.offset(),d=(0,G.default)(a[0],a[0].selectionStart);a=parseInt(a.css("font-size"),10);d.top+=b.top+a;d.left+=b.left;return d};b.prototype.escapeUsername=function(a){return/^\w*$/.test(a)?a:'"'+a.replace(/"/g,'\\"')+'"'};b.prototype.reset=
function(){this.destroy();delete this.options;delete this.dataSource;delete this.$textarea;delete this.dialog;delete this.resultsCollection;delete this.mentionTriggerPos;delete this.currentCaretPos};b.prototype.destroy=function(){this.dialog&&(this.dialog.off("itemSelected",this.selectItem),this.dialog.remove());this.dataSource.off("respond",this.updateResults);this.dataSource.off("activity",this.onActivity);this.options.$container.off("keypress",this.options.selector,this.onKeyPress);this.options.$container.off("keydown",
this.isMentioningSelector,this.onKeyDown);this.options.$container.off("paste",this.isMentioningSelector,this.onPaste);m.default.off("window.resize.debounced",this.updateDialogAnchorPosition);(0,g.default)(document).off("click focusin mousedown",this.onDocumentClick)};var M=e.default.once(function(a,b){a=new E.default(a,{queryEndpoint:H.default.rest().users().build(),queryParamKey:"filter",queryData:{avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"small"}),permission:"LICENSED_USER"},maxResults:5,
model:I.default,matcher:b});a.query=function(a){this.value=a;var b=this.getFilteredResults(a);this.respond(a,b);!a||!this._queryEndpoint||this.hasQueryCache(a)||!this.shouldGetMoreResults(b)||2>a.length||this.remoteQuery(a)}.bind(a);a.remoteQuery=function(a){var b=this.fetch(a);this.activeQueryCount++;this.trigger("activity",{activity:!0});b.always(e.default.bind(function(){this.activeQueryCount--;this.trigger("activity",{activity:!!this.activeQueryCount})},this));b.done(e.default.bind(function(b,
d,c){this.addQueryCache(a,b,c)},this));b.done(e.default.bind(function(){a=this.value;this.respond(a,this.getFilteredResults(a))},this))}.bind(a);a.remoteQuery=e.default.debounce(a.remoteQuery,300);a.parse=J.default.dot("values");a.getFilteredResults=function(a){var b=this.filter(function(b){return!!this.matcher(b,a)},this);this._maxResults&&(b=e.default.take(b,this._maxResults));return b};return a});l.default=b;n.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror-mode-meta', location = '/static/lib/CodeMirror/mode/meta.js' */
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../lib/codemirror")):"function"==typeof define&&define.amd?define(["../lib/codemirror"],a):a(CodeMirror)})(function(a){a.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",
mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:"cpp c++ cc cxx hpp h++ hh hxx".split(" "),alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj",
"cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",
ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},
{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",
mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth",
"4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy",
"gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",
ext:["html","htm"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],
mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",
mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",
mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective C",mime:"text/x-objectivec",
mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mime:"application/x-httpd-php",mode:"php",ext:"php php3 php4 php5 php7 phtml".split(" ")},
{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:"txt text conf def list log".split(" ")},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",
mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",
mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh",
"ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",
mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",
mode:"stex",ext:["text","ltx"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",
mode:"troff",ext:"123456789".split("")},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",
mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml",
"xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",
mode:"mscgen",ext:["msgenny"]}];for(var f=0;f<a.modeInfo.length;f++){var g=a.modeInfo[f];g.mimes&&(g.mime=g.mimes[0])}a.findModeByMIME=function(c){c=c.toLowerCase();for(var d=0;d<a.modeInfo.length;d++){var b=a.modeInfo[d];if(b.mime==c)return b;if(b.mimes)for(var e=0;e<b.mimes.length;e++)if(b.mimes[e]==c)return b}if(/\+xml$/.test(c))return a.findModeByMIME("application/xml");if(/\+json$/.test(c))return a.findModeByMIME("application/json")};a.findModeByExtension=function(c){for(var d=0;d<a.modeInfo.length;d++){var b=
a.modeInfo[d];if(b.ext)for(var e=0;e<b.ext.length;e++)if(b.ext[e]==c)return b}};a.findModeByFileName=function(c){for(var d=0;d<a.modeInfo.length;d++){var b=a.modeInfo[d];if(b.file&&b.file.test(c))return b}d=c.lastIndexOf(".");if(c=-1<d&&c.substring(d+1,c.length))return a.findModeByExtension(c)};a.findModeByName=function(c){c=c.toLowerCase();for(var d=0;d<a.modeInfo.length;d++){var b=a.modeInfo[d];if(b.name.toLowerCase()==c)return b;if(b.alias)for(var e=0;e<b.alias.length;e++)if(b.alias[e].toLowerCase()==
c)return b}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:determine-language', location = '/static/bitbucket/internal/util/determine-language.js' */
define("bitbucket/internal/util/determine-language",["module","exports","codemirror","jquery","lodash"],function(t,k,l,u,v){Object.defineProperty(k,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(l),r=babelHelpers.interopRequireDefault(u),g=babelHelpers.interopRequireDefault(v);document.documentElement.className+=" cm-s-stash-default";l=WRM.data.claim("com.atlassian.bitbucket.server.bitbucket-web:determine-language.syntax-highlighters")||{};var m={},n={};g.default.forEach(l,function(c,
a){g.default.forEach(c.e,function(b){m[b]=a});g.default.forEach(c.x,function(b){n[b]=a})});var p={},q={};k.default={fromFileInfo:function(c){var a=c.path,b=a.lastIndexOf(".");b=-1===b?a:a.substring(b+1);var d;if(1<c.firstLine.length)if(d=/^#!(?:\/(?:usr\/)?(?:local\/)?bin\/([^\s]+))(?:\s+([^\s]+))?/.exec(c.firstLine)){var e=d[1];"env"===e&&(e=d[2]);d=e}else d=null;else d=null;e=p.hasOwnProperty(b)?p[b]:d&&q.hasOwnProperty(d)?q[d]:null;var h;e||((h=g.default.has(m,b)?m[b]:null)||(h=null!=d?g.default.has(n,
d)?n[d]:null:null),e=(e=h?f.default.findModeByMIME(h):f.default.findModeByFileName(a))||f.default.findModeByMIME("text/plain"),e.builtIn=!0);return c.legacy?h||"text":e},registerCodeMirrorMode:function(c,a,b){a&&a.forEach(function(a){p[a]=c});b&&b.forEach(function(a){q[a]=c})},getCodeMirrorModeForName:function(c){var a=f.default.findModeByName(c)||f.default.findModeByExtension(c);return a?"undefined"===typeof f.default.mimeModes[a.mime]?WRM.require("wr!com.atlassian.bitbucket.server.bitbucket-highlight:"+
a.mode).then(function(){return a}):r.default.Deferred().resolve(a):r.default.Deferred().resolve(f.default.findModeByMIME("text/plain"))}};t.exports=k["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror-whitespace', location = '/static/bitbucket/internal/feature/file-content/codemirror-whitespace/codemirror-whitespace.js' */
require(["codemirror"],function(e){e.defineOption("showWhiteSpaceCharacters",!1,function(b,c,d){d&&!c?b.removeOverlay("whitespace-characters"):!d&&c&&b.addOverlay({name:"whitespace-characters",flattenSpans:!1,token:function(a){var b=0;if(a.match(" ",!1))return a.eatWhile(function(a){return" "===a&&4>b++}),"whitespace";a.eatWhile(/[^ ]/);return null}})})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:editor-mode', location = '/static/bitbucket/internal/feature/file-content/editor-mode.js' */
define("bitbucket/internal/feature/file-content/editor-mode",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={EDIT:"EDIT",READONLY:"READONLY"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:stash-codemirror', location = '/static/bitbucket/internal/feature/file-content/stash-codemirror/stash-scrollbar.soy' */
// This file was automatically generated from stash-scrollbar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.codemirror.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.codemirror == 'undefined') { bitbucket.internal.feature.fileContent.codemirror = {}; }


bitbucket.internal.feature.fileContent.codemirror.scrollbar = function(opt_data, opt_ignored) {
  return '<div class="CodeMirror-hscrollbar' + ((opt_data.fixed) ? ' stash-scroll-fixed' : '') + '" cm-not-content="true"' + ((opt_data.isMac) ? 'style="min-height: 18px"' : '') + '><div class="stash-scroll-inner"></div></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.codemirror.scrollbar.soyTemplateName = 'bitbucket.internal.feature.fileContent.codemirror.scrollbar';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:stash-codemirror', location = '/static/bitbucket/internal/feature/file-content/stash-codemirror/stash-scrollbar.js' */
define("bitbucket/internal/feature/file-content/stash-codemirror/stash-scrollbar",["codemirror","jquery","lodash","bitbucket/internal/util/navigator"],function(d,k,l,m){function f(d){function b(a,b,c){this._cm=c;this._scroll=b;g.default.bindAll(this,"clear","onScroll");this.$barEl=(0,h.default)(bitbucket.internal.feature.fileContent.codemirror.scrollbar({isMac:n.default.isMac(),fixed:d.fixed}));this.$innerEl=this.$barEl.find("div");d.fixed?((0,h.default)("body").append(this.$barEl),c.getOption("stashDestroyables").push({destroy:this.clear})):
a(this.$barEl[0]);this.$barEl.on("scroll",this.onScroll)}b.prototype.clear=function(){this.$barEl.remove()};b.prototype.onScroll=function(){var a=this.$barEl[0];a.clientWidth&&this._scroll(a.scrollLeft,"horizontal")};b.prototype.setScrollLeft=function(a){this.$barEl.scrollLeft()!==a&&this.$barEl.scrollLeft(a)};b.prototype.setScrollTop=function(a){};b.prototype.update=function(a){if(g.default.isEqual(a,this.lastMeasure))return this.lastUpdateResult;this.lastMeasure=a;var b=a.scrollWidth>a.clientWidth+
1,c={},e={};b?(c.display="block",c.width=a.viewWidth+"px",d.fixed?c.left=this._cm.getWrapperElement().getBoundingClientRect().left+"px":c.right="0",e.width=a.scrollWidth-a.clientWidth+a.viewWidth+"px"):(c.display="",e.width="0");this.$barEl.css(c);this.$innerEl.css(e);return this.lastUpdateResult={right:0,bottom:b?a.nativeBarWidth:0}};return b}d=babelHelpers.interopRequireDefault(d);var h=babelHelpers.interopRequireDefault(k),g=babelHelpers.interopRequireDefault(l),n=babelHelpers.interopRequireDefault(m);
d.default.scrollbarModel["stash-inline"]=f({fixed:!1});d.default.scrollbarModel["stash-fixed"]=f({fixed:!0})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:stash-codemirror', location = '/static/bitbucket/internal/feature/file-content/stash-codemirror/search.js' */
define("bitbucket/internal/feature/file-content/stash-codemirror/search",["codemirror","jquery","lodash","bitbucket/internal/util/navigator"],function(q,r,t,u){function v(a,b){a="string"===typeof a?new RegExp("^"+a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26"),b?"i":""):new RegExp("^(?:"+a.source+")",a.ignoreCase?"i":"");return{token:function(c){if(c.match(a))return"searching";for(;!c.eol()&&(c.next(),!c.match(a,!1)););}}}function w(){this.query=this.overlay=this.dialogEl=this.cursor=null}
function f(a){return a.state.search||(a.state.search=new w)}function l(a){var b=a.match(/^\/(.*)\/([a-z]*)$/);return b?new RegExp(b[1],(0,t.includes)(b[2],"i")?"i":""):a}function k(a,b){a.operation(function(){a.removeOverlay(b.overlay);b.overlay=v(b.query,"string"===typeof b.query);a.addOverlay(b.overlay)})}function m(a,b){a.operation(function(){a.removeOverlay(b.overlay);b.overlay=null})}function g(a,b,c){(b=b&&b.trim())&&0!==b.length&&a.operation(function(){var d=f(a);b!==d.query?(d.query=l(b),
d.cursor=null,k(a,d)):d.overlay||k(a,d);h(a,c)})}function n(a,b){var c=f(a);if(c.dialogEl){var d=c.dialogEl.getElementsByClassName("search-query")[0];d.focus()}else{d=(0,p.default)(bitbucket.internal.feature.fileContent.codemirror.searchQuery());d.find(".search-button").on("click",function(c){h(a,(0,p.default)(c.target).closest(".aui-button").data("rev"))}).tooltip();var e=d.find("input")[0];e.onkeydown=function(b){c.query=void 0;var d=x.default.isMac(),f=String.fromCharCode(b.keyCode);d=d&&b.metaKey&&
!b.ctrlKey||!d&&!b.metaKey&&b.ctrlKey;"F"!==f||!d||b.shiftKey||b.altKey?"G"!==f||!d||b.shiftKey||b.altKey?"G"===f&&d&&b.shiftKey&&!b.altKey&&(b.preventDefault(),g(a,e.value,!0)):(b.preventDefault(),g(a,e.value)):b.preventDefault()};c.dialogEl=d[0];d={value:a.getSelection()||c.query,closeOnEnter:!1,closeOnBlur:!1,onClose:function(){m(a,c);c.dialogEl=c.cursor=null}};a.openDialog(c.dialogEl,function(b,c){c.preventDefault();g(a,b)},d)}g(a,d.value,b)}function h(a,b){a.operation(function(){var c=f(a);if(c.query&&
c.dialogEl){if(!c.cursor){b&&a.execCommand("goCharLeft");var d=c.query;var g=a.getCursor();d=a.getSearchCursor(d,g,"string"===typeof d);c.cursor=d}if(!c.cursor.find(b)&&(d=c.query,g=b?e.default.Pos(a.lastLine()):e.default.Pos(a.firstLine(),0),d=a.getSearchCursor(d,g,"string"===typeof d),c.cursor=d,!c.cursor.find(b)))return;a.setSelection(c.cursor.from(),c.cursor.to());c={from:c.cursor.from(),to:c.cursor.to()};(d=a.getOption("scrollLineIntoViewFunc"))?(d(c),c=a.charCoords(c.from,"local"),d=a.getScrollInfo(),
(d.left>c.left||d.left+d.clientWidth<c.left)&&a.scrollTo(Math.max(0,c.left-20),null)):a.scrollIntoView(c,100)}else n(a,b)})}var e=babelHelpers.interopRequireDefault(q),p=babelHelpers.interopRequireDefault(r),x=babelHelpers.interopRequireDefault(u);e.default.defineOption("scrollLineIntoViewFunc",null);e.default.commands.find=n;e.default.commands.findNext=h;e.default.commands.findPrev=function(a){return h(a,!0)};e.default.commands.highlight=function(a,b){var c=f(a);0===b.length?m(a,c):(c.query=l(b),
k(a,c))}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:stash-codemirror', location = '/static/bitbucket/internal/feature/file-content/stash-codemirror/stash-codemirror.js' */
define("bitbucket/internal/feature/file-content/stash-codemirror/stash-codemirror","module exports aui codemirror jquery lodash bitbucket/internal/feature/file-content/editor-mode bitbucket/internal/util/function bitbucket/internal/feature/file-content/stash-codemirror/stash-scrollbar".split(" "),function(v,l,m,w,x,y,z,A){function B(b){b.on("keydown",function(a,c){!1!==a.options.readOnly&&33<=c.which&&40>=c.which&&!c.shiftKey&&!a.somethingSelected()&&(37>c.which&&c.preventDefault(),a.getInputField().blur())})}
function C(b){var a=!1,c=g.default.lazyDelay(function(){if(!a){var c=b.lineAtHeight(b.getScrollInfo().top+b.heightAtLine(0));b.setSelection({line:c+1,ch:0})}a=!1},10);b.on("contextmenu",function(){a=!0});b.on("blur",function(b){b.options.readOnly&&b.somethingSelected()&&c();a=!1})}function p(b,a){a=a===h.default.EDIT?"off":"on";b[a]("keydown",q);b[a]("keypress",q)}function q(b,a){b=e.default.assign(jQuery.Event(a.type),e.default.pick(a,D));(0,f.default)(document).trigger(b);a.codemirrorIgnore=!!r[a.which||
a.keyCode]}function E(b){var a={},c=Array.prototype.slice.call(arguments,1),d=g.default.spread(function(c,d){a[c]=void 0!==d?e.default.flow(b[c].bind(b),g.default.constant(d)):b[c].bind(b)});c.forEach(g.default.unary(d));return a}function F(b,a){e.default.forEach(a,function(a,d){return b.setOption(d,a)})}function t(b,a){this.options=a;var c=new n.default(b,f.default.extend({mode:"text/plain",scrollbarStyle:a.scrollStyle?"stash-"+a.scrollStyle:"native",styleSelectedText:!0,stashDestroyables:[],theme:"stash-default"},
{viewportMargin:a&&a.autoResizing?Infinity:50},u[a.editorMode||h.default.READONLY],a));(0,f.default)(c.getWrapperElement()).find(".CodeMirror-lines, .CodeMirror-code").attr("data-skate-ignore","true");a&&a.autoResizing&&b.classList.add("codemirror-auto-resizing-container");B(c);p(c,a.editorMode);C(c);b=E(c,["addLineClass",this],"addLineWidget","charCoords","clearGutter","defaultTextHeight","execCommand","focus","getDoc","getInputField","getLine","getLineHandle","getLineNumber","getOption","getScrollInfo",
"getWrapperElement","heightAtLine","lastLine","lineAtHeight","setCursor",["markText",this],["off",this],["on",this],["refresh",this],["removeLineClass",this],"replaceRange",["scrollIntoView",this],["scrollTo",this],["setGutterMarker",this],["setOption",this],["setSelection",this],["setValue",this],"swapDoc");f.default.extend(this,b);this.operation=function(a){c.operation(g.default.unary(e.default.partial(a,this)));return this};this.destroy=function(){e.default.invokeMap(c.getOption("stashDestroyables"),
"destroy");(0,f.default)(c.getWrapperElement()).remove()};this._highlight=function(a){n.default.commands.highlight(c,a)};this._insert=function(a,b,e){var d=0===b;--b;var g=c.getOption("wholeLineUpdateBefore");c.setOption("wholeLineUpdateBefore",d);var f=c.getDoc(),h={line:b,ch:d?0:c.getLine(b).length};f.replaceRange(d?a+"\r\n":"\r\n"+a,h);e&&f.setSelection({line:b,ch:0});c.setOption("wholeLineUpdateBefore",g)};this.switchEditorMode=function(b){var d=babelHelpers.extends({scrollbarStyle:this.options.scrollStyle?
"stash-"+a.scrollStyle:"native"},u[b]);F(c,d);p(c,b)};return this}Object.defineProperty(l,"__esModule",{value:!0});m=babelHelpers.interopRequireDefault(m);var n=babelHelpers.interopRequireDefault(w),f=babelHelpers.interopRequireDefault(x),e=babelHelpers.interopRequireDefault(y),h=babelHelpers.interopRequireDefault(z),g=babelHelpers.interopRequireDefault(A),k;n.default.defineOption("stashDestroyables",null);var r={};r[m.default.keyCode.TAB]=!0;var D=["which","keyCode","shiftKey","ctrlKey","metaKey"],
u=(k={},babelHelpers.defineProperty(k,h.default.READONLY,{lineSeparator:"\r\n",readOnly:!0,lineNumbers:!1,wholeLineUpdateBefore:!1,keyMap:"default",cursorBlinkRate:0}),babelHelpers.defineProperty(k,h.default.EDIT,{lineSeparator:null,readOnly:!1,lineNumbers:!0,wholeLineUpdateBefore:!0,scrollbarStyle:"native",keyMap:"sublime",cursorBlinkRate:530}),k);t.DEFAULT_LINE_ENDING="\r\n";l.default=t;v.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:stash-codemirror', location = '/static/bitbucket/internal/feature/file-content/stash-codemirror/codemirror-search.soy' */
// This file was automatically generated from codemirror-search.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.codemirror.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.codemirror == 'undefined') { bitbucket.internal.feature.fileContent.codemirror = {}; }


bitbucket.internal.feature.fileContent.codemirror.searchQuery = function(opt_data, opt_ignored) {
  return '<div class="codemirror-search-query">' + soy.$$escapeHtml('Find:') + '<div class="search-box"><input class="search-query" type="text" style="width: 10em"/></div>' + aui.buttons.buttons({content: '' + aui.buttons.button({text: '', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-up', extraClasses: ['search-button'], extraAttributes: {type: 'button', 'data-rev': 'true', title: 'Previous match'}}) + aui.buttons.button({text: '', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-down', extraClasses: ['search-button'], extraAttributes: {type: 'button', title: 'Next match'}})}) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.codemirror.searchQuery.soyTemplateName = 'bitbucket.internal.feature.fileContent.codemirror.searchQuery';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:clike', location = '/static/lib/CodeMirror/mode/clike/clike.js' */
(function(q){"object"==typeof exports&&"object"==typeof module?q(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],q):q(CodeMirror)})(function(q){function D(a,b,e,c,g,m){this.indented=a;this.column=b;this.type=e;this.info=c;this.align=g;this.prev=m}function z(a,b,c,r){var e=a.indented;a.context&&"statement"==a.context.type&&"statement"!=c&&(e=a.context.indented);return a.context=new D(e,b,c,r,null,a.context)}function x(a){var b=a.context.type;if(")"==
b||"]"==b||"}"==b)a.indented=a.context.indented;return a.context=a.context.prev}function H(a,b,c){if("variable"==b.prevToken||"type"==b.prevToken||/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(a.string.slice(0,c))||b.typeAtEndOfLine&&a.column()==a.indentation())return!0}function I(a){for(;;){if(!a||"top"==a.type)return!0;if("}"==a.type&&"namespace"!=a.prev.info)return!1;a=a.prev}}function c(a){var b={};a=a.split(" ");for(var c=0;c<a.length;++c)b[a[c]]=!0;return b}function t(a,b){return"function"===typeof a?a(b):
a.propertyIsEnumerable(b)}function n(a,b){if(!b.startOfLine)return!1;for(var c,r=null;c=a.peek();){if("\\"==c&&a.match(/^.$/)){r=n;break}else if("/"==c&&a.match(/^\/[\/\*]/,!1))break;a.next()}b.tokenize=r;return"meta"}function A(a,b){return"type"==b.prevToken?"type":!1}function h(a){a.eatWhile(/[\w\.']/);return"number"}function u(a,b){a.backUp(1);if(a.match(/(R|u8R|uR|UR|LR)/)){var c=a.match(/"([^\s\\()]{0,16})\(/);if(!c)return!1;b.cpp11RawStringDelim=c[1];b.tokenize=B;return B(a,b)}if(a.match(/(u8|u|U|L)/))return a.match(/["']/,
!1)?"string":!1;a.next();return!1}function y(a,b){for(var c;null!=(c=a.next());)if('"'==c&&!a.eat('"')){b.tokenize=null;break}return"string"}function B(a,b){var c=b.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$\x26");a.match(new RegExp(".*?\\)"+c+'"'))?b.tokenize=null:a.skipToEnd();return"string"}function l(a,b){function c(a){if(a)for(var b in a)a.hasOwnProperty(b)&&r.push(b)}"string"==typeof a&&(a=[a]);var r=[];c(b.keywords);c(b.types);c(b.builtin);c(b.atoms);r.length&&(b.helperType=a[0],q.registerHelper("hintWords",
a[0],r));for(var g=0;g<a.length;++g)q.defineMIME(a[g],b)}function E(a,b){for(var c=!1;!a.eol();){if(!c&&a.match('"""')){b.tokenize=null;break}c="\\"==a.next()&&!c}return"string"}function F(a){return function(b,c){for(var e=!1,g,m=!1;!b.eol();){if(!a&&!e&&b.match('"')){m=!0;break}if(a&&b.match('"""')){m=!0;break}g=b.next();!e&&"$"==g&&b.match("{")&&b.skipTo("}");e=!e&&"\\"==g&&!a}if(m||!a)c.tokenize=null;return"string"}}function C(a){return function(b,c){for(var e=!1,g,m=!1;!b.eol();){if(!e&&b.match('"')&&
("single"==a||b.match('""'))){m=!0;break}if(!e&&b.match("``")){v=C(a);m=!0;break}g=b.next();e="single"==a&&!e&&"\\"==g}m&&(c.tokenize=null);return"string"}}q.defineMode("clike",function(a,b){function c(a,b){var c=a.next();if(w[c]){var p=w[c](a,b);if(!1!==p)return p}if('"'==c||"'"==c)return b.tokenize=l(c),b.tokenize(a,b);if(M.test(c))return k=c,null;if(N.test(c)){a.backUp(1);if(a.match(O))return"number";a.next()}if("/"==c){if(a.eat("*"))return b.tokenize=g,g(a,b);if(a.eat("/"))return a.skipToEnd(),
"comment"}if(J.test(c)){for(;!a.match(/^\/[\/*]/,!1)&&a.eat(J););return"operator"}a.eatWhile(K);if(L)for(;a.match(L);)a.eatWhile(K);a=a.current();return t(v,a)?(t(y,a)&&(k="newstatement"),t(C,a)&&(G=!0),"keyword"):t(A,a)?"type":t(B,a)?(t(y,a)&&(k="newstatement"),"builtin"):t(E,a)?"atom":"variable"}function l(a){return function(b,c){for(var d=!1,p,f=!1;null!=(p=b.next());){if(p==a&&!d){f=!0;break}d=!d&&"\\"==p}if(f||!d&&!F)c.tokenize=null;return"string"}}function g(a,b){for(var c=!1,p;p=a.next();){if("/"==
p&&c){b.tokenize=null;break}c="*"==p}return"comment"}function m(a,c){b.typeFirstDefinitions&&a.eol()&&I(c.context)&&(c.typeAtEndOfLine=H(a,c,a.pos))}var h=a.indentUnit,n=b.statementIndentUnit||h,u=b.dontAlignCalls,v=b.keywords||{},A=b.types||{},B=b.builtin||{},y=b.blockKeywords||{},C=b.defKeywords||{},E=b.atoms||{},w=b.hooks||{},F=b.multiLineStrings,P=!1!==b.indentStatements,L=b.namespaceSeparator,M=b.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,N=b.numberStart||/[\d\.]/,O=b.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,
J=b.isOperatorChar||/[+\-*&%=<>!?|\/]/,K=b.isIdentifierChar||/[\w\$_\xa1-\uffff]/,k,G;return{startState:function(a){return{tokenize:null,context:new D((a||0)-h,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(a,f){var d=f.context;a.sol()&&(null==d.align&&(d.align=!1),f.indented=a.indentation(),f.startOfLine=!0);if(a.eatSpace())return m(a,f),null;k=G=null;var e=(f.tokenize||c)(a,f);if("comment"==e||"meta"==e)return e;null==d.align&&(d.align=!0);if(";"==k||":"==k||","==k&&
a.match(/^\s*(?:\/\/.*)?$/,!1))for(;"statement"==f.context.type;)x(f);else if("{"==k)z(f,a.column(),"}");else if("["==k)z(f,a.column(),"]");else if("("==k)z(f,a.column(),")");else if("}"==k){for(;"statement"==d.type;)d=x(f);for("}"==d.type&&(d=x(f));"statement"==d.type;)d=x(f)}else k==d.type?x(f):P&&(("}"==d.type||"top"==d.type)&&";"!=k||"statement"==d.type&&"newstatement"==k)&&z(f,a.column(),"statement",a.current());"variable"==e&&("def"==f.prevToken||b.typeFirstDefinitions&&H(a,f,a.start)&&I(f.context)&&
a.match(/^\s*\(/,!1))&&(e="def");w.token&&(d=w.token(a,f,e),void 0!==d&&(e=d));"def"==e&&!1===b.styleDefs&&(e="variable");f.startOfLine=!1;f.prevToken=G?"def":e||k;m(a,f);return e},indent:function(a,e){if(a.tokenize!=c&&null!=a.tokenize||a.typeAtEndOfLine)return q.Pass;var d=a.context,f=e&&e.charAt(0);"statement"==d.type&&"}"==f&&(d=d.prev);if(b.dontIndentStatements)for(;"statement"==d.type&&b.dontIndentStatements.test(d.info);)d=d.prev;if(w.indent&&(a=w.indent(a,d,e),"number"==typeof a))return a;
a=f==d.type;var g=d.prev&&"switch"==d.prev.info;if(b.allmanIndentation&&/[{(]/.test(f)){for(;"top"!=d.type&&"}"!=d.type;)d=d.prev;return d.indented}return"statement"==d.type?d.indented+("{"==f?0:n):!d.align||u&&")"==d.type?")"!=d.type||a?d.indented+(a?0:h)+(a||!g||/^(?:case|default)\b/.test(e)?0:h):d.indented+n:d.column+(a?0:1)},electricInput:!1!==b.indentSwitch?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});l(["text/x-csrc",
"text/x-c","text/x-chdr"],{name:"clike",keywords:c("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile"),types:c("int long char short double float unsigned signed void size_t ptrdiff_t bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),blockKeywords:c("case do else for if switch while struct"),defKeywords:c("struct"),
typeFirstDefinitions:!0,atoms:c("null true false"),hooks:{"#":n,"*":A},modeProps:{fold:["brace","include"]}});l(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:c("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),
types:c("int long char short double float unsigned signed void size_t ptrdiff_t bool wchar_t"),blockKeywords:c("catch class do else finally for if struct switch try while"),defKeywords:c("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:c("true false null"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,hooks:{"#":n,"*":A,u:u,U:u,L:u,R:u,0:h,1:h,2:h,3:h,4:h,5:h,6:h,7:h,8:h,9:h,token:function(a,b,c){if(b="variable"==c&&"("==a.peek()&&(";"==b.prevToken||null==
b.prevToken||"}"==b.prevToken))a=a.current(),b=(a=/(\w+)::~?(\w+)$/.exec(a))&&a[1]==a[2];if(b)return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}});l("text/x-java",{name:"clike",keywords:c("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),
types:c("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:c("catch class do else finally for if switch try while"),defKeywords:c("class interface package enum @interface"),typeFirstDefinitions:!0,atoms:c("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(a){if(a.match("interface",!1))return!1;a.eatWhile(/[\w\$_]/);
return"meta"}},modeProps:{fold:["brace","import"]}});l("text/x-csharp",{name:"clike",keywords:c("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),
types:c("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:c("catch class do else finally for foreach if struct switch try while"),defKeywords:c("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:c("true false null"),hooks:{"@":function(a,b){if(a.eat('"'))return b.tokenize=
y,y(a,b);a.eatWhile(/[\w\$_]/);return"meta"}}});l("text/x-scala",{name:"clike",keywords:c("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:c("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),
multiLineStrings:!0,blockKeywords:c("catch class enum do else finally for forSome if match switch try while"),defKeywords:c("class enum def object package trait type val var"),atoms:c("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(a){a.eatWhile(/[\w\$_]/);return"meta"},'"':function(a,b){if(!a.match('""'))return!1;b.tokenize=E;return b.tokenize(a,b)},"'":function(a){a.eatWhile(/[\w\$_\xa1-\uffff]/);return"atom"},"\x3d":function(a,b){var c=
b.context;return"}"==c.type&&c.align&&a.eat("\x3e")?(b.context=new D(c.indented,c.column,c.type,c.info,null,c.prev),"operator"):!1}},modeProps:{closeBrackets:{triples:'"'}}});l("text/x-kotlin",{name:"clike",keywords:c("package as typealias class interface this super val var fun for is in This throw return break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend"),
types:c("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:c("catch class do else finally for if where try while enum"),
defKeywords:c("class val var object package interface fun"),atoms:c("true false null this"),hooks:{'"':function(a,b){b.tokenize=F(a.match('""'));return b.tokenize(a,b)}},modeProps:{closeBrackets:{triples:'"'}}});l(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:c("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:c("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),
blockKeywords:c("for while do if else struct"),builtin:c("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),
atoms:c("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),
indentSwitch:!1,hooks:{"#":n},modeProps:{fold:["brace","include"]}});l("text/x-nesc",{name:"clike",keywords:c("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatileas atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:c("int long char short double float unsigned signed void size_t ptrdiff_t"),
blockKeywords:c("case do else for if switch while struct"),atoms:c("null true false"),hooks:{"#":n},modeProps:{fold:["brace","include"]}});l("text/x-objectivec",{name:"clike",keywords:c("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatileinline restrict _Bool _Complex _Imaginary BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),
types:c("int long char short double float unsigned signed void size_t ptrdiff_t"),atoms:c("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(a){a.eatWhile(/[\w\$]/);return"keyword"},"#":n,indent:function(a,b,c){if("statement"==b.type&&/^@\w/.test(c))return b.indented}},modeProps:{fold:"brace"}});l("text/x-squirrel",{name:"clike",keywords:c("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),
types:c("int long char short double float unsigned signed void size_t ptrdiff_t"),blockKeywords:c("case catch class else for foreach if switch try while"),defKeywords:c("function local class"),typeFirstDefinitions:!0,atoms:c("true false null"),hooks:{"#":n},modeProps:{fold:["brace","include"]}});var v=null;l("text/x-ceylon",{name:"clike",keywords:c("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),
types:function(a){a=a.charAt(0);return a===a.toUpperCase()&&a!==a.toLowerCase()},blockKeywords:c("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:c("class dynamic function interface module object package value"),builtin:c("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,
isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:c("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(a){a.eatWhile(/[\w\$_]/);return"meta"},'"':function(a,b){b.tokenize=C(a.match('""')?"triple":"single");return b.tokenize(a,b)},"`":function(a,b){if(!v||!a.match("`"))return!1;b.tokenize=
v;v=null;return b.tokenize(a,b)},"'":function(a){a.eatWhile(/[\w\$_\xa1-\uffff]/);return"atom"},token:function(a,b,c){if(("variable"==c||"type"==c)&&"."==b.prevToken)return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:commonlisp', location = '/static/lib/CodeMirror/mode/commonlisp/commonlisp.js' */
(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){e.defineMode("commonlisp",function(e){function f(a){for(var b;b=a.next();)if("\\"==b)a.next();else if(!k.test(b)){a.backUp(1);break}return a.current()}function g(a,b){if(a.eatSpace())return d="ws",null;if(a.match(l))return"number";var c=a.next();"\\"==c&&(c=a.next());if('"'==c)return(b.tokenize=m)(a,b);
if("("==c)return d="open","bracket";if(")"==c||"]"==c)return d="close","bracket";if(";"==c)return a.skipToEnd(),d="ws","comment";if(/['`,@]/.test(c))return null;if("|"==c){if(a.skipTo("|"))return a.next(),"symbol";a.skipToEnd();return"error"}if("#"==c)return c=a.next(),"("==c?(d="open","bracket"):/[+\-=\.']/.test(c)||/\d/.test(c)&&a.match(/^\d*#/)?null:"|"==c?(b.tokenize=n)(a,b):":"==c?(f(a),"meta"):"\\"==c?(a.next(),f(a),"string-2"):"error";a=f(a);if("."==a)return null;d="symbol";return"nil"==a||
"t"==a||":"==a.charAt(0)?"atom":"open"==b.lastType&&(p.test(a)||h.test(a))?"keyword":"\x26"==a.charAt(0)?"variable-2":"variable"}function m(a,b){for(var c=!1,d;d=a.next();){if('"'==d&&!c){b.tokenize=g;break}c=!c&&"\\"==d}return"string"}function n(a,b){for(var c,e;c=a.next();){if("#"==c&&"|"==e){b.tokenize=g;break}e=c}d="ws";return"comment"}var p=/^(block|let*|return-from|catch|load-time-value|setq|eval-when|locally|symbol-macrolet|flet|macrolet|tagbody|function|multiple-value-call|the|go|multiple-value-prog1|throw|if|progn|unwind-protect|labels|progv|let|quote)$/,
h=/^with|^def|^do|^prog|case$|^cond$|bind$|when$|unless$/,l=/^(?:[+\-]?(?:\d+|\d*\.\d+)(?:[efd][+\-]?\d+)?|[+\-]?\d+(?:\/[+\-]?\d+)?|#b[+\-]?[01]+|#o[+\-]?[0-7]+|#x[+\-]?[\da-f]+)/,k=/[^\s'`,@()\[\]";]/,d;return{startState:function(){return{ctx:{prev:null,start:0,indentTo:0},lastType:null,tokenize:g}},token:function(a,b){a.sol()&&"number"!=typeof b.ctx.indentTo&&(b.ctx.indentTo=b.ctx.start+1);d=null;var c=b.tokenize(a,b);"ws"!=d&&(null==b.ctx.indentTo?"symbol"==d&&h.test(a.current())?b.ctx.indentTo=
b.ctx.start+e.indentUnit:b.ctx.indentTo="next":"next"==b.ctx.indentTo&&(b.ctx.indentTo=a.column()),b.lastType=d);"open"==d?b.ctx={prev:b.ctx,start:a.column(),indentTo:null}:"close"==d&&(b.ctx=b.ctx.prev||b.ctx);return c},indent:function(a,b){b=a.ctx.indentTo;return"number"==typeof b?b:a.ctx.start+1},closeBrackets:{pairs:'()[]{}""'},lineComment:";;",blockCommentStart:"#|",blockCommentEnd:"|#"}});e.defineMIME("text/x-common-lisp","commonlisp")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:css', location = '/static/lib/CodeMirror/mode/css/css.js' */
(function(k){"object"==typeof exports&&"object"==typeof module?k(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],k):k(CodeMirror)})(function(k){function l(d){for(var e={},f=0;f<d.length;++f)e[d[f].toLowerCase()]=!0;return e}function m(d,e){for(var f=!1,k;null!=(k=d.next());){if(f&&"/"==k){e.tokenize=null;break}f="*"==k}return["comment","comment"]}k.defineMode("css",function(d,e){function f(a,c){G=c;return a}function l(a,c){var b=a.next();if(w[b]){var d=
w[b](a,c);if(!1!==d)return d}if("@"==b)return a.eatWhile(/[\w\\\-]/),f("def",a.current());if("\x3d"==b||("~"==b||"|"==b)&&a.eat("\x3d"))return f(null,"compare");if('"'==b||"'"==b)return c.tokenize=m(b),c.tokenize(a,c);if("#"==b)return a.eatWhile(/[\w\\\-]/),f("atom","hash");if("!"==b)return a.match(/^\s*\w*/),f("keyword","important");if(/\d/.test(b)||"."==b&&a.eat(/\d/))return a.eatWhile(/[\w.%]/),f("number","unit");if("-"===b){if(/[\d.]/.test(a.peek()))return a.eatWhile(/[\w.%]/),f("number","unit");
if(a.match(/^-[\w\\\-]+/))return a.eatWhile(/[\w\\\-]/),a.match(/^\s*:/,!1)?f("variable-2","variable-definition"):f("variable-2","variable");if(a.match(/^\w+-/))return f("meta","meta")}else return/[,+>*\/]/.test(b)?f(null,"select-op"):"."==b&&a.match(/^-?[_a-z][_a-z0-9-]*/i)?f("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(b)?f(null,b):"u"==b&&a.match(/rl(-prefix)?\(/)||"d"==b&&a.match("omain(")||"r"==b&&a.match("egexp(")?(a.backUp(1),c.tokenize=y,f("property","word")):/[\w\\\-]/.test(b)?(a.eatWhile(/[\w\\\-]/),
f("property","word")):f(null,null)}function m(a){return function(c,b){for(var d=!1,e;null!=(e=c.next());){if(e==a&&!d){")"==a&&c.backUp(1);break}d=!d&&"\\"==e}if(e==a||!d&&")"!=a)b.tokenize=null;return f("string","string")}}function y(a,c){a.next();a.match(/\s*[\"\')]/,!1)?c.tokenize=null:c.tokenize=m(")");return f(null,"(")}function r(a,c,b){this.type=a;this.indent=c;this.prev=b}function h(a,c,b,d){a.context=new r(b,c.indentation()+(!1===d?0:v),a.context);return b}function n(a){a.context.prev&&(a.context=
a.context.prev);return a.context.type}function q(a,c,b,d){for(d=d||1;0<d;d--)b.context=b.context.prev;return p[b.context.type](a,c,b)}function t(a){a=a.current().toLowerCase();g=F.hasOwnProperty(a)?"atom":E.hasOwnProperty(a)?"keyword":"variable"}var u=e.inline;e.propertyKeywords||(e=k.resolveMode("text/css"));var v=d.indentUnit,w=e.tokenHooks,z=e.documentTypes||{},A=e.mediaTypes||{},D=e.mediaFeatures||{},H=e.mediaValueKeywords||{},B=e.propertyKeywords||{},C=e.nonStandardPropertyKeywords||{},I=e.fontProperties||
{},J=e.counterDescriptors||{},E=e.colorKeywords||{},F=e.valueKeywords||{},x=e.allowNested,K=!0===e.supportsAtComponent,G,g,p={top:function(a,c,b){if("{"==a)return h(b,c,"block");if("}"==a&&b.context.prev)return n(b);if(K&&/@component/.test(a))return h(b,c,"atComponentBlock");if(/^@(-moz-)?document$/.test(a))return h(b,c,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/.test(a))return h(b,c,"atBlock");if(/^@(font-face|counter-style)/.test(a))return b.stateArg=a,"restricted_atBlock_before";
if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(a))return"keyframes";if(a&&"@"==a.charAt(0))return h(b,c,"at");if("hash"==a)g="builtin";else if("word"==a)g="tag";else{if("variable-definition"==a)return"maybeprop";if("interpolation"==a)return h(b,c,"interpolation");if(":"==a)return"pseudo";if(x&&"("==a)return h(b,c,"parens")}return b.context.type},block:function(a,c,b){if("word"==a){a=c.current().toLowerCase();if(B.hasOwnProperty(a))return g="property","maybeprop";if(C.hasOwnProperty(a))return g="string-2",
"maybeprop";if(x)return g=c.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block";g+=" error";return"maybeprop"}if("meta"==a)return"block";if(x||"hash"!=a&&"qualifier"!=a)return p.top(a,c,b);g="error";return"block"},maybeprop:function(a,c,b){return":"==a?h(b,c,"prop"):p[b.context.type](a,c,b)},prop:function(a,c,b){if(";"==a)return n(b);if("{"==a&&x)return h(b,c,"propBlock");if("}"==a||"{"==a)return q(a,c,b);if("("==a)return h(b,c,"parens");if("hash"==a&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(c.current()))g+=
" error";else if("word"==a)t(c);else if("interpolation"==a)return h(b,c,"interpolation");return"prop"},propBlock:function(a,c,b){return"}"==a?n(b):"word"==a?(g="property","maybeprop"):b.context.type},parens:function(a,c,b){if("{"==a||"}"==a)return q(a,c,b);if(")"==a)return n(b);if("("==a)return h(b,c,"parens");if("interpolation"==a)return h(b,c,"interpolation");"word"==a&&t(c);return"parens"},pseudo:function(a,c,b){return"meta"==a?"pseudo":"word"==a?(g="variable-3",b.context.type):p[b.context.type](a,
c,b)},documentTypes:function(a,c,b){return"word"==a&&z.hasOwnProperty(c.current())?(g="tag",b.context.type):p.atBlock(a,c,b)},atBlock:function(a,c,b){if("("==a)return h(b,c,"atBlock_parens");if("}"==a||";"==a)return q(a,c,b);if("{"==a)return n(b)&&h(b,c,x?"block":"top");if("interpolation"==a)return h(b,c,"interpolation");"word"==a&&(a=c.current().toLowerCase(),g="only"==a||"not"==a||"and"==a||"or"==a?"keyword":A.hasOwnProperty(a)?"attribute":D.hasOwnProperty(a)?"property":H.hasOwnProperty(a)?"keyword":
B.hasOwnProperty(a)?"property":C.hasOwnProperty(a)?"string-2":F.hasOwnProperty(a)?"atom":E.hasOwnProperty(a)?"keyword":"error");return b.context.type},atComponentBlock:function(a,c,b){if("}"==a)return q(a,c,b);if("{"==a)return n(b)&&h(b,c,x?"block":"top",!1);"word"==a&&(g="error");return b.context.type},atBlock_parens:function(a,c,b){return")"==a?n(b):"{"==a||"}"==a?q(a,c,b,2):p.atBlock(a,c,b)},restricted_atBlock_before:function(a,c,b){return"{"==a?h(b,c,"restricted_atBlock"):"word"==a&&"@counter-style"==
b.stateArg?(g="variable","restricted_atBlock_before"):p[b.context.type](a,c,b)},restricted_atBlock:function(a,c,b){return"}"==a?(b.stateArg=null,n(b)):"word"==a?(g="@font-face"==b.stateArg&&!I.hasOwnProperty(c.current().toLowerCase())||"@counter-style"==b.stateArg&&!J.hasOwnProperty(c.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(a,c,b){return"word"==a?(g="variable","keyframes"):"{"==a?h(b,c,"top"):p[b.context.type](a,c,b)},at:function(a,c,b){if(";"==
a)return n(b);if("{"==a||"}"==a)return q(a,c,b);"word"==a?g="tag":"hash"==a&&(g="builtin");return"at"},interpolation:function(a,c,b){if("}"==a)return n(b);if("{"==a||";"==a)return q(a,c,b);"word"==a?g="variable":"variable"!=a&&"("!=a&&")"!=a&&(g="error");return"interpolation"}};return{startState:function(a){return{tokenize:null,state:u?"block":"top",stateArg:null,context:new r(u?"block":"top",a||0,null)}},token:function(a,c){if(!c.tokenize&&a.eatSpace())return null;var b=(c.tokenize||l)(a,c);b&&"object"==
typeof b&&(G=b[1],b=b[0]);g=b;"comment"!=G&&(c.state=p[c.state](G,a,c));return g},indent:function(a,c){a=a.context;c=c&&c.charAt(0);var b=a.indent;"prop"!=a.type||"}"!=c&&")"!=c||(a=a.prev);if(a.prev)if("}"==c&&("block"==a.type||"top"==a.type||"interpolation"==a.type||"restricted_atBlock"==a.type))a=a.prev,b=a.indent;else if(")"==c&&("parens"==a.type||"atBlock_parens"==a.type)||"{"==c&&("at"==a.type||"atBlock"==a.type))b=Math.max(0,a.indent-v);return b},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",
lineComment:e.lineComment,fold:"brace"}});var y=["domain","regexp","url","url-prefix"],H=l(y),B="all aural braille handheld print projection screen tty tv embossed".split(" "),r=l(B),C="width min-width max-width height min-height max-height device-width min-device-width max-device-width device-height min-device-height max-device-height aspect-ratio min-aspect-ratio max-aspect-ratio device-aspect-ratio min-device-aspect-ratio max-device-aspect-ratio color min-color max-color color-index min-color-index max-color-index monochrome min-monochrome max-monochrome resolution min-resolution max-resolution scan grid orientation device-pixel-ratio min-device-pixel-ratio max-device-pixel-ratio pointer any-pointer hover any-hover".split(" "),
t=l(C),I="landscape portrait none coarse fine on-demand hover interlace progressive".split(" "),D=l(I),J="align-content align-items align-self alignment-adjust alignment-baseline anchor-point animation animation-delay animation-direction animation-duration animation-fill-mode animation-iteration-count animation-name animation-play-state animation-timing-function appearance azimuth backface-visibility background background-attachment background-blend-mode background-clip background-color background-image background-origin background-position background-repeat background-size baseline-shift binding bleed bookmark-label bookmark-level bookmark-state bookmark-target border border-bottom border-bottom-color border-bottom-left-radius border-bottom-right-radius border-bottom-style border-bottom-width border-collapse border-color border-image border-image-outset border-image-repeat border-image-slice border-image-source border-image-width border-left border-left-color border-left-style border-left-width border-radius border-right border-right-color border-right-style border-right-width border-spacing border-style border-top border-top-color border-top-left-radius border-top-right-radius border-top-style border-top-width border-width bottom box-decoration-break box-shadow box-sizing break-after break-before break-inside caption-side caret-color clear clip color color-profile column-count column-fill column-gap column-rule column-rule-color column-rule-style column-rule-width column-span column-width columns content counter-increment counter-reset crop cue cue-after cue-before cursor direction display dominant-baseline drop-initial-after-adjust drop-initial-after-align drop-initial-before-adjust drop-initial-before-align drop-initial-size drop-initial-value elevation empty-cells fit fit-position flex flex-basis flex-direction flex-flow flex-grow flex-shrink flex-wrap float float-offset flow-from flow-into font font-feature-settings font-family font-kerning font-language-override font-size font-size-adjust font-stretch font-style font-synthesis font-variant font-variant-alternates font-variant-caps font-variant-east-asian font-variant-ligatures font-variant-numeric font-variant-position font-weight grid grid-area grid-auto-columns grid-auto-flow grid-auto-rows grid-column grid-column-end grid-column-gap grid-column-start grid-gap grid-row grid-row-end grid-row-gap grid-row-start grid-template grid-template-areas grid-template-columns grid-template-rows hanging-punctuation height hyphens icon image-orientation image-rendering image-resolution inline-box-align justify-content justify-items justify-self left letter-spacing line-break line-height line-stacking line-stacking-ruby line-stacking-shift line-stacking-strategy list-style list-style-image list-style-position list-style-type margin margin-bottom margin-left margin-right margin-top marks marquee-direction marquee-loop marquee-play-count marquee-speed marquee-style max-height max-width min-height min-width move-to nav-down nav-index nav-left nav-right nav-up object-fit object-position opacity order orphans outline outline-color outline-offset outline-style outline-width overflow overflow-style overflow-wrap overflow-x overflow-y padding padding-bottom padding-left padding-right padding-top page page-break-after page-break-before page-break-inside page-policy pause pause-after pause-before perspective perspective-origin pitch pitch-range place-content place-items place-self play-during position presentation-level punctuation-trim quotes region-break-after region-break-before region-break-inside region-fragment rendering-intent resize rest rest-after rest-before richness right rotation rotation-point ruby-align ruby-overhang ruby-position ruby-span shape-image-threshold shape-inside shape-margin shape-outside size speak speak-as speak-header speak-numeral speak-punctuation speech-rate stress string-set tab-size table-layout target target-name target-new target-position text-align text-align-last text-decoration text-decoration-color text-decoration-line text-decoration-skip text-decoration-style text-emphasis text-emphasis-color text-emphasis-position text-emphasis-style text-height text-indent text-justify text-outline text-overflow text-shadow text-size-adjust text-space-collapse text-transform text-underline-position text-wrap top transform transform-origin transform-style transition transition-delay transition-duration transition-property transition-timing-function unicode-bidi user-select vertical-align visibility voice-balance voice-duration voice-family voice-pitch voice-range voice-rate voice-stress voice-volume volume white-space widows width will-change word-break word-spacing word-wrap z-index clip-path clip-rule mask enable-background filter flood-color flood-opacity lighting-color stop-color stop-opacity pointer-events color-interpolation color-interpolation-filters color-rendering fill fill-opacity fill-rule image-rendering marker marker-end marker-mid marker-start shape-rendering stroke stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-rendering baseline-shift dominant-baseline glyph-orientation-horizontal glyph-orientation-vertical text-anchor writing-mode".split(" "),
u=l(J),E="scrollbar-arrow-color scrollbar-base-color scrollbar-dark-shadow-color scrollbar-face-color scrollbar-highlight-color scrollbar-shadow-color scrollbar-3d-light-color scrollbar-track-color shape-inside searchfield-cancel-button searchfield-decoration searchfield-results-button searchfield-results-decoration zoom".split(" "),v=l(E),w=l("font-family src unicode-range font-variant font-feature-settings font-stretch font-weight font-style".split(" ")),F=l("additive-symbols fallback negative pad prefix range speak-as suffix symbols system".split(" ")),
K="aliceblue antiquewhite aqua aquamarine azure beige bisque black blanchedalmond blue blueviolet brown burlywood cadetblue chartreuse chocolate coral cornflowerblue cornsilk crimson cyan darkblue darkcyan darkgoldenrod darkgray darkgreen darkkhaki darkmagenta darkolivegreen darkorange darkorchid darkred darksalmon darkseagreen darkslateblue darkslategray darkturquoise darkviolet deeppink deepskyblue dimgray dodgerblue firebrick floralwhite forestgreen fuchsia gainsboro ghostwhite gold goldenrod gray grey green greenyellow honeydew hotpink indianred indigo ivory khaki lavender lavenderblush lawngreen lemonchiffon lightblue lightcoral lightcyan lightgoldenrodyellow lightgray lightgreen lightpink lightsalmon lightseagreen lightskyblue lightslategray lightsteelblue lightyellow lime limegreen linen magenta maroon mediumaquamarine mediumblue mediumorchid mediumpurple mediumseagreen mediumslateblue mediumspringgreen mediumturquoise mediumvioletred midnightblue mintcream mistyrose moccasin navajowhite navy oldlace olive olivedrab orange orangered orchid palegoldenrod palegreen paleturquoise palevioletred papayawhip peachpuff peru pink plum powderblue purple rebeccapurple red rosybrown royalblue saddlebrown salmon sandybrown seagreen seashell sienna silver skyblue slateblue slategray snow springgreen steelblue tan teal thistle tomato turquoise violet wheat white whitesmoke yellow yellowgreen".split(" "),
z=l(K),L="above absolute activeborder additive activecaption afar after-white-space ahead alias all all-scroll alphabetic alternate always amharic amharic-abegede antialiased appworkspace arabic-indic armenian asterisks attr auto auto-flow avoid avoid-column avoid-page avoid-region background backwards baseline below bidi-override binary bengali blink block block-axis bold bolder border border-box both bottom break break-all break-word bullets button button-bevel buttonface buttonhighlight buttonshadow buttontext calc cambodian capitalize caps-lock-indicator caption captiontext caret cell center checkbox circle cjk-decimal cjk-earthly-branch cjk-heavenly-stem cjk-ideographic clear clip close-quote col-resize collapse color color-burn color-dodge column column-reverse compact condensed contain content contents content-box context-menu continuous copy counter counters cover crop cross crosshair currentcolor cursive cyclic darken dashed decimal decimal-leading-zero default default-button dense destination-atop destination-in destination-out destination-over devanagari difference disc discard disclosure-closed disclosure-open document dot-dash dot-dot-dash dotted double down e-resize ease ease-in ease-in-out ease-out element ellipse ellipsis embed end ethiopic ethiopic-abegede ethiopic-abegede-am-et ethiopic-abegede-gez ethiopic-abegede-ti-er ethiopic-abegede-ti-et ethiopic-halehame-aa-er ethiopic-halehame-aa-et ethiopic-halehame-am-et ethiopic-halehame-gez ethiopic-halehame-om-et ethiopic-halehame-sid-et ethiopic-halehame-so-et ethiopic-halehame-ti-er ethiopic-halehame-ti-et ethiopic-halehame-tig ethiopic-numeric ew-resize exclusion expanded extends extra-condensed extra-expanded fantasy fast fill fixed flat flex flex-end flex-start footnotes forwards from geometricPrecision georgian graytext grid groove gujarati gurmukhi hand hangul hangul-consonant hard-light hebrew help hidden hide higher highlight highlighttext hiragana hiragana-iroha horizontal hsl hsla hue icon ignore inactiveborder inactivecaption inactivecaptiontext infinite infobackground infotext inherit initial inline inline-axis inline-block inline-flex inline-grid inline-table inset inside intrinsic invert italic japanese-formal japanese-informal justify kannada katakana katakana-iroha keep-all khmer korean-hangul-formal korean-hanja-formal korean-hanja-informal landscape lao large larger left level lighter lighten line-through linear linear-gradient lines list-item listbox listitem local logical loud lower lower-alpha lower-armenian lower-greek lower-hexadecimal lower-latin lower-norwegian lower-roman lowercase ltr luminosity malayalam match matrix matrix3d media-controls-background media-current-time-display media-fullscreen-button media-mute-button media-play-button media-return-to-realtime-button media-rewind-button media-seek-back-button media-seek-forward-button media-slider media-sliderthumb media-time-remaining-display media-volume-slider media-volume-slider-container media-volume-sliderthumb medium menu menulist menulist-button menulist-text menulist-textfield menutext message-box middle min-intrinsic mix mongolian monospace move multiple multiply myanmar n-resize narrower ne-resize nesw-resize no-close-quote no-drop no-open-quote no-repeat none normal not-allowed nowrap ns-resize numbers numeric nw-resize nwse-resize oblique octal opacity open-quote optimizeLegibility optimizeSpeed oriya oromo outset outside outside-shape overlay overline padding padding-box painted page paused persian perspective plus-darker plus-lighter pointer polygon portrait pre pre-line pre-wrap preserve-3d progress push-button radial-gradient radio read-only read-write read-write-plaintext-only rectangle region relative repeat repeating-linear-gradient repeating-radial-gradient repeat-x repeat-y reset reverse rgb rgba ridge right rotate rotate3d rotateX rotateY rotateZ round row row-resize row-reverse rtl run-in running s-resize sans-serif saturation scale scale3d scaleX scaleY scaleZ screen scroll scrollbar scroll-position se-resize searchfield searchfield-cancel-button searchfield-decoration searchfield-results-button searchfield-results-decoration self-start self-end semi-condensed semi-expanded separate serif show sidama simp-chinese-formal simp-chinese-informal single skew skewX skewY skip-white-space slide slider-horizontal slider-vertical sliderthumb-horizontal sliderthumb-vertical slow small small-caps small-caption smaller soft-light solid somali source-atop source-in source-out source-over space space-around space-between space-evenly spell-out square square-button start static status-bar stretch stroke sub subpixel-antialiased super sw-resize symbolic symbols system-ui table table-caption table-cell table-column table-column-group table-footer-group table-header-group table-row table-row-group tamil telugu text text-bottom text-top textarea textfield thai thick thin threeddarkshadow threedface threedhighlight threedlightshadow threedshadow tibetan tigre tigrinya-er tigrinya-er-abegede tigrinya-et tigrinya-et-abegede to top trad-chinese-formal trad-chinese-informal transform translate translate3d translateX translateY translateZ transparent ultra-condensed ultra-expanded underline unset up upper-alpha upper-armenian upper-greek upper-hexadecimal upper-latin upper-norwegian upper-roman uppercase urdu url var vertical vertical-text visible visibleFill visiblePainted visibleStroke visual w-resize wait wave wider window windowframe windowtext words wrap wrap-reverse x-large x-small xor xx-large xx-small".split(" "),
A=l(L);y=y.concat(B).concat(C).concat(I).concat(J).concat(E).concat(K).concat(L);k.registerHelper("hintWords","css",y);k.defineMIME("text/css",{documentTypes:H,mediaTypes:r,mediaFeatures:t,mediaValueKeywords:D,propertyKeywords:u,nonStandardPropertyKeywords:v,fontProperties:w,counterDescriptors:F,colorKeywords:z,valueKeywords:A,tokenHooks:{"/":function(d,e){if(!d.eat("*"))return!1;e.tokenize=m;return m(d,e)}},name:"css"});k.defineMIME("text/x-scss",{mediaTypes:r,mediaFeatures:t,mediaValueKeywords:D,
propertyKeywords:u,nonStandardPropertyKeywords:v,colorKeywords:z,valueKeywords:A,fontProperties:w,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(d,e){return d.eat("/")?(d.skipToEnd(),["comment","comment"]):d.eat("*")?(e.tokenize=m,m(d,e)):["operator","operator"]},":":function(d){return d.match(/\s*\{/,!1)?[null,null]:!1},$:function(d){d.match(/^[\w-]+/);return d.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(d){return d.eat("{")?[null,"interpolation"]:
!1}},name:"css",helperType:"scss"});k.defineMIME("text/x-less",{mediaTypes:r,mediaFeatures:t,mediaValueKeywords:D,propertyKeywords:u,nonStandardPropertyKeywords:v,colorKeywords:z,valueKeywords:A,fontProperties:w,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(d,e){return d.eat("/")?(d.skipToEnd(),["comment","comment"]):d.eat("*")?(e.tokenize=m,m(d,e)):["operator","operator"]},"@":function(d){if(d.eat("{"))return[null,"interpolation"];if(d.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,
!1))return!1;d.eatWhile(/[\w\\\-]/);return d.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"\x26":function(){return["atom","atom"]}},name:"css",helperType:"less"});k.defineMIME("text/x-gss",{documentTypes:H,mediaTypes:r,mediaFeatures:t,propertyKeywords:u,nonStandardPropertyKeywords:v,fontProperties:w,counterDescriptors:F,colorKeywords:z,valueKeywords:A,supportsAtComponent:!0,tokenHooks:{"/":function(d,e){if(!d.eat("*"))return!1;e.tokenize=m;return m(d,e)}},name:"css",
helperType:"gss"})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:javascript', location = '/static/lib/CodeMirror/mode/javascript/javascript.js' */
(function(p){"object"==typeof exports&&"object"==typeof module?p(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],p):p(CodeMirror)})(function(p){p.defineMode("javascript",function(ya,t){function n(a,c,b){I=a;P=b;return c}function z(a,c){var b=a.next();if('"'==b||"'"==b)return c.tokenize=za(b),c.tokenize(a,c);if("."==b&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return n("number","number");if("."==b&&a.match(".."))return n("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(b))return n(b);
if("\x3d"==b&&a.eat("\x3e"))return n("\x3d\x3e","operator");if("0"==b&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),n("number","number");if("0"==b&&a.eat(/o/i))return a.eatWhile(/[0-7]/i),n("number","number");if("0"==b&&a.eat(/b/i))return a.eatWhile(/[01]/i),n("number","number");if(/\d/.test(b))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),n("number","number");if("/"==b){if(a.eat("*"))return c.tokenize=Q,Q(a,c);if(a.eat("/"))return a.skipToEnd(),n("comment","comment");if(ka(a,c,1)){a:for(var f=
c=!1;null!=(b=a.next());){if(!c){if("/"==b&&!f)break a;"["==b?f=!0:f&&"]"==b&&(f=!1)}c=!c&&"\\"==b}a.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);return n("regexp","string-2")}a.eatWhile(R);return n("operator","operator",a.current())}if("`"==b)return c.tokenize=Z,Z(a,c);if("#"==b)return a.skipToEnd(),n("error","error");if(R.test(b))return"\x3e"==b&&c.lexical&&"\x3e"==c.lexical.type||a.eatWhile(R),n("operator","operator",a.current());if(aa.test(b)){a.eatWhile(aa);b=a.current();if("."!=c.lastType){if(la.propertyIsEnumerable(b))return a=
la[b],n(a.type,a.style,b);if("async"==b&&a.match(/^\s*[\(\w]/,!1))return n("async","keyword",b)}return n("variable","variable",b)}}function za(a){return function(c,b){var f=!1,k;if(S&&"@"==c.peek()&&c.match(Aa))return b.tokenize=z,n("jsonld-keyword","meta");for(;null!=(k=c.next())&&(k!=a||f);)f=!f&&"\\"==k;f||(b.tokenize=z);return n("string","string")}}function Q(a,c){for(var b=!1,f;f=a.next();){if("/"==f&&b){c.tokenize=z;break}b="*"==f}return n("comment","comment")}function Z(a,c){for(var b=!1,f;null!=
(f=a.next());){if(!b&&("`"==f||"$"==f&&a.eat("{"))){c.tokenize=z;break}b=!b&&"\\"==f}return n("quasi","string-2",a.current())}function ba(a,c){c.fatArrowAt&&(c.fatArrowAt=null);var b=a.string.indexOf("\x3d\x3e",a.start);if(!(0>b)){if(u){var f=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(a.string.slice(a.start,b));f&&(b=f.index)}f=0;var d=!1;for(--b;0<=b;--b){var E=a.string.charAt(b),e="([{}])".indexOf(E);if(0<=e&&3>e){if(!f){++b;break}if(0==--f){"("==E&&(d=!0);break}}else if(3<=e&&6>e)++f;else if(aa.test(E))d=
!0;else{if(/["'\/]/.test(E))return;if(d&&!f){++b;break}}}d&&!f&&(c.fatArrowAt=b)}}function na(a,b,d,f,e,E){this.indented=a;this.column=b;this.type=d;this.prev=e;this.info=E;null!=f&&(this.align=f)}function h(){for(var a=arguments.length-1;0<=a;a--)d.cc.push(arguments[a])}function b(){h.apply(null,arguments);return!0}function J(a){function b(b){for(;b;b=b.next)if(b.name==a)return!0;return!1}var k=d.state;d.marked="def";k.context?b(k.localVars)||(k.localVars={name:a,next:k.localVars}):!b(k.globalVars)&&
t.globalVars&&(k.globalVars={name:a,next:k.globalVars})}function K(){d.state.context={prev:d.state.context,vars:d.state.localVars};d.state.localVars=Ba}function L(){d.state.localVars=d.state.context.vars;d.state.context=d.state.context.prev}function g(a,b){var c=function(){var c=d.state,k=c.indented;if("stat"==c.lexical.type)k=c.lexical.indented;else for(var e=c.lexical;e&&")"==e.type&&e.align;e=e.prev)k=e.indented;c.lexical=new na(k,d.stream.column(),a,null,c.lexical,b)};c.lex=!0;return c}function e(){var a=
d.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function l(a){function c(d){return d==a?b():";"==a?h():b(c)}return c}function r(a,c){return"var"==a?b(g("vardef",c.length),ca,l(";"),e):"keyword a"==a?b(g("form"),da,r,e):"keyword b"==a?b(g("form"),r,e):"{"==a?b(g("}"),T,e):";"==a?b():"if"==a?("else"==d.state.lexical.info&&d.state.cc[d.state.cc.length-1]==e&&d.state.cc.pop()(),b(g("form"),da,r,e,oa)):"function"==a?b(x):"for"==a?b(g("form"),Ca,r,
e):"variable"==a?u&&"type"==c?(d.marked="keyword",b(q,l("operator"),q,l(";"))):u&&"declare"==c?(d.marked="keyword",b(r)):b(g("stat"),Da):"switch"==a?b(g("form"),da,l("{"),g("}","switch"),T,e,e):"case"==a?b(m,l(":")):"default"==a?b(l(":")):"catch"==a?b(g("form"),K,l("("),ea,l(")"),r,e,L):"class"==a?b(g("form"),pa,e):"export"==a?b(g("stat"),Ea,e):"import"==a?b(g("stat"),Fa,e):"module"==a?b(g("form"),y,l("{"),g("}"),T,e,e):"async"==a?b(r):"@"==c?b(m,r):h(g("stat"),m,l(";"),e)}function m(a){return qa(a,
!1)}function v(a){return qa(a,!0)}function da(a){return"("!=a?h():b(g(")"),m,l(")"),e)}function qa(a,c){if(d.state.fatArrowAt==d.stream.start){var k=c?ra:sa;if("("==a)return b(K,g(")"),w(y,")"),e,l("\x3d\x3e"),k,L);if("variable"==a)return h(K,y,l("\x3d\x3e"),k,L)}k=c?F:A;return Ga.hasOwnProperty(a)?b(k):"function"==a?b(x,k):"class"==a?b(g("form"),Ha,e):"keyword c"==a||"async"==a?b(c?Ia:fa):"("==a?b(g(")"),fa,l(")"),e,k):"operator"==a||"spread"==a?b(c?v:m):"["==a?b(g("]"),Ja,e,k):"{"==a?M(ha,"}",null,
k):"quasi"==a?h(U,k):"new"==a?b(Ka(c)):b()}function fa(a){return a.match(/[;\}\)\],]/)?h():h(m)}function Ia(a){return a.match(/[;\}\)\],]/)?h():h(v)}function A(a,c){return","==a?b(m):F(a,c,!1)}function F(a,c,k){var f=0==k?A:F,ma=0==k?m:v;if("\x3d\x3e"==a)return b(K,k?ra:sa,L);if("operator"==a)return/\+\+|--/.test(c)||u&&"!"==c?b(f):"?"==c?b(m,l(":"),ma):b(ma);if("quasi"==a)return h(U,f);if(";"!=a){if("("==a)return M(v,")","call",f);if("."==a)return b(La,f);if("["==a)return b(g("]"),fa,l("]"),e,f);
if(u&&"as"==c)return d.marked="keyword",b(q,f)}}function U(a,c){return"quasi"!=a?h():"${"!=c.slice(c.length-2)?b(U):b(m,Ma)}function Ma(a){if("}"==a)return d.marked="string-2",d.state.tokenize=Z,b(U)}function sa(a){ba(d.stream,d.state);return h("{"==a?r:m)}function ra(a){ba(d.stream,d.state);return h("{"==a?r:v)}function Ka(a){return function(c){return"."==c?b(a?Na:Oa):"variable"==c&&u?b(Pa,a?F:A):h(a?v:m)}}function Oa(a,c){if("target"==c)return d.marked="keyword",b(A)}function Na(a,c){if("target"==
c)return d.marked="keyword",b(F)}function Da(a){return":"==a?b(e,r):h(A,l(";"),e)}function La(a){if("variable"==a)return d.marked="property",b()}function ha(a,c){if("async"==a)return d.marked="property",b(ha);if("variable"==a||"keyword"==d.style)return d.marked="property","get"==c||"set"==c?b(Qa):b(B);if("number"==a||"string"==a)return d.marked=S?"property":d.style+" property",b(B);if("jsonld-keyword"==a)return b(B);if("modifier"==a)return b(ha);if("["==a)return b(m,l("]"),B);if("spread"==a)return b(m,
B);if(":"==a)return h(B)}function Qa(a){if("variable"!=a)return h(B);d.marked="property";return b(x)}function B(a){if(":"==a)return b(v);if("("==a)return h(x)}function w(a,c,k){function f(e,g){return(k?-1<k.indexOf(e):","==e)?(e=d.state.lexical,"call"==e.info&&(e.pos=(e.pos||0)+1),b(function(b,f){return b==c||f==c?h():h(a)},f)):e==c||g==c?b():b(l(c))}return function(d,e){return d==c||e==c?b():h(a,f)}}function M(a,c,k){for(var f=3;f<arguments.length;f++)d.cc.push(arguments[f]);return b(g(c,k),w(a,
c),e)}function T(a){return"}"==a?b():h(r,T)}function N(a,c){if(u){if(":"==a)return b(q);if("?"==c)return b(N)}}function q(a,c){if("variable"==a){if("keyof"==c)return d.marked="keyword",b(q);d.marked="type";return b(C)}if("string"==a||"number"==a||"atom"==a)return b(C);if("["==a)return b(g("]"),w(q,"]",","),e,C);if("{"==a)return b(g("}"),w(V,"}",",;"),e,C);if("("==a)return b(w(ta,")"),Ra)}function Ra(a){if("\x3d\x3e"==a)return b(q)}function V(a,c){if("variable"==a||"keyword"==d.style)return d.marked=
"property",b(V);if("?"==c)return b(V);if(":"==a)return b(q);if("["==a)return b(m,N,l("]"),V)}function ta(a){if("variable"==a)return b(ta);if(":"==a)return b(q)}function C(a,c){if("\x3c"==c)return b(g("\x3e"),w(q,"\x3e"),e,C);if("|"==c||"."==a)return b(q);if("["==a)return b(l("]"),C);if("extends"==c)return b(q)}function Pa(a,c){if("\x3c"==c)return b(g("\x3e"),w(q,"\x3e"),e,C)}function ca(){return h(y,N,O,Sa)}function y(a,c){if("modifier"==a)return b(y);if("variable"==a)return J(c),b();if("spread"==
a)return b(y);if("["==a)return M(y,"]");if("{"==a)return M(Ta,"}")}function Ta(a,c){if("variable"==a&&!d.stream.match(/^\s*:/,!1))return J(c),b(O);"variable"==a&&(d.marked="property");return"spread"==a?b(y):"}"==a?h():b(l(":"),y,O)}function O(a,c){if("\x3d"==c)return b(v)}function Sa(a){if(","==a)return b(ca)}function oa(a,c){if("keyword b"==a&&"else"==c)return b(g("form","else"),r,e)}function Ca(a){if("("==a)return b(g(")"),Ua,l(")"),e)}function Ua(a){return"var"==a?b(ca,l(";"),W):";"==a?b(W):"variable"==
a?b(Va):h(m,l(";"),W)}function Va(a,c){return"in"==c||"of"==c?(d.marked="keyword",b(m)):b(A,W)}function W(a,c){return";"==a?b(ua):"in"==c||"of"==c?(d.marked="keyword",b(m)):h(m,l(";"),ua)}function ua(a){")"!=a&&b(m)}function x(a,c){if("*"==c)return d.marked="keyword",b(x);if("variable"==a)return J(c),b(x);if("("==a)return b(K,g(")"),w(ea,")"),e,N,r,L);if(u&&"\x3c"==c)return b(g("\x3e"),w(q,"\x3e"),e,x)}function ea(a){return"spread"==a||"modifier"==a?b(ea):h(y,N,O)}function Ha(a,b){return"variable"==
a?pa(a,b):X(a,b)}function pa(a,c){if("variable"==a)return J(c),b(X)}function X(a,c){if("\x3c"==c)return b(g("\x3e"),w(q,"\x3e"),e,X);if("extends"==c||"implements"==c||u&&","==a)return b(u?q:m,X);if("{"==a)return b(g("}"),D,e)}function D(a,c){if("modifier"==a||"async"==a||"variable"==a&&("static"==c||"get"==c||"set"==c)&&d.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return d.marked="keyword",b(D);if("variable"==a)return d.marked="property",b(u?ia:x,D);if("["==a)return b(m,l("]"),u?ia:x,D);if("*"==c)return d.marked=
"keyword",b(D);if(";"==a)return b(D);if("}"==a)return b();if("@"==c)return b(m,D)}function ia(a,c){return"?"==c?b(ia):":"==a?b(q,O):"\x3d"==c?b(v):h(x)}function Ea(a,c){return"*"==c?(d.marked="keyword",b(ja,l(";"))):"default"==c?(d.marked="keyword",b(m,l(";"))):"{"==a?b(w(va,"}"),ja,l(";")):h(r)}function va(a,c){if("as"==c)return d.marked="keyword",b(l("variable"));if("variable"==a)return h(v,va)}function Fa(a){return"string"==a?b():h(Y,wa,ja)}function Y(a,c){if("{"==a)return M(Y,"}");"variable"==
a&&J(c);"*"==c&&(d.marked="keyword");return b(Wa)}function wa(a){if(","==a)return b(Y,wa)}function Wa(a,c){if("as"==c)return d.marked="keyword",b(Y)}function ja(a,c){if("from"==c)return d.marked="keyword",b(m)}function Ja(a){return"]"==a?b():h(w(v,"]"))}function ka(a,b,d){return b.tokenize==z&&/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(b.lastType)||"quasi"==b.lastType&&/\{\s*$/.test(a.string.slice(0,a.pos-(d||0)))}var G=ya.indentUnit,xa=t.statementIndent,S=t.jsonld,
H=t.json||S,u=t.typescript,aa=t.wordCharacters||/[\w$\xa1-\uffff]/,la=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),d=a("keyword b"),f=a("keyword c"),e=a("operator"),g={type:"atom",style:"atom"};b={"if":a("if"),"while":b,"with":b,"else":d,"do":d,"try":d,"finally":d,"return":f,"break":f,"continue":f,"new":a("new"),"delete":f,"throw":f,"debugger":f,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),
"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":g,"false":g,"null":g,undefined:g,NaN:g,Infinity:g,"this":a("this"),"class":a("class"),"super":a("atom"),yield:f,"export":a("export"),"import":a("import"),"extends":f,await:f};if(u){d={type:"variable",style:"type"};f={"interface":a("class"),"implements":f,namespace:f,module:a("module"),"enum":a("module"),"public":a("modifier"),"private":a("modifier"),"protected":a("modifier"),"abstract":a("modifier"),readonly:a("modifier"),
string:d,number:d,"boolean":d,any:d};for(var h in f)b[h]=f[h]}return b}(),R=/[+\-*&%=<>!?|~^@]/,Aa=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,I,P,Ga={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},d={state:null,column:null,marked:null,cc:null},Ba={name:"this",next:{name:"arguments"}};e.lex=!0;return{startState:function(a){a={tokenize:z,lastType:"sof",cc:[],lexical:new na((a||0)-G,0,"block",!1),localVars:t.localVars,context:t.localVars&&
{vars:t.localVars},indented:a||0};t.globalVars&&"object"==typeof t.globalVars&&(a.globalVars=t.globalVars);return a},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),ba(a,b));if(b.tokenize!=Q&&a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"==I)return c;b.lastType="operator"!=I||"++"!=P&&"--"!=P?I:"incdec";a:{var f=I,e=P,g=b.cc;d.state=b;d.stream=a;d.marked=null;d.cc=g;d.style=c;b.lexical.hasOwnProperty("align")||(b.lexical.align=
!0);for(;;)if((g.length?g.pop():H?m:r)(f,e)){for(;g.length&&g[g.length-1].lex;)g.pop()();if(d.marked){c=d.marked;break a}if(a="variable"==f)b:{for(a=b.localVars;a;a=a.next)if(a.name==e){a=!0;break b}for(b=b.context;b;b=b.prev)for(a=b.vars;a;a=a.next)if(a.name==e){a=!0;break b}a=void 0}if(a){c="variable-2";break a}break a}}return c},indent:function(a,b){if(a.tokenize==Q)return p.Pass;if(a.tokenize!=z)return 0;var c=b&&b.charAt(0),d=a.lexical,g;if(!/^\s*else\b/.test(b))for(var h=a.cc.length-1;0<=h;--h){var l=
a.cc[h];if(l==e)d=d.prev;else if(l!=oa)break}for(;!("stat"!=d.type&&"form"!=d.type||"}"!=c&&(!(g=a.cc[a.cc.length-1])||g!=A&&g!=F||/^[,\.=+\-*:?[\(]/.test(b)));)d=d.prev;xa&&")"==d.type&&"stat"==d.prev.type&&(d=d.prev);g=d.type;h=c==g;return"vardef"==g?d.indented+("operator"==a.lastType||","==a.lastType?d.info+1:0):"form"==g&&"{"==c?d.indented:"form"==g?d.indented+G:"stat"==g?(c=d.indented,a="operator"==a.lastType||","==a.lastType||R.test(b.charAt(0))||/[,.]/.test(b.charAt(0)),c+(a?xa||G:0)):"switch"!=
d.info||h||0==t.doubleIndentSwitch?d.align?d.column+(h?0:1):d.indented+(h?0:G):d.indented+(/^(?:case|default)\b/.test(b)?G:2*G)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:H?null:"/*",blockCommentEnd:H?null:"*/",lineComment:H?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:H?"json":"javascript",jsonldMode:S,jsonMode:H,expressionAllowed:ka,skipExpression:function(a){var b=a.cc[a.cc.length-1];b!=m&&b!=v||a.cc.pop()}}});p.registerHelper("wordChars","javascript",
/[\w$]/);p.defineMIME("text/javascript","javascript");p.defineMIME("text/ecmascript","javascript");p.defineMIME("application/javascript","javascript");p.defineMIME("application/x-javascript","javascript");p.defineMIME("application/ecmascript","javascript");p.defineMIME("application/json",{name:"javascript",json:!0});p.defineMIME("application/x-json",{name:"javascript",json:!0});p.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});p.defineMIME("text/typescript",{name:"javascript",typescript:!0});
p.defineMIME("application/typescript",{name:"javascript",typescript:!0})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:xml', location = '/static/lib/CodeMirror/mode/xml/xml.js' */
(function(g){"object"==typeof exports&&"object"==typeof module?g(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],g):g(CodeMirror)})(function(g){var D={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,
dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,
caseFold:!0},E={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1};g.defineMode("xml",function(p,q){function h(a,c){function b(b){c.tokenize=b;return b(a,c)}var d=a.next();if("\x3c"==d){if(a.eat("!"))return a.eat("[")?a.match("CDATA[")?b(r("atom","]]\x3e")):null:a.match("--")?b(r("comment","--\x3e")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),b(t(1))):null;if(a.eat("?"))return a.eatWhile(/[\w\._\-]/),c.tokenize=r("meta","?\x3e"),
"meta";l=a.eat("/")?"closeTag":"openTag";c.tokenize=u;return"tag bracket"}if("\x26"==d)return(a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"))?"atom":"error";a.eatWhile(/[^&<]/);return null}function u(a,c){var b=a.next();if("\x3e"==b||"/"==b&&a.eat("\x3e"))return c.tokenize=h,l="\x3e"==b?"endTag":"selfcloseTag","tag bracket";if("\x3d"==b)return l="equals",null;if("\x3c"==b)return c.tokenize=h,c.state=m,c.tagName=c.tagStart=
null,(a=c.tokenize(a,c))?a+" tag error":"tag error";if(/[\'\"]/.test(b))return c.tokenize=F(b),c.stringStartCol=a.column(),c.tokenize(a,c);a.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}function F(a){var c=function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=u;break}return"string"};c.isInAttribute=!0;return c}function r(a,c){return function(b,d){for(;!b.eol();){if(b.match(c)){d.tokenize=h;break}b.next()}return a}}function t(a){return function(c,b){for(var d;null!=(d=c.next());){if("\x3c"==
d)return b.tokenize=t(a+1),b.tokenize(c,b);if("\x3e"==d)if(1==a){b.tokenize=h;break}else return b.tokenize=t(a-1),b.tokenize(c,b)}return"meta"}}function G(a,c,b){this.prev=a.context;this.tagName=c;this.indent=a.indented;this.startOfLine=b;if(e.doNotIndent.hasOwnProperty(c)||a.context&&a.context.noIndent)this.noIndent=!0}function v(a){a.context&&(a.context=a.context.prev)}function y(a,c){for(var b;a.context;){b=a.context.tagName;if(!e.contextGrabbers.hasOwnProperty(b)||!e.contextGrabbers[b].hasOwnProperty(c))break;
v(a)}}function m(a,c,b){return"openTag"==a?(b.tagStart=c.column(),z):"closeTag"==a?H:m}function z(a,c,b){if("word"==a)return b.tagName=c.current(),f="tag",k;f="error";return z}function H(a,c,b){if("word"==a){a=c.current();b.context&&b.context.tagName!=a&&e.implicitlyClosed.hasOwnProperty(b.context.tagName)&&v(b);if(b.context&&b.context.tagName==a||!1===e.matchClosing)return f="tag",w;f="tag error";return A}f="error";return A}function w(a,c,b){if("endTag"!=a)return f="error",w;v(b);return m}function A(a,
c,b){f="error";return w(a,c,b)}function k(a,c,b){if("word"==a)return f="attribute",I;if("endTag"==a||"selfcloseTag"==a){c=b.tagName;var d=b.tagStart;b.tagName=b.tagStart=null;"selfcloseTag"==a||e.autoSelfClosers.hasOwnProperty(c)?y(b,c):(y(b,c),b.context=new G(b,c,d==b.indented));return m}f="error";return k}function I(a,c,b){if("equals"==a)return B;e.allowMissing||(f="error");return k(a,c,b)}function B(a,c,b){if("string"==a)return C;if("word"==a&&e.allowUnquoted)return f="string",k;f="error";return k(a,
c,b)}function C(a,c,b){return"string"==a?C:k(a,c,b)}var x=p.indentUnit,e={};p=q.htmlMode?D:E;for(var n in p)e[n]=p[n];for(n in q)e[n]=q[n];var l,f;h.isInText=!0;return{startState:function(a){var c={tokenize:h,state:m,indented:a||0,tagName:null,tagStart:null,context:null};null!=a&&(c.baseIndent=a);return c},token:function(a,c){!c.tagName&&a.sol()&&(c.indented=a.indentation());if(a.eatSpace())return null;l=null;var b=c.tokenize(a,c);(b||l)&&"comment"!=b&&(f=null,c.state=c.state(l||b,a,c),f&&(b="error"==
f?b+" error":f));return b},indent:function(a,c,b){var d=a.context;if(a.tokenize.isInAttribute)return a.tagStart==a.indented?a.stringStartCol+1:a.indented+x;if(d&&d.noIndent)return g.Pass;if(a.tokenize!=u&&a.tokenize!=h)return b?b.match(/^(\s*)/)[0].length:0;if(a.tagName)return!1!==e.multilineTagIndentPastTag?a.tagStart+a.tagName.length+2:a.tagStart+x*(e.multilineTagIndentFactor||1);if(e.alignCDATA&&/<!\[CDATA\[/.test(c))return 0;if((c=c&&/^<(\/)?([\w_:\.-]*)/.exec(c))&&c[1])for(;d;)if(d.tagName==
c[2]){d=d.prev;break}else if(e.implicitlyClosed.hasOwnProperty(d.tagName))d=d.prev;else break;else if(c)for(;d;)if((b=e.contextGrabbers[d.tagName])&&b.hasOwnProperty(c[2]))d=d.prev;else break;for(;d&&d.prev&&!d.startOfLine;)d=d.prev;return d?d.indent+x:a.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:e.htmlMode?"html":"xml",helperType:e.htmlMode?"html":"xml",skipAttribute:function(a){a.state==B&&(a.state=k)}}});g.defineMIME("text/xml",
"xml");g.defineMIME("application/xml","xml");g.mimeModes.hasOwnProperty("text/html")||g.defineMIME("text/html",{name:"xml",htmlMode:!0})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:htmlmixed', location = '/static/lib/CodeMirror/mode/htmlmixed/htmlmixed.js' */
(function(d){"object"==typeof exports&&"object"==typeof module?d(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],d):d(CodeMirror)})(function(d){function p(f){var c=k[f];return c?c:k[f]=new RegExp("\\s+"+f+"\\s*\x3d\\s*('|\")?([^'\"]+)('|\")?\\s*")}function q(f,c){return(f=f.match(p(c)))?/^\s*(.*?)\s*$/.exec(f[2])[1]:
""}function l(f,c){for(var d in f)for(var g=c[d]||(c[d]=[]),h=f[d],e=h.length-1;0<=e;e--)g.unshift(h[e])}function r(d,c){for(var f=0;f<d.length;f++){var g=d[f];if(!g[0]||g[1].test(q(c,g[0])))return g[2]}}var t={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],
[null,null,"css"]]},k={};d.defineMode("htmlmixed",function(f,c){function k(a,b){var c=g.token(a,b.htmlState),e=/\btag\b/.test(c),m;if(e&&!/[<>\s\/]/.test(a.current())&&(m=b.htmlState.tagName&&b.htmlState.tagName.toLowerCase())&&h.hasOwnProperty(m))b.inTag=m+" ";else if(b.inTag&&e&&/>$/.test(a.current())){e=/^([\S]+) (.*)/.exec(b.inTag);b.inTag=null;a="\x3e"==a.current()&&r(h[e[1]],e[2]);a=d.getMode(f,a);var l=new RegExp("^\x3c/s*"+e[1]+"s*\x3e","i"),n=new RegExp("\x3c/s*"+e[1]+"s*\x3e","i");b.token=
function(a,b){if(a.match(l,!1))return b.token=k,b.localState=b.localMode=null;b=b.localMode.token(a,b.localState);var c=a.current(),d=c.search(n);-1<d?a.backUp(c.length-d):c.match(/<\/?$/)&&(a.backUp(c.length),a.match(n,!1)||a.match(c));return b};b.localMode=a;b.localState=d.startState(a,g.indent(b.htmlState,""))}else b.inTag&&(b.inTag+=a.current(),a.eol()&&(b.inTag+=" "));return c}var g=d.getMode(f,{name:"xml",htmlMode:!0,multilineTagIndentFactor:c.multilineTagIndentFactor,multilineTagIndentPastTag:c.multilineTagIndentPastTag}),
h={},e=c&&c.tags;c=c&&c.scriptTypes;l(t,h);e&&l(e,h);if(c)for(e=c.length-1;0<=e;e--)h.script.unshift(["type",c[e].matches,c[e].mode]);return{startState:function(){var a=d.startState(g);return{token:k,inTag:null,localMode:null,localState:null,htmlState:a}},copyState:function(a){var b;a.localState&&(b=d.copyState(a.localMode,a.localState));return{token:a.token,inTag:a.inTag,localMode:a.localMode,localState:b,htmlState:d.copyState(g,a.htmlState)}},token:function(a,b){return b.token(a,b)},indent:function(a,
b,c){return!a.localMode||/^\s*<\//.test(b)?g.indent(a.htmlState,b):a.localMode.indent?a.localMode.indent(a.localState,b,c):d.Pass},innerMode:function(a){return{state:a.localState||a.htmlState,mode:a.localMode||g}}}},"xml","javascript","css");d.defineMIME("text/html","htmlmixed")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:markdown', location = '/static/lib/CodeMirror/mode/markdown/markdown.js' */
(function(k){"object"==typeof exports&&"object"==typeof module?k(require("../../lib/codemirror"),require("../xml/xml"),require("../meta")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../meta"],k):k(CodeMirror)})(function(k){k.defineMode("markdown",function(y,d){function x(b,a,c){a.f=a.inline=c;return c(b,a)}function z(b){b.linkTitle=!1;b.em=!1;b.strong=!1;b.strikethrough=!1;b.quote=0;b.indentedCode=!1;b.f==v&&(b.f=l,b.block=p);b.trailingSpace=0;b.trailingSpaceNewLine=
!1;b.prevLine=b.thisLine;b.thisLine={stream:null};return null}function p(b,a){var c=b.column()===a.indentation,g=a.prevLine.stream;var r=!g||!/\S/.test(g.string);var l=a.indentedCode,h=a.prevLine.hr,m=!1!==a.list,q=(a.listStack[a.listStack.length-1]||0)+3;a.indentedCode=!1;g=a.indentation;if(null===a.indentationDiff&&(a.indentationDiff=a.indentation,m)){for(a.list=null;g<a.listStack[a.listStack.length-1];)a.listStack.pop(),a.listStack.length?a.indentation=a.listStack[a.listStack.length-1]:a.list=
!1;!1!==a.list&&(a.indentationDiff=g-a.listStack[a.listStack.length-1])}var t=!r&&!h&&!a.prevLine.header&&(!m||!l)&&!a.prevLine.fencedCodeEnd,n=(!1===a.list||h||r)&&a.indentation<=q&&b.match(E);h=null;if(4<=a.indentationDiff&&(l||a.prevLine.fencedCodeEnd||a.prevLine.header||r))return b.skipToEnd(),a.indentedCode=!0,e.code;if(b.eatSpace())return null;if(c&&a.indentation<=q&&(h=b.match(F))&&6>=h[1].length)return a.quote=0,a.header=h[1].length,a.thisLine.header=!0,d.highlightFormatting&&(a.formatting=
"header"),a.f=a.inline,f(a);if(a.indentation<=q&&b.eat("\x3e"))return a.quote=c?1:a.quote+1,d.highlightFormatting&&(a.formatting="quote"),b.eatSpace(),f(a);if(!n&&!a.setext&&c&&a.indentation<=q&&(h=b.match(G)))return c=h[1]?"ol":"ul",a.indentation=g+b.current().length,a.list=!0,a.quote=0,a.listStack.push(a.indentation),d.taskLists&&b.match(A,!1)&&(a.taskList=!0),a.f=a.inline,d.highlightFormatting&&(a.formatting=["list","list-"+c]),f(a);if(c&&a.indentation<=q&&(h=b.match(H,!0))){a.quote=0;a.fencedEndRE=
new RegExp(h[1]+"+ *$");if(b=d.fencedCodeBlockHighlighting)b=h[2],k.findModeByName&&(c=k.findModeByName(b))&&(b=c.mime||c.mimes[0]),b=k.getMode(y,b),b="null"==b.name?null:b;a.localMode=b;a.localMode&&(a.localState=k.startState(a.localMode));a.f=a.block=I;d.highlightFormatting&&(a.formatting="code-block");a.code=-1;return f(a)}return a.setext||!(t&&m||a.quote||!1!==a.list||a.code||n||J.test(b.string))&&(h=b.lookAhead(1))&&(h=h.match(K))?(a.setext?(a.header=a.setext,a.setext=0,b.skipToEnd(),d.highlightFormatting&&
(a.formatting="header")):(a.header="\x3d"==h[0].charAt(0)?1:2,a.setext=a.header),a.thisLine.header=!0,a.f=a.inline,f(a)):n?(b.skipToEnd(),a.hr=!0,a.thisLine.hr=!0,e.hr):"["===b.peek()?x(b,a,L):x(b,a,a.inline)}function v(b,a){var c=n.token(b,a.htmlState);if(!M){var d=k.innerMode(n,a.htmlState);if("xml"==d.mode.name&&null===d.state.tagStart&&!d.state.context&&d.state.tokenize.isInText||a.md_inside&&-1<b.current().indexOf("\x3e"))a.f=l,a.block=p,a.htmlState=null}return c}function I(b,a){var c=a.listStack[a.listStack.length-
1]||0,g=a.indentation<c;if(a.fencedEndRE&&a.indentation<=c+3&&(g||b.match(a.fencedEndRE))){d.highlightFormatting&&(a.formatting="code-block");var k;g||(k=f(a));a.localMode=a.localState=null;a.block=p;a.f=l;a.fencedEndRE=null;a.code=0;a.thisLine.fencedCodeEnd=!0;return g?(c=a.block,a.f=a.block=c,c(b,a)):k}if(a.localMode)return a.localMode.token(b,a.localState);b.skipToEnd();return e.code}function f(b){var a=[];if(b.formatting){a.push(e.formatting);"string"===typeof b.formatting&&(b.formatting=[b.formatting]);
for(var c=0;c<b.formatting.length;c++)a.push(e.formatting+"-"+b.formatting[c]),"header"===b.formatting[c]&&a.push(e.formatting+"-"+b.formatting[c]+"-"+b.header),"quote"===b.formatting[c]&&(!d.maxBlockquoteDepth||d.maxBlockquoteDepth>=b.quote?a.push(e.formatting+"-"+b.formatting[c]+"-"+b.quote):a.push("error"))}if(b.taskOpen)return a.push("meta"),a.length?a.join(" "):null;if(b.taskClosed)return a.push("property"),a.length?a.join(" "):null;b.linkHref?a.push(e.linkHref,"url"):(b.strong&&a.push(e.strong),
b.em&&a.push(e.em),b.strikethrough&&a.push(e.strikethrough),b.emoji&&a.push(e.emoji),b.linkText&&a.push(e.linkText),b.code&&a.push(e.code),b.image&&a.push(e.image),b.imageAltText&&a.push(e.imageAltText,"link"),b.imageMarker&&a.push(e.imageMarker));b.header&&a.push(e.header,e.header+"-"+b.header);b.quote&&(a.push(e.quote),!d.maxBlockquoteDepth||d.maxBlockquoteDepth>=b.quote?a.push(e.quote+"-"+b.quote):a.push(e.quote+"-"+d.maxBlockquoteDepth));!1!==b.list&&((c=(b.listStack.length-1)%3)?1===c?a.push(e.list2):
a.push(e.list3):a.push(e.list1));b.trailingSpaceNewLine?a.push("trailing-space-new-line"):b.trailingSpace&&a.push("trailing-space-"+(b.trailingSpace%2?"a":"b"));return a.length?a.join(" "):null}function N(b,a){if(b.match(O,!0))return f(a)}function l(b,a){var c=a.text(b,a);if("undefined"!==typeof c)return c;if(a.list)return a.list=null,f(a);if(a.taskList)return"x"!==b.match(A,!0)[1]?a.taskOpen=!0:a.taskClosed=!0,d.highlightFormatting&&(a.formatting="task"),a.taskList=!1,f(a);a.taskOpen=!1;a.taskClosed=
!1;if(a.header&&b.match(/^#+$/,!0))return d.highlightFormatting&&(a.formatting="header"),f(a);c=b.next();if(a.linkTitle){a.linkTitle=!1;var g=c;"("===c&&(g=")");g=(g+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1");if(b.match(new RegExp("^\\s*(?:[^"+g+"\\\\]+|\\\\\\\\|\\\\.)"+g),!0))return e.linkHref}if("`"===c){c=a.formatting;d.highlightFormatting&&(a.formatting="code");b.eatWhile("`");b=b.current().length;if(0!=a.code||a.quote&&1!=b){if(b==a.code)return b=f(a),a.code=0,b;a.formatting=c;return f(a)}a.code=
b;return f(a)}if(a.code)return f(a);if("\\"===c&&(b.next(),d.highlightFormatting))return c=f(a),a=e.formatting+"-escape",c?c+" "+a:a;if("!"===c&&b.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return a.imageMarker=!0,a.image=!0,d.highlightFormatting&&(a.formatting="image"),f(a);if("["===c&&a.imageMarker&&b.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return a.imageMarker=!1,a.imageAltText=!0,d.highlightFormatting&&(a.formatting="image"),f(a);if("]"===c&&a.imageAltText)return d.highlightFormatting&&(a.formatting="image"),
c=f(a),a.imageAltText=!1,a.image=!1,a.inline=a.f=B,c;if("["===c&&!a.image)return a.linkText=!0,d.highlightFormatting&&(a.formatting="link"),f(a);if("]"===c&&a.linkText)return d.highlightFormatting&&(a.formatting="link"),c=f(a),a.linkText=!1,a.inline=a.f=b.match(/\(.*?\)| ?\[.*?\]/,!1)?B:l,c;if("\x3c"===c&&b.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return a.f=a.inline=C,d.highlightFormatting&&(a.formatting="link"),c=f(a),(c?c+" ":"")+e.linkInline;if("\x3c"===c&&b.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,
!1))return a.f=a.inline=C,d.highlightFormatting&&(a.formatting="link"),c=f(a),(c?c+" ":"")+e.linkEmail;if(d.xml&&"\x3c"===c&&b.match(/^(!--|[a-z]+(?:\s+[a-z_:.\-]+(?:\s*=\s*[^ >]+)?)*\s*>)/i,!1))return c=b.string.indexOf("\x3e",b.pos),-1!=c&&(c=b.string.substring(b.start,c),/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(c)&&(a.md_inside=!0)),b.backUp(1),a.htmlState=k.startState(n),c=v,a.f=a.block=c,c(b,a);if(d.xml&&"\x3c"===c&&b.match(/^\/\w*?>/))return a.md_inside=!1,"tag";if("*"===c||"_"===c){for(var r=
1,u=1==b.pos?" ":b.string.charAt(b.pos-2);3>r&&b.eat(c);)r++;var h=b.peek()||" ",p=!/\s/.test(h)&&(!m.test(h)||/\s/.test(u)||m.test(u)),q=!/\s/.test(u)&&(!m.test(u)||/\s/.test(h)||m.test(h)),t=g=null;r%2&&(a.em||!p||"*"!==c&&q&&!m.test(u)?a.em!=c||!q||"*"!==c&&p&&!m.test(h)||(g=!1):g=!0);1<r&&(a.strong||!p||"*"!==c&&q&&!m.test(u)?a.strong!=c||!q||"*"!==c&&p&&!m.test(h)||(t=!1):t=!0);if(null!=t||null!=g)return d.highlightFormatting&&(a.formatting=null==g?"strong":null==t?"em":"strong em"),!0===g&&
(a.em=c),!0===t&&(a.strong=c),b=f(a),!1===g&&(a.em=!1),!1===t&&(a.strong=!1),b}else if(" "===c&&(b.eat("*")||b.eat("_"))){if(" "===b.peek())return f(a);b.backUp(1)}if(d.strikethrough)if("~"===c&&b.eatWhile(c)){if(a.strikethrough)return d.highlightFormatting&&(a.formatting="strikethrough"),b=f(a),a.strikethrough=!1,b;if(b.match(/^[^\s]/,!1))return a.strikethrough=!0,d.highlightFormatting&&(a.formatting="strikethrough"),f(a)}else if(" "===c&&b.match(/^~~/,!0)){if(" "===b.peek())return f(a);b.backUp(2)}if(d.emoji&&
":"===c&&b.match(/^[a-z_\d+-]+:/))return a.emoji=!0,d.highlightFormatting&&(a.formatting="emoji"),b=f(a),a.emoji=!1,b;" "===c&&(b.match(/ +$/,!1)?a.trailingSpace++:a.trailingSpace&&(a.trailingSpaceNewLine=!0));return f(a)}function C(b,a){if("\x3e"===b.next())return a.f=a.inline=l,d.highlightFormatting&&(a.formatting="link"),b=f(a),(b?b+" ":"")+e.linkInline;b.match(/^[^>]+/,!0);return e.linkInline}function B(b,a){if(b.eatSpace())return null;b=b.next();return"("===b||"["===b?(a.f=a.inline=P("("===b?
")":"]"),d.highlightFormatting&&(a.formatting="link-string"),a.linkHref=!0,f(a)):"error"}function P(b){return function(a,c){if(a.next()===b)return c.f=c.inline=l,d.highlightFormatting&&(c.formatting="link-string"),a=f(c),c.linkHref=!1,a;a.match(Q[b]);c.linkHref=!0;return f(c)}}function L(b,a){return b.match(/^([^\]\\]|\\.)*\]:/,!1)?(a.f=R,b.next(),d.highlightFormatting&&(a.formatting="link"),a.linkText=!0,f(a)):x(b,a,l)}function R(b,a){if(b.match(/^\]:/,!0))return a.f=a.inline=S,d.highlightFormatting&&
(a.formatting="link"),b=f(a),a.linkText=!1,b;b.match(/^([^\]\\]|\\.)+/,!0);return e.linkText}function S(b,a){if(b.eatSpace())return null;b.match(/^[^\s]+/,!0);void 0===b.peek()?a.linkTitle=!0:b.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0);a.f=a.inline=l;return e.linkHref+" url"}var n=k.getMode(y,"text/html"),M="null"==n.name;void 0===d.highlightFormatting&&(d.highlightFormatting=!1);void 0===d.maxBlockquoteDepth&&(d.maxBlockquoteDepth=0);void 0===
d.taskLists&&(d.taskLists=!1);void 0===d.strikethrough&&(d.strikethrough=!1);void 0===d.emoji&&(d.emoji=!1);void 0===d.fencedCodeBlockHighlighting&&(d.fencedCodeBlockHighlighting=!0);void 0===d.xml&&(d.xml=!0);void 0===d.tokenTypeOverrides&&(d.tokenTypeOverrides={});var e={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",
linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"},w;for(w in e)e.hasOwnProperty(w)&&d.tokenTypeOverrides[w]&&(e[w]=d.tokenTypeOverrides[w]);var E=/^([*\-_])(?:\s*\1){2,}\s*$/,G=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,A=/^\[(x| )\](?=\s)/,F=d.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,K=/^ *(?:\={1,}|-{1,})\s*$/,O=/^[^#!\[\]*_\\<>` "'(~:]+/,H=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,J=/^\s*\[[^\]]+?\]:\s*\S+(\s*\S*\s*)?$/,m=/[!\"#$%&\'()*+,\-\.\/:;<=>?@\[\\\]^_`{|}~\u2014]/,
Q={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/},D={startState:function(){return{f:p,prevLine:{stream:null},thisLine:{stream:null},block:p,htmlState:null,indentation:0,inline:l,text:N,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(b){return{f:b.f,
prevLine:b.prevLine,thisLine:b.thisLine,block:b.block,htmlState:b.htmlState&&k.copyState(n,b.htmlState),indentation:b.indentation,localMode:b.localMode,localState:b.localMode?k.copyState(b.localMode,b.localState):null,inline:b.inline,text:b.text,formatting:!1,linkText:b.linkText,linkTitle:b.linkTitle,code:b.code,em:b.em,strong:b.strong,strikethrough:b.strikethrough,emoji:b.emoji,header:b.header,setext:b.setext,hr:b.hr,taskList:b.taskList,list:b.list,listStack:b.listStack.slice(0),quote:b.quote,indentedCode:b.indentedCode,
trailingSpace:b.trailingSpace,trailingSpaceNewLine:b.trailingSpaceNewLine,md_inside:b.md_inside,fencedEndRE:b.fencedEndRE}},token:function(b,a){a.formatting=!1;if(b!=a.thisLine.stream){a.header=0;a.hr=!1;if(b.match(/^\s*$/,!0))return z(a),null;a.prevLine=a.thisLine;a.thisLine={stream:b};a.taskList=!1;a.trailingSpace=0;a.trailingSpaceNewLine=!1;a.f=a.block;if(a.f!=v){var c=b.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;a.indentation=c;a.indentationDiff=null;if(0<c)return null}}return a.f(b,a)},
innerMode:function(b){return b.block==v?{state:b.htmlState,mode:n}:b.localState?{state:b.localState,mode:b.localMode}:{state:b,mode:D}},indent:function(b,a,c){return b.block==v?n.indent(b.htmlState,a,c):b.localState?b.localMode.indent(b.localState,a,c):k.Pass},blankLine:z,getType:f,closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return D},"xml");k.defineMIME("text/x-markdown","markdown")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:perl', location = '/static/lib/CodeMirror/mode/perl/perl.js' */
(function(k){"object"==typeof exports&&"object"==typeof module?k(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],k):k(CodeMirror)})(function(k){function g(d,e){return d.string.charAt(d.pos+(e||0))}function q(d,e){if(e){var g=d.pos-e;return d.string.substr(0<=g?g:0,e)}return d.string.substr(0,d.pos-1)}function p(d,e){var g=d.string.length,r=g-d.pos+1;return d.string.substr(d.pos,e&&e<g?e:r)}function e(d,e){e=d.pos+e;var g;0>=e?d.pos=0:e>=(g=d.string.length-
1)?d.pos=g:d.pos=e}k.defineMode("perl",function(){function d(a,c,b,d,e){c.chain=null;c.style=null;c.tail=null;c.tokenize=function(a,c){for(var f=!1,g,h=0;g=a.next();){if(g===b[h]&&!f){void 0!==b[++h]?(c.chain=b[h],c.style=d,c.tail=e):e&&a.eatWhile(e);c.tokenize=n;break}f=!f&&"\\"==g}return d};return c.tokenize(a,c)}function k(a,c,b){c.tokenize=function(a,c){a.string==b&&(c.tokenize=n);a.skipToEnd();return"string"};return c.tokenize(a,c)}function n(a,c){var b;if(a.eatSpace())return null;if(c.chain)return d(a,
c,c.chain,c.style,c.tail);if(a.match(/^\-?[\d\.]/,!1)&&a.match(/^(\-?(\d*\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F]+|0b[01]+|\d+(e[+-]?\d+)?)/))return"number";if(a.match(/^<<(?=\w)/))return a.eatWhile(/\w/),k(a,c,a.current().substr(2));if(a.sol()&&a.match(/^\=item(?!\w)/))return k(a,c,"\x3dcut");var h=a.next();if('"'==h||"'"==h){if(q(a,3)=="\x3c\x3c"+h){var l=a.pos;a.eatWhile(/\w/);if((b=a.current().substr(1))&&a.eat(h))return k(a,c,b);a.pos=l}return d(a,c,[h],"string")}if("q"==h&&(b=g(a,-2),!b||!/\w/.test(b)))if(b=
g(a,0),"x"==b){b=g(a,1);if("("==b)return e(a,2),d(a,c,[")"],"string-2",f);if("["==b)return e(a,2),d(a,c,["]"],"string-2",f);if("{"==b)return e(a,2),d(a,c,["}"],"string-2",f);if("\x3c"==b)return e(a,2),d(a,c,["\x3e"],"string-2",f);if(/[\^'"!~\/]/.test(b))return e(a,1),d(a,c,[a.eat(b)],"string-2",f)}else if("q"==b){b=g(a,1);if("("==b)return e(a,2),d(a,c,[")"],"string");if("["==b)return e(a,2),d(a,c,["]"],"string");if("{"==b)return e(a,2),d(a,c,["}"],"string");if("\x3c"==b)return e(a,2),d(a,c,["\x3e"],
"string");if(/[\^'"!~\/]/.test(b))return e(a,1),d(a,c,[a.eat(b)],"string")}else if("w"==b){b=g(a,1);if("("==b)return e(a,2),d(a,c,[")"],"bracket");if("["==b)return e(a,2),d(a,c,["]"],"bracket");if("{"==b)return e(a,2),d(a,c,["}"],"bracket");if("\x3c"==b)return e(a,2),d(a,c,["\x3e"],"bracket");if(/[\^'"!~\/]/.test(b))return e(a,1),d(a,c,[a.eat(b)],"bracket")}else if("r"==b){b=g(a,1);if("("==b)return e(a,2),d(a,c,[")"],"string-2",f);if("["==b)return e(a,2),d(a,c,["]"],"string-2",f);if("{"==b)return e(a,
2),d(a,c,["}"],"string-2",f);if("\x3c"==b)return e(a,2),d(a,c,["\x3e"],"string-2",f);if(/[\^'"!~\/]/.test(b))return e(a,1),d(a,c,[a.eat(b)],"string-2",f)}else if(/[\^'"!~\/(\[{<]/.test(b)){if("("==b)return e(a,1),d(a,c,[")"],"string");if("["==b)return e(a,1),d(a,c,["]"],"string");if("{"==b)return e(a,1),d(a,c,["}"],"string");if("\x3c"==b)return e(a,1),d(a,c,["\x3e"],"string");if(/[\^'"!~\/]/.test(b))return d(a,c,[a.eat(b)],"string")}if("m"==h&&(b=g(a,-2),!b||!/\w/.test(b))&&(b=a.eat(/[(\[{<\^'"!~\/]/))){if(/[\^'"!~\/]/.test(b))return d(a,
c,[b],"string-2",f);if("("==b)return d(a,c,[")"],"string-2",f);if("["==b)return d(a,c,["]"],"string-2",f);if("{"==b)return d(a,c,["}"],"string-2",f);if("\x3c"==b)return d(a,c,["\x3e"],"string-2",f)}if("s"==h&&(b=/[\/>\]})\w]/.test(g(a,-2)),!b&&(b=a.eat(/[(\[{<\^'"!~\/]/)))||"y"==h&&(b=/[\/>\]})\w]/.test(g(a,-2)),!b&&(b=a.eat(/[(\[{<\^'"!~\/]/)))||"t"==h&&(b=/[\/>\]})\w]/.test(g(a,-2)),!b&&(b=a.eat("r")))&&(b=a.eat(/[(\[{<\^'"!~\/]/)))return"["==b?d(a,c,["]","]"],"string-2",f):"{"==b?d(a,c,["}","}"],
"string-2",f):"\x3c"==b?d(a,c,["\x3e","\x3e"],"string-2",f):"("==b?d(a,c,[")",")"],"string-2",f):d(a,c,[b,b],"string-2",f);if("`"==h)return d(a,c,[h],"variable-2");if("/"==h)return/~\s*$/.test(q(a))?d(a,c,[h],"string-2",f):"operator";if("$"==h){l=a.pos;if(a.eatWhile(/\d/)||a.eat("{")&&a.eatWhile(/\d/)&&a.eat("}"))return"variable-2";a.pos=l}if(/[$@%]/.test(h)){l=a.pos;if(a.eat("^")&&a.eat(/[A-Z]/)||!/[@$%&]/.test(g(a,-2))&&a.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/))if(b=a.current(),m[b])return"variable-2";
a.pos=l}if(/[$@%&]/.test(h)&&(a.eatWhile(/[\w$\[\]]/)||a.eat("{")&&a.eatWhile(/[\w$\[\]]/)&&a.eat("}")))return b=a.current(),m[b]?"variable-2":"variable";if("#"==h&&"$"!=g(a,-2))return a.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(h)){l=a.pos;a.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/);if(m[a.current()])return"operator";a.pos=l}if("_"==h&&1==a.pos){if("_END__"==p(a,6))return d(a,c,["\x00"],"comment");if("_DATA__"==p(a,7))return d(a,c,["\x00"],"variable-2");if("_C__"==p(a,7))return d(a,c,["\x00"],
"string")}if(/\w/.test(h)){l=a.pos;if("{"==g(a,-2)&&("}"==g(a,0)||a.eatWhile(/\w/)&&"}"==g(a,0)))return"string";a.pos=l}if(/[A-Z]/.test(h))if(c=g(a,-2),l=a.pos,a.eatWhile(/[A-Z_]/),/[\da-z]/.test(g(a,0)))a.pos=l;else{b=m[a.current()];if(!b)return"meta";b[1]&&(b=b[0]);return":"!=c?1==b?"keyword":2==b?"def":3==b?"atom":4==b?"operator":5==b?"variable-2":"meta":"meta"}if(/[a-zA-Z_]/.test(h)){c=g(a,-2);a.eatWhile(/\w/);b=m[a.current()];if(!b)return"meta";b[1]&&(b=b[0]);return":"!=c?1==b?"keyword":2==b?
"def":3==b?"atom":4==b?"operator":5==b?"variable-2":"meta":"meta"}return null}var m={"-\x3e":4,"++":4,"--":4,"**":4,"\x3d~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"\x3c\x3c":4,"\x3e\x3e":4,"\x3c":4,"\x3e":4,"\x3c\x3d":4,"\x3e\x3d":4,lt:4,gt:4,le:4,ge:4,"\x3d\x3d":4,"!\x3d":4,"\x3c\x3d\x3e":4,eq:4,ne:4,cmp:4,"~~":4,"\x26":4,"|":4,"^":4,"\x26\x26":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"\x3d":4,"+\x3d":4,"-\x3d":4,"*\x3d":4,",":4,"\x3d\x3e":4,"::":4,not:4,and:4,or:4,xor:4,BEGIN:[5,1],
END:[5,1],PRINT:[5,1],PRINTF:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],STDIN:5,STDIN_TOP:5,STDOUT:5,STDOUT_TOP:5,STDERR:5,STDERR_TOP:5,$ARG:5,$_:5,"@ARG":5,"@_":5,$LIST_SEPARATOR:5,'$"':5,$PROCESS_ID:5,$PID:5,$$:5,$REAL_GROUP_ID:5,$GID:5,"$(":5,$EFFECTIVE_GROUP_ID:5,$EGID:5,"$)":5,$PROGRAM_NAME:5,$0:5,$SUBSCRIPT_SEPARATOR:5,$SUBSEP:5,"$;":5,$REAL_USER_ID:5,$UID:5,"$\x3c":5,$EFFECTIVE_USER_ID:5,$EUID:5,"$\x3e":5,$a:5,$b:5,$COMPILING:5,"$^C":5,$DEBUGGING:5,
"$^D":5,"${^ENCODING}":5,$ENV:5,"%ENV":5,$SYSTEM_FD_MAX:5,"$^F":5,"@F":5,"${^GLOBAL_PHASE}":5,"$^H":5,"%^H":5,"@INC":5,"%INC":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$\x26":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,
$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\":5,$OUTPUT_AUTOFLUSH:5,"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,
"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$\x3d":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,"$[":5,$OLD_PERL_VERSION:5,"$]":5,"if":[1,1],
elsif:[1,1],"else":[1,1],"while":[1,1],unless:[1,1],"for":[1,1],foreach:[1,1],abs:1,accept:1,alarm:1,atan2:1,bind:1,binmode:1,bless:1,bootstrap:1,"break":1,caller:1,chdir:1,chmod:1,chomp:1,chop:1,chown:1,chr:1,chroot:1,close:1,closedir:1,connect:1,"continue":[1,1],cos:1,crypt:1,dbmclose:1,dbmopen:1,"default":1,defined:1,"delete":1,die:1,"do":1,dump:1,each:1,endgrent:1,endhostent:1,endnetent:1,endprotoent:1,endpwent:1,endservent:1,eof:1,eval:1,exec:1,exists:1,exit:1,exp:1,fcntl:1,fileno:1,flock:1,
fork:1,format:1,formline:1,getc:1,getgrent:1,getgrgid:1,getgrnam:1,gethostbyaddr:1,gethostbyname:1,gethostent:1,getlogin:1,getnetbyaddr:1,getnetbyname:1,getnetent:1,getpeername:1,getpgrp:1,getppid:1,getpriority:1,getprotobyname:1,getprotobynumber:1,getprotoent:1,getpwent:1,getpwnam:1,getpwuid:1,getservbyname:1,getservbyport:1,getservent:1,getsockname:1,getsockopt:1,given:1,glob:1,gmtime:1,"goto":1,grep:1,hex:1,"import":1,index:1,"int":1,ioctl:1,join:1,keys:1,kill:1,last:1,lc:1,lcfirst:1,length:1,
link:1,listen:1,local:2,localtime:1,lock:1,log:1,lstat:1,m:null,map:1,mkdir:1,msgctl:1,msgget:1,msgrcv:1,msgsnd:1,my:2,"new":1,next:1,no:1,oct:1,open:1,opendir:1,ord:1,our:2,pack:1,"package":1,pipe:1,pop:1,pos:1,print:1,printf:1,prototype:1,push:1,q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,rand:1,read:1,readdir:1,readline:1,readlink:1,readpipe:1,recv:1,redo:1,ref:1,rename:1,require:1,reset:1,"return":1,reverse:1,rewinddir:1,rindex:1,rmdir:1,s:null,say:1,scalar:1,seek:1,seekdir:1,select:1,
semctl:1,semget:1,semop:1,send:1,setgrent:1,sethostent:1,setnetent:1,setpgrp:1,setpriority:1,setprotoent:1,setpwent:1,setservent:1,setsockopt:1,shift:1,shmctl:1,shmget:1,shmread:1,shmwrite:1,shutdown:1,sin:1,sleep:1,socket:1,socketpair:1,sort:1,splice:1,split:1,sprintf:1,sqrt:1,srand:1,stat:1,state:1,study:1,sub:1,substr:1,symlink:1,syscall:1,sysopen:1,sysread:1,sysseek:1,system:1,syswrite:1,tell:1,telldir:1,tie:1,tied:1,time:1,times:1,tr:null,truncate:1,uc:1,ucfirst:1,umask:1,undef:1,unlink:1,unpack:1,
unshift:1,untie:1,use:1,utime:1,values:1,vec:1,wait:1,waitpid:1,wantarray:1,warn:1,when:1,write:1,y:null},f=/[goseximacplud]/;return{startState:function(){return{tokenize:n,chain:null,style:null,tail:null}},token:function(a,c){return(c.tokenize||n)(a,c)},lineComment:"#"}});k.registerHelper("wordChars","perl",/[\w$]/);k.defineMIME("text/x-perl","perl")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:php', location = '/static/lib/CodeMirror/mode/php/php.js' */
(function(g){"object"==typeof exports&&"object"==typeof module?g(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../clike/clike")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../clike/clike"],g):g(CodeMirror)})(function(g){function h(c){var a={};c=c.split(" ");for(var d=0;d<c.length;++d)a[c[d]]=!0;return a}function m(c,a,d){return 0==c.length?k(a):function(e,f){for(var b=c[0],l=0;l<b.length;l++)if(e.match(b[l][0]))return f.tokenize=
m(c.slice(1),a),b[l][1];f.tokenize=k(a,d);return"string"}}function k(c,a){return function(d,e){if(!1!==a&&d.match("${",!1)||d.match("{$",!1))e.tokenize=null,d="string";else if(!1!==a&&d.match(/^\$[a-zA-Z_][a-zA-Z0-9_]*/))d.match("[",!1)&&(e.tokenize=m([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]],c,a)),d.match(/\-\>\w/,!1)&&(e.tokenize=m([[["-\x3e",null]],[[/[\w]+/,"variable"]]],c,a)),d="variable-2";else{for(var f=!1;!d.eol()&&
(f||!1===a||!d.match("{$",!1)&&!d.match(/^(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1));){if(!f&&d.match(c)){e.tokenize=null;e.tokStack.pop();e.tokStack.pop();break}f="\\"==d.next()&&!f}d="string"}return d}}g.registerHelper("hintWords","php","abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__ func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents file_put_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists array_intersect_key array_combine array_column pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count".split(" "));
g.registerHelper("wordChars","php",/[\w$]/);var n={name:"clike",helperType:"php",keywords:h("abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally"),
blockKeywords:h("catch do else elseif for foreach if switch try while finally"),defKeywords:h("class function interface namespace trait"),atoms:h("true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__"),builtin:h("func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents file_put_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists array_intersect_key array_combine array_column pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count"),
multiLineStrings:!0,hooks:{$:function(c){c.eatWhile(/[\w\$_]/);return"variable-2"},"\x3c":function(c,a){var d;if(d=c.match(/<<\s*/)){var e=c.eat(/['"]/);c.eatWhile(/[\w\.]/);d=c.current().slice(d[0].length+(e?2:1));e&&c.eat(e);if(d)return(a.tokStack||(a.tokStack=[])).push(d,0),a.tokenize=k(d,"'"!=e),"string"}return!1},"#":function(c){for(;!c.eol()&&!c.match("?\x3e",!1);)c.next();return"comment"},"/":function(c){if(c.eat("/")){for(;!c.eol()&&!c.match("?\x3e",!1);)c.next();return"comment"}return!1},
'"':function(c,a){(a.tokStack||(a.tokStack=[])).push('"',0);a.tokenize=k('"');return"string"},"{":function(c,a){a.tokStack&&a.tokStack.length&&a.tokStack[a.tokStack.length-1]++;return!1},"}":function(c,a){a.tokStack&&0<a.tokStack.length&&!--a.tokStack[a.tokStack.length-1]&&(a.tokenize=k(a.tokStack[a.tokStack.length-2]));return!1}}};g.defineMode("php",function(c,a){var d=g.getMode(c,"text/html"),e=g.getMode(c,n);return{startState:function(){var f=g.startState(d),b=a.startOpen?g.startState(e):null;
return{html:f,php:b,curMode:a.startOpen?e:d,curState:a.startOpen?b:f,pending:null}},copyState:function(f){var b=g.copyState(d,f.html),a=f.php;a=a&&g.copyState(e,a);return{html:b,php:a,curMode:f.curMode,curState:f.curMode==d?b:a,pending:f.pending}},token:function(a,b){var c=b.curMode==e;a.sol()&&b.pending&&'"'!=b.pending&&"'"!=b.pending&&(b.pending=null);if(c)return c&&null==b.php.tokenize&&a.match("?\x3e")?(b.curMode=d,b.curState=b.html,b.php.context.prev||(b.php=null),"meta"):e.token(a,b.curState);
if(a.match(/^<\?\w*/))return b.curMode=e,b.php||(b.php=g.startState(e,d.indent(b.html,""))),b.curState=b.php,"meta";if('"'==b.pending||"'"==b.pending){for(;!a.eol()&&a.next()!=b.pending;);c="string"}else b.pending&&a.pos<b.pending.end?(a.pos=b.pending.end,c=b.pending.style):c=d.token(a,b.curState);b.pending&&(b.pending=null);var f=a.current(),h=f.search(/<\?/),k;-1!=h&&("string"==c&&(k=f.match(/[\'\"]$/))&&!/\?>/.test(f)?b.pending=k[0]:b.pending={end:a.pos,style:c},a.backUp(f.length-h));return c},
indent:function(a,b){return a.curMode!=e&&/^\s*<\//.test(b)||a.curMode==e&&/^\?>/.test(b)?d.indent(a.html,b):a.curMode.indent(a.curState,b)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(a){return{state:a.curState,mode:a.curMode}}}},"htmlmixed","clike");g.defineMIME("application/x-httpd-php","php");g.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0});g.defineMIME("text/x-php",n)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:python', location = '/static/lib/CodeMirror/mode/python/python.js' */
(function(h){"object"==typeof exports&&"object"==typeof module?h(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],h):h(CodeMirror)})(function(h){function p(g){return new RegExp("^(("+g.join(")|(")+"))\\b")}function g(g){return g.scopes[g.scopes.length-1]}var A=p(["and","or","not","is"]),u="as assert break class continue def del elif else except finally for from global if import lambda pass raise return try while with yield in".split(" "),v="abs all any bin bool bytearray callable chr classmethod compile complex delattr dict dir divmod enumerate eval filter float format frozenset getattr globals hasattr hash help hex id input int isinstance issubclass iter len list locals map max memoryview min next object oct open ord pow property range repr reversed round set setattr slice sorted staticmethod str sum super tuple type vars zip __import__ NotImplemented Ellipsis __debug__".split(" ");
h.registerHelper("hintWords","python",u.concat(v));h.defineMode("python",function(t,c){function n(a,b){a.sol()&&(b.indent=a.indentation());if(a.sol()&&"py"==g(b).type){var d=g(b).offset;if(a.eatSpace()){var e=a.indentation();e>d?w(b):e<d&&x(a,b)&&"#"!=a.peek()&&(b.errorToken=!0);return null}e=y(a,b);0<d&&x(a,b)&&(e+=" error");return e}return y(a,b)}function y(a,b){if(a.eatSpace())return null;if("#"==a.peek())return a.skipToEnd(),"comment";if(a.match(/^[0-9\.]/,!1)){var d=!1;a.match(/^[\d_]*\.\d+(e[\+\-]?\d+)?/i)&&
(d=!0);a.match(/^[\d_]+\.\d*/)&&(d=!0);a.match(/^\.\d+/)&&(d=!0);if(d)return a.eat(/J/i),"number";d=!1;a.match(/^0x[0-9a-f_]+/i)&&(d=!0);a.match(/^0b[01_]+/i)&&(d=!0);a.match(/^0o[0-7_]+/i)&&(d=!0);a.match(/^[1-9][\d_]*(e[\+\-]?[\d_]+)?/)&&(a.eat(/J/i),d=!0);a.match(/^0(?![\dx])/i)&&(d=!0);if(d)return a.eat(/L/i),"number"}if(a.match(q))return b.tokenize=B(a.current()),b.tokenize(a,b);for(d=0;d<l.length;d++)if(a.match(l[d]))return"operator";if(a.match(C))return"punctuation";if("."==b.lastToken&&a.match(m))return"property";
if(a.match(D)||a.match(A))return"keyword";if(a.match(E))return"builtin";if(a.match(/^(self|cls)\b/))return"variable-2";if(a.match(m))return"def"==b.lastToken||"class"==b.lastToken?"def":"variable";a.next();return"error"}function B(a){function b(b,g){for(;!b.eol();)if(b.eatWhile(/[^'"\\]/),b.eat("\\")){if(b.next(),d&&b.eol())return"string"}else{if(b.match(a))return g.tokenize=n,"string";b.eat(/['"]/)}if(d){if(c.singleLineStringErrors)return"error";g.tokenize=n}return"string"}for(;0<="rubf".indexOf(a.charAt(0).toLowerCase());)a=
a.substr(1);var d=1==a.length;b.isString=!0;return b}function w(a){for(;"py"!=g(a).type;)a.scopes.pop();a.scopes.push({offset:g(a).offset+t.indentUnit,type:"py",align:null})}function x(a,b){for(a=a.indentation();1<b.scopes.length&&g(b).offset>a;){if("py"!=g(b).type)return!0;b.scopes.pop()}return g(b).offset!=a}for(var q,m,C=c.delimiters||c.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.]/,l=[c.singleOperators,c.doubleOperators,c.doubleDelimiters,c.tripleDelimiters,c.operators||/^([-+*/%\/&|^]=?|[<>=]+|\/\/=?|\*\*=?|!=|[~!@])/],
f=0;f<l.length;f++)l[f]||l.splice(f--,1);var r=c.hangingIndent||t.indentUnit;f=u;var k=v;void 0!=c.extra_keywords&&(f=f.concat(c.extra_keywords));void 0!=c.extra_builtins&&(k=k.concat(c.extra_builtins));var z=!(c.version&&3>Number(c.version));z?(m=c.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/,f=f.concat("nonlocal False True None async await".split(" ")),k=k.concat(["ascii","bytes","exec","print"]),q=/^(([rbuf]|(br))?('{3}|"{3}|['"]))/i):(m=c.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/,
f=f.concat(["exec","print"]),k=k.concat("apply basestring buffer cmp coerce execfile file intern long raw_input reduce reload unichr unicode xrange False True None".split(" ")),q=/^(([rubf]|(ur)|(br))?('{3}|"{3}|['"]))/i);var D=p(f),E=p(k);return{startState:function(a){return{tokenize:n,scopes:[{offset:a||0,type:"py",align:null}],indent:a||0,lastToken:null,lambda:!1,dedent:0}},token:function(a,b){var d=b.errorToken;d&&(b.errorToken=!1);a:{a.sol()&&(b.beginningOfLine=!0);var e=b.tokenize(a,b);var c=
a.current();if(b.beginningOfLine&&"@"==c)e=a.match(m,!1)?"meta":z?"operator":"error";else{/\S/.test(c)&&(b.beginningOfLine=!1);"variable"!=e&&"builtin"!=e||"meta"!=b.lastToken||(e="meta");if("pass"==c||"return"==c)b.dedent+=1;"lambda"==c&&(b.lambda=!0);":"!=c||b.lambda||"py"!=g(b).type||w(b);var f=1==c.length?"[({".indexOf(c):-1;if(-1!=f){f="])}".slice(f,f+1);var h=a.match(/^([\s\[\{\(]|#.*)*$/,!1)?null:a.column()+1;b.scopes.push({offset:b.indent+r,type:f,align:h})}f="])}".indexOf(c);if(-1!=f)if(g(b).type==
c)b.indent=b.scopes.pop().offset-r;else{e="error";break a}0<b.dedent&&a.eol()&&"py"==g(b).type&&(1<b.scopes.length&&b.scopes.pop(),--b.dedent)}}e&&"comment"!=e&&(b.lastToken="keyword"==e||"punctuation"==e?a.current():e);"punctuation"==e&&(e=null);a.eol()&&b.lambda&&(b.lambda=!1);return d?e+" error":e},indent:function(a,b){if(a.tokenize!=n)return a.tokenize.isString?h.Pass:0;a=g(a);b=a.type==b.charAt(0);return null!=a.align?a.align-(b?1:0):a.offset-(b?r:0)},electricInput:/^\s*[\}\]\)]$/,closeBrackets:{triples:"'\""},
lineComment:"#",fold:"indent"}});h.defineMIME("text/x-python","python");h.defineMIME("text/x-cython",{name:"python",extra_keywords:"by cdef cimport cpdef ctypedef enum except extern gil include nogil property public readonly struct union DEF IF ELIF ELSE".split(" ")})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:ruby', location = '/static/lib/CodeMirror/mode/ruby/ruby.js' */
(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){e.defineMode("ruby",function(e){function n(a){for(var c={},b=0,f=a.length;b<f;++b)c[a[b]]=!0;return c}function k(a,c,b){b.tokenize.push(a);return a(c,b)}function m(a,c){if(a.sol()&&a.match("\x3dbegin")&&a.eol())return c.tokenize.push(t),"comment";if(a.eatSpace())return null;var b=a.next();if("`"==b||"'"==
b||'"'==b)return k(l(b,"string",'"'==b||"`"==b),a,c);if("/"==b){var f=a.pos;for(var h=0,d,e=!1,p=!1;null!=(d=a.next());)if(p)p=!1;else{if(-1<"[{(".indexOf(d))h++;else if(-1<"]})".indexOf(d)){if(h--,0>h)break}else if("/"==d&&0==h){e=!0;break}p="\\"==d}a.backUp(a.pos-f);return e?k(l(b,"string-2",!0),a,c):"operator"}if("%"==b){b="string";f=!0;a.eat("s")?b="atom":a.eat(/[WQ]/)?b="string":a.eat(/[r]/)?b="string-2":a.eat(/[wxq]/)&&(b="string",f=!1);h=a.eat(/[^\w\s=]/);if(!h)return"operator";q.propertyIsEnumerable(h)&&
(h=q[h]);return k(l(h,b,f,!0),a,c)}if("#"==b)return a.skipToEnd(),"comment";if("\x3c"==b&&(f=a.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return k(u(f[1]),a,c);if("0"==b)return a.eat("x")?a.eatWhile(/[\da-fA-F]/):a.eat("b")?a.eatWhile(/[01]/):a.eatWhile(/[0-7]/),"number";if(/\d/.test(b))return a.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if("?"==b){for(;a.match(/^\\[CM]-/););a.eat("\\")?a.eatWhile(/\w/):a.next();return"string"}if(":"==b)return a.eat("'")?k(l("'","atom",
!1),a,c):a.eat('"')?k(l('"',"atom",!0),a,c):a.eat(/[\<\>]/)?(a.eat(/[\<\>]/),"atom"):a.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":a.eat(/[a-zA-Z$@_\xa1-\uffff]/)?(a.eatWhile(/[\w$\xa1-\uffff]/),a.eat(/[\?\!\=]/),"atom"):"operator";if("@"==b&&a.match(/^@?[a-zA-Z_\xa1-\uffff]/))return a.eat("@"),a.eatWhile(/[\w\xa1-\uffff]/),"variable-2";if("$"==b)return a.eat(/[a-zA-Z_]/)?a.eatWhile(/[\w]/):a.eat(/\d/)?a.eat(/\d/):a.next(),"variable-3";if(/[a-zA-Z_\xa1-\uffff]/.test(b))return a.eatWhile(/[\w\xa1-\uffff]/),a.eat(/[\?\!]/),
a.eat(":")?"atom":"ident";if("|"!=b||!c.varList&&"{"!=c.lastTok&&"do"!=c.lastTok)return/[\(\)\[\]{}\\;]/.test(b)?(g=b,null):"-"==b&&a.eat("\x3e")?"arrow":/[=+\-\/*:\.^%<>~|]/.test(b)?(a=a.eatWhile(/[=+\-\/*:\.^%<>~|]/),"."!=b||a||(g="."),"operator"):null;g="|";return null}function r(a){a||(a=1);return function(c,b){if("}"==c.peek()){if(1==a)return b.tokenize.pop(),b.tokenize[b.tokenize.length-1](c,b);b.tokenize[b.tokenize.length-1]=r(a-1)}else"{"==c.peek()&&(b.tokenize[b.tokenize.length-1]=r(a+1));
return m(c,b)}}function v(){var a=!1;return function(c,b){if(a)return b.tokenize.pop(),b.tokenize[b.tokenize.length-1](c,b);a=!0;return m(c,b)}}function l(a,c,b,f){return function(h,d){var e=!1,g;"read-quoted-paused"===d.context.type&&(d.context=d.context.prev,h.eat("}"));for(;null!=(g=h.next());){if(g==a&&(f||!e)){d.tokenize.pop();break}if(b&&"#"==g&&!e)if(h.eat("{")){"}"==a&&(d.context={prev:d.context,type:"read-quoted-paused"});d.tokenize.push(r());break}else if(/[@\$]/.test(h.peek())){d.tokenize.push(v());
break}e=!e&&"\\"==g}return c}}function u(a){return function(c,b){c.match(a)?b.tokenize.pop():c.skipToEnd();return"string"}}function t(a,c){a.sol()&&a.match("\x3dend")&&a.eol()&&c.tokenize.pop();a.skipToEnd();return"comment"}var w=n("alias and BEGIN begin break case class def defined? do else elsif END end ensure false for if in module next not or redo rescue retry return self super then true undef unless until when while yield nil raise throw catch fail loop callcc caller lambda proc public protected private require load require_relative extend autoload __END__ __FILE__ __LINE__ __dir__".split(" ")),
x=n("def class case for while until module then catch loop proc begin".split(" ")),y=n(["end","until"]),q={"[":"]","{":"}","(":")"},g;return{startState:function(){return{tokenize:[m],indented:0,context:{type:"top",indented:-e.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(a,c){g=null;a.sol()&&(c.indented=a.indentation());var b=c.tokenize[c.tokenize.length-1](a,c),f,e=g;if("ident"==b){var d=a.current();b="."==c.lastTok?"property":w.propertyIsEnumerable(a.current())?"keyword":
/^[A-Z]/.test(d)?"tag":"def"==c.lastTok||"class"==c.lastTok||c.varList?"def":"variable";"keyword"==b&&(e=d,x.propertyIsEnumerable(d)?f="indent":y.propertyIsEnumerable(d)?f="dedent":"if"!=d&&"unless"!=d||a.column()!=a.indentation()?"do"==d&&c.context.indented<c.indented&&(f="indent"):f="indent")}if(g||b&&"comment"!=b)c.lastTok=e;"|"==g&&(c.varList=!c.varList);"indent"==f||/[\(\[\{]/.test(g)?c.context={prev:c.context,type:g||b,indented:c.indented}:("dedent"==f||/[\)\]\}]/.test(g))&&c.context.prev&&
(c.context=c.context.prev);a.eol()&&(c.continuedLine="\\"==g||"operator"==b);return b},indent:function(a,c){if(a.tokenize[a.tokenize.length-1]!=m)return 0;var b=c&&c.charAt(0),f=a.context;c=f.type==q[b]||"keyword"==f.type&&/^(?:end|until|else|elsif|when|rescue)\b/.test(c);return f.indented+(c?0:e.indentUnit)+(a.continuedLine?e.indentUnit:0)},electricInput:/^\s*(?:end|rescue|elsif|else|\})$/,lineComment:"#"}});e.defineMIME("text/x-ruby","ruby")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:sass', location = '/static/lib/CodeMirror/mode/sass/sass.js' */
(function(g){"object"==typeof exports&&"object"==typeof module?g(require("../../lib/codemirror"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../css/css"],g):g(CodeMirror)})(function(g){g.defineMode("sass",function(p){function h(a){return!a.peek()||a.match(/\s+$/,!1)}function q(a,b){var c=a.peek();if(")"===c)return a.next(),b.tokenizer=k,"operator";if("("===c)return a.next(),a.eatSpace(),"operator";b.tokenizer="'"===c||'"'===c?m(a.next()):m(")",!1);
return"string"}function r(a,b){return function(c,d){if(c.sol()&&c.indentation()<=a)return d.tokenizer=k,k(c,d);b&&c.skipTo("*/")?(c.next(),c.next(),d.tokenizer=k):c.skipToEnd();return"comment"}}function m(a,b){function c(d,e){var f=d.next(),g=d.peek(),l=d.string.charAt(d.pos-2);return"\\"!==f&&g===a||f===a&&"\\"!==l?(f!==a&&b&&d.next(),h(d)&&(e.cursorHalf=0),e.tokenizer=k,"string"):"#"===f&&"{"===g?(e.tokenizer=t(c),d.next(),"operator"):"string"}null==b&&(b=!0);return c}function t(a){return function(b,
c){return"}"===b.peek()?(b.next(),c.tokenizer=a,"operator"):k(b,c)}}function f(a){0==a.indentCount&&(a.indentCount++,a.scopes.unshift({offset:a.scopes[0].offset+p.indentUnit}))}function k(a,b){var c=a.peek();if(a.match("/*"))return b.tokenizer=r(a.indentation(),!0),b.tokenizer(a,b);if(a.match("//"))return b.tokenizer=r(a.indentation(),!1),b.tokenizer(a,b);if(a.match("#{"))return b.tokenizer=t(k),"operator";if('"'===c||"'"===c)return a.next(),b.tokenizer=m(c),"string";if(b.cursorHalf){if("#"===c&&
(a.next(),a.match(/[0-9a-fA-F]{6}|[0-9a-fA-F]{3}/))||a.match(/^-?[0-9\.]+/))return h(a)&&(b.cursorHalf=0),"number";if(a.match(/^(px|em|in)\b/))return h(a)&&(b.cursorHalf=0),"unit";if(a.match(u))return h(a)&&(b.cursorHalf=0),"keyword";if(a.match(/^url/)&&"("===a.peek())return b.tokenizer=q,h(a)&&(b.cursorHalf=0),"atom";if("$"===c)return a.next(),a.eatWhile(/[\w-]/),h(a)&&(b.cursorHalf=0),"variable-2";if("!"===c)return a.next(),b.cursorHalf=0,a.match(/^[\w]+/)?"keyword":"operator";if(a.match(v))return h(a)&&
(b.cursorHalf=0),"operator";if(a.eatWhile(/[\w-]/))return h(a)&&(b.cursorHalf=0),e=a.current().toLowerCase(),w.hasOwnProperty(e)?"atom":x.hasOwnProperty(e)?"keyword":n.hasOwnProperty(e)?(b.prevProp=a.current().toLowerCase(),"property"):"tag";if(h(a))return b.cursorHalf=0,null}else{if("-"===c&&a.match(/^-\w+-/))return"meta";if("."===c){a.next();if(a.match(/^[\w-]+/))return f(b),"qualifier";if("#"===a.peek())return f(b),"tag"}if("#"===c){a.next();if(a.match(/^[\w-]+/))return f(b),"builtin";if("#"===
a.peek())return f(b),"tag"}if("$"===c)return a.next(),a.eatWhile(/[\w-]/),"variable-2";if(a.match(/^-?[0-9\.]+/))return"number";if(a.match(/^(px|em|in)\b/))return"unit";if(a.match(u))return"keyword";if(a.match(/^url/)&&"("===a.peek())return b.tokenizer=q,"atom";if("\x3d"===c&&a.match(/^=[\w-]+/))return f(b),"meta";if("+"===c&&a.match(/^\+[\w-]+/))return"variable-3";"@"===c&&a.match(/@extend/)&&!a.match(/\s*[\w]/)&&1!=b.scopes.length&&b.scopes.shift();if(a.match(/^@(else if|if|media|else|for|each|while|mixin|function)/))return f(b),
"def";if("@"===c)return a.next(),a.eatWhile(/[\w-]/),"def";if(a.eatWhile(/[\w-]/)){if(a.match(/ *: *[\w-\+\$#!\("']/,!1))return e=a.current().toLowerCase(),n.hasOwnProperty(b.prevProp+"-"+e)?"property":n.hasOwnProperty(e)?(b.prevProp=e,"property"):y.hasOwnProperty(e)?"property":"tag";if(a.match(/ *:/,!1))return f(b),b.cursorHalf=1,b.prevProp=a.current().toLowerCase(),"property";a.match(/ *,/,!1)||f(b);return"tag"}if(":"===c){if(a.match(z))return"variable-3";a.next();b.cursorHalf=1;return"operator"}}if(a.match(v))return"operator";
a.next();return null}var l=g.mimeModes["text/css"],n=l.propertyKeywords||{},x=l.colorKeywords||{},w=l.valueKeywords||{},y=l.fontProperties||{},u=/^true|false|null|auto/,v=/^\(|\)|=|>|<|==|>=|<=|\+|-|\!=|\/|\*|%|and|or|not|;|\{|\}|:/,z=/^::?[a-zA-Z_][\w\-]*/,e;return{startState:function(){return{tokenizer:k,scopes:[{offset:0,type:"sass"}],indentCount:0,cursorHalf:0,definedVars:[],definedMixins:[]}},token:function(a,b){a.sol()&&(b.indentCount=0);var c=b.tokenizer(a,b),d=a.current();"@return"!==d&&"}"!==
d||1==b.scopes.length||b.scopes.shift();if(null!==c){d=a.pos-d.length+p.indentUnit*b.indentCount;for(var f=[],e=0;e<b.scopes.length;e++){var g=b.scopes[e];g.offset<=d&&f.push(g)}b.scopes=f}b.lastToken={style:c,content:a.current()};return c},indent:function(a){return a.scopes[0].offset}}},"css");g.defineMIME("text/x-sass","sass")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:shell', location = '/static/lib/CodeMirror/mode/shell/shell.js' */
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){c.defineMode("shell",function(){function c(a,b){b=b.split(" ");for(var e=0;e<b.length;e++)f[b[e]]=a}function n(a,b){if(a.eatSpace())return null;var e=a.sol(),d=a.next();if("\\"===d)return a.next(),null;if("'"===d||'"'===d||"`"===d)return b.tokens.unshift(l(d,"`"===d?"quote":"string")),g(a,b);if("#"===
d){if(e&&a.eat("!"))return a.skipToEnd(),"meta";a.skipToEnd();return"comment"}if("$"===d)return b.tokens.unshift(m),g(a,b);if("+"===d||"\x3d"===d)return"operator";if("-"===d)return a.eat("-"),a.eatWhile(/\w/),"attribute";if(/\d/.test(d)&&(a.eatWhile(/\d/),a.eol()||!/\w/.test(a.peek())))return"number";a.eatWhile(/[\w-]/);b=a.current();return"\x3d"===a.peek()&&/\w+/.test(b)?"def":f.hasOwnProperty(b)?f[b]:null}function l(a,b){var e="("==a?")":"{"==a?"}":a;return function(d,c){for(var h,f=!1,k=!1;null!=
(h=d.next());){if(h===e&&!k){f=!0;break}if("$"===h&&!k&&"'"!==a){d.backUp(1);c.tokens.unshift(m);break}if(!k&&h===a&&a!==e)return c.tokens.unshift(l(a,b)),g(d,c);k=!k&&"\\"===h}f&&c.tokens.shift();return b}}function g(a,b){return(b.tokens[0]||n)(a,b)}var f={};c("atom","true false");c("keyword","if then do else elif while until for in esac fi fin fil done exit set unset export function");c("builtin","ab awk bash beep cat cc cd chown chmod chroot clear cp curl cut diff echo find gawk gcc get git grep hg kill killall ln ls make mkdir openssl mv nc node npm ping ps restart rm rmdir sed service sh shopt shred source sort sleep ssh start stop su sudo svn tee telnet top touch vi vim wall wc wget who write yes zsh");
var m=function(a,b){1<b.tokens.length&&a.eat("$");var c=a.next();if(/['"({]/.test(c))return b.tokens[0]=l(c,"("==c?"quote":"{"==c?"def":"string"),g(a,b);/\d/.test(c)||a.eatWhile(/\w/);b.tokens.shift();return"def"};return{startState:function(){return{tokens:[]}},token:function(a,b){return g(a,b)},closeBrackets:"()[]{}''\"\"``",lineComment:"#",fold:"brace"}});c.defineMIME("text/x-sh","shell");c.defineMIME("application/x-sh","shell")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:sql', location = '/static/lib/CodeMirror/mode/sql/sql.js' */
(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){e.defineMode("sql",function(l,g){function k(c,b){var d=c.next();if(m[d]){var e=m[d](c,b);if(!1!==e)return e}if(h.hexNumber&&("0"==d&&c.match(/^[xX][0-9a-fA-F]+/)||("x"==d||"X"==d)&&c.match(/^'[0-9a-fA-F]+'/))||h.binaryNumber&&(("b"==d||"B"==d)&&c.match(/^'[01]+'/)||"0"==d&&c.match(/^b[01]+/)))return"number";
if(47<d.charCodeAt(0)&&58>d.charCodeAt(0))return c.match(/^[0-9]*(\.[0-9]+)?([eE][-+]?[0-9]+)?/),h.decimallessFloat&&c.match(/^\.(?!\.)/),"number";if("?"==d&&(c.eatSpace()||c.eol()||c.eat(";")))return"variable-3";if("'"==d||'"'==d&&h.doubleQuote)return b.tokenize=a(d),b.tokenize(c,b);if(!(h.nCharCast&&("n"==d||"N"==d)||h.charsetCast&&"_"==d&&c.match(/[a-z][a-z0-9]*/i))||"'"!=c.peek()&&'"'!=c.peek()){if(/^[\(\),\;\[\]]/.test(d))return null;if(h.commentSlashSlash&&"/"==d&&c.eat("/")||h.commentHash&&
"#"==d||"-"==d&&c.eat("-")&&(!h.commentSpaceRequired||c.eat(" ")))return c.skipToEnd(),"comment";if("/"==d&&c.eat("*"))return b.tokenize=f(1),b.tokenize(c,b);if("."==d){if(h.zerolessFloat&&c.match(/^(?:\d+(?:e[+-]?\d+)?)/i))return"number";if(c.match(/^\.+/))return null;if(h.ODBCdotTable&&c.match(/^[\w\d_]+/))return"variable-2"}else{if(n.test(d))return c.eatWhile(n),null;if("{"==d&&(c.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||c.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";c.eatWhile(/^[_\w\d]/);
b=c.current().toLowerCase();return q.hasOwnProperty(b)&&(c.match(/^( )+'[^']*'/)||c.match(/^( )+"[^"]*"/))?"number":r.hasOwnProperty(b)?"atom":t.hasOwnProperty(b)?"builtin":u.hasOwnProperty(b)?"keyword":v.hasOwnProperty(b)?"string-2":null}}else return"keyword"}function a(a){return function(c,f){for(var b=!1,d;null!=(d=c.next());){if(d==a&&!b){f.tokenize=k;break}b=!b&&"\\"==d}return"string"}}function f(a){return function(c,d){var b=c.match(/^.*?(\/\*|\*\/)/);b?d.tokenize="/*"==b[1]?f(a+1):1<a?f(a-
1):k:c.skipToEnd();return"comment"}}function p(a,b,f){b.context={prev:b.context,indent:a.indentation(),col:a.column(),type:f}}var v=g.client||{},r=g.atoms||{"false":!0,"true":!0,"null":!0},t=g.builtin||{},u=g.keywords||{},n=g.operatorChars||/^[*+\-%<>!=&|~^]/,h=g.support||{},m=g.hooks||{},q=g.dateSQL||{date:!0,time:!0,timestamp:!0};return{startState:function(){return{tokenize:k,context:null}},token:function(a,b){a.sol()&&b.context&&null==b.context.align&&(b.context.align=!1);if(b.tokenize==k&&a.eatSpace())return null;
var c=b.tokenize(a,b);if("comment"==c)return c;b.context&&null==b.context.align&&(b.context.align=!0);var f=a.current();"("==f?p(a,b,")"):"["==f?p(a,b,"]"):b.context&&b.context.type==f&&(b.indent=b.context.indent,b.context=b.context.prev);return c},indent:function(a,b){a=a.context;if(!a)return e.Pass;b=b.charAt(0)==a.type;return a.align?a.col+(b?0:1):a.indent+(b?0:l.indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:h.commentSlashSlash?"//":h.commentHash?"#":"--"}});(function(){function l(a){for(var f;null!=
(f=a.next());)if("`"==f&&!a.eat("`"))return"variable-2";a.backUp(a.current().length-1);return a.eatWhile(/\w/)?"variable-2":null}function g(a){a.eat("@")&&(a.match(/^session\./),a.match(/^local\./),a.match(/^global\./));return a.eat("'")?(a.match(/^.*'/),"variable-2"):a.eat('"')?(a.match(/^.*"/),"variable-2"):a.eat("`")?(a.match(/^.*`/),"variable-2"):a.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null}function k(a){return a.eat("N")?"atom":a.match(/^[a-zA-Z.#!?]/)?"variable-2":null}function a(a){var e=
{};a=a.split(" ");for(var f=0;f<a.length;++f)e[a[f]]=!0;return e}e.defineMIME("text/x-sql",{name:"sql",keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit begin"),builtin:a("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),
atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:a("date time timestamp"),support:a("ODBCdotTable doubleQuote binaryNumber hexNumber")});e.defineMIME("text/x-mssql",{name:"sql",client:a("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered declare exec"),
builtin:a("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:a("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":g}});e.defineMIME("text/x-mysql",{name:"sql",client:a("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),
keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group group_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:a("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:a("date time timestamp"),support:a("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
hooks:{"@":g,"`":l,"\\":k}});e.defineMIME("text/x-mariadb",{name:"sql",client:a("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:a("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:a("date time timestamp"),support:a("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
hooks:{"@":g,"`":l,"\\":k}});e.defineMIME("text/x-sqlite",{name:"sql",client:a("auth backup bail binary changes check clone databases dbinfo dump echo eqp exit explain fullschema headers help import imposter indexes iotrace limit lint load log mode nullvalue once open output print prompt quit read restore save scanstats schema separator session shell show stats system tables testcase timeout timer trace vfsinfo vfslist vfsname width"),keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit abort action add after all analyze attach autoincrement before begin cascade case cast check collate column commit conflict constraint cross current_date current_time current_timestamp database default deferrable deferred detach each else end escape except exclusive exists explain fail for foreign full glob if ignore immediate index indexed initially inner instead intersect isnull key left limit match natural no notnull null of offset outer plan pragma primary query raise recursive references regexp reindex release rename replace restrict right rollback row savepoint temp temporary then to transaction trigger unique using vacuum view virtual when with without"),
builtin:a("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text clob bigint int int2 int8 integer float double char varchar date datetime year unsigned signed numeric real"),atoms:a("null current_date current_time current_timestamp"),operatorChars:/^[*+\-%<>!=&|/~]/,dateSQL:a("date time timestamp datetime"),support:a("decimallessFloat zerolessFloat"),identifierQuote:'"',hooks:{"@":g,":":g,"?":g,$:g,'"':function(a){for(var e;null!=
(e=a.next());)if('"'==e&&!a.eat('"'))return"variable-2";a.backUp(a.current().length-1);return a.eatWhile(/\w/)?"variable-2":null},"`":l}});e.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:a("add all allow alter and any apply as asc authorize batch begin by clustering columnfamily compact consistency count create custom delete desc distinct drop each_quorum exists filtering from grant if in index insert into key keyspace keyspaces level limit local_one local_quorum modify nan norecursive nosuperuser not of on one order password permission permissions primary quorum rename revoke schema select set storage superuser table three to token truncate ttl two type unlogged update use user users using values where with writetime"),
builtin:a("ascii bigint blob boolean counter decimal double float frozen inet int list map static text timestamp timeuuid tuple uuid varchar varint"),atoms:a("false true infinity NaN"),operatorChars:/^[<>=]/,dateSQL:{},support:a("commentSlashSlash decimallessFloat"),hooks:{}});e.defineMIME("text/x-plsql",{name:"sql",client:a("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),
keywords:a("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),
builtin:a("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least length lengthb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),
operatorChars:/^[*+\-%<>!=~]/,dateSQL:a("date time timestamp"),support:a("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")});e.defineMIME("text/x-hive",{name:"sql",keywords:a("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external false fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger true unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with"),
builtin:a("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:a("date timestamp"),support:a("ODBCdotTable doubleQuote binaryNumber hexNumber")});e.defineMIME("text/x-pgsql",{name:"sql",client:a("source"),keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit a abort abs absent absolute access according action ada add admin after aggregate all allocate also always analyse analyze any are array array_agg array_max_cardinality asensitive assertion assignment asymmetric at atomic attribute attributes authorization avg backward base64 before begin begin_frame begin_partition bernoulli binary bit_length blob blocked bom both breadth c cache call called cardinality cascade cascaded case cast catalog catalog_name ceil ceiling chain characteristics characters character_length character_set_catalog character_set_name character_set_schema char_length check checkpoint class class_origin clob close cluster coalesce cobol collate collation collation_catalog collation_name collation_schema collect column columns column_name command_function command_function_code comment comments commit committed concurrently condition condition_number configuration conflict connect connection connection_name constraint constraints constraint_catalog constraint_name constraint_schema constructor contains content continue control conversion convert copy corr corresponding cost covar_pop covar_samp cross csv cube cume_dist current current_catalog current_date current_default_transform_group current_path current_role current_row current_schema current_time current_timestamp current_transform_group_for_type current_user cursor cursor_name cycle data database datalink datetime_interval_code datetime_interval_precision day db deallocate dec declare default defaults deferrable deferred defined definer degree delimiter delimiters dense_rank depth deref derived describe descriptor deterministic diagnostics dictionary disable discard disconnect dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue do document domain dynamic dynamic_function dynamic_function_code each element else empty enable encoding encrypted end end-exec end_frame end_partition enforced enum equals escape event every except exception exclude excluding exclusive exec execute exists exp explain expression extension external extract false family fetch file filter final first first_value flag float floor following for force foreign fortran forward found frame_row free freeze fs full function functions fusion g general generated get global go goto grant granted greatest grouping groups handler header hex hierarchy hold hour id identity if ignore ilike immediate immediately immutable implementation implicit import including increment indent index indexes indicator inherit inherits initially inline inner inout input insensitive instance instantiable instead integrity intersect intersection invoker isnull isolation k key key_member key_type label lag language large last last_value lateral lead leading leakproof least left length level library like_regex link listen ln load local localtime localtimestamp location locator lock locked logged lower m map mapping match matched materialized max maxvalue max_cardinality member merge message_length message_octet_length message_text method min minute minvalue mod mode modifies module month more move multiset mumps name names namespace national natural nchar nclob nesting new next nfc nfd nfkc nfkd nil no none normalize normalized nothing notify notnull nowait nth_value ntile null nullable nullif nulls number object occurrences_regex octets octet_length of off offset oids old only open operator option options ordering ordinality others out outer output over overlaps overlay overriding owned owner p pad parallel parameter parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partial partition pascal passing passthrough password percent percentile_cont percentile_disc percent_rank period permission placing plans pli policy portion position position_regex power precedes preceding prepare prepared preserve primary prior privileges procedural procedure program public quote range rank read reads reassign recheck recovery recursive ref references referencing refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex relative release rename repeatable replace replica requiring reset respect restart restore restrict restricted result return returned_cardinality returned_length returned_octet_length returned_sqlstate returning returns revoke right role rollback rollup routine routine_catalog routine_name routine_schema row rows row_count row_number rule savepoint scale schema schema_name scope scope_catalog scope_name scope_schema scroll search second section security selective self sensitive sequence sequences serializable server server_name session session_user setof sets share show similar simple size skip snapshot some source space specific specifictype specific_name sql sqlcode sqlerror sqlexception sqlstate sqlwarning sqrt stable standalone start state statement static statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset substring substring_regex succeeds sum symmetric sysid system system_time system_user t tables tablesample tablespace table_name temp template temporary then ties timezone_hour timezone_minute to token top_level_count trailing transaction transactions_committed transactions_rolled_back transaction_active transform transforms translate translate_regex translation treat trigger trigger_catalog trigger_name trigger_schema trim trim_array true truncate trusted type types uescape unbounded uncommitted under unencrypted unique unknown unlink unlisten unlogged unnamed unnest until untyped upper uri usage user user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema using vacuum valid validate validator value value_of varbinary variadic var_pop var_samp verbose version versioning view views volatile when whenever whitespace width_bucket window within work wrapper write xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate year yes loop repeat attach path depends detach zone"),
builtin:a("bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float8 inet integer int int4 interval json jsonb line lseg macaddr macaddr8 money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^\/#@?~]/,dateSQL:a("date time timestamp"),
support:a("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast")});e.defineMIME("text/x-gql",{name:"sql",keywords:a("ancestor and asc by contains desc descendant distinct from group has in is limit offset on order select superset where"),atoms:a("false true"),builtin:a("blob datetime first key __key__ string integer double boolean null"),operatorChars:/^[*+\-%<>!=]/});e.defineMIME("text/x-gpsql",{name:"sql",client:a("source"),keywords:a("abort absolute access action active add admin after aggregate all also alter always analyse analyze and any array as asc assertion assignment asymmetric at authorization backward before begin between bigint binary bit boolean both by cache called cascade cascaded case cast chain char character characteristics check checkpoint class close cluster coalesce codegen collate column comment commit committed concurrency concurrently configuration connection constraint constraints contains content continue conversion copy cost cpu_rate_limit create createdb createexttable createrole createuser cross csv cube current current_catalog current_date current_role current_schema current_time current_timestamp current_user cursor cycle data database day deallocate dec decimal declare decode default defaults deferrable deferred definer delete delimiter delimiters deny desc dictionary disable discard distinct distributed do document domain double drop dxl each else enable encoding encrypted end enum errors escape every except exchange exclude excluding exclusive execute exists explain extension external extract false family fetch fields filespace fill filter first float following for force foreign format forward freeze from full function global grant granted greatest group group_id grouping handler hash having header hold host hour identity if ignore ilike immediate immutable implicit in including inclusive increment index indexes inherit inherits initially inline inner inout input insensitive insert instead int integer intersect interval into invoker is isnull isolation join key language large last leading least left level like limit list listen load local localtime localtimestamp location lock log login mapping master match maxvalue median merge minute minvalue missing mode modifies modify month move name names national natural nchar new newline next no nocreatedb nocreateexttable nocreaterole nocreateuser noinherit nologin none noovercommit nosuperuser not nothing notify notnull nowait null nullif nulls numeric object of off offset oids old on only operator option options or order ordered others out outer over overcommit overlaps overlay owned owner parser partial partition partitions passing password percent percentile_cont percentile_disc placing plans position preceding precision prepare prepared preserve primary prior privileges procedural procedure protocol queue quote randomly range read readable reads real reassign recheck recursive ref references reindex reject relative release rename repeatable replace replica reset resource restart restrict returning returns revoke right role rollback rollup rootpartition row rows rule savepoint scatter schema scroll search second security segment select sequence serializable session session_user set setof sets share show similar simple smallint some split sql stable standalone start statement statistics stdin stdout storage strict strip subpartition subpartitions substring superuser symmetric sysid system table tablespace temp template temporary text then threshold ties time timestamp to trailing transaction treat trigger trim true truncate trusted type unbounded uncommitted unencrypted union unique unknown unlisten until update user using vacuum valid validation validator value values varchar variadic varying verbose version view volatile web when where whitespace window with within without work writable write xml xmlattributes xmlconcat xmlelement xmlexists xmlforest xmlparse xmlpi xmlroot xmlserialize year yes zone"),
builtin:a("bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float float8 inet integer int int4 interval json jsonb line lseg macaddr macaddr8 money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^\/#@?~]/,
dateSQL:a("date time timestamp"),support:a("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast")});e.defineMIME("text/x-sparksql",{name:"sql",keywords:a("add after all alter analyze and anti archive array as asc at between bucket buckets by cache cascade case cast change clear cluster clustered codegen collection column columns comment commit compact compactions compute concatenate cost create cross cube current current_date current_timestamp database databases datata dbproperties defined delete delimited desc describe dfs directories distinct distribute drop else end escaped except exchange exists explain export extended external false fields fileformat first following for format formatted from full function functions global grant group grouping having if ignore import in index indexes inner inpath inputformat insert intersect interval into is items join keys last lateral lazy left like limit lines list load local location lock locks logical macro map minus msck natural no not null nulls of on option options or order out outer outputformat over overwrite partition partitioned partitions percent preceding principals purge range recordreader recordwriter recover reduce refresh regexp rename repair replace reset restrict revoke right rlike role roles rollback rollup row rows schema schemas select semi separated serde serdeproperties set sets show skewed sort sorted start statistics stored stratify struct table tables tablesample tblproperties temp temporary terminated then to touch transaction transactions transform true truncate unarchive unbounded uncache union unlock unset use using values view when where window with"),
builtin:a("tinyint smallint int bigint boolean float double string binary timestamp decimal array map struct uniontype delimited serde sequencefile textfile rcfile inputformat outputformat"),atoms:a("false true null"),operatorChars:/^[*+\-%<>!=~&|^]/,dateSQL:a("date time timestamp"),support:a("ODBCdotTable doubleQuote zerolessFloat")})})()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:vbscript', location = '/static/lib/CodeMirror/mode/vbscript/vbscript.js' */
(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){e.defineMode("vbscript",function(e,n){function d(a){return new RegExp("^(("+a.join(")|(")+"))\\b","i")}function h(a,b){if(a.eatSpace())return"space";if("'"===a.peek()||a.match(p))return a.skipToEnd(),"comment";if(a.match(/^((&H)|(&O))?[0-9\.]/i,!1)&&!a.match(/^((&H)|(&O))?[0-9\.]+[a-z_]/i,!1)){var c=!1;
a.match(/^\d*\.\d+/i)?c=!0:a.match(/^\d+\.\d*/)?c=!0:a.match(/^\.\d+/)&&(c=!0);if(c)return a.eat(/J/i),"number";c=!1;a.match(/^&H[0-9a-f]+/i)?c=!0:a.match(/^&O[0-7]+/i)?c=!0:a.match(/^[1-9]\d*F?/)?(a.eat(/J/i),c=!0):a.match(/^0(?![\dx])/i)&&(c=!0);if(c)return a.eat(/L/i),"number"}if(a.match('"'))return b.tokenize=q(a.current()),b.tokenize(a,b);if(a.match(r)||a.match(t)||a.match(u))return"operator";if(a.match(v))return null;if(a.match(w))return"bracket";if(a.match(x))return b.doInCurrentLine=!0,"keyword";
if(a.match(y))return b.currentIndent++,b.doInCurrentLine=!0,"keyword";if(a.match(z))return b.doInCurrentLine?b.doInCurrentLine=!1:b.currentIndent++,"keyword";if(a.match(k))return"keyword";if(a.match(l))return b.currentIndent--,b.currentIndent--,"keyword";if(a.match(m))return b.doInCurrentLine?b.doInCurrentLine=!1:b.currentIndent--,"keyword";if(a.match(A))return"keyword";if(a.match(B))return"atom";if(a.match(C))return"variable-2";if(a.match(D))return"builtin";if(a.match(E))return"variable-2";if(a.match(F))return"variable";
a.next();return"error"}function q(a){var b=1==a.length;return function(c,d){for(;!c.eol();){c.eatWhile(/[^'"]/);if(c.match(a))return d.tokenize=h,"string";c.eat(/['"]/)}if(b){if(n.singleLineStringErrors)return"error";d.tokenize=h}return"string"}}var t=/^[\+\-\*/&\\\^<>=]/,r=/^((<>)|(<=)|(>=))/,v=/^[\.,]/,w=/^[\(\)]/,F=/^[A-Za-z][_A-Za-z0-9]*/,u=d("and or not xor is mod eqv imp".split(" ")),f=["WScript","err","debug","RegExp"],G=["server","response","request","session","application"],H="buffer cachecontrol charset contenttype expires expiresabsolute isclientconnected pics status clientcertificate cookies form querystring servervariables totalbytes contents staticobjects codepage lcid sessionid timeout scripttimeout".split(" "),
I="addheader appendtolog binarywrite end flush redirect binaryread remove removeall lock unlock abandon getlasterror htmlencode mappath transfer urlencode".split(" "),g="clear execute raise replace test write writeline close open state eof update addnew end createobject quit".split(" ").concat("description firstindex global helpcontext helpfile ignorecase length number pattern source value count".split(" "));f=f.concat("vbBlack vbRed vbGreen vbYellow vbBlue vbMagenta vbCyan vbWhite vbBinaryCompare vbTextCompare vbSunday vbMonday vbTuesday vbWednesday vbThursday vbFriday vbSaturday vbUseSystemDayOfWeek vbFirstJan1 vbFirstFourDays vbFirstFullWeek vbGeneralDate vbLongDate vbShortDate vbLongTime vbShortTime vbObjectError vbOKOnly vbOKCancel vbAbortRetryIgnore vbYesNoCancel vbYesNo vbRetryCancel vbCritical vbQuestion vbExclamation vbInformation vbDefaultButton1 vbDefaultButton2 vbDefaultButton3 vbDefaultButton4 vbApplicationModal vbSystemModal vbOK vbCancel vbAbort vbRetry vbIgnore vbYes vbNo vbCr VbCrLf vbFormFeed vbLf vbNewLine vbNullChar vbNullString vbTab vbVerticalTab vbUseDefault vbTrue vbFalse vbEmpty vbNull vbInteger vbLong vbSingle vbDouble vbCurrency vbDate vbString vbObject vbError vbBoolean vbVariant vbDataObject vbDecimal vbByte vbArray".split(" "));
e.isASP&&(f=f.concat(G),g=g.concat(I,H));var A=d("dim;redim;then;until;randomize;byval;byref;new;property;exit;in;const;private;public;get;set;let;stop;on error resume next;on error goto 0;option explicit;call;me".split(";")),B=d(["true","false","nothing","empty","null"]),D=d("abs array asc atn cbool cbyte ccur cdate cdbl chr cint clng cos csng cstr date dateadd datediff datepart dateserial datevalue day escape eval execute exp filter formatcurrency formatdatetime formatnumber formatpercent getlocale getobject getref hex hour inputbox instr instrrev int fix isarray isdate isempty isnull isnumeric isobject join lbound lcase left len loadpicture log ltrim rtrim trim maths mid minute month monthname msgbox now oct replace rgb right rnd round scriptengine scriptenginebuildversion scriptenginemajorversion scriptengineminorversion second setlocale sgn sin space split sqr strcomp string strreverse tan time timer timeserial timevalue typename ubound ucase unescape vartype weekday weekdayname year".split(" ")),
E=d(f),C=d(g),z=d("class sub select while if function property with for".split(" ")),k=d(["else","elseif","case"]),m=d(["next","loop","wend"]),l=d(["end"]),y=d(["do"]),x=d(["on error resume next","exit"]),p=d(["rem"]);return{electricChars:"dDpPtTfFeE ",startState:function(){return{tokenize:h,lastToken:null,currentIndent:0,nextLineIndent:0,doInCurrentLine:!1,ignoreKeyword:!1}},token:function(a,b){a.sol()&&(b.currentIndent+=b.nextLineIndent,b.nextLineIndent=0,b.doInCurrentLine=0);var c=b.tokenize(a,
b);var d=a.current();if("."===d)if(c=b.tokenize(a,b),d=a.current(),!c||"variable"!==c.substr(0,8)&&"builtin"!==c&&"keyword"!==c)c="error";else{if("builtin"===c||"keyword"===c)c="variable";-1<g.indexOf(d.substr(1))&&(c="variable-2")}b.lastToken={style:c,content:a.current()};"space"===c&&(c=null);return c},indent:function(a,b){b=b.replace(/^\s+|\s+$/g,"");return b.match(m)||b.match(l)||b.match(k)?e.indentUnit*(a.currentIndent-1):0>a.currentIndent?0:a.currentIndent*e.indentUnit}}});e.defineMIME("text/vbscript",
"vbscript")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:yaml', location = '/static/lib/CodeMirror/mode/yaml/yaml.js' */
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){c.defineMode("yaml",function(){var c=/\b((true)|(false)|(on)|(off)|(yes)|(no))$/i;return{token:function(b,a){var d=b.peek(),e=a.escaped;a.escaped=!1;if("#"==d&&(0==b.pos||/\s/.test(b.string.charAt(b.pos-1))))return b.skipToEnd(),"comment";if(b.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(a.literal&&
b.indentation()>a.keyCol)return b.skipToEnd(),"string";a.literal&&(a.literal=!1);if(b.sol()){a.keyCol=0;a.pair=!1;a.pairStart=!1;if(b.match(/---/)||b.match(/\.\.\./))return"def";if(b.match(/\s*-\s+/))return"meta"}if(b.match(/^(\{|\}|\[|\])/))return"{"==d?a.inlinePairs++:"}"==d?a.inlinePairs--:"["==d?a.inlineList++:a.inlineList--,"meta";if(0<a.inlineList&&!e&&","==d)return b.next(),"meta";if(0<a.inlinePairs&&!e&&","==d)return a.keyCol=0,a.pair=!1,a.pairStart=!1,b.next(),"meta";if(a.pairStart){if(b.match(/^\s*(\||\>)\s*/))return a.literal=
!0,"meta";if(b.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable-2";if(0==a.inlinePairs&&b.match(/^\s*-?[0-9\.\,]+\s?$/)||0<a.inlinePairs&&b.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(b.match(c))return"keyword"}if(!a.pair&&b.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/))return a.pair=!0,a.keyCol=b.indentation(),"atom";if(a.pair&&b.match(/^:\s*/))return a.pairStart=!0,"meta";a.pairStart=!1;a.escaped="\\"==d;b.next();return null},startState:function(){return{pair:!1,
pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}}}});c.defineMIME("text/x-yaml","yaml");c.defineMIME("text/yaml","yaml")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:syntax-highlight', location = '/static/bitbucket/internal/util/syntax-highlight.js' */
define("bitbucket/internal/util/syntax-highlight",["module","exports","codemirror","jquery","bitbucket/internal/util/determine-language"],function(f,a,g,h,k){function d(a){var b=(0,e.default)(a);if(b.length){var c=b.attr("data-language");l.default.getCodeMirrorModeForName(c).then(function(a){m.default.runMode(b.text(),a.mime||{name:c},b[0])}).fail(function(a){console.warn(a||c+" could not be loaded for syntax highlighting.")})}}Object.defineProperty(a,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(g),
e=babelHelpers.interopRequireDefault(h),l=babelHelpers.interopRequireDefault(k);a.default={codeblock:d,container:function(a){(0,e.default)(a).find("pre \x3e code[data-language]").each(function(){d(this)})}};f.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:markup-preview-soy', location = '/static/bitbucket/internal/widget/markup-preview/markup-preview.soy' */
// This file was automatically generated from markup-preview.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.markupPreview.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.markupPreview == 'undefined') { bitbucket.internal.widget.markupPreview = {}; }


bitbucket.internal.widget.markupPreview.preview = function(opt_data, opt_ignored) {
  return '<div class="markup-preview markup" title="' + soy.$$escapeHtml('Click to edit') + '"></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.markupPreview.preview.soyTemplateName = 'bitbucket.internal.widget.markupPreview.preview';
}


bitbucket.internal.widget.markupPreview.previewHelp = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.buttons.button({href: 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Markdown+syntax+guide?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash', extraClasses: 'aui-button-subtle aui-button-compact markup-preview-help', title: 'Markup syntax guide', iconType: 'custom', iconClass: 'aui-icon aui-icon-small aui-iconfont-help', iconText: 'Markup syntax guide', buttonText: '', extraAttributes: {target: '_blank'}});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.markupPreview.previewHelp.soyTemplateName = 'bitbucket.internal.widget.markupPreview.previewHelp';
}


bitbucket.internal.widget.markupPreview.previewButton = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.buttons.button({extraClasses: 'aui-button-subtle aui-button-compact markup-preview-button', buttonText: 'Preview', extraAttributes: {type: 'button', 'data-preview-tooltip': opt_data.title}});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.markupPreview.previewButton.soyTemplateName = 'bitbucket.internal.widget.markupPreview.previewButton';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:markup-preview', location = '/static/bitbucket/internal/widget/markup-preview/markup-preview.js' */
define("bitbucket/internal/widget/markup-preview/markup-preview","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/util/ajax bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/navigator bitbucket/internal/util/syntax-highlight".split(" "),function(l,b,m,n,p,q,r,t,u,v,w){function a(a){this.init.apply(this,arguments)}Object.defineProperty(b,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(m),g=babelHelpers.interopRequireDefault(n),
c=babelHelpers.interopRequireDefault(p),y=babelHelpers.interopRequireDefault(q),z=babelHelpers.interopRequireDefault(r),h=babelHelpers.interopRequireDefault(t),d=babelHelpers.interopRequireDefault(u),A=babelHelpers.interopRequireDefault(v),B=babelHelpers.interopRequireDefault(w),f="ctrl+shift+p";d.default.on("bitbucket.internal.keyboard.shortcuts.requestPreviewComment",function(a){f=a;this.unbind()});d.default.addLocalEventMixin(a.prototype);a.prototype.init=function(a){c.default.bindAll(this,"togglePreview",
"updatePreview","refreshPreview","hidePreview","cancelPreview");var x=A.default.isMac()?f.replace(/ctrl/i,"meta"):f;this.$editor=(0,g.default)(a);this.$textarea=this.$editor.find("textarea");this.$previewButton=this.$editor.find(".markup-preview-button");this.$previewPanel=this.$editor.find(".markup-preview");this._destroyables=[];var b=this.$textarea.add(this.$previewButton);b.on("keydown",[x],this.togglePreview);this._destroyables.push({destroy:function(){b.off("keydown",this.togglePreview)}.bind(this)});
this._destroyables.push(d.default.chainWith(this.$previewButton).on("click",this.togglePreview));this._destroyables.push(d.default.chainWith(this.$previewPanel).on("click",h.default.filterByTarget(":not(a, a \x3e img)",this.togglePreview)));this._destroyables.push(d.default.chainWith(this.$textarea).on("input",c.default.debounce(this.refreshPreview,100)));this._destroyables.push({destroy:this.cancelPreview});var k=this;this.$previewButton.tooltip({gravity:function(){return g.default.fn.tipsy.autoNS.apply(this,
arguments)+"e"},title:function(){return k.isPreviewing()?"Continue editing":k.$previewButton.attr("data-preview-tooltip")}})};a.prototype.isPreviewing=function(){return this.$editor.hasClass("previewing")};a.prototype.togglePreview=h.default.preventDefault(function(){this.isPreviewing()?this.cancelPreview():this.showPreview()});a.prototype.showPreview=function(){this.$editor.addClass("previewing");this.$textarea.parent().spin("medium");this.$previewButton.text("Edit");
this._request&&this._request.abort();this._request=z.default.rest({type:"POST",url:C(),data:this.$textarea.val(),dataType:"json"}).done(this.updatePreview).fail(function(a,b){"abort"!==b&&this.hidePreview()}.bind(this)).always(function(){this.$textarea.parent().spinStop();this._request=null}.bind(this))};a.prototype.refreshPreview=function(){this.isPreviewing()&&this.showPreview()};a.prototype.updatePreview=function(a){this.$previewPanel.html(a.html);this.$previewPanel.find("a").attr("target","_blank");
this.$editor.addClass("loaded");this.$previewButton.focus();B.default.container(this.$previewPanel);a=this.trigger.bind(this,"resize");c.default.defer(a);this.$previewPanel.imagesLoaded(a)};a.prototype.cancelPreview=function(){this._request&&this._request.abort();this.hidePreview()};a.prototype.hidePreview=function(){this.$editor.removeClass("previewing loaded");this.$previewButton.text("Preview");this.$textarea.focus();this.trigger("resize")};a.prototype.destroy=
function(){c.default.invokeMap(this._destroyables,"destroy")};var C=c.default.once(function(){return y.default.rest().markup().preview().build()});b.default=a;l.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:client-file-handlers', location = '/static/bitbucket/internal/widget/client-file-handlers/client-file-uploader.js' */
define("bitbucket/internal/widget/client-file-handlers/client-file-uploader","module exports jquery lodash bitbucket/internal/util/ajax bitbucket/internal/util/feature-detect bitbucket/internal/widget/client-file-handlers/client-file-handler".split(" "),function(l,h,k,m,n,p,q){function a(d){if(!a.isSupported())throw Error("ClientFileUploader requires FormData support");this.init.apply(this,arguments)}Object.defineProperty(h,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(k),d=babelHelpers.interopRequireDefault(m),
r=babelHelpers.interopRequireDefault(n);k=babelHelpers.interopRequireDefault(p);var c=babelHelpers.interopRequireDefault(q);a.isSupported=k.default.formData;a.typeFilters=c.default.typeFilters;f.default.extend(a.prototype,c.default.prototype);a.prototype.defaults=f.default.extend({},c.default.prototype.defaults,{url:void 0,fieldName:"file",fileSizeLimit:void 0});a.prototype.init=function(a){d.default.bindAll(this,"uploadFiles");c.default.prototype.init.call(this,a);this.uploads=[];this.on("validFiles",
this.uploadFiles)};a.prototype.uploadFiles=function(a){var b=this;d.default.forEach(a,function(a){var c=new FormData,e=f.default.Deferred();c.append(b.options.fieldName,a,a.name);var g=r.default.ajax({url:d.default.isFunction(b.options.url)?b.options.url():b.options.url,type:"POST",data:c,timeout:b.options.timeout,xhr:function(){var a=f.default.ajaxSettings.xhr();(a.upload?a.upload:a).addEventListener("progress",function(a){a.lengthComputable&&e.notify(Math.max(0,Math.min(100,100*a.loaded/a.total)))});
return a},statusCode:{500:!1},processData:!1,contentType:!1}).done(function(){e.notify(100);e.resolveWith(this,arguments)}).fail(function(){e.rejectWith(this,arguments)}).always(function(){b.uploads=d.default.without(b.uploads,g)});e.promise(g);b.uploads.push(g);b.trigger("uploadStarted",g,a)})};a.prototype.destroy=function(){d.default.invokeMap(this.uploads,"abort");this.uploads=[]};h.default=a;l.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:client-file-handlers', location = '/static/bitbucket/internal/widget/client-file-handlers/client-file-handler.js' */
define("bitbucket/internal/widget/client-file-handlers/client-file-handler",["module","exports","jquery","lodash","bitbucket/internal/util/events"],function(g,e,h,k,l){function b(a){return this.init(a)}Object.defineProperty(e,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(h),d=babelHelpers.interopRequireDefault(k);babelHelpers.interopRequireDefault(l).default.addLocalEventMixin(b.prototype);b.typeFilters={all:/.*/,application:/^application\/.*/i,audio:/^audio\/.*/i,image:/^image\/.*/i,
imageWeb:/^image\/(jpeg|png|gif)$/i,text:/^text\/.*/i,video:/^video\/.*/i};b.prototype.defaults={fileTypeFilter:b.typeFilters.all,fileCountLimit:Infinity,fileSizeLimit:10485760,onSuccess:f.default.noop,onError:f.default.noop};b.prototype.init=function(a){this.options=f.default.extend({},this.defaults,a);a&&!a.fileSizeLimit&&(this.options.fileSizeLimit=this.defaults.fileSizeLimit);a&&!a.fileCountLimit&&(this.options.fileCountLimit=this.defaults.fileCountLimit);d.default.bindAll(this,"handleFiles",
"filterFiles");return this};b.prototype.handleFiles=function(a){this.trigger("filesSelected",a);a=this.filterFiles(a);0<a.valid.length?(d.default.isFunction(this.options.onSuccess)&&this.options.onSuccess(a.valid),this.trigger("validFiles",a.valid)):d.default.isFunction(this.options.onError)&&this.options.onError(a.invalid);d.default.keys(a.invalid).length&&this.trigger("invalidFiles",a.invalid)};b.prototype.filterFiles=function(a){var b=d.default.isRegExp(this.options.fileTypeFilter)?this.options.fileTypeFilter:
this.defaults.fileTypeFilter,e=this.options.fileSizeLimit;a=d.default.reduce(a,function(a,c){b.test(c.type)?c.size>e?a.invalid.bySize=a.invalid.bySize?a.invalid.bySize.concat(c):[c]:a.valid.push(c):a.invalid.byType=a.invalid.byType?a.invalid.byType.concat(c):[c];return a},{valid:[],invalid:{}});a.valid.length>this.options.fileCountLimit&&(a.invalid.byCount=a.valid.slice(this.options.fileCountLimit),a.valid=a.valid.slice(0,this.options.fileCountLimit));return a};e.default=b;g.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:client-file-handlers', location = '/static/bitbucket/internal/widget/client-file-handlers/client-file-reader.js' */
define("bitbucket/internal/widget/client-file-handlers/client-file-reader","module exports jquery lodash bitbucket/internal/util/feature-detect bitbucket/internal/widget/client-file-handlers/client-file-handler".split(" "),function(h,e,b,f,k,l){function a(m){if(!a.isSupported())throw Error("ClientFileReader requires FileReaderAPI support");return this.init(m)}Object.defineProperty(e,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);var d=babelHelpers.interopRequireDefault(f);f=babelHelpers.interopRequireDefault(k);
var c=babelHelpers.interopRequireDefault(l),g={ArrayBuffer:"readAsArrayBuffer",BinaryString:"readAsBinaryString",DataURL:"readAsDataURL",Text:"readAsText"};a.isSupported=f.default.fileReader;b.default.extend(a.prototype,c.default.prototype);a.readMethods={ArrayBuffer:"ArrayBuffer",BinaryString:"BinaryString",DataURL:"DataURL",Text:"Text"};a.typeFilters=c.default.typeFilters;a.prototype.defaults=b.default.extend({},c.default.prototype.defaults,{readMethod:a.readMethods.DataURL,onRead:b.default.noop});
a.prototype.init=function(a){d.default.bindAll(this,"onSuccess","readFile");c.default.prototype.init.call(this,a);this.options.onSuccess=this.onSuccess;return this};a.prototype.onSuccess=function(a){var b=d.default.has(g,this.options.readMethod)?g[this.options.readMethod]:void 0;b&&d.default.forEach(a,d.default.bind(function(a){var c=new FileReader;c.onload=d.default.bind(this.readFile,this,a);c[b](a)},this))};a.prototype.readFile=function(a,b){d.default.isFunction(this.options.onRead)&&this.options.onRead(b.target.result,
a)};e.default=a;h.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:drag-drop-file-target', location = '/static/bitbucket/internal/widget/drag-drop-file-target/drag-drop-file-target.js' */
define("bitbucket/internal/widget/drag-drop-file-target/drag-drop-file-target",["module","exports","jquery","lodash","bitbucket/internal/util/events"],function(f,c,g,h,k){function b(a,b){return this.init.apply(this,arguments)}Object.defineProperty(c,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(g),e=babelHelpers.interopRequireDefault(h),l=babelHelpers.interopRequireDefault(k);b.prototype.getDefaults=function(){return{activeDropTargetClass:"active-drop-target",uploadPrompt:"Drag a file here to upload",
clientFileHandler:null}};b.prototype.init=function(a,b){e.default.bindAll(this,"onDragOver","onDragEnd","onDrop");this.$target=(0,d.default)(a);this.options=d.default.extend({},this.getDefaults(),b);this.$target.attr("data-upload-prompt",this.options.uploadPrompt);this._destroyables=[];this._destroyables.push(l.default.chainWith(this.$target).on("dragover",this.onDragOver).on("dragleave",this.onDragEnd).on("dragend",this.onDragEnd).on("drop",this.onDrop))};b.prototype.onDragOver=function(a){a.preventDefault();
this.$target.addClass(this.options.activeDropTargetClass)};b.prototype.onDragEnd=function(a){a.preventDefault();this.$target.removeClass(this.options.activeDropTargetClass)};b.prototype.onDrop=function(a){a.preventDefault();a.originalEvent.preventDefault();this.$target.removeClass(this.options.activeDropTargetClass);this.options.clientFileHandler&&this.options.clientFileHandler.handleFiles(a.originalEvent.dataTransfer.files,a.originalEvent.target)};b.prototype.destroy=function(){this.$target.removeAttr("data-upload-prompt");
this.$target.removeClass(this.options.activeDropTargetClass);e.default.invokeMap(this._destroyables,"destroy")};c.default=b;f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:paste-image-target', location = '/static/bitbucket/internal/widget/paste-image-target/paste-image-target.js' */
define("bitbucket/internal/widget/paste-image-target/paste-image-target","module exports jquery lodash bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/widget/client-file-handlers/client-file-handler".split(" "),function(e,d,f,g,h,k,l){function b(a,b){this.init.apply(this,arguments)}Object.defineProperty(d,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(f),c=babelHelpers.interopRequireDefault(g),n=babelHelpers.interopRequireDefault(h),p=babelHelpers.interopRequireDefault(k),
q=babelHelpers.interopRequireDefault(l);b.prototype.init=function(a,b){c.default.bindAll(this,"handlePaste","processClipboardItem");this.$el=(0,m.default)(a);this.clientFileHandler=b;this._destroyables=[];this._destroyables.push(n.default.chainWith(this.$el).on("paste",this.handlePaste))};b.prototype.handlePaste=function(a){var b=q.default.typeFilters.image;a=a.originalEvent;a=a.clipboardData&&a.clipboardData.items;this.clientFileHandler&&a&&1===a.length&&c.default.toArray(a).filter(c.default.flow(p.default.dot("type"),
b.test.bind(b))).forEach(this.processClipboardItem)};b.prototype.processClipboardItem=function(a){a=a.getAsFile();a.name="upload."+c.default.last(a.type.split("/"));this.clientFileHandler.handleFiles([a],this.$el)};b.prototype.destroy=function(){c.default.invokeMap(this._destroyables,"destroy")};d.default=b;e.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:upload-interceptor', location = '/static/bitbucket/internal/widget/upload-interceptor/upload-interceptor.js' */
define("bitbucket/internal/widget/upload-interceptor/upload-interceptor",["module","exports","jquery","lodash","bitbucket/internal/util/events"],function(f,c,g,h,k){function b(a,b){this.init.apply(this,arguments)}Object.defineProperty(c,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(g),e=babelHelpers.interopRequireDefault(h),l=babelHelpers.interopRequireDefault(k);b.prototype.init=function(a,b){e.default.bindAll(this,"onSelectFile");this.$el=(0,d.default)(a);this.clientFileHandler=
b;this._destroyables=[];this._destroyables.push(l.default.chainWith(this.$el).on("change",this.onSelectFile))};b.prototype.onSelectFile=function(a){a=a.target;a.files&&a.files.length&&this.clientFileHandler&&(this.clientFileHandler.handleFiles(a.files,a),(0,d.default)(a).wrap("\x3cform\x3e").parent("form").trigger("reset").end().unwrap())};b.prototype.destroy=function(){e.default.invokeMap(this._destroyables,"destroy")};c.default=b;f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:faux-upload-field', location = '/static/bitbucket/internal/widget/faux-upload-field/faux-upload-field.soy' */
// This file was automatically generated from faux-upload-field.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.fauxUploadField.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.fauxUploadField == 'undefined') { bitbucket.internal.widget.fauxUploadField = {}; }


bitbucket.internal.widget.fauxUploadField.uploadField = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<input type="file" ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + 'class="faux-upload-field assistive ' + ((opt_data.extraClasses) ? soy.$$escapeHtml(opt_data.extraClasses) : '') + '"' + ((opt_data.accept) ? ' accept="' + soy.$$escapeHtml(opt_data.accept) + '"' : '') + ((opt_data.allowMultiple) ? ' multiple' : '') + '/>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.fauxUploadField.uploadField.soyTemplateName = 'bitbucket.internal.widget.fauxUploadField.uploadField';
}


bitbucket.internal.widget.fauxUploadField.labelButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({tagName: 'label', extraClasses: 'faux-upload-label-button ' + opt_data.extraClasses, text: opt_data.text});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.fauxUploadField.labelButton.soyTemplateName = 'bitbucket.internal.widget.fauxUploadField.labelButton';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:faux-upload-field', location = '/static/bitbucket/internal/widget/faux-upload-field/faux-upload-field.js' */
define("bitbucket/internal/widget/faux-upload-field/faux-upload-field","module exports jquery lodash bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/navigator bitbucket/internal/widget/client-file-handlers/client-file-handler bitbucket/internal/widget/upload-interceptor/upload-interceptor".split(" "),function(h,f,k,l,m,n,p,q,r){function c(b,a){this.init.apply(this,arguments)}Object.defineProperty(f,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(k),
g=babelHelpers.interopRequireDefault(l),t=babelHelpers.interopRequireDefault(m),u=babelHelpers.interopRequireDefault(n),v=babelHelpers.interopRequireDefault(p),e=babelHelpers.interopRequireDefault(q),w=babelHelpers.interopRequireDefault(r);c.prototype.defaults={clientFileHandler:null,accept:null,allowMultiple:!1};c.prototype.init=function(b,a){this.$el=(0,d.default)(b);this._destroyables=[];switch(a.accept){case e.default.typeFilters.audio:a.accept="audio/*";break;case e.default.typeFilters.image:a.accept=
"image/*";break;case e.default.typeFilters.imageWeb:a.accept="image/jpeg, image/gif, image/png";break;case e.default.typeFilters.video:a.accept="video/*"}this.options=d.default.extend({},this.defaults,a);b=g.default.uniqueId("faux-upload-field-");a=(0,d.default)(bitbucket.internal.widget.fauxUploadField.uploadField({id:b,accept:this.options.accept,allowMultiple:this.options.allowMultiple})).insertBefore(this.$el);this.$el.tooltip({gravity:d.default.fn.tipsy.autoNS});this.$el.is("label")?this.$el.attr("for",
b):v.default.isIE()?(this.$el.hide(),a.show()):this._destroyables.push(u.default.chainWith(this.$el).on("click",t.default.preventDefault(a.click.bind(a))));this.options.clientFileHandler&&this._destroyables.push(new w.default(a,this.options.clientFileHandler))};c.prototype.destroy=function(){g.default.invokeMap(this._destroyables,"destroy")};f.default=c;h.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:drag-drop-file-uploader', location = '/static/bitbucket/internal/widget/drag-drop-file-uploader/drag-drop-file-uploader.js' */
define("bitbucket/internal/widget/drag-drop-file-uploader/drag-drop-file-uploader","module exports jquery lodash bitbucket/internal/util/events bitbucket/internal/widget/client-file-handlers/client-file-uploader bitbucket/internal/widget/drag-drop-file-target/drag-drop-file-target bitbucket/internal/widget/faux-upload-field/faux-upload-field bitbucket/internal/widget/paste-image-target/paste-image-target".split(" "),function(h,d,e,k,l,m,n,p,q){function a(c,b){if(!a.isSupported())throw Error("DragDropUploader requires ClientFileUploader support");
this.init.apply(this,arguments)}Object.defineProperty(d,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(e),g=babelHelpers.interopRequireDefault(k);e=babelHelpers.interopRequireDefault(l);var c=babelHelpers.interopRequireDefault(m),r=babelHelpers.interopRequireDefault(n),t=babelHelpers.interopRequireDefault(p),u=babelHelpers.interopRequireDefault(q);a.typeFilters=c.default.typeFilters;a.isSupported=c.default.isSupported;e.default.addLocalEventMixin(a.prototype);a.prototype.defaults=
{url:null,fieldName:"file",uploadButton:void 0,fileTypeFilter:void 0,fileCountLimit:void 0,fileSizeLimit:void 0,pasteUpload:!0};a.prototype.init=function(a,b){this.$target=(0,f.default)(a);a=g.default.pick(c.default.prototype.defaults,"fileTypeFilter","fileCountLimit","fileSizeLimit");this.options=f.default.extend({},this.defaults,a,b);this._destroyables=[];b=new c.default({url:this.options.url,fieldName:this.options.fieldName,fileSizeLimit:this.options.fileSizeLimit});this._destroyables.push(this.retriggerFrom(b,
"filesSelected","validFiles","invalidFiles","uploadStarted"));this._destroyables.push(b);this._destroyables.push(new r.default(this.$target,{clientFileHandler:b}));this.options.uploadButton&&this._destroyables.push(new t.default((0,f.default)(this.options.uploadButton),{clientFileHandler:b,allowMultiple:1<this.options.fileCountLimit}));this.options.pasteUpload&&this._destroyables.push(new u.default(this.$target,b))};a.prototype.destroy=function(){g.default.invokeMap(this._destroyables,"destroy")};
d.default=a;h.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:promise-util', location = '/static/bitbucket/internal/util/promise.js' */
define("bitbucket/internal/util/promise",["module","exports","jquery","lodash"],function(v,l,w,x){function p(a){a&&a.abort&&a.abort()}function y(){console.log("Promise does not have an abort function")}function m(a,b,c){function k(a,c){return function(){return f?(new d.default.Deferred)[a+"With"](this,arguments):g=c.apply(this,arguments)}}var f,g=a,e=d.default.Callbacks(),h={};a=a.then(b?k("resolve",b):null,c?k("reject",c):null);h.abort=function(){"pending"===h.state()&&(f||p(g),f=!0);e.fire()};h.thenAbortable=
function(a,c){a=m(h,a,c);e.add(a.abort);return a};return a.promise(h)}function q(){return d.default.when.apply(d.default,e.default.map(arguments,z)).then(r,r)}function z(a){return a.then(t(!1),t(!0))}function t(a){return function(){return d.default.Deferred().resolve({rejectedSelf:a&&this,self:this,args:Array.prototype.slice.call(arguments)})}}function r(){var a=e.default.chain(arguments).map("rejectedSelf").find(e.default.identity).value(),b=(a?"reject":"resolve")+"With";a=a||arguments[0].self;var c=
e.default.map(arguments,"args");return d.default.Deferred()[b](a,c)}Object.defineProperty(l,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(w),e=babelHelpers.interopRequireDefault(x),u={PENDING:"pending",REJECTED:"rejected",RESOLVED:"resolved"};l.default={state:u,delay:function(a,b){return function(){var c=d.default.Deferred(),k=this,f=Array.prototype.slice.call(arguments),g=function(){return setTimeout(function(){var b=a.apply(k,f);b.done(c.resolve).fail(c.reject);h=b.abort?e.default.bind(b.abort,
b):y},b)},n=g();var h=function(){clearTimeout(n);c.reject(c,"abort","abort")};return c.promise({abort:function(){h()},reset:function(){"pending"===c.state()&&(clearTimeout(n),f=Array.prototype.slice.call(arguments),n=g())}})}},reduce:function(){var a=Array.prototype.slice.call(arguments),b=d.default.when.apply(d.default,a);b.abort=function(){e.default.forEach(a,p)};return b},settle:q,spinner:function(a,b,c,e,f){var g=(0,d.default)(a).spin(c||"small",e||{});return b.always(function(){f?g.spinStop():
g.remove()})},rollingSpinner:function(a,b,c){function k(){var a=Array.prototype.slice.call(arguments);a.length&&(g.spin(c).addClass("spinning"),f=q.apply(null,e.default.compact(a.concat(f))),f.always(function(){f.state()!==u.PENDING&&g.spinStop().removeClass("spinning")}))}c=c||"small";var f,g=(0,d.default)(a);b&&k(b);return{add:k}},thenAbortable:m,whenAbortable:function(){var a=d.default.when.apply(d.default,arguments);a.abort=e.default.invokeMap.bind(e.default,arguments,"abort");return m(a)},waitFor:function(a){var b=
d.default.Deferred();a=d.default.extend({timeout:1E4,interval:100,name:"",predicate:d.default.noop},a);var c=(new Date).getTime()+a.timeout,e=setInterval(function(){var d=a.predicate();d?(clearInterval(e),b.resolve(d)):(new Date).getTime()>c&&(clearInterval(e),b.reject("Predicate '"+a.name+"' was false after "+a.timeout+"ms"))},a.interval);return b.promise()}};v.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:inline-error-dialog', location = '/static/bitbucket/internal/widget/inline-error-dialog/inline-error-dialog.soy' */
// This file was automatically generated from inline-error-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.inlineErrorDialog.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.inlineErrorDialog == 'undefined') { bitbucket.internal.widget.inlineErrorDialog = {}; }


bitbucket.internal.widget.inlineErrorDialog.contents = function(opt_data, opt_ignored) {
  var output = '<h4>' + aui.icons.icon({icon: 'error', useIconFont: true}) + ((opt_data.title) ? soy.$$escapeHtml(opt_data.title) : '') + '</h4>' + ((opt_data.subtitle) ? '<h6>' + soy.$$escapeHtml(opt_data.subtitle) + '</h6>' : '');
  var errorList16 = opt_data.errors;
  var errorListLen16 = errorList16.length;
  for (var errorIndex16 = 0; errorIndex16 < errorListLen16; errorIndex16++) {
    var errorData16 = errorList16[errorIndex16];
    output += ((errorIndex16 == 0) ? '<ul>' : '') + '<li>' + soy.$$escapeHtml(errorData16) + '</li>' + ((errorIndex16 == errorListLen16 - 1) ? '</ul>' : '');
  }
  output += (opt_data.persistent) ? bitbucket.internal.buttons.button({extraClasses: 'dismiss-button', type: 'button', buttonText: 'Dismiss'}) : '';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.inlineErrorDialog.contents.soyTemplateName = 'bitbucket.internal.widget.inlineErrorDialog.contents';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:inline-error-dialog', location = '/static/bitbucket/internal/widget/inline-error-dialog/inline-error-dialog.js' */
define("bitbucket/internal/widget/inline-error-dialog/inline-error-dialog","module exports aui jquery lodash bitbucket/internal/util/events".split(" "),function(f,c,g,h,k,l){function a(a,b){this.init.apply(this,arguments)}Object.defineProperty(c,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(g),e=babelHelpers.interopRequireDefault(h),b=babelHelpers.interopRequireDefault(k),n=babelHelpers.interopRequireDefault(l);a.prototype.init=function(a,d){this.errors=[];this.options=e.default.extend({persistent:!0},
d);this._destroyables=[];b.default.bindAll(this,"_renderDialogContents","hide","show","refresh","add","reset","destroy");d={noBind:!0,persistent:this.options.persistent,addActiveClass:!1,fadeTime:0};this._$inlineDialog=m.default.InlineDialog((0,e.default)(a),b.default.uniqueId("inline-error-dialog-"),this._renderDialogContents,d);this.options.persistent&&this._destroyables.push(n.default.chainWith(this._$inlineDialog).on("click",".dismiss-button",this.hide))};a.prototype._renderDialogContents=function(a,
d,c){a.html(bitbucket.internal.widget.inlineErrorDialog.contents({title:b.default.isFunction(this.options.title)?this.options.title(this.errors):this.options.title,subtitle:b.default.isFunction(this.options.subtitle)?this.options.subtitle(this.errors):this.options.subtitle,errors:this.errors,persistent:this.options.persistent})).addClass("inline-error-contents");c()};a.prototype.hide=function(){this._$inlineDialog.hide();this.reset()};a.prototype.show=function(){this._$inlineDialog.show();this.refresh()};
a.prototype.refresh=function(){this._$inlineDialog.refresh()};a.prototype.add=function(a){this.errors.push(a)};a.prototype.reset=function(){this.errors.length=0};a.prototype.destroy=function(){this.errors.length=0;b.default.invokeMap(this._destroyables,"destroy");this._$inlineDialog.remove()};c.default=a;f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:property-util', location = '/static/bitbucket/internal/util/property.js' */
define("bitbucket/internal/util/property",["module","exports","jquery"],function(f,b,g){function c(a,b){if(null==a)return a;switch(b){case "STRING":return a;case "NUMBER":return Number(a);case "BOOLEAN":return"true"===a.toLowerCase()}}Object.defineProperty(b,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(g),e={};b.default={getFromProvider:function(a){return(a=e[a]||(e[a]=WRM.data.claim("com.atlassian.bitbucket.server.config-wrm-data:"+a+".data")))?d.default.Deferred().resolve(c(a.value,
a.type)):d.default.Deferred().reject()},_coerce:c};f.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:markup-attachments', location = '/static/bitbucket/internal/widget/markup-attachments/markup-attachments.soy' */
// This file was automatically generated from markup-attachments.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.markupAttachments.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.markupAttachments == 'undefined') { bitbucket.internal.widget.markupAttachments = {}; }


bitbucket.internal.widget.markupAttachments.uploadTrigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bitbucket.internal.buttons.button({tagName: 'label', extraClasses: 'aui-button-subtle aui-button-compact markup-attachments-button', title: opt_data.title, iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-attachment', iconText: opt_data.accessibilityText, buttonText: opt_data.buttonText ? opt_data.buttonText : ''});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.markupAttachments.uploadTrigger.soyTemplateName = 'bitbucket.internal.widget.markupAttachments.uploadTrigger';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:markup-attachments', location = '/static/bitbucket/internal/widget/markup-attachments/markup-attachments.js' */
define("bitbucket/internal/widget/markup-attachments/markup-attachments","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/model/page-state bitbucket/internal/util/events bitbucket/internal/util/feature-enabled bitbucket/internal/util/function bitbucket/internal/util/promise bitbucket/internal/util/property bitbucket/internal/util/text bitbucket/internal/widget/drag-drop-file-uploader/drag-drop-file-uploader bitbucket/internal/widget/inline-error-dialog/inline-error-dialog".split(" "),
function(r,f,g,t,u,v,w,x,y,h,z,A,B,C,D){function c(a){if(!c.isSupported())throw Error("MarkupAttachments requires DragDropFileUploader support");this.init.apply(this,arguments)}function E(a,b,c){var e=a.links.attachment;a=e&&e.href||a.links.self.href;b=(b||"").replace(/[^\w\.\-]/g,"");b=0===b.length||"."===d.default.head(b)?"upload"+b:b;a=a.replace(/([\(\)])/g,"\\$1");return"["+(k.default.typeFilters.image.test(c)?"!["+b+"]("+a+")":b)+"]("+a+")"}function F(a){return a+(a.length&&"\n"!==d.default.last(a)?
"\n":"")}Object.defineProperty(f,"__esModule",{value:!0});var l=babelHelpers.interopRequireDefault(g),m=babelHelpers.interopRequireDefault(t),d=babelHelpers.interopRequireDefault(u),G=babelHelpers.interopRequireDefault(v),H=babelHelpers.interopRequireDefault(w),n=babelHelpers.interopRequireDefault(x);g=babelHelpers.interopRequireDefault(y);var e=babelHelpers.interopRequireDefault(h),I=babelHelpers.interopRequireDefault(z);h=babelHelpers.interopRequireDefault(A);var J=babelHelpers.interopRequireDefault(B),
k=babelHelpers.interopRequireDefault(C),K=babelHelpers.interopRequireDefault(D),p;g.default.getFromProvider("attachments").done(function(a){p=a});var q;h.default.getFromProvider("attachment.upload.max.size").done(function(a){q=a});c.isEnabled=function(){return p};c.isSupported=k.default.isSupported;c._editorClass="markup-attachments";c.prototype.init=function(a){this.$editor=(0,m.default)(a);this.$textarea=this.$editor.find("textarea");this.$uploadButton=this.$editor.find(".markup-attachments-button");
this._destroyables=[];d.default.bindAll(this,"handleUpload","handleAttachment","handleFailures","hideErrors");this.$editor.addClass(c._editorClass);this.dragDropFileUploader=new k.default(this.$editor,{url:L,fieldName:"files",uploadButton:this.$uploadButton,fileSizeLimit:q});this._destroyables.push(this.dragDropFileUploader);this._destroyables.push(n.default.chainWith(this.dragDropFileUploader).on({filesSelected:this.hideErrors,invalidFiles:e.default.partialRight(d.default.forEach,e.default.binary(this.handleFailures)),
uploadStarted:this.handleUpload}));a=J.default.formatSizeInBytes(this.dragDropFileUploader.options.fileSizeLimit);this.errorDialog=new K.default(this.$uploadButton,{title:function(a){return l.default.format("{0,choice,1#There was a problem with your upload and the following file was not added|1\u003cThere was a problem with your upload and the following files were not added}",a.length)},subtitle:l.default.format("Note: There is a {0} size limit per file",a)});this._destroyables.push(this.errorDialog);this._destroyables.push(n.default.chainWith(this.$editor).on("resize",this.errorDialog.refresh));a=(0,
m.default)(aui.icons.icon({icon:"success",useIconFont:!0})).appendTo(this.$uploadButton);this._destroyables.push({destroy:a.remove.bind(a)});this.rollingSpinner=I.default.rollingSpinner(this.$uploadButton)};c.prototype.handleUpload=function(a,b){this.rollingSpinner.add(a);var c=d.default.flow(e.default.dot("attachments"),e.default.partialRight(d.default.forEach,d.default.partial(this.handleAttachment,b)));a.done(c).fail(function(a,c){this.handleFailures([b],c,{statusCode:a.status})}.bind(this))};
c.prototype.handleAttachment=function(a,b){b.errors?(b=d.default.head(b.errors),this.handleFailures([a],b.exceptionName,{message:b.message})):this.$textarea.val(F(this.$textarea.val())+E(b,a.name,a.type)).trigger("input").focus()};c.prototype.handleFailures=function(a,b,c){"abort"===b||"error"===b&&500!==c.statusCode?this.hideErrors():(d.default.map(a,"name").forEach(this.errorDialog.add),this.errorDialog.show())};c.prototype.hideErrors=function(){this.errorDialog.hide()};c.prototype.destroy=function(){this.$editor.removeClass(c._editorClass);
d.default.invokeMap(this._destroyables,"destroy")};var L=function(){return H.default.getRepository()&&G.default.currentRepo().attachments().build()};f.default=c;r.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:async-element-resize-helper', location = '/static/bitbucket/internal/util/async-element-resize-helper.js' */
define("bitbucket/internal/util/async-element-resize-helper",["module","exports"],function(e,b){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b){if(!a)throw Error("asyncElementResizeHelper called with null elem");requestAnimationFrame(function(){var c=a.clientWidth,d=a.clientHeight;a._cachedSize&&a._cachedSize.w===c&&a._cachedSize.h===d||(a._cachedSize={w:c,h:d},b())})};e.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:markup-editor', location = '/static/bitbucket/internal/widget/markup-editor/markup-editor.soy' */
// This file was automatically generated from markup-editor.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.markupEditor.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.markupEditor == 'undefined') { bitbucket.internal.widget.markupEditor = {}; }


bitbucket.internal.widget.markupEditor.editor = function(opt_data, opt_ignored) {
  return '<div class="markup-editor">' + bitbucket.internal.widget.markupPreview.preview(null) + widget.aui.form.expandingTextarea({id: opt_data.textareaId, name: opt_data.textareaName ? opt_data.textareaName : 'text', extraClasses: 'text', initialValue: opt_data.text, placeholderText: opt_data.placeholderText}) + '<div class="markup-toolbar"><div class="secondary">' + bitbucket.internal.widget.markupPreview.previewHelp(null) + bitbucket.internal.widget.markupPreview.previewButton({title: opt_data.previewButtonTitle}) + '</div><div class="primary">' + bitbucket.internal.widget.markupAttachments.uploadTrigger({title: opt_data.attachmentButtonTitle, accessibilityText: opt_data.attachmentButtonAccessibilityText}) + '</div><div class="tertiary"></div></div></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.markupEditor.editor.soyTemplateName = 'bitbucket.internal.widget.markupEditor.editor';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:markup-editor', location = '/static/bitbucket/internal/widget/markup-editor/markup-editor.js' */
define("bitbucket/internal/widget/markup-editor/markup-editor","module exports aui jquery lodash bitbucket/internal/util/async-element-resize-helper bitbucket/internal/util/events bitbucket/internal/widget/markup-attachments/markup-attachments bitbucket/internal/widget/markup-preview/markup-preview bitbucket/internal/widget/mentionable-textarea/mentionable-textarea".split(" "),function(m,f,n,p,q,r,t,u,v,w){function b(a){this.init.apply(this,arguments)}Object.defineProperty(f,"__esModule",{value:!0});
var l=babelHelpers.interopRequireDefault(n),g=babelHelpers.interopRequireDefault(p),c=babelHelpers.interopRequireDefault(q),x=babelHelpers.interopRequireDefault(r),h=babelHelpers.interopRequireDefault(t),k=babelHelpers.interopRequireDefault(u),y=babelHelpers.interopRequireDefault(v),z=babelHelpers.interopRequireDefault(w),d=[];b._dataKey="markup-editor";b.bindTo=function(a){a=b.unbindFrom(a);var e=new b(a);a.data(b._dataKey,e);return e};b.unbindFrom=function(a){a=(0,g.default)(a);a=a.is(".markup-editor")?
a:a.find(".markup-editor");var e=a.data(b._dataKey);e&&e.destroy();return a};b.registerExtension=function(a){c.default.includes(d,a)||d.push(a)};b.deregisterExtension=function(a){d=c.default.without(d,a)};h.default.addLocalEventMixin(b.prototype);b.prototype.init=function(a){a=(0,g.default)(a);this.$editor=a.is(".markup-editor")?a:a.find(".markup-editor");this._destroyables=[];a=this.$editor.find("textarea");a.is(document.activeElement)&&c.default.defer(a.focus.bind(a));a=this.$editor.find("textarea.expanding").expandingTextarea();
this._destroyables.push(h.default.chainWith(a).on("resize.expanding",this.onComponentResize.bind(this,!1)));this._destroyables.push({destroy:a.expandingTextarea.bind(a,"destroy")});a=new y.default(this.$editor);this._destroyables.push(h.default.chainWith(a).on("resize",this.onComponentResize.bind(this,!0)));this._destroyables.push(a);this._destroyables.push(new z.default({$container:this.$editor}));a=function(a){this.$editor.find(".markup-attachments-button").addClass("disabled").prop("disabled",
"disabled").attr("aria-disabled",!0).attr("title",a)}.bind(this);k.default.isEnabled()?k.default.isSupported()?this._destroyables.push(new k.default(this.$editor)):a("Uploading attachments is not supported in this browser"):a("Your system administrator has disabled uploading attachments");d.forEach(function(a){a.init(this.$editor);c.default.isFunction(a.destroy)&&this._destroyables.push({destroy:c.default.partial(a.destroy,this.$editor)})}.bind(this));this.$editor.find(".markup-preview-help").tooltip({gravity:g.default.fn.tipsy.autoNS})};
b.prototype.onComponentResize=function(a){var b=this;(0,x.default)(this.$editor[0],function(){b.$editor.triggerHandler("resize");b.trigger("resize",a)})};b.prototype.destroy=function(){c.default.invokeMap(this._destroyables,"destroy");this.$editor.data(b._dataKey,null);this.$editor=null;this.off()};f.default=b;m.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:keyboard-shortcuts', location = '/static/bitbucket/internal/widget/keyboard-shortcuts/keyboard-shortcuts.soy' */
// This file was automatically generated from keyboard-shortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.keyboardShortcutsContent = function(opt_data, opt_ignored) {
  var param6 = '';
  var contextNameList7 = opt_data.contextNames;
  var contextNameListLen7 = contextNameList7.length;
  for (var contextNameIndex7 = 0; contextNameIndex7 < contextNameListLen7; contextNameIndex7++) {
    var contextNameData7 = contextNameList7[contextNameIndex7];
    param6 += (contextNameIndex7 % 2 == 0) ? bitbucket.internal.widget.keyboardShortContext({contextName: contextNameData7, contextShortcuts: opt_data.contexts[contextNameIndex7]}) : '';
  }
  var param5 = '' + aui.group.item({content: param6});
  var param15 = '';
  var contextNameList16 = opt_data.contextNames;
  var contextNameListLen16 = contextNameList16.length;
  for (var contextNameIndex16 = 0; contextNameIndex16 < contextNameListLen16; contextNameIndex16++) {
    var contextNameData16 = contextNameList16[contextNameIndex16];
    param15 += (contextNameIndex16 % 2 == 1) ? bitbucket.internal.widget.keyboardShortContext({contextName: contextNameData16, contextShortcuts: opt_data.contexts[contextNameIndex16]}) : '';
  }
  param5 += aui.group.item({content: param15});
  var output = '' + aui.group.group({extraClasses: 'keyboard-shortcut-help', extraAttributes: {tabindex: '0'}, content: param5});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.keyboardShortcutsContent.soyTemplateName = 'bitbucket.internal.widget.keyboardShortcutsContent';
}


bitbucket.internal.widget.keyboardShortContext = function(opt_data, opt_ignored) {
  var output = '<div class="keyboard-shortcut-context"><h3>' + soy.$$escapeHtml(opt_data.contextName) + '</h3><dl>';
  var shortcutList29 = opt_data.contextShortcuts;
  var shortcutListLen29 = shortcutList29.length;
  for (var shortcutIndex29 = 0; shortcutIndex29 < shortcutListLen29; shortcutIndex29++) {
    var shortcutData29 = shortcutList29[shortcutIndex29];
    output += (! shortcutData29.hidden) ? bitbucket.internal.widget.keyboardShortcutItem({shortcut: shortcutData29}) : '';
  }
  output += '</dl></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.keyboardShortContext.soyTemplateName = 'bitbucket.internal.widget.keyboardShortContext';
}


bitbucket.internal.widget.keyboardShortcutItem = function(opt_data, opt_ignored) {
  var output = '<dt>' + soy.$$escapeHtml(opt_data.shortcut.description) + '</dt>';
  var optionList40 = opt_data.shortcut.keys;
  var optionListLen40 = optionList40.length;
  for (var optionIndex40 = 0; optionIndex40 < optionListLen40; optionIndex40++) {
    var optionData40 = optionList40[optionIndex40];
    output += ((! (optionIndex40 == 0) && ! (optionIndex40 == optionListLen40 - 1)) ? '<dd class=\'separator\'>' + soy.$$escapeHtml(',') + '</dd>' : '') + ((! (optionIndex40 == 0) && optionIndex40 == optionListLen40 - 1) ? '<dd class=\'separator\'>' + soy.$$escapeHtml(' or') + '</dd>' : '') + '<dd>' + bitbucket.internal.widget.keyboardShortcutOption({sequence: optionData40}) + '</dd>';
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.keyboardShortcutItem.soyTemplateName = 'bitbucket.internal.widget.keyboardShortcutItem';
}


bitbucket.internal.widget.keyboardShortcutOption = function(opt_data, opt_ignored) {
  var output = '';
  var keypressList57 = opt_data.sequence;
  var keypressListLen57 = keypressList57.length;
  for (var keypressIndex57 = 0; keypressIndex57 < keypressListLen57; keypressIndex57++) {
    var keypressData57 = keypressList57[keypressIndex57];
    output += ((! (keypressIndex57 == 0)) ? ' ' + soy.$$escapeHtml('then') + ' ' : '') + ((keypressData57.modifiers) ? bitbucket.internal.widget.keyboardShortcutModifier({keypress: keypressData57}) : bitbucket.internal.widget.keyboardShortcutKey({key: keypressData57}));
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.keyboardShortcutOption.soyTemplateName = 'bitbucket.internal.widget.keyboardShortcutOption';
}


bitbucket.internal.widget.keyboardShortcutModifier = function(opt_data, opt_ignored) {
  var output = '';
  var modifierList72 = opt_data.keypress.modifiers;
  var modifierListLen72 = modifierList72.length;
  for (var modifierIndex72 = 0; modifierIndex72 < modifierListLen72; modifierIndex72++) {
    var modifierData72 = modifierList72[modifierIndex72];
    output += bitbucket.internal.widget.keyboardShortcutKey({key: modifierData72});
  }
  output += bitbucket.internal.widget.keyboardShortcutKey({key: opt_data.keypress.key});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.keyboardShortcutModifier.soyTemplateName = 'bitbucket.internal.widget.keyboardShortcutModifier';
}


bitbucket.internal.widget.keyboardShortcutKey = function(opt_data, opt_ignored) {
  return '<kbd>' + soy.$$escapeHtml(opt_data.key) + '</kbd>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.keyboardShortcutKey.soyTemplateName = 'bitbucket.internal.widget.keyboardShortcutKey';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:keyboard-shortcuts', location = '/static/bitbucket/internal/widget/keyboard-shortcuts/keyboard-shortcuts.js' */
define("bitbucket/internal/widget/keyboard-shortcuts/keyboard-shortcuts","module exports aui jquery lodash bitbucket/internal/util/events bitbucket/internal/util/navigator".split(" "),function(q,l,r,t,u,v,w){function c(){if(!(this instanceof c))return new c;this._enabledContexts=[]}function m(a,b){a=g.default.extend({},a);a.keys=d.default.map(a.keys,function(a){return d.default.map(a,function(a){if(d.default.every(["key","modifiers"],d.default.partial(d.default.has,a)))return a;var f=1<a.length?a.split("+"):
a;return d.default.isArray(f)&&1!==f.length?{key:f.pop(),modifiers:b&&!1===b.convertOSModifier?f:d.default.map(f,c.convertOSModifier)}:a})});a.displayContext||(a.displayContext=c._contextDisplayInfo[a.context]?c._contextDisplayInfo[a.context].displayName:a.context.replace(/\b[a-z]/g,function(a){return a.toUpperCase()}));h[a.displayContext]||(h[a.displayContext]=[]);h[a.displayContext].push(a)}function n(a,b){p.default.trigger("bitbucket.internal.ui.keyboard.shortcutClicked",null,{context:a,keyEventName:b})}
Object.defineProperty(l,"__esModule",{value:!0});var b=babelHelpers.interopRequireDefault(r),g=babelHelpers.interopRequireDefault(t),d=babelHelpers.interopRequireDefault(u),p=babelHelpers.interopRequireDefault(v),x=babelHelpers.interopRequireDefault(w),y=/^[cC]trl$/i,k,h={};c.prototype._setRegistry=function(a){this._registry=a};c.prototype._initContent=function(){this._dialog=b.default.dialog2(aui.dialog.dialog2({titleText:"Keyboard shortcuts",content:bitbucket.internal.widget.keyboardShortcutsContent({contextNames:d.default.keys(h),
contexts:d.default.values(h)}),size:"large",id:"keyboard-shortcut-dialog"}))};c.prototype._bind=function(a){this._$trigger=a;var b=this;this._$trigger.on("click",function(a){a.preventDefault();b._show()})};c.prototype.enableContext=function(a){-1===g.default.inArray(a,this._enabledContexts)&&(k=a,this._registry.enableContext(a),k=void 0,this._enabledContexts.push(a))};c.prototype.resetContexts=function(){b.default.trigger("remove-bindings.keyboardshortcuts");this._enabledContexts=[];b.default.trigger("add-bindings.keyboardshortcuts")};
c.prototype._show=function(){this._hasShown||(this._initContent(),this._hasShown=!0);this._dialog.show()};c.prototype.addCustomShortcut=function(a,b,c,d){m({keys:b,context:a,displayContext:d,description:c},{convertOSModifier:!1})};c.convertOSModifier=function(a){return x.default.isMac()?a.replace(y,"\u2318"):a};c.internalizeShortcuts=function(a){d.default.forEach(a,m)};c._contextDisplayInfo={repository:{displayName:"Within A Repository"},"branch-compare":{displayName:"Branch compare"},
"branch-list":{displayName:"Branch list"},commit:{displayName:"Commit"},commits:{displayName:"Commit List"},"diff-tree":{displayName:"Commit"},"diff-view":{displayName:"Diff View"},filebrowser:{displayName:"Directory Browsing"},
global:{displayName:"Global"},"pull-request":{displayName:"Within A Pull Request"},"pull-request-list":{displayName:"Pull Request List"},"pull-request-overview":{displayName:"Within A Pull Request"},sourceview:{displayName:"Source View"}};
var e=new c;l.default={onReady:function(){e._bind((0,g.default)(".keyboard-shortcut-link"));var a=g.default.Deferred();(0,g.default)(document).ready(function(){setTimeout(function(){a.resolve()},0)});b.default.bind("register-contexts.keyboardshortcuts",function(b,c){e._setRegistry(c.shortcutRegistry);e.enableContext("global");a.done(function(){p.default.trigger("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",e,e)})});b.default.bind("shortcuts-loaded.keyboardshortcuts",function(a,
b){c.internalizeShortcuts(b.shortcuts)});b.default.params["keyboardshortcut-hash"]="bundled";b.default.trigger("initialize.keyboardshortcuts");require("bitbucket/internal/util/shortcuts",null).bind("keyboardShortcutsDialog",e._show.bind(e))},addTooltip:function(a,f){f=d.default.chain(f).split("+").map(c.convertOSModifier).map(function(a){return"shift"===a?"Shift":"ctrl"===a?c.convertOSModifier("Ctrl"):
a}).value().join(" + ");var e=a.attr("title");a.attr("title",e+b.default.format(" (type \u0027\u0027{0}\u0027\u0027)",f));return{remove:function(){a.attr("title",e)}}},bindKeyboardShortcutAnalytics:function(a,b){b.onValue(n.bind(null,k,a))},getEnablingContext:function(){return k},showDialog:function(){e&&e._show()},resetContexts:function(){e.resetContexts()},fireKeyboardShocutAnalyticsEvent:n};q.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:keyboard-shortcuts-util', location = '/static/bitbucket/internal/util/shortcuts.js' */
define("bitbucket/internal/util/shortcuts","module exports aui bacon bitbucket/util/events bitbucket/internal/util/navigator bitbucket/internal/widget/keyboard-shortcuts/keyboard-shortcuts".split(" "),function(l,f,m,n,p,q,r){function k(b){var a=d[b];a.lazy.whenIType&&a.lazy.whenIType.unbind();var c=t.default.whenIType(a.lazy.keys);a.lazy.whenIType=c;c.execute(a._sink);c.execute(g.default.fireKeyboardShocutAnalyticsEvent.bind(null,a.lazy.analyticsContext,b))}function h(b){d.hasOwnProperty(b)||(d[b]=
{analyticsBound:!1,lazy:{keys:null,whenIType:null,analyticsContext:null},baconSink:function(a){this._sink&&this._sink(a)},_sink:null,stream:u.default.fromBinder(function(a){var c=d[b];c._sink=a;c.lazy.keys&&k(b);return function(){c._sink=null;c.lazy.whenIType&&c.lazy.whenIType.unbind()}})});return d[b]}Object.defineProperty(f,"__esModule",{value:!0});var t=babelHelpers.interopRequireDefault(m),u=babelHelpers.interopRequireDefault(n),v=babelHelpers.interopRequireDefault(p),w=babelHelpers.interopRequireDefault(q),
g=babelHelpers.interopRequireDefault(r),d={};f.default={registerLazy:function(b,a,c){w.default.isMac()&&(c=c.replace(/ctrl/i,"meta"));a.unbind();a=h(b);a.lazy.keys=c;a.lazy.analyticsContext=g.default.getEnablingContext();a._sink&&k(b)},setup:function(b,a,c){var e=h(b);a.execute(e.baconSink.bind(e));e.analyticsBound||(e.analyticsBound=!0,g.default.bindKeyboardShortcutAnalytics(b,d[b].stream));v.default.trigger("bitbucket.internal.keyboard.shortcuts."+b,a,c)},bind:function(b,a){return h(b).stream.onValue(a)}};
l.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:time-i18n-mappings', location = '/static/bitbucket/internal/util/time-i18n-mappings.js' */
define("bitbucket/internal/util/time-i18n-mappings",["module","exports","aui"],function(d,c,e){Object.defineProperty(c,"__esModule",{value:!0});var a=babelHelpers.interopRequireDefault(e);c.default={commentEditedAge:{aMomentAgo:function(){return "edited a moment ago"},oneMinuteAgo:function(){return "edited 1 min ago"},xMinutesAgo:function(b){return a.default.format("edited {0} mins ago",
b)},oneHourAgo:function(){return "edited 1 hour ago"},xHoursAgo:function(b){return a.default.format("edited {0} hours ago",b)},oneDayAgo:function(){return "edited yesterday"},xDaysAgo:function(b){return a.default.format("edited {0} days ago",b)},oneWeekAgo:function(){return "edited 1 week ago"},absolute:function(b){return a.default.format("edited on {0}",
b)}}};d.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-page-data:page-data-loader', location = '/static/lib/page-data-loader.js' */
var _PageDataPlugin=function(){function k(){e.each(f,function(a,d){e.each(d,function(b,c){c.reject(h[a]?Error("Provider "+a+" not included with context "+b):Error("Provider "+a+" not included on page."))})})}var l=Object.prototype.hasOwnProperty,e=jQuery,h={},f={};e(document).ready(k);return{load:function(a,d){for(var b in d)if(l.call(d,b)){var c=f[b]||(f[b]={});c=c[a]||(c[a]=e.Deferred());var g=h[b]||(h[b]={});g[a]=d[b];if("pending"!==c.state())throw Error("Attempt to set context "+a+" for plugin key "+
b+" multiple times.");c.resolve(g[a])}},data:h,ready:function(a,d){var b=Array.prototype.slice.call(arguments,2),c=f[a]||(f[a]={}),g=c[d]||(c[d]=e.Deferred());b.forEach(function(a){g.done(a)});return g},_domReady:k}}();;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:web-fragment-manager', location = '/static/bitbucket/internal/util/web-fragment-manager.js' */
window.WebFragments=function(){function x(a){var b=Array.prototype.slice.call(arguments,1),c,v=b.length;for(c=0;c<v;c++){var e=b[c];if(e){var n=m(e),g,w=n.length;for(g=0;g<w;g++){var d=n[g];a[d]=e[d]}}}return a}function q(a,b){return"function"===typeof a?a(x({},b)):a}function f(a){var b=h[a];return function(c,v){var e=b[c],n=[];if(e&&e.length){var g,w=e.length;for(g=0;g<w;g++){var d=e[g];var k=v,f,h={type:a.toUpperCase()};if(r.call(d,"serverCondition")&&!d.serverCondition)d=null;else if(k=x({},k,
d.serverContext,d.params),r.call(d,"condition")&&!q(d.condition,k))d=null;else{d["context-provider"]&&"function"===typeof d["context-provider"]&&(k=q(d["context-provider"],k));var t=m(d);var l=0;for(f=t.length;l<f;l++){var p=t[l];/con(dition|text-provider)|params/.test(p)||(h[p]=q(d[p],k))}if(d.params){var u=h.params={};t=m(d.params);l=0;for(f=t.length;l<f;l++)p=t[l],u[p]=q(d.params[p],k)}d=h}d&&n.push(d)}}-1===c.indexOf("bitbucket.internal.")&&(new RegExp("[\\?\x26]web\\."+a+"s(\x3d|\x26|$)")).test(window.location.search)&&
n.push(B[a](c,v));return n}}function u(a){var b=h[a];return function(a){if(!a)throw Error("No descriptor provided");if("string"!==typeof a.location)throw Error("No location provided, or location was not a string.");if("string"!==typeof a.completeModuleKey)throw Error("No completeModuleKey provided, or completeModuleKey was not a string.");y(a);b[a.location]||(b[a.location]=[]);b[a.location].push(a);b[a.location].sort(z)}}function z(a,b){return(0<=a.weight?a.weight:1E3)-(0<=b.weight?b.weight:1E3)}
var r=Object.prototype.hasOwnProperty,h={item:{},section:{},panel:{}},m=function(a){var b=[],c;for(c in a)r.call(a,c)&&b.push(c);return b},y=void 0;y=window._PageDataPlugin&&_PageDataPlugin.ready?function(a){_PageDataPlugin.ready(a.completeModuleKey,a.location,function(b){r.call(b,"serverCondition")&&(a.serverCondition=b.serverCondition);r.call(b,"serverContext")&&(a.serverContext=b.serverContext)})}:function(a){return a};var B={item:function(a,b){return{url:"#example-web-item-url",pluginKey:"org.example.plugins",
moduleKey:"example-web-item",completeModuleKey:"org.example.plugins:example-web-item",linkText:"Client Web Item: "+a,hasTooltip:!0,tooltip:"Client Context Items: "+m(b).join(", "),hasIcon:!1,iconUrl:null,iconWidth:0,iconHeight:0,styleClass:"plugin-point",linkId:null,description:null,params:{},type:"ITEM",weight:1E3}},section:function(a,b){return{name:"example-web-section",key:"example-web-section",location:a,labelText:"Client Web Section: "+a,type:"SECTION",params:{},weight:1E3}},panel:function(a,
b){return{view:'\x3cdiv class\x3d"plugin-point web-panel"\x3e\x3cstrong\x3eClient Web Panel\x3c/strong\x3e: '+a+"\x3cbr /\x3e\x3cstrong\x3eClient Context Items\x3c/strong\x3e: "+m(b).join(", ")+"\x3c/div\x3e",weight:1E3}}},A=f("panel");f("item");return{getWebItems:f("item"),getWebSections:f("section"),getWebPanels:function(a,b){a=A(a,b);var c=a.length;for(b=0;b<c;b++)a[b]=a[b].view;return a},getWebFragmentDescriptors:function(a,b){return(a=(b=h[b])&&b[a])&&a.slice()},addWebItemDescriptor:u("item"),
addWebSectionDescriptor:u("section"),addWebPanelDescriptor:u("panel"),getWebFragments:function(a,b,c){"string"!==typeof b&&(c=b,b=a);a=this.getWebItems(a,c);b=this.getWebSections(b,c);b=a.concat(b);b.sort(z);return b},_getValue:q,_formatI18n:function(a,b,c){var f=(a===b?c:a)||b||c||"";return function(a){var b=[],c=m(a);c.sort();var e,d=c.length;for(e=0;e<d;e++)b.push(a[c[e]]);return AJS.format(f,b)}},_getWebPanels:A}}();define("bitbucket/internal/util/web-fragment-manager",function(){return window.WebFragments});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:comment-create-task', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'comment-create-task','moduleKey':'comment-create-task','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:comment-create-task','weight':40.0,'condition':function(ctx) { return WebFragments._getValue((require('bitbucket/internal/feature/tasks/taskable-comment/taskable-comment').isPullRequest), ctx); },'params':{},'styleClass':WebFragments._formatI18n(null, null, 'task-create'),'location':'bitbucket.comments.actions','url':WebFragments._formatI18n(null, null, '#'),'linkText':WebFragments._formatI18n("Create task", 'bitbucket.web.tasks.createTask', '')});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:comment-create-issue-link', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-jira','key':'comment-create-issue-link','moduleKey':'comment-create-issue-link','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-jira:comment-create-issue-link','weight':55.0,'condition':function(ctx) { return WebFragments._getValue((!!ctx.pullRequest), ctx); },'params':{},'styleClass':WebFragments._formatI18n(null, null, 'issue-create'),'location':'bitbucket.comments.actions','url':WebFragments._formatI18n(null, null, '#'),'linkText':WebFragments._formatI18n("Create JIRA issue", 'bitbucket.jira.issue.create', '')});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-analytics-resources', location = '/static/bitbucket-plugin-comment-likes/internal/feature/comments/likes/analytics.js' */
define("bitbucket-plugin-comment-likes/internal/feature/comments/likes/analytics",["lodash","bitbucket/util/events","bitbucket/util/state","bitbucket/internal/util/analytics","bitbucket/internal/util/function","exports",],function(h,j,g,e,f,c){function i(){j.on("bitbucket.internal.feature.comments.likes.like",b.bind(null,"like"));j.on("bitbucket.internal.feature.comments.likes.unlike",b.bind(null,"unlike"));j.on("bitbucket.internal.feature.comments.likes.actions.like",b.bind(null,"actions.like"))}var d="comment.";function b(l,k){e.add(d+l,a(k))}function a(m){var o=g.getPullRequest();var n=g.getRepository();var p={"comment.id":m.commentId,"repository.id":n.id,totalLikes:m.likerCount,};if(o){var l=g.getCurrentUser().slug;var k=o.reviewers.map(f.dot("user.slug"));p.isAuthor=o.author.user.slug===l;p.isReviewer=h.includes(k,l);p["pullRequest.id"]=o.id}return p}c.init=i});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-analytics-resources', location = '/static/bitbucket-plugin-comment-likes/internal/feature/comments/likes/analytics-init.js' */
require("bitbucket-plugin-comment-likes/internal/feature/comments/likes/analytics").init();;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-resources', location = '/static/bitbucket-plugin-comment-likes/internal/feature/comments/likes/comment-likes.soy' */
// This file was automatically generated from comment-likes.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.plugin.comment.likes.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.plugin == 'undefined') { bitbucket.internal.plugin = {}; }
if (typeof bitbucket.internal.plugin.comment == 'undefined') { bitbucket.internal.plugin.comment = {}; }
if (typeof bitbucket.internal.plugin.comment.likes == 'undefined') { bitbucket.internal.plugin.comment.likes = {}; }


bitbucket.internal.plugin.comment.likes.likeButton = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.buttons.linkButton({content: '' + ((opt_data.userHasLiked) ? soy.$$escapeHtml('Unlike') : soy.$$escapeHtml('Like')), extraClasses: 'comment-likes-button'});
};
if (goog.DEBUG) {
  bitbucket.internal.plugin.comment.likes.likeButton.soyTemplateName = 'bitbucket.internal.plugin.comment.likes.likeButton';
}


bitbucket.internal.plugin.comment.likes.likeInfo = function(opt_data, opt_ignored) {
  return '<span class="comment-likes-info">' + aui.icons.icon({icon: 'like-small', useIconFont: true}) + ((opt_data.userHasLiked) ? (opt_data.likerCount == 1) ? soy.$$escapeHtml('You like this') : (opt_data.likerCount == 2) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('You and \x3cspan class\x3d\x22comment-liker\x22 title\x3d\x22{0}\x22\x3e{0}\x3c/span\x3e like this',typeof (opt_data.otherLiker.displayName || opt_data.otherLiker.name) === 'number' ? opt_data.otherLiker.displayName || opt_data.otherLiker.name : soy.$$escapeHtml(opt_data.otherLiker.displayName || opt_data.otherLiker.name)))) : soy.$$filterNoAutoescape(AJS.format('You and {1}{0} others{2} like this',opt_data.likerCount - 1,'<button class="stash-link-button">','</button>')) : (opt_data.likerCount == 1) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('\x3cspan class\x3d\x22comment-liker\x22 title\x3d\x22{0}\x22\x3e{0}\x3c/span\x3e likes this',typeof (opt_data.otherLiker.displayName || opt_data.otherLiker.name) === 'number' ? opt_data.otherLiker.displayName || opt_data.otherLiker.name : soy.$$escapeHtml(opt_data.otherLiker.displayName || opt_data.otherLiker.name)))) : soy.$$filterNoAutoescape(AJS.format('{1}{0} people{2} like this',opt_data.likerCount,'<button class="stash-link-button">','</button>'))) + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.plugin.comment.likes.likeInfo.soyTemplateName = 'bitbucket.internal.plugin.comment.likes.likeInfo';
}


bitbucket.internal.plugin.comment.likes.dialog = function(opt_data, opt_ignored) {
  var output = '<div class="comment-likes-dialog"><h5 class="title">' + soy.$$escapeHtml('People who like this') + '</h5><ul class="user-list">';
  var likerList38 = opt_data.otherLikers;
  var likerListLen38 = likerList38.length;
  for (var likerIndex38 = 0; likerIndex38 < likerListLen38; likerIndex38++) {
    var likerData38 = likerList38[likerIndex38];
    output += '<li>' + bitbucket.internal.widget.avatar({size: 'small', person: likerData38}) + bitbucket.internal.widget.userLink({extraClasses: 'liker-name', user: likerData38}) + '</li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.plugin.comment.likes.dialog.soyTemplateName = 'bitbucket.internal.plugin.comment.likes.dialog';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-resources', location = '/static/bitbucket-plugin-comment-likes/internal/feature/comments/likes/web-panel.js' */
define("bitbucket-plugin-comment-likes/internal/feature/comments/likes/web-panel",["bitbucket/util/state","bitbucket/internal/feature/comments/comment-async-web-panel","bitbucket-plugin-comment-likes/internal/feature/comments/likes/controller","exports",],function(e,g,c,b){function d(i){var l=i.comment;var k=l.properties&&l.properties.likedBy;var h=e.getCurrentUser().slug;var j={userHasLiked:false,otherLiker:null,likerCount:0,otherLikers:[],canLike:l.author.slug!==h,};if(k){j.userHasLiked=k.total>0&&k.likers[0].slug===h;if(j.userHasLiked){j.otherLiker=k.total>1?k.likers[1]:null}else{j.otherLiker=k.total>0?k.likers[0]:null}j.likerCount=k.total;j.otherLikers=j.userHasLiked?k.likers.slice(1):k.likers}return j}function a(h){return d(h).canLike}function f(h){return g.getWebPanelEl(function(i){new c({commentId:h.comment.id,likes:d(h),$infoPlaceholder:i,})})}b.contextProvider=d;b.buttonPanelCondition=a;b.infoPanel=f});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-resources', location = '/static/bitbucket-plugin-comment-likes/internal/feature/comments/likes/controller.js' */
define("bitbucket-plugin-comment-likes/internal/feature/comments/likes/controller",["aui","jquery","lib/jsuri","lodash","bitbucket/util/events","bitbucket/util/navbuilder","bitbucket/util/server","bitbucket/util/state",],function(k,f,c,l,m,h,d,j){function g(o){l.bindAll(this,l.functions(this.constructor.prototype));this.options=o;this.$buttonEl=null;this.$infoPanel=null;this.likes=o.likes;this.dialog=null;this.$infoPanel=o.$infoPlaceholder.parent();this.$infoPanel.on("click","button",this.onInfoClicked);this.updateLikeInfo();if(this.likes.canLike){this.$buttonEl=this.$infoPanel.parentsUntil(".content").find(".comment-likes-button");this.$buttonEl.on("click",this.onLikeClick);this.likeIfDeepLinked()}else{if(this.likes.likerCount===0){this.$infoPanel.remove()}}}g.prototype.updateLikeButton=function(){var o=this.likes.userHasLiked?"Unlike":"Like";this.$buttonEl.text(o)};g.prototype.updateLikeInfo=function(){if(this.likes.likerCount===0){this.$infoPanel.addClass("hidden")}else{this.$infoPanel.html(bitbucket.internal.plugin.comment.likes.likeInfo(this.likes));this.$infoPanel.removeClass("hidden");this.dialog=null}};g.prototype.getLikesURL=function(){var o=j.getPullRequest();var q=j.getCommit();var p=h.rest("comment-likes");if(o){p=p.currentPullRequest()}else{if(q){p=p.project(j.getProject().key).repo(j.getRepository().slug).commit(q.id)}}return p.addPathComponents("comments",this.options.commentId,"likes").build()};g.prototype.onInfoClicked=function(p){p.preventDefault();var o=this;if(!this.dialog){this.dialog=k.InlineDialog(p.target,"likes-info-panel",function(r,q,s){r.html(bitbucket.internal.plugin.comment.likes.dialog(o.likes));s()},{closeOnTriggerClick:true,initCallback:e,hideCallback:a,});this.dialog.show()}};g.prototype.likeIfDeepLinked=function(){var o=new c(window.location);if(o.getQueryParamValue("action")==="like"&&parseInt(o.getQueryParamValue("commentId"),10)===this.options.commentId&&!this.likes.userHasLiked){this.setLike(true);this._triggerEvent("actions.like")}};function n(o){if(this.popup&&!this.popup.has(o.target).length){this.hide()}}var b;function e(){b=n.bind(this);f(document).on("mouseup",b)}function a(){f(document).off("mouseup",b);b=null}g.prototype.onLikeClick=function(o){o.preventDefault();this.setLike(!this.likes.userHasLiked)};g.prototype.setLike=function(o){this._setInteralLikeStatus(o);this._syncLike(o)};g.prototype._setInteralLikeStatus=function(o){this.likes.userHasLiked=o;this.likes.likerCount=o?this.likes.likerCount+1:this.likes.likerCount-1;this.updateLikeButton();this.updateLikeInfo()};var i={404:function(t,o,s,r){var p=l.get(r,"errors.0");var q=p&&p.message;return{title:"Comment not found",message:q,shouldReload:true,fallbackUrl:undefined,}},};g.prototype._syncLike=function(o){d.rest({type:o?"POST":"DELETE",url:this.getLikesURL(),statusCode:i,}).done(this._triggerEvent.bind(this,o?"like":"unlike")).fail(this._setInteralLikeStatus.bind(this,!o))};g.prototype._triggerEvent=function(o){m.trigger("bitbucket.internal.feature.comments.likes."+o,null,l.assign({commentId:this.options.commentId,},this.likes))};return g});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-button', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-comment-likes','key':'comment-likes-button','moduleKey':'comment-likes-button','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-button','weight':110.0,'condition':function(ctx) { return WebFragments._getValue((require('bitbucket-plugin-comment-likes/internal/feature/comments/likes/web-panel').buttonPanelCondition), ctx); },'context-provider':function(ctx) { return WebFragments._getValue((require('bitbucket-plugin-comment-likes/internal/feature/comments/likes/web-panel').contextProvider), ctx); },'params':{},'location':'bitbucket.comments.info','view':function(ctx) { return WebFragments._getValue((bitbucket.internal.plugin.comment.likes.likeButton), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-info', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-comment-likes','key':'comment-likes-info','moduleKey':'comment-likes-info','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-info','weight':111.0,'params':{},'location':'bitbucket.comments.info','view':function(ctx) { return WebFragments._getValue((require('bitbucket-plugin-comment-likes/internal/feature/comments/likes/web-panel').infoPanel), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:comment-issue-list', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-jira','key':'comment-issue-list','moduleKey':'comment-issue-list','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-jira:comment-issue-list','weight':10.0,'condition':function(ctx) { return WebFragments._getValue((!!ctx.pullRequest), ctx); },'params':{},'location':'bitbucket.comments.extra','view':function(ctx) { return WebFragments._getValue((require('bitbucket-plugin-jira/internal/feature/jira/comment/comment-jira-issues').issueListView), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comment-utils', location = '/static/bitbucket/internal/feature/comments/utils.js' */
define("bitbucket/internal/feature/comments/utils",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});var d=function(b){return b.trim().replace(/\s+/gm," ")};a.getCommentSelection=function(b){var c=window.getSelection();if(c){var a=c.anchorNode,e=c.focusNode,f=b.querySelector(".message");b=b.querySelector(".actions");if(f.contains(a)&&(f.contains(e)||b===e))return a=d(c.toString()),c.removeAllRanges(),a}};a.sanitiseText=d});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:product-info', location = '/static/bitbucket/internal/util/product-info/product-info.soy' */
// This file was automatically generated from product-info.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.util.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.util == 'undefined') { bitbucket.internal.util = {}; }


bitbucket.internal.util.productName = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml("Bitbucket");
};
if (goog.DEBUG) {
  bitbucket.internal.util.productName.soyTemplateName = 'bitbucket.internal.util.productName';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-model-resources', location = '/static/bitbucket/internal/feature/tasks/model/task-collection.js' */
define("bitbucket/internal/feature/tasks/model/task-collection","module exports backbone-brace bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/state bitbucket/internal/feature/tasks/model/task bitbucket/internal/feature/tasks/model/task-state".split(" "),function(h,d,e,f,k,c,g,b){Object.defineProperty(d,"__esModule",{value:!0});e=babelHelpers.interopRequireDefault(e);var l=babelHelpers.interopRequireDefault(f);f=babelHelpers.interopRequireDefault(k);c=babelHelpers.interopRequireDefault(c);
g=babelHelpers.interopRequireDefault(g);var m=babelHelpers.interopRequireDefault(b);b=e.default.Collection.extend({model:g.default,initialize:function(){this.on("remove",function(a){a.isNew()||(a=a.toJSON(),a.lastState=a.state,a.state=m.default.DEFAULT,l.default.trigger("bitbucket.internal.feature.pull-request-tasks.deleted",null,{task:a}))})},url:f.default.rest("tasks").addPathComponents("pull-requests").withParams({repositoryId:c.default.getRepository().id,pullRequestId:c.default.getPullRequest().id,
start:0,limit:1E3}).build()});var n=new b;b.getCollection=function(){return n};d.default=b;h.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-model-resources', location = '/static/bitbucket/internal/feature/tasks/model/task.js' */
define("bitbucket/internal/feature/tasks/model/task","module exports aui backbone backbone-brace lodash bitbucket/util/events bitbucket/util/navbuilder bitbucket/internal/feature/comments/utils bitbucket/internal/feature/tasks/model/task-state bitbucket/internal/model/stash-user".split(" "),function(r,h,k,t,u,l,v,w,n,e,x){function d(a){return a&&"bitbucket.internal.feature.pull-request-tasks."+a}Object.defineProperty(h,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(k),p=babelHelpers.interopRequireDefault(t);
k=babelHelpers.interopRequireDefault(u);var m=babelHelpers.interopRequireDefault(l),y=babelHelpers.interopRequireDefault(v);l=babelHelpers.interopRequireDefault(w);var f=babelHelpers.interopRequireDefault(e);e=babelHelpers.interopRequireDefault(x);var z=l.default.rest().addPathComponents("tasks");e=k.default.Model.extend({namedAttributes:{id:"number",anchor:null,state:"string",author:e.default,createdDate:"number",text:"string",html:"string",properties:null,permittedOperations:null,lastState:"string",
pendingSync:"boolean",pullRequestId:"number",repositoryId:"number"},defaults:{state:f.default.OPEN,text:"",pendingSync:!1,permittedOperations:{}},url:function(){var a=z;this.isNew()||(a=a.addPathComponents(this.getId()));return a.build()},initialize:function(){this.on("sync",function(){this._previousAttributes.id||this._triggerTaskEvent(d("created"));this._triggerTaskEvent(d("saved"))})},nextState:function(){return f.default.Transitions[this.getState()]},eventNameForState:function(a){switch(a){case f.default.OPEN:return this._previousAttributes.id?
d("reopened"):d("created");case f.default.RESOLVED:return d("resolved");case f.default.DELETED:return d("deleted");default:return d("default")}},transitionToNextState:function(){return this._updateState(this.nextState())},changeState:function(a){this.set({state:a,lastState:this.getState()},{local:!0});this._triggerTaskEvent(this.eventNameForState(a))},_updateState:function(a){var c=this.getState(),q=this.eventNameForState(a),b=this;this.changeState(a);return this.save().done(function(){b.getState()!==
a&&(q=b.eventNameForState(b.getState()),b._triggerTaskEvent(q))}).fail(function(){b.set({state:c,lastState:a});b._triggerTaskEvent(d("failed-transition"))})},updateText:function(a){var c=this,d=this.getText(),b=(0,n.sanitiseText)(a);this.setText(b);return(this.save()||p.default.$.Deferred().reject(this.validationError)).fail(function(){""!==b&&c.setText(d)})},validate:function(a,c){if((0,n.sanitiseText)(a.text)!==a.text)return "Invalid task text";if(""===
a.text)return "Please enter some text"},sync:function(a,c,d){this.setPendingSync(!0);c=p.default.sync(a,c,m.default.assign(d,{statusCode:{404:function(b,c,d,e){b=(b=m.default.get(e,"errors.0"))&&b.message;"create"!==a&&(b=g.default.format("{0} could not update this task, it has been deleted.",bitbucket.internal.util.productName()));return{title:"Task not found",message:b,shouldReload:!0,fallbackUrl:void 0}}}}));c.always(this.setPendingSync.bind(this,
!1));return c},_triggerTaskEvent:function(a,c){c===this&&(c={});y.default.trigger(a,null,m.default.assign({task:this.toJSON()},c))}},{Anchor:{COMMENT:"COMMENT"}});h.default=e;r.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-model-resources', location = '/static/bitbucket/internal/feature/tasks/model/task-state.js' */
define("bitbucket/internal/feature/tasks/model/task-state",["module","exports"],function(c,b){Object.defineProperty(b,"__esModule",{value:!0});var a={DEFAULT:"NONE",OPEN:"OPEN",RESOLVED:"RESOLVED",DELETED:"DELETED",Transitions:{}};a.Transitions[a.DEFAULT]=a.OPEN;a.Transitions[a.OPEN]=a.RESOLVED;a.Transitions[a.RESOLVED]=a.OPEN;b.default=a;c.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-view-resources', location = '/static/bitbucket/internal/feature/tasks/task-view/task-view.js' */
define("bitbucket/internal/feature/tasks/task-view/task-view","module exports aui backbone jquery lodash bitbucket/internal/feature/tasks/model/task-state bitbucket/internal/util/async-element-resize-helper bitbucket/internal/util/events bitbucket/internal/util/function".split(" "),function(k,e,f,l,c,m,n,p,q,r){Object.defineProperty(e,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(f);f=babelHelpers.interopRequireDefault(l);var h=babelHelpers.interopRequireDefault(c),d=babelHelpers.interopRequireDefault(m),
t=babelHelpers.interopRequireDefault(n),u=babelHelpers.interopRequireDefault(p),v=babelHelpers.interopRequireDefault(q);c=babelHelpers.interopRequireDefault(r);var b={VIEW:"view",EDIT:"edit"};c=f.default.View.extend({events:{"click .task-checkbox":"transitionTaskHandler","click .task-edit":"onTaskEditClick","click .task-save":"onTaskSaveClick","click .task-cancel":"onTaskCancelClick","keydown .task-text":"onTaskKeyDown","click .task-delete":"onTaskDeleteClick","keypress textarea":"onTaskTextareaKeypress"},
defaults:{showLink:!1,mode:b.VIEW},initialize:function(a){d.default.bindAll(this,"focusEditor","_onResize");this.listenTo(this.model,"change invalid",this.render);this.listenToOnce(this.model,"destroy",this._onResize);this.options=d.default.assign({},this.defaults,a);this.mode=this.options.mode;this.mode===b.EDIT&&(this.originalText=this.model.getText());this._enableExpandingTextareas()},template:c.default.dot("bitbucket.internal.feature.tasks.taskView.task")(window),render:function(){var a=(0,h.default)(this.template({task:this.model.toJSON(),
mode:this.mode,showLink:this.options.showLink,error:this.model.validationError}));this.$el.replaceWith(a);this.setElement(a);this._enableExpandingTextareas();this.mode===b.EDIT&&d.default.defer(this.focusEditor);d.default.defer(this._onResize);return this},transitionTaskHandler:function(){this.model.transitionToNextState()},saveTask:function(){var a=this,w=this.$(".task-text").val();a.switchMode(b.VIEW);this.model.updateText(w).fail(function(){a.switchMode(b.EDIT)})},switchMode:function(a){this.mode=
a;a===b.EDIT&&(this.originalText=this.model.getText()||this.originalText);this.render()},cancelTaskEdit:function(){this.model.isNew()?this.model.destroy():(this.model.setText(this.originalText),this.model.isValid(),this.originalText=null,this.switchMode(b.VIEW))},onTaskDeleteClick:function(a){var b=this;a.preventDefault();this.model.isNew()||(b.model.changeState(t.default.DELETED),b.model.destroy({wait:!0,error:function(){b.model.changeState(b.model.getLastState())}}))},focusEditor:function(){this.$(".task-text").focus()},
getEditorText:function(){return this.$(".task-text").val()},onTaskKeyDown:function(a){a.keyCode===g.default.keyCode.ESCAPE?(a.preventDefault(),a.stopPropagation(),this.cancelTaskEdit()):a.keyCode===g.default.keyCode.ENTER&&(a.preventDefault(),this.saveTask())},onTaskEditClick:function(a){a.preventDefault();this.model.isNew()||this.switchMode(b.EDIT)},onTaskSaveClick:function(a){a.preventDefault();this.saveTask()},onTaskCancelClick:function(a){a.preventDefault();this.cancelTaskEdit()},onTaskTextareaKeypress:d.default.debounce(function(a){(0,
h.default)(a.target).removeClass("task-error")},300),_enableExpandingTextareas:function(){if(this.mode===b.EDIT)this.$("textarea.expanding").expandingTextarea().on("input.expanding",this._onResize)},_onResize:function(){var a=this.$el[0];a&&(0,u.default)(a,function(){v.default.trigger("bitbucket.internal.webpanel.resize",null,{location:"bitbucket.comments.extra",el:a})})}},{Mode:b});e.default=c;k.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-view-resources', location = '/static/bitbucket/internal/feature/tasks/task-view/task-view.soy' */
// This file was automatically generated from task-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.tasks.taskView.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.tasks == 'undefined') { bitbucket.internal.feature.tasks = {}; }
if (typeof bitbucket.internal.feature.tasks.taskView == 'undefined') { bitbucket.internal.feature.tasks.taskView = {}; }


bitbucket.internal.feature.tasks.taskView.task = function(opt_data, opt_ignored) {
  var output = '<div class="task task-status-' + soy.$$escapeHtml(opt_data.task.state.toLowerCase()) + ((opt_data.error) ? ' task-error' : '') + ((opt_data.task.pendingSync) ? ' task-pending-sync' : '') + ((opt_data.task.text == '' && ! opt_data.task.id) ? ' task-blank' : '') + '" data-task-state="' + soy.$$escapeHtml(opt_data.task.state) + '" data-task-id="' + soy.$$escapeHtml([opt_data ? opt_data.task.id : null,''].filter(function(x){return x != null;})[0]) + '" data-comment-id="' + soy.$$escapeHtml(opt_data.task.anchor.id) + '"><div class="task-action task-checkbox-container"><input type="checkbox" class="task-checkbox checkbox"' + ((opt_data.task.state == 'RESOLVED') ? ' checked="checked"' : '') + ((opt_data.mode == 'edit' || ! opt_data.task.permittedOperations.transitionable) ? ' disabled=\'disabled\'' : '') + ' /></div>' + ((opt_data.mode == 'edit') ? bitbucket.internal.feature.tasks.taskView.editTaskForm(opt_data) : bitbucket.internal.feature.tasks.taskView.viewTask(opt_data)) + ((opt_data.showLink) ? aui.buttons.button({text: '', type: 'link', extraClasses: 'task-action task-link-button', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-link'}) : '') + '<div class="task-footer">';
  var diffAnchorPath__soy45 = opt_data.task.properties && opt_data.task.properties.diffAnchorPath;
  output += ((opt_data.showLink && diffAnchorPath__soy45) ? '<aside class="comment-diff-anchor">' + aui.icons.icon({useIconFont: true, icon: 'file', iconFontSet: 'devtools'}) + aui.buttons.button({text: new (require('bitbucket/internal/model/path'))(diffAnchorPath__soy45).getName(), type: 'link', extraAttributes: {'data-path': diffAnchorPath__soy45}}) + '</aside>' : '') + ((opt_data.mode == 'edit' || (opt_data.task.permittedOperations.editable || opt_data.task.permittedOperations.deletable) || opt_data.task.id == null) ? '<ul class="actions">' + ((opt_data.mode == 'edit') ? bitbucket.internal.feature.tasks.taskView.editTaskActions(null) : bitbucket.internal.feature.tasks.taskView.viewTaskActions(opt_data)) + '</ul>' : '') + ((opt_data.mode == 'edit') ? '<div class="task-tip">' + soy.$$escapeHtml('Tip: Try selecting some of the comment before clicking \x22Create task\x22') + '</div>' : '') + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskView.task.soyTemplateName = 'bitbucket.internal.feature.tasks.taskView.task';
}


bitbucket.internal.feature.tasks.taskView.viewTask = function(opt_data, opt_ignored) {
  return '<div class="task-content message ' + soy.$$escapeHtml(opt_data.task.html ? 'markup' : 'plaintext') + '">' + ((opt_data.task.html) ? soy.$$filterNoAutoescape(opt_data.task.html) : soy.$$escapeHtml(opt_data.task.text)) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskView.viewTask.soyTemplateName = 'bitbucket.internal.feature.tasks.taskView.viewTask';
}


bitbucket.internal.feature.tasks.taskView.viewTaskActions = function(opt_data, opt_ignored) {
  return '' + ((opt_data.task.permittedOperations.editable || opt_data.task.id == null) ? '<li><a href="#" class="task-edit">' + soy.$$escapeHtml('Edit') + '</a></li>' : '') + ((opt_data.task.permittedOperations.deletable || opt_data.task.id == null) ? '<li><a href="#" class="task-delete">' + soy.$$escapeHtml('Delete') + '</a></li>' : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskView.viewTaskActions.soyTemplateName = 'bitbucket.internal.feature.tasks.taskView.viewTaskActions';
}


bitbucket.internal.feature.tasks.taskView.editTaskForm = function(opt_data, opt_ignored) {
  return '' + widget.aui.form.expandingTextarea({name: 'task-text', initialValue: opt_data.task.text, placeholderText: '' + ((opt_data.error) ? soy.$$escapeHtml(opt_data.error) : (opt_data.task.text) ? soy.$$escapeHtml('Please enter some text') : soy.$$escapeHtml('Add new task')), extraClasses: 'task-text' + ((opt_data.error) ? ' task-error' : '')});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskView.editTaskForm.soyTemplateName = 'bitbucket.internal.feature.tasks.taskView.editTaskForm';
}


bitbucket.internal.feature.tasks.taskView.editTaskActions = function(opt_data, opt_ignored) {
  return '<li><a href="#" class="task-save">' + soy.$$escapeHtml('Save') + '</a></li><li><a href="#" class="task-cancel">' + soy.$$escapeHtml('Cancel') + '</a></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskView.editTaskActions.soyTemplateName = 'bitbucket.internal.feature.tasks.taskView.editTaskActions';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-list-resources', location = '/static/bitbucket/internal/feature/tasks/task-list/task-list.soy' */
// This file was automatically generated from task-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.tasks.taskList.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.tasks == 'undefined') { bitbucket.internal.feature.tasks = {}; }
if (typeof bitbucket.internal.feature.tasks.taskList == 'undefined') { bitbucket.internal.feature.tasks.taskList = {}; }


bitbucket.internal.feature.tasks.taskList.dialog = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2({id: 'task-list-dialog', size: 'medium', titleText: 'Tasks', extraClasses: 'task-list-dialog', content: '' + bitbucket.internal.feature.tasks.taskList.dialogContent(null), footerHintText: 'Tip: Use Shift + T to open the task list.', footerActionContent: '' + aui.buttons.button({id: 'dialog-close-button', text: 'Close', extraClasses: 'aui-button-link'})});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskList.dialog.soyTemplateName = 'bitbucket.internal.feature.tasks.taskList.dialog';
}


bitbucket.internal.feature.tasks.taskList.dialogContent = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<ul id="' + soy.$$escapeHtml([opt_data ? opt_data.id : null,'task-list-dialog-list'].filter(function(x){return x != null;})[0]) + '" class="paged-table task-list"></ul>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskList.dialogContent.soyTemplateName = 'bitbucket.internal.feature.tasks.taskList.dialogContent';
}


bitbucket.internal.feature.tasks.taskList.dialogContentSection = function(opt_data, opt_ignored) {
  return '<li class="task-list-row section-heading"><h6>' + soy.$$escapeHtml(opt_data.title) + '</h6></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskList.dialogContentSection.soyTemplateName = 'bitbucket.internal.feature.tasks.taskList.dialogContentSection';
}


bitbucket.internal.feature.tasks.taskList.taskListRow = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<li class="task-list-row' + soy.$$escapeHtml(opt_data.isCollapsed ? ' collapsed' : ' expanded') + ' task-container"></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskList.taskListRow.soyTemplateName = 'bitbucket.internal.feature.tasks.taskList.taskListRow';
}


bitbucket.internal.feature.tasks.taskList.dialogEmptyMessage = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('There are no tasks for this pull request.') + '</p>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskList.dialogEmptyMessage.soyTemplateName = 'bitbucket.internal.feature.tasks.taskList.dialogEmptyMessage';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-list-resources', location = '/static/bitbucket/internal/feature/tasks/task-list/task-list-table.js' */
define("bitbucket/internal/feature/tasks/task-list/task-list-table","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/tasks/model/task bitbucket/internal/feature/tasks/model/task-state bitbucket/internal/feature/tasks/task-list/task-list-row-view bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/widget/paged-table/paged-table".split(" "),function(q,h,r,t,u,v,w,x,y,z,A,B){function a(b,a,c,f){var e=this;this._scrollable=(0,m.default)(a);
this.$target=(0,m.default)(b);this.collection=c;this.context=f;this._destroyables=[];this._resolvedHeaderOutput=!1;d.default.bindAll(this,"_onTaskDestroy","_handleEdit","_handleMoveNext","_handleMovePrevious","_handleOpen","_handleTransitionToNextState","_handleDelete");this.collection.on("destroy",this._onTaskDestroy);this._taskRowViews=[];g.default.call(this,{target:this.$target,noneFoundMessageHtml:bitbucket.internal.feature.tasks.taskList.dialogEmptyMessage,scrollPaneSelector:a,rowSelector:"\x3e li",
taskContainerSelector:".task-container",paginationContext:"task-list",focusOptions:{rowSelector:"\x3e li",focusedClass:"focused"},statusCode:{"*":function(b,a,c,f,d){return"timeout"===c||500<=b.status&&599>=b.status?(bitbucket.internal.widget.paragraph({text:d.message}),e._addNoRowsMessage(d.message),!1):!0}}});this.prNavBuilder=n.default.project(f.projectKey).repo(f.repository).pullRequest(f.pullRequestId);this.bindNavigationHandlers()}Object.defineProperty(h,"__esModule",{value:!0});var C=babelHelpers.interopRequireDefault(r),
m=babelHelpers.interopRequireDefault(t),d=babelHelpers.interopRequireDefault(u),n=babelHelpers.interopRequireDefault(v),D=babelHelpers.interopRequireDefault(w),k=babelHelpers.interopRequireDefault(x),E=babelHelpers.interopRequireDefault(y),p=babelHelpers.interopRequireDefault(z),l=babelHelpers.interopRequireDefault(A),g=babelHelpers.interopRequireDefault(B);d.default.assign(a.prototype,g.default.prototype);p.default.addLocalEventMixin(a.prototype);a.prototype._addNoRowsMessage=function(b){this.$table.addClass("no-rows").after(this._new$Message(b||
this.options.noneFoundMessageHtml()))};a.prototype.update=function(b){this._resolvedHeaderOutput=!1;d.default.invokeMap(this._taskRowViews,"remove");this._taskRowViews=[];g.default.prototype.update.call(this,b).done(this.trigger.bind(this,"dataLoaded"))};a.prototype.buildUrl=function(b,a){return n.default.rest().project(this.context.projectKey).repo(this.context.repository).pullRequest(this.context.pullRequestId).addPathComponents("tasks").withParams({start:b,limit:a,withComments:!0}).build()};a.prototype.handleNewRows=
function(b,a){var c=this,e=[];d.default.forEach(b.values,function(b){var a=c.collection.get(b.id);a?a.set(b):(a=new D.default(b),a.setPullRequestId(c.context.pullRequestId),c.collection.add(a));b=new E.default({prNavBuilder:c.prNavBuilder,model:a});c._taskRowViews.push(b);a.getState()!==k.default.RESOLVED||c._resolvedHeaderOutput||(a=bitbucket.internal.feature.tasks.taskList.dialogContentSection({title:"Resolved tasks"}),e.push(a),c._resolvedHeaderOutput=
!0);e.push(b.render().$el)});c.$table.show()["html"!==a?a:"append"](e)};a.prototype.bindNavigationHandlers=function(){this._destroyables.push(p.default.chain().on("bitbucket.internal.feature.tasks.dialog.action.edit",this._handleEdit).on("bitbucket.internal.feature.tasks.dialog.action.moveNext",this._handleMoveNext).on("bitbucket.internal.feature.tasks.dialog.action.movePrevious",this._handleMovePrevious).on("bitbucket.internal.feature.tasks.dialog.action.open",this._handleOpen).on("bitbucket.internal.feature.tasks.dialog.action.transitionToNextState",
this._handleTransitionToNextState).on("bitbucket.internal.feature.tasks.dialog.action.delete",this._handleDelete));this._destroyables.push(g.default.prototype.initShortcuts.call(this))};a.prototype.destroy=function(){g.default.prototype.destroy.call(this);d.default.invokeMap(this._destroyables,"destroy")};a.prototype.getTaskListRowViewForTask=function(b){var a=this._taskRowViews.filter(function(a){return a.model.getId()===b.getId()});return a&&a[0]};a.prototype.focusInitialRow=function(){this._$focusedRow=
this.$target.find(this.options.focusOptions.rowSelector+this.options.taskContainerSelector).first().addClass(this.options.focusOptions.focusedClass)};a.prototype.scrollToRow=function(a){var b=this._scrollable.offset().top,c=this._scrollable.scrollTop();a=a.offset().top;this._scrollable.scrollTop(a-b+c)};a.prototype._handleMoveNext=function(){this._focusRow("nextAll")};a.prototype._handleMovePrevious=function(){this._focusRow("prevAll")};a.prototype._focusRow=function(a,d){a=this._$focusedRow[a](this.options.taskContainerSelector);
a.length&&(this._$focusedRow.removeClass(this.options.focusOptions.focusedClass),this._$focusedRow=a.first().addClass(this.options.focusOptions.focusedClass),d||this.scrollToRow(this._$focusedRow))};a.prototype._handleOpen=function(){this._$focusedRow.find(".task-link-button").trigger("click")};a.prototype._handleEdit=function(){this.getTaskListRowViewForTask(this.getTaskFromFocusedRow()).setCollapsed(!1);this._$focusedRow.find(".task-edit").trigger("click")};a.prototype._handleTransitionToNextState=
function(){var a=this.getTaskFromFocusedRow();a&&a.transitionToNextState()};a.prototype._handleDelete=function(){this._$focusedRow.find(".task-delete").trigger("click")};a.prototype.getTaskFromFocusedRow=function(){var a=this._$focusedRow.find(".task").data("task-id");return a&&this.collection.get(a)};a.prototype._onTaskDestroy=function(a){var b=d.default.find(this._taskRowViews,l.default.dotEq("model",a));if(b){var c=this._$focusedRow.is(this.options.taskContainerSelector+":last")?"prevAll":"nextAll";
this._focusRow(c,!0);b.remove();this._taskRowViews=d.default.without(this._taskRowViews,b);a.getLastState()===k.default.RESOLVED&&(a=d.default.flow(l.default.invoke("model.getState"),l.default.eq(k.default.RESOLVED)),this._taskRowViews.some(a)||(this._resolvedHeaderOutput=!1,this.$table.find(".section-heading").remove()));0===this._taskRowViews.length&&this._addNoRowsMessage()}};h.default=a;q.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-list-resources', location = '/static/bitbucket/internal/feature/tasks/task-list/task-list-row-view.js' */
define("bitbucket/internal/feature/tasks/task-list/task-list-row-view","module exports backbone jquery lodash bitbucket/util/events bitbucket/internal/feature/tasks/model/task-state bitbucket/internal/feature/tasks/task-view/task-view bitbucket/internal/util/feature-detect bitbucket/internal/util/function".split(" "),function(p,d,h,k,q,r,t,u,v,w){Object.defineProperty(d,"__esModule",{value:!0});h=babelHelpers.interopRequireDefault(h);var m=babelHelpers.interopRequireDefault(k),c=babelHelpers.interopRequireDefault(q),
e=babelHelpers.interopRequireDefault(r),n=babelHelpers.interopRequireDefault(t),l=babelHelpers.interopRequireDefault(u),g=babelHelpers.interopRequireDefault(v);k=babelHelpers.interopRequireDefault(w);d.default=h.default.View.extend({events:{"click .task-content":"taskListContentClicked","click .task-link-button":"taskListLinkClicked","click .comment-diff-anchor .aui-button":"taskListDiffAnchorClicked"},defaults:{isCollapsible:!0,showLink:!0,initialTaskViewMode:l.default.Mode.VIEW},initialize:function(a){this.options=
c.default.assign({},this.defaults,a);this.isCollapsed=this.options.isCollapsible;this.taskView=new l.default({model:this.model,mode:this.options.initialTaskViewMode,prNavBuilder:this.prNavBuilder,showLink:this.options.showLink});this.focusEditor=this.taskView.focusEditor;this.getEditorText=this.taskView.getEditorText;this.listenTo(this.model,"change:state",this._handleTaskChangeState);this.listenTo(this.model,"change:text",this._handleTaskChangeText);this.options.isCollapsible&&(c.default.bindAll(this,
"handleTaskExpand"),e.default.on("bitbucket.internal.feature.tasks.list.expand",this.handleTaskExpand))},template:k.default.dot("bitbucket.internal.feature.tasks.taskList.taskListRow")(window),activityUrl:function(){var a=this.model.getAnchor();return this.options.prNavBuilder.overview().comment(a.id).build()},diffUrl:function(a){return this.options.prNavBuilder.diff().change(a).build()},render:function(){var a=(0,m.default)(this.template({isCollapsed:this.isCollapsed}));a.append(this.taskView.render().$el);
this.$el.replaceWith(a);this.setElement(a);return this},transitionTaskHandler:function(){this.model.transitionToNextState()},taskListContentClicked:function(a){this.options.isCollapsible&&((0,m.default)(a.target).is("a")||this.setCollapsed(!this.isCollapsed))},setCollapsed:function(a){function b(a,b,c,e){function d(){f.$el.removeClass([b,e].join(" ")).addClass(c).css({height:""})}f.$el.css({height:a}).addClass(b);if(g.default.cssTransition())f.$el.one(g.default.transitionEndEventName(),d);else d()}
var f=this;(this.isCollapsed=a)?(this.$el.css({height:f.$el.find(".task").get(0).scrollHeight}).removeClass("expanded"),c.default.defer(b.bind(this,"","collapsing","collapsed","expanded expanding"))):this.model.getState()===n.default.OPEN&&(e.default.trigger("bitbucket.internal.feature.tasks.list.expand",null,this),this.$el.removeClass("collapsed"),b(f.$el.find(".task").get(0).scrollHeight,"expanding","expanded","collapsed collapsing"))},taskListDiffAnchorClicked:function(a){var b=this.model.getProperties().diffAnchorPath;
this._handleTaskClick(a,"bitbucket.internal.layout.pull-request.urlRequested",this.diffUrl(b));this.triggerTaskVisitedEvent({location:"diff"})},taskListLinkClicked:function(a){this._handleTaskClick(a,"bitbucket.internal.layout.pull-request.urlRequested",this.activityUrl());this.triggerTaskVisitedEvent({location:"activity-stream"})},triggerTaskVisitedEvent:function(a){a=c.default.assign({},{task:this.model.toJSON()},a);e.default.trigger("bitbucket.internal.feature.tasks.visit-task",null,a)},handleTaskExpand:function(a){a===
this||this.isCollapsed||(this.taskView.mode===l.default.Mode.EDIT&&this.taskView.cancelTaskEdit(),this.setCollapsed(!0))},highlight:function(){var a=this.$el.removeClass.bind(this.$el,"task-highlight");this.$el.addClass("task-highlight");if(g.default.cssAnimation())this.$el.one(g.default.animationEndEventName(),a);else setTimeout(a,5E3)},_handleTaskClick:function(a,b){a.preventDefault();e.default.trigger.apply(this,[b,null].concat(c.default.toArray(arguments).slice(2)))},_handleTaskChangeState:function(a){this.$el.toggleClass("pending-delete",
a.getState()===n.default.DELETED)},_handleTaskChangeText:function(a){a.isNew()&&""!==a.getText()&&this.highlight()}});p.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-list-resources', location = '/static/bitbucket/internal/feature/tasks/task-list/comment-task-list-view.js' */
define("bitbucket/internal/feature/tasks/task-list/comment-task-list-view","module exports backbone lodash bitbucket/internal/feature/tasks/model/task bitbucket/internal/feature/tasks/task-list/task-list-row-view bitbucket/internal/feature/tasks/task-view/task-view bitbucket/internal/util/events bitbucket/internal/util/feature-detect bitbucket/internal/util/function".split(" "),function(n,e,f,d,p,q,r,t,u,v){Object.defineProperty(e,"__esModule",{value:!0});f=babelHelpers.interopRequireDefault(f);var h=
babelHelpers.interopRequireDefault(d),k=babelHelpers.interopRequireDefault(p),w=babelHelpers.interopRequireDefault(q),l=babelHelpers.interopRequireDefault(r),x=babelHelpers.interopRequireDefault(t),m=babelHelpers.interopRequireDefault(u),y=babelHelpers.interopRequireDefault(v);d=f.default.View.extend({defaults:{pullRequestId:null},initialize:function(a){var b=this;this.comment=a.comment;["add","remove"].forEach(function(a){b.listenTo(b.collection,a,b.render.bind(b,a))});this.options=h.default.assign({},
this.defaults,a);this.taskRowViews=[]},getCurrentTask:function(){return this.collection.find(y.default.invoke("isNew"))},getCurrentTaskText:function(){return this.getCurrentTaskRowView().getEditorText()||""},getCurrentTaskRowView:function(){return this._findRowViewForTask(this.getCurrentTask())},createTask:function(a){var b=this.getCurrentTaskRowView();if(b)return b.focusEditor(),null;b=new k.default({anchor:{id:this.comment.id,type:k.default.Anchor.COMMENT},pullRequestId:this.options.pullRequestId,
repositoryId:this.options.repositoryId,text:a});this.collection.unshift(b);a&&(b.prefilled=!0,b.save().fail(this.collection.remove.bind(this.collection,b)));return b},render:function(a,b,c,g){function e(a){return new w.default({model:a,initialTaskViewMode:a.isNew()&&""===a.getText()?l.default.Mode.EDIT:l.default.Mode.VIEW,isCollapsible:!1,showLink:!1})}function f(a){d.$el.removeClass("transition-height").css({height:"auto"});a&&x.default.trigger("bitbucket.internal.webpanel.resize",null,{location:"bitbucket.comments.extra",
el:d.$el.get(0)})}var d=this;this.$(".pending-delete").removeClass("pending-delete");c=this.$el.outerHeight(!0);this.$el.css({height:c});c=!1;switch(a){case "remove":if(a=this._findRowViewForTask(b))a.$el.addClass("pending-delete").trigger("comment-child-removed"),a.remove(),this.taskRowViews=h.default.without(this.taskRowViews,a);c=!0;break;case "add":c=g.at;a=e(b);this.taskRowViews.splice(c,0,a);g=a.render().$el;c=this.$(this.$("li").get(c));c.length?c.before(g):this.$el.append(g);b.isNew()&&""!==
b.getText()&&a.highlight();g.trigger("comment-child-added");c=!0;break;default:h.default.invokeMap(this.taskRowViews,"remove"),this.taskRowViews=this.collection.map(e),this.$el.append(this.taskRowViews.map(function(a){return a.render().$el}))}b=this.taskRowViews.reduce(function(a,b){return a+b.$el.outerHeight(!0)},0);if(m.default.cssTransition()&&c)this.$el.addClass("transition-height").css({height:b}).one(m.default.transitionEndEventName(),f.bind(d,!0));else f(!1);return this},_findRowViewForTask:function(a){return h.default.find(this.taskRowViews,
{model:a})}});e.default=d;n.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-list-resources', location = '/static/bitbucket/internal/feature/tasks/task-list/task-list-dialog.js' */
define("bitbucket/internal/feature/tasks/task-list/task-list-dialog","module exports aui jquery lodash bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/feature/tasks/model/task-state bitbucket/internal/feature/tasks/task-list/task-list-table".split(" "),function(m,f,g,n,p,q,r,t,u,v){function a(b){this.init.apply(this,arguments)}function k(b){var d={E:"bitbucket.internal.feature.tasks.dialog.action.edit",J:"bitbucket.internal.feature.tasks.dialog.action.moveNext",
K:"bitbucket.internal.feature.tasks.dialog.action.movePrevious",O:"bitbucket.internal.feature.tasks.dialog.action.open",SPACE:"bitbucket.internal.feature.tasks.dialog.action.transitionToNextState",DELETE:"bitbucket.internal.feature.tasks.dialog.action.delete"},c={69:"E",74:"J",75:"K",79:"O",32:"SPACE",46:"DELETE"}[b.keyCode];"TEXTAREA"!==b.target.nodeName&&c&&(h.default.trigger(d[c]),b.preventDefault())}Object.defineProperty(f,"__esModule",{value:!0});var w=babelHelpers.interopRequireDefault(g),e=
babelHelpers.interopRequireDefault(n),x=babelHelpers.interopRequireDefault(p),h=babelHelpers.interopRequireDefault(q);g=babelHelpers.interopRequireDefault(r);var y=babelHelpers.interopRequireDefault(t),l=babelHelpers.interopRequireDefault(u),z=babelHelpers.interopRequireDefault(v),A=g.default.rest().currentPullRequest().addPathComponents("tasks","count").build();a.prototype.init=function(b){x.default.bindAll(this,"openDialog","updateDialog","closeDialog","_updateTaskCounts");var d=bitbucket.internal.feature.tasks.taskList.dialog(),
c=(0,e.default)("#task-list-dialog");0<c.length&&c.remove();(0,e.default)(document.body).append(d);this._dialog=w.default.dialog2("#task-list-dialog");this._table=null;this._taskCollection=b;jQuery("#dialog-close-button").click(this.closeDialog);h.default.on("bitbucket.internal.feature.tasks.visit-task",this.closeDialog);this._dialog.on("show",function(){(0,e.default)(document).on("keydown",k)});this._dialog.on("hide",function(){(0,e.default)(document).off("keydown",k)})};a.prototype.updateDialog=
function(){this._table&&this._table.update()};a.prototype.openDialog=function(b){this._dialog.show();if(!this._table){var d=this._dialog.$el.find(".aui-dialog2-content"),c=this._dialog.$el.find("#task-list-dialog-list");this._table=new z.default(c,d,this._taskCollection,b);this._table.on("dataLoaded",this._updateTaskCounts.bind(this,b))}this._table.update()};a.prototype._updateTaskCounts=function(b,d){var c=new e.default.Deferred;if(d.isLastPage){var a=this._taskCollection.groupBy("state");d=a[l.default.OPEN];
a=a[l.default.RESOLVED];c.resolve({open:d?d.length:0,resolved:a?a.length:0})}else c=y.default.rest({url:A});c.done(function(a){h.default.trigger("bitbucket.internal.feature.pull-request-tasks.set-counts",null,{openTaskCount:a.open,resolvedTaskCount:a.resolved,pullRequestId:b.pullRequestId,repositoryId:b.repository.id,isReset:!0})})};a.prototype.closeDialog=function(){this._dialog.hide()};f.default=a;m.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-list-resources', location = '/static/bitbucket/internal/feature/tasks/task-list/task-list.js' */
define("bitbucket/internal/feature/tasks/task-list/task-list","module exports jquery bitbucket/util/events bitbucket/util/state bitbucket/internal/feature/tasks/model/task-collection bitbucket/internal/feature/tasks/task-list/task-list-dialog".split(" "),function(l,b,m,n,p,q,r){function f(a,c,b,e){a={projectKey:a,repository:c,pullRequestId:b};g.sourceEl=e;d||(d=new t.default(u.default.getCollection()),d._dialog.on("beforeShow",function(){h.default.trigger("bitbucket.internal.feature.tasks.list.opened",
null,g)}),d._dialog.on("close",function(){h.default.trigger("bitbucket.internal.feature.tasks.list.closed")}));d.openDialog(a)}Object.defineProperty(b,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(m),h=babelHelpers.interopRequireDefault(n),a=babelHelpers.interopRequireDefault(p),u=babelHelpers.interopRequireDefault(q),t=babelHelpers.interopRequireDefault(r),d,g={};b.default={openTaskListDialogForCurrentPullRequest:function(){f(a.default.getProject(),a.default.getRepository(),a.default.getPullRequest().id)},
onReady:function(){(0,k.default)(document).on("click",".task-list-dialog-link",function(b){b.preventDefault();var c=(0,k.default)(b.currentTarget),d=c.data("project-key")||a.default.getProject().key,e=c.data("pull-request-id")||a.default.getPullRequest().id;c={id:c.data("repository-id")||a.default.getRepository().id,slug:c.data("repository-slug")||a.default.getRepository().slug};f(d,c,e,b.currentTarget)})}};l.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-analytics-resources', location = '/static/bitbucket/internal/feature/tasks/task-analytics/task-analytics.js' */
define("bitbucket/internal/feature/tasks/task-analytics/task-analytics","module exports jquery lodash bitbucket/util/events bitbucket/util/state bitbucket/internal/feature/tasks/model/task bitbucket/internal/feature/tasks/model/task-collection bitbucket/internal/feature/tasks/model/task-state bitbucket/internal/util/analytics".split(" "),function(w,n,p,x,y,z,A,B,C,D){function e(a,b){E.default.add("pullRequest.task."+a,b)}function f(a,b){if(a){var c=a.text.length;var g=a.id;a=a.createdDate;a=Date.now()-
a;c={"task.text.length":c,"task.id":g,"task.time.since.created":a}}g=(0,k.default)("#task-list-dialog");g.length&&"false"===g.attr("aria-hidden")?g=l.TASK_LIST:(g=(0,k.default)(".active-tab[data-module-key]").attr("data-module-key"),g=q.default.endsWith(g,"diff")?l.DIFF:q.default.endsWith(g,"commits")?l.COMMITS:l.ACTIVITY_STREAM);a=d.default.getPullRequest().id;var e=d.default.getRepository().id;var f=m()?"author":r()?"reviewer":F()?"participant":"other";return k.default.extend({},{source:g,"pullRequest.id":a,
"repository.id":e,userRole:f},b,c)}function G(a){e("resolved."+h.taskTransitionAction(a.task),f(a.task))}function H(a){e("reopened."+h.taskTransitionAction(a.task),f(a.task))}function I(a){t=Date.now();var b="keyboard-shortcut";a&&a.sourceEl&&(b="link");e("list.opened."+h.genericAction(),f(null,{"source.secondary":b}))}function J(){var a="list.closed."+h.genericAction();var b=t;b=Date.now()-b;e(a,f(null,{age:b}))}function K(a){e("list.expandTask."+h.genericAction(),f(a.model.toJSON()))}function L(a){var b=
"gotoTask";"diff"===a.location&&(b="gotoFile");e("list."+b+"."+h.genericAction(),f(a.task))}function M(a){var b=a.toJSON();if(b.anchor.type===u.default.Anchor.COMMENT){if(b.anchor.type!==u.default.Anchor.COMMENT)var c=null;else c=(0,k.default)('.comment[data-id\x3d"'+b.anchor.id+'"]'),c={text:c.find("\x3e .content \x3e .message").text(),author:c.find("span[data-username]").attr("data-username")};c={"is.comment.owner":c.author===d.default.getCurrentUser().name,"duplicates.comment":b.text.trim()===
c.text.trim()}}e("created."+(a.prefilled?"prefilled.":"")+h.genericAction(),f(b,c))}function N(a){if(!a.isNew()){var b=a.getState()===O.default.RESOLVED;(m()||d.default.getCurrentUser().isAdmin||v(a.toJSON()))&&!b&&a.attributes.text!==a._previousAttributes.text&&e("edited."+h.taskAction(a.toJSON(),!0),f(a.toJSON()))}}function P(a){a.isNew()||e("deleted."+h.taskAction(a.toJSON(),!0),f(a.toJSON()))}function m(){return d.default.getCurrentUser().id===d.default.getPullRequest().author.user.id}function r(){var a=
d.default.getPullRequest().reviewers;return a.length&&a.some(function(a){return a.user.id===d.default.getCurrentUser().id})}function F(){var a=d.default.getPullRequest().participants;return a.length&&a.some(function(a){return a.user.id===d.default.getCurrentUser().id})}function v(a){return d.default.getCurrentUser().name===a.author.name}Object.defineProperty(n,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(p),q=babelHelpers.interopRequireDefault(x),Q=babelHelpers.interopRequireDefault(y),
d=babelHelpers.interopRequireDefault(z),u=babelHelpers.interopRequireDefault(A);p=babelHelpers.interopRequireDefault(B);var O=babelHelpers.interopRequireDefault(C),E=babelHelpers.interopRequireDefault(D),l={ACTIVITY_STREAM:"activity-stream",COMMITS:"commits-tab",DIFF:"diff-tab",TASK_LIST:"task-list"},R=p.default.getCollection(),t,h={Type:{other:"byOther",PRAuthor:"byPRAuthor",taskAuthor:"byTaskAuthor",admin:"byAdmin",reviewer:"byReviewer"},genericAction:function(){var a=this.Type.other;m()?a=this.Type.PRAuthor:
r()&&(a=this.Type.reviewer);return a},taskAction:function(a,b){var c=this.Type.other;b=!!b;d.default.getCurrentUser().isAdmin&&b&&(c=this.Type.admin);m()?c=this.Type.PRAuthor:v(a)&&(c=this.Type.taskAuthor);return c},taskTransitionAction:function(a){return this.taskAction(a,!1)}};n.default={init:function(){Q.default.chain().on("bitbucket.internal.feature.pull-request-tasks.resolved",G).on("bitbucket.internal.feature.pull-request-tasks.reopened",H).on("bitbucket.internal.feature.tasks.list.opened",
I).on("bitbucket.internal.feature.tasks.list.closed",J).on("bitbucket.internal.feature.tasks.list.expand",K).on("bitbucket.internal.feature.tasks.visit-task",L);R.on("change:id",M).on("change:text",N).on("destroy",P)}};w.exports=n["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-analytics-resources', location = '/static/bitbucket/internal/feature/tasks/task-analytics/task-analytics-init.js' */
jQuery(document).ready(function(){require("bitbucket/internal/feature/tasks/task-analytics/task-analytics").init()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:updating-section', location = '/static/bitbucket/internal/widget/updating-section/updating-section.js' */
define("bitbucket/internal/widget/updating-section/updating-section",["module","exports","jquery","lodash"],function(e,c,f,g){function b(a,b,d,c){this.init.apply(this,arguments)}Object.defineProperty(c,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(f),d=babelHelpers.interopRequireDefault(g);b.defaults={context:{},isVisibleProperty:null};b.prototype.init=function(a,c,e,f){this._$el=(0,h.default)(a);this._template=e;this._options=d.default.assign({},b.defaults,f);this._$placeholder=
this._$el.find(".replacement-placeholder");this._currentValue={};d.default.bindAll(this,"updateValue","updateVisibility");this._destroyCallbacks=[c.onValue(this.updateValue)];this._options.isVisibleProperty&&this._destroyCallbacks.push(this._options.isVisibleProperty.onValue(this.updateVisibility))};b.prototype.updateVisibility=function(a){this._$el.toggleClass("hidden",!a)};b.prototype.updateValue=function(a){a=d.default.assign({},a,this._options.context);d.default.isEqual(a,this._currentValue)||
(this._currentValue=a,a=this._template(a),this._$placeholder.stop().fadeOut(0).html(a).fadeIn())};b.prototype.destroy=function(){this._destroyCallbacks.forEach(Function.prototype.call,Function.prototype.call)};c.default=b;e.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:taskable-comment-resources', location = '/static/bitbucket/internal/feature/tasks/taskable-comment/taskable-comment.js' */
define("bitbucket/internal/feature/tasks/taskable-comment/taskable-comment","module exports jquery lodash bitbucket/util/events bitbucket/util/state bitbucket/internal/feature/comments/comment-async-web-panel bitbucket/internal/feature/comments/utils bitbucket/internal/feature/tasks/model/task bitbucket/internal/feature/tasks/model/task-collection bitbucket/internal/feature/tasks/task-list/comment-task-list-view".split(" "),function(n,g,e,p,q,r,t,u,v,w,x){Object.defineProperty(g,"__esModule",{value:!0});
var h=babelHelpers.interopRequireDefault(e),l=babelHelpers.interopRequireDefault(p);e=babelHelpers.interopRequireDefault(q);var f=babelHelpers.interopRequireDefault(r),y=babelHelpers.interopRequireDefault(t),z=babelHelpers.interopRequireDefault(v),m=babelHelpers.interopRequireDefault(w),A=babelHelpers.interopRequireDefault(x),d=m.default.getCollection(),k={};e.default.on("bitbucket.internal.feature.tasks.createTask",function(a){var b=(0,h.default)(a).data("id");a=(0,u.getCommentSelection)(a.length?
a.get(0):a);var c=k[b];(b=c.createTask(a))?d.add(b):a&&(b=c.getCurrentTask(),c=(c=c.getCurrentTaskText())?c.trim()+" ":"",b.setText(c+a))});e.default.on("bitbucket.internal.feature.comments.commentDeleted",function(a){var b=d.find(function(c){return c.getAnchor().id===a.id});b&&d.remove(b)});e.default.on("bitbucket.internal.comment.commentContainerDestroyed",function(a){var b=a.find(".task").map(function(c,a){return+a.dataset.commentId});d.filter(function(a){return l.default.includes(b,a.getAnchor().id)&&
a.isNew()}).forEach(function(a){return a.destroy()})});g.default={_commentTaskListViews:k,newTaskableCommentView:function(a){var b=a.comment,c=new m.default;l.default.forEach(b.tasks,function(a){var b=d.get(a.id);b||(b=new z.default(a),b.setPullRequestId(f.default.getPullRequest().id),b.setRepositoryId(f.default.getRepository().id),d.add(b));c.add(b)});return y.default.getWebPanelEl(function(a){var d=(0,h.default)(bitbucket.internal.feature.tasks.taskableComment.taskListPlaceholder());a.replaceWith(d);
a=(0,h.default)(d);a=new A.default({collection:c,el:a,comment:b,pullRequestId:f.default.getPullRequest().id,repositoryId:f.default.getRepository().id});a.render();k[b.id]=a})},isPullRequest:function(a){return!!a.pullRequest}};n.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:taskable-comment-resources', location = '/static/bitbucket/internal/feature/tasks/taskable-comment/taskable-comment.soy' */
// This file was automatically generated from taskable-comment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.tasks.taskableComment.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.tasks == 'undefined') { bitbucket.internal.feature.tasks = {}; }
if (typeof bitbucket.internal.feature.tasks.taskableComment == 'undefined') { bitbucket.internal.feature.tasks.taskableComment = {}; }


bitbucket.internal.feature.tasks.taskableComment.taskListPlaceholder = function(opt_data, opt_ignored) {
  return '<ul class="task-list"></ul>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskableComment.taskListPlaceholder.soyTemplateName = 'bitbucket.internal.feature.tasks.taskableComment.taskListPlaceholder';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:comment-task-list', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'comment-task-list','moduleKey':'comment-task-list','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:comment-task-list','weight':100.0,'condition':function(ctx) { return WebFragments._getValue((require('bitbucket/internal/feature/tasks/taskable-comment/taskable-comment').isPullRequest), ctx); },'params':{},'location':'bitbucket.comments.extra','view':function(ctx) { return WebFragments._getValue((require('bitbucket/internal/feature/tasks/taskable-comment/taskable-comment').newTaskableCommentView), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/diff-comment-container.js' */
define("bitbucket/internal/feature/comments/diff-comment-container","module exports jquery lodash bitbucket/internal/feature/comments/comment-container bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/time-i18n-mappings".split(" "),function(k,b,e,l,m,n,p,q){Object.defineProperty(b,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(e),h=babelHelpers.interopRequireDefault(l),d=babelHelpers.interopRequireDefault(m),g=babelHelpers.interopRequireDefault(n);
e=babelHelpers.interopRequireDefault(p);var r=babelHelpers.interopRequireDefault(q);g.default.on("bitbucket.internal.history.changestate",function(){});b.default=d.default.extend({rootCommentListSelector:".comment-list",initialize:function(){h.default.bindAll(this,"onResize","onWebPanelResize");this.$el.is(".comment-container")||this.setElement((0,f.default)(bitbucket.internal.feature.comments(f.default.extend({extraClasses:"comment-box",comments:this.options.collection&&this.options.collection.toJSON(),
customMapping:r.default.commentEditedAge,pullRequest:this.options.anchor.getPullRequest()},this.options.anchor.toJSON())))[0]);!this.isFileCommentContainer()&&this.options.context.diffView&&(this.toggleComment(this.options.showComments),this.options.context.diffView.addLineClass(this.options.lineHandle,"wrap","commented"));this.on("change",this.onResize);this.on("comment.saved",this.scrollIntoView);g.default.on("bitbucket.internal.webpanel.resize",this.onWebPanelResize);d.default.prototype.initialize.apply(this,
arguments)},closeCommentForm:function(a,c){if(!c||!c.doNotDestroy){var b=a.parent().parent();if(b.is(this.rootCommentListSelector)&&0===b.children(".comment").length)return this.deleteDraftComment(this.getDraftCommentFromForm(a)),this._unbindMarkupEditor(a),this.destroy()}return d.default.prototype.closeCommentForm.apply(this,arguments)},destroyIfEmpty:function(){var a=this.$(this.rootCommentListSelector);0!==a.children(".comment").length||a.find("textarea").val()||this.destroy()},destroy:function(a){d.default.prototype.destroy.apply(this,
arguments);this._widget&&(this._widget.clear(),this._widget=null);this.off("change",this.onResize);this.options.lineHandle&&this.options.context.diffView.removeLineClass(this.options.lineHandle,"wrap","commented");g.default.trigger("bitbucket.internal.comment.commentContainerDestroyed",null,this.$el);this.context.destroy(this,a)},focusCommentForm:e.default.lazyDefer(function(a){this.scrollToComment(a);a=a.find("textarea");this.isFileCommentContainer()?setTimeout(a.focus.bind(a),100):a.focus()}),onCommentDeleted:function(){this.destroyIfEmpty()},
onCommentEditorResize:function(){this.onResize()},onWebPanelResize:function(a){if("bitbucket.comments.extra"===a.location&&f.default.contains(this.$el.get(0),a.el))this.onResize()},onResize:function(){this._widget&&this._widget.changed();this.trigger("resize")},isFileCommentContainer:function(){return!!this.$el.closest(".file-comments").length},isActivityCommentContainer:function(){return!!this.$el.closest(".activity-item").length},scrollToComment:function(a){if(!this.isActivityCommentContainer()){var c=
a.offset().top-this.$el.offset().top;this.isFileCommentContainer()?this.options.context.diffView&&this.options.context.diffView.scrollToFileComments(c,a.height()):this.options.context.diffView.scrollToWidgetOffset(this.options.lineHandle,c,a.height())}},toggleComment:function(a){this.isFileCommentContainer()?this.options.context.trigger("fileCommentsResized"):a&&!this._widget?(this._widget=this.options.context.diffView.addLineWidget(this.options.lineHandle,this.el,{noHScroll:!0,coverGutter:!0,insertAt:0}),
a=h.default.throttle(function(){var a=this.getHeight();this._previousHeight!==a&&(this.changed(),this._previousHeight=a)},200),this._widget.onRedraw(a.bind(this._widget))):!a&&this._widget&&(this._widget.clear(),this._widget=null,this.el.parentElement.removeChild(this.el))}});k.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/comment-model.js' */
define("bitbucket/internal/feature/comments/comment-model","module exports aui backbone backbone-brace lodash bitbucket/util/navbuilder".split(" "),function(h,e,b,k,l,m,n){Object.defineProperty(e,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(b),p=babelHelpers.interopRequireDefault(k),f=babelHelpers.interopRequireDefault(l),g=babelHelpers.interopRequireDefault(m),q=babelHelpers.interopRequireDefault(n);b=f.default.Model.extend({namedAttributes:{anchor:null,attributes:null,author:null,
avatarSize:null,comments:null,tasks:null,createdDate:"number",html:"string",id:"number",isFocused:"boolean",isUnread:"boolean",parent:null,permittedOperations:null,properties:null,pullRequest:"object",text:"string",updatedDate:"number",version:"number"},validate:function(a){if(!a.text||!/\S/.test(a.text))return "Please enter some text"},url:function(){var a={avatarSize:this.get("avatarSize"),markup:!0};null!=this.get("version")&&(a.version=this.get("version"));var c=this.get("anchor");
g.default.get(c,"commitRange.sinceRevision")&&(a.since=c.commitRange.sinceRevision.id);if(this.collection&&this.collection.urlBuilder)return c=this.collection.urlBuilder().withParams(a),this.isNew()||(c=c.addPathComponents(this.get("id"))),c.build();var b=q.default.parse(f.default.Model.prototype.url.apply(this,arguments));Object.keys(a).forEach(function(c){return b.addQueryParam(c,a[c])});return b.toString()},forEachCommentInThread:function(a){a(this);g.default.forEach(this.get("comments"),function(c){c.forEachCommentInThread(a)})},
sync:function(a,c,b){return p.default.sync(a,c,g.default.assign(b,{statusCode:{404:function(b,e,f,h,k){if((b=g.default.get(h,"errors.0"))&&b.message&&/comment/i.test(b.message)){if("create"===a&&null!=c.get("parent"))return{title:"Comment not found",message:"The comment you are replying to no longer exists.",shouldReload:!0,fallbackUrl:void 0};if("update"===a)return{title:"Comment not found",message:"The comment you are updating no longer exists.",
shouldReload:!0,fallbackUrl:void 0}}}}}))}});f.default.Mixins.applyMixin(b,{namedAttributes:{comments:[b]}});e.default=b;h.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/comment-async-web-panel.js' */
define("bitbucket/internal/feature/comments/comment-async-web-panel",["module","exports","jquery","bitbucket/util/events","bitbucket/internal/util/promise"],function(e,b,a,f,g){Object.defineProperty(b,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(f);var k=babelHelpers.interopRequireDefault(g),d=[document.documentElement];a.default.on("bitbucket.internal.page.pull-request.view.contextRequested",function(){d=[document.documentElement]});a.default.on("bitbucket.internal.feature.comments.commentContainerAdded",
function(a){d.push(a[0])});var c=0;b.default={getWebPanelEl:function(a){c++;var b="#async-web-panel-"+c;k.default.waitFor({predicate:function(){var a=(0,h.default)(b,d);return a.length?a:!1},name:"Async web panel "+c,interval:50}).then(a);return bitbucket.internal.feature.commentAsyncWebPanelPlaceholder({webPanelId:c})}};e.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/comment-container.js' */
define("bitbucket/internal/feature/comments/comment-container","module exports aui backbone jquery lib/jsuri lodash bitbucket/internal/feature/comments/comment-collection bitbucket/internal/feature/comments/comment-model bitbucket/internal/feature/comments/comment-tips bitbucket/internal/model/page-state bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/history bitbucket/internal/util/syntax-highlight bitbucket/internal/util/time-i18n-mappings bitbucket/internal/widget/aui/form/form bitbucket/internal/widget/confirm-dialog bitbucket/internal/widget/markup-editor/markup-editor".split(" "),
function(w,m,n,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N){Object.defineProperty(m,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(n);n=babelHelpers.interopRequireDefault(x);var e=babelHelpers.interopRequireDefault(y),O=babelHelpers.interopRequireDefault(z),k=babelHelpers.interopRequireDefault(A),P=babelHelpers.interopRequireDefault(B),q=babelHelpers.interopRequireDefault(C),r=babelHelpers.interopRequireDefault(D),h=babelHelpers.interopRequireDefault(E),Q=babelHelpers.interopRequireDefault(F),
f=babelHelpers.interopRequireDefault(G),t=babelHelpers.interopRequireDefault(H),R=babelHelpers.interopRequireDefault(I),u=babelHelpers.interopRequireDefault(J),S=babelHelpers.interopRequireDefault(K),p=babelHelpers.interopRequireDefault(L),T=babelHelpers.interopRequireDefault(M),v=babelHelpers.interopRequireDefault(N);m.default=n.default.View.extend({initialize:function(){k.default.bindAll(this,"onCommentEditorResize","onCommentFocused");this.anchor=this.anchor||this.options.anchor;this.rootCommentListSelector=
this.rootCommentListSelector||this.options.rootCommentListSelector;this.context=this.options.context;this.pullRequest=this.options.pullRequest||h.default.getPullRequest();this.urlBuilder=this.options.urlBuilder;this.collection||(this.collection=new P.default([],{anchor:this.anchor,urlBuilder:this.urlBuilder}));this.initDeleteButtons();this.$el.imagesLoaded(this.onImagesLoaded.bind(this));f.default.trigger("bitbucket.internal.feature.comments.commentContainerAdded",null,this.$el);this.updateDraftComment=
k.default.debounce(this.updateDraftComment,300);this.deleteDraftComment=k.default.debounce(this.deleteDraftComment,300);this.on("comment.saved",u.default.container.bind(null,this.$el));u.default.container(this.$el);f.default.once("bitbucket.internal.feature.pullRequestActivity.focused",this.onCommentFocused)},events:{"submit form":"onFormSubmit","click a.times":"onDateClicked","click .cancel":"onCancelClicked","click .reply":"onReplyClicked","click .edit":"onEditClicked","click .task-create":"onCreateTaskClicked",
"keydown form":"onFormKeydown","input textarea":"onTextareaInput","comment-child-added .comment ":"onChildrenChanged","comment-child-removed .comment ":"onChildrenChanged"},initDeleteButtons:function(a){this.createDeleteDialog().attachTo(".delete",null,this.el)},createDeleteDialog:function(){var a=this,b=new T.default({id:"delete-repository-dialog",titleText:"Delete comment",titleClass:"warning-header",panelContent:"\x3cp\x3e"+"Are you sure that you want to delete this comment?"+
"\x3c/p\x3e",submitText:"Delete",submitToHref:!1,focusSelector:".button-panel-cancel-link"});b.addConfirmListener(function(b,c,e){e();a.deleteComment(c.closest(".comment"))});return b},sendOverviewAnalyticsEvent:function(a,b,d){(0,e.default)(a).closest("#pull-request-activity")&&f.default.trigger("bitbucket.internal.feature.pullRequest."+b,null,d)},onFormSubmit:function(a){a.preventDefault();a.stopPropagation();this.submitCommentForm((0,e.default)(a.target))},
onDateClicked:function(a){a.preventDefault();a.stopPropagation();(0,e.default)(".comment.focused").removeClass("focused");a=(0,e.default)(a.target).closest("a");a.closest(".comment").addClass("focused");R.default.pushState(null,null,a.prop("href"))},onCancelClicked:function(a){a.preventDefault();a.stopPropagation();this.cancelCommentForm((0,e.default)(a.target).closest("form"))},onReplyClicked:function(a){a.originalEvent instanceof MouseEvent&&this.sendOverviewAnalyticsEvent(a.target,"overview.comment.reply.clicked");
a.preventDefault();a.stopPropagation();this.openReplyForm((0,e.default)(a.target).closest(".comment"))},onEditClicked:function(a){this.sendOverviewAnalyticsEvent(a.target,"overview.comment.edit.clicked");a.preventDefault();a.stopPropagation();this.openEditForm((0,e.default)(a.target).closest(".comment"))},onCreateTaskClicked:function(a){this.sendOverviewAnalyticsEvent(a.target,"overview.comment.task.clicked");a.preventDefault();a.stopPropagation();a=(0,e.default)(a.target).closest(".comment");f.default.trigger("bitbucket.internal.feature.tasks.createTask",
null,a)},onImagesLoaded:function(a){this.trigger("change")},onFormKeydown:function(a){Q.default.isCtrlEnter(a)&&(a.preventDefault(),a.stopPropagation(),(0,e.default)(a.target).closest("form").submit())},onTextareaInput:function(a){(0,e.default)(a.target).closest(".comment-container").is(this.el)&&this.updateDraftComment(a.target)},onChildrenChanged:function(a){if(a.target!==a.currentTarget){a.stopPropagation();a=(0,e.default)(a.currentTarget);var b=a.find("\x3e .content .task-list-row, \x3e .replies \x3e .comment").not(".pending-delete").length;
a.find("\x3e .content \x3e .actions \x3e li \x3e .delete").parent().toggleClass("hidden",!!b)}},onCommentFocused:function(a){var b=(new O.default(window.location)).getQueryParamValue("action"),d={"comment.id":this.getCommentJSON(a.closest(".comment")).id};"reply"===b?(a.find(".reply").first().click(),this.sendOverviewAnalyticsEvent(a,"comment.actions.reply",d)):"view"===b&&this.sendOverviewAnalyticsEvent(a,"comment.actions.view",d)},updateDraftComment:function(a){a=this.getDraftCommentFromForm((0,
e.default)(a).closest("form"));this.context&&this.context.saveDraftComment(a)},getDraftCommentFromForm:function(a){a=this.getCommentFormJSON(a);a.anchor&&delete a.anchor.commitRange;return e.default.extend({},a)},deleteDraftComment:function(a){this.context&&this.context.deleteDraftComment(a)},getRootCommentList:function(){var a=this.$(this.rootCommentListSelector);a.length||(a=this.$el);return a},render:function(){var a=bitbucket.internal.feature.comments(e.default.extend({comments:this.collection.toJSON(),
customMapping:S.default.commentEditedAge,pullRequest:this.options.anchor.getPullRequest()},this.anchor.toJSON()));this.$el.replaceWith(a);this.setElement(a[0])},_toJSON:function(a,b){var d=parseInt(a.parent().closest(".comment").attr("data-id"),10),c=parseInt(a.attr("data-id"),10);a=parseInt(a.attr("data-version"),10);var e=this.anchor.toJSON();return{id:isNaN(c)?void 0:c,version:isNaN(a)?void 0:a,text:b,anchor:e,parent:isNaN(d)?void 0:{id:d}}},getCommentJSON:function(a){return this._toJSON(a,a.find("\x3e .content \x3e .message").attr("data-text"))},
getCommentFormJSON:function(a){var b=a.parent().is(".comment")?a.parent():a;return this._toJSON(b,a.find("textarea").val())},renderContentUpdate:function(a,b){a.children(".content").replaceWith(bitbucket.internal.feature.commentContent({pullRequest:this.pullRequest&&this.pullRequest.toJSON(),comment:b,hideDelete:!!a.find("\x3e .replies \x3e .comment").length}));a.attr("data-version",b.version).data("version",b.version);this.$el.imagesLoaded(this.onImagesLoaded.bind(this));this.scrollToComment(a);
this.trigger("change");f.default.trigger("bitbucket.internal.feature.comments.commentEdited",null,b,a)},insertCommentIntoList:function(a,b,d){for(var c=b.children(".comment:first");c.length&&!(parseInt(c.data("id"),10)>d.id);)c=c.next(".comment");c=c.length?c:b.children(".comment-form-container:last");c.length?a.insertBefore(c):b.append(a)},renderComment:function(a,b,d){var c;if(d&&(c=(0,e.default)('.comment[data-id\x3d"'+a.id+'"]')).length)return this.renderContentUpdate(c,a);a=e.default.extend({isNew:!0},
a);b=(c=b&&this.$("[data-id\x3d"+b+"]"))?c.children(".replies"):this.getRootCommentList();c=(0,e.default)(bitbucket.internal.feature.comment({pullRequest:this.pullRequest&&this.pullRequest.toJSON(),numOfAncestors:b.parents(".comment").length,extraClasses:this.getExtraCommentClasses(),comment:a}));this.insertCommentIntoList(c,b,a);setTimeout(k.default.bind(c.removeClass,c,"new"),5E3);this.scrollToComment(c);c.hide().fadeIn("slow");this.$el.imagesLoaded(this.onImagesLoaded.bind(this));this.trigger("change");
f.default.trigger("bitbucket.internal.feature.comments.commentAdded",null,a,c);c.trigger("comment-child-added")},getExtraCommentClasses:function(){return""},showErrorMessage:function(a,b){a=this.find(".error");a.length||(a=(0,e.default)('\x3cdiv class\x3d"error"\x3e\x3c/div\x3e'),this.find(".comment-form-footer").before(a));a.text(b)},cancelCommentForm:function(a){this.closeCommentForm(a)},submitCommentForm:function(a){if(!p.default.isSubmissionPrevented(a)){var b=this,d=a.find(".comment-submit-spinner"),
c=this.getCommentFormJSON(a),f=null!=c.id,g=f&&this.collection.get(c.id),h=c.parent&&c.parent.id,l=g?this.collection.get(c.id):new q.default;l.on("invalid",this.showErrorMessage,a);l.set(e.default.extend(c,{avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"medium"})}),{validate:!0})&&(g||this.collection.push(l),a.addClass("submitting"),d.spin("medium"),p.default.preventSubmission(a),l.save().done(function(c){c.createdDate=Math.min(c.createdDate,(new Date).getTime());c.updatedDate=Math.min(c.updatedDate,
(new Date).getTime());b.closeCommentForm(a,{doNotDestroy:!0});b.renderComment(c,h,f);b.trigger("comment.saved")}).fail(function(){g||f||b.collection.remove(c.id)}).always(function(){d.spinStop();a.removeClass("submitting");p.default.allowSubmission(a)}));l.off("invalid",this.showErrorMessage)}},deleteComment:function(a){var b=this.getCommentJSON(a);if(this.collection.get(b))var d=this.collection.get(b.id);else d=new q.default(b),this.collection.push(d);var c=a.find("\x3e .content .delete"),e=c.height(),
h=c.width();c.height(e).width(h).css("vertical-align","middle").empty().spin("small");var k=this;d.destroy({wait:!0}).always(function(){c.spinStop()}).done(function(){a.addClass("pending-delete").fadeOut(function(){a.trigger("comment-child-removed").remove();k.onCommentDeleted();k.trigger("change");f.default.trigger("bitbucket.internal.feature.comments.commentDeleted",null,b)})}).fail(function(){c.css("height","").css("width","").css("vertical-align","").text("Delete")})},
onCommentDeleted:function(){},onCommentEditorResize:e.default.noop,openEditForm:function(a){var b=this.getCommentJSON(a);b=(0,e.default)(bitbucket.internal.feature.commentForm(e.default.extend({tips:450<this.$el.width()?r.default.tips:[],currentUser:h.default.getCurrentUser()&&h.default.getCurrentUser().toJSON()},b)));var d=a.find("\x3e .user-avatar, \x3e .content");d.detach();a.prepend(b).addClass("comment-form-container");b.data("originalContent",d);this._bindMarkupEditor(b);this.focusCommentForm(b);
this.trigger("change");f.default.trigger("bitbucket.internal.feature.comments.commentFormShown",null,b);return b},openReplyForm:function(a){a=a.children(".replies");return this.openCommentForm(a,{location:"top"})},openNewCommentForm:function(){return this.openCommentForm(this.getRootCommentList(),{location:"bottom"})},openCommentForm:function(a,b){b=b&&"top"===b.location?"prependTo":"appendTo";var d=a.children(".comment-form-container").not(".comment");d.length||(d=(0,e.default)(bitbucket.internal.feature.commentFormListItem({tips:450<
this.$el.width()?r.default.tips:[],currentUser:h.default.getCurrentUser()&&h.default.getCurrentUser().toJSON()}))[b](a),this._bindMarkupEditor(d.find("form")));a=d.find("form");this.focusCommentForm(a);this.trigger("change");f.default.trigger("bitbucket.internal.feature.comments.commentFormShown",null,a);return a},closeCommentForm:function(a){a.find(".error").remove();this.deleteDraftComment(this.getDraftCommentFromForm(a));this._unbindMarkupEditor(a);var b=a.data("originalContent"),d=a.parent();
b?(d.removeClass("comment-form-container"),a.replaceWith(b)):d.remove();this.trigger("change");f.default.trigger("bitbucket.internal.feature.comments.commentFormHidden",null,a)},focusCommentForm:t.default.lazyDefer(function(a){this.scrollToComment(a);a.find("textarea").focus()}),scrollToComment:e.default.noop,populateCommentFormFromDraft:function(a,b){(0,e.default)(a).find("textarea").val(b.text).addClass("restored").attr("title","This comment has been restored from an automatically saved draft.").trigger("input").one("click input",
function(){(0,e.default)(this).removeClass("restored").removeAttr("title")})},getCommentElById:function(a){return this.$(".comment[data-id\x3d"+a+"]")},restoreDraftComment:function(a){if(a.id){var b=this.getCommentElById(a.id);if(b.length){if(parseInt(a.version,10)<parseInt(b.attr("data-version"),10))return this.context.deleteDraftComment(a),!0;var d=this.openEditForm(b)}}else a.parent?(b=this.getCommentElById(a.parent.id),b.length&&(d=this.openReplyForm(b))):d=this.openNewCommentForm();d&&this.populateCommentFormFromDraft(d,
a);return!!d},_bindMarkupEditor:function(a){v.default.bindTo(a).on("resize",this.onCommentEditorResize)},_unbindMarkupEditor:function(a){v.default.unbindFrom(a)},destroy:function(){this.$("form").each(t.default.thisToParam(this._unbindMarkupEditor.bind(this)))}});w.exports=m["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/comment-context.js' */
define("bitbucket/internal/feature/comments/comment-context","module exports backbone jquery lodash bitbucket/internal/feature/comments/comment-container bitbucket/internal/util/client-storage bitbucket/internal/util/events".split(" "),function(k,e,f,g,l,m,n,p){Object.defineProperty(e,"__esModule",{value:!0});f=babelHelpers.interopRequireDefault(f);g=babelHelpers.interopRequireDefault(g);var c=babelHelpers.interopRequireDefault(l),q=babelHelpers.interopRequireDefault(m),h=babelHelpers.interopRequireDefault(n),
d=babelHelpers.interopRequireDefault(p);e.default=f.default.View.extend({initialize:function(){this._containers={};this.checkForNewContainers();var a=this;d.default.on("bitbucket.internal.feature.comments.commentAdded",this._commentAddedHandler=function(b,c){a.$el.find(c).length&&1===a.$el.find(".comment").length&&d.default.trigger("bitbucket.internal.feature.comments.firstCommentAdded",null,a.$el)});var b=this.getDrafts()||[];this.unrestoredDrafts=this.drafts=c.default.isArray(b)?b:[b];this.restoreDrafts()},
includesContainer:function(a){return c.default.has(this._containers,a)},registerContainer:function(a,b){var c=b.getId();this.includesContainer(c)||this._registerContainer(c,a,b)},_registerContainer:function(a,b,c){this._containers[a]=new q.default({name:a,context:this,el:b,anchor:c});return this._containers[a]},checkForNewContainers:function(){var a=this;c.default.forEach(this.findContainerElements(),function(b){a.registerContainer(b,a.getAnchor(b))})},findContainerElements:function(){return this.$(".comment-container")},
getAnchor:function(){return this.options.anchor},clarifyAmbiguousDraftProps:function(a){return c.default.omit(a,"text")},deleteDraftComment:function(a,b){b=c.default.isBoolean(b)?b:!0;a=c.default.isEqual.bind(c.default,this.clarifyAmbiguousDraftProps(a));this.drafts=c.default.reject(this.drafts,c.default.flow(this.clarifyAmbiguousDraftProps.bind(this),a));b&&this.saveDraftComments()},getDrafts:function(){return h.default.getSessionItem(this.getDraftsKey())},getDraftsKey:function(){return h.default.buildKey(["draft-comment",
this.options.anchor.getId()],"user")},restoreDrafts:g.default.noop,saveDraftComment:function(a){this.deleteDraftComment(a,!1);a.text&&this.drafts.push(a);this.saveDraftComments()},saveDraftComments:function(){h.default.setSessionItem(this.getDraftsKey(),this.drafts)},destroy:function(a,b){a?(a.remove(),delete this._containers[a.options.name],this.$el.has(".comment").length||b||d.default.trigger("bitbucket.internal.feature.comments.lastCommentDeleted",null,this.$el)):(c.default.invokeMap(this._containers,
"destroy",!0),this._containers=null,this._commentAddedHandler&&(d.default.off("bitbucket.internal.feature.comments.commentAdded",this._commentAddedHandler),delete this._commentAddedHandler))}});k.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/comments.soy' */
// This file was automatically generated from comments.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }


bitbucket.internal.feature.comments = function(opt_data, opt_ignored) {
  var output = '<div class="comment-container' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"' + ((opt_data.line) ? ' data-line-number="' + soy.$$escapeHtml(opt_data.line) + '"' : '') + ((opt_data.lineType) ? ' data-line-type="' + soy.$$escapeHtml(opt_data.lineType) + '"' : '') + '><div class="panel"><ol class="comment-list">';
  if (opt_data.comments) {
    var commentList22 = opt_data.comments;
    var commentListLen22 = commentList22.length;
    for (var commentIndex22 = 0; commentIndex22 < commentListLen22; commentIndex22++) {
      var commentData22 = commentList22[commentIndex22];
      output += bitbucket.internal.feature.comment({comment: commentData22, customMapping: opt_data.customMapping, numOfAncestors: 0, pullRequest: opt_data.pullRequest});
    }
  }
  output += '</ol></div></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.comments.soyTemplateName = 'bitbucket.internal.feature.comments';
}


bitbucket.internal.feature.comment = function(opt_data, opt_ignored) {
  var output = '<li class="comment' + ((opt_data.comment.isNew) ? ' new' : '') + ((opt_data.comment.isUnread) ? ' unread' : '') + ((opt_data.comment.isFocused) ? ' focused' : '') + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" data-id="' + soy.$$escapeHtml(opt_data.comment.id) + '" data-version="' + soy.$$escapeHtml(opt_data.comment.version) + '">' + bitbucket.internal.widget.avatar({size: 'medium', person: opt_data.comment.author}) + bitbucket.internal.feature.commentContent(opt_data) + '<ol class="replies' + ((opt_data.numOfAncestors >= 7) ? ' no-indent' : '') + '">';
  if (opt_data.comment.comments) {
    var replyList64 = opt_data.comment.comments;
    var replyListLen64 = replyList64.length;
    for (var replyIndex64 = 0; replyIndex64 < replyListLen64; replyIndex64++) {
      var replyData64 = replyList64[replyIndex64];
      output += bitbucket.internal.feature.comment({comment: replyData64, customMapping: opt_data.customMapping, pullRequest: opt_data.pullRequest, numOfAncestors: opt_data.numOfAncestors + 1});
    }
  }
  output += '</ol></li>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.comment.soyTemplateName = 'bitbucket.internal.feature.comment';
}


bitbucket.internal.feature.commentContent = function(opt_data, opt_ignored) {
  var output = '<div class="content">';
  if (opt_data.comment.deleted) {
    output += soy.$$escapeHtml('This comment has been removed by the author.');
  } else {
    output += bitbucket.internal.widget.userLink({user: opt_data.comment.author, extraClasses: 'user-name'}) + '<div class="message ' + soy.$$escapeHtml(opt_data.comment.html ? 'markup' : 'plaintext') + '" data-text="' + soy.$$escapeHtml(opt_data.comment.text) + '">' + ((opt_data.comment.html) ? soy.$$filterNoAutoescape(opt_data.comment.html) : '<p>' + soy.$$escapeHtml(opt_data.comment.text) + '</p>') + '</div><ul class="actions"><li>' + bitbucket.internal.buttons.linkButton({content: '' + soy.$$escapeHtml('Reply'), extraClasses: 'reply'}) + '</li>' + ((opt_data.comment.permittedOperations.editable) ? '<li>' + bitbucket.internal.buttons.linkButton({content: '' + soy.$$escapeHtml('Edit'), extraClasses: 'edit'}) + '</li>' : '') + ((opt_data.comment.permittedOperations.deletable) ? '<li' + ((opt_data.hideDelete || (opt_data.comment.comments && opt_data.comment.comments.length || opt_data.comment.tasks && opt_data.comment.tasks.length)) ? ' class="hidden"' : '') + '>' + bitbucket.internal.buttons.linkButton({content: '' + soy.$$escapeHtml('Delete'), extraClasses: 'delete'}) + '</li>' : '');
    var itemList120 = WebFragments.getWebItems('bitbucket.comments.actions',{comment: opt_data.comment, pullRequest: opt_data.pullRequest});
    var itemListLen120 = itemList120.length;
    for (var itemIndex120 = 0; itemIndex120 < itemListLen120; itemIndex120++) {
      var itemData120 = itemList120[itemIndex120];
      output += '<li>' + bitbucket.internal.widget.webItem(itemData120) + '</li>';
    }
    output += '</ul><ul class="info">';
    var panelHtmlList126 = WebFragments.getWebPanels('bitbucket.comments.info',{comment: opt_data.comment, pullRequest: opt_data.pullRequest}).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
    var panelHtmlListLen126 = panelHtmlList126.length;
    for (var panelHtmlIndex126 = 0; panelHtmlIndex126 < panelHtmlListLen126; panelHtmlIndex126++) {
      var panelHtmlData126 = panelHtmlList126[panelHtmlIndex126];
      output += '<li>' + soy.$$escapeHtml(panelHtmlData126) + '</li>';
    }
    output += '<li>';
    if (opt_data.pullRequest) {
      var pullRequestCommentLink__soy134 = require('bitbucket/util/navbuilder').project(opt_data.pullRequest.toRef.repository.project.key).repo(opt_data.pullRequest.toRef.repository.slug).pullRequest(opt_data.pullRequest.id).overview().comment(opt_data.comment.id).withParams(opt_data.comment.id).build();
      output += '<a class="times" href="' + soy.$$escapeHtml(pullRequestCommentLink__soy134) + '">' + bitbucket.internal.feature.commentDate(opt_data) + '</a>';
    } else {
      output += '<span class="times">' + bitbucket.internal.feature.commentDate(opt_data) + '</span>';
    }
    output += '</li></ul><div class="extras">';
    var panelHtmlList149 = WebFragments.getWebPanels('bitbucket.comments.extra',{comment: opt_data.comment, pullRequest: opt_data.pullRequest}).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
    var panelHtmlListLen149 = panelHtmlList149.length;
    for (var panelHtmlIndex149 = 0; panelHtmlIndex149 < panelHtmlListLen149; panelHtmlIndex149++) {
      var panelHtmlData149 = panelHtmlList149[panelHtmlIndex149];
      output += soy.$$escapeHtml(panelHtmlData149);
    }
    output += '</div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentContent.soyTemplateName = 'bitbucket.internal.feature.commentContent';
}


bitbucket.internal.feature.commentDate = function(opt_data, opt_ignored) {
  return '' + ((opt_data.comment.updatedDate - opt_data.comment.createdDate > 0) ? (require('bitbucket/internal/util/time').format(opt_data.comment.createdDate, 'shortAge') != require('bitbucket/internal/util/time').format(opt_data.comment.updatedDate, 'shortAge')) ? bitbucket.internal.feature.commentEditTimes({createdDateContent: '' + bitbucket.internal.widget.date.shortAge({date: opt_data.comment.createdDate}), updatedDateContent: '' + bitbucket.internal.widget.date.customAge({date: opt_data.comment.updatedDate, customMapping: opt_data.customMapping})}) : bitbucket.internal.widget.date.shortAge({date: opt_data.comment.createdDate, title: AJS.format('{0} (edited {1})',require('bitbucket/internal/util/time').format(opt_data.comment.createdDate, 'full'),require('bitbucket/internal/util/time').format(opt_data.comment.updatedDate, 'full'))}) : bitbucket.internal.widget.date.shortAge({date: opt_data.comment.createdDate}));
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentDate.soyTemplateName = 'bitbucket.internal.feature.commentDate';
}


bitbucket.internal.feature.commentEditTimes = function(opt_data, opt_ignored) {
  return soy.$$filterNoAutoescape(opt_data.createdDateContent) + ' (' + soy.$$filterNoAutoescape(opt_data.updatedDateContent) + ')';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentEditTimes.soyTemplateName = 'bitbucket.internal.feature.commentEditTimes';
}


bitbucket.internal.feature.commentFormListItem = function(opt_data, opt_ignored) {
  return '<li class="comment-form-container' + ((opt_data.isHidden) ? ' hidden' : '') + '">' + bitbucket.internal.feature.commentForm({id: opt_data.id, version: opt_data.version, text: opt_data.text, tips: opt_data.tips, currentUser: opt_data.currentUser, extraClasses: opt_data.extraFormClasses}) + '</li>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentFormListItem.soyTemplateName = 'bitbucket.internal.feature.commentFormListItem';
}


bitbucket.internal.feature.commentForm = function(opt_data, opt_ignored) {
  return '<form' + ((opt_data.id) ? ' data-id="' + soy.$$escapeHtml(opt_data.id) + '" data-version="' + soy.$$escapeHtml(opt_data.version) + '"' : '') + ' class="new-comment-form' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + bitbucket.internal.widget.avatar({size: 'medium', person: opt_data.currentUser}) + '<div class="content">' + ((opt_data.text) ? '<input name="old_text" type="hidden" value="' + soy.$$escapeHtml(opt_data.text) + '" />' : '') + bitbucket.internal.widget.markupEditor.editor({text: opt_data.text, placeholderText: 'What do you want to say?', previewButtonTitle: 'View a preview of this comment', attachmentButtonTitle: 'Attach a file to this comment. You can also drag and drop a file to attach it.', attachmentButtonAccessibilityText: 'Attach file'}) + '<div class="comment-form-footer"><div class="buttons">' + bitbucket.internal.buttons.button({buttonText: opt_data.id ? 'Save' : 'Comment'}) + widget.aui.form.cancelButton({href: '#'}) + '</div>' + ((opt_data.tips.length) ? bitbucket.internal.feature.commentFormTip(opt_data) : '') + '</div></div></form>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentForm.soyTemplateName = 'bitbucket.internal.feature.commentForm';
}


bitbucket.internal.feature.commentFormTip = function(opt_data, opt_ignored) {
  return '<div class="tip"><span class="tip-label">' + soy.$$escapeHtml('Tip:') + ' </span>' + soy.$$filterNoAutoescape(opt_data.tips[Math.floor(Math.random() * opt_data.tips.length)]) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentFormTip.soyTemplateName = 'bitbucket.internal.feature.commentFormTip';
}


bitbucket.internal.feature.addCommentTrigger = function(opt_data, opt_ignored) {
  return '<button class="add-comment-trigger" title="' + soy.$$escapeHtml('Add a comment on this line.') + '">' + aui.icons.icon({useIconFont: true, icon: 'comment', accessibilityText: 'This line has a comment.'}) + aui.icons.icon({useIconFont: true, icon: 'add-comment', accessibilityText: 'Add a comment on this line.'}) + '</button>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.addCommentTrigger.soyTemplateName = 'bitbucket.internal.feature.addCommentTrigger';
}


bitbucket.internal.feature.dummyCommentTrigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var changeLocation__soy257 = opt_data.relevantContextLines ? AJS.format('Comments can only be added within {0} lines of a change',opt_data.relevantContextLines) : 'Comments can only be added near a change';
  output += '<div class="dummy-comment-trigger" title="' + soy.$$escapeHtml(changeLocation__soy257) + '" ></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.dummyCommentTrigger.soyTemplateName = 'bitbucket.internal.feature.dummyCommentTrigger';
}


bitbucket.internal.feature.fileComments = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="file-comments">' + ((opt_data.comments && opt_data.comments.length > 0) ? bitbucket.internal.feature.comments(opt_data) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileComments.soyTemplateName = 'bitbucket.internal.feature.fileComments';
}


bitbucket.internal.feature.commentAsyncWebPanelPlaceholder = function(opt_data, opt_ignored) {
  return '<div id="async-web-panel-' + soy.$$escapeHtml(opt_data.webPanelId) + '"></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentAsyncWebPanelPlaceholder.soyTemplateName = 'bitbucket.internal.feature.commentAsyncWebPanelPlaceholder';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/anchors.js' */
define("bitbucket/internal/feature/comments/anchors",["module","exports","jquery","bitbucket/util/navbuilder","bitbucket/internal/model/page-state"],function(h,e,k,l,m){function b(a){this._pullRequest=a?a.toJSON():f.default.getPullRequest().toJSON();this._projectKey=this._pullRequest.toRef.repository.project.key;this._repoSlug=this._pullRequest.toRef.repository.slug;this._pullRequestId=this._pullRequest.id}function c(a){this._path=a.getPath();this._srcPath=a.getSrcPath();this._commitRange=a.getCommitRange();
this._projectKey=(a.getRepository()||f.default).getProject().getKey();this._repoSlug=(a||f.default).getRepository().getSlug()}function d(a,n,b,c){this._diffAnchor=a;this._lineType=n;this._line=b;this._fileType=c}Object.defineProperty(e,"__esModule",{value:!0});var p=babelHelpers.interopRequireDefault(k),g=babelHelpers.interopRequireDefault(l),f=babelHelpers.interopRequireDefault(m);b.prototype.getPullRequest=function(){return this._pullRequest};b.prototype.getId=function(){return"pullrequest-"+this._projectKey+
"-"+this._repoSlug+"-"+this._pullRequestId};b.prototype.toJSON=function(){};b.prototype.urlBuilder=function(){return g.default.rest().project(this._projectKey).repo(this._repoSlug).pullRequest(this._pullRequestId).comments()};c.prototype.getPullRequest=function(){return this._commitRange.getPullRequest()&&this._commitRange.getPullRequest().toJSON()};c.prototype.getId=function(){return"diff-"+this._projectKey+"-"+this._repoSlug+"-"+this._commitRange.getId()+"-"+this._path};c.prototype.toJSON=function(){var a=
{path:this._path.toString(),diffType:this._commitRange.getDiffType()};"EFFECTIVE"!==this._commitRange.getDiffType()&&(a.fromHash=this._commitRange.getSinceRevision()&&this._commitRange.getSinceRevision().getId(),a.toHash=this._commitRange.getUntilRevision().getId());var b=this._srcPath&&this._srcPath.toString();b&&(a.srcPath=b);return a};c.prototype.urlBuilder=function(){var a=g.default.rest().project(this._projectKey).repo(this._repoSlug),b=this._commitRange.getPullRequest();return b?a.pullRequest(b.getId()).comments():
a.commit(this._commitRange.getUntilRevision().getId()).comments()};d.prototype.getPullRequest=function(){return this._diffAnchor.getPullRequest()};d.prototype.getId=function(){var a=this._fileType?this._fileType+"-":"";return"line-"+this._diffAnchor.getId()+"-"+a+this._lineType+"-"+this._line};d.prototype.toJSON=function(){var a=p.default.extend(this._diffAnchor.toJSON(),{line:this._line,lineType:this._lineType});this._fileType&&(a.fileType=this._fileType);return a};d.prototype.urlBuilder=function(){return this._diffAnchor.urlBuilder()};
e.default={PullRequestAnchor:b,DiffAnchor:c,LineAnchor:d};h.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/comment-collection.js' */
define("bitbucket/internal/feature/comments/comment-collection",["module","exports","backbone","bitbucket/internal/feature/comments/comment-model"],function(e,a,c,d){Object.defineProperty(a,"__esModule",{value:!0});c=babelHelpers.interopRequireDefault(c);d=babelHelpers.interopRequireDefault(d);a.default=c.default.Collection.extend({initialize:function(a,b){b=b||{};this.urlBuilder=b.urlBuilder||function(){return b.anchor.urlBuilder()}},model:d.default,url:function(){return this.urlBuilder().build()}});
e.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/activity-comment-container.js' */
define("bitbucket/internal/feature/comments/activity-comment-container","module exports jquery lodash bitbucket/internal/feature/comments/comment-container bitbucket/internal/util/events".split(" "),function(e,b,d,f,g,h){Object.defineProperty(b,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(d);d=babelHelpers.interopRequireDefault(f);var c=babelHelpers.interopRequireDefault(g);babelHelpers.interopRequireDefault(h);b.default=c.default.extend({initialize:function(){c.default.prototype.initialize.apply(this,
arguments)},rootCommentListSelector:".pull-request-activity",events:d.default.assign({},c.default.prototype.events,{"focus .general-comment-form textarea":"onGeneralFormTextareaFocused"}),initDeleteButtons:function(){this.createDeleteDialog().attachTo(".general-comment-activity .delete",null,this.el)},insertCommentIntoList:function(a,b,d){if(b.is(this.rootCommentListSelector)){var e=b.children(":first");a.insertAfter(e)}else c.default.prototype.insertCommentIntoList.apply(this,arguments)},closeCommentForm:function(a){a.find(".error").remove();
a.is(".general-comment-form")?(this._unbindMarkupEditor(a),a.addClass("collapsed"),a.find("textarea").val("").removeClass("restored").removeAttr("title").blur(),this.deleteDraftComment(this.getDraftCommentFromForm(a))):c.default.prototype.closeCommentForm.apply(this,arguments)},getExtraCommentClasses:function(){return"general-comment-activity"},onGeneralFormTextareaFocused:function(a){a=(0,k.default)(a.target).closest(".general-comment-form");a.hasClass("collapsed")&&(this._bindMarkupEditor(a),a.removeClass("collapsed"))}});
e.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/comments.js' */
define("bitbucket/internal/feature/comments/comments","module exports jquery bitbucket/internal/feature/comments/activity-comment-context bitbucket/internal/feature/comments/anchors bitbucket/internal/feature/comments/comment-tips bitbucket/internal/feature/comments/diff-comment-context".split(" "),function(k,e,f,l,m,n,p){Object.defineProperty(e,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(f),q=babelHelpers.interopRequireDefault(l),h=babelHelpers.interopRequireDefault(m);f=babelHelpers.interopRequireDefault(n);
var r=babelHelpers.interopRequireDefault(p),c={CREATE_NEW:"create-new",REPLY_ONLY:"reply-only",READ:"read",NONE:"none"};e.default=g.default.extend({bindContext:function(a,d,b){if(a.data("comment-context"))throw Error("Duplicate comment context registered.");b=g.default.extend({el:a[0],anchor:d,allowCommenting:b&&b.commentMode===c.CREATE_NEW,showComments:b&&(b.commentMode===c.READ||b.commentMode===c.CREATE_NEW||b.commentMode===c.REPLY_ONLY)},b);d=d instanceof h.default.DiffAnchor?new r.default(b):
new q.default(b);a.data("comment-context",d);return d},updateContext:function(a){(a=a.data("comment-context"))&&a.checkForNewContainers()},unbindContext:function(a){(a=a.data("comment-context"))&&a.destroy()},commentMode:c},h.default,f.default);k.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/activity-comment-context.js' */
define("bitbucket/internal/feature/comments/activity-comment-context","module exports lodash bitbucket/internal/feature/comments/activity-comment-container bitbucket/internal/feature/comments/comment-context bitbucket/internal/util/events".split(" "),function(d,b,c,e,f,g){Object.defineProperty(b,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(c),k=babelHelpers.interopRequireDefault(e);c=babelHelpers.interopRequireDefault(f);var l=babelHelpers.interopRequireDefault(g);b.default=c.default.extend({findContainerElements:function(){return[this.el]},
_registerContainer:function(a,b,c){this._containers[a]=new k.default({name:a,context:this,el:b,anchor:c});return this._containers[a]},getActivityCommentContainer:function(){return this._containers[this.getAnchor().getId()]},restoreDrafts:function(){if(this.unrestoredDrafts.length){var a=this.getActivityCommentContainer();this.unrestoredDrafts=h.default.reject(this.unrestoredDrafts,a.restoreDraftComment.bind(a));if(this.unrestoredDrafts.length)l.default.once("bitbucket.internal.feature.pullRequestActivity.dataLoaded",
this.restoreDrafts.bind(this))}}});d.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/diff-comment-context.js' */
define("bitbucket/internal/feature/comments/diff-comment-context","module exports jquery lodash bitbucket/internal/feature/comments/anchors bitbucket/internal/feature/comments/comment-collection bitbucket/internal/feature/comments/comment-context bitbucket/internal/feature/comments/diff-comment-container bitbucket/internal/feature/file-content/diff-view-file-types bitbucket/internal/feature/file-content/diff-view-options bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/model/direction bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/shortcuts bitbucket/internal/util/time-i18n-mappings".split(" "),
function(v,l,m,w,x,y,z,A,B,C,D,E,F,G,H,I){Object.defineProperty(l,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(m),c=babelHelpers.interopRequireDefault(w);m=babelHelpers.interopRequireDefault(x);var J=babelHelpers.interopRequireDefault(y),h=babelHelpers.interopRequireDefault(z),r=babelHelpers.interopRequireDefault(A),t=babelHelpers.interopRequireDefault(B),K=babelHelpers.interopRequireDefault(C),n=babelHelpers.interopRequireDefault(D),u=babelHelpers.interopRequireDefault(E),p=
babelHelpers.interopRequireDefault(F),k=babelHelpers.interopRequireDefault(G),q=babelHelpers.interopRequireDefault(H),L=babelHelpers.interopRequireDefault(I),M=m.default.LineAnchor;l.default=h.default.extend({events:{"click .add-comment-trigger":"addCommentClicked","mouseenter .dummy-comment-trigger, .add-comment-trigger":"initTooltip"},initialize:function(){this._destroyables=[];c.default.bindAll(this,"onDiffChange","onFileCommentsResized","onCommentContainerDestroyed","onDiffViewOptionsChange");
this._initFileCommentButton=this._initFileCommentButton.bind(this,this.options.$toolbar);this._destroyables.push(p.default.chain().once("bitbucket.internal.feature.fileContent.requestHandled",this._initFileCommentButton));this.setDiffView(this.options.diffView);this._dvOptions=this.options.diffViewOptions||K.default;this._commentsById=this.options.lineComments&&c.default.keyBy(this.options.lineComments,k.default.dot("id"));this.$el.toggleClass("commentable",this.options.allowCommenting);this.toggleComments(!this._dvOptions.get("hideComments"));
this._dvOptions.on("change",this.onDiffViewOptionsChange);p.default.on("bitbucket.internal.comment.commentContainerDestroyed",this.onCommentContainerDestroyed);this.renderFileComments();h.default.prototype.initialize.apply(this,arguments);var a=this._getFileCommentContainer();a&&this._initializeFileCommentContainer(a)},_initFileCommentButton:function(a){a.find(".add-file-comment-trigger").on("click",this.addFileCommentClicked.bind(this)).tooltip({gravity:"ne"})},_initializeFileCommentContainer:function(a){a.on("resize",
this.onFileCommentsResized)},_getFileCommentContainer:function(){var a=this.options.anchor.getId();if(this.includesContainer(a))return this._containers[a]},_registerContainer:function(a,b,c){this._containers[a]=new r.default({anchor:c,context:this,el:b,name:a,urlBuilder:this.options.urlBuilder});return this._containers[a]},addFileCommentClicked:function(){this.forceShowingComments();this.addCommentContainerForFile().openNewCommentForm()},initTooltip:function(a){a=(0,f.default)(a.currentTarget);a.data("tooltip-inited")||
(a.data("tooltip-inited",!0),a.tooltip({gravity:"w",delayOut:200}).trigger("mouseenter"))},addCommentClicked:function(a){a.preventDefault();this.forceShowingComments();a=(0,f.default)(a.target).closest(".line");this.addCommentContainerForLine(a).openNewCommentForm()},forceShowingComments:function(){this._dvOptions.get("hideComments")&&this._dvOptions.set("hideComments",!1)},addCommentContainerForFile:function(){var a=this._getFileCommentContainer();if(a)return a;a=(0,f.default)(bitbucket.internal.feature.comments(this.options.anchor.toJSON()));
a.appendTo(this.$(".file-comments"));this.registerContainer(a[0],this.options.anchor);a=this._getFileCommentContainer();this._initializeFileCommentContainer(a);return a},addCommentContainerForLine:function(a,b){var c=this.getLineAnchor(a);a=a.lineType?a:this.diffView.getLineHandle(a);var d=c.getId(),g=this.options.urlBuilder;this.includesContainer(d)||(this._containers[d]=new r.default({anchor:c,collection:b?new J.default(b,{anchor:c,urlBuilder:g}):void 0,context:this,lineHandle:a,name:d,showComments:!this._dvOptions.get("hideComments"),
urlBuilder:g}));return this._containers[d]},destroy:function(a){a||(this.diffView&&this.diffView.off("change",this.onDiffChange),this.$el.removeClass("commentable"),this._dvOptions.off("change",this.onDiffViewOptionsChange),this._dvOptions=null,p.default.off("bitbucket.internal.comment.commentContainerDestroyed",this.onCommentContainerDestroyed),c.default.invokeMap(this._destroyables,"destroy"),this._destroyables=null);h.default.prototype.destroy.apply(this,arguments)},findContainerElements:function(){return this.$(".line .comment-box, .file-comments \x3e .comment-container")},
getAnchor:function(a){return(0,f.default)(a).closest(".file-comments").length?this.options.anchor:this.getLineAnchor((0,f.default)(a).closest(".line"))},getGutterId:function(){return this.options.allowCommenting?"add-comment-trigger":null},getLineAnchor:function(a){a=a.lineType?a:this.diffView.getLineHandle(a);return new M(this.options.anchor,a.lineType,a.lineNumber,a.fileType)},renderFileComments:function(){var a=this.options.anchor.getPullRequest();this.$el.prepend(bitbucket.internal.feature.fileComments({comments:this.options.fileComments,
pullRequest:a,customMapping:L.default.commentEditedAge}))},addAnchoredComments:function(){var a=this,b=this.diffView,e=this.options.lineComments;e&&e[0]&&!e[0].anchor||c.default.forEach(function(a){return c.default.chain(a).filter(function(a){return!(!a.anchor||!a.anchor.line)}).groupBy(function(a){return(a.anchor.fileType||"")+a.anchor.line}).value()}(e),function(c){var d=c[0].anchor;(d=b.getLineHandle({fileType:d.fileType,lineType:d.lineType,lineNumber:d.line}))&&a.addCommentContainerForLine(d,
c)})},onFileCommentsResized:function(){this.trigger("fileCommentsResized")},onDiffChange:function(a){if("INITIAL"===a.type||"INSERT"===a.type){"INITIAL"===a.type&&this.addAnchoredComments();var b=this.diffView,e=this;a.eachLine(function(d){var g=d.line;var h=!d.attributes.expanded&&"MARKER"!==d.line.conflictMarker&&e.options.allowCommenting&&"INITIAL"===a.type?bitbucket.internal.feature.addCommentTrigger():bitbucket.internal.feature.dummyCommentTrigger({relevantContextLines:e.options.relevantContextLines});
d.handles.FROM&&b.setGutterMarker(d.handles.FROM,e.getGutterId(),(0,f.default)(h)[0]);d.handles.TO&&d.handles.FROM!==d.handles.TO&&b.setGutterMarker(d.handles.TO,e.getGutterId(),(0,f.default)(h)[0]);g.commentIds&&(g=c.default.chain(g.commentIds).map(k.default.lookup(e._commentsById)).filter(c.default.identity).value(),g.length&&e.addCommentContainerForLine(d.handles.FROM||d.handles.TO,g));e.unrestoredDrafts.length&&"INITIAL"===a.type&&c.default.chain(d.handles).values().compact().uniq().forEach(e.restoreDraftsForLine.bind(e)).value()})}},
onCommentContainerDestroyed:function(a){var b=this._getFileCommentContainer();b&&a===b.$el&&c.default.defer(this.onFileCommentsResized.bind(this))},onDiffViewOptionsChange:function(a){"hideComments"===a.key&&this.toggleComments(!a.value)},restoreDraftsForLine:function(a){var b=f.default.extend({line:a.lineNumber,lineType:a.lineType},{fileType:a.fileType});b=this.getUnrestoredDraftsForLine(b);b.length&&(a=this.addCommentContainerForLine(a),this._restoreDraftsToContainer(a,b),a.destroyIfEmpty())},_restoreDraftsToContainer:function(a,
b){c.default.forEach(b,a.restoreDraftComment.bind(a));this.unrestoredDrafts=c.default.difference(this.unrestoredDrafts,b)},restoreDrafts:function(){var a=this;this.options.allowCommenting||(this.unrestoredDrafts=c.default.filter(this.unrestoredDrafts,function(b){return(b.id||b.parent)&&(a.$el.is(".file-comment-activity")||b.anchor.line)}));this.restoreDraftFileComments()},restoreDraftFileComments:function(){var a=c.default.reject(this.unrestoredDrafts,k.default.dot("anchor.line"));a.length&&this._restoreDraftsToContainer(this.addCommentContainerForFile(),
a)},getUnrestoredDraftsForLine:function(a){var b=c.default.flow(this.unifyAnchorFileTypes,k.default.partialRight(c.default.pick,"fileType","line","lineType"));a=c.default.isEqual.bind(c.default,b(a));b=c.default.flow(k.default.dot("anchor"),b,a);return c.default.filter(this.unrestoredDrafts,b)},unifyAnchorFileTypes:function(a){var b=a.lineType===n.default.ADDED&&a.fileType===t.default.TO;return(a.lineType===n.default.CONTEXT||a.lineType===n.default.REMOVED)&&a.fileType===t.default.FROM||b?c.default.omit(a,
"fileType"):a},clarifyAmbiguousDraftProps:function(a){a=h.default.prototype.clarifyAmbiguousDraftProps.call(this,a);a.anchor=this.unifyAnchorFileTypes(a.anchor);return a},setDiffView:function(a){this.diffView&&this.diffView.off("internal-change",this.onDiffChange);if(this.diffView=a)this.diffView.on("internal-change",this.onDiffChange),this._destroyables.push({destroy:q.default.bind("addFileComment",this.addFileCommentClicked.bind(this))}),this._destroyables.push({destroy:q.default.bind("requestTertiaryNext",
a._scrollToComment.bind(a,u.default.DOWN))}),this._destroyables.push({destroy:q.default.bind("requestTertiaryPrevious",a._scrollToComment.bind(a,u.default.UP))})},toggleComments:function(a){this.$el.toggleClass("hide-comments",!a);c.default.invokeMap(this._containers,"toggleComment",a)}});v.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-badge', location = '/static/bitbucket/internal/feature/commit/commit-badge/commit-badge.js' */
define("bitbucket/internal/feature/commit/commit-badge/commit-badge",["module","exports","jquery"],function(b,a,c){Object.defineProperty(a,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(c);a.default={create:function(a,b){return(0,d.default)(bitbucket.internal.feature.commit.commitBadge.oneline({commit:a,repository:b,withAvatar:!0}))}};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-badge', location = '/static/bitbucket/internal/feature/commit/commit-badge/commit-badge.soy' */
// This file was automatically generated from commit-badge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.commit.commitBadge.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.commit == 'undefined') { bitbucket.internal.feature.commit = {}; }
if (typeof bitbucket.internal.feature.commit.commitBadge == 'undefined') { bitbucket.internal.feature.commit.commitBadge = {}; }


bitbucket.internal.feature.commit.commitBadge.oneline = function(opt_data, opt_ignored) {
  return '<div class="commit-badge-oneline">' + ((opt_data.withAvatar) ? bitbucket.internal.widget.avatar({person: opt_data.commit.author, size: 'small'}) : '') + bitbucket.internal.feature.commit.commitBadge.commitSummary({authorNameContent: '' + ((opt_data.linkAuthor == false) ? '<span class="commit-author" title="' + soy.$$escapeHtml(opt_data.commit.author.displayName || opt_data.commit.author.name) + '">' + soy.$$escapeHtml(soy.$$truncate(opt_data.commit.author.displayName || opt_data.commit.author.name, 100, true)) + '</span>' : bitbucket.internal.widget.userLink({user: opt_data.commit.author, extraClasses: 'commit-author'})), commitLinkContent: '' + bitbucket.internal.feature.commit.link(opt_data) + ((opt_data.commit.parents.length > 1) ? bitbucket.internal.widget.lozenge.merge({abbreviated: opt_data.abbreviatedMerge}) : '')}) + bitbucket.internal.widget.date.shortAge({date: opt_data.commit.authorTimestamp}) + ((opt_data.includeCommentCount && opt_data.commit.properties && opt_data.commit.properties.commentCount) ? bitbucket.internal.feature.commentCount({count: opt_data.commit.properties.commentCount, size: 'tiny'}) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commit.commitBadge.oneline.soyTemplateName = 'bitbucket.internal.feature.commit.commitBadge.oneline';
}


bitbucket.internal.feature.commit.commitBadge.commitSummary = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0} committed {1}',opt_data.authorNameContent,opt_data.commitLinkContent));
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commit.commitBadge.commitSummary.soyTemplateName = 'bitbucket.internal.feature.commit.commitBadge.commitSummary';
}


bitbucket.internal.feature.commit.commitBadge.detailed = function(opt_data, opt_ignored) {
  return '<div class="commit-badge-detailed">' + bitbucket.internal.feature.commit.commitBadge.oneline({commit: opt_data.commit, repository: opt_data.repository, linkAuthor: opt_data.linkAuthor, abbreviatedMerge: true}) + '<div class="commit-message">' + soy.$$escapeHtml(soy.$$truncate(opt_data.commit.message, opt_data.maxMessageLength ? opt_data.maxMessageLength : 150, true)) + '</div></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commit.commitBadge.detailed.soyTemplateName = 'bitbucket.internal.feature.commit.commitBadge.detailed';
}


bitbucket.internal.feature.commit.commitBadge.message = function(opt_data, opt_ignored) {
  var output = '';
  var parsedCommitMessage__soy56 = require('bitbucket/internal/util/parse-commit-message').splitIntoSubjectAndBody(opt_data.commit.message);
  output += '<div class="commit-message"><span class="commit-message-subject">' + soy.$$escapeHtml(soy.$$truncate(parsedCommitMessage__soy56.subject, 400, true)) + '</span>' + ((parsedCommitMessage__soy56.body.length > 0) ? '<span class="commit-message-body">' + soy.$$escapeHtml(soy.$$truncate(parsedCommitMessage__soy56.body, 400, true)) + '</span>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commit.commitBadge.message.soyTemplateName = 'bitbucket.internal.feature.commit.commitBadge.message';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-list', location = '/static/bitbucket/internal/feature/commit/commit-list/commit-list.soy' */
// This file was automatically generated from commit-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.commit.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.commit == 'undefined') { bitbucket.internal.widget.commit = {}; }


bitbucket.internal.widget.commit.commitList = function(opt_data, opt_ignored) {
  return '<ul class="commit-list">' + soy.$$filterNoAutoescape(opt_data.content) + '</ul>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.commit.commitList.soyTemplateName = 'bitbucket.internal.widget.commit.commitList';
}


bitbucket.internal.widget.commit.commitListItem = function(opt_data, opt_ignored) {
  return '<li class="commit-list-item' + ((opt_data.isSelected) ? ' selected' : '') + ((opt_data.isFocused) ? ' focused' : '') + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"' + ((opt_data.extraAttributes) ? aui.renderExtraAttributes(opt_data) : '') + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</li>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.commit.commitListItem.soyTemplateName = 'bitbucket.internal.widget.commit.commitListItem';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-content-modes', location = '/static/bitbucket/internal/model/file-content-modes.js' */
define("bitbucket/internal/model/file-content-modes",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={SOURCE:"source",DIFF:"diff"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:keyboard-controller', location = '/static/bitbucket/internal/widget/keyboard-controller.js' */
define("bitbucket/internal/widget/keyboard-controller",["module","exports","aui","jquery"],function(x,r,B,C){function t(b,d){if(!(this instanceof t))return new t(b,d);var a=(0,e.default)(b),g;a.on("keydown",g=function(a){a.keyCode in d&&(d[a.keyCode](a)||a.preventDefault())});this.destroy=function(){a.off("keydown",g)};return this}function m(b,d){function a(a){a.focus().addClass(d.focusedClass)}d=e.default.extend({},m.defaults,d);var g={};g[v.default.keyCode.TAB]=function(g){var n=g.target,f=(0,e.default)("a:visible, :input:visible:enabled, :checkbox:visible:enabled, :radio:visible:enabled, [tabindex]",
b).not("[tabindex\x3d-1]").filter(function(){return"hidden"!==(0,e.default)(this).css("visibility")}),p=f.last(),q=f.first();f.removeClass(d.focusedClass);if(g.shiftKey&&n===q[0]){if(!d.wrapAround)return!0;a(p)}else if(g.shiftKey||n!==p[0])g.shiftKey?a(f.eq(f.index(n)-1)):a(f.eq(f.index(n)+1));else{if(!d.wrapAround)return!0;a(q)}};return new t(b,g)}function y(b,d,a){function g(c){do{var b=c.find("\x3e:first-child"),e=c.next();c=b.length?b:e.length?e:c.parentsUntil(f[0]).next().first()}while(c.length&&
!c.is(a.itemSelector));return c}function r(c){do{var b=c.prev();if(b.length){for(;(c=b.find("\x3e:last-child")).length;)b=c;c=b}else c=c.parent(),c[0]===f[0]&&(c=(0,e.default)())}while(c.length&&!c.is(a.itemSelector));return c}function n(c){return function A(b){var d=(0,e.default)(a.itemSelector,f),k=d.filter(function(){return(0,e.default)(this).hasClass(a.focusedClass)}),l=!1;if(k.length)var h=a.adjacentItems?k[c](a.itemSelector):"next"===c?g(k):r(k);else if("next"===c)h=d.first();else if(a.wrapAround)h=
d.last();else return;u=!0;if(!h.length){if("next"===c&&a.requestMore&&!m){if(!z){u=!1;if(h=a.requestMore()){z=!0;h.done(function(a){m=a;u||A(b)}).always(function(){u=z=!1});return}m=!0;A(b);return}u=!1;return}if(a.wrapAround)l=!0,h=d["next"===c?"first":"last"]();else{if(a.onFocusLastItem&&"next"===c)a.onFocusLastItem();return}}k.removeClass(a.focusedClass);h.addClass(a.focusedClass);d=h[c]();l=!l&&d.length?d:h;d=document.activeElement;a.focusIntoView&&d?(k=l.attr("tabindex"),l.attr("tabindex","0"),
l.focus(),d.focus(),null==k?l.removeAttr("tabindex"):l.attr("tabindex",k)):h[0].scrollIntoView(!1);q.fire(h,b)}}a=e.default.extend({},y.defaults,a);var f=(0,e.default)(d),p=e.default.Callbacks(),q=e.default.Callbacks();a.onSelect&&p.add(a.onSelect);a.onFocus&&q.add(a.onFocus);var m=!1,z=!1,u=!1,w={};d=w[v.default.keyCode.UP]=n("prev");var x=w[v.default.keyCode.DOWN]=n("next");w[v.default.keyCode.ENTER]=function(c){var b=(0,e.default)(a.itemSelector,f).filter(function(){return(0,e.default)(this).hasClass(a.focusedClass)});
b.length&&p.fire(b,c)};b=new t(b,w);b.setListElement=function(a){f=(0,e.default)(a)};b.blur=function(){(0,e.default)(a.itemSelector,f).removeClass(a.focusedClass)};b.focus=function(){q.add.apply(q,arguments);return this};b.select=function(){p.add.apply(p,arguments);return this};b.moveToNext=x;b.moveToPrev=d;return b}Object.defineProperty(r,"__esModule",{value:!0});var v=babelHelpers.interopRequireDefault(B),e=babelHelpers.interopRequireDefault(C);m.defaults={focusedClass:"item-focused",wrapAround:!0};
y.defaults={itemSelector:"li",focusedClass:"item-focused",wrapAround:!1,adjacentItems:!0,requestMore:void 0,onFocus:void 0,onSelect:void 0};r.default={KeyboardController:t,TabKeyboardController:m,ListKeyboardController:y};x.exports=r["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-selector', location = '/static/bitbucket/internal/feature/file-content/commit-selector/commit-selector.js' */
define("bitbucket/internal/feature/file-content/commit-selector/commit-selector","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/model/path bitbucket/internal/util/ajax bitbucket/internal/util/events bitbucket/internal/widget/keyboard-controller bitbucket/internal/widget/paged-scrollable".split(" "),function(w,h,k,x,y,z,A,B,C,D,E){function c(a){var b=this,d=a.id,f=this._$selectorButton=(0,e.default)(a.buttonEl);this._$selectorButtonText=f.find(".aui-button-label");this._id=
d;this._scrollPaneSelector="#inline-dialog-"+d+" .commit-selector";this._listSelector=this._scrollPaneSelector+" \x3e ul";this._scrollable=null;var c=!1,g=void 0,m=function(a){a.keyCode===l.default.keyCode.ESCAPE&&(b.hide(),a.preventDefault())},p=function(a){b.isButtonEnabled()&&b.show();a.preventDefault()},n=function(a){b.hide();a.preventDefault()},h=this._itemClicked=function(a){var d=(0,e.default)(a.currentTarget);if(!d.hasClass("disabled")){b.hide();var c=d.children("a").attr("data-id");c=b._visibleCommits[c];
var f=b._preloadItems[d.index()],m=f&&f.commitRange,g=null,n=null;q.default.get(c,"properties.change")&&(g=c.properties.change.path?new r.default(c.properties.change.path):null,n=c.properties.change.srcPath?new r.default(c.properties.change.srcPath):null);(0,e.default)("li",b._listSelector).removeClass("selected");d.addClass("selected");b._renderButton(c,f);t.default.trigger("bitbucket.internal.feature.commitselector.itemSelected",b,{commitJSON:c,commitRangeJSON:m,pullRequest:b._pullRequest,path:g,
sincePath:n})}a.preventDefault()},k=function(){return b.hide()};this.resetDialog=function(){b.hide();b._scrollable&&b._scrollable.reset();(0,e.default)(document).off("keyup",m);g&&g.off("click","li.commit-list-item",h);c=!1};this._inlineDialog=l.default.InlineDialog(f,d,function(a,d,l){c?l():(c=!0,g=a.html(bitbucket.internal.feature.fileContent.commitSelector()),g.on("click","li.commit-list-item",h),l(),b._scrollable=b._createScrollable(),b._visibleCommits={},setTimeout(function(){a.find(".spinner-container").spin();
b._scrollable.init()},0),b._initialiseKeyboardNavigation(),b._initialiseMouseNavigation());f.off("click",p);f.on("click",n);(0,e.default)(document).on("keyup",m);(0,e.default)(window).on("scroll",k)},{hideDelay:null,width:483,noBind:!0,hideCallback:function(){(0,e.default)(window).off("scroll",k);(0,e.default)(document).off("keyup",m);f.off("click",n);f.on("click",p);(0,e.default)(document.activeElement).closest(b._scrollPaneSelector).length&&document.activeElement.blur()}});f.on("click",p);this._events=
t.default.chain().on("bitbucket.internal.feature.commitselector.itemSelected",this.hide).on("bitbucket.internal.page.*.revisionRefChanged",this.resetDialog).on("bitbucket.internal.page.*.pathChanged",this.resetDialog)}function F(a,b){q.default.forEach(a,function(a){b[a.id]=a})}Object.defineProperty(h,"__esModule",{value:!0});var l=babelHelpers.interopRequireDefault(k),e=babelHelpers.interopRequireDefault(x),q=babelHelpers.interopRequireDefault(y),u=babelHelpers.interopRequireDefault(z),r=babelHelpers.interopRequireDefault(A),
v=babelHelpers.interopRequireDefault(B),t=babelHelpers.interopRequireDefault(C);k=babelHelpers.interopRequireDefault(D);var G=babelHelpers.interopRequireDefault(E),H=k.default.ListKeyboardController;c.prototype.init=function(a){this._commitRange=a.commitRange;this._followRenames=a.followRenames;this._headRevisionRef=a.headRevisionReference;this._itemTemplate=a.itemTemplate;this._itemTitle=a.itemTitle;this._itemUrl=a.itemUrl;this._itemExtraClasses=a.itemExtraClasses;this._mode=a.mode;this._path=a.path;
this._preloadItems=a.preloadItems||[];this._pullRequest=a.pullRequest;this._selectedCommit=a.selectedCommit;this._updateButton=a.updateButton;this._lastPageMessage=a.lastPageMessage||"No more history";this._includesMerge=a.includesMerge||!1;this._renderButton(a.selectedCommit,a.selectedItem)};c.prototype.destroy=function(){this.resetDialog();this._events.destroy();this._inlineDialog.remove();this._resultsKeyboardController&&(this._resultsKeyboardController.destroy(),
this._resultsKeyboardController=null)};c.prototype.show=function(){this._inlineDialog.show()};c.prototype.hide=function(){this._inlineDialog.hide()};c.prototype._createScrollable=function(){var a=new G.default(this._scrollPaneSelector,{bufferPixels:0,pageSize:25,paginationContext:"file-history",preventOverscroll:!0});a.requestData=this.requestData.bind(this);a.attachNewContent=this.attachNewContent.bind(this);var b=a.onFirstDataLoaded;a.onFirstDataLoaded=function(){return b.apply(this,arguments)};
return a};c.prototype.requestData=function(a,b){this._inlineDialog.find(".spinner-container").spin();var d=void 0;d=this._pullRequest?u.default.rest().currentRepo().pullRequest(this._pullRequest.id).commits().withParams({start:a,limit:b,avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})}):u.default.rest().currentRepo().commits().withParams({followRenames:this._followRenames,path:this._path.toString(),until:this._headRevisionRef.getId(),start:a,limit:b,avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})});
return v.default.rest({url:d.build()}).done(function(a){return 0<a.size?a:v.default.rest({url:d.withParams({followRenames:!1}).build()})})};c.prototype._renderItem=function(a,b,d){return bitbucket.internal.widget.commit.commitListItem({content:this._itemTemplate({commit:a,href:this._itemUrl(a,this)}),isFocused:b,isSelected:d,extraClasses:this._itemExtraClasses&&this._itemExtraClasses(a).join(" "),title:this._itemTitle?this._itemTitle(a.displayId):""})};c.prototype.attachNewContent=function(a){var b=
this;F(a.values,this._visibleCommits);var d=this._selectedCommit&&this._selectedCommit.id,c=a.values.map(function(c){return b._renderItem(c,d===c.id&&0===a.start,d===c.id)}),h=this._preloadItems&&0===a.start?this._preloadItems.map(function(a){var c={href:a.href,icon:a.icon,messageHtml:a.messageHtml,size:a.size},d=["preload-item"];a.disabled&&d.push("disabled");b._itemExtraClasses&&(d=d.concat(b._itemExtraClasses(a)));return bitbucket.internal.widget.commit.commitListItem({isSelected:a.selected,extraClasses:d.join(" "),
content:bitbucket.internal.feature.fileContent.commitSelectorUrlItem(c)})}):null,g=(0,e.default)(this._listSelector);g.append(h).append(c);c=(0,e.default)(this._scrollPaneSelector).children(".spinner-container");c.spinStop();a.isLastPage&&(g.append(bitbucket.internal.feature.fileContent.commitSelectorNoMoreResults({lastPageMessage:this._lastPageMessage})),c.remove())};c.prototype.isButtonEnabled=function(){return!this._$selectorButton.prop("disabled")};c.prototype.getSelectedCommit=function(){if(this._visibleCommits&&
this._selectedCommit&&this._selectedCommit.id)return this._visibleCommits[this._selectedCommit.id]};c.prototype.refreshCommit=function(a,b){var c=this._visibleCommits[a];if(c)return c=this._visibleCommits[a]=babelHelpers.extends({},c,b),b=(0,e.default)(this._listSelector).find(".commit-selector-item-message[data-id\x3d'"+a+"']").parent(),c=this._renderItem(c,b.hasClass("focused"),b.hasClass("selected")),b.replaceWith(c),this._visibleCommits[a];console.warn("Unable to refresh commit with id "+a)};
c.prototype._initialiseKeyboardNavigation=function(){var a=this,b=(0,e.default)(a._scrollPaneSelector);a._resultsKeyboardController&&a._resultsKeyboardController.destroy();a._resultsKeyboardController=new H(a._$selectorButton,a._listSelector,{focusedClass:"focused",itemSelector:"li.commit-list-item",adjacentItems:!0,requestMore:function(){var b=a._scrollable.loadAfter();return b&&b.then(function(a){return a.isLastPage})},onSelect:function(b){a._inlineDialog.is(":visible")?b.click():a._$selectorButton.click()},
onFocusLastItem:function(){b.scrollTop(b[0].scrollHeight)}})};c.prototype._initialiseMouseNavigation=function(){var a=(0,e.default)(this._listSelector);a.on("mouseenter","li",function(b){b=(0,e.default)(b.currentTarget);b.find(".focused").length||(a.find(".focused").removeClass("focused"),b.addClass("focused"))})};c.prototype._renderButton=function(a,b){if(this._updateButton)if(a)this._$selectorButton.children().first().replaceWith(bitbucket.internal.feature.fileContent.singleCommitIcon()),this._$selectorButtonText.text(a.message);
else if(b)b.icon&&this._$selectorButton.children().first().replaceWith(b.icon),this._$selectorButton.toggleClass("commit-selector-large","large"===b.size),this._$selectorButtonText.html(b.messageHtml);else throw Error("PreloadItems must provide a selectionContent HTML string to render into the dropdown button when they are selected");};h.default=c;w.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-selector', location = '/static/bitbucket/internal/feature/file-content/commit-selector/commit-selector.soy' */
// This file was automatically generated from commit-selector.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }


bitbucket.internal.feature.fileContent.allCommitsIcon = function(opt_data, opt_ignored) {
  return '<img class="commit-icon" width="16" height="20" src="' + soy.$$escapeHtml('/s/-1609296852/cad3c23/10/1.0/_/download/resources/com.atlassian.bitbucket.server.bitbucket-web:commit-selector/icons/icon-all-changes.svg') + '" alt="' + soy.$$escapeHtml('A stack of all changes') + '" />';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.allCommitsIcon.soyTemplateName = 'bitbucket.internal.feature.fileContent.allCommitsIcon';
}


bitbucket.internal.feature.fileContent.commitSelector = function(opt_data, opt_ignored) {
  return '<div class="commit-selector">' + bitbucket.internal.widget.commit.commitList({content: ''}) + '<div class="spinner-container"/></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.commitSelector.soyTemplateName = 'bitbucket.internal.feature.fileContent.commitSelector';
}


bitbucket.internal.feature.fileContent.commitSelectorNoMoreResults = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<li class="no-more-results">' + soy.$$escapeHtml(opt_data.lastPageMessage) + '</li>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.commitSelectorNoMoreResults.soyTemplateName = 'bitbucket.internal.feature.fileContent.commitSelectorNoMoreResults';
}


bitbucket.internal.feature.fileContent.commitSelectorItemAuthor = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href ? opt_data.href : '') + '" class="commit-selector-item-author" data-id="' + soy.$$escapeHtml(opt_data.commit.id) + '">' + ((opt_data.commit.message) ? bitbucket.internal.widget.avatar({person: opt_data.commit.author, size: 'small'}) + bitbucket.internal.feature.commit.commitBadge.detailed({commit: opt_data.commit, linkAuthor: false, maxMessageLength: 90, repository: opt_data.repository}) : '<span class="icon"></span>' + soy.$$escapeHtml(opt_data.commit.displayId)) + '</a>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.commitSelectorItemAuthor.soyTemplateName = 'bitbucket.internal.feature.fileContent.commitSelectorItemAuthor';
}


bitbucket.internal.feature.fileContent.commitSelectorItemMessage = function(opt_data, opt_ignored) {
  return ((opt_data.beforeContent) ? soy.$$filterNoAutoescape(opt_data.beforeContent) : '') + '<a href="' + soy.$$escapeHtml(opt_data.href ? opt_data.href : '') + '" class="commit-selector-item-message" data-id="' + soy.$$escapeHtml(opt_data.commit.id) + '">' + ((opt_data.commit.message) ? bitbucket.internal.feature.fileContent.singleCommitIcon(null) + '<div class="commit-selector-details' + ((new Blob([opt_data.commit.message]).size > 50) ? ' commit-preview-trigger" data-commit-message="' + soy.$$escapeHtml(opt_data.commit.message) + '" data-commit-preview-gravity="w' : '') + '">' + bitbucket.internal.feature.commit.commitBadge.message(opt_data) + bitbucket.internal.feature.commit.commitBadge.oneline({commit: opt_data.commit, withAvatar: true, linkAuthor: false, abbreviatedMerge: true, includeCommentCount: true}) + '</div>' : '<span class="icon"></span>' + soy.$$escapeHtml(opt_data.commit.displayId)) + '</a>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.commitSelectorItemMessage.soyTemplateName = 'bitbucket.internal.feature.fileContent.commitSelectorItemMessage';
}


bitbucket.internal.feature.fileContent.commitSelectorUrlItem = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '" class="commit-selector-item-message' + ((! opt_data.size || opt_data.size == 'small') ? ' commit-selector-item-message-thin' : '') + '">' + ((opt_data.icon) ? soy.$$filterNoAutoescape(opt_data.icon) : bitbucket.internal.feature.fileContent.singleCommitIcon(null)) + '<div class="commit-selector-details">' + soy.$$filterNoAutoescape(opt_data.messageHtml) + '</div></a>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.commitSelectorUrlItem.soyTemplateName = 'bitbucket.internal.feature.fileContent.commitSelectorUrlItem';
}


bitbucket.internal.feature.fileContent.singleCommitIcon = function(opt_data, opt_ignored) {
  return '' + aui.icons.icon({extraClasses: 'commit-icon', icon: 'commit', iconFontSet: 'devtools', size: 'small', useIconFont: true});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.singleCommitIcon.soyTemplateName = 'bitbucket.internal.feature.fileContent.singleCommitIcon';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:content-tree-node-types', location = '/static/bitbucket/internal/model/content-tree-node-types.js' */
define("bitbucket/internal/model/content-tree-node-types",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={DIRECTORY:"DIRECTORY",FILE:"FILE",SUBMODULE:"SUBMODULE"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.plugins.atlassian-chaperone:internals', location = '/internals/syncing.js' */
var Chaperone={_internal:{}};Chaperone._internal.syncing=(function(){function a(c,d){return(d||AJS.$).ajax({url:AJS.contextPath()+"/rest/chaperone/1/chaperone/"+c})}function b(c,e,d){return(d||AJS.$).ajax({url:AJS.contextPath()+"/rest/chaperone/1/chaperone/"+c,type:"PUT",data:{json:e}})}return{syncToServer:b,syncFromServer:a}})();;
;
/* module-key = 'com.atlassian.plugins.atlassian-chaperone:feature-discovery', location = '/feature-discovery/feature-discovery.js' */
(function(j,h,n,f,g){var l=f.syncFromServer;var i=f.syncToServer;var c=h.Callbacks();var k=n.once(function(){h(document).on("ajaxStop",function(){c.fire()})});var b=h.Callbacks();function m(){n.defer(b.fire)}var e=n.once(function(){h(window).on("scroll resize",m)});function a(p){var q=h.Deferred();function r(){var s=h(p);if(s.length){q.resolve(s);c.remove(r)}}c.add(r);r();return q}function d(t,v,q,s){var p=h.Callbacks();var r=h.Callbacks();var w=h.Callbacks();function u(x){var F;var H="feature-discovery-"+t+(v.id?"_"+v.id:"");function A(J){return function(){x.off(".chaperone");F.open=false;c.remove(z);b.remove(C);if(J){J.fire()}}}function z(){if(!x.is(":visible")){A()()}}var I=A(p);var E={};if(v.width){E.style="width: "+v.width+"px"}if(!x.attr("aria-controls")){x.attr("aria-controls",H);x.on("click.chaperone",A(w))}h(document.body).append(aui.inlineDialog2.inlineDialog2({id:H,content:chaperone.featureDiscovery.content({step:v,paging:q}),extraClasses:"feature-discovery-dialog "+H+(v.extraClasses?" "+v.extraClasses:""),persistent:!!v.persistent,alignment:v.alignment||(v.gravity||"s").replace(/[nswe]/g,function(J){return{n:"bottom middle",s:"top middle",e:"left middle",w:"right middle"}[J]}),extraAttributes:E}));F=document.getElementById(H);var G=h(F);var y=".feature-discovery-action";var D=".feature-discovery-next";var B=".feature-discovery-close";if(v.action&&v.action.click){G.on("click",y,v.action.click)}G.on("click",y,A(w));G.on("click",D,A(r));G.on("click",B,I);function C(){if(F._auiAlignment&&F._auiAlignment._auiTether){F._auiAlignment._auiTether.position()}}b.add(C);c.add(z);F.open=true}return{showWhenTargetVisible:function(){return a(v.selector).then(u)},on:function(x,y){switch(x){case"close":p.add(y);break;case"next":r.add(y);break;case"action":w.add(y);break}}}}function o(p){if(!p){return false}return Object.keys(p).every(function(q){return p[q].isDismissed})}g.registerFeature=function(r,p,q){q=q||{};var t=l(r).pipe(function(u){u=u||{};if(u.isAllDismissed||o(u.stepInfoById)){return h.Deferred().reject()}k();e();return u});function s(x,v,u){var w=v.stepInfoById[x.id||x.selector];switch(q.dismissalMode){case"progressive":w.isDismissed=true;i(r,JSON.stringify(v));break;default:if(u&&!v.isAllDismissed){v.isAllDismissed=true;i(r,JSON.stringify(v))}break}}n.reduce(p,function(v,u){return v.then(function(B){var H=B.stepInfoById=B.stepInfoById||{};var A=u.id||u.selector;var w=H[A]=H[A]||{};if(w.isDismissed){return v}var F=p.length;var z=n.indexOf(p,u);var x=z<F-1;var C=new d(r,u,{numSteps:F,stepIndex:z,hasNext:x},q);var G=h.Deferred();C.on("close",G.reject);C.on("next",n.bind(G.resolve,G,B));C.on("action",n.bind(G.resolve,G,B));var D=C.showWhenTargetVisible();var E=n.bind(s,null,u,B,!x);var y=n.bind(s,null,u,B,"all");if(u.once){D.then(E)}else{C.on("close",y);C.on("next",E);C.on("action",E)}return G})},t)};g.checkFeatureVisibility=function(){c.fire()};g.checkFeatureAlignment=function(){b.fire()}})(AJS,AJS.$,_,Chaperone._internal.syncing,Chaperone);;
;
/* module-key = 'com.atlassian.plugins.atlassian-chaperone:feature-discovery', location = '/feature-discovery/feature-discovery.soy' */
// This file was automatically generated from feature-discovery.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace chaperone.featureDiscovery.
 */

if (typeof chaperone == 'undefined') { var chaperone = {}; }
if (typeof chaperone.featureDiscovery == 'undefined') { chaperone.featureDiscovery = {}; }


chaperone.featureDiscovery.content = function(opt_data, opt_ignored) {
  return '' + ((opt_data.step.title) ? '<h2>' + soy.$$escapeHtml(opt_data.step.title) + '</h2>' : '') + ((opt_data.step.content) ? soy.$$filterNoAutoescape(opt_data.step.content) : '') + aui.form.form({action: '', content: '' + ((opt_data.step.action && opt_data.step.action.text) ? aui.buttons.button(soy.$$augmentMap(opt_data.step.action, {extraClasses: aui.renderExtraClasses(opt_data.step.action) + ' feature-discovery-action', extraAttributes: aui.renderExtraAttributes(opt_data.step.action) + ' type="button"'})) : '') + ((opt_data.paging && opt_data.paging.hasNext) ? aui.buttons.button({text: 'Next', type: opt_data.step.action && opt_data.step.action.text ? 'link' : null, extraClasses: 'feature-discovery-next', extraAttributes: {type: 'button'}}) : '') + aui.buttons.button(soy.$$augmentMap(opt_data.step.close, {text: opt_data.step.close && opt_data.step.close.text ? opt_data.step.close.text : 'Close', type: opt_data.step.action && opt_data.step.action.text || opt_data.paging && opt_data.paging.hasNext ? 'link' : null, extraClasses: aui.renderExtraClasses(opt_data.step.close) + ' feature-discovery-close', extraAttributes: aui.renderExtraAttributes(opt_data.step.close) + ' type="button"'})) + ((opt_data.step.moreInfo) ? aui.buttons.button(soy.$$augmentMap(opt_data.step.moreInfo, {text: opt_data.step.moreInfo.text ? opt_data.step.moreInfo.text : 'Learn more', type: 'link'})) : '') + ((opt_data.paging && opt_data.paging.numSteps > 1) ? '<span class="multi-step-trigger">' + soy.$$escapeHtml(AJS.format('{0}/{1}',opt_data.paging.stepIndex + 1,opt_data.paging.numSteps)) + '</span>' : '')});
};
if (goog.DEBUG) {
  chaperone.featureDiscovery.content.soyTemplateName = 'chaperone.featureDiscovery.content';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:chaperone-feature-discovery', location = '/static/lib/chaperone-AMD.js' */
define("chaperone",function(){return Chaperone});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-options', location = '/static/bitbucket/internal/feature/file-content/diff-view-options.js' */
define("bitbucket/internal/feature/file-content/diff-view-options","module exports jquery lodash bitbucket/internal/util/client-storage bitbucket/internal/util/events".split(" "),function(k,d,l,m,n,p){function a(){}Object.defineProperty(d,"__esModule",{value:!0});var q=babelHelpers.interopRequireDefault(l),e=babelHelpers.interopRequireDefault(m),f=babelHelpers.interopRequireDefault(n),g=babelHelpers.interopRequireDefault(p),h=e.default.once(function(){return f.default.buildKey(["diff-view","options"],
"user")});g.default.addLocalEventMixin(a.prototype);a.prototype.getOptions=e.default.memoize(function(){return e.default.assign({},this.defaults,f.default.getItem(h()))});a.prototype.defaults={ignoreWhitespace:!1,showWhitespaceCharacters:!1,hideComments:!1,hideEdiff:!1,diffType:"unified"};a.prototype.triggerUpdate=function(b,a){b={key:b,value:a};this.trigger("change",b);g.default.trigger("bitbucket.internal.feature.fileContent.optionsChanged",null,b)};a.prototype.set=function(b,a,c){this.getOptions()[b]=
a;f.default.setItem(h(),this.getOptions());!1!==c&&this.triggerUpdate(b,a)};a.prototype.get=function(a){return this.getOptions()[a]};a.prototype.proxy=function(b){var d=this,c=new a;c.getOptions=function(){return q.default.extend({},d.getOptions(),b)};c.set=function(a,c,e){void 0===b[a]&&d.set(a,c,e)};c.destroy=g.default.chainWith(d).on("change",function(a){void 0===b[a.key]&&c.trigger("change",a)}).destroy;return c};d.default=new a;k.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-options-panel', location = '/static/bitbucket/internal/feature/file-content/diff-view-options-panel/diff-view-options-panel.soy' */
// This file was automatically generated from diff-view-options-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.diffViewOptionsPanel.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.diffViewOptionsPanel == 'undefined') { bitbucket.internal.feature.fileContent.diffViewOptionsPanel = {}; }


bitbucket.internal.feature.fileContent.diffViewOptionsPanel.main = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = bitbucket.internal.buttons.button({id: 'diff-options-dropdown-trigger', buttonText: '', extraClasses: 'aui-dropdown2-trigger aui-button-subtle aui-dropdown2-trigger-arrowless', extraAttributes: 'data-container=".diff-view-secondary-panel" aria-owns="diff-options-dropdown" aria-haspopup="true"', iconType: 'aui', iconText: 'Diff options', iconClass: 'aui-icon-small aui-iconfont-more'}) + '<div id="diff-options-dropdown-container">';
  var param14 = '<div id="diff-options-core">' + aui.dropdown2.section({extraClasses: 'binary-options', extraAttributes: {role: 'presentation'}, content: '<div role="group"><ul class="aui-list-truncate" role="presentation"><li role="presentation">' + aui.dropdown2.menuCheckbox({text: 'Ignore whitespace', extraAttributes: {'data-key': 'ignoreWhitespace', title: 'Ignore whitespace for all diffs. (Type \x27Shift + w\x27)'}, extraClasses: 'diff-options-ignore-whitespace'}) + '</li><li role="presentation">' + aui.dropdown2.menuCheckbox({text: 'Show whitespace characters', extraAttributes: {'data-key': 'showWhitespaceCharacters', title: 'Show whitespace characters (tab, space, newline)'}, extraClasses: 'diff-options-show-whitespace-characters'}) + '</li>' + ((!!(require('bitbucket/internal/model/page-state').getCurrentUser()) && opt_data.commentMode != 'none') ? '<li role="presentation">' + aui.dropdown2.menuCheckbox({text: 'Hide comments', extraAttributes: {'data-key': 'hideComments', title: 'Hide comments for all diffs. (Type \x27Shift + c\x27)'}, extraClasses: 'diff-options-hide-comments'}) + '</li>' : '') + '<li role="presentation">' + aui.dropdown2.menuCheckbox({text: 'Hide e-diff', extraAttributes: {'data-key': 'hideEdiff', title: 'Hide e-diff for all diffs. (Type \x27Shift + e\x27)'}, extraClasses: 'diff-options-hide-ediff'}) + '</li></ul></div>'}) + aui.dropdown2.itemGroup({extraClasses: 'diff-type-options', isTruncated: true, items: [{itemType: 'radio', isChecked: true, text: 'Unified diff', extraAttributes: {'data-key': 'diffType', 'data-value': 'unified', title: 'Show diffs in one continuous column. (Type \x27Shift + d\x27)'}}, {itemType: 'radio', isDisabled: true, text: 'Side-by-side diff', extraAttributes: {'data-key': 'diffType', 'data-value': 'side-by-side', 'data-file-type-compatibility': 'Side-by-side diff is not available for added or deleted files', title: 'Show diffs split into two columns. (Type \x27Shift + d\x27)'}}]}) + '</div>';
  var param51 = '';
  var webItemsDiffViewOptions__soy52 = WebFragments.getWebItems('bitbucket.file-content.diff-view.options',{displayType: opt_data.displayType, fileChange: opt_data.fileChange});
  if (webItemsDiffViewOptions__soy52.length > 0) {
    param51 += '<ul>';
    var itemList56 = webItemsDiffViewOptions__soy52;
    var itemListLen56 = itemList56.length;
    for (var itemIndex56 = 0; itemIndex56 < itemListLen56; itemIndex56++) {
      var itemData56 = itemList56[itemIndex56];
      param51 += '<li>' + bitbucket.internal.widget.webItemDropdownItem(itemData56) + '</li>';
    }
    param51 += '</ul>';
  }
  param14 += aui.dropdown2.section({id: 'diff-options-pluggable', content: param51});
  output += aui.dropdown2.contents({id: 'diff-options-dropdown', extraClasses: 'aui-style-default diff-options-dropdown', content: param14});
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.diffViewOptionsPanel.main.soyTemplateName = 'bitbucket.internal.feature.fileContent.diffViewOptionsPanel.main';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-options-panel', location = '/static/bitbucket/internal/feature/file-content/diff-view-options-panel/diff-view-options-panel.js' */
define("bitbucket/internal/feature/file-content/diff-view-options-panel/diff-view-options-panel","module exports aui chaperone jquery lodash bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/shortcuts".split(" "),function(m,b,a,h,n,p,q,r,t){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,e){function f(c){"false"===a.find("#diff-options-dropdown").attr("aria-hidden")&&a.find(u).trigger("aui-button-invoke")}function b(c){f();e.set(c,!e.get(c))}
var d=[];d.push(g.default.bind("requestIgnoreWhitespace",b.bind(null,"ignoreWhitespace")));d.push(g.default.bind("requestHideComments",b.bind(null,"hideComments")));d.push(g.default.bind("requestHideEdiff",b.bind(null,"hideEdiff")));d.push(g.default.bind("changeDiffTypeRequested",function(){f();e.set("diffType","unified"===e.get("diffType")?"side-by-side":"unified")}));d.push(k.default.chainWith(a).on("aui-dropdown2-item-check aui-dropdown2-item-uncheck","#diff-options-core .aui-dropdown2-checkbox, #diff-options-core .aui-dropdown2-radio",
function(c){f();var a=(0,l.default)(this),b=a.attr("data-key"),d=a.attr("data-value");c="aui-dropdown2-item-check"===c.type;!c&&a.hasClass("aui-dropdown2-radio")||e.set(b,d||c)}).on("aui-dropdown2-show","#diff-options-dropdown",function(a){(0,l.default)(this).find("#diff-options-core .aui-dropdown2-checkbox, #diff-options-core .aui-dropdown2-radio").each(function(){var a=(0,l.default)(this),b=a.attr("data-key"),c=a.attr("data-value");c=(b=e.get(b))&&(b===c||!0===b);a.toggleClass("aui-dropdown2-checked checked",
c).attr("aria-checked",c)});d.push(k.default.chain().on("window.scroll.throttled",f).destroy)}).on("aui-dropdown2-hide","#diff-options-dropdown",function(a){k.default.off("window.scroll.throttled",f)}).destroy);return{destroy:v.default.partial(w.default.applyAll,d)}};a=babelHelpers.interopRequireDefault(a);h=babelHelpers.interopRequireDefault(h);var l=babelHelpers.interopRequireDefault(n),v=babelHelpers.interopRequireDefault(p),k=babelHelpers.interopRequireDefault(q),w=babelHelpers.interopRequireDefault(r),
g=babelHelpers.interopRequireDefault(t),u="#diff-options-dropdown-trigger";h.default.registerFeature("side-by-side-diff-discovery",[{id:"side-by-side-diff-discovery",selector:".diff-view-options",title:"Diff view options",content:a.default.escapeHtml("Check out other ways to view code diffs in this menu"),width:330,alignment:"bottom right",once:!0}]);m.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:require-amd-context', location = '/static/bitbucket/internal/util/require-amd-context.js' */
define("bitbucket/internal/util/require-amd-context",["module","exports","jquery"],function(b,a,c){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,b){return WRM.require("wrc!"+a).pipe(function(){var a=d.default.Deferred();require(b,function(){a.resolve.apply(a,arguments)});return a.promise()})};var d=babelHelpers.interopRequireDefault(c);b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:binary-view', location = '/static/bitbucket/internal/feature/file-content/binary-view/binary-view.soy' */
// This file was automatically generated from binary-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.binaryView.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.binaryView == 'undefined') { bitbucket.internal.feature.fileContent.binaryView = {}; }


bitbucket.internal.feature.fileContent.binaryView.container = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="binary-container">' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.binaryView.container.soyTemplateName = 'bitbucket.internal.feature.fileContent.binaryView.container';
}


bitbucket.internal.feature.fileContent.binaryView.cell = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="' + soy.$$escapeHtml(opt_data.extraClasses ? opt_data.extraClasses + ' ' : '') + 'binary">' + ((opt_data.titleText) ? '<h5>' + soy.$$escapeHtml(opt_data.titleText) + '</h5>' : '') + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.binaryView.cell.soyTemplateName = 'bitbucket.internal.feature.fileContent.binaryView.cell';
}


bitbucket.internal.feature.fileContent.binaryView.old = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.binaryView.cell({extraClasses: 'since-revision', titleText: 'Old', content: opt_data.content});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.binaryView.old.soyTemplateName = 'bitbucket.internal.feature.fileContent.binaryView.old';
}


bitbucket.internal.feature.fileContent.binaryView.new = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.binaryView.cell({extraClasses: 'until-revision', titleText: 'New', content: opt_data.content});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.binaryView.new.soyTemplateName = 'bitbucket.internal.feature.fileContent.binaryView.new';
}


bitbucket.internal.feature.fileContent.binaryView.image = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(opt_data.src) + '"' + ((opt_data.extraClasses) ? 'class="' + aui.renderExtraClasses(opt_data) + '"' : '') + ((opt_data.extraAttributes) ? ' ' + aui.renderExtraAttributes(opt_data) : '') + '/>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.binaryView.image.soyTemplateName = 'bitbucket.internal.feature.fileContent.binaryView.image';
}


bitbucket.internal.feature.fileContent.binaryView.unrenderable = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="unrenderable-file' + ((opt_data.extraClasses) ? ' ' + aui.renderExtraClasses(opt_data) : '') + '"><div class="download-image"></div><h3>' + ((opt_data.title) ? soy.$$escapeHtml(opt_data.title) : soy.$$escapeHtml('Download to view this file')) + '</h3>' + ((opt_data.descriptionContent) ? '<div class="description">' + soy.$$filterNoAutoescape(opt_data.descriptionContent) + '</div>' : '') + ((opt_data.downloadUrl) ? bitbucket.internal.buttons.button({isPrimary: true, extraClasses: 'download-file-button', href: opt_data.downloadUrl, buttonText: 'Download file'}) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.binaryView.unrenderable.soyTemplateName = 'bitbucket.internal.feature.fileContent.binaryView.unrenderable';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:binary-view', location = '/static/bitbucket/internal/feature/file-content/binary-view/binary-view.js' */
define("bitbucket/internal/feature/file-content/binary-view/binary-view","module exports aui jquery lodash bitbucket/util/navbuilder".split(" "),function(e,c,f,g,h,k){function l(b){return{$elem:(0,d.default)(bitbucket.internal.feature.fileContent.binaryView.unrenderable({downloadUrl:b,descriptionContent:"This file can\u0027t be viewed in your browser."})),type:"link"}}function a(b,a){return{$elem:(0,d.default)(bitbucket.internal.feature.fileContent.binaryView.image({src:b,
extraAttributes:{"data-ext":a.extension.toLowerCase()}})),type:"image"}}Object.defineProperty(c,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(f),d=babelHelpers.interopRequireDefault(g),n=babelHelpers.interopRequireDefault(h),p=babelHelpers.interopRequireDefault(k),q={png:a,jpg:a,jpeg:a,bmp:a,ico:a,gif:a,svg:a},r=["svg"];c.default={getRenderedBinary:function(b,a){var c=b.extension&&b.extension.toLowerCase();a=p.default.currentRepo().raw().path(b.components).at(a).build();return(q[c]||
l)(a,b)},treatTextAsBinary:function(a){return a&&n.default.includes(r,a)}};e.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:focus-message', location = '/static/bitbucket/internal/widget/focus-message/focus-message.soy' */
// This file was automatically generated from focus-message.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.focusMessage.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.focusMessage == 'undefined') { bitbucket.internal.widget.focusMessage = {}; }


bitbucket.internal.widget.focusMessage.message = function(opt_data, opt_ignored) {
  return '<div class="focus-message' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.iconClass) ? '<div class="focus-message-icon aui-icon' + ((opt_data.iconClass) ? ' ' + soy.$$escapeHtml(opt_data.iconClass) : '') + '">' + soy.$$escapeHtml(opt_data.accessibilityText ? opt_data.accessibilityText : '') + '</div>' : '') + '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2>' + ((opt_data.text) ? '<p>' + soy.$$escapeHtml(opt_data.text) + '</p>' : '') + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.focusMessage.message.soyTemplateName = 'bitbucket.internal.widget.focusMessage.message';
}


bitbucket.internal.widget.focusMessage.error = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.focusMessage.message({title: opt_data.title, text: opt_data.text, content: opt_data.content, extraClasses: opt_data.extraClasses, iconClass: 'icon-skull'});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.focusMessage.error.soyTemplateName = 'bitbucket.internal.widget.focusMessage.error';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:content-message', location = '/static/bitbucket/internal/feature/file-content/content-message/content-message.soy' */
// This file was automatically generated from content-message.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.contentMessage.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.contentMessage == 'undefined') { bitbucket.internal.feature.fileContent.contentMessage = {}; }


bitbucket.internal.feature.fileContent.contentMessage.emptyFile = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.focusMessage.message({extraClasses: 'content-view source-view empty-file', iconClass: 'icon-empty-file', accessibilityText: 'Empty file', title: 'This file is empty'});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.contentMessage.emptyFile.soyTemplateName = 'bitbucket.internal.feature.fileContent.contentMessage.emptyFile';
}


bitbucket.internal.feature.fileContent.contentMessage.error = function(opt_data, opt_ignored) {
  return '<div class="content-message-container">' + aui.message.warning({extraClasses: 'content-message', content: '' + soy.$$escapeHtml(opt_data.message)}) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.contentMessage.error.soyTemplateName = 'bitbucket.internal.feature.fileContent.contentMessage.error';
}


bitbucket.internal.feature.fileContent.contentMessage.tooLargeDiff = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="content-message-container">' + aui.message.warning({extraClasses: 'content-message', content: '' + ((opt_data.filePath && opt_data.revisionId) ? soy.$$escapeHtml('The diff for this file is too large to render. You can still retrieve it manually with the following Git command.') + '<p class="scm-command">' + ((opt_data.parentRevisionId) ? 'git diff -C -M ' + soy.$$escapeHtml(opt_data.parentRevisionId) + ' ' + soy.$$escapeHtml(opt_data.revisionId) + ' -- "' + soy.$$escapeHtml(opt_data.filePath) + '"' : 'git log -p ' + soy.$$escapeHtml(opt_data.revisionId) + ' -- "' + soy.$$escapeHtml(opt_data.filePath) + '"') + '</p>' : '<p>' + soy.$$escapeHtml('The diff for this file is too large to render') + '</p>' + ((opt_data.sideBySideDiffEnabled) ? '<p>' + soy.$$escapeHtml('It might be possible to view this diff using unified diff. You can switch to unified diff via the options menu.') + '</p>' : ''))}) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.contentMessage.tooLargeDiff.soyTemplateName = 'bitbucket.internal.feature.fileContent.contentMessage.tooLargeDiff';
}


bitbucket.internal.feature.fileContent.contentMessage.emptyDiff = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var param54 = '';
  switch (opt_data.fileChangeType) {
    case 'ADD':
      param54 += soy.$$filterNoAutoescape('The added file is empty');
      break;
    case 'DELETE':
      param54 += soy.$$filterNoAutoescape('The removed file is empty');
      break;
    default:
      param54 += soy.$$filterNoAutoescape('The contents for this file have not changed');
  }
  var output = '' + bitbucket.internal.widget.focusMessage.message({extraClasses: 'content-view diff-view empty-file', iconClass: 'icon-empty-file', accessibilityText: 'No diff', title: param54, content: '' + ((opt_data.whitespace == 'IGNORE_ALL' && opt_data.fileChangeType == 'MODIFY') ? soy.$$escapeHtml('Or at least there are no visible changes. You may see more by disabling \x27Ignore whitespace\x27') : '')});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.contentMessage.emptyDiff.soyTemplateName = 'bitbucket.internal.feature.fileContent.contentMessage.emptyDiff';
}


bitbucket.internal.feature.fileContent.contentMessage.conflict = function(opt_data, opt_ignored) {
  var output = '<div class="diff-conflict-message-container">';
  var param73 = '';
  if (opt_data.messageContent) {
    param73 += soy.$$filterNoAutoescape(opt_data.messageContent);
  } else {
    switch (opt_data.nodeType) {
      case 'SUBMODULE':
        param73 += soy.$$escapeHtml('This submodule is in a conflicted state. You will need to resolve the conflict manually before you can merge this pull request.');
        break;
      default:
        param73 += soy.$$escapeHtml('This file is in a conflicted state. You will need to resolve the conflict manually before you can merge this pull request.');
    }
  }
  output += aui.message.warning({titleContent: opt_data.titleContent, content: param73});
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.contentMessage.conflict.soyTemplateName = 'bitbucket.internal.feature.fileContent.contentMessage.conflict';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:content-message', location = '/static/bitbucket/internal/feature/file-content/content-message/content-message.js' */
define("bitbucket/internal/feature/file-content/content-message/content-message",["module","exports","aui","lodash","bitbucket/internal/util/events"],function(k,d,l,m,n){Object.defineProperty(d,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(l),g=babelHelpers.interopRequireDefault(m),h=babelHelpers.interopRequireDefault(n);d.default={renderConflict:function(c,b){c.append(bitbucket.internal.feature.fileContent.contentMessage.conflict({titleContent:f.default.escapeHtml(b.getConflict().getConflictMessage()),
nodeType:b.getNodeType()}))},renderEmptyDiff:function(c,b,a){c.append(bitbucket.internal.feature.fileContent.contentMessage.emptyDiff({fileChangeType:a.getType(),whitespace:b.whitespace}));var e=a.getCommitRange().getSinceRevision();a=a.getCommitRange().getUntilRevision();h.default.trigger("bitbucket.internal.feature.fileContent.emptyDiffShown",{containerEl:c.get(0),sourcePath:b.source,sinceRevision:e&&e.toJSON(),destinationPath:b.destination,untilRevision:a&&a.toJSON()})},renderEmptyFile:function(c,
b,a){c.append(bitbucket.internal.feature.fileContent.contentMessage.emptyFile());a=a.commitRange.untilRevision;h.default.trigger("bitbucket.internal.feature.fileContent.emptyFileShown",{containerEl:c.get(0),path:b.path,commit:a})},renderErrors:function(c,b){b=g.default.get(b,"errors.length")?b.errors:[{message:"An unknown error has occurred"}];c.append(g.default.map(b,bitbucket.internal.feature.fileContent.contentMessage.error).join(""))},renderTooLargeDiff:function(c,
b,a,e){a=a.getCommitRange();var d=a.getPullRequest();c.append(bitbucket.internal.feature.fileContent.contentMessage.tooLargeDiff({filePath:b.destination?b.destination.toString:b.source.toString,revisionId:!d&&a.getUntilRevision()&&a.getUntilRevision().getId(),parentRevisionId:!d&&a.getSinceRevision()&&a.getSinceRevision().getId(),sideBySideDiffEnabled:e}))}};k.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:request-diff', location = '/static/bitbucket/internal/feature/file-content/request-diff.js' */
define("bitbucket/internal/feature/file-content/request-diff","module exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/file-content/diff-view-options bitbucket/internal/model/path bitbucket/internal/util/ajax bitbucket/internal/util/deprecation".split(" "),function(n,e,p,q,r,t,u,v,w){function x(b,a){if(g.default.isArray(a.diffs)&&a.diffs.length){var c=h.default.find(a.diffs,function(a){return a.destination?a.destination.toString===(new k.default(b.path)).toString():b.srcPath?
a.source.toString===(new k.default(b.srcPath)).toString():!1})||a.diffs[0];a=h.default.assign({diff:c},a,c);Object.keys(c).forEach(function(b){l.default.prop(a,b,b,"diff."+b,"4.5","5.0")});delete a.diffs}return a}function y(b){var a=z.default.rest().project(b.repository.project.key).repo(b.repository.slug),c=b.commitRange.pullRequest;return(c?a.pullRequest(c.id):a.commit(b.commitRange)).diff(b)}Object.defineProperty(e,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(p),h=babelHelpers.interopRequireDefault(q),
z=babelHelpers.interopRequireDefault(r),A=babelHelpers.interopRequireDefault(t),k=babelHelpers.interopRequireDefault(u),m=babelHelpers.interopRequireDefault(v),l=babelHelpers.interopRequireDefault(w),f={};e.default=function(b,a){var c=b.toJSON?b.toJSON():b;if(c.diff){a=g.default.extend({lineComments:a.lineComments||[],fileComments:a.fileComments||[]},c.diff);var e=g.default.extend({diff:a,fromHash:c.diff.properties&&c.diff.properties.fromHash,toHash:c.diff.properties&&c.diff.properties.toHash},a);
Object.keys(a).forEach(function(a){l.default.prop(e,a,a,"diff."+a,"4.5","5.0")});return g.default.Deferred().resolve(e)}a=a||{};b=a.hasOwnProperty("ignoreWhitespace")?a.ignoreWhitespace:A.default.get("ignoreWhitespace");var h=isNaN(Number(a.contextLines))?-1:Math.floor(a.contextLines),d=(a.diffUrlBuilder||y)(c).withParams({avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:a.avatarSize||"medium"}),markup:!0,whitespace:b?"ignore-all":"",contextLines:h,withComments:a.withComments,autoSrcPath:a.autoSrcPath}).build();
if(f.hasOwnProperty(d)&&"rejected"!==f[d].state())return f[d];a=m.default.rest({url:d,statusCode:a.statusCode||m.default.ignore404WithinRepository()});b=a.then(function(a){if(a.errors&&a.errors.length)return g.default.Deferred().rejectWith(this,[this,null,null,a]);a=x(c,a);setTimeout(function(){delete f[d]});return a});f[d]=b.promise(a);return f[d]};n.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:object-util', location = '/static/bitbucket/internal/util/object.js' */
define("bitbucket/internal/util/object",["module","exports","lodash"],function(h,b,k){function g(c){return c}function l(c){return"object"===("undefined"===typeof c?"undefined":babelHelpers.typeof(c))?JSON.stringify(c):String(c)}Object.defineProperty(b,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(k),n=Object.prototype.hasOwnProperty;b.default={uniqueFromArray:function(c,f,a){var d,e,p=f.length,b=a?l:g;return m.default.uniqBy(c,function(a){d=0;for(e="";d<p;d++)e+=b(a[f[d]]);return e})},
freeze:Object.freeze||g,deepFreeze:Object.freeze?function f(a,d){if(null!==a&&"object"===("undefined"===typeof a?"undefined":babelHelpers.typeof(a))){var e=Object.isFrozen(a);e||Object.freeze(a);if(!e||d)for(var b in a)n.call(a,b)&&f(a[b])}return a}:g,inherits:function(b,a){b.prototype=Object.create(a.prototype);Object.defineProperty(b.prototype,"constructor",{value:b,configurable:!0,writable:!0,enumerable:!1})}};h.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web-api:file-handlers', location = '/static/bitbucket/internal/util/handler-registry.js' */
define("bitbucket/internal/util/handler-registry",["module","exports","jquery","lodash"],function(n,c,p,q){function b(){this.handlers=[]}Object.defineProperty(c,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(p),e=babelHelpers.interopRequireDefault(q);b.prototype.register=function(a){if(!e.default.isFunction(a.handle))throw Error("Handler must have a handle function");a.weight="number"!==typeof a.weight||isNaN(a.weight)?1E3:a.weight;this.handlers.push(a);this.handlers=e.default.sortBy(this.handlers,
function(a){return a.weight});var k=this;return function(){var b=k.handlers.indexOf(a);0<=b&&k.handlers.splice(b,1)}};b.prototype._handle=function(a){function b(a){if(h)return f.reject(Error("Handling aborted."));if(a<l.length)return d=l[a].handle(e)||g.default.Deferred().reject(),g.default.when(d).done(function(a){f.resolve(a||{},m)}).fail(function(c){c&&m.push(c);b(a+1)});f.reject(Error("No registered handlers were able to handle file"))}var c=a.useDefaultHandler,e=babelHelpers.objectWithoutProperties(a,
["useDefaultHandler"]),f=g.default.Deferred(),h,d,l=c?this.handlers.filter(function(a){return a.builtIn}):this.handlers,m=[];b(0);return f.promise({abort:function(){!h&&d&&d.abort&&d.abort();h=!0}})};b.prototype._clear=function(){this.handlers=[]};c.default=b;n.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web-api:file-handlers', location = '/static/bitbucket/feature/files/file-handlers.js' */
define("bitbucket/feature/files/file-handlers",["module","exports","bitbucket/internal/util/handler-registry","bitbucket/internal/util/object"],function(d,b,a,c){Object.defineProperty(b,"__esModule",{value:!0});a=babelHelpers.interopRequireDefault(a);c=babelHelpers.interopRequireDefault(c);a=new a.default;a.builtInHandlers={ERROR:"error",DIRECTORY:"directory",SOURCE_TEXT:"source-text",SOURCE_EMPTY:"source-empty",SOURCE_IMAGE:"source-image",SOURCE_BINARY:"source-binary",DIFF_TEXT_SIDE_BY_SIDE:"diff-text-side-by-side",
DIFF_TEXT_UNIFIED:"diff-text-unified",DIFF_EMPTY:"diff-empty",DIFF_TOO_LARGE:"diff-too-large",DIFF_IMAGE:"diff-image",DIFF_BINARY:"diff-binary"};c.default.freeze(a.builtInHandlers);b.default=a;d.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:resemblejs', location = '/static/bower/resemblejs/resemble.js' */
(function(u){function q(e,g){return(Math.abs(e.r-g.r)+Math.abs(e.g-g.g)+Math.abs(e.b-g.b))/3}var y=1,f={red:255,green:0,blue:255,alpha:255},r={flat:function(e,g){return{r:f.red,g:f.green,b:f.blue,a:f.alpha}},movement:function(e,g){return{r:(f.red/255*g.r+f.red)/2,g:(f.green/255*g.g+f.green)/2,b:(f.blue/255*g.b+f.blue)/2,a:g.a}},flatDifferenceIntensity:function(e,g){return{r:f.red,g:f.green,b:f.blue,a:q(e,g)}},movementDifferenceIntensity:function(e,g){e=q(e,g)/255*.8;return{r:f.red/255*(1-e)*g.r+e*
f.red,g:f.green/255*(1-e)*g.g+e*f.green,b:f.blue/255*(1-e)*g.b+e*f.blue,a:g.a}}},E=r.flat,z=1200,K=/^https?:\/\//,L=new RegExp("^https?://"+document.domain);u.resemble=function(e){function g(){var a=v.length,d;for(d=0;d<a;d++)if("function"===typeof v[d])v[d](m)}function f(a,d,b){var c,n;for(c=0;c<a;c++)for(n=0;n<d;n++)b(c,n)}function r(a,d,b){var c=0,n=0,e=0,k=0,F=0;f(b,d,function(b,g){var f=4*(b*d+g);b=a[f];g=a[f+1];f=a[f+2];c++;n+=b/255*100;e+=g/255*100;k+=f/255*100;F+=(.3*b+.59*g+.11*f)/255*100});
m.red=Math.floor(n/c);m.green=Math.floor(e/c);m.blue=Math.floor(k/c);m.brightness=Math.floor(F/c);g()}function B(a,d){var b=new Image;K.test(a)&&!L.test(a)&&b.setAttribute("crossorigin","anonymous");b.onload=function(){var a=document.createElement("canvas"),c=b.width,e=b.height;a.width=c;a.height=e;a.getContext("2d").drawImage(b,0,0,c,e);a=a.getContext("2d").getImageData(0,0,c,e);k.push(a);d(a,c,e)};if("string"===typeof a){if(b.src=a,b.complete)b.onload()}else if("undefined"!==typeof a.data&&"number"===
typeof a.width&&"number"===typeof a.height)k.push(a),d(a,a.width,a.height);else{var c=new FileReader;c.onload=function(a){b.src=a.target.result};c.readAsDataURL(a)}}function t(a,d,b){var c=Math.abs(a-d);return"undefined"===typeof a||"undefined"===typeof d?!1:a===d?!0:c<h[b]?!0:!1}function u(a,d){var b=t(a.a,d.a,"alpha");return t(a.brightness,d.brightness,"minBrightness")&&b}function q(a,d,b){a/=255;d/=255;b/=255;var c=Math.max(a,d,b),e=Math.min(a,d,b);if(c==e)var g=0;else{e=c-e;switch(c){case a:g=
(d-b)/e+(d<b?6:0);break;case d:g=(b-a)/e+2;break;case b:g=(a-d)/e+4}g/=6}return g}function G(a,d,b,c,e,g){var f,n,k=0,p=0,m=0;a.h=q(a.r,a.g,a.b);for(f=-1;1>=f;f++)for(n=-1;1>=n;n++)if(0!==f||0!==n){var l=4*((c+n)*g+(e+f));l=C(d,l,b);if(null!==l){w(l);l.h=q(l.r,l.g,l.b);Math.abs(a.brightness-l.brightness)>h.maxBrightness&&k++;var M=a.g===l.g,N=a.b===l.b;a.r===l.r&&M&&N&&m++;.3<Math.abs(l.h-a.h)&&p++;if(1<p||1<k)return!0}}return 2>m?!0:!1}function D(a,d,b,c){b=E(b,c);a[d]=b.r;a[d+1]=b.g;a[d+2]=b.b;
a[d+3]=b.a}function H(a,d,b){a[d]=b.brightness;a[d+1]=b.brightness;a[d+2]=b.brightness;a[d+3]=b.a*y}function C(a,d,b){b=a[d];if("undefined"!==typeof b){var c=a[d+1];var e=a[d+2];a=a[d+3];return a={r:b,g:c,b:e,a:a}}return null}function w(a){a.brightness=.3*a.r+.59*a.g+.11*a.b}function O(a,d,b,c){var e=document.createElement("canvas"),g=a.data,k=d.data;e.width=b;e.height=c;var h=e.getContext("2d"),q=h.createImageData(b,c),p=q.data,r=0;a=Date.now();var l;z&&x&&(b>z||c>z)&&(l=6);f(c,b,function(a,e){if(!l||
0!==a%l&&0!==e%l){var d=4*(a*b+e),c=C(g,d,1),f=C(k,d,2);if(null!==c&&null!==f)if(A)w(c),w(f),u(c,f)?H(p,d,f):(D(p,d,c,f),r++);else{var h=t(c.r,f.r,"red"),n=t(c.g,f.g,"green"),m=t(c.b,f.b,"blue"),q=t(c.a,f.a,"alpha");h&&n&&m&&q?(p[d]=c.r,p[d+1]=c.g,p[d+2]=c.b,p[d+3]=c.a*y):x&&(w(c),w(f),G(c,g,1,a,e,b)||G(f,k,2,a,e,b))?u(c,f)?H(p,d,f):(D(p,d,c,f),r++):(D(p,d,c,f),r++)}}});m.misMatchPercentage=(r/(c*b)*100).toFixed(2);m.analysisTime=Date.now()-a;m.getImageDataUrl=function(a){var c=0;a&&(h.font="12px sans-serif",
c=h.measureText(a).width+4,c>e.width&&(e.width=c),e.height+=22,h.fillStyle="#666",h.fillRect(0,0,e.width,18),h.fillStyle="#fff",h.fillRect(0,18,e.width,4),h.fillStyle="#fff",h.textBaseline="top",h.font="12px sans-serif",h.fillText(a,2,1),c=22);h.putImageData(q,0,c);return e.toDataURL("image/png")}}function I(a,d,b){if(a.height<b||a.width<d){var c=document.createElement("canvas");c.width=d;c.height=b;c=c.getContext("2d");c.putImageData(a,0,0);return c.getImageData(0,0,d,b)}return a}function P(a,d){function b(){if(2===
k.length){var a=k[0].width>k[1].width?k[0].width:k[1].width;var b=k[0].height>k[1].height?k[0].height:k[1].height;m.isSameDimensions=k[0].width===k[1].width&&k[0].height===k[1].height?!0:!1;m.dimensionDifference={width:k[0].width-k[1].width,height:k[0].height-k[1].height};O(I(k[0],a,b),I(k[1],a,b),a,b);g()}}k=[];B(a,b);B(d,b)}function J(a){var d,b="function"===typeof a;b||(d=a);var c={ignoreNothing:function(){h.red=16;h.green=16;h.blue=16;h.alpha=16;h.minBrightness=16;h.maxBrightness=240;A=x=!1;b&&
a();return c},ignoreAntialiasing:function(){h.red=32;h.green=32;h.blue=32;h.alpha=32;h.minBrightness=64;h.maxBrightness=96;x=!0;A=!1;b&&a();return c},ignoreColors:function(){h.alpha=16;h.minBrightness=16;h.maxBrightness=240;x=!1;A=!0;b&&a();return c},repaint:function(){b&&a();return c},onComplete:function(a){v.push(a);a=function(){P(e,d)};a();return J(a)}};return c}var m={},k=[],v=[],h={red:16,green:16,blue:16,alpha:16,minBrightness:16,maxBrightness:240},x=!1,A=!1;return{onComplete:function(a){v.push(a);
B(e,function(a,b,c){r(a.data,b,c)})},compareTo:function(a){return J(a)}}};u.resemble.outputSettings=function(e){var g;if(e.errorColor)for(g in e.errorColor)f[g]=void 0===e.errorColor[g]?f[g]:e.errorColor[g];e.errorType&&r[e.errorType]&&(E=r[e.errorType]);y=isNaN(Number(e.transparency))?y:e.transparency;void 0!==e.largeImageThreshold&&(z=e.largeImageThreshold);return this}})(this);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:resemblejs', location = '/static/lib/resemblejs/resemble-AMD.js' */
define("resemble",function(){return resemble});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:image-differ', location = '/static/bitbucket/internal/bbui/image-differ/image-differ-modes.js' */
define("bitbucket/internal/bbui/image-differ/image-differ-modes",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={TWO_UP:"two-up",BLEND:"blend",SPLIT:"split",PIXEL_DIFF:"pixeldiff"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:image-differ', location = '/static/bitbucket/internal/bbui/image-differ/image-differ-toolbar.soy' */
// This file was automatically generated from image-differ-toolbar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.component.imageDiffer.toolbar.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.component == 'undefined') { bitbucket.internal.component = {}; }
if (typeof bitbucket.internal.component.imageDiffer == 'undefined') { bitbucket.internal.component.imageDiffer = {}; }
if (typeof bitbucket.internal.component.imageDiffer.toolbar == 'undefined') { bitbucket.internal.component.imageDiffer.toolbar = {}; }


bitbucket.internal.component.imageDiffer.toolbar.main = function(opt_data, opt_ignored) {
  return '' + aui.toolbar2.toolbar2({content: '' + aui.toolbar2.item({item: 'primary', extraClasses: 'image-differ-toggle', content: '' + bitbucket.internal.component.imageDiffer.toolbar.toggleButtons(null)}), extraClasses: 'image-differ-toolbar'});
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.toolbar.main.soyTemplateName = 'bitbucket.internal.component.imageDiffer.toolbar.main';
}


bitbucket.internal.component.imageDiffer.toolbar.toggleButtons = function(opt_data, opt_ignored) {
  return '' + aui.buttons.buttons({content: '' + aui.buttons.button({extraClasses: 'image-differ-two-up', isPressed: true, text: 'Two-up', extraAttributes: {title: 'Compare images alongside each other'}}) + aui.buttons.button({extraClasses: 'image-differ-blend', isDisabled: true, text: 'Blend', extraAttributes: {title: 'Blend mode image diff is not available because images are not of the same dimension', 'data-enabled-title': 'Compare the image changes by fading in the differences'}}) + aui.buttons.button({extraClasses: 'image-differ-split', isDisabled: true, text: 'Split', extraAttributes: {title: 'Split mode image diff is not available because images are not of the same dimension', 'data-enabled-title': 'Compare the image changes by moving your mouse cursor left or right over the image'}}) + aui.buttons.button({extraClasses: 'image-differ-pixeldiff', isDisabled: true, text: 'Pixel diff', extraAttributes: {title: 'Pixel diff mode image diff is not available because images are not of the same dimension', 'data-enabled-title': 'Compare the image changes by seeing which pixels have changed'}})});
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.toolbar.toggleButtons.soyTemplateName = 'bitbucket.internal.component.imageDiffer.toolbar.toggleButtons';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:image-differ', location = '/static/bitbucket/internal/bbui/image-differ/image-differ-mode.js' */
define("bitbucket/internal/bbui/image-differ/image-differ-mode",["module","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(b,c){babelHelpers.classCallCheck(this,a);b&&(this.setup=b);c&&(this.destroy=c)}babelHelpers.createClass(a,[{key:"setup",value:function(){}},{key:"destroy",value:function(){}}]);return a}();a.default=e;d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:image-differ', location = '/static/bitbucket/internal/bbui/image-differ/image-differ-toolbar.js' */
define("bitbucket/internal/bbui/image-differ/image-differ-toolbar","module exports jquery lodash ../widget/widget ./image-differ-modes".split(" "),function(p,c,b,q,r,g){Object.defineProperty(c,"__esModule",{value:!0});var l=babelHelpers.interopRequireDefault(b),k=babelHelpers.interopRequireDefault(q);b=babelHelpers.interopRequireDefault(r);var h=babelHelpers.interopRequireDefault(g);g=function(c){function d(c){babelHelpers.classCallCheck(this,d);var e=babelHelpers.possibleConstructorReturn(this,(d.__proto__||
Object.getPrototypeOf(d)).call(this));e._$toolbar=(0,l.default)(c);e._$toggle=e._$toolbar.find(".image-differ-toggle");return e}babelHelpers.inherits(d,c);babelHelpers.createClass(d,[{key:"init",value:function(c){var e=this,d={};k.default.values(h.default).forEach(function(a){var b=k.default.includes(c,a),f=e._$toggle.find(".image-differ-"+a);f.attr("aria-disabled",!b).prop("disabled",!b);b&&(f.attr("data-enabled-title")&&f.attr("data-disabled-title",f.attr("title")),f.attr("data-mode",a),f.attr("title",
f.attr("data-enabled-title")),d[a]=f)});if(k.default.includes(c,h.default.BLEND)){var b=function(){var a=document.createElement("input");a.setAttribute("type","range");return"range"===a.type}(),g=d[h.default.BLEND];g.attr("aria-disabled",!b).prop("disabled",!b);b||g.attr("title",g.attr("data-disabled-title"))}var m=function(a){var b=e._mode;e._mode=a;e.trigger("modeChanged",{newMode:a,oldMode:b})},n=this._$toggle.find(".aui-button");n.on("click",function(a){a.preventDefault();a=(0,l.default)(a.target);
if("true"!==a.attr("aria-disabled")&&"true"!==a.attr("aria-pressed")){var b=a.attr("data-mode");n.attr("aria-pressed","false");a.attr("aria-pressed","true");m(b)}}).tooltip({gravity:"s"});m(h.default.TWO_UP)}},{key:"getMode",value:function(){return this._mode}},{key:"destroy",value:function(){this._$toolbar&&(this._$toolbar.remove(),this._$toolbar=null);this._$toggle=null}}]);return d}(b.default);c.default=g;p.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:image-differ', location = '/static/bitbucket/internal/bbui/image-differ/image-differ.js' */
define("bitbucket/internal/bbui/image-differ/image-differ",["exports","jquery","./differ","./image-differ-toolbar"],function(a,h,k,l){Object.defineProperty(a,"__esModule",{value:!0});a.Toolbar=a.Differ=a.init=void 0;var d=babelHelpers.interopRequireDefault(h),e=babelHelpers.interopRequireDefault(k),f=babelHelpers.interopRequireDefault(l);a.init=function(a){a=(0,d.default)(a);var c=new f.default((0,d.default)(bitbucket.internal.component.imageDiffer.toolbar.main()).prependTo(a)),b=new e.default(a);
c.on("modeChanged",function(a){return b.setMode(a.newMode)});var g=new d.default.Deferred;b.init().done(function(a){c&&c.init(a);g.resolve({on:b.on.bind(b),enabledModes:a,_differ:b,_toolbar:c,destroy:function(){b.destroy();b=null;c.destroy();c=null}})});return g};a.Differ=e.default;a.Toolbar=f.default});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:image-differ', location = '/static/bitbucket/internal/bbui/image-differ/differ.js' */
define("bitbucket/internal/bbui/image-differ/differ","module exports jquery lodash resemble ../widget/widget ./image-differ-mode ./image-differ-modes".split(" "),function(t,m,n,u,v,w,p,x){function h(d){var c=(0,e.default)(d);if(c.data("natural-size"))return e.default.Deferred().resolve(c.data("natural-size"));if(d.naturalWidth)return d={width:d.naturalWidth,height:d.naturalHeight},c.data("natural-size",d),e.default.Deferred().resolve(d);var a=new Image,b=e.default.Deferred();d=g.default.once(function(){var d=
{width:a.width,height:a.height};c.data("natural-size",d);b.resolve(d)});a.onload=d;a.src=c.attr("src");a.complete&&d();return b}function k(d,c){var a=d.data("margin_border_padding");null==a&&(a=d.outerWidth(!0)-d.width(),d.data("margin_border_padding",a));return c-a}function q(d){var c=document.createElement("canvas"),a=c.getContext("2d");return h(d).then(function(b){c.height=b.height;c.width=b.width;a.drawImage(d[0],0,0);return a.getImageData(0,0,c.width,c.height)})}Object.defineProperty(m,"__esModule",
{value:!0});var e=babelHelpers.interopRequireDefault(n),g=babelHelpers.interopRequireDefault(u),r=babelHelpers.interopRequireDefault(v);n=babelHelpers.interopRequireDefault(w);var l=babelHelpers.interopRequireDefault(p),f=babelHelpers.interopRequireDefault(x);p=function(d){function c(a){babelHelpers.classCallCheck(this,c);var b=babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));b._$container=(0,e.default)(a);return b}babelHelpers.inherits(c,d);babelHelpers.createClass(c,
[{key:"init",value:function(){var a=this,b=this._$imgs=this._$container.find("img");this._$sinceImg=b.eq(0);this._$untilImg=b.eq(1);this._$untilRevision=this._$untilImg.parent();this._$sinceRevision=this._$sinceImg.parent();this._$revisions=this._$untilRevision.add(this._$sinceRevision);this._$untilRevisionLabel=this._$untilRevision.find("h5");this._$sinceRevisionLabel=this._$sinceRevision.find("h5");this._setupDiffModes();this.setMode(f.default.TWO_UP);var d=e.default.Deferred(),c=[f.default.TWO_UP],
y=g.default.chain(f.default).values().difference(c).value();e.default.when(h(this._$sinceImg),h(this._$untilImg)).done(function(b,e){a.enabledModes=b.width===e.width&&b.height===e.height&&0<b.width?c.concat(y):c;d.resolve(a.enabledModes)}).fail(function(){d.reject()});return d}},{key:"destroy",value:function(){this.modes&&this._mode&&this.modes[this._mode].destroy();this._mode=null}},{key:"setMode",value:function(a){this._mode!==a&&(this._onDiffModeChanged(a,this._mode),this._mode=a)}},{key:"_onDiffModeChanged",
value:function(a,b){this._$container.removeClass(g.default.values(f.default).join(" ")).addClass(a);b&&this.modes[b].destroy();a&&this.modes[a].setup();this.trigger("modeChanged",{newMode:a,oldMode:b})}},{key:"_setupDiffModes",value:function(){var a=this;this.modes={};this.modes[f.default.TWO_UP]=new l.default;this.modes[f.default.BLEND]=new l.default(function(){var b=(0,e.default)(bitbucket.internal.component.imageDiffer.opacitySlider());a._$container.children(".since-revision").before(b);b.on("input change",
'input[type\x3d"range"]',function(b){a._$untilImg.css("opacity",parseFloat((0,e.default)(b.target).val()))})},function(){var b=a._$container.children(".opacity-slider-container");b.off("input change");b.remove();a._$untilImg.css("opacity","")});this.modes[f.default.SPLIT]=new l.default(function(){h(a._$imgs).done(function(b){a._$untilImg.wrap(bitbucket.internal.component.imageDiffer.imageContainer());a._$revisions.wrapAll(bitbucket.internal.component.imageDiffer.splitContainer());a._$untilRevisionImageContainer=
a._$untilImg.parent();a._$splitContainer=a._$container.find(".split-container");var d=void 0,c=function(){var c=a._$untilRevisionImageContainer,e=a._$splitContainer,f=k(a._$container,a._$container.parent().width());e=k(e,f);e=k(a._$sinceRevision,e);f=k(a._$sinceImg,e);var g=Math.min(b.width,f);a._$imgs.width(g);a._$imgs.height(Math.floor(g/b.width*b.height));c.height(a._$imgs.outerHeight(!0));c=g+(e-f);a._$revisions.width(c);a._$untilRevision.css("margin-left",-c);d=a._$sinceImg.outerWidth(!0)};a._onResize=
g.default.debounce(c,200);(0,e.default)(window).on("resize",a._onResize);c();50>b.width?(a._$untilRevisionLabel.css("margin-left","-50px"),a._$sinceRevisionLabel.css("margin-right","-50px")):100>b.width&&(a._$untilRevisionLabel.css("margin-left",-b.width),a._$sinceRevisionLabel.css("margin-right",-b.width));var f=function(b){a._$untilRevisionImageContainer.css("width",Math.min(b.pageX-b.data.offset.left,d))};a._$splitContainer.hover(function(){a._$revisions.on("mousemove",{offset:a._$untilRevision.offset()},
f)},function(){a._$revisions.off("mousemove",f)})})},function(){a._$imgs.css({width:"",height:""});a._$revisions.css("width","");a._$untilRevision.css("margin-left","");a._$untilRevisionLabel.add(a._$sinceRevisionLabel).css({marginLeft:"",marginRight:""});a._$untilImg.unwrap();a._$untilRevisionImageContainer.remove();delete a._$untilRevisionImageContainer;a._$revisions.unwrap();a._$splitContainer.remove();delete a._$splitContainer;a._onResize&&((0,e.default)(window).off("resize",a._onResize),delete a._onResize)});
this.modes[f.default.PIXEL_DIFF]=new l.default(function(){a._$revisions.wrapAll(bitbucket.internal.component.imageDiffer.pixelDiffContainer());a._$pixelDiffContainer=a._$container.find(".pixeldiff-container");if(a._$pixelDiffImg)a._$pixelDiffContainer.append(a._$pixelDiffImg);else{var b=(0,e.default)(bitbucket.internal.component.imageDiffer.spinner());a._$pixelDiffContainer.append(b);b.spin("large");g.default.defer(function(){var c=q(a._$sinceImg),d=q(a._$untilImg);e.default.when(c,d).then(function(a,
b){r.default.outputSettings({errorColor:{red:208,green:68,blue:55},errorType:"flat",transparency:.1});var c=e.default.Deferred();(0,r.default)(a).compareTo(b).onComplete(function(a){return c.resolve(a)});return c}).done(function(b){a._$pixelDiffImg=(0,e.default)(bitbucket.internal.component.imageDiffer.pixelDiffImage({imageSrc:b.getImageDataUrl()}));a._$pixelDiffContainer.append(a._$pixelDiffImg)}).always(function(){b.remove()})})}},function(){a._$pixelDiffImg&&a._$pixelDiffImg.remove();a._$revisions.unwrap();
a._$pixelDiffContainer.remove();delete a._$pixelDiffContainer})}}]);return c}(n.default);m.default=p;t.exports=m["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:image-differ', location = '/static/bitbucket/internal/bbui/image-differ/image-differ.soy' */
// This file was automatically generated from image-differ.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.component.imageDiffer.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.component == 'undefined') { bitbucket.internal.component = {}; }
if (typeof bitbucket.internal.component.imageDiffer == 'undefined') { bitbucket.internal.component.imageDiffer = {}; }


bitbucket.internal.component.imageDiffer.imageContainer = function(opt_data, opt_ignored) {
  return '<div class="image-container" />';
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.imageContainer.soyTemplateName = 'bitbucket.internal.component.imageDiffer.imageContainer';
}


bitbucket.internal.component.imageDiffer.splitContainer = function(opt_data, opt_ignored) {
  return '<div class="split-container" />';
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.splitContainer.soyTemplateName = 'bitbucket.internal.component.imageDiffer.splitContainer';
}


bitbucket.internal.component.imageDiffer.pixelDiffContainer = function(opt_data, opt_ignored) {
  return '<div class="pixeldiff-container" />';
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.pixelDiffContainer.soyTemplateName = 'bitbucket.internal.component.imageDiffer.pixelDiffContainer';
}


bitbucket.internal.component.imageDiffer.pixelDiffImage = function(opt_data, opt_ignored) {
  return '<div class="pixeldiff binary"><img src="' + soy.$$escapeHtml(opt_data.imageSrc) + '" /></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.pixelDiffImage.soyTemplateName = 'bitbucket.internal.component.imageDiffer.pixelDiffImage';
}


bitbucket.internal.component.imageDiffer.opacitySlider = function(opt_data, opt_ignored) {
  return '<div class="opacity-slider-container"><input type="range" min="0" max="1" step="0.01" value="1" /></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.opacitySlider.soyTemplateName = 'bitbucket.internal.component.imageDiffer.opacitySlider';
}


bitbucket.internal.component.imageDiffer.spinner = function(opt_data, opt_ignored) {
  return '<div class="spinner" />';
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.spinner.soyTemplateName = 'bitbucket.internal.component.imageDiffer.spinner';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:binary-diff-view', location = '/static/bitbucket/internal/feature/file-content/binary-diff-view/binary-diff-view.js' */
define("bitbucket/internal/feature/file-content/binary-diff-view/binary-diff-view","module exports jquery bitbucket/internal/bbui/image-differ/image-differ bitbucket/internal/feature/file-content/binary-view/binary-view bitbucket/internal/model/file-change bitbucket/internal/util/events".split(" "),function(k,d,l,m,n,p,q){function c(a,b){this._init(a,b)}function h(a,b){if(a&&b)return r.default.getRenderedBinary(a,b.getId())}Object.defineProperty(d,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(l),
r=babelHelpers.interopRequireDefault(n),t=babelHelpers.interopRequireDefault(p),u=babelHelpers.interopRequireDefault(q);c.prototype.isDiffingImages=function(){return this._isDiffingImages};c.prototype._init=function(a,b){var e=(new t.default(b.fileChange)).getCommitRange(),c=e.getUntilRevision();e=e.getSinceRevision();this._$container=(0,f.default)(bitbucket.internal.feature.fileContent.binaryView.container()).appendTo(b.$container);var d=h(a.source,e),g=h(a.destination,c);this._renderBinaryDiff(d,
g).done(function(){b.$container.addClass("fully-loaded")});a={containerEl:this._$container.get(0),sourcePath:a.source,sourceType:d&&d.type,sinceRevision:e&&e.toJSON(),destinationPath:a.destination,destinationType:g&&g.type,untilRevision:c&&c.toJSON()};u.default.trigger("bitbucket.internal.feature.fileContent.binaryDiffShown",null,a)};c.prototype._renderBinaryDiff=function(a,b){var c=this;a&&(0,f.default)(bitbucket.internal.feature.fileContent.binaryView.old({})).append(a.$elem).appendTo(this._$container);
b&&(0,f.default)(bitbucket.internal.feature.fileContent.binaryView.new({})).append(b.$elem).appendTo(this._$container);return(this._isDiffingImages=a&&b&&a.type===b.type&&"image"===a.type)?(0,m.init)(this._$container).done(function(a){c.imageDiff=a}):f.default.Deferred().resolve()};c.prototype.destroy=function(){this.imageDiff&&(this.imageDiff.destroy(),this.imageDiff=null);this._$container&&(this._$container.remove(),this._$container=null)};d.default=c;k.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-line-info', location = '/static/bitbucket/internal/feature/file-content/diff-line-info.js' */
define("bitbucket/internal/feature/file-content/diff-line-info",["module","exports","lodash","bitbucket/internal/feature/file-content/diff-view-segment-types"],function(n,l,p,q){function m(d,h,a,e,b,c,g){this.lineType=d;this.lineNumber=h;this.line=a;this.segment=e;this.hunk=b;this.diff=c;this.handles={FROM:null,TO:null,all:[]};this.attributes=g}Object.defineProperty(l,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(p),k=babelHelpers.interopRequireDefault(q),r={ADDED:"destination",
REMOVED:"source",CONTEXT:"source"};m.prototype._setHandle=function(d,h){this.handles[d]=h;this.handles.all.push(h);this.handles.all=f.default.uniq(this.handles.all)};l.default={convertToLineInfos:function(d,h){return f.default.chain(d.hunks).flatMap(function(a){return f.default.map(a.segments,function(e,b){var c=a.segments;var g=h.relevantContextLines;var d=c[b-1];b=c[b+1];if(e.type!==k.default.CONTEXT)g=null;else{c=0;var f=e.lines.length;!d||d.type!==k.default.ADDED&&d.type!==k.default.REMOVED||
(c=g);!b||b.type!==k.default.ADDED&&b.type!==k.default.REMOVED||(f-=g);g=f>c?{start:c-1,end:f}:null}return{hunk:a,segment:e,expandedRange:g}})}).flatMap(function(a){var e=a.segment;return f.default.map(e.lines,function(b,c){return new m(e.type,b[r[e.type]],b,e,a.hunk,d,{expanded:a.expandedRange&&c<a.expandedRange.end&&c>a.expandedRange.start})})}).value()}};n.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:array-util', location = '/static/bitbucket/internal/util/array.js' */
define("bitbucket/internal/util/array",["module","exports","lodash","bitbucket/internal/util/function"],function(l,d,a,e){function f(a){return function(c){for(var b=0;b<c.length;b++)if(a(c[b],b,c))return b;return-1}}function g(a){return function(c){var b=f(a)(c);return-1===b?[]:c.slice(b)}}function h(a){return function(c){var b=f(a)(c);return-1===b?c:c.slice(0,b)}}Object.defineProperty(d,"__esModule",{value:!0});a=babelHelpers.interopRequireDefault(a);var k=babelHelpers.interopRequireDefault(e);e=
a.default.flow(k.default.not,g);a=a.default.flow(k.default.not,h);d.default={skipWhile:e,takeWhile:a,findIndex:f,skipUntil:g,takeUntil:h};l.exports=d["default"]});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/curl-config.js' */
(function(){if(!window.WRM){window.WRM={}}window.curl={apiContext:WRM,defineContext:WRM}}());;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/lib/curl-0.7.3.js' */
(function(a){var P="0.7.3",u="curl",p="define",G,v,g,d=a.document,l=d&&(d.head||d.getElementsByTagName("head")[0]),V=l&&l.getElementsByTagName("base")[0]||null,i={},N={},c={},A="addEventListener" in a?{}:{loaded:1,complete:1},m={},b=m.toString,y,k={},f={},h=false,O,t=/\?|\.js\b/,e=/^\/|^[^:]+:\/\//,L=/(\.)(\.?)(?:$|\/([^\.\/]+.*)?)/g,E=/\/\*[\s\S]*?\*\/|(?:[^\\])\/\/.*?[\n\r]/g,C=/require\s*\(\s*["']([^"']+)["']\s*\)|(?:[^\\]?)(["'])/g,M,x;function Q(){}function D(X,W){return b.call(X).indexOf("[object "+W)==0}function B(X){var W;X.path=J(X.path||X.location||"");W=X.main||"./main";if(!n(W)){W="./"+W}X.main=s(W,X.name+"/");X.config=X.config;return X}function n(W){return W.charAt(0)=="."}function j(W){return e.test(W)}function o(X,W){return J(X)+"/"+W}function J(W){return W&&W.charAt(W.length-1)=="/"?W.substr(0,W.length-1):W}function s(ab,X){var ac,W,Z,Y,aa;ac=1;W=ab;if(n(W)){Y=true;W=W.replace(L,function(ad,ae,af,ag){if(af){ac++}return ag||""})}if(Y){Z=X.split("/");aa=Z.length-ac;if(aa<0){return ab}Z.splice(aa,ac);return Z.concat(W||[]).join("/")}else{return W}}function S(X){var W=X.indexOf("!");return{resourceId:X.substr(W+1),pluginId:W>=0&&X.substr(0,W)}}function U(){}function z(X,W){U.prototype=X||m;var Z=new U();U.prototype=m;for(var Y in W){Z[Y]=W[Y]}return Z}function F(){var X,aa,W;X=this;aa=[];function ab(ac,ad,ae){aa.push([ac,ad,ae])}function Y(ag,ad){var af,ac,ae=0;while((af=aa[ae++])){ac=af[ag];if(ac){ac(ad)}}}W=function Z(ad,ac){ab=ad?function(ae,af){ae&&ae(ac)}:function(ae,af){af&&af(ac)};W=Q;Y(ad?0:1,ac);Y=Q;aa=y};this.then=function(ac,ad,ae){ab(ac,ad,ae);return X};this.resolve=function(ac){X.resolved=ac;W(true,ac)};this.reject=function(ac){X.rejected=ac;W(false,ac)};this.progress=function(ac){Y(2,ac)}}function r(W){return W instanceof F}function H(W,Z,X,Y){if(r(W)){return W.then(Z,X,Y)}else{return Z(W)}}function q(Y,X,Z){var W;return function(){if(--Y>=0&&X){W=X.apply(y,arguments)}if(Y==0&&Z){Z(W)}return W}}x={toAbsId:function(ab,aa,W){var Y,X,Z;Y=s(ab,aa);if(n(Y)){return Y}Z=S(Y);X=Z.pluginId;Y=X||Z.resourceId;if(Y in W.pathMap){Y=W.pathMap[Y].main||Y}if(X){if(X.indexOf("/")<0&&!(X in W.pathMap)){Y=o(W.pluginPath,X)}Y=Y+"!"+Z.resourceId}return Y},createContext:function(W,X,ab,aa){var Z;Z=new F();Z.id=X||"";Z.isPreload=aa;Z.depNames=ab;Z.config=W;function ad(ae){return x.toAbsId(ae,Z.id,W)}function ac(ae){return x.resolvePathInfo(ad(ae),W).url}function Y(ag,ak,af){var ae,aj,ai,ah;ae=ak&&function(){ak.apply(y,arguments[0])};if(D(ag,"String")){if(ae){throw new Error("require(id, callback) not allowed")}aj=ad(ag);ai=k[aj];if(!(aj in k)){throw new Error("Module not resolved: "+aj)}ah=r(ai)&&ai.exports;return ah||ai}else{H(x.getDeps(x.createContext(W,Z.id,ag,aa)),ae,af)}}Z.require=Y;Y.toUrl=ac;Z.toAbsId=ad;return Z},createResourceDef:function(W,ad,ab){var aa,X,Z;aa=x.createContext(W,ad,y,ab);X=aa.resolve;Z=q(1,function(af){aa.deps=af;try{return x.executeDefFunc(aa)}catch(ae){aa.reject(ae)}});aa.resolve=function Y(ae){H(ab||h,function(){X((k[aa.id]=f[aa.url]=Z(ae)))})};aa.exportsReady=function ac(ae){H(ab||h,function(){if(aa.exports){Z(ae);aa.progress(N)}})};return aa},createPluginDef:function(W,aa,Z,Y){var X;X=x.createContext(W,Z,y,Y);return X},getCjsRequire:function(W){return W.require},getCjsExports:function(W){return W.exports||(W.exports={})},getCjsModule:function(X){var W=X.module;if(!W){W=X.module={id:X.id,uri:x.getDefUrl(X),exports:x.getCjsExports(X),config:function(){return X.config}};W.exports=W.exports}return W},getDefUrl:function(W){return W.url||(W.url=x.checkToAddJsExt(W.require.toUrl(W.id),W.config))},setApi:function(W){var Y,Z,X,aa,ab,ac;Y=u;Z=p;X=aa=a;ab=" already exists";if(W){ac=W.overwriteApi||W.overwriteApi;Y=W.apiName||W.apiName||Y;X=W.apiContext||W.apiContext||X;Z=W.defineName||W.defineName||Z;aa=W.defineContext||W.defineContext||aa;if(v&&D(v,"Function")){a[u]=v}v=null;if(g&&D(g,"Function")){a[p]=g}g=null;if(!ac){if(X[Y]&&X[Y]!=K){throw new Error(Y+ab)}if(aa[Z]&&aa[Z]!=I){throw new Error(Z+ab)}}}X[Y]=K;aa[Z]=I},config:function(aa){var ab,Z,W,X;if("baseUrl" in aa){aa.baseUrl=aa.baseUrl}if("main" in aa){aa.main=aa.main}if("preloads" in aa){aa.preloads=aa.preloads}if("pluginPath" in aa){aa.pluginPath=aa.pluginPath}if("dontAddFileExt" in aa||aa.dontAddFileExt){aa.dontAddFileExt=new RegExp(aa.dontAddFileExt||aa.dontAddFileExt)}ab=G;Z=z(ab,aa);Z.pathMap=z(ab.pathMap);W=aa.plugins||{};Z.plugins=z(ab.plugins);Z.paths=z(ab.paths,aa.paths);Z.packages=z(ab.packages,aa.packages);Z.pathList=[];function ac(af,am){var ah,aj,al,ak,an,ai;for(var ag in af){al=af[ag];if(D(al,"String")){al={path:af[ag]}}al.name=al.name||ag;an=Z;ak=S(J(al.name));ah=ak.resourceId;aj=ak.pluginId;if(aj){an=W[aj];if(!an){an=W[aj]=z(Z);an.pathMap=z(Z.pathMap);an.pathList=[]}delete af[ag]}if(am){ai=B(al);if(ai.config){ai.config=z(Z,ai.config)}}else{ai={path:J(al.path)}}ai.specificity=ah.split("/").length;if(ah){an.pathMap[ah]=ai;an.pathList.push(ah)}else{an.baseUrl=x.resolveUrl(al.path,Z)}}}function ad(af){var ag=af.pathMap;af.pathRx=new RegExp("^("+af.pathList.sort(function(ai,ah){return ag[ah].specificity-ag[ai].specificity}).join("|").replace(/\/|\./g,"\\$&")+")(?=\\/|$)");delete af.pathList}ac(aa.packages,true);ac(aa.paths,false);for(X in W){var Y=x.toAbsId(X+"!","",Z);Z.plugins[Y.substr(0,Y.length-1)]=W[X]}W=Z.plugins;for(X in W){W[X]=z(Z,W[X]);var ae=W[X].pathList;if(ae){W[X].pathList=ae.concat(Z.pathList);ad(W[X])}}for(X in ab.pathMap){if(!Z.pathMap.hasOwnProperty(X)){Z.pathList.push(X)}}ad(Z);return Z},checkPreloads:function(W){var X;X=W&&W.preloads;if(X&&X.length>0){H(h,function(){h=x.getDeps(x.createContext(G,y,X,true))})}},resolvePathInfo:function(Z,X){var Y,ab,aa,W;Y=X.pathMap;if(!j(Z)){aa=Z.replace(X.pathRx,function(ac){ab=Y[ac]||{};W=ab.config;return ab.path||""})}else{aa=Z}return{config:W||G,url:x.resolveUrl(aa,X)}},resolveUrl:function(Y,W){var X=W.baseUrl;return X&&!j(Y)?o(X,Y):Y},checkToAddJsExt:function(X,W){return X+((W||G).dontAddFileExt.test(X)?"":".js")},loadScript:function(Z,ab,X){var Y=d.createElement("script");function aa(ac){ac=ac||a.event;if(ac.type=="load"||A[Y.readyState]){delete c[Z.id];Y.onload=Y.onreadystatechange=Y.onerror="";ab()}}function W(ac){X(new Error("Syntax or http error: "+Z.url))}Y.onload=Y.onreadystatechange=aa;Y.onerror=W;Y.type=Z.mimetype||"text/javascript";Y.charset="utf-8";Y.async=!Z.order;Y.src=Z.url;c[Z.id]=Y;l.insertBefore(Y,V);return Y},extractCjsDeps:function(X){var Y,W=[],Z;Y=typeof X=="string"?X:X.toSource?X.toSource():X.toString();Y.replace(E,"").replace(C,function(aa,ac,ab){if(ab){Z=Z==ab?y:Z}else{if(!Z){W.push(ac)}}return""});return W},fixArgs:function(X){var ac,aa,Y,ab,W,Z;W=X.length;Y=X[W-1];ab=D(Y,"Function")?Y.length:-1;if(W==2){if(D(X[0],"Array")){aa=X[0]}else{ac=X[0]}}else{if(W==3){ac=X[0];aa=X[1]}}if(!aa&&ab>0){Z=true;aa=["require","exports","module"].slice(0,ab).concat(x.extractCjsDeps(Y))}return{id:ac,deps:aa||[],res:ab>=0?Y:function(){return Y},cjs:Z}},executeDefFunc:function(Y){var X,W;W=Y.cjs?Y.exports:y;X=Y.res.apply(W,Y.deps);if(X===y&&Y.exports){X=Y.module?(Y.exports=Y.module.exports):Y.exports}return X},defineResource:function(X,W){X.res=W.res;X.cjs=W.cjs;X.depNames=W.deps;x.getDeps(X)},getDeps:function(X){var ab,af,ai,ad,ag,aa,W,aj,ah;ai=[];af=X.depNames;ad=af.length;if(af.length==0){Y()}function ae(am,ak,al){ai[ak]=am;if(al){aj(am,ak)}}aj=q(ad,ae,ac);ah=q(ad,ae,Y);for(ab=0;ab<ad;ab++){W=af[ab];if(W in M){ah(M[W](X),ab,true);if(X.exports){X.progress(i)}}else{if(!W){ah(y,ab,true)}else{Z(W,ab)}}}return X;function Z(am,al){var an,ak,ap,ao;an=q(1,function(aq){ak(aq);ah(aq,al)});ak=q(1,function(aq){aj(aq,al)});ap=x.fetchDep(am,X);ao=r(ap)&&ap.exports;if(ao){ak(ao)}H(ap,an,X.reject,X.exports&&function(aq){if(ap.exports){if(aq==i){ak(ap.exports)}else{if(aq==N){an(ap.exports)}}}})}function Y(){X.resolve(ai)}function ac(){X.exportsReady&&X.exportsReady(ai)}},fetchResDef:function(W){x.getDefUrl(W);x.loadScript(W,function(){var X=O;O=y;if(W.useNet!==false){if(!X||X.ex){W.reject(new Error(((X&&X.ex)||"define() missing or duplicated: "+W.url)))}else{x.defineResource(W,X)}}},W.reject);return W},fetchDep:function(ai,X){var W,Z,ae,ab,ah,ad,aa,aj,af,Y,ac,ag;W=X.toAbsId;Z=X.isPreload;ae=X.config||G;ab=S(W(ai));aj=ab.resourceId;ah=ab.pluginId||aj;af=x.resolvePathInfo(ah,ae);if(ab.pluginId){ad=ah}else{ad=af.config.moduleLoader||af.config.moduleLoader;if(ad){aj=ah;ah=ad;af=x.resolvePathInfo(ad,ae)}}if(ah in k){Y=k[ah]}else{if(af.url in f){Y=k[ah]=f[af.url]}else{Y=x.createResourceDef(af.config,ah,Z);Y.url=x.checkToAddJsExt(af.url,af.config);k[ah]=f[af.url]=Y;x.fetchResDef(Y)}}if(ah==ad){ac=new F();ag=ae.plugins[ad]||ae;H(Y,function(am){var ao,ak,an;an=am.dynamic;if("normalize" in am){aj=am.normalize(aj,W,Y.config)||""}else{aj=W(aj)}ak=ad+"!"+aj;ao=k[ak];if(!(ak in k)){ao=x.createPluginDef(ag,ak,aj,Z);if(!an){k[ak]=ao}var al=function(ap){ao.resolve(ap);if(!an){k[ak]=ap}};al.resolve=al;al.reject=al.error=ao.reject;am.load(aj,ao.require,al,ag)}if(ac!=ao){H(ao,ac.resolve,ac.reject,ac.progress)}},ac.reject)}return ac||Y},getCurrentDefName:function(){var W;if(!D(a.opera,"Opera")){for(var X in c){if(c[X].readyState=="interactive"){W=X;break}}}return W}};M={require:x.getCjsRequire,exports:x.getCjsExports,module:x.getCjsModule};function K(){var X=[].slice.call(arguments),W;if(D(X[0],"Object")){W=X.shift();R(W)}return new w(X[0],X[1],X[2])}function R(W){if(W){x.setApi(W);G=x.config(W);x.checkPreloads(W);if("main" in W){setTimeout(function(){var X;X=x.createContext(G,y,[].concat(W.main));x.getDeps(X)},0)}}}function w(Y,ab,X,aa){var Z,W;W=x.createContext(G,y,[].concat(Y));this["then"]=Z=function(ac,ad){H(W,function(ae){if(ac){ac.apply(y,ae)}},function(ae){if(ad){ad(ae)}else{throw ae}});return this};this["next"]=function(ae,ac,ad){return new w(ae,ac,ad,W)};this["config"]=R;if(ab||X){Z(ab,X)}H(aa,function(){x.getDeps(W)})}K.version=P;K.config=R;function T(W){var Z,X,Y;Z=W.id;if(Z==y){if(O!==y){O={ex:"Multiple anonymous defines in url"}}else{if(!(Z=x.getCurrentDefName())){O=W}}}if(Z!=y){X=k[Z];if(!(Z in k)){Y=x.resolvePathInfo(Z,G);X=x.createResourceDef(Y.config,Z);k[Z]=X}if(!r(X)){throw new Error("duplicate define: "+Z)}X.useNet=false;x.defineResource(X,W)}}function I(){var W=x.fixArgs(arguments);T(W)}I.amd={plugins:true,jQuery:true,curl:P};G={baseUrl:"",pluginPath:"curl/plugin",dontAddFileExt:t,paths:{},packages:{},plugins:{},pathMap:{},pathRx:/$^/};v=a[u];g=a[p];if(!v||D(v,"Function")){x.setApi()}else{a[u]=y;R(v)}k[u]=K;k["curl/_privileged"]={core:x,cache:k,config:function(){return G},_define:T,_curl:K,Promise:F}}(this.window||(typeof global!="undefined"&&global)||this));;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/lib/curl-css-0.7.3.js' */
(function(B){var z="createElement",s="parentNode",f=B.setTimeout,H=B.document,k,x=H&&H.createStyleSheet&&!(H.documentMode>=10),v=[],u=[],C=[],i=12,F,g="HTTP or network error.",l={};if(H){k=H.head||H.getElementsByTagName("head")[0];if(x){F=c}else{F=t}}function q(J,I){l[J]=l[J]||I}function y(){var I;I=H[z]("link");I.rel="stylesheet";I.type="text/css";return I}function r(J,I){J.onload=function(){q("load",true);I()}}function n(J,I){J.onerror=function(){q("error",true);I()}}function c(K,I,M){var L;C.push({url:K,cb:I,eb:function J(){M(new Error(g))}});L=h();if(L){m(L)}}function m(K){var J,I;J=C.shift();I=K.styleSheet;if(J){K.onload=function(){J.cb(J.ss);m(K)};K.onerror=function(){J.eb();m(K)};J.ss=I.imports[I.addImport(J.url)]}else{e(K);G(K)}}function G(I){u.push(I)}function h(){var I;I=u.shift();if(!I&&v.length<i){I=H.createElement("style");v.push(I);k.appendChild(I)}return I}function b(L){var K,J,M;if(!L.href||!o()){return false}K=false;try{J=L.sheet;if(J){M=J.cssRules;K=M===null;if(!K&&M){J.insertRule("-curl-css-test {}",0);J.deleteRule(0);K=true}}}catch(I){K=Object.prototype.toString.call(window.opera)!="[object Opera]"&&/security|denied/i.test(I.message)}return K}function e(I){I.onload=I.onerror=j}function w(I){return I.onload==j||!I.onload}function E(J,K,I){if(l.load){return}if(b(J)){I(J.sheet)}else{if(!w(J)){f(function(){E(J,K,I)},K)}}}function A(J,K,I){if(l.error){return}}function p(J,L,I){function K(){if(w(J)){return}e(J);I(J.sheet)}r(J,K);E(J,L,K)}function D(K,L,I){function J(){if(w(K)){return}e(K);I(new Error(g))}n(K,J);A(K,L,J)}function t(J,I,K,M){var L;L=y();p(L,M,I);D(L,M,K);L.href=J;k.appendChild(L)}function d(I){function J(){if(o()){I()}else{f(J,10)}}J()}function o(){return !H.readyState||H.readyState=="complete"}function a(I,J){return I.lastIndexOf(".")<=I.lastIndexOf("/")?I+"."+J:I}function j(){}WRM.define("curl/plugin/css",{normalize:function(N,J){var L,M;if(!N){return N}L=[N];M=[];for(var K=0,I=L.length;K<I;K++){M.push(J(L[K]))}return M.join(",")},load:function(R,L,U,K){var Q,J,V,S,M,O;Q=[];J=[R||""];V=K.cssWatchPeriod||50;S=K.cssNoWait;M=J.length;function N(W){if(J.length>1){Q.push(W)}if(--M==0){U(J.length==1?W:Q)}}function P(X){var W;W=U.reject||function(Y){throw Y};W(X)}for(O=0;O<J.length;O++){R=J[O];var I,T;I=a(L.toUrl(R),"css");if(S){T=y();T.href=I;k.appendChild(T);N(T.sheet||T.styleSheet)}else{F(I,N,P,V)}}},"plugin-builder":"./builder/css",pluginBuilder:"./builder/css"})})(this);;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/lib/curl-js-0.7.3.js' */
(function(b,c,a){WRM.define("curl/plugin/js",["curl/_privileged"],function(m){var f={},j=[],h=c&&c.createElement("script").async==true,l,k,g;l=m.Promise;function i(n,o){return n.lastIndexOf(".")<=n.lastIndexOf("/")?n+"."+o:n}function e(o,u,q){var v,s,p;v=new Date().valueOf()+(o.timeoutMsec||300000);function n(){s=true;if(o.exports){o.resolved=a(o.exports)}if(!o.exports||o.resolved){u(p)}else{q()}}function r(w){s=true;q(w)}function t(){if(!s){if(v<new Date()){q()}else{setTimeout(t,10)}}}if(q&&o.exports){setTimeout(t,10)}p=m.core.loadScript(o,n,r)}function d(n,o){e(n,function(){var p=j.shift();k=j.length>0;if(p){d.apply(null,p)}o.resolve(n.resolved||true)},function(p){o.reject(p)})}return{dynamic:true,normalize:function(q,p,o){var n=q.indexOf("!");return n>=0?p(q.substr(0,n))+q.substr(n):p(q)},load:function(o,r,w,q){var s,t,u,v,n,p,y;s=o.indexOf("!order")>0;t=o.indexOf("!exports=");u=t>0&&o.substr(t+9);v="prefetch" in q?q.prefetch:true;o=s||t>0?o.substr(0,o.indexOf("!")):o;n=i(r.toUrl(o),"js");function x(z){(w.error||function(A){throw A})(z)}if(n in f){if(f[n] instanceof l){f[n].then(w,x)}else{w(f[n])}}else{p={name:o,url:n,order:s,exports:u,timeoutMsec:q.timeout};f[n]=y=new l();y.then(function(z){f[n]=z;w(z)},x);if(s&&!h&&k){j.push([p,y]);if(v){p.mimetype="text/cache";e(p,function(z){z&&z.parentNode.removeChild(z)},function(){});p.mimetype=""}}else{k=k||s;d(p,y)}}}}})}(this,this.document,function(){try{return eval(arguments[0])}catch(ex){return}}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/jquery.js' */
WRM.define("wrm/jquery",function(){return AJS.$});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/underscore.js' */
WRM.define("wrm/_",function(){var a={filter:function(f,d){var b=[];for(var c=0;c<f.length;++c){var e=f[c];if(d(e)){b.push(e)}}return b},map:function(d,c){var e=[];for(var b=0;b<d.length;++b){e.push(c(d[b]))}return e},each:function(d,c){if(d.length===+d.length){for(var b=0;b<d.length;++b){c(d[b])}}else{for(var e in d){if(d.hasOwnProperty(e)){c(d[e],e)}}}},bind:function(c,b){return function(){c.apply(b,Array.prototype.slice.call(arguments))}},isArray:function(b){return Object.prototype.toString.call(b)=="[object Array]"},isUndefined:function(b){return b===void 0},isNull:function(b){return b===null}};return a});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/builder.js' */
WRM.define("wrm/builder",function(){var a=function(){this.wrmKeyAttribute="data-wrm-key";this.wrmBatchTypeAttribute="data-wrm-batch-type"};a.prototype={initialize:function(c){var b=c.querySelectorAll("script[data-wrm-key][data-wrm-batch-type]"),d=c.querySelectorAll("link[data-wrm-key][data-wrm-batch-type]"),e={modules:[],contexts:[]};this._inspectTagArray(b,e);this._inspectTagArray(d,e);return e},_inspectTagArray:function(e,b){for(var d=0;d<e.length;d++){var c=e[d];this.addResource(c.getAttribute(this.wrmKeyAttribute),c.getAttribute(this.wrmBatchTypeAttribute),b)}},addResource:function(g,e,b){var f=g.split(",");for(var d=0;d<f.length;d++){var c=f[d];if(c[0]==="-"){continue}if(e==="resource"){this._addToLoadedList(b.modules,c)}else{if(e==="context"){this._addToLoadedList(b.contexts,c)}else{AJS.log("Unknown batch type: "+e)}}}},_addToLoadedList:function(c,b){if(c.indexOf(b)!==-1){return}c.push(b)}};return a});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/context-path.js' */
WRM.define("wrm/context-path",function(){return AJS.contextPath});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/ie-only-filter.js' */
WRM.define("wrm/ie-only-filter",["wrm/jquery","wrm/_"],function(c,a){function b(d){var e=c.browser.msie;return a.filter(d,function(f){return f.ieOnly?e:true})}return b});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/conditional-comment-filter.js' */
WRM.define("wrm/conditional-comment-filter",["wrm/jquery","wrm/_"],function(c,a){function b(e){var f=c.browser.msie;var d=c.browser.version;return a.filter(e,function(h){var g=h.conditionalComment;if(!g){return true}if(!f||d>9){return false}g=g.toLowerCase();switch(g){case"ie":return true;case"lt ie 9":return d<9;case"lte ie 9":return d<=9;case"ie 9":return d==9;case"gt ie 9":return d>9;case"gte ie 9":return d>=9;case"lt ie 8":return d<8;case"lte ie 8":return d<=8;case"ie 8":return d==8;case"gt ie 8":return d>8;case"gte ie 8":return d>=8;default:AJS.log("Cannot parse conditional comment "+g);return false}})}return b});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/require-handler.js' */
WRM.define("wrm/require-handler",["wrm/jquery","wrm/_","wrm/builder","wrm/context-path","wrm/conditional-comment-filter","wrm/ie-only-filter"],function(d,i,j,e,h,a){var g=/^wr!(.*)$/,c=/^wrc!(.*)$/,f=/^.+!/;var b=function(){this._requireCache={};this._requestedResources={contexts:[],webResources:[]};this._requestInFlight=false;this._requestWaiting=false};b.prototype={require:function(o,k){if(!i.isArray(o)){o=[o]}if(!this._requireCache.hasOwnProperty(o)){var l=d.Deferred();function m(){this._resolveAsync(o).then(l.resolve,l.reject)}var n=window.WRM&&window.WRM.InOrderLoader;if(n!==undefined){n.registerAllResolvedCallback(m.bind(this))}else{m.call(this)}this._requireCache[o]=l.promise()}var p=this._requireCache[o];if(k){p.done(function(){k.apply(this,arguments)})}return p},_resolveAsync:function(m){this._addToRequestedResources(m);var k=d.Deferred();var l=this;if(this._requestInFlight===false){this._requestInFlight=this._getScriptsForResources().done(this._processResourceResponse.bind(this,k,m))}else{if(this._requestWaiting===false){this._requestWaiting=k;this._requestInFlight.done(function(){l._requestInFlight=l._getScriptsForResources().done(l._processResourceResponse.bind(l,k,m));l._requestWaiting=false})}else{return this._requestWaiting.promise()}}return k.promise()},_processResourceResponse:function(t,l,o){this._requestInFlight=false;var r=this;if(o.unparsedData){window.WRM._unparsedData||(window.WRM._unparsedData={});i.each(o.unparsedData,function(v,u){window.WRM._unparsedData[u]=v});window.WRM._dataArrived()}if(o.unparsedErrors){window.WRM._unparsedErrors||(window.WRM._unparsedErrors={});i.each(o.unparsedErrors,function(v,u){window.WRM._unparsedErrors[u]=v});window.WRM._dataArrived()}var m=[];var p=[];var s=this._filter(o.resources);for(var q=0;q<s.length;++q){var n=s[q];var k=n.url;this._builder.addResource(n.key,n.batchType,this._loadedResources);if(n.resourceType==="JAVASCRIPT"){if(!this._isJSInInitLoad(k)){m.push("js!"+k+"!order")}}else{if(n.resourceType==="CSS"){if(!this._isCSSInInitLoad(k)){if(n.media&&"all"!==n.media){p.push(n)}else{m.push("css!"+k)}}}else{AJS.log("Unknown resource type required: "+k)}}}AJS.log("Downloading resources:\n"+m.join("\n"));WRM.curl(m,function(){i.each(p,function(v){r._loadCssImmediate(v)});var u=i.map(l,function(){return window});t.resolveWith(r,u)},function(){t.rejectWith(r,arguments)})},_loadCssImmediate:function(l){AJS.log("WARN: asynchronously loading a CSS resource containing a media query: "+l.url);var k='<link rel="stylesheet" type="text/css" href="'+l.url+'" media="'+l.media+'" />';d(k).appendTo("head")},_getScriptsForResources:function(){if(!this._builder){this._builder=new j();this._loadedResources=this._builder.initialize(document)}else{this._updateLoadedResourcesFromDom()}var k=d.Deferred();d.ajax({url:e()+"/rest/webResources/1.0/resources",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({r:this._requestedResources.webResources,c:this._requestedResources.contexts,xc:this._loadedResources.contexts,xr:this._loadedResources.modules}),success:k.resolve,error:k.reject});this._requestedResources.webResources=[];this._requestedResources.contexts=[];return k.promise()},_updateLoadedResourcesFromDom:function(){function l(m,n){i.each(m,function(o){if(n.indexOf(o)===-1){n.push(o)}})}var k=this._builder.initialize(document);l(k.modules,this._loadedResources.modules);l(k.contexts,this._loadedResources.contexts)},_addToRequestedResources:function(l){var k=this;i.each(l,function(n){var m;if(m=n.match(g)){k._requestedResources.webResources.push(m[1])}else{if(m=n.match(c)){k._requestedResources.contexts.push(m[1])}else{k._requestedResources.webResources.push(n.replace(f,""))}}})},_isJSInInitLoad:function(k){return d("script[src='"+k+"']").length>0},_isCSSInInitLoad:function(k){return d("link[href='"+k+"']").length>0},_filter:function(l){if(!this._filters){this._filters=[h,a]}var k=l;i.each(this._filters,function(m){k=m(k)});return k}};return b});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/index.js' */
WRM.curl(["wrm/require-handler"],function(b){var a;WRM.require=function(d,c){if(!a){a=new b()}return a.require(d,c)};if(typeof define==="function"){define("wrm/require",[],function(){return WRM.require})}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:mixin-util', location = '/static/bitbucket/internal/util/mixin.js' */
define("bitbucket/internal/util/mixin",["module","exports","lodash"],function(b,a,d){Object.defineProperty(a,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(d);a.default=function(){var a=[].slice.call(arguments);return{into:function(b){return c.default.assign.apply(c.default,[b].concat(a))}}};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:text-view', location = '/static/bitbucket/internal/feature/file-content/text-view/text-view.js' */
define("bitbucket/internal/feature/file-content/text-view/text-view","module exports jquery lodash bitbucket/internal/bbui/widget/widget bitbucket/internal/feature/file-content/stash-codemirror/stash-codemirror bitbucket/internal/feature/file-content/text-view/common-modes bitbucket/internal/feature/file-content/text-view/text-view-api bitbucket/internal/feature/file-content/text-view/text-view-scrolling bitbucket/internal/util/determine-language bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/horizontal-keyboard-scrolling bitbucket/internal/util/object bitbucket/internal/util/performance".split(" "),
function(t,k,l,u,v,w,x,y,z,A,B,C,D,E,F){function d(a,b){m.default.call(this,b);var e=this;n.default.setupAPI(this);this._internalLines={ADDED:{},REMOVED:{},CONTEXT:{}};this._editors=[];this._gutters=[];this._$container=a;this._$fileToolbar=this._$container.siblings(".file-toolbar");this._$container.addClass("text-view");this.registerGutter("CodeMirror-linewidget",{weight:0});this._addDestroyable(function(){e._$container.removeClass("text-view");e._editors.forEach(function(c){c.destroy()});e._editors=
null;e._gutters=null;e._$container=null});this._addDestroyable(p.default.chain().on("bitbucket.internal.feature.sidebar.*",this.refresh))}function G(a){var b=a.view;a.eachLine(function(a){a.handles.all.forEach(function(c){b.addLineClass(c,"wrap","line")})})}Object.defineProperty(k,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(l),f=babelHelpers.interopRequireDefault(u),m=babelHelpers.interopRequireDefault(v),q=babelHelpers.interopRequireDefault(w),H=babelHelpers.interopRequireDefault(x),
n=babelHelpers.interopRequireDefault(y);l=babelHelpers.interopRequireDefault(z);var I=babelHelpers.interopRequireDefault(A),p=babelHelpers.interopRequireDefault(B);babelHelpers.interopRequireDefault(C);var r=babelHelpers.interopRequireDefault(D),g=babelHelpers.interopRequireDefault(E),J=babelHelpers.interopRequireDefault(F);g.default.inherits(d,m.default);n.default.mixInto(d.prototype);l.default.mixInto(d.prototype);d.defaults={focusPoint:.2};d.DEFAULT_LINE_ENDING=q.default.DEFAULT_LINE_ENDING;d.prototype.init=
function(){p.default.trigger("bitbucket.internal.feature.fileContent.textViewInitializing",null,this._api,this._options);r.default.init()};d.prototype.markText=function(a,b,e,c){var d=this;return a.handles.all.map(function(a){var f=d._editorForHandle(a);a=f.getLineNumber(a._handle);return f.markText({line:a+b.lineOffset,ch:b.ch},{line:a+e.lineOffset,ch:e.ch},{className:c.className})})};d.prototype.refresh=f.default.debounce(function(){f.default.invokeMap(this._editors,"refresh");this.trigger("resize")},
50);d.prototype._createEditor=function(a,b){a=a||{};b=new q.default(b&&b.length?b[0]:this._$container[0],h.default.extend({},a,{attachScroll:this._options.attachScroll,autoResizing:this._options.autoResizing,gutters:this._getGutters(a.gutterFilter),scrollStyle:this._options.scrollStyle,value:""}));b._gutterFilter=a.gutterFilter;this._editors.push(b);r.default.setEditors(this._editors);this._$firstEditor||(this._$firstEditor=(0,h.default)(b.getWrapperElement()));return b};d.prototype._editorForHandle=
function(a){throw Error("TextView implementation must define _editorForHandle.");};d.prototype._editorInnerOffset=function(){return this._$firstEditor[0].getBoundingClientRect().top-this._$container[0].getBoundingClientRect().top};d.prototype._getChangeAttributes=function(){return{}};d.prototype._getGutters=function(a){var b=this._gutters;a&&(b=b.filter(a));b=b.sort(function(a,c){return a.weight-c.weight});return f.default.chain(b).map("name").uniq().value()};d.prototype._modify=function(a,b,d){var c=
this,e=[].slice.call(arguments);f.default.forEach(d,function(a){c._internalLines[a.lineType||"CONTEXT"][a.lineNumber]=a});this.operation(function(){c._acceptModification.apply(c,e);c.trigger("internal.acceptedModification",e);var b=h.default.extend({type:a,linesAdded:d.length,eachLine:function(a){var b=(c._options.asyncDiffModifications?J.default.frameBatchedMap(a,{min:500,initial:200},c.operation.bind(c)):function(b){var c=h.default.Deferred();c.resolve(b.map(a));return c})(d);c._addDestroyable(b.reject.bind(b));
return b.promise()},view:c._api},c._getChangeAttributes.apply(c,e));f.default.chain(d).map("handles").values().flatten().compact().forEach(g.default.freeze).value();f.default.chain(d).map("handle").compact().forEach(g.default.freeze).value();f.default.chain(d).map("line").compact().forEach(g.default.freeze).value();g.default.deepFreeze(d,!1);g.default.deepFreeze(b,!1);G(b);"INITIAL"===a&&c.trigger("internal-load",b);c.trigger("internal-change",b);c.refresh()})};d.prototype._highlight=function(a){this._editors&&
this._editors.forEach(function(b){b._highlight(a)})};d.prototype._syntaxHighlighting=function(a,b,d){var c=I.default.fromFileInfo({firstLine:b,path:a});(c.wrmKey?WRM.require("wr!"+c.wrmKey):c.builtIn&&!f.default.includes(H.default,c.mode)?WRM.require("wr!com.atlassian.bitbucket.server.bitbucket-highlight:"+c.mode):h.default.Deferred().resolve()).done(function(){d.setOption("mode",c.mime)})};d.prototype._whenOpDone=function(a){this._opCallbacks?this._opCallbacks.push(a):a()};k.default=d;t.exports=
k["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:text-view', location = '/static/bitbucket/internal/feature/file-content/text-view/text-view-scrolling.js' */
define("bitbucket/internal/feature/file-content/text-view/text-view-scrolling",["module","exports","jquery","bitbucket/internal/feature/file-content/text-view/request-window-scrolls","bitbucket/internal/util/mixin"],function(h,f,g,k,l){Object.defineProperty(f,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(g),n=babelHelpers.interopRequireDefault(k);g=babelHelpers.interopRequireDefault(l);f.default={mixInto:(0,g.default)({scrollHandleIntoFocus:function(a){var b=this._editorForHandle(a),
c=b.getScrollInfo();a=c.height>c.clientHeight?b.heightAtLine(a._handle.lineNo(),"local"):0;this._scrollToFocusedOffset(a,c,b)},scrollHandleIntoView:function(a){var b=this._editorForHandle(a);b.lastLine()===a._handle.lineNo()?b.scrollTo(null,b.heightAtLine(b.lastLine()+1)):b.scrollIntoView(a._handle.lineNo()+1)},scrollToFileComments:function(a,b){var c=this._editors[0],e=c.getScrollInfo(),d=(0,m.default)("#page").offset().top;null!=b&&a>d&&a+b<d+e.clientHeight||this._scrollToFocusedOffset(a-this._editorInnerOffset(),
e,c)},scrollToTop:function(){this._scrollToSourcePosition(null,0)},scrollToWidgetOffset:function(a,b,c){var e=this._editorForHandle(a),d=e.getScrollInfo();if(d.height>d.clientHeight){if(a=e.heightAtLine(a._handle.lineNo(),"local"),b=Math.max(0,a+b),null!=c&&(a=b-d.top,0<=a&&a<d.clientHeight-c))return}else b=0;this._scrollToFocusedOffset(b,d,e)},_requestWindowScrolls:function(a){var b=this;return(0,n.default)(this,a).done(function(a){b._scrollToSourcePosition=function(c,d){a.scroll(c,null!=d?Math.max(0,
d+b._editorInnerOffset()):null)}}).fail(function(a){b._scrollToSourcePosition=function(a,b){throw Error("Not implemented");}})},_scrollToFocusedOffset:function(a,b,c){c.getInputField().blur();this._scrollToSourcePosition(null,a-b.clientHeight*this._options.focusPoint)},_scrollToSourcePosition:function(){throw Error("_scrollToSourcePosition can't be called until _requestWindowScrolls returns.");}}).into};h.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:text-view', location = '/static/bitbucket/internal/feature/file-content/text-view/text-view-api.js' */
define("bitbucket/internal/feature/file-content/text-view/text-view-api","module exports jquery lodash bitbucket/internal/util/array bitbucket/internal/util/function bitbucket/internal/util/mixin bitbucket/internal/util/object".split(" "),function(n,k,l,p,q,r,t,g){function u(a){a.classList.add("bitbucket-gutter-marker");return a}Object.defineProperty(k,"__esModule",{value:!0});var v=babelHelpers.interopRequireDefault(l),f=babelHelpers.interopRequireDefault(p),w=babelHelpers.interopRequireDefault(q),
h=babelHelpers.interopRequireDefault(r);l=babelHelpers.interopRequireDefault(t);var x=babelHelpers.interopRequireDefault(g);g={addLineClass:function(a,b,c){this._editorForHandle(a).addLineClass(a._handle,b,c);return a},addLineWidget:function(a,b,c){var d=this._editorForHandle(a).addLineWidget(a._handle,b,c),e=this;e.trigger("widgetAdded");return{clear:function(){d.off("redraw");d.clear();e.trigger("widgetCleared")},changed:function(){d.changed();e.trigger("widgetChanged")},onRedraw:function(a){d.on("redraw",
a)},getHeight:function(){return d.height}}},getLine:function(a){return a._handle.text},getLineHandle:function(a){a&&null==a.lineNumber&&(a=(0,v.default)(a),a.is(".line-locator")||(a=a.closest(".line").find(".line-locator")),a={fileType:a.attr("data-file-type"),lineType:a.attr("data-line-type"),lineNumber:a.attr("data-line-number")});var b=a&&this._internalLines[a.lineType||"CONTEXT"][a.lineNumber]&&this._internalLines[a.lineType||"CONTEXT"][a.lineNumber].handles;return b&&(b[a.fileType]||b.all[0])},
operation:function(a){if(this._editors){a=this._editors.reduce(function(a,c){return c.operation.bind(c,a)},h.default.arity(a.bind(null),0));try{return this._inOp||(this._opCallbacks=[],this._inOp=0),this._inOp++,a()}finally{if(this._inOp--,!this._inOp){try{h.default.applyAll(this._opCallbacks)}catch(b){setTimeout(function(){throw b;},0)}this._opCallbacks=null}}}},registerGutter:function(a,b){b=b||{};if(this._editors){this._gutters.push({name:a,weight:b.weight||0,fileType:b.fileType});this._gutters=
x.default.uniqueFromArray(this._gutters,["name","fileType"]).sort(function(a,b){return a.weight-b.weight||a.name.localeCompare(b.name)});var c=this;this._editors.forEach(function(a){var b=c._getGutters(a._gutterFilter);f.default.isEqual(a.getOption("gutters"),b)||a.setOption("gutters",b)})}},clearGutter:function(a){this._editors.forEach(function(b){b.clearGutter(a)})},removeLineClass:function(a,b,c){this._editorForHandle(a).removeLineClass(a._handle,b,c);return a},setGutterMarker:function(a,b,c){this._editorForHandle(a).setGutterMarker(a._handle,
b,u(c));return a},addContainerClass:function(a){this._$container.addClass(a);this.refresh()},removeContainerClass:function(a){this._$container.removeClass(a);this.refresh()}};var y=Object.keys(g),m={destroy:0,load:1,change:1};k.default={mixInto:(0,l.default)(g).into,setupAPI:function(a){var b={};a._api={};var c=[a].concat(y);f.default.bindAll.apply(f.default,c);f.default.assign(a._api,{on:function(d,c){if(f.default.has(m,d)){b[d]||(b[d]=[]);var e=h.default.arity(c.bind(a._api),m[d]);b[d].push({f:c,
wrappedF:e});a.on(d,e)}},off:function(c,e){b[c]&&(e=w.default.findIndex(h.default.dotEq("f",e))(b[c]||[]),-1!==e&&(a.off(c,b[c][e].wrappedF),b[c].splice(e,1)))}},f.default.pick.apply(f.default,c))}};n.exports=k["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:text-view', location = '/static/bitbucket/internal/feature/file-content/text-view/common-modes.js' */
(function(a){"object"===("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"object"===("undefined"===typeof module?"undefined":babelHelpers.typeof(module))?exports.commonModes=a():define("bitbucket/internal/feature/file-content/text-view/common-modes",[],a)})(function(){return"clike commonlisp css htmlmixed javascript markdown perl php python ruby sass shell sql vbscript xml yaml".split(" ")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:text-view', location = '/static/bitbucket/internal/feature/file-content/text-view/attach-simple-scroll-behavior.js' */
define("bitbucket/internal/feature/file-content/text-view/attach-simple-scroll-behavior",["module","exports","jquery"],function(g,a,h){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,b,d){return b?a._requestWindowScrolls({scrollSizing:function(){return b.getScrollInfo()},scroll:function(a,c){b.scrollTo(null,c)},resize:function(e,c){var b=d.data("height"),f=d.data("width");c!==b&&(d.height(c),d.data("height",c));e!==f&&d.data("width",e);c===b&&e===f||a.refresh()},onSizeChange:function(b){a.on("resize",
b)}}):k.default.Deferred().reject()};var k=babelHelpers.interopRequireDefault(h);g.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:text-view', location = '/static/bitbucket/internal/feature/file-content/text-view/request-window-scrolls.js' */
define("bitbucket/internal/feature/file-content/text-view/request-window-scrolls","module exports bacon jquery lodash bitbucket/internal/util/bacon bitbucket/internal/util/performance bitbucket/internal/util/region-scroll-forwarder bitbucket/internal/util/request-page-scrolling bitbucket/internal/util/scroll".split(" "),function(g,c,h,t,u,v,w,x,y,z){Object.defineProperty(c,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(h),A=babelHelpers.interopRequireDefault(t),B=babelHelpers.interopRequireDefault(u),
l=babelHelpers.interopRequireDefault(v),C=babelHelpers.interopRequireDefault(w),D=babelHelpers.interopRequireDefault(x),E=babelHelpers.interopRequireDefault(y),F=babelHelpers.interopRequireDefault(z);c.default=function(a,d){return(0,E.default)().done(function(e){function c(a){if(a.wheelDeltaX&&a.wheelDeltaY){if(Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)){var b=d.scrollSizing();d.scroll(b.left-a.wheelDeltaX*f,null)}else m.scrollTop(m.scrollTop()+a.wheelDeltaY*f);a.stopImmediatePropagation();a.preventDefault()}}
var n=new k.default.Bus,b=a._$container.addClass("full-window-scrolling"),g=b.closest(".file-content"),p,h=F.default.fakeScroll(b[0]);b=k.default.mergeAll(["bitbucket.internal.feature.sidebar.expandEnd","bitbucket.internal.feature.sidebar.collapseEnd","bitbucket.internal.feature.commit.difftree.collapseAnimationFinished","bitbucket.internal.layout.body.resize"].map(l.default.events).concat(l.default.getWindowSizeProperty().toEventStream())).toProperty();a._addDestroyable(e);a._addDestroyable(b.scan(0,
function(a,b){return b&&b.hasOwnProperty("width")&&b.hasOwnProperty("height")&&b||a}).filter(B.default.identity).onValue(function(b){p=b.height-a._$fileToolbar.outerHeight();d.resize(a._$container.width(),p)}));b=C.default.enqueueCapped(a._whenOpDone.bind(a),function(){a._$container&&e.refresh()});d.onSizeChange(b);a.on("widgetAdded",b);a.on("widgetChanged",b);a.on("widgetCleared",b);a.on("internal-change",b);if(a._options.commentContext)a._options.commentContext.on("fileCommentsResized",b);b=new D.default(n,
[{id:"file-comments-and-messages",getHeight:function(){return a._editorInnerOffset()||0},setScrollTop:function(a){h(0,a)}},{id:"editors",getHeight:function(){return Infinity},setScrollTop:function(a){d.scroll(null,a)}}]);a._addDestroyable(b);if(a._options.commentContext)a._options.commentContext.on("fileCommentsResized",b.heightsChanged.bind(b));e.setTarget({scrollSizing:function(){var b=d.scrollSizing();return{height:b.height+a._editorInnerOffset(),clientHeight:b.clientHeight}},offset:function(){return g.offset()},
scroll:function(a,b){null!=b&&n.push({top:b})}});b=/Chrome\//.test(window.navigator.userAgent);var q=/Apple Computer/.test(window.navigator.vendor),r=a._$container[0],m=(0,A.default)(window),f=1;b?f=-.7:q&&(f=-1/3);if(b||q)r.addEventListener("mousewheel",c,!0),e.destroyables.push({destroy:function(){r.removeEventListener("mousewheel",c,!0)}})})};g.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:direction-enum', location = '/static/bitbucket/internal/model/direction.js' */
define("bitbucket/internal/model/direction",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={UP:"UP",DOWN:"DOWN"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:region-scroll-forwarder', location = '/static/bitbucket/internal/util/region-scroll-forwarder.js' */
define("bitbucket/internal/util/region-scroll-forwarder","module exports bacon jquery lodash bitbucket/internal/util/bacon bitbucket/internal/util/function".split(" "),function(l,f,t,u,v,w,x){Object.defineProperty(f,"__esModule",{value:!0});var p=babelHelpers.interopRequireDefault(t),y=babelHelpers.interopRequireDefault(u),d=babelHelpers.interopRequireDefault(v),q=babelHelpers.interopRequireDefault(w),r=babelHelpers.interopRequireDefault(x);f.default=function(g,c){function f(a,b){d.default.chain(a).filter(function(b,
a,c){return!d.default.some(c.slice(0,a),function(a){return b.groupId&&b.groupId===a.groupId})}).forEach(function(a){a.setScrollTop("bottom"===b(a)?a.getCachedHeight():0)}).value()}var n=new p.default.Bus;c=c.map(function(a){var b=null;return y.default.extend({},a,{getCachedHeight:function(){null==b&&(b=a.getHeight());return b},invalidateCache:function(){b=null}})});var e;g.subscribe(function(a){if(a.isInitial()){var b=a.value().top,m=0,e;d.default.forEach(c,function(a){var c=a.getCachedHeight(),d=
m+c>=b;!e&&d?(e=a,a.setScrollTop(b-m)):a.setScrollTop(d?0:c);m+=c})}})();g=g.takeUntil(n).slidingWindow(2,2).map(r.default.spread(function(a,b){var e=0,f,g=b.top-a.top,h,k=0;d.default.some(c,function(c){var d=c.getCachedHeight();!h&&k+d>=b.top&&(h=c,e=k);!f&&k+d>=a.top&&(f=c);k+=d;return h&&f});if(!h)throw Error("No forwardee handles "+b.top);return{scrollInfo:b,localTop:b.top-e,diff:g,forwardTo:h,previousRegion:f}}));var l=g.onValue(function(a){e=a;var b=a.previousRegion;if(b!==a.forwardTo){b=q.default.toArray(q.default.takeBetween(p.default.fromArray(c),
{start:b,end:a.forwardTo,startInclusive:!0,endInclusive:!1}));var d=0<a.diff;f(d?b.reverse():b,r.default.constant(d?"bottom":"top"))}a.forwardTo.setScrollTop(a.localTop)});return{regionChanges:g.map(".forwardTo").skipDuplicates(),forwardingInfo:g,heightsChanged:function(){d.default.invokeMap(c,"invalidateCache");if(e){var a=d.default.indexOf(c,e.forwardTo);f(d.default.reject(c,function(a){return a===e.forwardTo||a.groupId&&a.groupId===e.forwardTo.groupId}),function(b){return d.default.indexOf(c,b)<
a?"bottom":"top"});e.forwardTo.setScrollTop(Math.min(e.localTop,e.forwardTo.getCachedHeight()))}},destroy:function(){l();n.push(!0);n.end()}}};l.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:page-scrolling-manager', location = '/static/bitbucket/internal/layout/page-scrolling-manager.js' */
define("bitbucket/internal/layout/page-scrolling-manager","module exports aui bacon jquery lodash bitbucket/internal/util/bacon bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/region-scroll-forwarder bitbucket/internal/util/scroll".split(" "),function(u,e,B,C,D,E,F,G,H,I,J){function y(c){var b=c.offset().top,f=0;c.prevAll(".aui-message").each(function(c,b){f+=b.offsetHeight});return b-f}function K(){function b(a){var b=null,c=a;h.takeUntil(g).onValue(function(a){c=
a});a=new L.default(p.default.getWindowScrollProperty(),[{id:"pre",groupId:"outside",setScrollTop:function(a){null===b&&(b=e.offset().top);w(null,a);q.$wrapper.css("top",Math.max(0,a-b));q.$wrapper.hasClass("aui-is-docked")&&0!==a||q.reflow()},getHeight:function(){var a=c.offset().top,b=y(v,m);return a-b}},{id:"in",groupId:"inside",setScrollTop:function(a){c.scroll(null,a)},getHeight:function(){return Infinity}}]);x.takeUntil(g).onValue(a,"heightsChanged");return a}var l=(0,c.default)(window),f=document.body,
m=(0,c.default)(f),v=(0,c.default)("#page"),k=v[0],e=(0,c.default)(".aui-sidebar"),q=z.default.sidebar(e),t=f.style.height;m.addClass("scrolling-forwarded");var g=new d.default.Bus,r=new d.default.Bus,n=new d.default.Bus,h=new d.default.Bus,x=h.sampledBy(d.default.mergeAll(h,r,d.default.interval(1E3).takeUntil(g),p.default.getWindowSizeProperty().changes())).filter(function(a){return!!a}).takeUntil(g).map(".offset").map(function(a){var b=y(v);return{top:Math.round(a.top-b)}}).skipDuplicates(function(a,
b){return a.top===b.top}).toProperty(),A=h.sampledBy(d.default.mergeAll(h,r)).filter(function(a){return!!a}).takeUntil(g).map(".scrollSizing").skipDuplicates(function(a,b){return a.height===b.height&&a.clientHeight===b.clientHeight}).toProperty();d.default.combineWith(function(a,b,c){return a.top+Math.max(b.height,b.clientHeight)+(c.height-b.clientHeight)},x,A,p.default.getWindowSizeProperty()).takeUntil(g).onValue(function(a){m.height(a);M.default.trigger("bitbucket.internal.layout.body.resize")});
var w=N.default.fakeScroll(k);p.default.getWindowScrollProperty().takeUntil(g).onValue(function(a){w(a.left,null)});d.default.combineAsArray(n,x.sampledBy(n),A.sampledBy(n)).map(O.default.spread(function(a,b,c){return{scrollTop:null!=a.scrollTop?b.top+Math.max(0,Math.min(a.scrollTop,c.height-c.clientHeight)):null}})).onValue(function(a){null!=a.scrollTop&&l.scrollTop(a.scrollTop)});var u=h.onValue(function(a){g.onValue(b(a),"destroy");u()});return{setTarget:function(a){h.push(a)},scroll:function(a,
b){n.push({scrollTop:b})},refresh:function(){r.push(!0)},destroyables:[],destroy:function(){P.default.invokeMap(this.destroyables,"destroy");this.destroyables=[];m.removeClass("scrolling-forwarded");w(0,0);q.$wrapper.css("top","");f.style.height=t||null;n.end();g.push(!0);g.end();r.end();h.end()}}}Object.defineProperty(e,"__esModule",{value:!0});var z=babelHelpers.interopRequireDefault(B),d=babelHelpers.interopRequireDefault(C),c=babelHelpers.interopRequireDefault(D),P=babelHelpers.interopRequireDefault(E),
p=babelHelpers.interopRequireDefault(F),M=babelHelpers.interopRequireDefault(G),O=babelHelpers.interopRequireDefault(H),L=babelHelpers.interopRequireDefault(I),N=babelHelpers.interopRequireDefault(J),t=(0,c.default)(window),k=!1,l,b;e.default={_requestScrollControl:function(){function d(){t.scrollTop(Math.min(l,e.offset().top-(0,c.default)("#page").offset().top))}var e;if(!k)return c.default.Deferred().reject({reason:"NOT_ACCEPTING"});if(b)return c.default.Deferred().reject({reason:"CONTROL_TAKEN"});
(0,c.default)("#footer").hide();b=K();b.setTarget=function(c){return function(f){var k=c.apply(this,arguments);e=f;var m=!b;null==l||m||(d(),l=null);return k}}(b.setTarget);b.destroy=function(f){return function(){e&&(l=t.scrollTop(),d());(0,c.default)("#footer").show();b=null;return f.apply(this,arguments)}}(b.destroy);return c.default.Deferred().resolve(b)},acceptScrollForwardingRequests:function(){if(k)throw Error("acceptScrollForwardingRequests has already been called. It must be unregistered before it can be called again.");
k=!0;l=null;return function(){b&&(z.default.log("Scroll control is not yet destroyed. Ongoing scroll requests will be ignored."),b.scrollTo=c.default.noop,b.destroy());k=!1}}};u.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:request-page-scrolling', location = '/static/bitbucket/internal/util/request-page-scrolling.js' */
define("bitbucket/internal/util/request-page-scrolling",["module","exports","bitbucket/internal/layout/page-scrolling-manager"],function(b,a,c){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(){return d.default._requestScrollControl()};var d=babelHelpers.interopRequireDefault(c);b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:button-trigger', location = '/static/bitbucket/internal/widget/button-trigger/button-trigger.js' */
define("bitbucket/internal/widget/button-trigger/button-trigger",["module","exports","jquery","lodash"],function(f,c,g,h){function b(a,b){this._opts=d.default.extend({},k,b);this._$trigger=(0,d.default)(a).on(this._opts.triggerEvent,e.default.bind(this.triggerClicked,this))}Object.defineProperty(c,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(g),e=babelHelpers.interopRequireDefault(h),k={triggerEvent:"click",stopEvent:!0,triggerHandler:function(a,b){throw Error("triggerHandler must be implemented");
}};b.prototype.setTriggerDisabled=function(a){a=void 0===a?!0:!!a;this._$trigger.prop("disabled",a).attr("aria-disabled",a)};b.prototype.isTriggerDisabled=function(){return"true"===this._$trigger.attr("aria-disabled")};b.prototype.setTriggerActive=function(a){this._$trigger.attr("aria-pressed",void 0===a?!0:!!a)};b.prototype.isTriggerActive=function(){return"true"===this._$trigger.attr("aria-pressed")};b.prototype.triggerClicked=function(a){var b=this.isTriggerActive();this.isTriggerDisabled()||this._opts.triggerHandler.apply(this,
[!b].concat(e.default.toArray(arguments)));if(this._opts.stopEvent)return a&&a.stopPropagation&&a.stopPropagation(),!1};c.default=b;f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:css-util', location = '/static/bitbucket/internal/util/css.js' */
define("bitbucket/internal/util/css",["module","exports","bitbucket/internal/util/function"],function(f,b,g){Object.defineProperty(b,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(g),c=[],e=function(){var a=document.createElement("style");a.appendChild(document.createTextNode(""));document.head.appendChild(a);return a.sheet}(),d={chain:function(){var a=[];return{appendRule:function(c){a.push(d.appendRule(c));return this},destroy:function(){h.default.applyAll(a);a=[]}}},appendRule:function(a){var b=
{},d=c.length;c.push(b);e.insertRule(a,d);return function(){var a=c.indexOf(b);-1!==a&&(e.deleteRule(a),c.splice(a,1))}},__sheet:e};b.default=d;f.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-blame', location = '/static/bitbucket/internal/feature/file-content/file-blame/blame-source.js' */
define("bitbucket/internal/feature/file-content/file-blame/blame-source","module exports jquery lodash bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/util/property".split(" "),function(e,c,f,g,h,k,l){function b(a){this._fileChange=a;this._optionsPromise=d.default.Deferred();this._blamePromise=null}Object.defineProperty(c,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(f),m=babelHelpers.interopRequireDefault(g),n=babelHelpers.interopRequireDefault(h),p=babelHelpers.interopRequireDefault(k),
q=babelHelpers.interopRequireDefault(l);b.prototype.get=function(){this._blamePromise||(this._blamePromise=d.default.when(this._optionsPromise,q.default.getFromProvider("display.max.source.lines")).then(this._requestBlame.bind(this)));return this._blamePromise};b.prototype.initBlameOptions=function(a){this._optionsPromise.resolve(a)};b.prototype._calculateBlameWindowStart=function(a,b){return Math.max(0,Math.floor((a.firstLine+a.lastLine)/2)-b/2)};b.prototype._requestBlame=function(a,b){return p.default.rest({url:n.default.rest().currentRepo().browse().path(this._fileChange.path).at(this._fileChange.commitRange.untilRevision.id).build(),
data:{blame:!0,noContent:!0,start:a.haveWholeFile?a.firstLine-1:this._calculateBlameWindowStart(a,b),limit:a.haveWholeFile?a.lastLine-a.firstLine+1:b,avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})}}).then(m.default.identity)};c.default=b;e.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-blame', location = '/static/bitbucket/internal/feature/file-content/file-blame/blame-gutter.js' */
define("bitbucket/internal/feature/file-content/file-blame/blame-gutter","module exports jquery lodash bitbucket/util/events bitbucket/util/state bitbucket/internal/bbui/widget/widget bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/util/css bitbucket/internal/util/object".split(" "),function(r,k,t,u,v,w,x,y,z,A){function m(a){var d=n.default.getRepository(),c=n.default.getFilePath().components.join("/");a=a.map(function(b){var a={spannedLines:b.spannedLines,filePath:c,
repository:d,commit:f.default.assign({id:b.commitHash,displayId:b.displayCommitHash},b)},e=[];e[b.lineNumber]=(0,h.default)(bitbucket.internal.feature.fileContent.fileBlameGutterDetailed(a))[0];if(1===b.spannedLines)return{commitId:b.commitHash,els:e};var p=(0,h.default)(bitbucket.internal.feature.fileContent.fileBlameGutterSpan(a))[0];e.push(p);return{commitId:b.commitHash,els:e.concat(f.default.times(b.spannedLines-2,function(){return p.cloneNode(!0)}))}});var e=h.default.extend.apply(h.default,
[[]].concat(f.default.map(a,"els")));e={byLine:e,byCommitId:{},all:f.default.compact(e)};f.default.transform(a,function(a,e){a[e.commitId]=a[e.commitId]?a[e.commitId].concat(f.default.compact(e.els)):f.default.compact(e.els)},e.byCommitId);return e}function B(a,d,c){var e=[];return c.eachLine(function(b){switch(b.lineType){case void 0:var c=a[b.lineNumber];var f=b.handles.SOURCE;break;case l.default.ADDED:c=a[b.line.destination];f=b.handles.TO;break;case l.default.REMOVED:c=d[b.line.source];f=b.handles.FROM;
break;case l.default.CONTEXT:d?(c=d[b.line.source],f=b.handles.FROM):(c=a[b.line.destination],f=b.handles.TO)}e.push([f,"blame",c])}).then(function(){return e})}function g(a,d){q.default.call(this);this._enabled=!1;this._textView=a;this._requestBlame=d;this._pendingChanges=[];var c=this;this._textView.on("change",function(a){c._pendingChanges?c._pendingChanges.push(a):c._fillForChange(a)});this._textView.addContainerClass("blame-disabled");this._textView.registerGutter("blame",{weight:0})}Object.defineProperty(k,
"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(t),f=babelHelpers.interopRequireDefault(u),C=babelHelpers.interopRequireDefault(v),n=babelHelpers.interopRequireDefault(w),q=babelHelpers.interopRequireDefault(x),l=babelHelpers.interopRequireDefault(y),D=babelHelpers.interopRequireDefault(z);babelHelpers.interopRequireDefault(A).default.inherits(g,q.default);g.prototype.setEnabled=function(a){a=!!a;if(this._enabled!==a&&(this._enabled=a,this._enabled===a)){if(a){this._textView.removeContainerClass("blame-disabled");
var d=this._fillGutter()}else this._textView.addContainerClass("blame-disabled"),d=h.default.Deferred().resolve();var c=this;d.done(function(){C.default.trigger("bitbucket.internal.feature.fileContent.fileBlameExpandedStateChanged",null,c._enabled)})}return d||h.default.Deferred().resolve()};g.prototype._addHoverBehavior=function(a){function d(a){if(a.target===this&&(a=this.getAttribute("data-commitid"),clearTimeout(k),g!==a)){b&&b();g=a;var c=e[a];if(500>c.length){c.addClass("commitid-hovered");
var d=c.removeClass.bind(c,"commitid-hovered")}else d=D.default.appendRule('.blame.bitbucket-gutter-marker[data-commitid\x3d"'+a+'"] {background-color: #f5f5f5;border-right-color: #3b73af;}');b=function(){d();b=g=null}}}function c(a){a.target===this&&b&&(k=setTimeout(function(){b&&b()},100))}var e=f.default.transform(a.byCommitId,function(a,b,c){a[c]=(0,h.default)(b)},{}),b,g,k;a.all.forEach(function(a){a.addEventListener("mouseenter",d);a.addEventListener("mouseleave",c)});this._addDestroyable(function(){b&&
b()})};g.prototype._fillForChange=function(a){var d=this;B(this._untilBlameElCache&&this._untilBlameElCache.byLine,this._sinceBlameElCache&&this._sinceBlameElCache.byLine,a).done(function(a){d._textView.operation(function(){a.forEach(function(a){a[2]&&d._textView.setGutterMarker.apply(d._textView,a)})})})};g.prototype._fillGutter=function(){if(this._gutterFilled)return h.default.Deferred().resolve();this._gutterFilled=!0;var a=this;return this._requestBlame.get().done(function(d,c){d&&(a._untilBlameElCache=
m(d),a._addHoverBehavior(a._untilBlameElCache));c&&(a._sinceBlameElCache=m(c),a._addHoverBehavior(a._sinceBlameElCache));a._textView.operation(function(){a._pendingChanges.forEach(a._fillForChange.bind(a))});a._pendingChanges=null})};k.default=g;r.exports=k["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-blame', location = '/static/bitbucket/internal/feature/file-content/file-blame/blame-diff.js' */
define("bitbucket/internal/feature/file-content/file-blame/blame-diff","module exports jquery lodash bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/model/file-change-types bitbucket/internal/util/property".split(" "),function(m,f,n,p,q,r,t,u){function b(a){this._fileChange=a;this._optionsPromise=c.default.Deferred();this._blamePromise=null}Object.defineProperty(f,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(n),g=babelHelpers.interopRequireDefault(p),k=babelHelpers.interopRequireDefault(q),
l=babelHelpers.interopRequireDefault(r),e=babelHelpers.interopRequireDefault(t),v=babelHelpers.interopRequireDefault(u);b.prototype.get=function(){this._blamePromise||(this._blamePromise=c.default.when(this._optionsPromise,v.default.getFromProvider("display.max.source.lines")).then(this._requestBlame.bind(this)));return this._blamePromise};b.prototype.initBlameOptions=function(a){this._optionsPromise.resolve(a)};b.prototype._calculateBlameWindowStart=function(a,c){var d=g.default.chain([a.firstAddedLine,
a.firstRemovedLine]).compact().min().value()-1;return Math.max(0,Math.floor((d+(Math.max(a.lastAddedLine,a.lastRemovedLine)-1))/2)-c/2)};b.prototype._requestBlame=function(a,b){var d=[],f=this._fileChange.type===e.default.MODIFY&&!a.firstAddedLine,h=this._fileChange.type===e.default.MODIFY&&!a.firstRemovedLine;this._fileChange.type===e.default.DELETE||f?d.push(c.default.Deferred().resolve()):d.push(l.default.rest({url:k.default.rest().currentRepo().browse().path(this._fileChange.path).at(a.until).build(),
data:{blame:!0,noContent:!0,start:h?this._calculateBlameWindowStart(a,b):a.firstAddedLine-1,limit:h?b:a.lastAddedLine-a.firstAddedLine+1,avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})}}).then(g.default.identity));this._fileChange.type===e.default.ADD||h?d.push(c.default.Deferred().resolve()):d.push(l.default.rest({url:k.default.rest().currentRepo().browse().path(this._fileChange.srcPath||this._fileChange.path).at(a.since).build(),data:{blame:!0,noContent:!0,start:this._fileChange.type===
e.default.DELETE?a.firstRemovedLine-1:this._calculateBlameWindowStart(a,b),limit:this._fileChange.type===e.default.DELETE?a.lastRemovedLine-a.firstRemovedLine+1:b,avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})}}).then(g.default.identity));return c.default.when.apply(c.default,d)};f.default=b;m.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-blame', location = '/static/bitbucket/internal/feature/file-content/file-blame/file-blame.js' */
define("bitbucket/internal/feature/file-content/file-blame/file-blame","module exports aui jquery lodash bitbucket/util/events bitbucket/util/navbuilder bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/feature/file-content/file-blame/blame-diff bitbucket/internal/feature/file-content/file-blame/blame-gutter bitbucket/internal/feature/file-content/file-blame/blame-source bitbucket/internal/model/file-change-types bitbucket/internal/model/file-content-modes bitbucket/internal/util/analytics bitbucket/internal/util/promise bitbucket/internal/util/shortcuts bitbucket/internal/widget/button-trigger/button-trigger".split(" "),
function(p,e,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K){function L(a,b){if(a.type===g.default.ADD||a.type===g.default.DELETE)a=d.default.head(b.diff.hunks),a={firstAddedLine:a.destinationLine,lastAddedLine:a.destinationSpan,firstRemovedLine:a.sourceLine,lastRemovedLine:a.sourceSpan};else{var c=d.default.chain(b.diff.hunks).flatMap("segments").reject(d.default.matchesProperty("type",f.default.CONTEXT)).groupBy("type").mapValues(function(a){return d.default.flatMap(a,"lines")}).value();a=c[f.default.ADDED]||[];
c=c[f.default.REMOVED]||[];a={firstAddedLine:a.length&&d.default.head(a).destination,lastAddedLine:a.length&&d.default.last(a).destination,firstRemovedLine:c.length&&d.default.head(c).source,lastRemovedLine:c.length&&d.default.last(c).source}}a.since=b.fromHash;a.until=b.toHash;return a}function M(a,b){return{firstLine:b.firstLine,lastLine:b.firstLine+b.linesAdded-1,haveWholeFile:1===b.firstLine&&b.isLastPage}}Object.defineProperty(e,"__esModule",{value:!0});var t=babelHelpers.interopRequireDefault(w),
N=babelHelpers.interopRequireDefault(x),d=babelHelpers.interopRequireDefault(y),h=babelHelpers.interopRequireDefault(z),O=babelHelpers.interopRequireDefault(A),f=babelHelpers.interopRequireDefault(B),P=babelHelpers.interopRequireDefault(C),Q=babelHelpers.interopRequireDefault(D),R=babelHelpers.interopRequireDefault(E),g=babelHelpers.interopRequireDefault(F),k=babelHelpers.interopRequireDefault(G),S=babelHelpers.interopRequireDefault(H),T=babelHelpers.interopRequireDefault(I),U=babelHelpers.interopRequireDefault(J),
V=babelHelpers.interopRequireDefault(K),W={"/browse":"source-view","/diff":"diff-to-previous","/commits/":"commit","/compare":"compare-branch","/pull-requests?create":"create-pullrequest","/pull-requests":"pullrequest"};e.default={init:function(){function a(a,c){function b(a){l.initBlameOptions(u(e,a))}var e=c.fileChange,m=c.$toolbar.find(".file-blame"),f="";c.contentMode===k.default.SOURCE?f="Show blame for this file":c.contentMode===k.default.DIFF&&
(f="Show blame for this diff");m.attr("disabled",!1).attr("aria-disabled",!1).attr("title",f);var g=d.default.once(function(a){var c=O.default.currentRepo().buildAbsolute(),b=d.default.find(W,function(a,b){return d.default.startsWith(location.href,c+b)?a:!1});S.default.add("blame.shown",{type:a,source:b})});if(m.length){if(c.contentMode===k.default.SOURCE){var l=new R.default(e);var q="bitbucket.internal.feature.fileContent.sourceViewContentLoaded";
var u=M}else if(c.contentMode===k.default.DIFF)l=new P.default(e),q="bitbucket.internal.feature.fileContent.diffViewDataLoaded",u=L;else return;h.default.on(q,b);var n=new Q.default(a,l),v=(0,N.default)('\x3cdiv class\x3d"blame-spinner"\x3e\x3c/div\x3e'),r=new V.default(m,{stopEvent:!1,triggerHandler:function(){this.setTriggerActive(!this.isTriggerActive());T.default.spinner(v.insertBefore(m),n.setEnabled(this.isTriggerActive()));g(c.contentMode)}}),p=U.default.bind("showBlame",r.triggerClicked.bind(r));
a.on("destroy",function(){p();v.remove();h.default.off(q,b);d.default.isFunction(n.destroy)&&n.destroy();l=r=n=null})}}h.default.on("bitbucket.internal.feature.fileContent.textViewInitializing",a);return{destroy:function(){h.default.off("bitbucket.internal.feature.fileContent.textViewInitializing",a)}}}};p.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-blame', location = '/static/bitbucket/internal/feature/file-content/file-blame/file-blame-init.js' */
require(["bitbucket/internal/feature/file-content/file-blame/file-blame"],function(a){a.init()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-blame', location = '/static/bitbucket/internal/feature/file-content/file-blame/file-blame.soy' */
// This file was automatically generated from file-blame.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }


bitbucket.internal.feature.fileContent.fileBlameGutterDetailed = function(opt_data, opt_ignored) {
  return '<div class="blame" data-commitid="' + soy.$$escapeHtml(opt_data.commit.id) + '" data-span="' + soy.$$escapeHtml(opt_data.spannedLines) + '">' + bitbucket.internal.widget.avatar({person: opt_data.commit.author, size: 'xsmall'}) + bitbucket.internal.widget.userLink({user: opt_data.commit.author, extraClasses: 'blame-author secondary-link'}) + bitbucket.internal.feature.commit.link(opt_data) + '<div class="blame-timestamp" title="' + soy.$$escapeHtml(require('bitbucket/internal/util/time').format(opt_data.commit.authorTimestamp, 'full')) + '">' + soy.$$escapeHtml(require('bitbucket/internal/util/time').format(opt_data.commit.authorTimestamp, 'short')) + '</div></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.fileBlameGutterDetailed.soyTemplateName = 'bitbucket.internal.feature.fileContent.fileBlameGutterDetailed';
}


bitbucket.internal.feature.fileContent.fileBlameGutterSpan = function(opt_data, opt_ignored) {
  return '<div class="blame" data-commitid="' + soy.$$escapeHtml(opt_data.commit.id) + '" title="' + soy.$$escapeHtml(opt_data.commit.author.displayName || opt_data.commit.author.name) + '">&nbsp;</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.fileBlameGutterSpan.soyTemplateName = 'bitbucket.internal.feature.fileContent.fileBlameGutterSpan';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:ediff', location = '/static/bitbucket/internal/bbui/ediff/ediff.js' */
define("bitbucket/internal/bbui/ediff/ediff",["exports","lodash"],function(n,B){function t(h){var d=[],f;for(r.lastIndex=0;f=r.exec(h);)d.push({start:f.index,value:f[0],end:r.lastIndex});return d}function u(h){var d=h.comparableValue;if("string"!==typeof d){var f=d=h.value;w.lastIndex=0;w.test(f)&&(0===h.start&&(f="\n"+f),(0,B.includes)(f,"\n")&&(d=f.replace(C,"\n")));h.comparableValue=d}return d}function x(h,d,f,b,k){for(var l=f;l<f+b;l++){var c=d.length-1,g=d.length&&d[c],a=h[l];g&&g.end===a.start?
d[c]={start:g.start,end:a.end,type:g.type}:d.push({start:a.start,end:a.end,type:k})}}function y(h,d){var f=[];if(0!==h.length||0!==d.length){a:{var b=h.length;var k=d.length,l=b+k+1,c=1+2*l,g=(c+1)/2,a=[];a.length=c;a[g+1]={i:0,j:-1,prev:null,snake:!0};for(c=0;c<l;c++){for(var q=-c;q<=c;q+=2){var n=g+q,e=n+1,m=n-1;if(q===-c||q!==c&&a[m].i<a[e].i){var p=a[e].i;e=a[e]}else p=a[m].i+1,e=a[m];a[m]=null;m=p-q;for(var r=p,t=m;e&&0!==e.i&&0!==e.j&&!e.snake&&e.prev;)e=e.prev;for(e={i:r,j:t,prev:e};p<b&&m<
k&&u(h[p])===u(d[m]);)p++,m++;p>e.i&&(e={i:p,j:m,prev:e,snake:!0});a[n]=e;if(p>=b&&m>=k){b=a[n];break a}}a[g+c-1]=null}throw Error("could not find a diff path");}b.snake&&(b=b.prev);for(;b&&b.prev&&0<=b.prev.j;){if(b.snake)throw Error("bad diffpath: found snake when looking for diff");a=b.i;g=b.j;b=b.prev;k=b.i;l=b.j;a-=k;g-=l;f.unshift({from:k,fromCount:a,to:l,toCount:g,type:0===a&&z||0===g&&A||v});b.snake&&(b=b.prev)}}b=[];k=[];l=f.length;for(g=0;g<l;g++)a=f[g],c=a.type,c!==v&&c!==A||x(h,b,a.from,
a.fromCount,c),c!==v&&c!==z||x(d,k,a.to,a.toCount,c);return{originalRegions:b,revisedRegions:k}}Object.defineProperty(n,"__esModule",{value:!0});n.tokenizeString=t;n.getTokensComparableValue=u;n.diff=y;var r=/\w+|\s+|./gim,C=/\n[ \u00a0\t\r]+/gm,w=/\s/m,z="add",A="delete",v="change";n.default={tokenizeString:t,getTokensComparableValue:u,diff:y}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:ediff', location = '/static/bitbucket/internal/feature/file-content/ediff/ediff-markers.js' */
define("bitbucket/internal/feature/file-content/ediff/ediff-markers","module exports bacon jquery lodash bitbucket/internal/bbui/ediff/ediff bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/util/bacon bitbucket/internal/util/function".split(" "),function(r,g,t,u,v,w,x,y,z){function A(b,a){var d=h.default.fromBinder(function(b){a.eachLine(b).done(c.default.partial(b,new h.default.End));return B.default.noop});m(d).onValue(function(a){b.markText(a.line,a.from,a.to,
a.options)})}function m(b){var a=e.default.dot("0.line.conflictMarker");return C.default.split(b,e.default.dot("segment")).slidingWindow(2,2).filter(e.default.partialRight(c.default.every,e.default.not(a))).filter(e.default.spread(function(b,a){return b[0].segment.type===n.default.REMOVED&&a[0].segment.type===n.default.ADDED})).flatMap(e.default.spread(function(b,a){function f(b,a){return h.default.fromArray(a).map(function(a){return c.default.assign({},a,{line:b[a.line]})})}var d=D(b[0].segment,
a[0].segment);return f(b,d.from).merge(f(a,d.to))}))}function D(b,a){function d(a){a=c.default.map(a.lines,"line").join("\n");return{text:a,tokens:p.default.tokenizeString(a)}}a=d(a);b=d(b);if(!(750>a.tokens.length&&750>b.tokens.length))return{to:[],from:[]};var l=p.default.diff(b.tokens,a.tokens);return{from:c.default.map(l.originalRegions,c.default.partial(q,b.text)),to:c.default.map(l.revisedRegions,c.default.partial(q,a.text))}}function q(b,a){var d=b.slice(0,a.start),c=b.slice(a.start,a.end),
f=d.lastIndexOf("\n")+1,e=c.lastIndexOf("\n")+1;b=a.start-f;f=a.end-(e?e+a.start:f);d=d.split("\n").length-1;c=c.split("\n").length-1;return{line:d,from:{lineOffset:0,ch:b},to:{lineOffset:c,ch:f},options:{className:"ediff-"+a.type}}}function E(b){b.off("internal-change",k)}Object.defineProperty(g,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(t),B=babelHelpers.interopRequireDefault(u),c=babelHelpers.interopRequireDefault(v),p=babelHelpers.interopRequireDefault(w),n=babelHelpers.interopRequireDefault(x),
C=babelHelpers.interopRequireDefault(y),e=babelHelpers.interopRequireDefault(z),k;g.default={init:function(b){k=c.default.partial(A,b.diffView);b.diffView.on("internal-change",k);return{destroy:c.default.partial(E,b.diffView)}},_convertLinesToMarkers:m};r.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view', location = '/static/bitbucket/internal/feature/file-content/diff-view/diff-view.soy' */
// This file was automatically generated from diff-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.diffView.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.diffView == 'undefined') { bitbucket.internal.feature.fileContent.diffView = {}; }


bitbucket.internal.feature.fileContent.diffView.editor = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="diff-editor' + ((opt_data.editorClass) ? ' ' + soy.$$escapeHtml(opt_data.editorClass) : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.diffView.editor.soyTemplateName = 'bitbucket.internal.feature.fileContent.diffView.editor';
}


bitbucket.internal.feature.fileContent.diffView.lineNumber = function(opt_data, opt_ignored) {
  return '<div class="line-number"></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.diffView.lineNumber.soyTemplateName = 'bitbucket.internal.feature.fileContent.diffView.lineNumber';
}


bitbucket.internal.feature.fileContent.diffView.lineNumberMarker = function(opt_data, opt_ignored) {
  return '<div class="line-number-marker line-locator" data-file-type="" data-line-type="" data-line-number=""></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.diffView.lineNumberMarker.soyTemplateName = 'bitbucket.internal.feature.fileContent.diffView.lineNumberMarker';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view', location = '/static/bitbucket/internal/feature/file-content/diff-view/diff-view.js' */
define("bitbucket/internal/feature/file-content/diff-view/diff-view","module exports jquery lodash bitbucket/internal/feature/comments/anchors bitbucket/internal/feature/file-content/diff-view-options bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/feature/file-content/ediff/ediff-markers bitbucket/internal/feature/file-content/text-view/text-view bitbucket/internal/model/direction bitbucket/internal/util/array bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/navigator bitbucket/internal/util/object bitbucket/internal/util/shortcuts".split(" "),
function(J,y,K,L,M,N,O,P,Q,R,S,T,U,V,W,X){function Y(a,b){return a.concat(b).sort(function(a,b){var c=f.default.head(a.lines),d=f.default.head(b.lines);a=f.default.last(a.lines);b=f.default.last(b.lines);return c.destination-d.destination||c.source-d.source||a.destination-b.destination||a.source-b.source})}function Z(a,b){var c=[];return b.eachLine(function(a){var b=a.line,d=a.handles.FROM,h=a.handles.TO,e=B.clone(),f=B.clone();e.addClass("line-number-from");f.addClass("line-number-to");e.html(a.lineType!==
v?b.source:"\x26nbsp;");f.html(a.lineType!==w?b.destination:"\x26nbsp;");c.push([d||h,"line-number-from",e[0]]);c.push([h||d,"line-number-to",f[0]]);a.handles.all.forEach(function(b){var d=aa.clone();d.attr("data-file-type",b.fileType);d.attr("data-line-type",a.lineType);d.attr("data-line-number",a.lineNumber);d.html(b.lineType===v?"+":b.lineType===w?"-":"\x26nbsp;");c.push([b,"line-number-marker",d[0]])})}).done(function(){a.operation(function(){c.forEach(function(b){a.setGutterMarker.apply(a,b)})});
a._$container.addClass("fully-loaded diff-api-ready");var d=ba(b);ca(a,d);"INITIAL"===b.type&&da(a,d)})}function C(a,b,c,d){var p=x[a];a!==z&&(p+=" modified");if(!0===d||!0===c)p+=" expanded";p+=b?" conflict conflict-"+b.toLowerCase():"";return p+(c?" new":"")}function ea(a,b){var c="INSERT"===b.type,d=[];b.eachLine(function(b){var e=C(b.lineType,b.line.conflictMarker,c,b.attributes.expanded);b.handles.all.forEach(function(b){a.addLineClass(b,"wrap",e);c&&d.push(b)})}).done(function(){d.length&&fa(a,
d)})}function fa(a,b){setTimeout(function(){a._editor&&a.operation(function(){f.default.forEach(b,function(b,d){a.removeLineClass(b,"wrap","new")})})},1500)}function ba(a){a=g.default.extend({},a);delete a.fileChange;return D.default.freeze(a)}function ca(a,b){a.trigger("change",b);k.default.trigger("bitbucket.internal.feature.fileContent.diffViewContentChanged",null,b)}function da(a,b){a.trigger("load",b);k.default.trigger("bitbucket.internal.feature.fileContent.diffViewContentLoaded",null,b)}function e(a,
b){n.default.call(this,b.$container,b);this._data=a;this._scrollingReady=g.default.Deferred()}function E(a,b,c){if(void 0!==c._line){b=b[c._lineType][c._line].handles;var d=b[c._fileType]||b.FROM||b.TO}return{anchor:c,handle:d,offset:d?a.heightAtLine(d._handle.lineNo(),"local"):0}}function F(a,b,c,d){var e=this;this._currAnimationPromise||(this._currAnimationPromise={});this._currAnimationPromise[a]&&f.default.invokeMap(this._currAnimationPromise[a],"abort");this._currAnimationPromise[a]=d.map(function(d){function h(a,
b){var c=a?"addLineClass":"removeLineClass";u.operation(function(){p.forEach(function(a){u[c](a._handle,"wrap",b)})})}var p=d.handles,u=d.editor;if(!p||!p.length)return g.default.Deferred().reject().promise({abort:g.default.noop});var k=!1,m=g.default.Deferred(),l=g.default.Deferred();m.done(l.resolve.bind(l));var A=f.default.once(function(){u.off("scroll",A);k||(e._$container&&e._$container.attr("data-last-updated",(new Date).getTime()),h(!0,b),m.always(h.bind(null,!1,b)),h(!0,a),l.always(h.bind(null,
!1,a)),setTimeout(l.resolve.bind(l),c))});u.on("scroll",A);setTimeout(A,100);return m.promise({abort:function(){k=!0;m.resolve()}})})}Object.defineProperty(y,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(K),f=babelHelpers.interopRequireDefault(L),ha=babelHelpers.interopRequireDefault(M),G=babelHelpers.interopRequireDefault(N),q=babelHelpers.interopRequireDefault(O),ia=babelHelpers.interopRequireDefault(P),n=babelHelpers.interopRequireDefault(Q),r=babelHelpers.interopRequireDefault(R),
ja=babelHelpers.interopRequireDefault(S),k=babelHelpers.interopRequireDefault(T),t=babelHelpers.interopRequireDefault(U),H=babelHelpers.interopRequireDefault(V),D=babelHelpers.interopRequireDefault(W),I=babelHelpers.interopRequireDefault(X),v=q.default.ADDED,w=q.default.REMOVED,z=q.default.CONTEXT,B=(0,g.default)(bitbucket.internal.feature.fileContent.diffView.lineNumber()),aa=(0,g.default)(bitbucket.internal.feature.fileContent.diffView.lineNumberMarker()),x={};x[v]="added";x[w]="removed";x[z]="context";
D.default.inherits(e,n.default);e.defaults=n.default.defaults;e.contentChangeType={INITIAL:"INITIAL",INSERT:"INSERT"};e.prototype.init=function(){n.default.prototype.init.call(this);var a=this._options.diffViewOptions||G.default,b=!H.default.isIE()||11<=H.default.majorVersion();this.registerGutter("line-number-marker",{weight:1E3});this._$container.addClass("diff-type-"+this._options.fileChange.type).toggleClass("hide-ediff",a.get("hideEdiff")).toggleClass("show-whitespace-characters",a.get("showWhitespaceCharacters")).toggleClass("animated",
b);this._editors.map(function(b){return b.setOption("showWhiteSpaceCharacters",a.get("showWhitespaceCharacters"))});(0,g.default)("html").toggleClass("no-cssanimations",!b);var c=this;k.default.trigger("bitbucket.internal.feature.fileContent.diffViewDataLoaded",null,this._data);this.on("internal-change",function(a){Z(c,a).done(function(){c._selectLine(c._options.anchor);var a=c._options.fileChange.search;a&&c._highlight(a)})});this._addDestroyable(ia.default.init({diffView:this}));this._addDestroyable(k.default.chainWith((0,
g.default)(window)).on("scroll",function(){c._expectFocusScroll||c._invalidateFocus();c._expectFocusScroll=!1}));this._addDestroyable(k.default.chainWith(a).on("change",function(a){"hideEdiff"===a.key?c._$container.toggleClass("hide-ediff",a.value):"showWhitespaceCharacters"===a.key&&(c._$container.toggleClass("show-whitespace-characters",a.value),c._editors.map(function(b){return b.setOption("showWhiteSpaceCharacters",a.value)}))}));this.on("internal.acceptedModification",t.default.spread(function(a,
b,c){ea(this,{type:a,eachLine:function(a){return g.default.Deferred().resolve(f.default.map(c,a))}})}));this._options.attachScroll?f.default.defer(function(){c._attachScrollBehavior().then(c._scrollingReady.resolve.bind(c._scrollingReady),c._scrollingReady.reject.bind(c._scrollingReady))}):this._scrollingReady.resolve();this._addDestroyable(k.default.chain().on("bitbucket.internal.feature.diffView.lineChange",this._selectLine.bind(this)).on("bitbucket.internal.feature.diffView.highlightSearch",this._highlight.bind(this)));
this._addDestroyable(I.default.bind("requestSecondaryNext",this._scrollToChange.bind(this,r.default.DOWN)));this._addDestroyable(I.default.bind("requestSecondaryPrevious",this._scrollToChange.bind(this,r.default.UP)))};e.prototype._findNextChange=function(a,b,c){function d(a){return!!a.lines[0].conflictMarker||e._options.combineLinkedSegments&&a&&a.type!==q.default.CONTEXT}var e=this,f=!1,h=-1;null==a&&(c=r.default.DOWN,f=!0);var g,k=b.length;for(g=0;g<k;g++){var n=c===r.default.DOWN?g:k-g-1,m=b[n];
if(f){var l=b[n-1];if(!(!m||m.type===q.default.CONTEXT||m.lines[0].conflictMarker&&l&&l.lines[0].conflictMarker||e._options.combineLinkedSegments&&l&&l&&l.type!==q.default.CONTEXT)){h=n;break}}else m===a&&(f=!0)}if(-1<h){a=h;for(h+=1;h<b.length&&d(b[h]);)h++;return b.slice(a,h)}return null};e.prototype._selectLine=function(a){a&&(a=this.getLineHandleFromNumber(a.no,a.type))&&(this.scrollHandleIntoFocus(a),this._markLinesFocused([{editor:this._editorForHandle(a),handles:[a]}]))};e.prototype._scrollToChange=
function(a){var b=this._focusedSegments&&this._focusedSegments[0];b||(b=this._$fileToolbar.outerHeight(),b=this._$container[0].getBoundingClientRect().top-b,b=this._getFocusSegment(b));if(a=this._findNextChange(b,this._allSegments,a))this._setFocusSegment(a),this._expectFocusScroll=!0,this._focusedSegments=a};e.prototype._scrollToComment=function(a){G.default.set("hideComments",!1);var b=f.default.chain(this._options.commentContext._containers).map("anchor").filter(function(a){return a instanceof
ha.default.LineAnchor}).uniqBy(t.default.invoke("getId")).value();if(a=this._findNextAnchor(a,b,this._focusedComment))this._expectFocusScroll=!0,this._focusedComment=a,a.handle?(this._highlightCommentForLine(a.handle),this.scrollHandleIntoFocus(a.handle)):this._scrollToSourcePosition(null,-this._editorInnerOffset())};e.prototype._invalidateFocus=function(){this._focusedComment=this._focusedSegments=null};e.prototype._findNextAnchorInEditor=function(a,b,c,d){if(0===b.length)return null;b=f.default.sortBy(b,
t.default.dot("_line"));if(d){var e=ja.default.findIndex(t.default.propEqual(f.default.pick(d.anchor,"_line","_lineType","_fileType")))(b);if(-1!==e)return(c=b[e+(c===r.default.UP?-1:1)])&&E(a,this._internalLines,c)}if(d)var g=d.offset;else d=this._$fileToolbar.outerHeight(),d=this._$container[0].getBoundingClientRect().top-d,e=a.getScrollInfo(),g=e.top+this._options.focusPoint*e.clientHeight-d;a=b.map(E.bind(null,a,this._internalLines));return c===r.default.UP?f.default.find(a.reverse(),function(a){return a.offset<
g}):f.default.find(a,function(a){return a.offset>g})};e.prototype._highlightCommentForLine=function(a){this._markLineCommentsFocused([{editor:this._editorForHandle(a),handles:[a]}])};e.prototype.getLineHandleFromNumber=function(a,b){var c="TO"===b?this._internalLines[v][a]:this._internalLines[w][a];return(c=(c=c||f.default.find(this._internalLines[z],t.default.dotEq("TO"===b?"line.destination":"line.source",a)))&&c.handles)&&(c[b]||c.all[0])};e.prototype._acceptModification=function(){throw Error("DiffView implementation must define this.");
};e._combineTexts=function(a){return f.default.chain(a).map("line").map("line").value().join(n.default.DEFAULT_LINE_ENDING)};e.prototype._getChangeAttributes=function(a,b){return{diff:b,fileChange:this._options.fileChange}};e.prototype._getLineClasses=C;e.prototype._modifyDiff=function(a,b,c){var d=[].slice.call(arguments,3);this._allSegments=Y(this._allSegments||[],f.default.chain(b.hunks).map("segments").flattenDeep().value());this._modify.apply(this,[a,b,c].concat(d))};e.prototype._markLinesFocused=
f.default.partial(F,"line-focused","last-focus",1E3);e.prototype._markLineCommentsFocused=f.default.partial(F,"line-comment-focused","last-comment-focus",1E3);y.default=e;J.exports=y["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:math', location = '/static/bitbucket/internal/util/math.js' */
define("bitbucket/internal/util/math",["module","exports","lodash"],function(h,c,k){function f(a){return function(b){return Math.min(a,b)}}function g(a){return function(b){return Math.max(a,b)}}function d(a,b){if(!(this instanceof d))return new d(a,b);this.x=a;this.y=b}function e(a,b){if(!(this instanceof e))return new e(a,b);this.width=a;this.height=b}Object.defineProperty(c,"__esModule",{value:!0});var l=babelHelpers.interopRequireDefault(k);c.default={add:function(a,b){return a+b},clamp:function(a,
b){return l.default.flow(f(b),g(a))},greaterThan:function(a,b){return a>b},highPass:g,isNegative:function(a){return 0>a},isPositive:function(a){return 0<a},lowPass:f,lessThan:function(a,b){return a<b},multiply:function(a,b){return a*b},Point:d,Size:e};h.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-hunk-map', location = '/static/bitbucket/internal/feature/file-content/diff-hunk-map/diff-hunk-map.js' */
define("bitbucket/internal/feature/file-content/diff-hunk-map/diff-hunk-map","module exports jquery lodash bitbucket/internal/util/function bitbucket/internal/util/math bitbucket/internal/util/scroll".split(" "),function(k,f,l,m,n,p,q){function a(b,c,a){this.init.apply(this,arguments)}Object.defineProperty(f,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(l),h=babelHelpers.interopRequireDefault(m),r=babelHelpers.interopRequireDefault(n),e=babelHelpers.interopRequireDefault(p),t=
babelHelpers.interopRequireDefault(q),g={CONTEXT:"#ffffff",ADDED:"#97f295",REMOVED:"#ffb6ba",CONFLICT:"#FFF986"};a.prototype.init=function(b,c,a){this.regions=c;this.options=d.default.extend({},a);this.$hunkMap=(0,d.default)(bitbucket.internal.feature.fileContent.diffHunkMap()).appendTo(b);this.hunkMapWidth=this.$hunkMap.width();this.$indicator=(0,d.default)(bitbucket.internal.feature.fileContent.diffHunkMapViewportIndicator()).appendTo(this.$hunkMap);this.indicatorScroll=t.default.fakeScroll(this.$indicator[0],
{withDocument:!0});this.addCanvas(e.default.Size(this.hunkMapWidth,this.$hunkMap.height()));this.redraw();if("function"===typeof this.options.scrollToFn)this.$hunkMap.on("click",this._hunkMapClicked.bind(this,this.options.scrollToFn))};a.prototype.setIndicator=function(){var b=this.hunkMapHeight/this.totalHeight*this.hunkMapHeight,c=0===this.hunkMapHeight||b===this.hunkMapHeight;this.$indicator.toggleClass("hidden",c);c||this.$indicator.height(b)};a.prototype.diffScrolled=function(b){this.indicatorScroll(0,
b.top/b.height*this.hunkMapHeight)};a.prototype._hunkMapClicked=function(b,c){c=c.pageY-this.$hunkMap.offset().top;b(c/this.hunkMapHeight)};a.prototype.mapHeights=function(){var b=h.default.invokeMap(this.regions,"getHeight"),c=this;this.totalHeight=b.reduce(e.default.add,0);this.hunkMapHeight=Math.min(this.$hunkMap.height(),this.totalHeight);h.default.chain(this.regions).zip(b).forEach(r.default.spread(function(b,a){b.fraction=a/c.totalHeight})).value()};a.prototype.addHunkToMap=function(b,a){if(0===
a.fraction)return b;var c=this.getHunkHeight(a);this.setFillStyle(a._seg.lines[0].conflictMarker?g.CONFLICT:g[a._seg.type]||g.CONTEXT);this.drawHunk(e.default.Point(0,b),e.default.Size(this.hunkMapWidth,c));return b+c};a.prototype.getHunkHeight=function(b){return Math.max(b.fraction*this.hunkMapHeight,1)};a.prototype.clear=function(){this.canvasContext.clearRect(0,0,this.hunkMapWidth,this.hunkMapHeight)};a.prototype.draw=function(){this.$canvas.attr("height",this.hunkMapHeight);this.regions.reduce(this.addHunkToMap.bind(this),
0);this.setIndicator()};a.prototype.redraw=function(){this.clear();this.mapHeights();this.draw()};a.prototype.addCanvas=function(b){this.$canvas=(0,d.default)(bitbucket.internal.feature.fileContent.diffHunkMapCanvas({size:b})).appendTo(this.$hunkMap);this.canvasContext=this.$canvas[0].getContext("2d")};a.prototype.setFillStyle=function(b){this.canvasContext.fillStyle=b};a.prototype.drawHunk=function(b,a){this.canvasContext.fillRect(b.x,b.y,a.width,a.height)};a.prototype.destroy=function(){this.$hunkMap.remove()};
f.default=a;k.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-hunk-map', location = '/static/bitbucket/internal/feature/file-content/diff-hunk-map/diff-hunk-map.soy' */
// This file was automatically generated from diff-hunk-map.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }


bitbucket.internal.feature.fileContent.diffHunkMap = function(opt_data, opt_ignored) {
  return '<div class="diff-hunk-map"></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.diffHunkMap.soyTemplateName = 'bitbucket.internal.feature.fileContent.diffHunkMap';
}


bitbucket.internal.feature.fileContent.diffHunkMapCanvas = function(opt_data, opt_ignored) {
  return '<canvas width="' + soy.$$escapeHtml(opt_data.size.width) + '" height="' + soy.$$escapeHtml(opt_data.size.height) + '"></canvas>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.diffHunkMapCanvas.soyTemplateName = 'bitbucket.internal.feature.fileContent.diffHunkMapCanvas';
}


bitbucket.internal.feature.fileContent.diffHunkMapViewportIndicator = function(opt_data, opt_ignored) {
  return '<div class="viewport-indicator hidden"></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.diffHunkMapViewportIndicator.soyTemplateName = 'bitbucket.internal.feature.fileContent.diffHunkMapViewportIndicator';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:line-handle', location = '/static/bitbucket/internal/feature/file-content/line-handle.js' */
define("bitbucket/internal/feature/file-content/line-handle",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,b,d,c){this.fileType=a;this.lineType=b;this.lineNumber=d;this._handle=c;c._stashHandle=this};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:synchronized-scroll', location = '/static/bitbucket/internal/util/synchronized-scroll.js' */
define("bitbucket/internal/util/synchronized-scroll","module exports lodash bitbucket/internal/model/direction bitbucket/internal/util/function bitbucket/internal/util/math bitbucket/internal/util/performance".split(" "),function(F,t,G,H,I,J,K){function k(a){if(a instanceof k)return a;if(!(this instanceof k))return new k(a);this._el=a;this._programmatic=!1;return this}function l(a,b){if(!(this instanceof l))return new l(a,b);this._el=b;this._parentScrollable=a;if(!this._parentScrollable._el)throw Error("Regions can't (yet) be created for custom Scrollables. We would need to solve the API problem of where to put a function to get the offset relative to the top of the scrollable.");
return this}function x(a,b){return b}function y(a,b){return a.scrollHeight-a.clientHeight-b}function z(a){return a.scrollHeight-a.clientHeight-a.scrollTop}function L(a,b,c,d,h,f){var A=b.scrollTop!==a.scrollTop,k=b.scrollLeft!==a.scrollLeft;c=e.default.filter(c,function(a){return A&&a.canScrollVertically||k&&a.canScrollHorizontally});if(!c.length)return[];if(!A)return e.default.map(c,function(a){return u(a,null,b.scrollLeft)});var q=b.scrollTop>a.scrollTop?m.default.DOWN:m.default.UP,r=c.concat(b),
p=e.default.filter(r,n.default.dot("canScrollVertically")),l=n.default.binary(Math.max);r=e.default.chain(p).map("topness").reduce(l,0).value()*(q===m.default.UP?1:0);p=e.default.chain(p).map("bottomness").reduce(l,0).value()*(q===m.default.UP?0:1);var g=M(r*r,p*p,q);p=g[1];r=g[2];d=0<g[0]?N(f,b,c,d,h):[];h=0<p?e.default.map(c,q===m.default.UP?B(a,b,C,x):D(a,b,C,x)):[];a=0<r?e.default.map(c,q===m.default.DOWN?B(a,b,z,y):D(a,b,z,y)):[];return e.default.chain(c).zip(e.default.zip(d,h,a)).map(n.default.spread(function(a,
c){var d=a.scrollLeft!==b.scrollLeft;if(!a.canScrollVertically)return u(a,null,d&&a.canScrollHorizontally?b.scrollLeft:null);c=c.map(n.default.defaultValue(0)).map(v.default.clamp(0,a.scrollHeight));c=e.default.chain(e.default.zip(c,g)).map(O).reduce(v.default.add,0).value();var f=0<(q===m.default.UP?-1:1)*(c-a.scrollTop);return f||d?u(a,f?c:null,d?b.scrollLeft:null):null})).filter(e.default.identity).value()}function M(a,b,c){var d=Math.max(a,b),h=Math.min(a,b),f=(1-d)*h/(1+h);a=a>b||a===b&&c===
m.default.UP;return[(1-d)/(1+h),a?d:f,a?f:d]}function u(a,b,c){return{scrollable:a.scrollable,scrollTop:b,scrollLeft:c}}function B(a,b,c,d){a=Math.max(c(a),1);var h=(a-c(b))/a;return function(a){var b=Math.max(c(a),1);b-=h*b;1>b&&(b=0);return d(a,b)}}function D(a,b,c,d){a=c(a);var h=c(b)-a;return function(a){var b=c(a)+h;return d(a,b)}}function N(a,b,c,d,h){var f=b.clientHeight*a;b=d(b.scrollable);var g=P(f,b);b=c.map(function(a){return a.canScrollVertically?E(h(g.region,a.scrollable)):null});var k=
Math.max(0,Math.min(1,(g.offsetTop+g.height-f)/g.height));return e.default.zip(b,c).map(n.default.spread(function(b,c){return c.canScrollVertically?Math.max(0,c.scrollTop+b.offsetTop-(k*b.height+c.clientHeight*a-b.height)):null}))}function P(a,b){var c;e.default.some(b,function(b){b=E(b);var d=b.offsetTop,e=b.height;return a>d&&a<=d+e?(c=b,!0):!1});return c}function E(a){return{region:a,offsetTop:a.getOffsetTop(),height:a.getHeight()}}function g(a){var b=a.getScrollInfo();b={scrollable:a,clientWidth:b.clientWidth,
clientHeight:b.clientHeight,scrollWidth:b.width,scrollHeight:b.height,scrollTop:b.top,scrollLeft:b.left,canScrollHorizontally:b.clientWidth<b.width,canScrollVertically:b.clientHeight<b.height};a=b.clientHeight/2;b.topness=a?Math.max(0,(a-b.scrollTop)/a):0;b.bottomness=a?Math.max(0,1-(b.scrollHeight-(b.scrollTop+b.clientHeight))/a):0;return b}function w(a){a=e.default.assign({},w.defaults,a);var b=g(a.self),c,d=Q.default.enqueueCapped(requestAnimationFrame,function(){var d=g(a.self),f=e.default.map(a.others,
g);f=L(c,d,f,a.getRegions,a.getLinkedRegion,a.focusHeightFraction);b=d;f.length&&a.executeCommands(f)});return{handle:function(){a.self.getAndUnsetProgrammaticScrollMarker()?b=g(a.self):(c=b,d())},reset:function(){b=g(a.self)}}}Object.defineProperty(t,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(G),m=babelHelpers.interopRequireDefault(H),n=babelHelpers.interopRequireDefault(I),v=babelHelpers.interopRequireDefault(J),Q=babelHelpers.interopRequireDefault(K),O=n.default.spread(v.default.multiply);
k.prototype.getScrollInfo=function(){return{top:this._el.scrollTop,left:this._el.scrollLeft,width:this._el.scrollWidth,height:this._el.scrollHeight,clientWidth:this._el.clientWidth,clientHeight:this._el.clientHeight}};k.prototype.scrollTo=function(a,b){null!=b&&(this._programmatic=!0,this._el.scrollTop=b);null!=a&&(this._programmatic=!0,this._el.scrollLeft=a)};k.prototype.getAndUnsetProgrammaticScrollMarker=function(){var a=this._programmatic;this._programmatic=!1;return a};l.prototype.getHeight=
function(){return this._el.offsetHeight};l.prototype.getOffsetTop=function(){return this._el.getBoundingClientRect().top-this._parentScrollable._el.getBoundingClientRect().top};var C=n.default.dot("scrollTop");w.defaults={self:null,others:null,getRegions:null,getLinkedRegion:null,focusHeightFraction:.5,executeCommands:function(a){e.default.forEach(a,function(a){a.scrollable.scrollTo(a.scrollLeft,a.scrollTop)})}};t.default={getScrollHandler:w,createScrollable:k,createRegion:l};F.exports=t["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:svg-util', location = '/static/bitbucket/internal/util/svg.js' */
define("bitbucket/internal/util/svg",["module","exports","lodash"],function(d,c,f){function a(){this._buffer=[]}Object.defineProperty(c,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(f);a.prototype.moveTo=function(e,b){this._buffer.push("M",e,b);return this};a.prototype.curve=function(e,b,a,c,h,d){this._buffer.push("C",e,b,a,c,h,d);return this};a.prototype.lineTo=function(a,b){this._buffer.push("L",a,b);return this};a.prototype.close=function(){this._buffer.push("Z");return this};
a.prototype.build=function(){return this._buffer.join(" ")};c.default={svgNS:"http://www.w3.org/2000/svg",createElement:function(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg",a);g.default.forEach(b||[],function(a,b){c.setAttribute(b,a)});return c},PathBuilder:a};d.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:side-by-side-diff-view', location = '/static/bitbucket/internal/feature/file-content/side-by-side-diff-view/side-by-side-diff-view.soy' */
// This file was automatically generated from side-by-side-diff-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.sideBySideDiffView.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.sideBySideDiffView == 'undefined') { bitbucket.internal.feature.fileContent.sideBySideDiffView = {}; }


bitbucket.internal.feature.fileContent.sideBySideDiffView.layout = function(opt_data, opt_ignored) {
  return bitbucket.internal.feature.fileContent.diffView.editor({editorClass: 'side-by-side-diff-editor-from'}) + '<div class="segment-connector-column" ></div>' + bitbucket.internal.feature.fileContent.diffView.editor({editorClass: 'side-by-side-diff-editor-to'});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.sideBySideDiffView.layout.soyTemplateName = 'bitbucket.internal.feature.fileContent.sideBySideDiffView.layout';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:side-by-side-diff-view', location = '/static/bitbucket/internal/feature/file-content/side-by-side-diff-view/synchronized-scroll.js' */
define("bitbucket/internal/feature/file-content/side-by-side-diff-view/synchronized-scroll","module exports jquery lodash bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/math bitbucket/internal/util/synchronized-scroll".split(" "),function(z,y,A,B,C,D,E,F,G){function H(a){function c(){d&&(d.end=f,d.from.end=b,d.to.end=g,m.push(d))}var d=null,f=0,b=0,g=0,m=[];e.default.forEach(a,function(a){d&&a.segment===
d.segment||(c(),d={segment:a.segment,lineInfos:[],start:f,end:-1,from:{start:b,end:-1,lineInfos:[]},to:{start:g,end:-1,lineInfos:[]}});f++;d.lineInfos.push(a);a.segment.type!==v.default.ADDED&&(b++,d.from.lineInfos.push(a));a.segment.type!==v.default.REMOVED&&(g++,d.to.lineInfos.push(a))});c();return m}function p(a,c){this._id=a;this._editor=c;this._programmatic=!1}function u(a,c,d,f,b,e){this._editor=a;this._startIndex=c;this._endIndex=d;this._numLines=d-c;this._id=f;this._seg=b;this._cachedInfo=
null;this._lineInfos=e}function I(a,c){var d,f,b;return{_linkedRegions:a,_seg:a[0]._seg,_id:"combined_"+e.default.map(a,"_id").join("_"),_scrollable:b,_setCombinedScrollable:function(a){this._scrollable=b=a},getHeight:function(){null==d&&(d=a.map(function(a){return a.getHeight()}).reduce(l.default.binary(Math.max),0));return d},_getOffset:function(){null==f&&(f=c());return f},getOffsetTop:function(){return this._getOffset()-b._getScrollTop()},_invalidateCache:function(){f=d=null}}}function J(a,c){function d(a){b=
w.default.clamp(0,c.getScrollHeight()-c.getClientHeight())(a)}this._id=a;a=l.default.constant(0);c=x.default.extend({initialScrollTop:0,getClientHeight:a,getScrollHeight:a},c);var e=!1,b=c.initialScrollTop,g,m=x.default.Callbacks();this._getScrollTop=function(){return w.default.clamp(0,c.getScrollHeight()-c.getClientHeight())(b)};this.scrollToNative=function(a,b){null!=b&&(d(b),g&&g(),m.fire(a,b,"native"))};this._setScrollHandler=function(a){g=a};this.getScrollInfo=function(){return{top:this._getScrollTop(),
left:0,height:c.getScrollHeight(),width:0,clientHeight:c.getClientHeight(),clientWidth:0}};this.scrollTo=function(a,b){null!=b&&(e=!0,d(b),m.fire(a,b,"sync"))};this.on=function(a,b){"scroll"===a&&m.add(b)};this.getAndUnsetProgrammaticScrollMarker=function(){var a=e;e=!1;return a}}function K(a,c,d,f,b){function g(a,b,c,d,e){return new u(a,b.start,b.end,e+"_"+b.start+"_"+b.end,c,d)}function m(a,b){a=g(d,a.from,a.segment,a.from.lineInfos,"from");b=g(f,b.to,b.segment,b.to.lineInfos,"to");h.push(a);k.push(b)}
function t(a){return e.default.invokeMap.bind(e.default,a,"_invalidateCache")}var h=[],k=[];c=H(c);var n=e.default.reduce(c,function(a,b){if(a&&b.segment.type===v.default.ADDED)return m(a,b),null;a&&m(a,a);if(b.segment.type===v.default.REMOVED)return b;m(b,b);return null},null);n&&m(n,n);n=e.default.zip(h,k);var p=e.default.flow(e.default.take,l.default.partialRight(e.default.invokeMap,"getHeight"),l.default.partialRight(e.default.reduce,w.default.add,0));b=b.includeCombinedRegions?e.default.reduce(n,
function(a,b,c){c=e.default.partial(p,a,c);a.push(I(b,c));return a},[]):[];var q={};b.length?e.default.chain(h).zip(k,b).forEach(l.default.spread(function(a,b,c){q[a._id]=[b,c];q[b._id]=[a,c];q[c._id]=[a,b]})).value():e.default.forEach(n,l.default.spread(function(a,b){q[a._id]=[b];q[b._id]=[a]}));d.on("change",t(h.concat(b)));f.on("change",t(k.concat(b)));var r=t(h.concat(k,b));(0,x.default)(window).on("resize",r);a.on("widgetAdded",r);a.on("widgetChanged",r);a.on("widgetCleared",r);a.on("internal.acceptedModification",
r);var M=L.default.chain().on("bitbucket.internal.feature.commit.difftree.collapseAnimationFinished",r);return{combinedSegments:c,fromRegions:h,toRegions:k,combinedRegions:b,linkedFromAndToRegions:n,linkedRegionsByRegionId:q,destroy:function(){M.destroy();(0,x.default)(window).off("resize",r)}}}function N(a,c,d,f,b,g){function m(a,b){a=q(a)||[];return e.default.find(a,l.default.dotEq("_editor",b._editor))}function t(a){a.scrollable.scrollTo(a.scrollLeft,a.scrollTop)}function h(b){a.operation(e.default.forEach.bind(e.default,
b,t));a.trigger("sync-scroll")}function k(a,b,c){if(c.includeHorizontal)var d=h;else d=l.default.partialRight(e.default.map,l.default.unary(l.default.partialRight(e.default.omit,"scrollLeft"))),d=e.default.flow(d,h);return O.default.getScrollHandler({self:a,others:b,getRegions:p,getLinkedRegion:m,executeCommands:d,focusHeightFraction:c.focusHeightFraction})}var n={};n[c._id]=b.fromRegions;n[d._id]=b.toRegions;f&&(n[f._id]=b.combinedRegions);var p=e.default.flow(l.default.dot("_id"),l.default.lookup(n)),
q=e.default.flow(l.default.dot("_id"),l.default.lookup(b.linkedRegionsByRegionId));b={includeHorizontal:!0,focusHeightFraction:g.focusHeightFraction};b={fromHandler:k(c,e.default.compact([d,f]),b),toHandler:k(d,e.default.compact([c,f]),b)};f&&(b.combinedHandler=k(f,[c,d],{includeHorizontal:!1,focusHeightFraction:g.focusHeightFraction}));return b}Object.defineProperty(y,"__esModule",{value:!0});var x=babelHelpers.interopRequireDefault(A),e=babelHelpers.interopRequireDefault(B),v=babelHelpers.interopRequireDefault(C),
L=babelHelpers.interopRequireDefault(D),l=babelHelpers.interopRequireDefault(E),w=babelHelpers.interopRequireDefault(F),O=babelHelpers.interopRequireDefault(G);p.prototype.getScrollInfo=function(){return this._editor.getScrollInfo()};p.prototype.scrollTo=function(a,c){this._programmatic=this._programmatic||null!=a||null!=c;this._editor.scrollTo(a,c)};p.prototype.getAndUnsetProgrammaticScrollMarker=function(){var a=this._programmatic;this._programmatic=!1;return a};u.prototype.getHeight=function(){return this._getCachedInfo().height};
u.prototype.getOffsetTop=function(){return this._getCachedInfo().offsetTop-this._editor.getScrollInfo().top};u.prototype._getCachedInfo=function(){if(!this._cachedInfo){this._cachedInfo={height:0,offsetTop:this._editor.heightAtLine(this._startIndex,"local")};if(!this._numLines)return this._cachedInfo;var a=this._editor.heightAtLine(this._endIndex,"local");this._cachedInfo.height=a-this._cachedInfo.offsetTop}return this._cachedInfo};u.prototype._invalidateCache=function(){this._cachedInfo=null};y.default=
{setupScrolling:function(a,c,d,f,b){b=b||{};var g=K(a,c,d,f,{includeCombinedRegions:b.includeCombinedScrollable});c=new p("from",d);var m=new p("to",f),l=0,h;b.includeCombinedScrollable&&(h=new J("combined",{getScrollHeight:function(){return e.default.chain(g.combinedRegions).invokeMap("getHeight").reduce(w.default.add,0).value()},getClientHeight:function(){return l}}));var k=N(a,c,m,h,g,b);d.on("scroll",k.fromHandler.handle);f.on("scroll",k.toHandler.handle);b={combinedSegments:g.combinedSegments,
combinedRegions:g.combinedRegions,combinedScrollable:h,linkedFromAndToRegions:g.linkedFromAndToRegions,destroy:function(){d.off("scroll",k.fromHandler.handle);f.off("scroll",k.toHandler.handle);g.destroy()}};h&&(h._setScrollHandler(k.combinedHandler.handle),h.setClientHeight=function(a){l=h.clientHeight=a;k.combinedHandler.reset()},e.default.invokeMap(g.combinedRegions,"_setCombinedScrollable",h),b.combinedScrollable=h);c=e.default.invokeMap.bind(e.default,k,"reset");a.on("widgetCleared",c);a.on("widgetChanged",
c);a.on("widgetAdded",c);return b}};z.exports=y["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:side-by-side-diff-view', location = '/static/bitbucket/internal/feature/file-content/side-by-side-diff-view/side-by-side-diff-view.js' */
define("bitbucket/internal/feature/file-content/side-by-side-diff-view/side-by-side-diff-view","module exports jquery lodash bitbucket/internal/feature/file-content/diff-hunk-map/diff-hunk-map bitbucket/internal/feature/file-content/diff-line-info bitbucket/internal/feature/file-content/diff-view-file-types bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/feature/file-content/diff-view/diff-view bitbucket/internal/feature/file-content/line-handle bitbucket/internal/feature/file-content/side-by-side-diff-view/synchronized-scroll bitbucket/internal/model/direction bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/math bitbucket/internal/util/object bitbucket/internal/util/performance bitbucket/internal/util/svg bitbucket/internal/feature/file-content/stash-codemirror/search".split(" "),
function(F,t,u,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U){function h(a,b){b.combineLinkedSegments=!0;m.default.apply(this,arguments)}function V(a){var b=a&&a._seg;return b&&b.type!==n.default.CONTEXT&&0<a._numLines}function v(a){return a.conflicted||!!a._seg.lines[0].conflictMarker}function W(a){function b(a){if(!(this instanceof b))return new b(a);this._regions=[a];this.conflicted=!0;this.classesInfo={lineType:a._seg.type,conflictMarker:a._seg.lines[0].conflictMarker};this.getOffsetTop=function(){return this._regions[0].getOffsetTop()};
this.getHeight=function(){return g.default.chain(this._regions).invokeMap("getHeight").reduce(X.default.add).value()};this.push=function(a){this._regions.push(a)}}return a.reduce(function(a,d){var c=a.previous,f=c&&g.default.some(c,v),q=g.default.some(d,v);if(q&&f)return g.default.forEach(c,function(a,b){a.push(d[b])}),a;q&&(d=g.default.map(d,b));a.previous=d;a.regions.push(d);return a},{previous:null,regions:[]}).regions.filter(function(a){return a.some(l.default.or(V,v))})}function Y(a,b,c){function d(a,
b){if(a.region.classesInfo)return a.region.classesInfo;a=a.region._lineInfos[0];b=b.region._lineInfos[0];return a?{conflictMarker:a.line.conflictMarker,lineType:a.lineType}:{conflictMarker:null,lineType:b.lineType}}var e,f=b.offsetHeight||parseFloat((e=window.getComputedStyle(b)).height);e=b.offsetWidth||parseFloat(e.width);var q=e+1,r=.4*e,y=.6*e;for(a=a.map(function(a){return a.map(function(a){var b=a.getOffsetTop(),c=b+a.getHeight();return{region:a,top:b+.5,bottom:c+.5,above:0>b,inside:0<c&&b<
f,below:c>f}})}).filter(function(a){return a.some(l.default.dot("inside"))||a.some(l.default.dot("above"))&&a.some(l.default.dot("below"))}).map(l.default.spread(function(a,b){var e=(new p.default.PathBuilder).moveTo(-1,a.top).curve(r,a.top,y,b.top,q,b.top).lineTo(q,b.bottom).curve(y,b.bottom,r,a.bottom,-1,a.bottom).close().build();var f=d(a,b);a=d(b,a);f=c(f.lineType,f.conflictMarker,!1)+" "+c(a.lineType,a.conflictMarker,!1);f=g.default.uniq(f.split(/\s+/)).join(" ");return{path:e,extraClasses:f}}));b.hasChildNodes();)b.removeChild(b.firstChild);
e=g.default.once(function(a){var b=[{class:"removed",offset:"0%"},{class:"removed",offset:"30%"},{class:"added",offset:"70%"},{class:"added",offset:"100%"}];b=g.default.map(b,p.default.createElement.bind(p.default,"stop"));return g.default.reduce(b,function(a,b){a.appendChild(b);return a},p.default.createElement("linearGradient",{id:a}))});a=a.map(function(a){var b={class:"segment-connector "+a.extraClasses,d:a.path};a=a.extraClasses;g.default.includes(a,"added")&&g.default.includes(a,"removed")&&
(b.fill="url(#added-and-removed-svg-gradient)");return p.default.createElement("path",b)}).concat(e("added-and-removed-svg-gradient")).reduce(function(a,b){a.appendChild(b);return a},document.createDocumentFragment());b.appendChild(a)}Object.defineProperty(t,"__esModule",{value:!0});var z=babelHelpers.interopRequireDefault(u),g=babelHelpers.interopRequireDefault(G),A=babelHelpers.interopRequireDefault(H),Z=babelHelpers.interopRequireDefault(I),k=babelHelpers.interopRequireDefault(J),n=babelHelpers.interopRequireDefault(K),
m=babelHelpers.interopRequireDefault(L),aa=babelHelpers.interopRequireDefault(M),ba=babelHelpers.interopRequireDefault(N),B=babelHelpers.interopRequireDefault(O),w=babelHelpers.interopRequireDefault(P),l=babelHelpers.interopRequireDefault(Q),X=babelHelpers.interopRequireDefault(R);u=babelHelpers.interopRequireDefault(S);var C=babelHelpers.interopRequireDefault(T),p=babelHelpers.interopRequireDefault(U),D=n.default.ADDED,ca=n.default.CONTEXT,E=n.default.REMOVED;u.default.inherits(h,m.default);h.defaults=
m.default.defaults;h.prototype.init=function(){var a=this;if(this._$container){this._$container.addClass("side-by-side-diff");this._$container.append(bitbucket.internal.feature.fileContent.sideBySideDiffView.layout());this.fromEditorEl=this._$container.find(".side-by-side-diff-editor-from");this.toEditorEl=this._$container.find(".side-by-side-diff-editor-to");var b=this._options.commentContext&&this._options.commentContext.getGutterId();b&&this.registerGutter(b,{weight:100});this.registerGutter("line-number-from",
{weight:200,fileType:k.default.FROM});this.registerGutter("line-number-to",{weight:200,fileType:k.default.TO});this._fromEditor=this._createEditor({gutterFilter:function(a){return!a.fileType||a.fileType===k.default.FROM}},this.fromEditorEl);this._toEditor=this._createEditor({gutterFilter:function(a){return!a.fileType||a.fileType===k.default.TO}},this.toEditorEl);b=l.default.dot("hunks.0.segments.0")(this._data.diff);var c=l.default.dot("hunks.0.segments.0.lines.0.line")(this._data.diff),d=l.default.dot("hunks.0.segments.1.lines.0.line")(this._data.diff),
e=b.type===D?d:c,f=l.default.dot("srcPath.name")(this._options.fileChange)?this._options.fileChange.srcPath.name:this._options.fileChange.path.name;this._syntaxHighlighting(f,e,this._fromEditor);this._syntaxHighlighting(this._options.fileChange.path.name,b.type===E&&d?d:c,this._toEditor);this._lineInfos=Z.default.convertToLineInfos(this._data.diff,this._options);this._scrollingReady.always(function(){a._fromEditor&&(a._modifyDiff("INITIAL",a._data.diff,a._lineInfos),a._setupFindScrollIntoViewFunction(a._fromEditor,
k.default.FROM),a._setupFindScrollIntoViewFunction(a._toEditor,k.default.TO))});this.on("internal-load",function(){this._syncScrollingInfo&&(this.setupHunkmaps(this._syncScrollingInfo.linkedFromAndToRegions),this._initSegmentLinking(this._syncScrollingInfo.linkedFromAndToRegions),this.on("internal-change",function r(){this._whenOpDone(this._scrollEditorToFirstChange.bind(this));this.off("internal-change",r)}))});b=this.refresh.bind(this);w.default.on("bitbucket.internal.feature.sidebar.expandEnd",
b);w.default.on("bitbucket.internal.feature.sidebar.collapseEnd",b);w.default.on("bitbucket.internal.feature.commit.difftree.collapseAnimationFinished",b);m.default.prototype.init.call(this)}};h.prototype.destroy=function(){m.default.prototype.destroy.call(this);this._toEditor=this._fromEditor=null};h.prototype._acceptModification=function(a,b,c){function d(a,b,c){var d;g.default.forEach(a,function(a,e){e=b.getLineHandle(e);a._setHandle(c,new aa.default(c,a.lineType,a.lineNumber,e));d&&d.segment!==
a.segment&&d.lineType===n.default.CONTEXT&&a.lineType===n.default.CONTEXT&&b.addLineClass(e,"wrap","paired-with-change");d=a})}if("INITIAL"!==a)throw Error("Unrecognized change type: "+a);a=g.default.reject(c,{lineType:D});c=g.default.reject(c,{lineType:E});this._fromEditor.setValue(m.default._combineTexts(a));this._toEditor.setValue(m.default._combineTexts(c));d(a,this._fromEditor,k.default.FROM);d(c,this._toEditor,k.default.TO)};var x={};x[k.default.FROM]="_fromEditor";x[k.default.TO]="_toEditor";
h.prototype._editorForHandle=function(a){return this[x[a.fileType]]};h.prototype._getFocusSegment=function(a){var b=this._fromEditor.getScrollInfo().clientHeight*this._options.focusPoint;if(a>b)return null;var c=b+this._syncScrollingInfo.combinedScrollable._getScrollTop()-a+1;c=Math.ceil(c);return(g.default.find(this._syncScrollingInfo.combinedRegions,function(a){return a._getOffset()<=c&&a._getOffset()+a.getHeight()>c})||g.default.last(this._syncScrollingInfo.combinedRegions))._seg};h.prototype._setFocusSegment=
function(a){function b(a,b){return g.default.compact(a.map(function(a){return a.handles[b]}))}var c=g.default.filter(this._syncScrollingInfo.combinedRegions,function(b){return g.default.includes(a,b._seg)}),d=this._fromEditor.getScrollInfo().clientHeight*this._options.focusPoint;this._scrollToSourcePosition(null,c[0]._getOffset()-d);var e=g.default.chain(c).flatMap("_linkedRegions").flatMap("_lineInfos").uniq().value(),f=this;this.operation(function(){f._markLinesFocused([{editor:f._fromEditor,handles:b(e,
k.default.FROM)},{editor:f._toEditor,handles:b(e,k.default.TO)}])})};h.prototype._findNextAnchor=function(a,b,c){var d=g.default.groupBy(b,l.default.dot("_fileType"));b=d.FROM&&this._findNextAnchorInEditor(this._fromEditor,d.FROM,a,c);c=d.TO&&this._findNextAnchorInEditor(this._toEditor,d.TO,a,c);return b&&c?a===B.default.UP&&c.offset<b.offset||a===B.default.DOWN&&c.offset>=b.offset?b:c:b||c||null};h.prototype.setupHunkmaps=function(a){function b(a,b,d){var f=a.getScrollInfo(),h=Math.max(0,f.height*
d-f.clientHeight*e);a=g.default.findIndex(b,function(a){var b=f.top+a.getOffsetTop();return b<=h&&b+a.getHeight()>h});b=b[a];a=c._syncScrollingInfo.combinedRegions[a];d=c._syncScrollingInfo.combinedScrollable.getScrollInfo();b=(h-(f.top+b.getOffsetTop()))/b.getHeight();b=d.top+a.getOffsetTop()+b*a.getHeight();c._scrollToSourcePosition(0,b)}var c=this,d=a.map(g.default.head);a=a.map(g.default.last);var e=this._options.focusPoint,f=new A.default(this.fromEditorEl,d,{scrollToFn:g.default.partial(b,this._fromEditor,
d)}),h=new A.default(this.toEditorEl,a,{scrollToFn:g.default.partial(b,this._toEditor,a)});d=g.default.debounce(g.default.invokeMap.bind(g.default,[f,h],"redraw"),100);this._addDestroyable(f);this._addDestroyable(h);this.on("widgetAdded",d);this.on("widgetChanged",d);this.on("widgetCleared",d);this.on("resize",d);this._fromEditor.on("scroll",function(a){f.diffScrolled(a.getScrollInfo())});this._toEditor.on("scroll",function(a){h.diffScrolled(a.getScrollInfo())});this._addDestroyable(function(){c._fromEditor=
null;c._toEditor=null})};h.prototype._attachScrollBehavior=function(){var a=this,b=this._fromEditor,c=this._toEditor,d=this._lineInfos;if(!b)return z.default.Deferred().reject();var e=ba.default.setupScrolling(this,d,b,c,{includeCombinedScrollable:!0,focusHeightFraction:a._options.focusPoint});this._syncScrollingInfo=e;var f=a._$container.children(".diff-editor, .segment-connector-column"),g;b=this._requestWindowScrolls({scrollSizing:function(){return e.combinedScrollable.getScrollInfo()},scroll:function(a,
b){null!=b&&e.combinedScrollable.scrollToNative(null,b)},resize:function(b,c){g!==c&&(g=c,e.combinedScrollable.setClientHeight(c),f.height(c),a.refresh())},onSizeChange:function(b){a.on("resize",b)}});this._addDestroyable(e);return b};h.prototype._initSegmentLinking=function(a){var b=(0,z.default)(".segment-connector-column"),c=p.default.createElement("svg",{});b.append(c);var d=Y.bind(null,W(a),c,this._getLineClasses);a=C.default.enqueueCapped(requestAnimationFrame,function(){c.setAttribute("height",
b.height());c.setAttribute("width",b.width());d()});var e=C.default.enqueueCapped(requestAnimationFrame,d);this.on("sync-scroll",d);this.on("widgetAdded",e);this.on("widgetChanged",e);this.on("widgetCleared",e);this.on("resize",a);a()};h.prototype.scrollHandleIntoFocus=function(a){var b=this._editorForHandle(a),c=b.getScrollInfo(),d=a.fileType===k.default.FROM?0:1;a.lineType===ca&&a.fileType===k.default.TO&&(b=this._fromEditor,d=0);var e=g.default.findIndex(this._syncScrollingInfo.linkedFromAndToRegions,
function(b){return b[d]._startIndex<=a.lineNumber&&b[d]._endIndex>a.lineNumber}),f=this._syncScrollingInfo.linkedFromAndToRegions[e][d];e=this._syncScrollingInfo.combinedRegions[e];f=b.heightAtLine(a.lineNumber)-b.heightAtLine(f._startIndex);f=this._syncScrollingInfo.combinedScrollable.getScrollInfo().top+e.getOffsetTop()+f;this._scrollToFocusedOffset(f,c,b)};h.prototype._setupFindScrollIntoViewFunction=function(a,b){var c=this;a.setOption("scrollLineIntoViewFunc",function(a){c.scrollHandleIntoFocus(c.getLineHandleFromNumber(a.from.line,
b))})};h.prototype._scrollEditorToFirstChange=function(){var a=this._findNextChange(null,this._allSegments);a&&this._setFocusSegment(a)};t.default=h;F.exports=t["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-type', location = '/static/bitbucket/internal/feature/file-content/diff-view-type.js' */
define("bitbucket/internal/feature/file-content/diff-view-type",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});var b=a.EFFECTIVE="EFFECTIVE",c=a.COMMON_ANCESTOR="COMMON_ANCESTOR";a.default={EFFECTIVE:b,COMMON_ANCESTOR:c}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:skipped-container', location = '/static/bitbucket/internal/feature/file-content/skipped-container/skipped-container.soy' */
// This file was automatically generated from skipped-container.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }


bitbucket.internal.feature.fileContent.skippedContainer = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="skipped-container' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.hasContentAbove) ? '<div class="content-above"></div>' : '') + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + ((opt_data.canShowMore) ? '<div class="showmore" title="' + soy.$$escapeHtml(opt_data.showMoreTooltip) + '">' + ((opt_data.hasContentAbove && opt_data.hasContentBelow) ? '<span>' + soy.$$escapeHtml('Show more') + '</span>' : '') + '</div>' : '') + ((opt_data.hasContentBelow) ? '<div class="content-below"></div>' : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.skippedContainer.soyTemplateName = 'bitbucket.internal.feature.fileContent.skippedContainer';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-context', location = '/static/bitbucket/internal/feature/file-content/diff-view-context/diff-view-context-internal.js' */
define("bitbucket/internal/feature/file-content/diff-view-context/diff-view-context-internal","module exports jquery lodash bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/model/file-change-types bitbucket/internal/util/function".split(" "),function(r,m,t,u,v,w,x){Object.defineProperty(m,"__esModule",{value:!0});var n=babelHelpers.interopRequireDefault(t),f=babelHelpers.interopRequireDefault(u),g=babelHelpers.interopRequireDefault(v),p=babelHelpers.interopRequireDefault(w),
y={destinationLine:1,destinationSpan:0,sourceLine:1,sourceSpan:0},q=babelHelpers.interopRequireDefault(x).default.eq(g.default.ADDED);m.default={getSeparatedHunkHtml:function(b,d,e){function c(a){return{line:h?a.destinationLine:a.sourceLine,span:h?a.destinationSpan:a.sourceSpan,isLastPage:a.isLastPage}}a:switch(d){case p.default.ADD:var k=g.default.ADDED;break a;case p.default.DELETE:k=g.default.REMOVED;break a;default:k=g.default.CONTEXT}var h=q(k);d=f.default.map(f.default.zip([y].concat(b),b.concat({})),
function(a){var b=c(a[0]),l=c(a[1]),z=1<l.line,d=0<b.span;b=b.line+b.span;l=l.line-1;h?a=0:(a=a[0],a=a.sourceLine+a.sourceSpan-(a.destinationLine+a.destinationSpan));return e(b,l,a,k,z,d)});return b[b.length-1].isLastPage?d.slice(0,d.length-1):d},fetchContext:function(b,d,e,c,k){function h(a,b,c){return a&&f.default.assign({},a,{lines:a.lines.slice(b,c)})}var a=isNaN(d)?k.maxLimit:d-b+1,g=function(l){return n.default.when(0===b?null:l(b,c+(d?0:1)),d?l(b+a-c,c):null).then(function(a,b){return b?a?
{startSep:a.start+c,endSep:b.start,contexts:[a,b]}:{startSep:0,endSep:b.start,contexts:[null,b]}:(b=a.lines.length>c,{startSep:a.start+a.lines.length+(b?-1:0),contexts:b?[h(a,0,-1),null]:[a]})})};return a<k.maxLimit?e(b,a).then(function(b){return a<=2*c?n.default.Deferred().resolve({startSep:0,endSep:0,contexts:[b]}):g(function(a){return n.default.Deferred().resolve({start:a,lines:b.lines})}).then(function(a){return f.default.assign({},a,{contexts:[h(a.contexts[0],0,c),h(a.contexts[1],-c)]})})}):
g(e)},toHunks:function(b,d){return function(e){e=f.default.map(f.default.compact(e.contexts),function(c){return{segments:[{type:d,lines:f.default.map(c.lines,function(b){return{line:b.text}})}],sourceLine:c.start+1,destinationLine:c.start+1-b,isLastPage:c.isLastPage}});return e.length?e:""}},isAdded:q};r.exports=m["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-context', location = '/static/bitbucket/internal/feature/file-content/diff-view-context/diff-view-context.js' */
define("bitbucket/internal/feature/file-content/diff-view-context/diff-view-context","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/file-content/diff-view-context/diff-view-context-internal bitbucket/internal/feature/file-content/diff-view-type bitbucket/internal/model/file-change bitbucket/internal/util/ajax bitbucket/internal/util/dom-event bitbucket/internal/util/navigator".split(" "),function(n,e,d,a,g,t,u,v,w,x,y,z){function A(l,b,c,d,a,m){return a||m?
bitbucket.internal.feature.fileContent.hunkSeparator({tooltip:B,lineStart:l,lineEnd:b,destOffset:c,changeType:d,isBelow:a,isAbove:m}):""}Object.defineProperty(e,"__esModule",{value:!0});d=babelHelpers.interopRequireDefault(d);var C=babelHelpers.interopRequireDefault(a),D=babelHelpers.interopRequireDefault(g),r=babelHelpers.interopRequireDefault(t),p=babelHelpers.interopRequireDefault(u),E=babelHelpers.interopRequireDefault(v),F=babelHelpers.interopRequireDefault(w),G=babelHelpers.interopRequireDefault(x),
H=babelHelpers.interopRequireDefault(y);a=babelHelpers.interopRequireDefault(z);var B=a.default.isMac()?"Click to reveal a few more lines\nCmd + Click to reveal them all":"Click to reveal a few more lines\nCtrl + Click to reveal them all";g=r.default.parse(location.href).getQueryParamValue("context");var q={maxLimit:a.default.isIE()?1E3:5E3,maxContext:g&&parseInt(g,10)||10};e.default={attachExpandContext:function(a,b){var c=b.fileChange,d=b.expansionCallback,g=b.diffViewType;c=new F.default(c);
return a.on("click",".skipped-container:not(.loading)",function(a){a.preventDefault();var f=(0,C.default)(a.currentTarget);f.addClass("loading");f.find(".showmore span").html("\x26nbsp;");var b=f.find(".showmore").spin("small"),e=f.data("change-type"),l=f.data("dest-offset");a=H.default.isCtrlish(a)?q.maxLimit-1:q.maxContext;var m=f.data("line-start")-1,n=f.data("line-end")-1;p.default.fetchContext(m,n,function(a,d){var h=void 0,k=void 0,e=a;h=c.getCommitRange().getSinceRevision();k=c.getCommitRange().getUntilRevision();
g===E.default.EFFECTIVE?(h=h&&h.getId()||k.getParents()[0].getId(),k=c.getSrcPath()&&""!==c.getSrcPath().toString()?c.getSrcPath():c.getPath()):(h=k.getId(),k=c.getPath(),e-=l);return G.default.rest({statusCode:{200:function(a,c,d,b){if(b&&b.message&&0<b.message.replace(/,/g,"").indexOf(" "+e+" "))return{promise:function(){return{lines:[]}}}}},url:r.default.rest().currentRepo().browse().path(k).at(h).withParams({start:e,limit:d}).build()}).then(function(b){b.start=a;return b}).always(function(){b.spinStop()}).fail(function(){f.removeClass("loading")})},
a,q).then(p.default.toHunks(l,e)).then(D.default.bind(d,null,c,f))})},getSeparatedHunkHtml:function(a,b){return p.default.getSeparatedHunkHtml(a,b,A)}};n.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-context', location = '/static/bitbucket/internal/feature/file-content/diff-view-context/diff-view-context.soy' */
// This file was automatically generated from diff-view-context.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }


bitbucket.internal.feature.fileContent.hunkSeparator = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.skippedContainer({hasContentAbove: opt_data.isAbove, hasContentBelow: opt_data.isBelow, canShowMore: true, showMoreTooltip: opt_data.tooltip, extraAttributes: 'data-line-start="' + soy.$$escapeHtml(opt_data.lineStart) + '"' + ((opt_data.lineEnd) ? ' data-line-end="' + soy.$$escapeHtml(opt_data.lineEnd) + '"' : '') + ' data-dest-offset="' + soy.$$escapeHtml(opt_data.destOffset) + '" data-change-type="' + soy.$$escapeHtml(opt_data.changeType) + '" data-below="' + soy.$$escapeHtml(opt_data.isBelow) + '" data-above="' + soy.$$escapeHtml(opt_data.isAbove) + '"'});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.hunkSeparator.soyTemplateName = 'bitbucket.internal.feature.fileContent.hunkSeparator';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:unified-diff-view', location = '/static/bitbucket/internal/feature/file-content/unified-diff-view/unified-diff-view.soy' */
// This file was automatically generated from unified-diff-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.unifiedDiffView.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.unifiedDiffView == 'undefined') { bitbucket.internal.feature.fileContent.unifiedDiffView = {}; }


bitbucket.internal.feature.fileContent.unifiedDiffView.layout = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.diffView.editor(null);
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.unifiedDiffView.layout.soyTemplateName = 'bitbucket.internal.feature.fileContent.unifiedDiffView.layout';
}


bitbucket.internal.feature.fileContent.unifiedDiffView.lineNumbers = function(opt_data, opt_ignored) {
  return '<div class="diff-line-numbers" data-line-type="' + soy.$$escapeHtml(opt_data.lineType) + '" data-line-number="' + soy.$$escapeHtml(opt_data.lineNum) + '"><span class="from">' + soy.$$escapeHtml(opt_data.fromLine) + '</span><span class="to">' + soy.$$escapeHtml(opt_data.toLine) + '</span>' + ((opt_data.marker) ? '<span class="diff-change-marker">' + soy.$$escapeHtml(opt_data.marker) + '</span>' : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.unifiedDiffView.lineNumbers.soyTemplateName = 'bitbucket.internal.feature.fileContent.unifiedDiffView.lineNumbers';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:unified-diff-view', location = '/static/bitbucket/internal/feature/file-content/unified-diff-view/unified-diff-view.js' */
define("bitbucket/internal/feature/file-content/unified-diff-view/unified-diff-view","module exports jquery lodash bitbucket/internal/feature/file-content/diff-line-info bitbucket/internal/feature/file-content/diff-view-context/diff-view-context bitbucket/internal/feature/file-content/diff-view-file-types bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/feature/file-content/diff-view/diff-view bitbucket/internal/feature/file-content/line-handle bitbucket/internal/feature/file-content/text-view/attach-simple-scroll-behavior bitbucket/internal/model/file-change-types bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/object bitbucket/internal/feature/file-content/stash-codemirror/search".split(" "),
function(x,k,y,z,A,B,C,D,E,F,G,H,I,J,K){function L(a){var b=a.destinationLine,c=a.sourceLine;a.segments[0].lines=g.default.map(a.segments[0].lines,function(a){a.destination=b++;a.source=c++;return a});return a}function M(a,b){if(b.linesAdded){var c=b.diff,e=n.default.getSeparatedHunkHtml(c.hunks,a._options.fileChange.type),d,h=[],l,f;b.eachLine(function(a){var b=a.handles.FROM||a.handles.TO;a.hunk!==f&&(f=a.hunk,h.push(b));l=b}).done(function(){switch(b.type){case "INSERT":var f=a._editor.getLineNumber(h[0]._handle),
N=0===f,k=a._editor.lastLine()-b.linesAdded;f=f>k;1<c.hunks.length?(h.shift(),e.shift(),e.pop(),l=void 0):(N||(h.shift(),e.shift()),f?d=e.pop():(e.pop(),l=void 0));break;case "INITIAL":h.length===e.length-1&&(d=e.pop());break;default:throw Error("Unrecognized change type: "+b.type);}a.operation(function(){g.default.forEach(g.default.zip(e,h),p.default.spread(g.default.partial(q,a,!0)));d&&!a._isEntireFile()&&q(a,!1,d,l)})})}}function q(a,b,c,e){if(c){c=(0,r.default)(c);var d=a.addLineWidget(e,c[0],
{coverGutter:!0,noHScroll:!0,above:b});b&&a.addLineClass(e,"wrap","first-line-of-hunk");c.data("widget",d)}}function O(a){a&&a.clear()}function t(a,b){return{lineNumber:a===m.default.ADDED?b.destination:b.source,lineType:a}}function d(a,b){f.default.apply(this,arguments)}Object.defineProperty(k,"__esModule",{value:!0});var r=babelHelpers.interopRequireDefault(y),g=babelHelpers.interopRequireDefault(z),u=babelHelpers.interopRequireDefault(A),n=babelHelpers.interopRequireDefault(B),v=babelHelpers.interopRequireDefault(C),
m=babelHelpers.interopRequireDefault(D),f=babelHelpers.interopRequireDefault(E),P=babelHelpers.interopRequireDefault(F),Q=babelHelpers.interopRequireDefault(G),w=babelHelpers.interopRequireDefault(H),R=babelHelpers.interopRequireDefault(I),p=babelHelpers.interopRequireDefault(J);babelHelpers.interopRequireDefault(K).default.inherits(d,f.default);d.defaults=f.default.defaults;d.prototype.init=function(){if(this._$container){var a=this;this._$container.addClass("unified-diff");this.on("internal-change",
g.default.partial(M,this));this._options.isExcerpt||n.default.attachExpandContext(this._$container,{fileChange:this._options.fileChange,expansionCallback:this._expandContextLines,diffViewType:this._options.diffViewType});this._$container.append(bitbucket.internal.feature.fileContent.unifiedDiffView.layout());var b=this._options.commentContext&&this._options.commentContext.getGutterId();b&&this.registerGutter(b,{weight:100});this.registerGutter("line-number-from",{weight:200});this.registerGutter("line-number-to",
{weight:300});this.registerGutter("gutter-border",{weight:1500});this._editor=this._createEditor({},this._$container.children(".diff-editor"));this._isEntireFile()&&(b=p.default.dot("hunks.0.segments.0.lines.0.line")(this._data.diff),this._syntaxHighlighting(this._options.fileChange.path.name,b,this._editor));this._addDestroyable(function(){a._editor=null});this._scrollingReady.always(function(){a._editor&&(a._editor.setOption("scrollLineIntoViewFunc",function(b){b=a._editor.getLineHandle(b.from.line)._stashHandle;
a.scrollHandleIntoFocus(b)}),a._modifyDiff("INITIAL",a._data.diff,u.default.convertToLineInfos(a._data.diff,a._options)))});f.default.prototype.init.call(this)}};d.prototype._acceptModification=function(a,b,c,e){e=e||0;var d=this._editor;b=f.default._combineTexts(c);switch(a){case "INITIAL":d.setValue(b);break;case "INSERT":d._insert(b,e,!0);break;default:throw Error("Unrecognized change type: "+a);}g.default.forEach(c,function(a,b){b=new P.default(void 0,a.lineType,a.lineNumber,d.getLineHandle(b+
e));a.lineType!==m.default.ADDED&&a._setHandle(v.default.FROM,b);a.lineType!==m.default.REMOVED&&a._setHandle(v.default.TO,b)})};d.prototype._getFocusSegment=function(a){var b=this._editor,c=b.getScrollInfo();a=Math.ceil(c.clientHeight*this._options.focusPoint)-Math.floor(a);if(0>a)return null;c=Math.min(b.lastLine(),b.lineAtHeight(c.top+a+1,"local"));b=b.getLineHandle(c);return(b=this._internalLines[b._stashHandle.lineType][b._stashHandle.lineNumber])&&b.segment};d.prototype._setFocusSegment=function(a){var b=
a[0];this.scrollHandleIntoFocus(this.getLineHandle(t(b.type,b.lines[0])));a=g.default.chain(a).flatMap("lines").map(t.bind(null,b.type)).map(this.getLineHandle).value();this._markLinesFocused([{editor:this._editor,handles:a}])};d.prototype._getFocusLine=function(){var a=this._editor,b=a.getScrollInfo(),c=this._$fileToolbar&&this._$fileToolbar.outerHeight();c=this._$container[0].getBoundingClientRect().top-c;var d=Math.ceil(b.clientHeight*this._options.focusPoint)-(this._editorInnerOffset()-Math.abs(c));
c=0>=c?d:0;b=Math.min(a.lastLine(),a.lineAtHeight(b.top+c+1,"local"));return a.getLineHandle(b)._stashHandle};d.prototype._findNextAnchor=function(a,b,c){return this._findNextAnchorInEditor(this._editor,b,a,c)};d.prototype._attachScrollBehavior=function(){return this._$container?(0,Q.default)(this,this._editor,this._$container.children(".diff-editor")):r.default.Deferred().reject()};d.prototype._editorForHandle=function(){return this._editor};d.prototype._isEntireFile=function(){return(this._options.fileChange.type===
w.default.ADD||this._options.fileChange.type===w.default.DELETE)&&!this._options.isExcerpt};d.prototype._expandContextLines=function(a,b,c){if(this._editor){var d=this.getLineHandle(b);a=this._editor.getLineNumber(d._handle);var f=this._editor.lastLine()===a?a+1:a;this.removeLineClass(d,"wrap","first-line-of-hunk");c.forEach(function(a){a.sourceSpan=a.destinationSpan=a.segments[0].lines.length;L(a)});c.length&&c[0].segments.length&&c[0].segments[0].lines.length&&(d={hunks:c},this._modifyDiff("INSERT",
d,u.default.convertToLineInfos(d,this._options),f));O(b.data("widget"));R.default.trigger("bitbucket.internal.feature.fileContent.diffViewExpanded",null,{$context:b,hunk:c,at:a})}};k.default=d;x.exports=k["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-handler', location = '/static/bitbucket/internal/feature/file-content/handlers/diff-handler-pre-init.js' */
require("bitbucket/feature/files/file-handlers").register({weight:5E3,builtIn:!0,handle:function(a){return require("bitbucket/internal/feature/file-content/handlers/diff-handler").handler.apply(this,arguments)}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-handler', location = '/static/bitbucket/internal/feature/file-content/handlers/diff-handler.js' */
define("bitbucket/internal/feature/file-content/handlers/diff-handler","module exports jquery lodash bitbucket/feature/files/file-handlers bitbucket/util/navbuilder bitbucket/internal/feature/comments/comments bitbucket/internal/feature/file-content/binary-diff-view/binary-diff-view bitbucket/internal/feature/file-content/binary-view/binary-view bitbucket/internal/feature/file-content/content-message/content-message bitbucket/internal/feature/file-content/diff-view-options bitbucket/internal/feature/file-content/diff-view-options-panel/diff-view-options-panel bitbucket/internal/feature/file-content/handlers/diff-handler/diff-handler-internal bitbucket/internal/feature/file-content/request-diff bitbucket/internal/feature/file-content/side-by-side-diff-view/side-by-side-diff-view bitbucket/internal/feature/file-content/unified-diff-view/unified-diff-view bitbucket/internal/model/file-change bitbucket/internal/model/file-change-types bitbucket/internal/model/file-content-modes bitbucket/internal/model/path bitbucket/internal/util/ajax bitbucket/internal/util/function bitbucket/internal/util/promise".split(" "),
function(B,f,C,x,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V){function W(a,e,d){var g=a.$container,c=new l.default(a.fileChange);return a.commentMode!==n.default.commentMode.NONE?(e=d?p.default.groupBy(d.values,function(a){return a.anchor.line?"line":"file"}):{line:e.lineComments||[],file:e.fileComments||[]},n.default.bindContext(g,new n.default.DiffAnchor(c),{lineComments:e.line,fileComments:e.file,commentMode:a.commentMode,relevantContextLines:a.relevantContextLines,diffViewOptions:a.diffViewOptions,
$toolbar:a.$toolbar,urlBuilder:a.commentUrlBuilder})):null}function X(a,e,d,k){var c=e.diff,b=Y.default.builtInHandlers,m=a.$container,h=new l.default(a.fileChange);if(c&&(c.binary||Z.default.treatTextAsBinary(c.destination&&c.destination.extension)))return d=new aa.default(c,a),d.handlerID=d.isDiffingImages()?b.DIFF_IMAGE:b.DIFF_BINARY,d;if(!c||!c.hunks||!c.hunks.length)return q.default.renderEmptyDiff(m,e,h),{handlerID:b.DIFF_EMPTY,extraClasses:"empty-diff message-content"};if(c.hunks[c.hunks.length-
1].truncated)return q.default.renderTooLargeDiff(m,c,h,k),{handlerID:b.DIFF_TOO_LARGE,extraClasses:"too-large-diff message-content"};a=new (k?ba.default:ca.default)(e,g.default.extend({commentContext:d},a));d&&d.setDiffView(a);p.default.defer(a.init.bind(a));a.handlerID=k?b.DIFF_TEXT_SIDE_BY_SIDE:b.DIFF_TEXT_UNIFIED;return a}Object.defineProperty(f,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(C),p=babelHelpers.interopRequireDefault(x),Y=babelHelpers.interopRequireDefault(D),da=
babelHelpers.interopRequireDefault(E),n=babelHelpers.interopRequireDefault(F),aa=babelHelpers.interopRequireDefault(G),Z=babelHelpers.interopRequireDefault(H),q=babelHelpers.interopRequireDefault(I),y=babelHelpers.interopRequireDefault(J),ea=babelHelpers.interopRequireDefault(K),u=babelHelpers.interopRequireDefault(L),fa=babelHelpers.interopRequireDefault(M),ba=babelHelpers.interopRequireDefault(N),ca=babelHelpers.interopRequireDefault(O),l=babelHelpers.interopRequireDefault(P),r=babelHelpers.interopRequireDefault(Q),
ha=babelHelpers.interopRequireDefault(R),ia=babelHelpers.interopRequireDefault(S),z=babelHelpers.interopRequireDefault(T),ja=babelHelpers.interopRequireDefault(U),A=babelHelpers.interopRequireDefault(V);f.default={handler:function(a){function e(){return"side-by-side"===y.default.get("diffType")&&h}function d(a){var c=new l.default(a.fileChange),b=c.getRepository();c=c.getCommitRange();b=da.default.rest().project(b.getProject().getKey()).repo(b.getSlug());b=(a.commentUrlBuilder?a.commentUrlBuilder():
c.getPullRequest()?b.pullRequest(c.getPullRequest().getId()).comments():b.commit(c).comments()).withParams({avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:a.avatarSize||"medium"}),path:(new ia.default(a.fileChange.path)).toString(),markup:!0}).build();a=a.statusCode||z.default.ignore404WithinRepository();g.default.extend(a,{401:function(){return g.default.Deferred().resolve({start:0,size:0,values:[],isLastPage:!0,filter:null}).promise()}});a=z.default.rest({url:b,statusCode:a});return a.then(function(a){return a.errors&&
a.errors.length?g.default.Deferred().rejectWith(this,[this,null,null,a]):a}).promise(a)}if(a.contentMode!==ha.default.DIFF)return!1;var k=a.$container,c=(0,g.default)('.diff-type-options .aui-dropdown2-radio[data-value\x3d"side-by-side"]'),b=new l.default(a.fileChange),m=b.getType(),h=!(m===r.default.ADD||m===r.default.DELETE||a.isExcerpt);a.withComments=a.commentMode!==n.default.commentMode.NONE;e()&&(a.contextLines=u.default.infiniteContext,a.withComments=!1);var f=e()?d:g.default.noop;f=p.default.compact([(0,
fa.default)(b,a),f(a)]);return A.default.whenAbortable.apply(A.default,f).thenAbortable(function(d,f){var t=d.diff;b.getType()&&b.getType!==r.default.UNKNOWN||(b.setType(r.default.guessChangeTypeFromDiff(t)),a.fileChange=b.toJSON());0===(0,x.get)(t,"hunks.0.sourceSpan")?h=!1:m||(h=!u.default.isAddedOrRemoved(t));h?c.removeClass("aui-dropdown2-disabled").attr("aria-disabled",!1):h||c.tooltip({gravity:"e",delayIn:0,title:"data-file-type-compatibility"});var v=u.default.optionsOverride(y.default,h,a.isExcerpt);
a.relevantContextLines=a.relevantContextLines||10;a.diffViewOptions=v;b.getConflict()&&q.default.renderConflict(k,b);var l=new ea.default((0,g.default)(document),v);f=W(a,t||{},f);var w=X(a,d,f,e());return{handlerID:w.handlerID,extraClasses:w.extraClasses,destroy:function(){n.default.unbindContext(a.$container);p.default.chain([w,l,v]).compact().filter(ja.default.dot("destroy")).invokeMap("destroy").value()}}},function(a,c,b,d){if("abort"===b)return g.default.Deferred().resolve();q.default.renderErrors(k,
d);return g.default.Deferred().resolve({extraClasses:"diff-error message-content"})})}};B.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-handler', location = '/static/bitbucket/internal/feature/file-content/handlers/diff-handler/diff-handler-internal.js' */
define("bitbucket/internal/feature/file-content/handlers/diff-handler/diff-handler-internal",["module","exports","lodash","bitbucket/internal/feature/file-content/diff-view-segment-types"],function(f,c,g,h){Object.defineProperty(c,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(g),e=babelHelpers.interopRequireDefault(h);c.default={infiniteContext:1E4,isAddedOrRemoved:function(a){function b(b){return d.default.every(a&&a.hunks,function(a){return d.default.every(a.segments,{type:b})})}
return b(e.default.ADDED)||b(e.default.REMOVED)},optionsOverride:function(a,b,c){return a.proxy({diffType:b?void 0:"unified",hideComments:c?!1:void 0})}};f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-change-type-lozenge', location = '/static/bitbucket/internal/feature/file-content/file-change-type-lozenge/file-change-type-lozenge.soy' */
// This file was automatically generated from file-change-type-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }


bitbucket.internal.feature.fileContent.fileChangeTypeLozenge = function(opt_data, opt_ignored) {
  var param4 = 'change-type-lozenge change-type-' + soy.$$escapeHtml(opt_data.changeType) + ' ';
  switch (opt_data.changeType) {
    case 'ADD':
      param4 += 'aui-lozenge-success';
      break;
    case 'COPY':
      param4 += 'aui-lozenge-current';
      break;
    case 'DELETE':
      param4 += 'aui-lozenge-error';
      break;
    case 'MOVE':
    case 'RENAME':
      param4 += 'aui-lozenge-moved';
      break;
    default:
      param4 += 'aui-lozenge-complete';
  }
  var param19 = '';
  if (opt_data.previousPathContent) {
    switch (opt_data.changeType) {
      case 'MOVE':
        param19 += soy.$$filterNoAutoescape(AJS.format('{0} \x26rarr;\x3cbr\x3e{1}',opt_data.previousPathContent,opt_data.pathContent));
        break;
      case 'COPY':
        param19 += soy.$$filterNoAutoescape(AJS.format('{0} \x26rarr;\x3cbr\x3e{1}',opt_data.previousPathContent,opt_data.pathContent));
        break;
      case 'RENAME':
        param19 += soy.$$filterNoAutoescape(AJS.format('Renamed from \x27\x27{0}\x27\x27',opt_data.previousPathContent));
        break;
    }
  }
  var param32 = '';
  switch (opt_data.changeType) {
    case 'ADD':
      param32 += soy.$$escapeHtml('Added');
      break;
    case 'COPY':
      param32 += soy.$$escapeHtml('Copied');
      break;
    case 'DELETE':
      param32 += soy.$$escapeHtml('Deleted');
      break;
    case 'MOVE':
      param32 += soy.$$escapeHtml('Moved');
      break;
    case 'RENAME':
      param32 += soy.$$escapeHtml('Renamed');
      break;
    default:
      param32 += soy.$$escapeHtml('Modified');
  }
  var output = '' + bitbucket.internal.widget.lozenge.lozenge({htmlElement: 'span', extraClasses: param4, tooltip: param19, text: param32});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.fileChangeTypeLozenge.soyTemplateName = 'bitbucket.internal.feature.fileContent.fileChangeTypeLozenge';
}


bitbucket.internal.feature.fileContent.fileChangeModeLozenge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.lozenge.lozenge({htmlElement: 'span', extraClasses: 'change-mode-lozenge change-mode-' + soy.$$escapeHtml(opt_data.added ? 'added aui-lozenge-success' : 'removed aui-lozenge-error'), tooltip: '' + ((opt_data.added) ? soy.$$escapeHtml('This file is now executable') : soy.$$escapeHtml('This file is no longer executable')), text: '' + ((opt_data.added) ? soy.$$escapeHtml('+x') : soy.$$escapeHtml('-x'))});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.fileChangeModeLozenge.soyTemplateName = 'bitbucket.internal.feature.fileContent.fileChangeModeLozenge';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-toolbar', location = '/static/bitbucket/internal/feature/file-toolbar/file-toolbar.soy' */
// This file was automatically generated from file-toolbar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.file.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.file == 'undefined') { bitbucket.internal.feature.file = {}; }


bitbucket.internal.feature.file.fileToolbar = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="file-toolbar' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><div class="secondary">' + ((opt_data.secondaryToolbarContent) ? soy.$$filterNoAutoescape(opt_data.secondaryToolbarContent) : '') + '</div><div class="primary">' + ((opt_data.fileIcon) ? aui.icons.icon({icon: 'file', size: 'small', useIconFont: true, iconFontSet: 'devtools'}) : '') + ((opt_data.icon) ? soy.$$filterNoAutoescape(opt_data.icon) : '') + ((opt_data.breadcrumbs) ? bitbucket.internal.widget.breadcrumbs.breadcrumbs({pathComponents: []}) : '') + ((opt_data.primaryToolbarContent) ? soy.$$filterNoAutoescape(opt_data.primaryToolbarContent) : '') + '</div></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.file.fileToolbar.soyTemplateName = 'bitbucket.internal.feature.file.fileToolbar';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:web-fragment-templates', location = '/static/bitbucket/internal/widget/web-fragment.soy' */
// This file was automatically generated from web-fragment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.webItem = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<' + soy.$$escapeHtml(opt_data.url || opt_data.forceLink ? 'a' : 'span') + ((opt_data.url) ? ' href="' + soy.$$escapeHtml(opt_data.url) + '"' : '') + ((opt_data.linkId) ? ' id="' + soy.$$escapeHtml(opt_data.linkId) + '"' : '') + ((opt_data.styleClass) ? ' class="' + soy.$$escapeHtml(opt_data.styleClass) + '"' : '') + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + ((opt_data.pluginKey && opt_data.moduleKey) ? ' data-web-item-key="' + soy.$$escapeHtml(opt_data.pluginKey) + ':' + soy.$$escapeHtml(opt_data.moduleKey) + '"' : '') + ((opt_data.extraAttributes) ? aui.renderExtraAttributes(opt_data) : '') + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : (opt_data.params && opt_data.params['iconClass']) ? '<span class="aui-icon ' + soy.$$escapeHtml(opt_data.params['iconClass']) + '">' + soy.$$escapeHtml(opt_data.linkText) + '</span>' : soy.$$escapeHtml(opt_data.linkText)) + '</' + soy.$$escapeHtml(opt_data.url || opt_data.forceLink ? 'a' : 'span') + '>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.webItem.soyTemplateName = 'bitbucket.internal.widget.webItem';
}


bitbucket.internal.widget.webItemButton = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.buttons.button({buttonText: opt_data.linkText ? opt_data.linkText : '', id: opt_data.linkId, title: opt_data.tooltip, extraClasses: opt_data.styleClass && opt_data.extraClasses ? opt_data.styleClass + ' ' + opt_data.extraClasses : opt_data.styleClass ? opt_data.styleClass : opt_data.extraClasses, isDisabled: opt_data.params && opt_data.params['disabled'] == 'true', href: opt_data.url, iconType: opt_data.params['iconClass'] ? 'custom' : '', iconClass: opt_data.params['iconClass'], iconText: ! opt_data.linkText ? opt_data.tooltip : ''});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.webItemButton.soyTemplateName = 'bitbucket.internal.widget.webItemButton';
}


bitbucket.internal.widget.webItemtabMenuItem = function(opt_data, opt_ignored) {
  return '' + widget.aui.tabMenuItem({id: opt_data.linkId, tooltip: opt_data.tooltip, text: opt_data.linkText, url: opt_data.url, extraClasses: opt_data.styleClass, isActive: opt_data.isActive});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.webItemtabMenuItem.soyTemplateName = 'bitbucket.internal.widget.webItemtabMenuItem';
}


bitbucket.internal.widget.webItemDropdownItem = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.webItem(soy.$$augmentMap(opt_data, {forceLink: true}));
};
if (goog.DEBUG) {
  bitbucket.internal.widget.webItemDropdownItem.soyTemplateName = 'bitbucket.internal.widget.webItemDropdownItem';
}


bitbucket.internal.widget.headerDropdownWebItems = function(opt_data, opt_ignored) {
  return '<li class="' + ((opt_data.isActive) ? 'selected' : '') + ((opt_data.styleClass) ? ' ' + soy.$$escapeHtml(opt_data.styleClass) : '') + '"' + ((opt_data.tooltip) ? 'title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + ((opt_data.dropdownWebSections.length > 0) ? aui.dropdown2.trigger({menu: {id: opt_data.pluginKey + '-' + opt_data.moduleKey}, id: opt_data.linkId ? opt_data.linkId : '', text: opt_data.params['iconClass'] ? null : opt_data.linkText, extraClasses: opt_data.hideDropdownArrow ? 'aui-dropdown2-trigger-arrowless' : null, content: '' + ((opt_data.params['iconClass']) ? '<span class="aui-icon ' + soy.$$escapeHtml(opt_data.params['iconClass']) + '">' + soy.$$escapeHtml(opt_data.linkText) + '</span>' : '')}) + aui.dropdown2.contents({id: opt_data.pluginKey + '-' + opt_data.moduleKey, extraClasses: 'aui-style-default', content: '' + bitbucket.internal.widget.headerDropdownWebSections({dropdownWebSections: opt_data.dropdownWebSections, locationPrefix: opt_data.moduleKey + '/'})}) : bitbucket.internal.widget.webItem(opt_data)) + '</li>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.headerDropdownWebItems.soyTemplateName = 'bitbucket.internal.widget.headerDropdownWebItems';
}


bitbucket.internal.widget.headerDropdownWebSections = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownWebSectionList116 = opt_data.dropdownWebSections;
  var dropdownWebSectionListLen116 = dropdownWebSectionList116.length;
  for (var dropdownWebSectionIndex116 = 0; dropdownWebSectionIndex116 < dropdownWebSectionListLen116; dropdownWebSectionIndex116++) {
    var dropdownWebSectionData116 = dropdownWebSectionList116[dropdownWebSectionIndex116];
    var param119 = '<ul class="aui-list-truncate" role="presentation">';
    var sectionItemList121 = WebFragments.getWebItems((opt_data.locationPrefix ? opt_data.locationPrefix : '') + dropdownWebSectionData116.key,opt_data.context ? opt_data.context : {});
    var sectionItemListLen121 = sectionItemList121.length;
    for (var sectionItemIndex121 = 0; sectionItemIndex121 < sectionItemListLen121; sectionItemIndex121++) {
      var sectionItemData121 = sectionItemList121[sectionItemIndex121];
      param119 += '<li role="presentation">' + bitbucket.internal.widget.webItem(sectionItemData121) + '</li>';
    }
    param119 += '</ul>';
    output += aui.dropdown2.section({extraClasses: dropdownWebSectionData116.key, label: dropdownWebSectionData116.labelText, content: param119});
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.headerDropdownWebSections.soyTemplateName = 'bitbucket.internal.widget.headerDropdownWebSections';
}


bitbucket.internal.widget.webFragmentButtons = function(opt_data, opt_ignored) {
  var output = '';
  var webFragmentList130 = opt_data.isReverse ? WebFragments.getWebFragments(opt_data.location,opt_data.context).reverse() : WebFragments.getWebFragments(opt_data.location,opt_data.context);
  var webFragmentListLen130 = webFragmentList130.length;
  for (var webFragmentIndex130 = 0; webFragmentIndex130 < webFragmentListLen130; webFragmentIndex130++) {
    var webFragmentData130 = webFragmentList130[webFragmentIndex130];
    switch (webFragmentData130.type) {
      case 'ITEM':
        output += bitbucket.internal.buttons.buttons({content: '' + bitbucket.internal.widget.webItemButton(webFragmentData130)});
        break;
      case 'SECTION':
        var param138 = '';
        var webItemList139 = opt_data.isReverse ? WebFragments.getWebItems(opt_data.location + '/' + webFragmentData130.key,opt_data.context).reverse() : WebFragments.getWebItems(opt_data.location + '/' + webFragmentData130.key,opt_data.context);
        var webItemListLen139 = webItemList139.length;
        for (var webItemIndex139 = 0; webItemIndex139 < webItemListLen139; webItemIndex139++) {
          var webItemData139 = webItemList139[webItemIndex139];
          param138 += bitbucket.internal.widget.webItemButton(webItemData139);
        }
        output += bitbucket.internal.buttons.buttons({extraClasses: webFragmentData130.styleClass, content: param138});
        break;
    }
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.webFragmentButtons.soyTemplateName = 'bitbucket.internal.widget.webFragmentButtons';
}


bitbucket.internal.widget.webItemTabs = function(opt_data, opt_ignored) {
  var param145 = '' + ((opt_data.tabItemsContent) ? soy.$$filterNoAutoescape(opt_data.tabItemsContent) : '');
  var itemList150 = opt_data.webItems ? opt_data.webItems : WebFragments.getWebItems(opt_data.location,opt_data.context ? opt_data.context : null);
  var itemListLen150 = itemList150.length;
  for (var itemIndex150 = 0; itemIndex150 < itemListLen150; itemIndex150++) {
    var itemData150 = itemList150[itemIndex150];
    var param158 = '';
    var subPanelList159 = WebFragments.getWebPanels(itemData150.moduleKey + '.meta',opt_data.context ? opt_data.context : null).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
    var subPanelListLen159 = subPanelList159.length;
    for (var subPanelIndex159 = 0; subPanelIndex159 < subPanelListLen159; subPanelIndex159++) {
      var subPanelData159 = subPanelList159[subPanelIndex159];
      param158 += soy.$$escapeHtml(subPanelData159);
    }
    param145 += widget.aui.tabMenuItem({url: itemData150.url, text: itemData150.linkText, id: itemData150.linkId, extraLinkClasses: itemData150.styleClass, tooltip: itemData150.tooltip, isActive: opt_data.showFirstTab ? itemIndex150 == 0 : opt_data.activeTab ? itemData150.moduleKey == opt_data.activeTab : false, extraAttributes: {'data-module-key': itemData150.moduleKey}, extraLinkContent: param158});
  }
  var output = '' + widget.aui.tabChrome(soy.$$augmentMap(opt_data, {tabItemsContent: param145}));
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.webItemTabs.soyTemplateName = 'bitbucket.internal.widget.webItemTabs';
}


bitbucket.internal.widget.sidebarWebFragmentNavigation = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.primaryNavContent || opt_data.secondaryNavContent || opt_data.webFragments.length > 0) {
    var param172 = '<ul class="aui-nav">' + ((opt_data.primaryNavContent) ? soy.$$filterNoAutoescape(opt_data.primaryNavContent) : '');
    var fragmentList178 = opt_data.webFragments;
    var fragmentListLen178 = fragmentList178.length;
    for (var fragmentIndex178 = 0; fragmentIndex178 < fragmentListLen178; fragmentIndex178++) {
      var fragmentData178 = fragmentList178[fragmentIndex178];
      param172 += (fragmentData178.type == 'ITEM') ? bitbucket.internal.widget.sidebarNavItemWebItem({context: opt_data.context, isActive: fragmentData178.moduleKey == opt_data.activeNavItem, isTierOne: opt_data.isTierOne, webItem: fragmentData178}) : (fragmentData178.type == 'SECTION') ? bitbucket.internal.widget.sidebarNavWebSection({activeNavItem: opt_data.activeNavItem, context: opt_data.context, fragment: fragmentData178, isTierOne: opt_data.isTierOne}) : '';
    }
    param172 += '</ul>';
    output += widget.aui.sidebarNavGroup({extraClasses: opt_data.extraClasses, isTierOne: opt_data.isTierOne, isActions: opt_data.isActions, title: opt_data.title, navContent: param172, secondaryNavContent: '' + ((opt_data.secondaryNavContent) ? '<ul class="aui-nav">' + soy.$$filterNoAutoescape(opt_data.secondaryNavContent) + '</ul>' : '')});
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.sidebarWebFragmentNavigation.soyTemplateName = 'bitbucket.internal.widget.sidebarWebFragmentNavigation';
}


bitbucket.internal.widget.sidebarNavWebSection = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.sidebarNavSectionWithItems({activeNavItem: opt_data.activeNavItem, context: opt_data.context, heading: opt_data.fragment.labelText, isTierOne: opt_data.isTierOne, webItems: WebFragments.getWebItems(opt_data.fragment.location + '/' + opt_data.fragment.key,opt_data.context ? opt_data.context : null)});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.sidebarNavWebSection.soyTemplateName = 'bitbucket.internal.widget.sidebarNavWebSection';
}


bitbucket.internal.widget.sidebarNavSectionWithItems = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.webItems.length) {
    output += widget.aui.navHeading({text: opt_data.heading}) + '<ul class="aui-nav">';
    var webItemList215 = opt_data.webItems;
    var webItemListLen215 = webItemList215.length;
    for (var webItemIndex215 = 0; webItemIndex215 < webItemListLen215; webItemIndex215++) {
      var webItemData215 = webItemList215[webItemIndex215];
      output += bitbucket.internal.widget.sidebarNavItemWebItem({context: opt_data.context, isActive: webItemData215.moduleKey == opt_data.activeNavItem || webItemData215.linkId == opt_data.activeNavItem, isTierOne: opt_data.isTierOne, webItem: webItemData215});
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.sidebarNavSectionWithItems.soyTemplateName = 'bitbucket.internal.widget.sidebarNavSectionWithItems';
}


bitbucket.internal.widget.sidebarNavItemWebItem = function(opt_data, opt_ignored) {
  var param233 = '';
  if (opt_data.webItem.moduleKey) {
    var badgeContentList236 = WebFragments.getWebPanels(opt_data.webItem.moduleKey + '.badge',opt_data.context ? opt_data.context : null).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
    var badgeContentListLen236 = badgeContentList236.length;
    for (var badgeContentIndex236 = 0; badgeContentIndex236 < badgeContentListLen236; badgeContentIndex236++) {
      var badgeContentData236 = badgeContentList236[badgeContentIndex236];
      param233 += ' ' + soy.$$escapeHtml(badgeContentData236);
    }
  }
  var param240 = '';
  var actionLocation__soy241 = opt_data.webItem.params['actionLocation'];
  if (actionLocation__soy241) {
    var actions__soy244 = WebFragments.getWebItems(actionLocation__soy241,opt_data.context);
    param240 += (actions__soy244.length) ? bitbucket.internal.buttons.button({buttonText: '', extraClasses: 'actions-trigger aui-dropdown2-trigger aui-button-subtle aui-dropdown2-trigger-arrowless', extraAttributes: 'aria-owns="' + opt_data.webItem.linkId + '-actions-dialog' + '" aria-haspopup="true"', iconType: 'aui', iconText: 'More', iconClass: 'aui-icon-small aui-iconfont-more'}) : '';
  }
  var output = '' + widget.aui.sidebarNavItem({extraClasses: opt_data.webItem.styleClass, iconClass: opt_data.webItem.params['iconClass'], id: opt_data.webItem.linkId, webItemKey: opt_data.webItem.completeKey, isActive: opt_data.isActive, isTierOne: opt_data.isTierOne, text: opt_data.webItem.linkText, tooltip: opt_data.webItem.tooltip, url: opt_data.webItem.url, badgeContent: param233, actionContent: param240});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.sidebarNavItemWebItem.soyTemplateName = 'bitbucket.internal.widget.sidebarNavItemWebItem';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-content', location = '/static/bitbucket/internal/feature/file-content/file-content.js' */
define("bitbucket/internal/feature/file-content/file-content","module exports aui jquery lodash require bitbucket/feature/files/file-handlers bitbucket/util/navbuilder bitbucket/internal/bbui/ediff/ediff bitbucket/internal/feature/comments/comments bitbucket/internal/model/commit-range bitbucket/internal/model/content-tree-node-types bitbucket/internal/model/diff-type bitbucket/internal/model/file-change bitbucket/internal/model/file-change-types bitbucket/internal/model/file-content-modes bitbucket/internal/model/revision bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/promise".split(" "),
function(w,p,q,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N){function O(a,b){a=l.default.currentRepo().raw().path(a);b&&!b.isDefault()&&(a=a.at(b.getId()));return a.build()}function c(a,b){var e=this;this._id=b||void 0;this._containerSelector=a;this.$self=(0,f.default)("#"+this._id);m.default.on("bitbucket.internal.feature.commitselector.itemSelected",function(a){var b=a.path,d=a.srcPath;a=new P.default(a.commitJSON);this===e.untilRevisionPicker&&m.default.trigger("bitbucket.internal.feature.filecontent.untilRevisionChanged",
e,a,b,d)});this._lastInitPromise=r.default.thenAbortable(f.default.Deferred().resolve())}function u(a,b,e){for(var d="",g=0,c=0;c<b.length;c++){var f=b[c];d+=h.default.escapeHtml(a.substring(g,f.start))+'\x3cspan class\x3d"'+e+'"\x3e'+h.default.escapeHtml(a.substring(f.start,f.end))+"\x3c/span\x3e";g=f.end}g<a.length&&(d+=h.default.escapeHtml(a.substring(g)));return d}Object.defineProperty(p,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(q),f=babelHelpers.interopRequireDefault(x),
n=babelHelpers.interopRequireDefault(y),Q=babelHelpers.interopRequireDefault(z),R=babelHelpers.interopRequireDefault(A),l=babelHelpers.interopRequireDefault(B),t=babelHelpers.interopRequireDefault(C);q=babelHelpers.interopRequireDefault(D);var S=babelHelpers.interopRequireDefault(E),T=babelHelpers.interopRequireDefault(F),U=babelHelpers.interopRequireDefault(G),V=babelHelpers.interopRequireDefault(H),v=babelHelpers.interopRequireDefault(I),k=babelHelpers.interopRequireDefault(J),P=babelHelpers.interopRequireDefault(K),
W=babelHelpers.interopRequireDefault(L),m=babelHelpers.interopRequireDefault(M),r=babelHelpers.interopRequireDefault(N);c.commentMode=q.default.commentMode;c.diffPreset={contentMode:k.default.DIFF,untilRevisionPicker:!0,rawLink:!1,sourceLink:!1,modeToggle:!0,changeTypeLozenge:!1,changeModeLozenge:!1,breadcrumbs:!1,commentMode:c.commentMode.NONE};c.sourcePreset={contentMode:k.default.SOURCE,untilRevisionPicker:!0,rawLink:!0,sourceLink:!1,modeToggle:!0,changeTypeLozenge:!1,changeModeLozenge:!1,breadcrumbs:!1,
commentMode:c.commentMode.NONE};c.defaults={contentMode:k.default.SOURCE,untilRevisionPicker:!1,rawLink:!1,sourceLink:!1,modeToggle:!1,changeTypeLozenge:!1,changeModeLozenge:!1,fileIcon:!1,breadcrumbs:!1,scrollPaneSelector:void 0,commentMode:c.commentMode.REPLY_ONLY,pullRequestDiffLink:!1,toolbarWebFragmentLocationPrimary:null,toolbarWebFragmentLocationSecondary:null,asyncDiffModifications:!0,attachScroll:!0,scrollStyle:"fixed",useDefaultHandler:!1};c.prototype.initToolbarItems=function(a,b,e){var d=
(0,f.default)(this._containerSelector),g=b.getCommitRange().getUntilRevision();a=(0,f.default)(bitbucket.internal.feature.fileContent.main(f.default.extend({id:this._id,preloaded:!!b.getDiff(),sourceUrl:this._options.sourceUrl||this._options.modeToggle?l.default.currentRepo().browse().path(b.getPath()).at(a.getDisplayId()).until(g&&g.getId()).build():"",diffUrl:this._options.modeToggle?l.default.currentRepo().diff(b,a,this._options.headPath,e).at(a.getDisplayId()).build():"",fileChange:b.toJSON()},
this._options)));this.$self&&this.$self.remove();this.$self=a.appendTo(d);d=this.$toolbar=a.children(".file-toolbar");this.$contentView=a.children(".content-view");this._initCommands();this.$breadcrumbs=this._options.breadcrumbs?d.find(".breadcrumbs"):null;this.$changeTypeLozenge=this._options.changeTypeLozenge?d.find(".change-type-placeholder"):null;this.$changeModeLozenge=this._options.changeModeLozenge?d.find(".change-mode-placeholder"):null;this.$viewSource=this._options.sourceLink?d.find(".source-view-link").tooltip({gravity:"ne"}):
null;this._options.pullRequestDiffLink&&d.find(".pull-request-diff-outdated-lozenge").tooltip({gravity:"ne"})};c.prototype._initCommands=function(){var a=this.$contentView,b=this.$toolbar;"self"===this._options.scrollPaneSelector&&a.addClass("scroll-x");this.untilRevisionPicker&&this.untilRevisionPicker.destroy();this.untilRevisionPicker=this._options.untilRevisionPicker?new ((0,Q.default)("bitbucket/internal/feature/file-content/commit-selector/commit-selector",null))({buttonEl:b.find(".until-commit-button"),
id:"until-commit"}):null;this.$viewRaw=this._options.rawLink?b.find(".raw-view-link"):null;this.$modeToggle=this._options.modeToggle?b.find(".mode-toggle").tooltip({gravity:"ne"}):null};c.prototype.initForContent=function(a,b){b=b||{};var e=a.getCommitRange().getUntilRevision();this.$viewSource&&(a.getType()===v.default.DELETE||a.getNodeType()===T.default.SUBMODULE?this.$viewSource.addClass("hidden"):this.$viewSource.attr("href",l.default.currentRepo().browse().path(a.getPath()).at(e&&e.getId()).build()));
this.$viewRaw&&this.$viewRaw.attr("href",O(a.getPath(),e&&e.getRevisionReference()));this.untilRevisionPicker&&this.untilRevisionPicker.init({followRenames:b.followRenames,headRevisionReference:b.headRef,itemTemplate:bitbucket.internal.feature.fileContent.commitSelectorItemAuthor,itemTitle:function(a){return h.default.format("Click to view file at revision {0}",a)},itemUrl:function(a,e){var d=l.default.currentRepo(),c=a.properties&&a.properties.change;e._mode===k.default.DIFF?d=
d.diff(new V.default({commitRange:new S.default({untilRevision:a,diffType:U.default.COMMIT}),path:c&&c.path||e._path,srcPath:c&&c.srcPath||void 0}),e._headRevisionRef,e._path,!1):(a={until:a.id},c&&(c.path!==e._path.toString()&&(a.untilPath=c.path),c.srcPath?a.sincePath=c.srcPath:a.autoSincePath=!1),b.followRenames&&c||(a.autoSincePath=!1),d=d.browse().path(e._path).withParams(a));return d.build()},mode:b.contentMode,path:b.headPath,selectedCommit:e&&e.toJSON()});this.$breadcrumbs&&this.$breadcrumbs.html(this.renderBreadCrumbs(a.getPath()));
this.$changeTypeLozenge&&this._initChangeTypeLozenge(a);this.$changeModeLozenge&&(e=this.getFileChangedModeLozenge(a))&&this.$changeModeLozenge.append((0,f.default)(e).tooltip());if(this.$modeToggle)this.$modeToggle.on("click","a:not(.active,.disabled)",function(a){W.default.openInSameTab(a)&&(a.preventDefault(),m.default.trigger("bitbucket.internal.feature.filecontent.requestedModeChange",this,(0,f.default)(this).hasClass("mode-diff")?k.default.DIFF:k.default.SOURCE))});var d={$toolbar:this.$toolbar,
$container:this.$contentView,asyncDiffModifications:this._options.asyncDiffModifications,attachScroll:this._options.attachScroll,autoResizing:this._options.autoResizing,contentMode:this._options.contentMode,commentMode:this._options.commentMode,diffUrlBuilder:this._options.diffUrlBuilder,fileChange:a.toJSON(),isExcerpt:!!this._options.isExcerpt,lineComments:this._options.lineComments,relevantContextLines:this._options.relevantContextLines,scrollStyle:this._options.scrollStyle,anchor:b.anchor,autoSrcPath:b.autoSrcPath,
commentUrlBuilder:b.commentUrlBuilder,diffViewType:b.diffViewType,useDefaultHandler:b.useDefaultHandler};a=(0,f.default)("\x3cdiv /\x3e").addClass("file-content-spinner").appendTo(this.$self);m.default.trigger("bitbucket.internal.feature.fileContent.handlerRequested",null,d);return r.default.spinner(a,R.default._handle(d).done(n.default.bind(function(a,b){this.renderErrors(b);this.handler=a;this.$self.addClass(a.extraClasses);a={handlerID:a.handlerID,displayType:this._options.contentMode,fileChange:d.fileChange,
commentMode:this._options.commentMode};this._options.toolbarWebFragmentLocationPrimary&&this.$toolbar.children(".primary").append(bitbucket.internal.widget.webFragmentButtons({location:this._options.toolbarWebFragmentLocationPrimary,context:a}));this._options.toolbarWebFragmentLocationSecondary&&this.$toolbar.children(".secondary").prepend(bitbucket.internal.widget.webFragmentButtons({location:this._options.toolbarWebFragmentLocationSecondary,context:a,isReverse:!0}))},this)),"large",{zIndex:10}).done(function(a){return n.default.defer(function(){return m.default.trigger("bitbucket.internal.feature.fileContent.requestHandled",
null,d,a)})})};c.prototype.renderErrors=function(a){this.$self.parent().find(".file-content-errors").remove();0<a.length&&this.$self.before(bitbucket.internal.feature.fileContent.errors({errors:n.default.map(a,function(a){return a.message||a})}))};c.prototype.toggleToolbarDisable=function(a){this.$self.find(".file-toolbar .aui-button").toggleClass("disabled",a).prop("disabled",a).attr("aria-disabled",a)};c.prototype.renderBreadCrumbs=function(a){a=n.default.map(a.getComponents(),function(a){return{text:a}});
return bitbucket.internal.widget.breadcrumbs.crumbs({pathComponents:a,primaryLink:"COMMIT"!==this._options.diffType||this._options.pullRequestDiffCurrent?this._options.pullRequestDiffLinkUrl:null})};c.prototype.getFileChangedModeLozenge=function(a){var b=a.getSrcExecutable();a=a.getExecutable();var c=null;null==b&&!0===a||!1===b&&!0===a?c=!0:!0===b&&!1===a&&(c=!1);return null!==c?(0,f.default)(bitbucket.internal.feature.fileContent.fileChangeModeLozenge({added:c})):null};c.prototype.init=function(a,
b){a=this._initInternal.bind(this,a,b);return this._lastInitPromise=this.reset().thenAbortable(a,a)};c.prototype._initInternal=function(a,b){b=this._options=f.default.extend({},c.defaults,b);var e=a.getCommitRange(),d=b.headRef||e.getUntilRevision()&&e.getUntilRevision().getRevisionReference();if(b.changeTypeLozenge&&!a.getType())throw Error("Change type is required to show the change type lozenge.");if(!e.getUntilRevision()&&(b.sourceLink||b.rawLink||b.untilRevisionPicker))throw Error("Revision info is required to show a link to the source or raw file, or a revision picker.");
this.initToolbarItems(d,a,b.autoSrcPath);return this.initForContent(a,{headPath:b.headPath||a.getPath(),headRef:d,anchor:b.anchor,contentMode:b.contentMode,followRenames:b.followRenames,autoSrcPath:b.autoSrcPath,commentUrlBuilder:b.commentUrlBuilder,diffViewType:b.diffViewType,useDefaultHandler:b.useDefaultHandler})};c.prototype.reset=function(){this._lastInitPromise&&this._lastInitPromise.abort();var a=this._resetInternal.bind(this);return r.default.thenAbortable(this._lastInitPromise.then(a,a))};
c.prototype._resetInternal=function(){this.handler&&(this.handler.extraClasses&&this.$self.removeClass(this.handler.extraClasses),n.default.isFunction(this.handler.destroy)&&this.handler.destroy(),delete this.handler);return f.default.Deferred().resolve()};c.prototype.destroy=function(){this.reset()};c.prototype._initChangeTypeLozenge=function(a){var b=a.getPath(),c=a.getSrcPath()||b;if(a.getType()===v.default.RENAME){var d=h.default.escapeHtml(c.getName());var g=h.default.escapeHtml(b.toString())}else c&&
(d=c.toString(),b=b.toString(),g=t.default.diff(t.default.tokenizeString(d),t.default.tokenizeString(b)),d=u(d,g.originalRegions,"deleted"),g=u(b,g.revisedRegions,"added"));this.$changeTypeLozenge.append(bitbucket.internal.feature.fileContent.fileChangeTypeLozenge({changeType:a.getType(),previousPathContent:d,pathContent:g}));this.$changeTypeLozenge.find(".change-type-lozenge").tooltip({html:!0,className:"change-type-lozenge-tooltip",gravity:function(){var a=(0,f.default)(document).width()-(0,f.default)(this).offset().left-
(0,f.default)(this).width()/2,b=(0,f.default)(".tipsy").outerWidth();return a>b/2+10?"n":"ne"}})};p.default=c;w.exports=p["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-content', location = '/static/bitbucket/internal/feature/file-content/file-content.soy' */
// This file was automatically generated from file-content.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }


bitbucket.internal.feature.fileContent.main = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="file-content' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + bitbucket.internal.feature.file.fileToolbar({fileIcon: opt_data.fileIcon, breadcrumbs: false, primaryToolbarContent: '' + ((opt_data.modeToggle) ? bitbucket.internal.buttons.buttons({extraClasses: 'mode-toggle', content: '' + bitbucket.internal.buttons.button({extraClasses: 'mode-source', isPressed: opt_data.contentMode == 'source', href: opt_data.sourceUrl, buttonText: 'Source view', title: 'View the full source of this file'}) + bitbucket.internal.buttons.button({extraClasses: 'mode-diff', isPressed: opt_data.contentMode == 'diff', href: opt_data.diffUrl, buttonText: 'Diff to previous', title: 'View the changes made in this revision'})}) : '') + ((opt_data.untilRevisionPicker) ? bitbucket.internal.buttons.button({extraClasses: 'aui-dd-trigger until-commit-button', buttonText: 'History', title: 'View the history of this file'}) : '') + ((opt_data.breadcrumbs) ? bitbucket.internal.widget.breadcrumbs.breadcrumbs({pathComponents: []}) : '') + ((opt_data.changeTypeLozenge) ? '<div class="change-type-placeholder"></div>' : '') + ((opt_data.changeModeLozenge) ? '<div class="change-mode-placeholder"></div>' : ''), secondaryToolbarContent: '' + ((opt_data.sourceLink) ? bitbucket.internal.buttons.button({href: '#', extraClasses: 'aui-button-subtle source-view-link', title: 'View the full source of this file', iconType: 'custom', iconClass: 'aui-icon aui-icon-small aui-iconfont-devtools-file', iconText: 'View the full source of this file', buttonText: ''}) : '') + ((opt_data.rawLink) ? bitbucket.internal.buttons.button({href: '#', buttonText: 'Raw file', extraClasses: 'aui-button-link raw-view-link'}) : '') + ((opt_data.pullRequestDiffLink) ? (opt_data.pullRequestDiffCurrent == false) ? (opt_data.diffType == 'EFFECTIVE') ? bitbucket.internal.widget.lozenge.lozenge({text: 'Outdated', htmlElement: 'span', extraClasses: 'aui-lozenge-current aui-lozenge-subtle pull-request-diff-outdated-lozenge', tooltip: 'This diff has changed in more recent commits'}) : '' : '' : (opt_data.contentMode == 'diff') ? '<div class="diff-view-options">' + bitbucket.internal.feature.fileContent.diffViewOptionsPanel.main({commentMode: opt_data.commentMode, displayType: opt_data.contentMode, fileChange: opt_data.fileChange}) + '</div>' : '')}) + '<div class="content-view ' + soy.$$escapeHtml(opt_data.contentMode) + '-view' + ((opt_data.preloaded) ? ' fully-loaded' : '') + '"></div></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.main.soyTemplateName = 'bitbucket.internal.feature.fileContent.main';
}


bitbucket.internal.feature.fileContent.errors = function(opt_data, opt_ignored) {
  var output = '<div class="file-content-errors">';
  var errorList97 = opt_data.errors;
  var errorListLen97 = errorList97.length;
  for (var errorIndex97 = 0; errorIndex97 < errorListLen97; errorIndex97++) {
    var errorData97 = errorList97[errorIndex97];
    output += aui.message.warning({content: '' + soy.$$escapeHtml(errorData97), isCloseable: true});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.errors.soyTemplateName = 'bitbucket.internal.feature.fileContent.errors';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:parse-commit-message-util', location = '/static/bitbucket/internal/util/parse-commit-message.js' */
define("bitbucket/internal/util/parse-commit-message",["module","exports"],function(f,a){Object.defineProperty(a,"__esModule",{value:!0});var e=["\n\n","\n",". "];a.default={splitIntoSubjectAndBody:function(b){for(var c=0;c<e.length;c++){var a=e[c],d=b.indexOf(a);if(-1!==d)return c=b.substring(0,d).replace(/\n/g," ")+a.trim(),b=b.substring(d+a.length),this.subjectAndBody(c,b)}return this.subjectAndBody(b,"")},subjectAndBody:function(b,a){return{subject:b,body:a}}};f.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:project-avatar', location = '/static/bitbucket/internal/feature/project/project-avatar/project-avatar.soy' */
// This file was automatically generated from project-avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.project.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.project == 'undefined') { bitbucket.internal.feature.project = {}; }


bitbucket.internal.feature.project.avatar = function(opt_data, opt_ignored) {
  return '' + aui.avatar.avatar({tagName: opt_data.tagName, size: opt_data.size, avatarImageUrl: opt_data.imageUrl ? opt_data.imageUrl : opt_data.project ? require('bitbucket/util/navbuilder')._avatarUrl(opt_data.project, ({XSMALL:32,SMALL:48,MEDIUM:64,LARGE:96,XLARGE:128,XXLARGE:192,XXXLARGE:256})[opt_data.size.toUpperCase()]).build() : '', accessibilityText: opt_data.project ? opt_data.project.name : '', title: opt_data.tooltip, badgeContent: opt_data.badgeContent, isProject: ! opt_data.standardAvatar && ! opt_data.project.owner, imageClasses: opt_data.imageClasses, extraClasses: (opt_data.hideBadge ? ' badge-hidden' : '') + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: opt_data.extraAttributes});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.project.avatar.soyTemplateName = 'bitbucket.internal.feature.project.avatar';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:ref-lozenge', location = '/static/bitbucket/internal/feature/repository/ref-lozenge/ref-lozenge.js' */
define("bitbucket/internal/feature/repository/ref-lozenge/ref-lozenge",["jquery"],function(f){var d=babelHelpers.interopRequireDefault(f);(0,d.default)(".ref-lozenge").tooltip({live:!0,title:"data-ref-tooltip",hoverable:!0,gravity:function(){return d.default.fn.tipsy.autoNS.call(this)+d.default.fn.tipsy.autoWE.call(this)},delayIn:500,className:function(){var a=(0,d.default)(".tipsy"),c=a[0],b=a.prop("className"),e=/tipsy-[ns]?e/.test(b);b=/tipsy-s/.test(b);var g=e?c.offsetWidth:void 0,f=b?c.offsetHeight:
void 0;a.addClass("ref-lozenge-tooltip");e&&(e=c.offsetWidth-g,g=parseFloat(a.css("left"),10),a.css("left",g-e+"px"));b&&(c=c.offsetHeight-f,b=parseFloat(a.css("top"),10),a.css("top",b-c+"px"));return"ref-lozenge-tooltip"}})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:ref-lozenge', location = '/static/bitbucket/internal/feature/repository/ref-lozenge/ref-lozenge.soy' */
// This file was automatically generated from ref-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.repository.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.repository == 'undefined') { bitbucket.internal.feature.repository = {}; }


bitbucket.internal.feature.repository.refLozenge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.lozenge.htmlLozenge({extraClasses: (opt_data.extraClasses ? opt_data.extraClasses + ' ' : '') + 'ref-lozenge', monospace: true, htmlElement: 'span', content: ((opt_data.repository) ? '<span class="repository">' + bitbucket.internal.feature.project.avatar({size: 'xsmall', project: opt_data.repository.project, tagName: 'span'}) + '<span class="name">' + soy.$$escapeHtml(opt_data.repository.name) + '</span></span>' : '') + '<span class="ref ' + soy.$$escapeHtml(opt_data.ref.type && opt_data.ref.type.id ? opt_data.ref.type.id.toLowerCase() : 'branch') + '">' + aui.icons.icon({size: 'small', useIconFont: true, iconFontSet: 'devtools', icon: opt_data.ref.type && opt_data.ref.type.id && opt_data.ref.type.id.toLowerCase() == 'tag' ? 'tag' : 'branch-small'}) + '<span class="name" aria-label="' + ((opt_data.refAccessibilityText) ? soy.$$escapeHtml(opt_data.refAccessibilityText) : soy.$$escapeHtml(AJS.format('branch {0}',opt_data.ref.displayId))) + '">' + soy.$$escapeHtml(opt_data.ref.displayId) + '</span></span>', extraAttributes: {'data-ref-tooltip': opt_data.tooltip ? opt_data.tooltip : (opt_data.repository ? opt_data.repository.project.name + ' / ' + opt_data.repository.name + ' : ' : '') + opt_data.ref.displayId}});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.refLozenge.soyTemplateName = 'bitbucket.internal.feature.repository.refLozenge';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:ref-lozenge', location = '/static/bitbucket/internal/feature/repository/ref-lozenge/ref-lozenge-init.js' */
require("bitbucket/internal/feature/repository/ref-lozenge/ref-lozenge");;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-activity', location = '/static/bitbucket/internal/feature/pull-request/activity/pull-request-activity.soy' */
// This file was automatically generated from pull-request-activity.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.activity = function(opt_data, opt_ignored) {
  return '<div class="pull-request-activity-content"><ol ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="pull-request-activity comment-container' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + bitbucket.internal.feature.commentFormListItem({tips: opt_data.commentTips, extraFormClasses: 'general-comment-form collapsed', currentUser: opt_data.currentUser}) + '</ol></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activity.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activity';
}


bitbucket.internal.feature.pullRequest.activityListItemContainer = function(opt_data, opt_ignored) {
  return '<li class="activity-item' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + ((opt_data.isNew) ? ' new' : '') + ((opt_data.isFocused) ? ' focused' : '') + '"' + ((opt_data.id) ? ' data-activityid="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + '><div class="activity-item-content"><div class="avatar">' + bitbucket.internal.widget.avatar({size: 'medium', person: opt_data.user}) + '</div><div class="action"><p class="summary">' + soy.$$filterNoAutoescape(opt_data.summaryContent) + bitbucket.internal.widget.date.shortAge({date: opt_data.activityDate}) + ((opt_data.diffType == 'COMMIT' || opt_data.diffType == 'RANGE') ? bitbucket.internal.feature.pullRequest.commitOrRangeComment({commitId: opt_data.commitId, commentLink: opt_data.commentLink, current: opt_data.isCurrent, sinceId: opt_data.sinceId, diffType: opt_data.diffType}) : '') + ((! opt_data.isCurrent && (opt_data.diffType == 'COMMIT' || opt_data.diffType == 'RANGE')) ? '<span class="removed-lozenge-container">' + bitbucket.internal.widget.lozenge.lozenge({text: 'Removed', htmlElement: 'span', extraClasses: 'aui-lozenge aui-lozenge-subtle aui-lozenge-error ', tooltip: 'The commit this comment was added on has been removed from the pull request'}) + '</span>' : '') + '</p><div class="detail">' + ((opt_data.detailContent) ? soy.$$filterNoAutoescape(opt_data.detailContent) : '') + '</div></div></div></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityListItemContainer.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityListItemContainer';
}


bitbucket.internal.feature.pullRequest.activityListItem = function(opt_data, opt_ignored) {
  return '' + ((opt_data.activity.action == 'COMMENTED') ? bitbucket.internal.feature.pullRequest.activityCommentListItem(soy.$$augmentMap(opt_data.activity, {currentUser: opt_data.currentUser, pullRequest: opt_data.pullRequest, commitId: opt_data.commitId, commentLink: opt_data.commentLink, customMapping: opt_data.customMapping, commentAnchor: opt_data.activity.commentAnchor})) : (opt_data.activity.action == 'APPROVED' || opt_data.activity.action == 'UNAPPROVED' || opt_data.activity.action == 'REVIEWED') ? bitbucket.internal.feature.pullRequest.activityReviewerStatusChangeListItem({user: opt_data.activity.user, isFocused: opt_data.activity.isFocused, action: opt_data.activity.action, activityDate: opt_data.activity.createdDate}) : (opt_data.activity.action == 'RESCOPED') ? (opt_data.activity.added && opt_data.activity.added.total || opt_data.activity.removed && opt_data.activity.removed.total) ? bitbucket.internal.feature.pullRequest.activityRescopeListItem({user: opt_data.activity.user, isFocused: opt_data.activity.isFocused, action: opt_data.activity.action, activityDate: opt_data.activity.createdDate, activityRepository: opt_data.pullRequest.toRef.repository, added: opt_data.activity.added, removed: opt_data.activity.removed, pullRequest: opt_data.pullRequest}) : '' : (opt_data.activity.action == 'UPDATED' && (opt_data.activity.addedReviewers || opt_data.activity.removedReviewers)) ? bitbucket.internal.feature.pullRequest.activityReviewersUpdatedListItem({isNew: opt_data.isNew, user: opt_data.activity.user, isFocused: opt_data.activity.isFocused, activityDate: opt_data.activity.createdDate, addedReviewers: opt_data.activity.addedReviewers, removedReviewers: opt_data.activity.removedReviewers}) : bitbucket.internal.feature.pullRequest.activityListItemContainer({isNew: opt_data.isNew, isFocused: opt_data.activity.isFocused, user: opt_data.activity.user, activityDate: opt_data.activity.createdDate, summaryContent: '' + bitbucket.internal.feature.pullRequest.activityActionString({activityAction: opt_data.activity.action, user: opt_data.activity.user, sourceBranchContent: '' + ((opt_data.activity.action == 'MERGED') ? bitbucket.internal.feature.repository.refLozenge({repository: opt_data.pullRequest.fromRef.repository.id == opt_data.pullRequest.toRef.repository.id ? null : opt_data.pullRequest.fromRef.repository, ref: opt_data.pullRequest.fromRef}) : ''), targetBranchContent: '' + ((opt_data.activity.action == 'MERGED') ? bitbucket.internal.feature.repository.refLozenge({ref: opt_data.pullRequest.toRef}) : ''), mergeCommitContent: '' + ((opt_data.activity.action == 'MERGED' && opt_data.activity.commit) ? bitbucket.internal.feature.commit.link({repository: opt_data.pullRequest.toRef.repository, commit: opt_data.activity.commit}) : ''), isSimpleMerge: opt_data.activity.simpleMerge})}) + '</li>');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityListItem.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityListItem';
}


bitbucket.internal.feature.pullRequest.activityReviewerStatusChangeListItem = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.pullRequest.activityListItemContainer({user: opt_data.user, isFocused: opt_data.isFocused, activityDate: opt_data.activityDate, summaryContent: '' + bitbucket.internal.feature.pullRequest.activityActionString({activityAction: opt_data.action, user: opt_data.user})});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityReviewerStatusChangeListItem.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityReviewerStatusChangeListItem';
}


bitbucket.internal.feature.pullRequest.activityRescopeListItem = function(opt_data, opt_ignored) {
  return '' + ((opt_data.added.total || opt_data.removed.total) ? bitbucket.internal.feature.pullRequest.activityListItemContainer({user: opt_data.user, isFocused: opt_data.isFocused, activityDate: opt_data.activityDate, extraClasses: 'rescope', summaryContent: '' + bitbucket.internal.feature.pullRequest.activityActionString({activityAction: opt_data.action, user: opt_data.user, numCommitsAdded: opt_data.added.total, numCommitsRemoved: opt_data.removed.total}), detailContent: '' + ((opt_data.added.commits && opt_data.added.commits.length || opt_data.removed.commits && opt_data.removed.commits.length) ? bitbucket.internal.feature.pullRequest.rescopeCommitsTable({repository: opt_data.activityRepository, added: opt_data.added, removed: opt_data.removed, pullRequest: opt_data.pullRequest}) + ((0 < opt_data.added.total - (opt_data.added.commits ? opt_data.added.commits.length : 0) + (opt_data.removed.total - (opt_data.removed.commits ? opt_data.removed.commits.length : 0))) ? '<p class="more-commits">' + soy.$$filterNoAutoescape(AJS.format('\x26hellip;and {0} more.',opt_data.added.total - (opt_data.added.commits ? opt_data.added.commits.length : 0) + (opt_data.removed.total - (opt_data.removed.commits ? opt_data.removed.commits.length : 0)))) + '</p>' : '') : '')}) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityRescopeListItem.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityRescopeListItem';
}


bitbucket.internal.feature.pullRequest.rescopeActionStringImpl = function(opt_data, opt_ignored) {
  return '' + ((opt_data.numCommitsAdded && opt_data.numCommitsRemoved) ? soy.$$filterNoAutoescape(AJS.format('{0} {1} the pull request by adding {2} {2,choice,1#commit|1\x3ccommits} and removing {3} {3,choice,1#commit|1\x3ccommits}',opt_data.userDisplayNameContent,opt_data.lozengeContent,opt_data.numCommitsAdded,opt_data.numCommitsRemoved)) : (opt_data.numCommitsAdded) ? soy.$$filterNoAutoescape(AJS.format('{0} {1} the pull request by adding {2} {2,choice,1#commit|1\x3ccommits}',opt_data.userDisplayNameContent,opt_data.lozengeContent,opt_data.numCommitsAdded)) : (opt_data.numCommitsRemoved) ? soy.$$filterNoAutoescape(AJS.format('{0} {1} the pull request by removing {2} {2,choice,1#commit|1\x3ccommits}',opt_data.userDisplayNameContent,opt_data.lozengeContent,opt_data.numCommitsRemoved)) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.rescopeActionStringImpl.soyTemplateName = 'bitbucket.internal.feature.pullRequest.rescopeActionStringImpl';
}


bitbucket.internal.feature.pullRequest.rescopeCommitsTable = function(opt_data, opt_ignored) {
  var param186 = '';
  if (opt_data.added.commits && opt_data.added.commits.length) {
    var commitList189 = opt_data.added.commits;
    var commitListLen189 = commitList189.length;
    for (var commitIndex189 = 0; commitIndex189 < commitListLen189; commitIndex189++) {
      var commitData189 = commitList189[commitIndex189];
      param186 += bitbucket.internal.feature.commits.commitsTableRow({commit: commitData189, cellsContent: bitbucket.internal.feature.commits.commitsTableCells({repository: opt_data.repository, commit: commitData189, pullRequest: opt_data.pullRequest}) + '<td class="status">' + bitbucket.internal.widget.lozenge.lozenge({htmlElement: 'span', extraClasses: 'aui-lozenge-subtle aui-lozenge-success', text: 'ADDED'}) + '</td>'});
    }
  }
  if (opt_data.removed.commits && opt_data.removed.commits.length) {
    var commitList206 = opt_data.removed.commits;
    var commitListLen206 = commitList206.length;
    for (var commitIndex206 = 0; commitIndex206 < commitListLen206; commitIndex206++) {
      var commitData206 = commitList206[commitIndex206];
      param186 += bitbucket.internal.feature.commits.commitsTableRow({commit: commitData206, cellsContent: bitbucket.internal.feature.commits.commitsTableCells({repository: opt_data.repository, commit: commitData206}) + '<td class="status">' + bitbucket.internal.widget.lozenge.lozenge({htmlElement: 'span', extraClasses: 'aui-lozenge-subtle aui-lozenge-error', text: 'REMOVED'}) + '</td>'});
    }
  }
  var output = '' + widget.aui.table({dataAttributes: {lastpage: true}, extraClasses: 'commits-table show-merges', content: param186});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.rescopeCommitsTable.soyTemplateName = 'bitbucket.internal.feature.pullRequest.rescopeCommitsTable';
}


bitbucket.internal.feature.pullRequest.activityCommentListItem = function(opt_data, opt_ignored) {
  return '' + ((opt_data.commentAction == 'ADDED') ? (opt_data.commentAnchor) ? bitbucket.internal.feature.pullRequest.activityListItemContainer({extraClasses: opt_data.diff ? 'diff-comment-activity' : 'file-comment-activity', id: opt_data.id, user: opt_data.user, activityDate: opt_data.createdDate, isNew: false, isFocused: opt_data.isFocused, commentLink: opt_data.commentLink, commitId: opt_data.commitId, diffType: opt_data.commentAnchor.diffType, sinceId: opt_data.commentAnchor.fromHash, isCurrent: opt_data.commentAnchor ? ! opt_data.commentAnchor.orphaned : false, summaryContent: '' + bitbucket.internal.feature.pullRequest.activityCommentActionString({activityAction: opt_data.commentAction, user: opt_data.user}), detailContent: '' + ((opt_data.diff) ? '' : '<div class="file-comment-container">' + bitbucket.internal.feature.file.fileToolbar({fileIcon: true, breadcrumbs: true, secondaryToolbarContent: '' + ((opt_data.commentAnchor.orphaned) ? (opt_data.commentAnchor.diffType == 'COMMIT') ? bitbucket.internal.widget.lozenge.lozenge({text: 'Removed', htmlElement: 'span', extraClasses: 'aui-lozenge aui-lozenge-subtle aui-lozenge-error', tooltip: 'The commit this comment was added on has been removed from the pull request'}) : bitbucket.internal.widget.lozenge.lozenge({text: 'Outdated', htmlElement: 'span', extraClasses: 'aui-lozenge-current aui-lozenge-subtle pull-request-diff-outdated-lozenge', tooltip: 'This diff has changed in more recent commits'}) : '')}) + bitbucket.internal.feature.fileComments({comments: [opt_data.comment], pullRequest: opt_data.pullRequest, customMapping: opt_data.customMapping}) + '</div>')}) : bitbucket.internal.feature.comment({comment: opt_data.comment, pullRequest: opt_data.pullRequest, currentUser: opt_data.currentUser, numOfAncestors: 0, extraClasses: 'general-comment-activity'}) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityCommentListItem.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityCommentListItem';
}


bitbucket.internal.feature.pullRequest.activityCommentActionString = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.pullRequest.activityActionString(soy.$$augmentMap(opt_data, {activityAction: 'COMMENT_' + opt_data.activityAction}));
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityCommentActionString.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityCommentActionString';
}


bitbucket.internal.feature.pullRequest.activityActionString = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.pullRequest.activityActionStringImpl(soy.$$augmentMap(opt_data, {userDisplayNameContent: '' + bitbucket.internal.widget.userLink({user: opt_data.user, extraClasses: 'user-name'}), lozengeContent: '' + bitbucket.internal.widget.lozenge.pullRequestState({state: opt_data.activityAction, isActivityContext: true})}));
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityActionString.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityActionString';
}


bitbucket.internal.feature.pullRequest.activityActionStringImpl = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.activityAction) {
    case 'COMMENT_ADDED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} commented on a file',opt_data.userDisplayNameContent));
      break;
    case 'COMMENT_REPLIED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} replied to a comment',opt_data.userDisplayNameContent));
      break;
    case 'OPENED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} {1} the pull request',opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'DECLINED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} {1} the pull request',opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'MERGED':
      output += (opt_data.mergeCommitContent) ? soy.$$filterNoAutoescape(AJS.format('{0} {1} {2} to {3} in commit {4}',opt_data.userDisplayNameContent,opt_data.lozengeContent,opt_data.sourceBranchContent,opt_data.targetBranchContent,opt_data.mergeCommitContent)) : (opt_data.isSimpleMerge) ? soy.$$filterNoAutoescape(AJS.format('{0} {1} {2} to {3}',opt_data.userDisplayNameContent,opt_data.lozengeContent,opt_data.sourceBranchContent,opt_data.targetBranchContent)) : soy.$$filterNoAutoescape(AJS.format('{0} remotely merged the pull request from {1} to {2}',opt_data.userDisplayNameContent,opt_data.sourceBranchContent,opt_data.targetBranchContent));
      break;
    case 'REOPENED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} {1} the pull request',opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'RESCOPED':
      output += bitbucket.internal.feature.pullRequest.rescopeActionStringImpl(opt_data);
      break;
    case 'REVIEWERS_UPDATED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} updated the reviewers',opt_data.userDisplayNameContent));
      break;
    case 'REVIEWERS_UPDATED_ADDED_SELF':
      output += soy.$$filterNoAutoescape(AJS.format('{0} joined as a reviewer',opt_data.userDisplayNameContent));
      break;
    case 'REVIEWERS_UPDATED_REMOVED_SELF':
      output += soy.$$filterNoAutoescape(AJS.format('{0} is no longer a reviewer',opt_data.userDisplayNameContent));
      break;
    case 'UPDATED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} {1} the pull request',opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'APPROVED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} marked the pull request as {1}',opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'REVIEWED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} marked the pull request as {1}',opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'UNAPPROVED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} marked the pull request as {1}',opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    default:
      output += soy.$$escapeHtml(opt_data.activityAction);
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityActionStringImpl.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityActionStringImpl';
}


bitbucket.internal.feature.pullRequest.activityReviewersUpdatedListItem = function(opt_data, opt_ignored) {
  var output = '';
  var isSingleUpdate__soy349 = opt_data.addedReviewers.length + opt_data.removedReviewers.length == 1;
  var isSelfAddedReviewer__soy350 = isSingleUpdate__soy349 && opt_data.addedReviewers[0] && opt_data.addedReviewers[0].id == opt_data.user.id;
  var isSelfRemovedReviewer__soy351 = isSingleUpdate__soy349 && opt_data.removedReviewers[0] && opt_data.removedReviewers[0].id == opt_data.user.id;
  output += bitbucket.internal.feature.pullRequest.activityListItemContainer({extraClasses: 'reviewers-updated-activity', user: opt_data.user, activityDate: opt_data.activityDate, isFocused: opt_data.isFocused, isNew: opt_data.isNew, summaryContent: '' + ((isSelfAddedReviewer__soy350) ? bitbucket.internal.feature.pullRequest.activityActionString({user: opt_data.user, activityAction: 'REVIEWERS_UPDATED_ADDED_SELF'}) : (isSelfRemovedReviewer__soy351) ? bitbucket.internal.feature.pullRequest.activityActionString({user: opt_data.user, activityAction: 'REVIEWERS_UPDATED_REMOVED_SELF'}) : bitbucket.internal.feature.pullRequest.activityActionString({activityAction: 'REVIEWERS_UPDATED', user: opt_data.user})), detailContent: '' + ((! (isSelfAddedReviewer__soy350 || isSelfRemovedReviewer__soy351)) ? bitbucket.internal.feature.pullRequest.updatedReviewers(opt_data) : '')});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityReviewersUpdatedListItem.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityReviewersUpdatedListItem';
}


bitbucket.internal.feature.pullRequest.updatedReviewers = function(opt_data, opt_ignored) {
  return '' + ((opt_data.addedReviewers.length) ? '<div class="reviewers">' + aui.icons.icon({useIconFont: true, size: 'small', icon: 'add-small', accessibilityText: AJS.format('Added {0} {0,choice,1#reviewer|1\x3creviewers}:',opt_data.addedReviewers.length)}) + bitbucket.internal.feature.pullRequest.reviewerList({reviewers: opt_data.addedReviewers}) + '</div>' : '') + ((opt_data.removedReviewers.length) ? '<div class="reviewers"><span class="removed-symbol">' + soy.$$escapeHtml(AJS.format('Removed {0} {0,choice,1#reviewer|1\x3creviewers}:',opt_data.removedReviewers.length)) + '</span>' + bitbucket.internal.feature.pullRequest.reviewerList({reviewers: opt_data.removedReviewers}) + '</div>' : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.updatedReviewers.soyTemplateName = 'bitbucket.internal.feature.pullRequest.updatedReviewers';
}


bitbucket.internal.feature.pullRequest.reviewerList = function(opt_data, opt_ignored) {
  var output = '';
  var reviewerList399 = opt_data.reviewers;
  var reviewerListLen399 = reviewerList399.length;
  for (var reviewerIndex399 = 0; reviewerIndex399 < reviewerListLen399; reviewerIndex399++) {
    var reviewerData399 = reviewerList399[reviewerIndex399];
    output += bitbucket.internal.widget.avatar({size: 'small', person: reviewerData399, tooltip: reviewerData399.displayName || reviewerData399.name, link: true});
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.reviewerList.soyTemplateName = 'bitbucket.internal.feature.pullRequest.reviewerList';
}


bitbucket.internal.feature.pullRequest.loadPreviousActivities = function(opt_data, opt_ignored) {
  return '<li class="activity-load-new"><a href="#">' + soy.$$escapeHtml('Load new activity') + '</a></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.loadPreviousActivities.soyTemplateName = 'bitbucket.internal.feature.pullRequest.loadPreviousActivities';
}


bitbucket.internal.feature.pullRequest.commitOrRangeComment = function(opt_data, opt_ignored) {
  var output = '';
  var shortCommitId__soy411 = '' + soy.$$escapeHtml((opt_data.commitId).substring(0, 11));
  output += '<span class="comment-link"> ';
  if (opt_data.diffType == 'COMMIT') {
    output += (opt_data.current) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('in commit \x3ca href\x3d\x22{0}\x22 class\x3d\x22commitid\x22\x3e{1}\x3c/a\x3e',typeof (opt_data.commentLink) === 'number' ? opt_data.commentLink : soy.$$escapeHtml(opt_data.commentLink),typeof (shortCommitId__soy411) === 'number' ? shortCommitId__soy411 : soy.$$escapeHtml(shortCommitId__soy411)))) : soy.$$escapeHtml(AJS.format('in removed commit {0}',shortCommitId__soy411));
  } else if (opt_data.diffType == 'RANGE') {
    var shortSinceId__soy422 = '' + soy.$$escapeHtml((opt_data.sinceId).substring(0, 11));
    output += (opt_data.current) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('in commit range \x3ca href\x3d\x22{0}\x22\x3e{1}..{2}\x3c/a\x3e',typeof (opt_data.commentLink) === 'number' ? opt_data.commentLink : soy.$$escapeHtml(opt_data.commentLink),typeof (shortSinceId__soy422) === 'number' ? shortSinceId__soy422 : soy.$$escapeHtml(shortSinceId__soy422),typeof (shortCommitId__soy411) === 'number' ? shortCommitId__soy411 : soy.$$escapeHtml(shortCommitId__soy411)))) : soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('in removed commit range {0}..{1}',typeof (shortSinceId__soy422) === 'number' ? shortSinceId__soy422 : soy.$$escapeHtml(shortSinceId__soy422),typeof (shortCommitId__soy411) === 'number' ? shortCommitId__soy411 : soy.$$escapeHtml(shortCommitId__soy411))));
  }
  output += '</span>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.commitOrRangeComment.soyTemplateName = 'bitbucket.internal.feature.pullRequest.commitOrRangeComment';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-activity', location = '/static/bitbucket/internal/feature/pull-request/activity/pull-request-activity.js' */
define("bitbucket/internal/feature/pull-request/activity/pull-request-activity","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/enums bitbucket/internal/feature/comments/comments bitbucket/internal/feature/file-content/file-content bitbucket/internal/model/commit-range bitbucket/internal/model/diff-type bitbucket/internal/model/file-change bitbucket/internal/model/file-content-modes bitbucket/internal/model/page-state bitbucket/internal/model/path bitbucket/internal/model/path-and-line bitbucket/internal/model/revision bitbucket/internal/util/ajax bitbucket/internal/util/client-storage bitbucket/internal/util/codemirror bitbucket/internal/util/events bitbucket/internal/util/history bitbucket/internal/util/scroll bitbucket/internal/util/syntax-highlight bitbucket/internal/widget/paged-scrollable".split(" "),
function(L,y,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,aa,ba,ca,da,ea,fa,ha,ia,ja){function ka(a){(this.execute?this:m.default.whenIType(a)).execute(function(){var a=(0,k.default)(".general-comment-form");D.default.scrollTo(a);a.find("textarea").focus()})}function la(a){a.closest(".diff-comment-activity, .file-comment-activity").remove()}function E(a){var c=a.getPath();return(a=a.getDiff().hunks[0])?0!==a.sourceLine?new z.default(c,a.sourceLine,"FROM"):new z.default(c,a.destinationLine,"TO"):new z.default(c)}function F(a,
c){var b=n.default.currentPullRequest();a.commentAnchor&&a.commentAnchor&&(a.commentAnchor.diffType===ma||a.commentAnchor.diffType===G)?(b=b.commit(a.commentAnchor.toHash),c&&(b=b.change(E(c).toString())),a.commentAnchor.diffType===G&&(b=b.withParams({since:a.commentAnchor.fromHash}))):a.commentAnchor&&(a=c?E(c).toString():new H.default(a.commentAnchor.path),b=b.diff().change(a));return b.build()}function e(a,c,b,d,f){this._$container=(0,k.default)(a);this.pullRequest=c;this.pullRequestPathComponents=
{projectKey:l.default.getProject().getKey(),repoSlug:l.default.getRepository().getSlug(),pullRequestId:this.pullRequest.getId()};this.fromType=b;this.fromId=d;this.dataLoadedEvent="bitbucket.internal.feature.pullRequestActivity.dataLoaded";this._$spinner=(0,k.default)('\x3cdiv class\x3d"spinner"/\x3e').insertAfter(this._$container);w.default.call(this,f.scrollableElement||a,{pageSize:25,dataLoadedEvent:this.dataLoadedEvent,autoLoad:"next",paginationContext:"pull-request-activity"})}Object.defineProperty(y,
"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(M),k=babelHelpers.interopRequireDefault(N),h=babelHelpers.interopRequireDefault(O),n=babelHelpers.interopRequireDefault(P),A=babelHelpers.interopRequireDefault(Q),r=babelHelpers.interopRequireDefault(R),I=babelHelpers.interopRequireDefault(S),x=babelHelpers.interopRequireDefault(T),u=babelHelpers.interopRequireDefault(U),B=babelHelpers.interopRequireDefault(V),na=babelHelpers.interopRequireDefault(W),l=babelHelpers.interopRequireDefault(X),
H=babelHelpers.interopRequireDefault(Y),z=babelHelpers.interopRequireDefault(Z),t=babelHelpers.interopRequireDefault(aa),J=babelHelpers.interopRequireDefault(ba),C=babelHelpers.interopRequireDefault(ca),oa=babelHelpers.interopRequireDefault(da),p=babelHelpers.interopRequireDefault(ea),pa=babelHelpers.interopRequireDefault(fa),D=babelHelpers.interopRequireDefault(ha),qa=babelHelpers.interopRequireDefault(ia),w=babelHelpers.interopRequireDefault(ja),ra=u.default.EFFECTIVE,ma=u.default.COMMIT,G=u.default.RANGE;
k.default.extend(e.prototype,w.default.prototype);e.prototype.init=function(a){this.renderedDiffFileContents=[];w.default.prototype.init.call(this,a);this._inited=!0;this.loadedRange.isEmpty()||(this.renderedDiffFileContents=this.renderedDiffFileContents.concat(e.renderDiffs(this._$container.children(".diff-comment-activity"),a.diffCommentData,this.pullRequest)));r.default.bindContext(this._$container,new r.default.PullRequestAnchor(this.pullRequest));var c=this;this._reviewerSelfHandler=function(b){var a=
"ADD_SELF"===b.action;c.addNewActivity({currentUser:l.default.getCurrentUser().toJSON(),pullRequest:b.pullRequest,isNew:!0,activity:{action:"UPDATED",createdDate:new Date,user:b.user,addedReviewers:a?[b.user]:[],removedReviewers:a?[]:[b.user]}})};this._reviewerStatusHandler=function(a){a.oldState===A.default.ApprovalStatus.NEEDS_WORK&&a.newState===A.default.ApprovalStatus.UNAPPROVED||c.addNewActivity({currentUser:l.default.getCurrentUser().toJSON(),pullRequest:a.pullRequest,activity:{action:a.newState===
A.default.ApprovalStatus.NEEDS_WORK?"REVIEWED":a.newState,createdDate:new Date,user:a.user}})};this._declineHandler=function(a){c.addNewActivity({currentUser:l.default.getCurrentUser().toJSON(),pullRequest:a.pullRequest,activity:{action:"DECLINED",createdDate:a.pullRequest.updatedDate,user:a.user}})};this._pushStateIfDiffOrCommitUrl=function(a){var b=(0,k.default)(a.target).prop("href");if(h.default.startsWith(b,n.default.currentPullRequest().diff().buildAbsolute())||h.default.startsWith(b,n.default.currentPullRequest().commit("").buildAbsolute()+
"/"))a.preventDefault(),window.scrollTo(0,0),pa.default.pushState(null,"",b)};this._mergeHandler=function(a){c.addNewActivity({currentUser:l.default.getCurrentUser().toJSON(),pullRequest:a.pullRequest,activity:{action:"MERGED",createdDate:a.pullRequest.updatedDate,user:a.user,simpleMerge:!0,commit:a.pullRequest.properties.mergeCommit}})};this._reopenedHandler=function(a){c.addNewActivity({currentUser:l.default.getCurrentUser().toJSON(),pullRequest:a.pullRequest,activity:{action:"REOPENED",createdDate:a.pullRequest.updatedDate,
user:a.user}})};this._destroyables=[];this._destroyables.push(p.default.chainWith((0,k.default)(document)).on("click",".pull-request-activity .activity-item a",this._pushStateIfDiffOrCommitUrl).on("click",".diff-comment-activity .breadcrumbs a,.rescope a.commitid,.actions button.delete,.comment-likes-button",function(a){var b,f=a.target.classList;f.contains("stub")?b="overview.comment.open":f.contains("commitid")?b="overview.commit.open":f.contains("delete")?b="overview.comment.delete.clicked":f.contains("comment-likes-button")&&
(b="overview.comment.like.clicked");(0,k.default)(a.target).closest("#pull-request-activity")&&p.default.trigger("bitbucket.internal.feature.pullRequest."+b)}));this._destroyables.push(p.default.chain().on("bitbucket.internal.feature.pullRequest.reopened",this._reopenedHandler).on("bitbucket.internal.feature.pullRequest.declined",this._declineHandler).on("bitbucket.internal.feature.pullRequest.merged",this._mergeHandler).on("bitbucket.internal.feature.pullRequest.reviewerStatus.changed",this._reviewerStatusHandler).on("bitbucket.internal.feature.comments.lastCommentDeleted",
la).on("bitbucket.internal.keyboard.shortcuts.pullrequest.addCommentHandler",ka).on("bitbucket.internal.feature.pullRequest.self.added",this._reviewerSelfHandler).on("bitbucket.internal.feature.pullRequest.self.removed",this._reviewerSelfHandler))};e.prototype.reset=function(){h.default.invokeMap(this._destroyables,"destroy");h.default.chain(this.renderedDiffFileContents).map("inlineInfo").map("fileContent").invokeMap("destroy").value();delete this.renderedDiffFileContents;h.default.invokeMap(this.fileCommentContexts,
"destroy");delete this.fileCommentContexts;r.default.unbindContext(this._$container);w.default.prototype.reset.call(this);this.currentTime=void 0;this._inited=!1};e.prototype.checkCommentIsNew=function(a){a.isUnread=a.updatedDate>this.lastViewed&&(!l.default.getCurrentUser()||a.author.name!==l.default.getCurrentUser().getName());a.comments.length&&h.default.forEach(a.comments,h.default.bind(this.checkCommentIsNew,this))};e.prototype.checkCommentActivitiesAreNew=function(a){var c=this;h.default.forEach(h.default.filter(a,
{action:"COMMENTED"}),function(a){c.checkCommentIsNew(a.comment)})};e.prototype.requestData=function(a,c){var b=this,d=0!==a||h.default.isUndefined(this.fromType)||h.default.isUndefined(this.fromId)?{}:{fromType:this.fromType,fromId:this.fromId};this._$spinner.spin("large");return J.default.rest({url:n.default.rest().project(this.pullRequestPathComponents.projectKey).repo(this.pullRequestPathComponents.repoSlug).pullRequest(this.pullRequestPathComponents.pullRequestId).activities().withParams(k.default.extend(d,
{start:a,limit:c,avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"medium"}),markup:!0})).build(),statusCode:{404:function(a,g,c,d,e){(a=h.default.get(d,"errors.0",null))&&"com.atlassian.bitbucket.commit.NoSuchCommitException"===a.exceptionName?a={canClose:!0,fallbackTitle:"Back to Dashboard",fallbackUrl:n.default.dashboard().build(),message:a.message,shouldReload:!1,title:"Page not found"}:(a={canClose:!1,
fallbackTitle:"Ok",fallbackUrl:n.default.project(b.pullRequestPathComponents.projectKey).repo(b.pullRequestPathComponents.repoSlug).pullRequest(b.pullRequestPathComponents.pullRequestId).overview().build(),shouldReload:!1},"activity"===b.fromType?(a.message="The requested activity does not exist.",a.title="Activity not found"):
(a.message="The requested comment does not exist. It may have been deleted.",a.title="Comment not found"));return babelHelpers.extends({},e,a)}}}).done(function(a,g,c){b.currentTime||(g=(new Date(c.getResponseHeader("Date"))).getTime(),c=C.default.buildKey("last-viewed","pull-request"),b.currentTime=isNaN(g)?(new Date).getTime():g,b.lastViewed=C.default.getItem(c)||b.currentTime,C.default.setItem(c,b.currentTime));b.checkCommentActivitiesAreNew(a.values)}).fail(function(){b._$spinner.spinStop()})};
e.prototype.attachContent=function(a,c){this._$container["html"===a?"append":a](c)};e.prototype.decorateForFocus=function(a){var c;if("activity"===this.fromType){var b=parseInt(this.fromId,10);h.default.some(a.values,function(a,f){return a.id===b?(a.isFocused=!0,c=b,!0):!1})}else{var d=parseInt(this.fromId,10),f=function v(a){return a.id===d?a.isFocused=!0:a.comments?h.default.some(a.comments,function(a){return v(a)}):!1};h.default.some(a.values,function(a,b){return a.comment&&f(a.comment)?(c=a.id,
!0):!1})}return c};e.prototype.onAttachFirstPermalinkPage=function(a,c){function b(){g.hide();v.spin("large");var a=d.loadedRange.pageBefore(d.options.pageSize);J.default.rest({url:n.default.rest().project(d.pullRequestPathComponents.projectKey).repo(d.pullRequestPathComponents.repoSlug).pullRequest(d.pullRequestPathComponents.pullRequestId).activities().withParams(k.default.extend(a,{avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"medium"}),markup:!0})).build()}).done(function(a,b,c){d.loadedRange.add(a.start,
a.size,a.isLastPage,a.nextPageStart);var k;h.default.some(a.values,function(a,b){if(a.id===K)return k=b,!0});b=a.values.slice(0,k);d.checkCommentActivitiesAreNew(b);d.attachActivities(b,function(a){f.after(a)});a.isFirstPage||d.loadedRange.reachedStart()?(g.unbind("click"),f.remove(),v.remove()):(K=e,e=a.previousPageStartId);p.default.trigger(d.dataLoadedEvent,d,a.start,a.limit,a)}).always(function(){v.spinStop();g.show()})}var d=this,f=(0,k.default)(bitbucket.internal.feature.pullRequest.loadPreviousActivities());
this.attachContent(c,f);var g=f.find("a"),v=f.append((0,k.default)('\x3cdiv class\x3d"spinner"/\x3e')),e=a.previousPageStartId,K=a.values[0].id;g.click(function(a){a.preventDefault();b()})};e.prototype.attachActivities=function(a,c){var b=this,d=0,f=(0,k.default)(h.default.map(a,function(a){var c=a.commentAnchor;c=c?new x.default({diffType:c.diffType,pullRequest:b.pullRequest,untilRevision:new t.default({id:c.toHash}),sinceRevision:c.fromHash?new t.default({id:c.fromHash}):void 0}):new x.default({pullRequest:b.pullRequest,
diffType:ra});var f=void 0;"COMMENTED"===a.action&&(f=c.getPullRequest().getToRef().getRepository(),c=a.diff?B.default.fromDiff(a.diff,c,f):null,f=F(a,c));a=bitbucket.internal.feature.pullRequest.activityListItem({activity:a,pullRequest:b.pullRequest.toJSON(),isNew:!1,commitId:a.commentAnchor&&a.commentAnchor.toHash,commentLink:f});d++;return a}).join(""));qa.default.container(f);a=h.default.reduce(a,function(a,b){a[b.id]=b;return a},{});c(f);this.fileCommentContexts=e.addBreadcrumbsAndBindFileComments(f.filter(".file-comment-activity"),
a,this.pullRequest);c=e.renderDiffs(f.filter(".diff-comment-activity"),a,this.pullRequest);this.renderedDiffFileContents=this.renderedDiffFileContents.concat(c);this._$container.find(".pull-request-diff-outdated-lozenge").tooltip({gravity:"ne"});this._$container.find(".reviewers-updated-activity .aui-avatar img").tooltip({gravity:"n"});return c};e.prototype.attachNewContent=function(a,c){function b(a){if(d._inited)if(a=e?(0,k.default)(".comment.focused",a):(0,k.default)(".activity-item.focused",a),
a.length)D.default.scrollTo(a,{waitForImages:!0,cancelIfScrolled:!0,duration:400}),p.default.trigger("bitbucket.internal.feature.pullRequestActivity.focused",null,a);else if(e)p.default.once("bitbucket.internal.feature.comments.commentContainerAdded",b)}var d=this,f=(0,k.default)("#pull-request-activity \x3e li.comment-form-container"),g=!h.default.isUndefined(this.fromId)&&!h.default.isUndefined(this.fromType),e="comment"===this.fromType;f=0===f.siblings().length;var l;g&&f&&(l=this.decorateForFocus(a));
if(g&&!a.isFirstPage&&f)this.onAttachFirstPermalinkPage(a,c);g=this.attachActivities(a.values,function(a){d.attachContent(c,a)});this._$spinner.spinStop();a.isLastPage&&this._$spinner.remove();null!=l&&((a=h.default.find(g,{activityId:l}))?a.inlineInfo.initPromise.done(b.bind(null,null)):b())};e.renderDiffForComment=function(a,c,b){var d=c.commentAnchor;a=new I.default(a);var f=b.getToRef().getRepository(),g=!d.orphaned,e=d.diffType;b=new x.default({diffType:d.diffType,pullRequest:b,untilRevision:new t.default({id:d.toHash}),
sinceRevision:d.fromHash?new t.default({id:d.fromHash}):void 0});b=B.default.fromDiff(c.diff,b,f);c=a.init(b,{commentMode:I.default.commentMode.REPLY_ONLY,lineComments:[c.comment],asyncDiffModifications:!1,attachScroll:!1,autoResizing:!0,scrollStyle:"inline",isExcerpt:!0,contentMode:na.default.DIFF,changeTypeLozenge:!1,changeModeLozenge:!1,fileIcon:!0,breadcrumbs:!0,scrollPaneSelector:"self",pullRequestDiffLink:!0,pullRequestDiffCurrent:g,diffType:e,pullRequestDiffLinkUrl:F(c,b),toolbarWebFragmentLocationPrimary:"bitbucket.pull-request.activity.diff.toolbar.primary",
toolbarWebFragmentLocationSecondary:"bitbucket.pull-request.activity.diff.toolbar.secondary"});return{fileContent:a,initPromise:c}};e.renderDiffs=function(a,c,b){var d=[];h.default.forEach(a,function(a){var b=Number(a.getAttribute("data-activityid"));d.push({activityId:b,el:a,data:c[b]})});return oa.default.doInOperation(function(){return h.default.map(d,function(a){return{activityId:a.activityId,inlineInfo:e.renderDiffForComment((0,k.default)(a.el).find(".detail"),a.data,b)}})})};e.addBreadcrumbsAndBindFileComments=
function(a,c,b){var d=[];a.each(function(){var a=(0,k.default)(this),g=a.attr("data-activityid");g=c[g].commentAnchor;var e=new H.default(g.path),m=!(g&&g.orphaned),p=h.default.map(e.getComponents(),function(a){return{text:a}}),q=n.default.currentPullRequest();switch(g.diffType){case u.default.COMMIT:q=q.commit(g.toHash);break;case u.default.RANGE:q=q.commit(g.toHash).since(g.fromHash);break;default:q=q.diff()}a.find(".breadcrumbs").append(bitbucket.internal.widget.breadcrumbs.crumbs({pathComponents:p,
primaryLink:m?q.change(e).build():void 0}));g=new B.default({repository:l.default.getRepository(),commitRange:new x.default({diffType:g.diffType,pullRequest:b,untilRevision:new t.default({id:g.toHash}),sinceRevision:g.fromHash?new t.default({id:g.fromHash}):void 0}),path:e});a=r.default.bindContext(a,new r.default.DiffAnchor(g),{$toolbar:a.find(".file-toolbar"),commentMode:r.default.commentMode.REPLY_ONLY});d.push(a)});return d};e.prototype.addNewActivity=function(a){var c=(0,k.default)("#pull-request-activity .comment-form-container").first(),
b=(0,k.default)(bitbucket.internal.feature.pullRequest.activityListItem({currentUser:a.currentUser.name?a.currentUser:a.currentUser.toJSON(),activity:a.activity,pullRequest:a.pullRequest.id?a.pullRequest:a.pullRequest.toJSON(),isNew:!0})).hide().insertAfter(c).fadeIn("slow");setTimeout(function(){b.removeClass("new")},3E3)};e.prototype.handleErrors=k.default.noop;y.default=e;L.exports=y["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:react', location = '/static/lib/react/react-with-addons.js' */
/**
 * React (with addons) v15.6.2
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.React=e()}}(function(){return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n||e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";function r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function o(e){if(s[e])return s[e];if(!a[e])return e;var t=a[e];for(var n in t)if(t.hasOwnProperty(n)&&n in u)return s[e]=t[n];return""}var i=e(39),a={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},s={},u={};i.canUseDOM&&(u=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),t.exports=o},{39:39}],2:[function(e,t,n){"use strict";function r(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function o(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(t,function(e){return n[e]})}var i={escape:r,unescape:o};t.exports=i},{}],3:[function(e,t,n){"use strict";var r=e(17),o=e(20),i={linkState:function(e){return new r(this.state[e],o.createStateKeySetter(this,e))}};t.exports=i},{17:17,20:20}],4:[function(e,t,n){"use strict";var r=e(33),o=(e(42),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),i=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},a=function(e,t,n){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,e,t,n),o}return new r(e,t,n)},s=function(e,t,n,r){var o=this;if(o.instancePool.length){var i=o.instancePool.pop();return o.call(i,e,t,n,r),i}return new o(e,t,n,r)},u=function(e){var t=this;e instanceof t||r("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},c=o,l=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||c,n.poolSize||(n.poolSize=10),n.release=u,n},p={addPoolingTo:l,oneArgumentPooler:o,twoArgumentPooler:i,threeArgumentPooler:a,fourArgumentPooler:s};t.exports=p},{33:33,42:42}],5:[function(e,t,n){"use strict";var r=e(45),o=e(7),i=e(10),a=e(13),s=e(14),u=e(19),c=e(24),l=e(28),p=e(32),f=s.createElement,d=s.createFactory,h=s.cloneElement,y=r,m=function(e){return e},v={Children:{map:i.map,forEach:i.forEach,count:i.count,toArray:i.toArray,only:p},Component:o.Component,PureComponent:o.PureComponent,createElement:f,cloneElement:h,isValidElement:s.isValidElement,PropTypes:u,createClass:l,createFactory:d,createMixin:m,DOM:a,version:c,__spread:y};t.exports=v},{10:10,13:13,14:14,19:19,24:24,28:28,32:32,45:45,7:7}],6:[function(e,t,n){"use strict";function r(){if(!o){var t=e(26);o=t.__SECRET_INJECTED_REACT_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED}return o}var o;n.getReactDOM=r},{26:26}],7:[function(e,t,n){"use strict";function r(e,t,n){this.props=e,this.context=t,this.refs=c,this.updater=n||u}function o(e,t,n){this.props=e,this.context=t,this.refs=c,this.updater=n||u}function i(){}var a=e(33),s=e(45),u=e(18),c=(e(27),e(41));e(42),e(31);r.prototype.isReactComponent={},r.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&a("85"),this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")};i.prototype=r.prototype,o.prototype=new i,o.prototype.constructor=o,s(o.prototype,r.prototype),o.prototype.isPureReactComponent=!0,t.exports={Component:r,PureComponent:o}},{18:18,27:27,31:31,33:33,41:41,42:42,45:45}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to ReactCSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}}}var s=e(45),u=e(5),c=e(47),l=c(u.isValidElement),p=e(23),f=e(9),d=function(e){function t(){var n,i,a;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=i=o(this,e.call.apply(e,[this].concat(c))),i._wrapChild=function(e){return u.createElement(f,{name:i.props.transitionName,appear:i.props.transitionAppear,enter:i.props.transitionEnter,leave:i.props.transitionLeave,appearTimeout:i.props.transitionAppearTimeout,enterTimeout:i.props.transitionEnterTimeout,leaveTimeout:i.props.transitionLeaveTimeout},e)},a=n,o(i,a)}return i(t,e),t.prototype.render=function(){return u.createElement(p,s({},this.props,{childFactory:this._wrapChild}))},t}(u.Component);d.displayName="ReactCSSTransitionGroup",d.propTypes={transitionName:f.propTypes.name,transitionAppear:l.bool,transitionEnter:l.bool,transitionLeave:l.bool,transitionAppearTimeout:a("Appear"),transitionEnterTimeout:a("Enter"),transitionLeaveTimeout:a("Leave")},d.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.exports=d},{23:23,45:45,47:47,5:5,9:9}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=e(5),s=e(6),u=e(47),c=u(a.isValidElement),l=e(38),p=e(22),f=e(32),d=17,h=function(e){function t(){var n,i,a;r(this,t);for(var u=arguments.length,c=Array(u),f=0;f<u;f++)c[f]=arguments[f];return n=i=o(this,e.call.apply(e,[this].concat(c))),i._isMounted=!1,i.transition=function(e,t,n){var r=s.getReactDOM().findDOMNode(i);if(!r)return void(t&&t());var o=i.props.name[e]||i.props.name+"-"+e,a=i.props.name[e+"Active"]||o+"-active",u=null,c=function(e){e&&e.target!==r||(clearTimeout(u),l.removeClass(r,o),l.removeClass(r,a),p.removeEndEventListener(r,c),t&&t())};l.addClass(r,o),i.queueClassAndNode(a,r),n?(u=setTimeout(c,n),i.transitionTimeouts.push(u)):p.addEndEventListener(r,c)},i.queueClassAndNode=function(e,t){i.classNameAndNodeQueue.push({className:e,node:t}),i.timeout||(i.timeout=setTimeout(i.flushClassNameAndNodeQueue,d))},i.flushClassNameAndNodeQueue=function(){i._isMounted&&i.classNameAndNodeQueue.forEach(function(e){l.addClass(e.node,e.className)}),i.classNameAndNodeQueue.length=0,i.timeout=null},i.componentWillAppear=function(e){i.props.appear?i.transition("appear",e,i.props.appearTimeout):e()},i.componentWillEnter=function(e){i.props.enter?i.transition("enter",e,i.props.enterTimeout):e()},i.componentWillLeave=function(e){i.props.leave?i.transition("leave",e,i.props.leaveTimeout):e()},a=n,o(i,a)}return i(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentDidMount=function(){this._isMounted=!0},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.render=function(){return f(this.props.children)},t}(a.Component);h.propTypes={name:c.oneOfType([c.string,c.shape({enter:c.string,leave:c.string,active:c.string}),c.shape({enter:c.string,enterActive:c.string,leave:c.string,leaveActive:c.string,appear:c.string,appearActive:c.string})]).isRequired,appear:c.bool,enter:c.bool,leave:c.bool,appearTimeout:c.number,enterTimeout:c.number,leaveTimeout:c.number},t.exports=h},{22:22,32:32,38:38,47:47,5:5,6:6}],10:[function(e,t,n){"use strict";function r(e){return(""+e).replace(E,"$&/")}function o(e,t){this.func=e,this.context=t,this.count=0}function i(e,t,n){var r=e.func,o=e.context;r.call(o,t,e.count++)}function a(e,t,n){if(null==e)return e;var r=o.getPooled(t,n);v(e,i,r),o.release(r)}function s(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function u(e,t,n){var o=e.result,i=e.keyPrefix,a=e.func,s=e.context,u=a.call(s,t,e.count++);Array.isArray(u)?c(u,o,n,m.thatReturnsArgument):null!=u&&(y.isValidElement(u)&&(u=y.cloneAndReplaceKey(u,i+(!u.key||t&&t.key===u.key?"":r(u.key)+"/")+n)),o.push(u))}function c(e,t,n,o,i){var a="";null!=n&&(a=r(n)+"/");var c=s.getPooled(t,a,o,i);v(e,u,c),s.release(c)}function l(e,t,n){if(null==e)return e;var r=[];return c(e,r,null,t,n),r}function p(e,t,n){return null}function f(e,t){return v(e,p,null)}function d(e){var t=[];return c(e,t,null,m.thatReturnsArgument),t}var h=e(4),y=e(14),m=e(40),v=e(35),g=h.twoArgumentPooler,b=h.fourArgumentPooler,E=/\/+/g;o.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},h.addPoolingTo(o,g),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},h.addPoolingTo(s,b);var _={forEach:a,map:l,mapIntoWithKeyPrefixInternal:c,count:f,toArray:d};t.exports=_},{14:14,35:35,4:4,40:40}],11:[function(e,t,n){"use strict";var r=e(34),o={shouldComponentUpdate:function(e,t){return r(this,e,t)}};t.exports=o},{34:34}],12:[function(e,t,n){"use strict";var r={current:null};t.exports=r},{}],13:[function(e,t,n){"use strict";var r=e(14),o=r.createFactory,i={a:o("a"),abbr:o("abbr"),address:o("address"),area:o("area"),article:o("article"),aside:o("aside"),audio:o("audio"),b:o("b"),base:o("base"),bdi:o("bdi"),bdo:o("bdo"),big:o("big"),blockquote:o("blockquote"),body:o("body"),br:o("br"),button:o("button"),canvas:o("canvas"),caption:o("caption"),cite:o("cite"),code:o("code"),col:o("col"),colgroup:o("colgroup"),data:o("data"),datalist:o("datalist"),dd:o("dd"),del:o("del"),details:o("details"),dfn:o("dfn"),dialog:o("dialog"),div:o("div"),dl:o("dl"),dt:o("dt"),em:o("em"),embed:o("embed"),fieldset:o("fieldset"),figcaption:o("figcaption"),figure:o("figure"),footer:o("footer"),form:o("form"),h1:o("h1"),h2:o("h2"),h3:o("h3"),h4:o("h4"),h5:o("h5"),h6:o("h6"),head:o("head"),header:o("header"),hgroup:o("hgroup"),hr:o("hr"),html:o("html"),i:o("i"),iframe:o("iframe"),img:o("img"),input:o("input"),ins:o("ins"),kbd:o("kbd"),keygen:o("keygen"),label:o("label"),legend:o("legend"),li:o("li"),link:o("link"),main:o("main"),map:o("map"),mark:o("mark"),menu:o("menu"),menuitem:o("menuitem"),meta:o("meta"),meter:o("meter"),nav:o("nav"),noscript:o("noscript"),object:o("object"),ol:o("ol"),optgroup:o("optgroup"),option:o("option"),output:o("output"),p:o("p"),param:o("param"),picture:o("picture"),pre:o("pre"),progress:o("progress"),q:o("q"),rp:o("rp"),rt:o("rt"),ruby:o("ruby"),s:o("s"),samp:o("samp"),script:o("script"),section:o("section"),select:o("select"),small:o("small"),source:o("source"),span:o("span"),strong:o("strong"),style:o("style"),sub:o("sub"),summary:o("summary"),sup:o("sup"),table:o("table"),tbody:o("tbody"),td:o("td"),textarea:o("textarea"),tfoot:o("tfoot"),th:o("th"),thead:o("thead"),time:o("time"),title:o("title"),tr:o("tr"),track:o("track"),u:o("u"),ul:o("ul"),var:o("var"),video:o("video"),wbr:o("wbr"),circle:o("circle"),clipPath:o("clipPath"),defs:o("defs"),ellipse:o("ellipse"),g:o("g"),image:o("image"),line:o("line"),linearGradient:o("linearGradient"),mask:o("mask"),path:o("path"),pattern:o("pattern"),polygon:o("polygon"),polyline:o("polyline"),radialGradient:o("radialGradient"),rect:o("rect"),stop:o("stop"),svg:o("svg"),text:o("text"),tspan:o("tspan")};t.exports=i},{14:14}],14:[function(e,t,n){"use strict";function r(e){return void 0!==e.ref}function o(e){return void 0!==e.key}var i=e(45),a=e(12),s=(e(44),e(27),Object.prototype.hasOwnProperty),u=e(15),c={key:!0,ref:!0,__self:!0,__source:!0},l=function(e,t,n,r,o,i,a){return{$$typeof:u,type:e,key:t,ref:n,props:a,_owner:i}};l.createElement=function(e,t,n){var i,u={},p=null,f=null;if(null!=t){r(t)&&(f=t.ref),o(t)&&(p=""+t.key),void 0===t.__self?null:t.__self,void 0===t.__source?null:t.__source;for(i in t)s.call(t,i)&&!c.hasOwnProperty(i)&&(u[i]=t[i])}var d=arguments.length-2;if(1===d)u.children=n;else if(d>1){for(var h=Array(d),y=0;y<d;y++)h[y]=arguments[y+2];u.children=h}if(e&&e.defaultProps){var m=e.defaultProps;for(i in m)void 0===u[i]&&(u[i]=m[i])}return l(e,p,f,0,0,a.current,u)},l.createFactory=function(e){var t=l.createElement.bind(null,e);return t.type=e,t},l.cloneAndReplaceKey=function(e,t){return l(e.type,t,e.ref,e._self,e._source,e._owner,e.props)},l.cloneElement=function(e,t,n){var u,p=i({},e.props),f=e.key,d=e.ref,h=(e._self,e._source,e._owner);if(null!=t){r(t)&&(d=t.ref,h=a.current),o(t)&&(f=""+t.key);var y;e.type&&e.type.defaultProps&&(y=e.type.defaultProps);for(u in t)s.call(t,u)&&!c.hasOwnProperty(u)&&(void 0===t[u]&&void 0!==y?p[u]=y[u]:p[u]=t[u])}var m=arguments.length-2;if(1===m)p.children=n;else if(m>1){for(var v=Array(m),g=0;g<m;g++)v[g]=arguments[g+2];p.children=v}return l(e.type,f,d,0,0,h,p)},l.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===u},t.exports=l},{12:12,15:15,27:27,44:44,45:45}],15:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;t.exports=r},{}],16:[function(e,t,n){"use strict";var r=e(33),o=e(10),i=e(14),a=e(40),s=(e(42),e(44),{create:function(e){if("object"!=typeof e||!e||Array.isArray(e))return e;if(i.isValidElement(e))return e;1===e.nodeType&&r("0");var t=[];for(var n in e)o.mapIntoWithKeyPrefixInternal(e[n],t,n,a.thatReturnsArgument);return t}});t.exports=s},{10:10,14:14,33:33,40:40,42:42,44:44}],17:[function(e,t,n){"use strict";function r(e,t){this.value=e,this.requestChange=t}t.exports=r},{}],18:[function(e,t,n){"use strict";var r=(e(44),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){},enqueueReplaceState:function(e,t){},enqueueSetState:function(e,t){}});t.exports=r},{44:44}],19:[function(e,t,n){"use strict";var r=e(14),o=r.isValidElement,i=e(47);t.exports=i(o)},{14:14,47:47}],20:[function(e,t,n){"use strict";function r(e,t){var n={};return function(r){n[t]=r,e.setState(n)}}var o={createStateSetter:function(e,t){return function(n,r,o,i,a,s){var u=t.call(e,n,r,o,i,a,s);u&&e.setState(u)}},createStateKeySetter:function(e,t){var n=e.__keySetters||(e.__keySetters={});return n[t]||(n[t]=r(e,t))}};o.Mixin={createStateSetter:function(e){return o.createStateSetter(this,e)},createStateKeySetter:function(e){return o.createStateKeySetter(this,e)}},t.exports=o},{}],21:[function(e,t,n){"use strict";var r=e(29),o={getChildMapping:function(e,t){return e?r(e):e},mergeChildMappings:function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},o=[];for(var i in e)t.hasOwnProperty(i)?o.length&&(r[i]=o,o=[]):o.push(i);var a,s={};for(var u in t){if(r.hasOwnProperty(u))for(a=0;a<r[u].length;a++){var c=r[u][a];s[r[u][a]]=n(c)}s[u]=n(u)}for(a=0;a<o.length;a++)s[o[a]]=n(o[a]);return s}};t.exports=o},{29:29}],22:[function(e,t,n){"use strict";function r(e,t,n){e.addEventListener(t,n,!1)}function o(e,t,n){e.removeEventListener(t,n,!1)}var i=e(39),a=e(1),s=[];i.canUseDOM&&function(){var e=a("animationend"),t=a("transitionend");e&&s.push(e),t&&s.push(t)}();var u={addEndEventListener:function(e,t){if(0===s.length)return void window.setTimeout(t,0);s.forEach(function(n){r(e,n,t)})},removeEndEventListener:function(e,t){0!==s.length&&s.forEach(function(n){o(e,n,t)})}};t.exports=u},{1:1,39:39}],23:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=e(45),s=e(5),u=e(21),c=e(47),l=c(s.isValidElement),p=e(40),f=function(e){function t(){var n,i,s;r(this,t);for(var c=arguments.length,l=Array(c),p=0;p<c;p++)l[p]=arguments[p];return n=i=o(this,e.call.apply(e,[this].concat(l))),i.state={children:u.getChildMapping(i.props.children)},i.performAppear=function(e){i.currentlyTransitioningKeys[e]=!0;var t=i.refs[e];t.componentWillAppear?t.componentWillAppear(i._handleDoneAppearing.bind(i,e)):i._handleDoneAppearing(e)},i._handleDoneAppearing=function(e){var t=i.refs[e];t.componentDidAppear&&t.componentDidAppear(),delete i.currentlyTransitioningKeys[e];var n=u.getChildMapping(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e)},i.performEnter=function(e){i.currentlyTransitioningKeys[e]=!0;var t=i.refs[e];t.componentWillEnter?t.componentWillEnter(i._handleDoneEntering.bind(i,e)):i._handleDoneEntering(e)},i._handleDoneEntering=function(e){var t=i.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete i.currentlyTransitioningKeys[e];var n=u.getChildMapping(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e)},i.performLeave=function(e){i.currentlyTransitioningKeys[e]=!0;var t=i.refs[e];t.componentWillLeave?t.componentWillLeave(i._handleDoneLeaving.bind(i,e)):i._handleDoneLeaving(e)},i._handleDoneLeaving=function(e){var t=i.refs[e];t.componentDidLeave&&t.componentDidLeave(),delete i.currentlyTransitioningKeys[e];var n=u.getChildMapping(i.props.children);n&&n.hasOwnProperty(e)?i.performEnter(e):i.setState(function(t){var n=a({},t.children);return delete n[e],{children:n}})},s=n,o(i,s)}return i(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)},t.prototype.componentWillReceiveProps=function(e){var t=u.getChildMapping(e.children),n=this.state.children;this.setState({children:u.mergeChildMappings(n,t)});var r;for(r in t){var o=n&&n.hasOwnProperty(r);!t[r]||o||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(r in n){var i=t&&t.hasOwnProperty(r);!n[r]||i||this.currentlyTransitioningKeys[r]||this.keysToLeave.push(r)}},t.prototype.componentDidUpdate=function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},t.prototype.render=function(){var e=[];for(var t in this.state.children){var n=this.state.children[t];n&&e.push(s.cloneElement(this.props.childFactory(n),{ref:t,key:t}))}var r=a({},this.props);return delete r.transitionLeave,delete r.transitionName,delete r.transitionAppear,delete r.transitionEnter,delete r.childFactory,delete r.transitionLeaveTimeout,delete r.transitionEnterTimeout,delete r.transitionAppearTimeout,delete r.component,s.createElement(this.props.component,r,e)},t}(s.Component);f.displayName="ReactTransitionGroup",f.propTypes={component:l.any,childFactory:l.func},f.defaultProps={component:"span",childFactory:p.thatReturnsArgument},t.exports=f},{21:21,40:40,45:45,47:47,5:5}],24:[function(e,t,n){"use strict";t.exports="15.6.2"},{}],25:[function(e,t,n){"use strict";var r=e(3),o=e(5),i=(e(6),e(11)),a=e(8),s=e(16),u=e(23),c=e(34),l=e(36);o.addons={CSSTransitionGroup:a,LinkedStateMixin:r,PureRenderMixin:i,TransitionGroup:u,createFragment:s.create,shallowCompare:c,update:l},t.exports=o},{11:11,16:16,23:23,3:3,34:34,36:36,5:5,6:6,8:8}],26:[function(e,t,n){"use strict";var r=e(45),o=e(25),i=r(o,{__SECRET_INJECTED_REACT_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:null,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:e(12)}});t.exports=i},{12:12,25:25,45:45}],27:[function(e,t,n){"use strict";t.exports=!1},{}],28:[function(e,t,n){"use strict";var r=e(7),o=r.Component,i=e(14),a=i.isValidElement,s=e(18),u=e(37);t.exports=u(o,a,s)},{14:14,18:18,37:37,7:7}],29:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r){if(e&&"object"==typeof e){var o=e;void 0===o[n]&&null!=t&&(o[n]=t)}}function o(e,t){if(null==e)return e;var n={};return i(e,r,n),n}var i=(e(2),e(35));e(44);void 0!==n&&n.env,t.exports=o}).call(this,void 0)},{2:2,35:35,44:44}],30:[function(e,t,n){"use strict";function r(e){var t=e&&(o&&e[o]||e[i]);if("function"==typeof t)return t}var o="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";t.exports=r},{}],31:[function(e,t,n){"use strict";var r=function(){};t.exports=r},{}],32:[function(e,t,n){"use strict";function r(e){return i.isValidElement(e)||o("143"),e}var o=e(33),i=e(14);e(42);t.exports=r},{14:14,33:33,42:42}],33:[function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var o=new Error(n);throw o.name="Invariant Violation",o.framesToPop=1,o}t.exports=r},{}],34:[function(e,t,n){"use strict";function r(e,t,n){return!o(e.props,t)||!o(e.state,n)}var o=e(43);t.exports=r},{43:43}],35:[function(e,t,n){"use strict";function r(e,t){return e&&"object"==typeof e&&null!=e.key?c.escape(e.key):t.toString(36)}function o(e,t,n,i){var f=typeof e;if("undefined"!==f&&"boolean"!==f||(e=null),null===e||"string"===f||"number"===f||"object"===f&&e.$$typeof===s)return n(i,e,""===t?l+r(e,0):t),1;var d,h,y=0,m=""===t?l:t+p;if(Array.isArray(e))for(var v=0;v<e.length;v++)d=e[v],h=m+r(d,v),y+=o(d,h,n,i);else{var g=u(e);if(g){var b,E=g.call(e);if(g!==e.entries)for(var _=0;!(b=E.next()).done;)d=b.value,h=m+r(d,_++),y+=o(d,h,n,i);else for(;!(b=E.next()).done;){var w=b.value;w&&(d=w[1],h=m+c.escape(w[0])+p+r(d,0),y+=o(d,h,n,i))}}else if("object"===f){var x=String(e);a("31","[object Object]"===x?"object with keys {"+Object.keys(e).join(", ")+"}":x,"")}}return y}function i(e,t,n){return null==e?0:o(e,"",t,n)}var a=e(33),s=(e(12),e(15)),u=e(30),c=(e(42),e(2)),l=(e(44),"."),p=":";t.exports=i},{12:12,15:15,2:2,30:30,33:33,42:42,44:44}],36:[function(e,t,n){"use strict";function r(e){return Array.isArray(e)?e.concat():e&&"object"==typeof e?s(new e.constructor,e):e}function o(e,t,n){Array.isArray(e)||a("1",n,e);var r=t[n];Array.isArray(r)||a("2",n,r)}function i(e,t){if("object"!=typeof t&&a("3",y.join(", "),f),u.call(t,f))return 1!==Object.keys(t).length&&a("4",f),t[f];var n=r(e);if(u.call(t,d)){var v=t[d];v&&"object"==typeof v||a("5",d,v),n&&"object"==typeof n||a("6",d,n),s(n,t[d])}u.call(t,c)&&(o(e,t,c),t[c].forEach(function(e){n.push(e)})),u.call(t,l)&&(o(e,t,l),t[l].forEach(function(e){n.unshift(e)})),u.call(t,p)&&(Array.isArray(e)||a("7",p,e),Array.isArray(t[p])||a("8",p,t[p]),t[p].forEach(function(e){Array.isArray(e)||a("8",p,t[p]),n.splice.apply(n,e)})),u.call(t,h)&&("function"!=typeof t[h]&&a("9",h,t[h]),n=t[h](n));for(var g in t)m.hasOwnProperty(g)&&m[g]||(n[g]=i(e[g],t[g]));return n}var a=e(33),s=e(45),u=(e(42),{}.hasOwnProperty),c="$push",l="$unshift",p="$splice",f="$set",d="$merge",h="$apply",y=[c,l,p,f,d,h],m={};y.forEach(function(e){m[e]=!0}),t.exports=i},{33:33,42:42,45:45}],37:[function(e,t,n){"use strict";function r(e){return e}function o(e,t,n){function o(e,t){var n=g.hasOwnProperty(t)?g[t]:null;w.hasOwnProperty(t)&&s("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&s("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function c(e,n){if(n){s("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),s(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=e.prototype,i=r.__reactAutoBindPairs;n.hasOwnProperty(u)&&b.mixins(e,n.mixins);for(var a in n)if(n.hasOwnProperty(a)&&a!==u){var c=n[a],l=r.hasOwnProperty(a);if(o(l,a),b.hasOwnProperty(a))b[a](e,c);else{var p=g.hasOwnProperty(a),h="function"==typeof c,y=h&&!p&&!l&&!1!==n.autobind;if(y)i.push(a,c),r[a]=c;else if(l){var m=g[a];s(p&&("DEFINE_MANY_MERGED"===m||"DEFINE_MANY"===m),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",m,a),"DEFINE_MANY_MERGED"===m?r[a]=f(r[a],c):"DEFINE_MANY"===m&&(r[a]=d(r[a],c))}else r[a]=c}}}else;}function l(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var o=n in b;s(!o,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var i=n in e;s(!i,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),e[n]=r}}}function p(e,t){s(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t)t.hasOwnProperty(n)&&(s(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function f(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var o={};return p(o,n),p(o,r),o}}function d(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function h(e,t){var n=t.bind(e);return n}function y(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],o=t[n+1];e[r]=h(e,o)}}function m(e){var t=r(function(e,r,o){this.__reactAutoBindPairs.length&&y(this),this.props=e,this.context=r,this.refs=a,this.updater=o||n,this.state=null;var i=this.getInitialState?this.getInitialState():null;s("object"==typeof i&&!Array.isArray(i),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=i});t.prototype=new x,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],v.forEach(c.bind(null,t)),c(t,E),c(t,e),c(t,_),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),s(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var o in g)t.prototype[o]||(t.prototype[o]=null);return t}var v=[],g={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},b={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)c(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=i({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=i({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=f(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=i({},e.propTypes,t)},statics:function(e,t){l(e,t)},autobind:function(){}},E={componentDidMount:function(){this.__isMounted=!0}},_={componentWillUnmount:function(){this.__isMounted=!1}},w={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},x=function(){};return i(x.prototype,e.prototype,w),m}var i=e(45),a=e(41),s=e(42),u="mixins";t.exports=o},{41:41,42:42,44:44,45:45}],38:[function(e,t,n){"use strict";function r(e,t){for(var n=e;n.parentNode;)n=n.parentNode;var r=n.querySelectorAll(t);return-1!==Array.prototype.indexOf.call(r,e)}var o=e(42),i={addClass:function(e,t){return/\s/.test(t)&&o(!1),t&&(e.classList?e.classList.add(t):i.hasClass(e,t)||(e.className=e.className+" "+t)),e},removeClass:function(e,t){return/\s/.test(t)&&o(!1),t&&(e.classList?e.classList.remove(t):i.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e},conditionClass:function(e,t,n){return(n?i.addClass:i.removeClass)(e,t)},hasClass:function(e,t){return/\s/.test(t)&&o(!1),e.classList?!!t&&e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1},matchesSelector:function(e,t){return(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||function(t){return r(e,t)}).call(e,t)}};t.exports=i},{42:42}],39:[function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=o},{}],40:[function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},t.exports=o},{}],41:[function(e,t,n){"use strict";var r={};t.exports=r},{}],42:[function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,u){if(o(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,a,s,u],p=0;c=new Error(t.replace(/%s/g,function(){return l[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var o=function(e){};t.exports=r},{}],43:[function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!==e&&t!==t}function o(e,t){if(r(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!i.call(t,n[a])||!r(e[n[a]],t[n[a]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;t.exports=o},{}],44:[function(e,t,n){"use strict";var r=e(40),o=r
;t.exports=o},{40:40}],45:[function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var l in n)i.call(n,l)&&(u[l]=n[l]);if(o){s=o(n);for(var p=0;p<s.length;p++)a.call(n,s[p])&&(u[s[p]]=n[s[p]])}}return u}},{}],46:[function(e,t,n){"use strict";function r(e,t,n,r,o){}t.exports=r},{42:42,44:44,49:49}],47:[function(e,t,n){"use strict";var r=e(48);t.exports=function(e){return r(e,!1)}},{48:48}],48:[function(e,t,n){"use strict";var r=e(40),o=e(42),i=e(44),a=e(49),s=e(46);t.exports=function(e,t){function n(e){var t=e&&(A&&e[A]||e[T]);if("function"==typeof t)return t}function u(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function c(e){this.message=e,this.stack=""}function l(e){function n(n,r,i,s,u,l,p){if(s=s||O,l=l||i,p!==a)if(t)o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else;return null==r[i]?n?new c(null===r[i]?"The "+u+" `"+l+"` is marked as required in `"+s+"`, but its value is `null`.":"The "+u+" `"+l+"` is marked as required in `"+s+"`, but its value is `undefined`."):null:e(r,i,s,u,l)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function p(e){function t(t,n,r,o,i,a){var s=t[n];if(E(s)!==e)return new c("Invalid "+o+" `"+i+"` of type `"+_(s)+"` supplied to `"+r+"`, expected `"+e+"`.");return null}return l(t)}function f(e){function t(t,n,r,o,i){if("function"!=typeof e)return new c("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){return new c("Invalid "+o+" `"+i+"` of type `"+E(s)+"` supplied to `"+r+"`, expected an array.")}for(var u=0;u<s.length;u++){var l=e(s,u,r,o,i+"["+u+"]",a);if(l instanceof Error)return l}return null}return l(t)}function d(e){function t(t,n,r,o,i){if(!(t[n]instanceof e)){var a=e.name||O;return new c("Invalid "+o+" `"+i+"` of type `"+x(t[n])+"` supplied to `"+r+"`, expected instance of `"+a+"`.")}return null}return l(t)}function h(e){function t(t,n,r,o,i){for(var a=t[n],s=0;s<e.length;s++)if(u(a,e[s]))return null;return new c("Invalid "+o+" `"+i+"` of value `"+a+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?l(t):r.thatReturnsNull}function y(e){function t(t,n,r,o,i){if("function"!=typeof e)return new c("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],u=E(s);if("object"!==u)return new c("Invalid "+o+" `"+i+"` of type `"+u+"` supplied to `"+r+"`, expected an object.");for(var l in s)if(s.hasOwnProperty(l)){var p=e(s,l,r,o,i+"."+l,a);if(p instanceof Error)return p}return null}return l(t)}function m(e){function t(t,n,r,o,i){for(var s=0;s<e.length;s++){if(null==(0,e[s])(t,n,r,o,i,a))return null}return new c("Invalid "+o+" `"+i+"` supplied to `"+r+"`.")}if(!Array.isArray(e))return r.thatReturnsNull;for(var n=0;n<e.length;n++){var o=e[n];if("function"!=typeof o)return i(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",w(o),n),r.thatReturnsNull}return l(t)}function v(e){function t(t,n,r,o,i){var s=t[n],u=E(s);if("object"!==u)return new c("Invalid "+o+" `"+i+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");for(var l in e){var p=e[l];if(p){var f=p(s,l,r,o,i+"."+l,a);if(f)return f}}return null}return l(t)}function g(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(g);if(null===t||e(t))return!0;var r=n(t);if(!r)return!1;var o,i=r.call(t);if(r!==t.entries){for(;!(o=i.next()).done;)if(!g(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!g(a[1]))return!1}return!0;default:return!1}}function b(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function E(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":b(t,e)?"symbol":t}function _(e){if(void 0===e||null===e)return""+e;var t=E(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function w(e){var t=_(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function x(e){return e.constructor&&e.constructor.name?e.constructor.name:O}var A="function"==typeof Symbol&&Symbol.iterator,T="@@iterator",O="<<anonymous>>",P={array:p("array"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:function(){return l(r.thatReturnsNull)}(),arrayOf:f,element:function(){function t(t,n,r,o,i){var a=t[n];if(!e(a)){return new c("Invalid "+o+" `"+i+"` of type `"+E(a)+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}return l(t)}(),instanceOf:d,node:function(){function e(e,t,n,r,o){return g(e[t])?null:new c("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}return l(e)}(),objectOf:y,oneOf:h,oneOfType:m,shape:v};return c.prototype=Error.prototype,P.checkPropTypes=s,P.PropTypes=P,P}},{40:40,42:42,44:44,46:46,49:49}],49:[function(e,t,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}]},{},[26])(26)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:react', location = '/static/lib/react/react-dom.js' */
/**
 * ReactDOM v15.6.2
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e(require("react"));else if("function"==typeof define&&define.amd)define(["react"],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ReactDOM=e(t.React)}}(function(e){return function(t){return function(){return function e(t,n,r){function o(i,s){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n||e)},c,c.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";var r={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};t.exports=r},{}],2:[function(e,t,n){"use strict";var r=e(33),o=e(132),a={focusDOMComponent:function(){o(r.getNodeFromInstance(this))}};t.exports=a},{132:132,33:33}],3:[function(e,t,n){"use strict";function r(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function o(e){switch(e){case"topCompositionStart":return T.compositionStart;case"topCompositionEnd":return T.compositionEnd;case"topCompositionUpdate":return T.compositionUpdate}}function a(e,t){return"topKeyDown"===e&&t.keyCode===y}function i(e,t){switch(e){case"topKeyUp":return-1!==g.indexOf(t.keyCode);case"topKeyDown":return t.keyCode!==y;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function s(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function u(e,t,n,r){var u,l;if(_?u=o(e):P?i(e,n)&&(u=T.compositionEnd):a(e,n)&&(u=T.compositionStart),!u)return null;E&&(P||u!==T.compositionStart?u===T.compositionEnd&&P&&(l=P.getData()):P=h.getPooled(r));var c=m.getPooled(u,t,n,r);if(l)c.data=l;else{var p=s(n);null!==p&&(c.data=p)}return d.accumulateTwoPhaseDispatches(c),c}function l(e,t){switch(e){case"topCompositionEnd":return s(t);case"topKeyPress":return t.which!==x?null:(k=!0,w);case"topTextInput":var n=t.data;return n===w&&k?null:n;default:return null}}function c(e,t){if(P){if("topCompositionEnd"===e||!_&&i(e,t)){var n=P.getData();return h.release(P),P=null,n}return null}switch(e){case"topPaste":return null;case"topKeyPress":return t.which&&!r(t)?String.fromCharCode(t.which):null;case"topCompositionEnd":return E?null:t.data;default:return null}}function p(e,t,n,r){var o;if(!(o=b?l(e,n):c(e,n)))return null;var a=v.getPooled(T.beforeInput,t,n,r);return a.data=o,d.accumulateTwoPhaseDispatches(a),a}var d=e(19),f=e(124),h=e(20),m=e(78),v=e(82),g=[9,13,27,32],y=229,_=f.canUseDOM&&"CompositionEvent"in window,C=null;f.canUseDOM&&"documentMode"in document&&(C=document.documentMode);var b=f.canUseDOM&&"TextEvent"in window&&!C&&!function(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}(),E=f.canUseDOM&&(!_||C&&C>8&&C<=11),x=32,w=String.fromCharCode(x),T={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},k=!1,P=null,S={eventTypes:T,extractEvents:function(e,t,n,r){return[u(e,t,n,r),p(e,t,n,r)]}};t.exports=S},{124:124,19:19,20:20,78:78,82:82}],4:[function(e,t,n){"use strict";function r(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var o={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},a=["Webkit","ms","Moz","O"];Object.keys(o).forEach(function(e){a.forEach(function(t){o[r(t,e)]=o[e]})});var i={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},s={isUnitlessNumber:o,shorthandPropertyExpansions:i};t.exports=s},{}],5:[function(e,t,n){"use strict";var r=e(4),o=e(124),a=(e(58),e(126),e(94)),i=e(137),s=e(141),u=(e(143),s(function(e){return i(e)})),l=!1,c="cssFloat";if(o.canUseDOM){var p=document.createElement("div").style;try{p.font=""}catch(e){l=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var d={createMarkupForStyles:function(e,t){var n="";for(var r in e)if(e.hasOwnProperty(r)){var o=0===r.indexOf("--"),i=e[r];null!=i&&(n+=u(r)+":",n+=a(r,i,t,o)+";")}return n||null},setValueForStyles:function(e,t,n){var o=e.style;for(var i in t)if(t.hasOwnProperty(i)){var s=0===i.indexOf("--"),u=a(i,t[i],n,s);if("float"!==i&&"cssFloat"!==i||(i=c),s)o.setProperty(i,u);else if(u)o[i]=u;else{var p=l&&r.shorthandPropertyExpansions[i];if(p)for(var d in p)o[d]="";else o[i]=""}}}};t.exports=d},{124:124,126:126,137:137,141:141,143:143,4:4,58:58,94:94}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e(113),a=e(24),i=(e(138),function(){function e(t){r(this,e),this._callbacks=null,this._contexts=null,this._arg=t}return e.prototype.enqueue=function(e,t){this._callbacks=this._callbacks||[],this._callbacks.push(e),this._contexts=this._contexts||[],this._contexts.push(t)},e.prototype.notifyAll=function(){var e=this._callbacks,t=this._contexts,n=this._arg;if(e&&t){e.length!==t.length&&o("24"),this._callbacks=null,this._contexts=null;for(var r=0;r<e.length;r++)e[r].call(t[r],n);e.length=0,t.length=0}},e.prototype.checkpoint=function(){return this._callbacks?this._callbacks.length:0},e.prototype.rollback=function(e){this._callbacks&&this._contexts&&(this._callbacks.length=e,this._contexts.length=e)},e.prototype.reset=function(){this._callbacks=null,this._contexts=null},e.prototype.destructor=function(){this.reset()},e}());t.exports=a.addPoolingTo(i)},{113:113,138:138,24:24}],7:[function(e,t,n){"use strict";function r(e,t,n){var r=k.getPooled(I.change,e,t,n);return r.type="change",E.accumulateTwoPhaseDispatches(r),r}function o(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function a(e){var t=r(R,e,S(e));T.batchedUpdates(i,t)}function i(e){b.enqueueEvents(e),b.processEventQueue(!1)}function s(e,t){O=e,R=t,O.attachEvent("onchange",a)}function u(){O&&(O.detachEvent("onchange",a),O=null,R=null)}function l(e,t){var n=P.updateValueIfChanged(e),r=!0===t.simulated&&L._allowSimulatedPassThrough;if(n||r)return e}function c(e,t){if("topChange"===e)return t}function p(e,t,n){"topFocus"===e?(u(),s(t,n)):"topBlur"===e&&u()}function d(e,t){O=e,R=t,O.attachEvent("onpropertychange",h)}function f(){O&&(O.detachEvent("onpropertychange",h),O=null,R=null)}function h(e){"value"===e.propertyName&&l(R,e)&&a(e)}function m(e,t,n){"topFocus"===e?(f(),d(t,n)):"topBlur"===e&&f()}function v(e,t,n){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return l(R,n)}function g(e){var t=e.nodeName;return t&&"input"===t.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function y(e,t,n){if("topClick"===e)return l(t,n)}function _(e,t,n){if("topInput"===e||"topChange"===e)return l(t,n)}function C(e,t){if(null!=e){var n=e._wrapperState||t._wrapperState;if(n&&n.controlled&&"number"===t.type){var r=""+t.value;t.getAttribute("value")!==r&&t.setAttribute("value",r)}}}var b=e(16),E=e(19),x=e(124),w=e(33),T=e(71),k=e(80),P=e(108),S=e(102),N=e(110),M=e(111),I={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}},O=null,R=null,A=!1;x.canUseDOM&&(A=N("change")&&(!document.documentMode||document.documentMode>8));var D=!1;x.canUseDOM&&(D=N("input")&&(!document.documentMode||document.documentMode>9));var L={eventTypes:I,_allowSimulatedPassThrough:!0,_isInputEventSupported:D,extractEvents:function(e,t,n,a){var i,s,u=t?w.getNodeFromInstance(t):window;if(o(u)?A?i=c:s=p:M(u)?D?i=_:(i=v,s=m):g(u)&&(i=y),i){var l=i(e,t,n);if(l)return r(l,n,a)}s&&s(e,u,t),"topBlur"===e&&C(t,u)}};t.exports=L},{102:102,108:108,110:110,111:111,124:124,16:16,19:19,33:33,71:71,80:80}],8:[function(e,t,n){"use strict";function r(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function o(e,t,n){c.insertTreeBefore(e,t,n)}function a(e,t,n){Array.isArray(t)?s(e,t[0],t[1],n):m(e,t,n)}function i(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],u(e,t,n),e.removeChild(n)}e.removeChild(t)}function s(e,t,n,r){for(var o=t;;){var a=o.nextSibling;if(m(e,o,r),o===n)break;o=a}}function u(e,t,n){for(;;){var r=t.nextSibling;if(r===n)break;e.removeChild(r)}}function l(e,t,n){var r=e.parentNode,o=e.nextSibling;o===t?n&&m(r,document.createTextNode(n),o):n?(h(o,n),u(r,o,t)):u(r,e,t)}var c=e(9),p=e(13),d=(e(33),e(58),e(93)),f=e(115),h=e(116),m=d(function(e,t,n){e.insertBefore(t,n)}),v=p.dangerouslyReplaceNodeWithMarkup,g={dangerouslyReplaceNodeWithMarkup:v,replaceDelimitedText:l,processUpdates:function(e,t){for(var n=0;n<t.length;n++){var s=t[n];switch(s.type){case"INSERT_MARKUP":o(e,s.content,r(e,s.afterNode));break;case"MOVE_EXISTING":a(e,s.fromNode,r(e,s.afterNode));break;case"SET_MARKUP":f(e,s.content);break;case"TEXT_CONTENT":h(e,s.content);break;case"REMOVE_NODE":i(e,s.fromNode)}}}};t.exports=g},{115:115,116:116,13:13,33:33,58:58,9:9,93:93}],9:[function(e,t,n){"use strict";function r(e){if(h){var t=e.node,n=e.children;if(n.length)for(var r=0;r<n.length;r++)m(t,n[r],null);else null!=e.html?p(t,e.html):null!=e.text&&f(t,e.text)}}function o(e,t){e.parentNode.replaceChild(t.node,e),r(t)}function a(e,t){h?e.children.push(t):e.node.appendChild(t.node)}function i(e,t){h?e.html=t:p(e.node,t)}function s(e,t){h?e.text=t:f(e.node,t)}function u(){return this.node.nodeName}function l(e){return{node:e,children:[],html:null,text:null,toString:u}}var c=e(10),p=e(115),d=e(93),f=e(116),h="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),m=d(function(e,t,n){11===t.node.nodeType||1===t.node.nodeType&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===c.html)?(r(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),r(t))});l.insertTreeBefore=m,l.replaceChildWithTree=o,l.queueChild=a,l.queueHTML=i,l.queueText=s,t.exports=l},{10:10,115:115,116:116,93:93}],10:[function(e,t,n){"use strict";var r={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};t.exports=r},{}],11:[function(e,t,n){"use strict";function r(e,t){return(e&t)===t}var o=e(113),a=(e(138),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=a,n=e.Properties||{},i=e.DOMAttributeNamespaces||{},u=e.DOMAttributeNames||{},l=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var p in n){s.properties.hasOwnProperty(p)&&o("48",p);var d=p.toLowerCase(),f=n[p],h={attributeName:d,attributeNamespace:null,propertyName:p,mutationMethod:null,mustUseProperty:r(f,t.MUST_USE_PROPERTY),hasBooleanValue:r(f,t.HAS_BOOLEAN_VALUE),hasNumericValue:r(f,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(f,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(f,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(h.hasBooleanValue+h.hasNumericValue+h.hasOverloadedBooleanValue<=1||o("50",p),u.hasOwnProperty(p)){var m=u[p];h.attributeName=m}i.hasOwnProperty(p)&&(h.attributeNamespace=i[p]),l.hasOwnProperty(p)&&(h.propertyName=l[p]),c.hasOwnProperty(p)&&(h.mutationMethod=c[p]),s.properties[p]=h}}}),i=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:i,ATTRIBUTE_NAME_CHAR:i+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++)if((0,s._isCustomAttributeFunctions[t])(e))return!0;return!1},injection:a};t.exports=s},{113:113,138:138}],12:[function(e,t,n){"use strict";function r(e){return!!l.hasOwnProperty(e)||!u.hasOwnProperty(e)&&(s.test(e)?(l[e]=!0,!0):(u[e]=!0,!1))}function o(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&!1===t}var a=e(11),i=(e(33),e(58),e(112)),s=(e(143),new RegExp("^["+a.ATTRIBUTE_NAME_START_CHAR+"]["+a.ATTRIBUTE_NAME_CHAR+"]*$")),u={},l={},c={createMarkupForID:function(e){return a.ID_ATTRIBUTE_NAME+"="+i(e)},setAttributeForID:function(e,t){e.setAttribute(a.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return a.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(a.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=a.properties.hasOwnProperty(e)?a.properties[e]:null;if(n){if(o(n,t))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&!0===t?r+'=""':r+"="+i(t)}return a.isCustomAttribute(e)?null==t?"":e+"="+i(t):null},createMarkupForCustomAttribute:function(e,t){return r(e)&&null!=t?e+"="+i(t):""},setValueForProperty:function(e,t,n){var r=a.properties.hasOwnProperty(t)?a.properties[t]:null;if(r){var i=r.mutationMethod;if(i)i(e,n);else{if(o(r,n))return void this.deleteValueForProperty(e,t);if(r.mustUseProperty)e[r.propertyName]=n;else{var s=r.attributeName,u=r.attributeNamespace;u?e.setAttributeNS(u,s,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?e.setAttribute(s,""):e.setAttribute(s,""+n)}}}else if(a.isCustomAttribute(t))return void c.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){r(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=a.properties.hasOwnProperty(t)?a.properties[t]:null;if(n){var r=n.mutationMethod;if(r)r(e,void 0);else if(n.mustUseProperty){var o=n.propertyName;n.hasBooleanValue?e[o]=!1:e[o]=""}else e.removeAttribute(n.attributeName)}else a.isCustomAttribute(t)&&e.removeAttribute(t)}};t.exports=c},{11:11,112:112,143:143,33:33,58:58}],13:[function(e,t,n){"use strict";var r=e(113),o=e(9),a=e(124),i=e(129),s=e(130),u=(e(138),{dangerouslyReplaceNodeWithMarkup:function(e,t){if(a.canUseDOM||r("56"),t||r("57"),"HTML"===e.nodeName&&r("58"),"string"==typeof t){var n=i(t,s)[0];e.parentNode.replaceChild(n,e)}else o.replaceChildWithTree(e,t)}});t.exports=u},{113:113,124:124,129:129,130:130,138:138,9:9}],14:[function(e,t,n){"use strict";var r=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];t.exports=r},{}],15:[function(e,t,n){"use strict";var r=e(19),o=e(33),a=e(84),i={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},s={eventTypes:i,extractEvents:function(e,t,n,s){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==e&&"topMouseOver"!==e)return null;var u;if(s.window===s)u=s;else{var l=s.ownerDocument;u=l?l.defaultView||l.parentWindow:window}var c,p;if("topMouseOut"===e){c=t;var d=n.relatedTarget||n.toElement;p=d?o.getClosestInstanceFromNode(d):null}else c=null,p=t;if(c===p)return null;var f=null==c?u:o.getNodeFromInstance(c),h=null==p?u:o.getNodeFromInstance(p),m=a.getPooled(i.mouseLeave,c,n,s);m.type="mouseleave",m.target=f,m.relatedTarget=h;var v=a.getPooled(i.mouseEnter,p,n,s);return v.type="mouseenter",v.target=h,v.relatedTarget=f,r.accumulateEnterLeaveDispatches(m,v,c,p),[m,v]}};t.exports=s},{19:19,33:33,84:84}],16:[function(e,t,n){"use strict";function r(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}function o(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||!r(t));default:return!1}}var a=e(113),i=e(17),s=e(18),u=e(50),l=e(91),c=e(98),p=(e(138),{}),d=null,f=function(e,t){e&&(s.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},h=function(e){return f(e,!0)},m=function(e){return f(e,!1)},v=function(e){return"."+e._rootNodeID},g={injection:{injectEventPluginOrder:i.injectEventPluginOrder,injectEventPluginsByName:i.injectEventPluginsByName},putListener:function(e,t,n){"function"!=typeof n&&a("94",t,typeof n);var r=v(e);(p[t]||(p[t]={}))[r]=n;var o=i.registrationNameModules[t];o&&o.didPutListener&&o.didPutListener(e,t,n)},getListener:function(e,t){var n=p[t];if(o(t,e._currentElement.type,e._currentElement.props))return null;var r=v(e);return n&&n[r]},deleteListener:function(e,t){var n=i.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var r=p[t];r&&delete r[v(e)]},deleteAllListeners:function(e){var t=v(e);for(var n in p)if(p.hasOwnProperty(n)&&p[n][t]){var r=i.registrationNameModules[n];r&&r.willDeleteListener&&r.willDeleteListener(e,n),delete p[n][t]}},extractEvents:function(e,t,n,r){for(var o,a=i.plugins,s=0;s<a.length;s++){var u=a[s];if(u){var c=u.extractEvents(e,t,n,r);c&&(o=l(o,c))}}return o},enqueueEvents:function(e){e&&(d=l(d,e))},processEventQueue:function(e){var t=d;d=null,e?c(t,h):c(t,m),d&&a("95"),u.rethrowCaughtError()},__purge:function(){p={}},__getListenerBank:function(){return p}};t.exports=g},{113:113,138:138,17:17,18:18,50:50,91:91,98:98}],17:[function(e,t,n){"use strict";function r(){if(s)for(var e in u){var t=u[e],n=s.indexOf(e);if(n>-1||i("96",e),!l.plugins[n]){t.extractEvents||i("97",e),l.plugins[n]=t;var r=t.eventTypes;for(var a in r)o(r[a],t,a)||i("98",a,e)}}}function o(e,t,n){l.eventNameDispatchConfigs.hasOwnProperty(n)&&i("99",n),l.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];a(s,t,n)}return!0}return!!e.registrationName&&(a(e.registrationName,t,n),!0)}function a(e,t,n){l.registrationNameModules[e]&&i("100",e),l.registrationNameModules[e]=t,l.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var i=e(113),s=(e(138),null),u={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){s&&i("101"),s=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];u.hasOwnProperty(n)&&u[n]===o||(u[n]&&i("102",n),u[n]=o,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return l.registrationNameModules[t.registrationName]||null;if(void 0!==t.phasedRegistrationNames){var n=t.phasedRegistrationNames;for(var r in n)if(n.hasOwnProperty(r)){var o=l.registrationNameModules[n[r]];if(o)return o}}return null},_resetEventPlugins:function(){s=null;for(var e in u)u.hasOwnProperty(e)&&delete u[e];l.plugins.length=0;var t=l.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=l.registrationNameModules;for(var o in r)r.hasOwnProperty(o)&&delete r[o]}};t.exports=l},{113:113,138:138}],18:[function(e,t,n){"use strict";function r(e){return"topMouseUp"===e||"topTouchEnd"===e||"topTouchCancel"===e}function o(e){return"topMouseMove"===e||"topTouchMove"===e}function a(e){return"topMouseDown"===e||"topTouchStart"===e}function i(e,t,n,r){var o=e.type||"unknown-event";e.currentTarget=g.getNodeFromInstance(r),t?m.invokeGuardedCallbackWithCatch(o,n,e):m.invokeGuardedCallback(o,n,e),e.currentTarget=null}function s(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var o=0;o<n.length&&!e.isPropagationStopped();o++)i(e,t,n[o],r[o]);else n&&i(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null}function u(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function l(e){var t=u(e);return e._dispatchInstances=null,e._dispatchListeners=null,t}function c(e){var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)&&h("103"),e.currentTarget=t?g.getNodeFromInstance(n):null;var r=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,r}function p(e){return!!e._dispatchListeners}var d,f,h=e(113),m=e(50),v=(e(138),e(143),{injectComponentTree:function(e){d=e},injectTreeTraversal:function(e){f=e}}),g={isEndish:r,isMoveish:o,isStartish:a,executeDirectDispatch:c,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:l,hasDispatches:p,getInstanceFromNode:function(e){return d.getInstanceFromNode(e)},getNodeFromInstance:function(e){return d.getNodeFromInstance(e)},isAncestor:function(e,t){return f.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return f.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return f.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return f.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,r,o){return f.traverseEnterLeave(e,t,n,r,o)},injection:v};t.exports=g},{113:113,138:138,143:143,50:50}],19:[function(e,t,n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return g(e,r)}function o(e,t,n){var o=r(e,n,t);o&&(n._dispatchListeners=m(n._dispatchListeners,o),n._dispatchInstances=m(n._dispatchInstances,e))}function a(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.traverseTwoPhase(e._targetInst,o,e)}function i(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?h.getParentInstance(t):null;h.traverseTwoPhase(n,o,e)}}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,o=g(e,r);o&&(n._dispatchListeners=m(n._dispatchListeners,o),n._dispatchInstances=m(n._dispatchInstances,e))}}function u(e){e&&e.dispatchConfig.registrationName&&s(e._targetInst,null,e)}function l(e){v(e,a)}function c(e){v(e,i)}function p(e,t,n,r){h.traverseEnterLeave(n,r,s,e,t)}function d(e){v(e,u)}var f=e(16),h=e(18),m=e(91),v=e(98),g=(e(143),f.getListener),y={accumulateTwoPhaseDispatches:l,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:d,accumulateEnterLeaveDispatches:p};t.exports=y},{143:143,16:16,18:18,91:91,98:98}],20:[function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var o=e(144),a=e(24),i=e(106);o(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[i()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,o=this.getText(),a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=o.slice(e,s),this._fallbackText}}),a.addPoolingTo(r),t.exports=r},{106:106,144:144,24:24}],21:[function(e,t,n){"use strict";var r=e(11),o=r.injection.MUST_USE_PROPERTY,a=r.injection.HAS_BOOLEAN_VALUE,i=r.injection.HAS_NUMERIC_VALUE,s=r.injection.HAS_POSITIVE_NUMERIC_VALUE,u=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,l={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:a,allowTransparency:0,alt:0,as:0,async:a,autoComplete:0,autoPlay:a,capture:a,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:o|a,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:a,controlsList:0,coords:0,crossOrigin:0,data:0,dateTime:0,default:a,defer:a,dir:0,disabled:a,download:u,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:a,formTarget:0,frameBorder:0,headers:0,height:0,hidden:a,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:a,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:o|a,muted:o|a,name:0,nonce:0,noValidate:a,open:a,optimum:0,pattern:0,placeholder:0,playsInline:a,poster:0,preload:0,profile:0,radioGroup:0,readOnly:a,referrerPolicy:0,rel:0,required:a,reversed:a,role:0,rows:s,rowSpan:i,sandbox:0,scope:0,scoped:a,scrolling:0,seamless:a,selected:o|a,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:i,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:a,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}};t.exports=l},{11:11}],22:[function(e,t,n){"use strict";function r(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function o(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(t,function(e){return n[e]})}var a={escape:r,unescape:o};t.exports=a},{}],23:[function(e,t,n){"use strict";function r(e){null!=e.checkedLink&&null!=e.valueLink&&s("87")}function o(e){r(e),(null!=e.value||null!=e.onChange)&&s("88")}function a(e){r(e),(null!=e.checked||null!=e.onChange)&&s("89")}function i(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var s=e(113),u=e(64),l=e(146),c=e(121),p=l(c.isValidElement),d=(e(138),e(143),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),f={value:function(e,t,n){return!e[t]||d[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:p.func},h={},m={checkPropTypes:function(e,t,n){for(var r in f){if(f.hasOwnProperty(r))var o=f[r](t,r,e,"prop",null,u);o instanceof Error&&!(o.message in h)&&(h[o.message]=!0,i(n))}},getValue:function(e){return e.valueLink?(o(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(a(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(o(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(a(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};t.exports=m},{113:113,121:121,138:138,143:143,146:146,64:64}],24:[function(e,t,n){"use strict";var r=e(113),o=(e(138),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),a=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},i=function(e,t,n){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,e,t,n),o}return new r(e,t,n)},s=function(e,t,n,r){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,e,t,n,r),a}return new o(e,t,n,r)},u=function(e){var t=this;e instanceof t||r("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},l=o,c=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||l,n.poolSize||(n.poolSize=10),n.release=u,n},p={addPoolingTo:c,oneArgumentPooler:o,twoArgumentPooler:a,threeArgumentPooler:i,fourArgumentPooler:s};t.exports=p},{113:113,138:138}],25:[function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,m)||(e[m]=f++,p[e[m]]={}),p[e[m]]}var o,a=e(144),i=e(17),s=e(51),u=e(90),l=e(107),c=e(110),p={},d=!1,f=0,h={topAbort:"abort",topAnimationEnd:l("animationend")||"animationend",topAnimationIteration:l("animationiteration")||"animationiteration",topAnimationStart:l("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",
topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:l("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),v=a({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=e}},setEnabled:function(e){v.ReactEventListener&&v.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,o=r(n),a=i.registrationNameDependencies[e],s=0;s<a.length;s++){var u=a[s];o.hasOwnProperty(u)&&o[u]||("topWheel"===u?c("wheel")?v.ReactEventListener.trapBubbledEvent("topWheel","wheel",n):c("mousewheel")?v.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",n):v.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",n):"topScroll"===u?c("scroll",!0)?v.ReactEventListener.trapCapturedEvent("topScroll","scroll",n):v.ReactEventListener.trapBubbledEvent("topScroll","scroll",v.ReactEventListener.WINDOW_HANDLE):"topFocus"===u||"topBlur"===u?(c("focus",!0)?(v.ReactEventListener.trapCapturedEvent("topFocus","focus",n),v.ReactEventListener.trapCapturedEvent("topBlur","blur",n)):c("focusin")&&(v.ReactEventListener.trapBubbledEvent("topFocus","focusin",n),v.ReactEventListener.trapBubbledEvent("topBlur","focusout",n)),o.topBlur=!0,o.topFocus=!0):h.hasOwnProperty(u)&&v.ReactEventListener.trapBubbledEvent(u,h[u],n),o[u]=!0)}},trapBubbledEvent:function(e,t,n){return v.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return v.ReactEventListener.trapCapturedEvent(e,t,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var e=document.createEvent("MouseEvent");return null!=e&&"pageX"in e},ensureScrollValueMonitoring:function(){if(void 0===o&&(o=v.supportsEventPageXY()),!o&&!d){var e=u.refreshScrollValues;v.ReactEventListener.monitorScrollValue(e),d=!0}}});t.exports=v},{107:107,110:110,144:144,17:17,51:51,90:90}],26:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r){var o=void 0===e[n];null!=t&&o&&(e[n]=a(t,!0))}var o=e(66),a=e(109),i=(e(22),e(117)),s=e(118);e(143);void 0!==n&&n.env;var u={instantiateChildren:function(e,t,n,o){if(null==e)return null;var a={};return s(e,r,a),a},updateChildren:function(e,t,n,r,s,u,l,c,p){if(t||e){var d,f;for(d in t)if(t.hasOwnProperty(d)){f=e&&e[d];var h=f&&f._currentElement,m=t[d];if(null!=f&&i(h,m))o.receiveComponent(f,m,s,c),t[d]=f;else{f&&(r[d]=o.getHostNode(f),o.unmountComponent(f,!1));var v=a(m,!0);t[d]=v;var g=o.mountComponent(v,s,u,l,c,p);n.push(g)}}for(d in e)!e.hasOwnProperty(d)||t&&t.hasOwnProperty(d)||(f=e[d],r[d]=o.getHostNode(f),o.unmountComponent(f,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];o.unmountComponent(r,t)}}};t.exports=u}).call(this,void 0)},{109:109,117:117,118:118,143:143,22:22,66:66}],27:[function(e,t,n){"use strict";var r=e(8),o=e(37),a={processChildrenUpdates:o.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup};t.exports=a},{37:37,8:8}],28:[function(e,t,n){"use strict";var r=e(113),o=(e(138),!1),a={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){o&&r("104"),a.replaceNodeWithMarkup=e.replaceNodeWithMarkup,a.processChildrenUpdates=e.processChildrenUpdates,o=!0}}};t.exports=a},{113:113,138:138}],29:[function(e,t,n){"use strict";function r(e){}function o(e){return!(!e.prototype||!e.prototype.isReactComponent)}function a(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}var i=e(113),s=e(144),u=e(121),l=e(28),c=e(120),p=e(50),d=e(57),f=(e(58),e(62)),h=e(66),m=e(131),v=(e(138),e(142)),g=e(117),y=(e(143),{ImpureClass:0,PureClass:1,StatelessFunctional:2});r.prototype.render=function(){var e=d.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return t};var _=1,C={construct:function(e){this._currentElement=e,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,n,s){this._context=s,this._mountOrder=_++,this._hostParent=t,this._hostContainerInfo=n;var l,c=this._currentElement.props,p=this._processContext(s),f=this._currentElement.type,h=e.getUpdateQueue(),v=o(f),g=this._constructComponent(v,c,p,h);v||null!=g&&null!=g.render?a(f)?this._compositeType=y.PureClass:this._compositeType=y.ImpureClass:(l=g,null===g||!1===g||u.isValidElement(g)||i("105",f.displayName||f.name||"Component"),g=new r(f),this._compositeType=y.StatelessFunctional),g.props=c,g.context=p,g.refs=m,g.updater=h,this._instance=g,d.set(g,this);var C=g.state;void 0===C&&(g.state=C=null),("object"!=typeof C||Array.isArray(C))&&i("106",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var b;return b=g.unstable_handleError?this.performInitialMountWithErrorHandling(l,t,n,e,s):this.performInitialMount(l,t,n,e,s),g.componentDidMount&&e.getReactMountReady().enqueue(g.componentDidMount,g),b},_constructComponent:function(e,t,n,r){return this._constructComponentWithoutOwner(e,t,n,r)},_constructComponentWithoutOwner:function(e,t,n,r){var o=this._currentElement.type;return e?new o(t,n,r):o(t,n,r)},performInitialMountWithErrorHandling:function(e,t,n,r,o){var a,i=r.checkpoint();try{a=this.performInitialMount(e,t,n,r,o)}catch(s){r.rollback(i),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),i=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(i),a=this.performInitialMount(e,t,n,r,o)}return a},performInitialMount:function(e,t,n,r,o){var a=this._instance;a.componentWillMount&&(a.componentWillMount(),this._pendingStateQueue&&(a.state=this._processPendingState(a.props,a.context))),void 0===e&&(e=this._renderValidatedComponent());var i=f.getType(e);this._renderedNodeType=i;var s=this._instantiateReactComponent(e,i!==f.EMPTY);return this._renderedComponent=s,h.mountComponent(s,r,t,n,this._processChildContext(o),0)},getHostNode:function(){return h.getHostNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var n=this.getName()+".componentWillUnmount()";p.invokeGuardedCallback(n,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();this._renderedComponent&&(h.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,d.remove(t)}},_maskContext:function(e){var t=this._currentElement.type,n=t.contextTypes;if(!n)return m;var r={};for(var o in n)r[o]=e[o];return r},_processContext:function(e){return this._maskContext(e)},_processChildContext:function(e){var t,n=this._currentElement.type,r=this._instance;if(r.getChildContext&&(t=r.getChildContext()),t){"object"!=typeof n.childContextTypes&&i("107",this.getName()||"ReactCompositeComponent");for(var o in t)o in n.childContextTypes||i("108",this.getName()||"ReactCompositeComponent",o);return s({},e,t)}return e},_checkContextTypes:function(e,t,n){},receiveComponent:function(e,t,n){var r=this._currentElement,o=this._context;this._pendingElement=null,this.updateComponent(t,r,e,o,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?h.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,n,r,o){var a=this._instance;null==a&&i("136",this.getName()||"ReactCompositeComponent");var s,u=!1;this._context===o?s=a.context:(s=this._processContext(o),u=!0);var l=t.props,c=n.props;t!==n&&(u=!0),u&&a.componentWillReceiveProps&&a.componentWillReceiveProps(c,s);var p=this._processPendingState(c,s),d=!0;this._pendingForceUpdate||(a.shouldComponentUpdate?d=a.shouldComponentUpdate(c,p,s):this._compositeType===y.PureClass&&(d=!v(l,c)||!v(a.state,p))),this._updateBatchNumber=null,d?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,c,p,s,e,o)):(this._currentElement=n,this._context=o,a.props=c,a.state=p,a.context=s)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,o=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(o&&1===r.length)return r[0];for(var a=s({},o?r[0]:n.state),i=o?1:0;i<r.length;i++){var u=r[i];s(a,"function"==typeof u?u.call(n,a,e,t):u)}return a},_performComponentUpdate:function(e,t,n,r,o,a){var i,s,u,l=this._instance,c=Boolean(l.componentDidUpdate);c&&(i=l.props,s=l.state,u=l.context),l.componentWillUpdate&&l.componentWillUpdate(t,n,r),this._currentElement=e,this._context=a,l.props=t,l.state=n,l.context=r,this._updateRenderedComponent(o,a),c&&o.getReactMountReady().enqueue(l.componentDidUpdate.bind(l,i,s,u),l)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,o=this._renderValidatedComponent();if(g(r,o))h.receiveComponent(n,o,e,this._processChildContext(t));else{var a=h.getHostNode(n);h.unmountComponent(n,!1);var i=f.getType(o);this._renderedNodeType=i;var s=this._instantiateReactComponent(o,i!==f.EMPTY);this._renderedComponent=s;var u=h.mountComponent(s,e,this._hostParent,this._hostContainerInfo,this._processChildContext(t),0);this._replaceNodeWithMarkup(a,u,n)}},_replaceNodeWithMarkup:function(e,t,n){l.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){return this._instance.render()},_renderValidatedComponent:function(){var e;if(this._compositeType!==y.StatelessFunctional){c.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{c.current=null}}else e=this._renderValidatedComponentWithoutOwnerOrContext();return null===e||!1===e||u.isValidElement(e)||i("109",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n&&i("110");var r=t.getPublicInstance();(n.refs===m?n.refs={}:n.refs)[e]=r},detachRef:function(e){delete this.getPublicInstance().refs[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return this._compositeType===y.StatelessFunctional?null:e},_instantiateReactComponent:null};t.exports=C},{113:113,117:117,120:120,121:121,131:131,138:138,142:142,143:143,144:144,28:28,50:50,57:57,58:58,62:62,66:66}],30:[function(e,t,n){"use strict";var r=e(33),o=e(47),a=e(60),i=e(66),s=e(71),u=e(72),l=e(96),c=e(103),p=e(114);e(143);o.inject();var d={findDOMNode:l,render:a.render,unmountComponentAtNode:a.unmountComponentAtNode,version:u,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:p};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=c(e)),e?r.getNodeFromInstance(e):null}},Mount:a,Reconciler:i});t.exports=d},{103:103,114:114,143:143,33:33,47:47,60:60,66:66,71:71,72:72,96:96}],31:[function(e,t,n){"use strict";function r(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function o(e,t){t&&(Q[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&v("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&v("60"),"object"==typeof t.dangerouslySetInnerHTML&&H in t.dangerouslySetInnerHTML||v("61")),null!=t.style&&"object"!=typeof t.style&&v("62",r(e)))}function a(e,t,n,r){if(!(r instanceof A)){var o=e._hostContainerInfo,a=o._node&&o._node.nodeType===K,s=a?o._node:o._ownerDocument;j(t,s),r.getReactMountReady().enqueue(i,{inst:e,registrationName:t,listener:n})}}function i(){var e=this;w.putListener(e.inst,e.registrationName,e.listener)}function s(){var e=this;N.postMountWrapper(e)}function u(){var e=this;O.postMountWrapper(e)}function l(){var e=this;M.postMountWrapper(e)}function c(){L.track(this)}function p(){var e=this;e._rootNodeID||v("63");var t=V(e);switch(t||v("64"),e._tag){case"iframe":case"object":e._wrapperState.listeners=[k.trapBubbledEvent("topLoad","load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in z)z.hasOwnProperty(n)&&e._wrapperState.listeners.push(k.trapBubbledEvent(n,z[n],t));break;case"source":e._wrapperState.listeners=[k.trapBubbledEvent("topError","error",t)];break;case"img":e._wrapperState.listeners=[k.trapBubbledEvent("topError","error",t),k.trapBubbledEvent("topLoad","load",t)];break;case"form":e._wrapperState.listeners=[k.trapBubbledEvent("topReset","reset",t),k.trapBubbledEvent("topSubmit","submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[k.trapBubbledEvent("topInvalid","invalid",t)]}}function d(){I.postUpdateWrapper(this)}function f(e){Z.call($,e)||(G.test(e)||v("65",e),$[e]=!0)}function h(e,t){return e.indexOf("-")>=0||null!=t.is}function m(e){var t=e.type;f(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var v=e(113),g=e(144),y=e(2),_=e(5),C=e(9),b=e(10),E=e(11),x=e(12),w=e(16),T=e(17),k=e(25),P=e(32),S=e(33),N=e(38),M=e(39),I=e(40),O=e(43),R=(e(58),e(61)),A=e(68),D=(e(130),e(95)),L=(e(138),e(110),e(142),e(108)),U=(e(119),e(143),P),F=w.deleteListener,V=S.getNodeFromInstance,j=k.listenTo,B=T.registrationNameModules,W={string:!0,number:!0},H="__html",q={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},K=11,z={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},Y={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},X={listing:!0,pre:!0,textarea:!0},Q=g({menuitem:!0},Y),G=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,$={},Z={}.hasOwnProperty,J=1;m.displayName="ReactDOMComponent",m.Mixin={mountComponent:function(e,t,n,r){this._rootNodeID=J++,this._domID=n._idCounter++,this._hostParent=t,this._hostContainerInfo=n;var a=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(p,this);break;case"input":N.mountWrapper(this,a,t),a=N.getHostProps(this,a),e.getReactMountReady().enqueue(c,this),e.getReactMountReady().enqueue(p,this);break;case"option":M.mountWrapper(this,a,t),a=M.getHostProps(this,a);break;case"select":I.mountWrapper(this,a,t),a=I.getHostProps(this,a),e.getReactMountReady().enqueue(p,this);break;case"textarea":O.mountWrapper(this,a,t),a=O.getHostProps(this,a),e.getReactMountReady().enqueue(c,this),e.getReactMountReady().enqueue(p,this)}o(this,a);var i,d;null!=t?(i=t._namespaceURI,d=t._tag):n._tag&&(i=n._namespaceURI,d=n._tag),(null==i||i===b.svg&&"foreignobject"===d)&&(i=b.html),i===b.html&&("svg"===this._tag?i=b.svg:"math"===this._tag&&(i=b.mathml)),this._namespaceURI=i;var f;if(e.useCreateElement){var h,m=n._ownerDocument;if(i===b.html)if("script"===this._tag){var v=m.createElement("div"),g=this._currentElement.type;v.innerHTML="<"+g+"></"+g+">",h=v.removeChild(v.firstChild)}else h=a.is?m.createElement(this._currentElement.type,a.is):m.createElement(this._currentElement.type);else h=m.createElementNS(i,this._currentElement.type);S.precacheNode(this,h),this._flags|=U.hasCachedChildNodes,this._hostParent||x.setAttributeForRoot(h),this._updateDOMProperties(null,a,e);var _=C(h);this._createInitialChildren(e,a,r,_),f=_}else{var E=this._createOpenTagMarkupAndPutListeners(e,a),w=this._createContentMarkup(e,a,r);f=!w&&Y[this._tag]?E+"/>":E+">"+w+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(s,this),a.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(u,this),a.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"select":case"button":a.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(l,this)}return f},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];if(null!=o)if(B.hasOwnProperty(r))o&&a(this,r,o,e);else{"style"===r&&(o&&(o=this._previousStyleCopy=g({},t.style)),o=_.createMarkupForStyles(o,this));var i=null;null!=this._tag&&h(this._tag,t)?q.hasOwnProperty(r)||(i=x.createMarkupForCustomAttribute(r,o)):i=x.createMarkupForProperty(r,o),i&&(n+=" "+i)}}return e.renderToStaticMarkup?n:(this._hostParent||(n+=" "+x.createMarkupForRoot()),n+=" "+x.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var r="",o=t.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&(r=o.__html);else{var a=W[typeof t.children]?t.children:null,i=null!=a?null:t.children;if(null!=a)r=D(a);else if(null!=i){var s=this.mountChildren(i,e,n);r=s.join("")}}return X[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(e,t,n,r){var o=t.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&C.queueHTML(r,o.__html);else{var a=W[typeof t.children]?t.children:null,i=null!=a?null:t.children;if(null!=a)""!==a&&C.queueText(r,a);else if(null!=i)for(var s=this.mountChildren(i,e,n),u=0;u<s.length;u++)C.queueChild(r,s[u])}},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,r){var a=t.props,i=this._currentElement.props;switch(this._tag){case"input":a=N.getHostProps(this,a),i=N.getHostProps(this,i);break;case"option":a=M.getHostProps(this,a),i=M.getHostProps(this,i);break;case"select":a=I.getHostProps(this,a),i=I.getHostProps(this,i);break;case"textarea":a=O.getHostProps(this,a),i=O.getHostProps(this,i)}switch(o(this,i),this._updateDOMProperties(a,i,e),this._updateDOMChildren(a,i,e,r),this._tag){case"input":N.updateWrapper(this),L.updateValueIfChanged(this);break;case"textarea":O.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(d,this)}},_updateDOMProperties:function(e,t,n){var r,o,i;for(r in e)if(!t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&null!=e[r])if("style"===r){var s=this._previousStyleCopy;for(o in s)s.hasOwnProperty(o)&&(i=i||{},i[o]="");this._previousStyleCopy=null}else B.hasOwnProperty(r)?e[r]&&F(this,r):h(this._tag,e)?q.hasOwnProperty(r)||x.deleteValueForAttribute(V(this),r):(E.properties[r]||E.isCustomAttribute(r))&&x.deleteValueForProperty(V(this),r);for(r in t){var u=t[r],l="style"===r?this._previousStyleCopy:null!=e?e[r]:void 0;if(t.hasOwnProperty(r)&&u!==l&&(null!=u||null!=l))if("style"===r)if(u?u=this._previousStyleCopy=g({},u):this._previousStyleCopy=null,l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(i=i||{},i[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(i=i||{},i[o]=u[o])}else i=u;else if(B.hasOwnProperty(r))u?a(this,r,u,n):l&&F(this,r);else if(h(this._tag,t))q.hasOwnProperty(r)||x.setValueForAttribute(V(this),r,u);else if(E.properties[r]||E.isCustomAttribute(r)){var c=V(this);null!=u?x.setValueForProperty(c,r,u):x.deleteValueForProperty(c,r)}}i&&_.setValueForStyles(V(this),i,this)},_updateDOMChildren:function(e,t,n,r){var o=W[typeof e.children]?e.children:null,a=W[typeof t.children]?t.children:null,i=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,u=null!=o?null:e.children,l=null!=a?null:t.children,c=null!=o||null!=i,p=null!=a||null!=s;null!=u&&null==l?this.updateChildren(null,n,r):c&&!p&&this.updateTextContent(""),null!=a?o!==a&&this.updateTextContent(""+a):null!=s?i!==s&&this.updateMarkup(""+s):null!=l&&this.updateChildren(l,n,r)},getHostNode:function(){return V(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"input":case"textarea":L.stopTracking(this);break;case"html":case"head":case"body":v("66",this._tag)}this.unmountChildren(e),S.uncacheNode(this),w.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return V(this)}},g(m.prototype,m.Mixin,R.Mixin),t.exports=m},{10:10,108:108,11:11,110:110,113:113,119:119,12:12,130:130,138:138,142:142,143:143,144:144,16:16,17:17,2:2,25:25,32:32,33:33,38:38,39:39,40:40,43:43,5:5,58:58,61:61,68:68,9:9,95:95}],32:[function(e,t,n){"use strict";var r={hasCachedChildNodes:1};t.exports=r},{}],33:[function(e,t,n){"use strict";function r(e,t){return 1===e.nodeType&&e.getAttribute(h)===String(t)||8===e.nodeType&&e.nodeValue===" react-text: "+t+" "||8===e.nodeType&&e.nodeValue===" react-empty: "+t+" "}function o(e){for(var t;t=e._renderedComponent;)e=t;return e}function a(e,t){var n=o(e);n._hostNode=t,t[v]=n}function i(e){var t=e._hostNode;t&&(delete t[v],e._hostNode=null)}function s(e,t){if(!(e._flags&m.hasCachedChildNodes)){var n=e._renderedChildren,i=t.firstChild;e:for(var s in n)if(n.hasOwnProperty(s)){var u=n[s],l=o(u)._domID;if(0!==l){for(;null!==i;i=i.nextSibling)if(r(i,l)){a(u,i);continue e}p("32",l)}}e._flags|=m.hasCachedChildNodes}}function u(e){if(e[v])return e[v];for(var t=[];!e[v];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,r;e&&(r=e[v]);e=t.pop())n=r,t.length&&s(r,e);return n}function l(e){var t=u(e);return null!=t&&t._hostNode===e?t:null}function c(e){if(void 0===e._hostNode&&p("33"),e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent||p("34"),e=e._hostParent;for(;t.length;e=t.pop())s(e,e._hostNode);return e._hostNode}var p=e(113),d=e(11),f=e(32),h=(e(138),d.ID_ATTRIBUTE_NAME),m=f,v="__reactInternalInstance$"+Math.random().toString(36).slice(2),g={getClosestInstanceFromNode:u,getInstanceFromNode:l,getNodeFromInstance:c,precacheChildNodes:s,precacheNode:a,uncacheNode:i};t.exports=g},{11:11,113:113,138:138,32:32}],34:[function(e,t,n){"use strict";function r(e,t){return{_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===o?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null}}var o=(e(119),9);t.exports=r},{119:119}],35:[function(e,t,n){"use strict";var r=e(144),o=e(9),a=e(33),i=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};r(i.prototype,{mountComponent:function(e,t,n,r){var i=n._idCounter++;this._domID=i,this._hostParent=t,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(e.useCreateElement){var u=n._ownerDocument,l=u.createComment(s);return a.precacheNode(this,l),o(l)}return e.renderToStaticMarkup?"":"\x3c!--"+s+"--\x3e"},receiveComponent:function(){},getHostNode:function(){return a.getNodeFromInstance(this)},unmountComponent:function(){a.uncacheNode(this)}}),t.exports=i},{144:144,33:33,9:9}],36:[function(e,t,n){"use strict";var r={useCreateElement:!0,useFiber:!1};t.exports=r},{}],37:[function(e,t,n){"use strict";var r=e(8),o=e(33),a={dangerouslyProcessChildrenUpdates:function(e,t){var n=o.getNodeFromInstance(e);r.processUpdates(n,t)}};t.exports=a},{33:33,8:8}],38:[function(e,t,n){"use strict";function r(){this._rootNodeID&&d.updateWrapper(this)}function o(e){return"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}function a(e){var t=this._currentElement.props,n=l.executeOnChange(t,e);p.asap(r,this);var o=t.name;if("radio"===t.type&&null!=o){for(var a=c.getNodeFromInstance(this),s=a;s.parentNode;)s=s.parentNode;for(var u=s.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),d=0;d<u.length;d++){var f=u[d];if(f!==a&&f.form===a.form){var h=c.getInstanceFromNode(f);h||i("90"),p.asap(r,h)}}}return n}var i=e(113),s=e(144),u=e(12),l=e(23),c=e(33),p=e(71),d=(e(138),e(143),{getHostProps:function(e,t){var n=l.getValue(t),r=l.getChecked(t);return s({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,listeners:null,onChange:a.bind(e),controlled:o(t)}},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&u.setValueForProperty(c.getNodeFromInstance(e),"checked",n||!1);var r=c.getNodeFromInstance(e),o=l.getValue(t);if(null!=o)if(0===o&&""===r.value)r.value="0";else if("number"===t.type){var a=parseFloat(r.value,10)||0;(o!=a||o==a&&r.value!=o)&&(r.value=""+o)}else r.value!==""+o&&(r.value=""+o);else null==t.value&&null!=t.defaultValue&&r.defaultValue!==""+t.defaultValue&&(r.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(r.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,n=c.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}});t.exports=d},{113:113,12:12,138:138,143:143,144:144,23:23,33:33,71:71}],39:[function(e,t,n){"use strict";function r(e){var t="";return a.Children.forEach(e,function(e){null!=e&&("string"==typeof e||"number"==typeof e?t+=e:u||(u=!0))}),t}var o=e(144),a=e(121),i=e(33),s=e(40),u=(e(143),!1),l={mountWrapper:function(e,t,n){var o=null;if(null!=n){var a=n;"optgroup"===a._tag&&(a=a._hostParent),null!=a&&"select"===a._tag&&(o=s.getSelectValueContext(a))}var i=null;if(null!=o){var u;if(u=null!=t.value?t.value+"":r(t.children),i=!1,Array.isArray(o)){for(var l=0;l<o.length;l++)if(""+o[l]===u){i=!0;break}}else i=""+o===u}e._wrapperState={selected:i}},postMountWrapper:function(e){var t=e._currentElement.props;null!=t.value&&i.getNodeFromInstance(e).setAttribute("value",t.value)},getHostProps:function(e,t){var n=o({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var a=r(t.children);return a&&(n.children=a),n}};t.exports=l},{121:121,143:143,144:144,33:33,40:40}],40:[function(e,t,n){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=s.getValue(e);null!=t&&o(this,Boolean(e.multiple),t)}}function o(e,t,n){var r,o,a=u.getNodeFromInstance(e).options;if(t){for(r={},o=0;o<n.length;o++)r[""+n[o]]=!0;for(o=0;o<a.length;o++){var i=r.hasOwnProperty(a[o].value);a[o].selected!==i&&(a[o].selected=i)}}else{for(r=""+n,o=0;o<a.length;o++)if(a[o].value===r)return void(a[o].selected=!0);a.length&&(a[0].selected=!0)}}function a(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),l.asap(r,this),n}var i=e(144),s=e(23),u=e(33),l=e(71),c=(e(143),!1),p={getHostProps:function(e,t){return i({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=s.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:a.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||c||(c=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var r=s.getValue(t);null!=r?(e._wrapperState.pendingUpdate=!1,o(e,Boolean(t.multiple),r)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?o(e,Boolean(t.multiple),t.defaultValue):o(e,Boolean(t.multiple),t.multiple?[]:""))}};t.exports=p},{143:143,144:144,23:23,33:33,71:71}],41:[function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function o(e){var t=document.selection,n=t.createRange(),r=n.text.length,o=n.duplicate();o.moveToElementText(e),o.setEndPoint("EndToStart",n);var a=o.text.length;return{start:a,end:a+r}}function a(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,o=t.anchorOffset,a=t.focusNode,i=t.focusOffset,s=t.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(e){return null}var u=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),l=u?0:s.toString().length,c=s.cloneRange();c.selectNodeContents(e),c.setEnd(s.startContainer,s.startOffset);var p=r(c.startContainer,c.startOffset,c.endContainer,c.endOffset),d=p?0:c.toString().length,f=d+l,h=document.createRange();h.setStart(n,o),h.setEnd(a,i);var m=h.collapsed;return{start:m?f:d,end:m?d:f}}function i(e,t){var n,r,o=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),o.moveToElementText(e),o.moveStart("character",n),o.setEndPoint("EndToStart",o),o.moveEnd("character",r-n),o.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),r=e[c()].length,o=Math.min(t.start,r),a=void 0===t.end?o:Math.min(t.end,r);if(!n.extend&&o>a){var i=a;a=o,o=i}var s=l(e,o),u=l(e,a);if(s&&u){var p=document.createRange();p.setStart(s.node,s.offset),n.removeAllRanges(),o>a?(n.addRange(p),n.extend(u.node,u.offset)):(p.setEnd(u.node,u.offset),n.addRange(p))}}}var u=e(124),l=e(105),c=e(106),p=u.canUseDOM&&"selection"in document&&!("getSelection"in window),d={getOffsets:p?o:a,
setOffsets:p?i:s};t.exports=d},{105:105,106:106,124:124}],42:[function(e,t,n){"use strict";var r=e(113),o=e(144),a=e(8),i=e(9),s=e(33),u=e(95),l=(e(138),e(119),function(e){this._currentElement=e,this._stringText=""+e,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});o(l.prototype,{mountComponent:function(e,t,n,r){var o=n._idCounter++,a=" react-text: "+o+" ";if(this._domID=o,this._hostParent=t,e.useCreateElement){var l=n._ownerDocument,c=l.createComment(a),p=l.createComment(" /react-text "),d=i(l.createDocumentFragment());return i.queueChild(d,i(c)),this._stringText&&i.queueChild(d,i(l.createTextNode(this._stringText))),i.queueChild(d,i(p)),s.precacheNode(this,c),this._closingComment=p,d}var f=u(this._stringText);return e.renderToStaticMarkup?f:"\x3c!--"+a+"--\x3e"+f+"\x3c!-- /react-text --\x3e"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();a.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=s.getNodeFromInstance(this),n=t.nextSibling;;){if(null==n&&r("67",this._domID),8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),t.exports=l},{113:113,119:119,138:138,144:144,33:33,8:8,9:9,95:95}],43:[function(e,t,n){"use strict";function r(){this._rootNodeID&&c.updateWrapper(this)}function o(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);return l.asap(r,this),n}var a=e(113),i=e(144),s=e(23),u=e(33),l=e(71),c=(e(138),e(143),{getHostProps:function(e,t){return null!=t.dangerouslySetInnerHTML&&a("91"),i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=s.getValue(t),r=n;if(null==n){var i=t.defaultValue,u=t.children;null!=u&&(null!=i&&a("92"),Array.isArray(u)&&(u.length<=1||a("93"),u=u[0]),i=""+u),null==i&&(i=""),r=i}e._wrapperState={initialValue:""+r,listeners:null,onChange:o.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=u.getNodeFromInstance(e),r=s.getValue(t);if(null!=r){var o=""+r;o!==n.value&&(n.value=o),null==t.defaultValue&&(n.defaultValue=o)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=u.getNodeFromInstance(e),n=t.textContent;n===e._wrapperState.initialValue&&(t.value=n)}});t.exports=c},{113:113,138:138,143:143,144:144,23:23,33:33,71:71}],44:[function(e,t,n){"use strict";function r(e,t){"_hostNode"in e||u("33"),"_hostNode"in t||u("33");for(var n=0,r=e;r;r=r._hostParent)n++;for(var o=0,a=t;a;a=a._hostParent)o++;for(;n-o>0;)e=e._hostParent,n--;for(;o-n>0;)t=t._hostParent,o--;for(var i=n;i--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}function o(e,t){"_hostNode"in e||u("35"),"_hostNode"in t||u("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1}function a(e){return"_hostNode"in e||u("36"),e._hostParent}function i(e,t,n){for(var r=[];e;)r.push(e),e=e._hostParent;var o;for(o=r.length;o-- >0;)t(r[o],"captured",n);for(o=0;o<r.length;o++)t(r[o],"bubbled",n)}function s(e,t,n,o,a){for(var i=e&&t?r(e,t):null,s=[];e&&e!==i;)s.push(e),e=e._hostParent;for(var u=[];t&&t!==i;)u.push(t),t=t._hostParent;var l;for(l=0;l<s.length;l++)n(s[l],"bubbled",o);for(l=u.length;l-- >0;)n(u[l],"captured",a)}var u=e(113);e(138);t.exports={isAncestor:o,getLowestCommonAncestor:r,getParentInstance:a,traverseTwoPhase:i,traverseEnterLeave:s}},{113:113,138:138}],45:[function(e,t,n){"use strict";var r=e(121),o=e(30),a=o;r.addons&&(r.__SECRET_INJECTED_REACT_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a),t.exports=a},{121:121,30:30}],46:[function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var o=e(144),a=e(71),i=e(89),s=e(130),u={initialize:s,close:function(){d.isBatchingUpdates=!1}},l={initialize:s,close:a.flushBatchedUpdates.bind(a)},c=[l,u];o(r.prototype,i,{getTransactionWrappers:function(){return c}});var p=new r,d={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,o,a){var i=d.isBatchingUpdates;return d.isBatchingUpdates=!0,i?e(t,n,r,o,a):p.perform(e,null,t,n,r,o,a)}};t.exports=d},{130:130,144:144,71:71,89:89}],47:[function(e,t,n){"use strict";function r(){x||(x=!0,y.EventEmitter.injectReactEventListener(g),y.EventPluginHub.injectEventPluginOrder(s),y.EventPluginUtils.injectComponentTree(d),y.EventPluginUtils.injectTreeTraversal(h),y.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:E,EnterLeaveEventPlugin:u,ChangeEventPlugin:i,SelectEventPlugin:b,BeforeInputEventPlugin:a}),y.HostComponent.injectGenericComponentClass(p),y.HostComponent.injectTextComponentClass(m),y.DOMProperty.injectDOMPropertyConfig(o),y.DOMProperty.injectDOMPropertyConfig(l),y.DOMProperty.injectDOMPropertyConfig(C),y.EmptyComponent.injectEmptyComponentFactory(function(e){return new f(e)}),y.Updates.injectReconcileTransaction(_),y.Updates.injectBatchingStrategy(v),y.Component.injectEnvironment(c))}var o=e(1),a=e(3),i=e(7),s=e(14),u=e(15),l=e(21),c=e(27),p=e(31),d=e(33),f=e(35),h=e(44),m=e(42),v=e(46),g=e(52),y=e(55),_=e(65),C=e(73),b=e(74),E=e(75),x=!1;t.exports={inject:r}},{1:1,14:14,15:15,21:21,27:27,3:3,31:31,33:33,35:35,42:42,44:44,46:46,52:52,55:55,65:65,7:7,73:73,74:74,75:75}],48:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;t.exports=r},{}],49:[function(e,t,n){"use strict";var r,o={injectEmptyComponentFactory:function(e){r=e}},a={create:function(e){return r(e)}};a.injection=o,t.exports=a},{}],50:[function(e,t,n){"use strict";function r(e,t,n){try{t(n)}catch(e){null===o&&(o=e)}}var o=null,a={invokeGuardedCallback:r,invokeGuardedCallbackWithCatch:r,rethrowCaughtError:function(){if(o){var e=o;throw o=null,e}}};t.exports=a},{}],51:[function(e,t,n){"use strict";function r(e){o.enqueueEvents(e),o.processEventQueue(!1)}var o=e(16),a={handleTopLevel:function(e,t,n,a){r(o.extractEvents(e,t,n,a))}};t.exports=a},{16:16}],52:[function(e,t,n){"use strict";function r(e){for(;e._hostParent;)e=e._hostParent;var t=p.getNodeFromInstance(e),n=t.parentNode;return p.getClosestInstanceFromNode(n)}function o(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function a(e){var t=f(e.nativeEvent),n=p.getClosestInstanceFromNode(t),o=n;do{e.ancestors.push(o),o=o&&r(o)}while(o);for(var a=0;a<e.ancestors.length;a++)n=e.ancestors[a],m._handleTopLevel(e.topLevelType,n,e.nativeEvent,f(e.nativeEvent))}function i(e){e(h(window))}var s=e(144),u=e(123),l=e(124),c=e(24),p=e(33),d=e(71),f=e(102),h=e(135);s(o.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(o,c.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){return n?u.listen(n,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){return n?u.capture(n,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=i.bind(null,e);u.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=o.getPooled(e,t);try{d.batchedUpdates(a,n)}finally{o.release(n)}}}};t.exports=m},{102:102,123:123,124:124,135:135,144:144,24:24,33:33,71:71}],53:[function(e,t,n){"use strict";var r={logTopLevelRenders:!1};t.exports=r},{}],54:[function(e,t,n){"use strict";function r(e){return s||i("111",e.type),new s(e)}function o(e){return new u(e)}function a(e){return e instanceof u}var i=e(113),s=(e(138),null),u=null,l={injectGenericComponentClass:function(e){s=e},injectTextComponentClass:function(e){u=e}},c={createInternalComponent:r,createInstanceForText:o,isTextComponent:a,injection:l};t.exports=c},{113:113,138:138}],55:[function(e,t,n){"use strict";var r=e(11),o=e(16),a=e(18),i=e(28),s=e(49),u=e(25),l=e(54),c=e(71),p={Component:i.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:o.injection,EventPluginUtils:a.injection,EventEmitter:u.injection,HostComponent:l.injection,Updates:c.injection};t.exports=p},{11:11,16:16,18:18,25:25,28:28,49:49,54:54,71:71}],56:[function(e,t,n){"use strict";function r(e){return a(document.documentElement,e)}var o=e(41),a=e(127),i=e(132),s=e(133),u={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:u.hasSelectionCapabilities(e)?u.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,o=e.selectionRange;t!==n&&r(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,o),i(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=o.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if(void 0===r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var a=e.createTextRange();a.collapse(!0),a.moveStart("character",n),a.moveEnd("character",r-n),a.select()}else o.setOffsets(e,t)}};t.exports=u},{127:127,132:132,133:133,41:41}],57:[function(e,t,n){"use strict";var r={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};t.exports=r},{}],58:[function(e,t,n){"use strict";t.exports={debugTool:null}},{}],59:[function(e,t,n){"use strict";var r=e(92),o=/\/?>/,a=/^<\!\-\-/,i={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return a.test(e)?e:e.replace(o," "+i.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(i.CHECKSUM_ATTR_NAME);return n=n&&parseInt(n,10),r(e)===n}};t.exports=i},{92:92}],60:[function(e,t,n){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function o(e){return e?e.nodeType===A?e.documentElement:e.firstChild:null}function a(e){return e.getAttribute&&e.getAttribute(I)||""}function i(e,t,n,r,o){var a;if(b.logTopLevelRenders){var i=e._currentElement.props.child,s=i.type;a="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(a)}var u=w.mountComponent(e,n,null,_(e,t),o,0);a&&console.timeEnd(a),e._renderedComponent._topLevelWrapper=e,V._mountImageIntoNode(u,t,e,r,n)}function s(e,t,n,r){var o=k.ReactReconcileTransaction.getPooled(!n&&C.useCreateElement);o.perform(i,null,e,t,o,n,r),k.ReactReconcileTransaction.release(o)}function u(e,t,n){for(w.unmountComponent(e,n),t.nodeType===A&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function l(e){var t=o(e);if(t){var n=y.getInstanceFromNode(t);return!(!n||!n._hostParent)}}function c(e){return!(!e||e.nodeType!==R&&e.nodeType!==A&&e.nodeType!==D)}function p(e){var t=o(e),n=t&&y.getInstanceFromNode(t);return n&&!n._hostParent?n:null}function d(e){var t=p(e);return t?t._hostContainerInfo._topLevelWrapper:null}var f=e(113),h=e(9),m=e(11),v=e(121),g=e(25),y=(e(120),e(33)),_=e(34),C=e(36),b=e(53),E=e(57),x=(e(58),e(59)),w=e(66),T=e(70),k=e(71),P=e(131),S=e(109),N=(e(138),e(115)),M=e(117),I=(e(143),m.ID_ATTRIBUTE_NAME),O=m.ROOT_ATTRIBUTE_NAME,R=1,A=9,D=11,L={},U=1,F=function(){this.rootID=U++};F.prototype.isReactComponent={},F.prototype.render=function(){return this.props.child},F.isReactTopLevelWrapper=!0;var V={TopLevelWrapper:F,_instancesByReactRootID:L,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r,o){return V.scrollMonitor(r,function(){T.enqueueElementInternal(e,t,n),o&&T.enqueueCallbackInternal(e,o)}),e},_renderNewRootComponent:function(e,t,n,r){c(t)||f("37"),g.ensureScrollValueMonitoring();var o=S(e,!1);k.batchedUpdates(s,o,t,n,r);var a=o._instance.rootID;return L[a]=o,o},renderSubtreeIntoContainer:function(e,t,n,r){return null!=e&&E.has(e)||f("38"),V._renderSubtreeIntoContainer(e,t,n,r)},_renderSubtreeIntoContainer:function(e,t,n,r){T.validateCallback(r,"ReactDOM.render"),v.isValidElement(t)||f("39","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var i,s=v.createElement(F,{child:t});if(e){var u=E.get(e);i=u._processChildContext(u._context)}else i=P;var c=d(n);if(c){var p=c._currentElement,h=p.props.child;if(M(h,t)){var m=c._renderedComponent.getPublicInstance(),g=r&&function(){r.call(m)};return V._updateRootComponent(c,s,i,n,g),m}V.unmountComponentAtNode(n)}var y=o(n),_=y&&!!a(y),C=l(n),b=_&&!c&&!C,x=V._renderNewRootComponent(s,n,b,i)._renderedComponent.getPublicInstance();return r&&r.call(x),x},render:function(e,t,n){return V._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){c(e)||f("40");var t=d(e);return t?(delete L[t._instance.rootID],k.batchedUpdates(u,t,e,!1),!0):(l(e),1===e.nodeType&&e.hasAttribute(O),!1)},_mountImageIntoNode:function(e,t,n,a,i){if(c(t)||f("41"),a){var s=o(t);if(x.canReuseMarkup(e,s))return void y.precacheNode(n,s);var u=s.getAttribute(x.CHECKSUM_ATTR_NAME);s.removeAttribute(x.CHECKSUM_ATTR_NAME);var l=s.outerHTML;s.setAttribute(x.CHECKSUM_ATTR_NAME,u);var p=e,d=r(p,l),m=" (client) "+p.substring(d-20,d+20)+"\n (server) "+l.substring(d-20,d+20);t.nodeType===A&&f("42",m)}if(t.nodeType===A&&f("43"),i.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);h.insertTreeBefore(t,e,null)}else N(t,e),y.precacheNode(n,t.firstChild)}};t.exports=V},{109:109,11:11,113:113,115:115,117:117,120:120,121:121,131:131,138:138,143:143,25:25,33:33,34:34,36:36,53:53,57:57,58:58,59:59,66:66,70:70,71:71,9:9}],61:[function(e,t,n){"use strict";function r(e,t,n){return{type:"INSERT_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}function o(e,t,n){return{type:"MOVE_EXISTING",content:null,fromIndex:e._mountIndex,fromNode:d.getHostNode(e),toIndex:n,afterNode:t}}function a(e,t){return{type:"REMOVE_NODE",content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}function i(e){return{type:"SET_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(e){return{type:"TEXT_CONTENT",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function u(e,t){return t&&(e=e||[],e.push(t)),e}function l(e,t){p.processChildrenUpdates(e,t)}var c=e(113),p=e(28),d=(e(57),e(58),e(120),e(66)),f=e(26),h=(e(130),e(97)),m=(e(138),{Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return f.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,r,o,a){var i;return i=h(t,0),f.updateChildren(e,i,n,r,o,this,this._hostContainerInfo,a,0),i},mountChildren:function(e,t,n){var r=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=r;var o=[],a=0;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i],u=d.mountComponent(s,t,this,this._hostContainerInfo,n,0);s._mountIndex=a++,o.push(u)}return o},updateTextContent:function(e){var t=this._renderedChildren;f.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");l(this,[s(e)])},updateMarkup:function(e){var t=this._renderedChildren;f.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");l(this,[i(e)])},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,n){var r=this._renderedChildren,o={},a=[],i=this._reconcilerUpdateChildren(r,e,a,o,t,n);if(i||r){var s,c=null,p=0,f=0,h=0,m=null;for(s in i)if(i.hasOwnProperty(s)){var v=r&&r[s],g=i[s];v===g?(c=u(c,this.moveChild(v,m,p,f)),f=Math.max(v._mountIndex,f),v._mountIndex=p):(v&&(f=Math.max(v._mountIndex,f)),c=u(c,this._mountChildAtIndex(g,a[h],m,p,t,n)),h++),p++,m=d.getHostNode(g)}for(s in o)o.hasOwnProperty(s)&&(c=u(c,this._unmountChild(r[s],o[s])));c&&l(this,c),this._renderedChildren=i}},unmountChildren:function(e){var t=this._renderedChildren;f.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,r){if(e._mountIndex<r)return o(e,t,n)},createChild:function(e,t,n){return r(n,t,e._mountIndex)},removeChild:function(e,t){return a(e,t)},_mountChildAtIndex:function(e,t,n,r,o,a){return e._mountIndex=r,this.createChild(e,n,t)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}});t.exports=m},{113:113,120:120,130:130,138:138,26:26,28:28,57:57,58:58,66:66,97:97}],62:[function(e,t,n){"use strict";var r=e(113),o=e(121),a=(e(138),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||!1===e?a.EMPTY:o.isValidElement(e)?"function"==typeof e.type?a.COMPOSITE:a.HOST:void r("26",e)}});t.exports=a},{113:113,121:121,138:138}],63:[function(e,t,n){"use strict";function r(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)}var o=e(113),a=(e(138),{addComponentAsRefTo:function(e,t,n){r(n)||o("119"),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(n)||o("120");var a=n.getPublicInstance();a&&a.refs[t]===e.getPublicInstance()&&n.detachRef(t)}});t.exports=a},{113:113,138:138}],64:[function(e,t,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],65:[function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=a.getPooled(null),this.useCreateElement=e}var o=e(144),a=e(6),i=e(24),s=e(25),u=e(56),l=(e(58),e(89)),c=e(70),p={initialize:u.getSelectionInformation,close:u.restoreSelection},d={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},f={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},h=[p,d,f],m={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return c},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){a.release(this.reactMountReady),this.reactMountReady=null}};o(r.prototype,l,m),i.addPoolingTo(r),t.exports=r},{144:144,24:24,25:25,56:56,58:58,6:6,70:70,89:89}],66:[function(e,t,n){"use strict";function r(){o.attachRefs(this,this._currentElement)}var o=e(67),a=(e(58),e(143),{mountComponent:function(e,t,n,o,a,i){var s=e.mountComponent(t,n,o,a,i);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(r,e),s},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){o.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,n,a){var i=e._currentElement;if(t!==i||a!==e._context){var s=o.shouldUpdateRefs(i,t);s&&o.detachRefs(e,i),e.receiveComponent(t,n,a),s&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t,n){e._updateBatchNumber===n&&e.performUpdateIfNecessary(t)}});t.exports=a},{143:143,58:58,67:67}],67:[function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e?e(t.getPublicInstance()):a.addComponentAsRefTo(t,e,n)}function o(e,t,n){"function"==typeof e?e(null):a.removeComponentAsRefFrom(t,e,n)}var a=e(63),i={};i.attachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&r(n,e,t._owner)}},i.shouldUpdateRefs=function(e,t){var n=null,r=null;null!==e&&"object"==typeof e&&(n=e.ref,r=e._owner);var o=null,a=null;return null!==t&&"object"==typeof t&&(o=t.ref,a=t._owner),n!==o||"string"==typeof o&&a!==r},i.detachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&o(n,e,t._owner)}},t.exports=i},{63:63}],68:[function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new s(this)}var o=e(144),a=e(24),i=e(89),s=(e(58),e(69)),u=[],l={enqueue:function(){}},c={getTransactionWrappers:function(){return u},getReactMountReady:function(){return l},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};o(r.prototype,i,c),a.addPoolingTo(r),t.exports=r},{144:144,24:24,58:58,69:69,89:89}],69:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e(70),a=(e(143),function(){function e(t){r(this,e),this.transaction=t}return e.prototype.isMounted=function(e){return!1},e.prototype.enqueueCallback=function(e,t,n){this.transaction.isInTransaction()&&o.enqueueCallback(e,t,n)},e.prototype.enqueueForceUpdate=function(e){this.transaction.isInTransaction()&&o.enqueueForceUpdate(e)},e.prototype.enqueueReplaceState=function(e,t){this.transaction.isInTransaction()&&o.enqueueReplaceState(e,t)},e.prototype.enqueueSetState=function(e,t){this.transaction.isInTransaction()&&o.enqueueSetState(e,t)},e}());t.exports=a},{143:143,70:70}],70:[function(e,t,n){"use strict";function r(e){u.enqueueUpdate(e)}function o(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,r=Object.keys(e);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}function a(e,t){var n=s.get(e);return n||null}var i=e(113),s=(e(120),e(57)),u=(e(58),e(71)),l=(e(138),e(143),{isMounted:function(e){var t=s.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,n){l.validateCallback(t,n);var o=a(e);if(!o)return null;o._pendingCallbacks?o._pendingCallbacks.push(t):o._pendingCallbacks=[t],r(o)},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],r(e)},enqueueForceUpdate:function(e){var t=a(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t,n){var o=a(e,"replaceState");o&&(o._pendingStateQueue=[t],o._pendingReplaceState=!0,void 0!==n&&null!==n&&(l.validateCallback(n,"replaceState"),o._pendingCallbacks?o._pendingCallbacks.push(n):o._pendingCallbacks=[n]),r(o))},enqueueSetState:function(e,t){var n=a(e,"setState");n&&((n._pendingStateQueue||(n._pendingStateQueue=[])).push(t),r(n))},enqueueElementInternal:function(e,t,n){e._pendingElement=t,e._context=n,r(e)},validateCallback:function(e,t){e&&"function"!=typeof e&&i("122",t,o(e))}});t.exports=l},{113:113,120:120,138:138,143:143,57:57,58:58,71:71}],71:[function(e,t,n){"use strict";function r(){S.ReactReconcileTransaction&&E||c("123")}function o(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=d.getPooled(),this.reconcileTransaction=S.ReactReconcileTransaction.getPooled(!0)}function a(e,t,n,o,a,i){return r(),E.batchedUpdates(e,t,n,o,a,i)}function i(e,t){return e._mountOrder-t._mountOrder}function s(e){var t=e.dirtyComponentsLength;t!==y.length&&c("124",t,y.length),y.sort(i),_++;for(var n=0;n<t;n++){var r=y[n],o=r._pendingCallbacks;r._pendingCallbacks=null;var a;if(h.logTopLevelRenders){var s=r;r._currentElement.type.isReactTopLevelWrapper&&(s=r._renderedComponent),a="React update: "+s.getName(),console.time(a)}if(m.performUpdateIfNecessary(r,e.reconcileTransaction,_),a&&console.timeEnd(a),o)for(var u=0;u<o.length;u++)e.callbackQueue.enqueue(o[u],r.getPublicInstance())}}function u(e){if(r(),!E.isBatchingUpdates)return void E.batchedUpdates(u,e);y.push(e),null==e._updateBatchNumber&&(e._updateBatchNumber=_+1)}function l(e,t){g(E.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),C.enqueue(e,t),b=!0}var c=e(113),p=e(144),d=e(6),f=e(24),h=e(53),m=e(66),v=e(89),g=e(138),y=[],_=0,C=d.getPooled(),b=!1,E=null,x={initialize:function(){this.dirtyComponentsLength=y.length},close:function(){this.dirtyComponentsLength!==y.length?(y.splice(0,this.dirtyComponentsLength),k()):y.length=0}},w={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},T=[x,w];p(o.prototype,v,{getTransactionWrappers:function(){return T},destructor:function(){this.dirtyComponentsLength=null,d.release(this.callbackQueue),this.callbackQueue=null,S.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return v.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),f.addPoolingTo(o);var k=function(){for(;y.length||b;){if(y.length){var e=o.getPooled();e.perform(s,null,e),o.release(e)}if(b){b=!1;var t=C;C=d.getPooled(),t.notifyAll(),d.release(t)}}},P={injectReconcileTransaction:function(e){e||c("126"),S.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e||c("127"),"function"!=typeof e.batchedUpdates&&c("128"),"boolean"!=typeof e.isBatchingUpdates&&c("129"),E=e}},S={ReactReconcileTransaction:null,batchedUpdates:a,enqueueUpdate:u,flushBatchedUpdates:k,injection:P,asap:l};t.exports=S},{113:113,138:138,144:144,24:24,53:53,6:6,66:66,89:89}],72:[function(e,t,n){"use strict";t.exports="15.6.2"},{}],73:[function(e,t,n){"use strict";var r={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},o={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},a={Properties:{},DOMAttributeNamespaces:{xlinkActuate:r.xlink,xlinkArcrole:r.xlink,xlinkHref:r.xlink,xlinkRole:r.xlink,xlinkShow:r.xlink,xlinkTitle:r.xlink,xlinkType:r.xlink,xmlBase:r.xml,xmlLang:r.xml,xmlSpace:r.xml},DOMAttributeNames:{}};Object.keys(o).forEach(function(e){a.Properties[e]=0,o[e]&&(a.DOMAttributeNames[e]=o[e])}),t.exports=a},{}],74:[function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&u.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function o(e,t){if(y||null==m||m!==c())return null;var n=r(m);if(!g||!d(g,n)){g=n;var o=l.getPooled(h.select,v,e,t);return o.type="select",o.target=m,a.accumulateTwoPhaseDispatches(o),o}return null}var a=e(19),i=e(124),s=e(33),u=e(56),l=e(80),c=e(133),p=e(111),d=e(142),f=i.canUseDOM&&"documentMode"in document&&document.documentMode<=11,h={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},
dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},m=null,v=null,g=null,y=!1,_=!1,C={eventTypes:h,extractEvents:function(e,t,n,r){if(!_)return null;var a=t?s.getNodeFromInstance(t):window;switch(e){case"topFocus":(p(a)||"true"===a.contentEditable)&&(m=a,v=t,g=null);break;case"topBlur":m=null,v=null,g=null;break;case"topMouseDown":y=!0;break;case"topContextMenu":case"topMouseUp":return y=!1,o(n,r);case"topSelectionChange":if(f)break;case"topKeyDown":case"topKeyUp":return o(n,r)}return null},didPutListener:function(e,t,n){"onSelect"===t&&(_=!0)}};t.exports=C},{111:111,124:124,133:133,142:142,19:19,33:33,56:56,80:80}],75:[function(e,t,n){"use strict";function r(e){return"."+e._rootNodeID}function o(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}var a=e(113),i=e(123),s=e(19),u=e(33),l=e(76),c=e(77),p=e(80),d=e(81),f=e(83),h=e(84),m=e(79),v=e(85),g=e(86),y=e(87),_=e(88),C=e(130),b=e(99),E=(e(138),{}),x={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t,r="top"+t,o={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r]};E[e]=o,x[r]=o});var w={},T={eventTypes:E,extractEvents:function(e,t,n,r){var o=x[e];if(!o)return null;var i;switch(e){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":i=p;break;case"topKeyPress":if(0===b(n))return null;case"topKeyDown":case"topKeyUp":i=f;break;case"topBlur":case"topFocus":i=d;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":i=h;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":i=m;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":i=v;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":i=l;break;case"topTransitionEnd":i=g;break;case"topScroll":i=y;break;case"topWheel":i=_;break;case"topCopy":case"topCut":case"topPaste":i=c}i||a("86",e);var u=i.getPooled(o,t,n,r);return s.accumulateTwoPhaseDispatches(u),u},didPutListener:function(e,t,n){if("onClick"===t&&!o(e._tag)){var a=r(e),s=u.getNodeFromInstance(e);w[a]||(w[a]=i.listen(s,"click",C))}},willDeleteListener:function(e,t){if("onClick"===t&&!o(e._tag)){var n=r(e);w[n].remove(),delete w[n]}}};t.exports=T},{113:113,123:123,130:130,138:138,19:19,33:33,76:76,77:77,79:79,80:80,81:81,83:83,84:84,85:85,86:86,87:87,88:88,99:99}],76:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(80),a={animationName:null,elapsedTime:null,pseudoElement:null};o.augmentClass(r,a),t.exports=r},{80:80}],77:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(80),a={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};o.augmentClass(r,a),t.exports=r},{80:80}],78:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(80),a={data:null};o.augmentClass(r,a),t.exports=r},{80:80}],79:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(84),a={dataTransfer:null};o.augmentClass(r,a),t.exports=r},{84:84}],80:[function(e,t,n){"use strict";function r(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var o=this.constructor.Interface;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];s?this[a]=s(n):"target"===a?this.target=r:this[a]=n[a]}var u=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;return this.isDefaultPrevented=u?i.thatReturnsTrue:i.thatReturnsFalse,this.isPropagationStopped=i.thatReturnsFalse,this}var o=e(144),a=e(24),i=e(130),s=(e(143),["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),u={type:null,target:null,currentTarget:i.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};o(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=i.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=i.thatReturnsTrue)},persist:function(){this.isPersistent=i.thatReturnsTrue},isPersistent:i.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),r.Interface=u,r.augmentClass=function(e,t){var n=this,r=function(){};r.prototype=n.prototype;var i=new r;o(i,e.prototype),e.prototype=i,e.prototype.constructor=e,e.Interface=o({},n.Interface,t),e.augmentClass=n.augmentClass,a.addPoolingTo(e,a.fourArgumentPooler)},a.addPoolingTo(r,a.fourArgumentPooler),t.exports=r},{130:130,143:143,144:144,24:24}],81:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(87),a={relatedTarget:null};o.augmentClass(r,a),t.exports=r},{87:87}],82:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(80),a={data:null};o.augmentClass(r,a),t.exports=r},{80:80}],83:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(87),a=e(99),i=e(100),s=e(101),u={key:i,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?a(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?a(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};o.augmentClass(r,u),t.exports=r},{100:100,101:101,87:87,99:99}],84:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(87),a=e(90),i=e(101),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:i,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+a.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+a.currentScrollTop}};o.augmentClass(r,s),t.exports=r},{101:101,87:87,90:90}],85:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(87),a=e(101),i={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:a};o.augmentClass(r,i),t.exports=r},{101:101,87:87}],86:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(80),a={propertyName:null,elapsedTime:null,pseudoElement:null};o.augmentClass(r,a),t.exports=r},{80:80}],87:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(80),a=e(102),i={view:function(e){if(e.view)return e.view;var t=a(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};o.augmentClass(r,i),t.exports=r},{102:102,80:80}],88:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(84),a={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};o.augmentClass(r,a),t.exports=r},{84:84}],89:[function(e,t,n){"use strict";var r=e(113),o=(e(138),{}),a={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,o,a,i,s,u){this.isInTransaction()&&r("27");var l,c;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),c=e.call(t,n,o,a,i,s,u),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=o,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o)try{this.initializeAll(n+1)}catch(e){}}}},closeAll:function(e){this.isInTransaction()||r("28");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var a,i=t[n],s=this.wrapperInitData[n];try{a=!0,s!==o&&i.close&&i.close.call(this,s),a=!1}finally{if(a)try{this.closeAll(n+1)}catch(e){}}}this.wrapperInitData.length=0}};t.exports=a},{113:113,138:138}],90:[function(e,t,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};t.exports=r},{}],91:[function(e,t,n){"use strict";function r(e,t){return null==t&&o("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}var o=e(113);e(138);t.exports=r},{113:113,138:138}],92:[function(e,t,n){"use strict";function r(e){for(var t=1,n=0,r=0,a=e.length,i=-4&a;r<i;){for(var s=Math.min(r+4096,i);r<s;r+=4)n+=(t+=e.charCodeAt(r))+(t+=e.charCodeAt(r+1))+(t+=e.charCodeAt(r+2))+(t+=e.charCodeAt(r+3));t%=o,n%=o}for(;r<a;r++)n+=t+=e.charCodeAt(r);return t%=o,n%=o,t|n<<16}var o=65521;t.exports=r},{}],93:[function(e,t,n){"use strict";var r=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e};t.exports=r},{}],94:[function(e,t,n){"use strict";function r(e,t,n,r){if(null==t||"boolean"==typeof t||""===t)return"";var o=isNaN(t);return r||o||0===t||a.hasOwnProperty(e)&&a[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var o=e(4),a=(e(143),o.isUnitlessNumber);t.exports=r},{143:143,4:4}],95:[function(e,t,n){"use strict";function r(e){var t=""+e,n=a.exec(t);if(!n)return t;var r,o="",i=0,s=0;for(i=n.index;i<t.length;i++){switch(t.charCodeAt(i)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==i&&(o+=t.substring(s,i)),s=i+1,o+=r}return s!==i?o+t.substring(s,i):o}function o(e){return"boolean"==typeof e||"number"==typeof e?""+e:r(e)}var a=/["'&<>]/;t.exports=o},{}],96:[function(e,t,n){"use strict";function r(e){if(null==e)return null;if(1===e.nodeType)return e;var t=i.get(e);if(t)return t=s(t),t?a.getNodeFromInstance(t):null;"function"==typeof e.render?o("44"):o("45",Object.keys(e))}var o=e(113),a=(e(120),e(33)),i=e(57),s=e(103);e(138),e(143);t.exports=r},{103:103,113:113,120:120,138:138,143:143,33:33,57:57}],97:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r){if(e&&"object"==typeof e){var o=e;void 0===o[n]&&null!=t&&(o[n]=t)}}function o(e,t){if(null==e)return e;var n={};return a(e,r,n),n}var a=(e(22),e(118));e(143);void 0!==n&&n.env,t.exports=o}).call(this,void 0)},{118:118,143:143,22:22}],98:[function(e,t,n){"use strict";function r(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}t.exports=r},{}],99:[function(e,t,n){"use strict";function r(e){var t,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,t>=32||13===t?t:0}t.exports=r},{}],100:[function(e,t,n){"use strict";function r(e){if(e.key){var t=a[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=o(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?i[e.keyCode]||"Unidentified":""}var o=e(99),a={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=r},{99:99}],101:[function(e,t,n){"use strict";function r(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=a[e];return!!r&&!!n[r]}function o(e){return r}var a={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=o},{}],102:[function(e,t,n){"use strict";function r(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}t.exports=r},{}],103:[function(e,t,n){"use strict";function r(e){for(var t;(t=e._renderedNodeType)===o.COMPOSITE;)e=e._renderedComponent;return t===o.HOST?e._renderedComponent:t===o.EMPTY?null:void 0}var o=e(62);t.exports=r},{62:62}],104:[function(e,t,n){"use strict";function r(e){var t=e&&(o&&e[o]||e[a]);if("function"==typeof t)return t}var o="function"==typeof Symbol&&Symbol.iterator,a="@@iterator";t.exports=r},{}],105:[function(e,t,n){"use strict";function r(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function o(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function a(e,t){for(var n=r(e),a=0,i=0;n;){if(3===n.nodeType){if(i=a+n.textContent.length,a<=t&&i>=t)return{node:n,offset:t-a};a=i}n=r(o(n))}}t.exports=a},{}],106:[function(e,t,n){"use strict";function r(){return!a&&o.canUseDOM&&(a="textContent"in document.documentElement?"textContent":"innerText"),a}var o=e(124),a=null;t.exports=r},{124:124}],107:[function(e,t,n){"use strict";function r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function o(e){if(s[e])return s[e];if(!i[e])return e;var t=i[e];for(var n in t)if(t.hasOwnProperty(n)&&n in u)return s[e]=t[n];return""}var a=e(124),i={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},s={},u={};a.canUseDOM&&(u=document.createElement("div").style,"AnimationEvent"in window||(delete i.animationend.animation,delete i.animationiteration.animation,delete i.animationstart.animation),"TransitionEvent"in window||delete i.transitionend.transition),t.exports=o},{124:124}],108:[function(e,t,n){"use strict";function r(e){var t=e.type,n=e.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===t||"radio"===t)}function o(e){return e._wrapperState.valueTracker}function a(e,t){e._wrapperState.valueTracker=t}function i(e){e._wrapperState.valueTracker=null}function s(e){var t;return e&&(t=r(e)?""+e.checked:e.value),t}var u=e(33),l={_getTrackerFromNode:function(e){return o(u.getInstanceFromNode(e))},track:function(e){if(!o(e)){var t=u.getNodeFromInstance(e),n=r(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];t.hasOwnProperty(n)||"function"!=typeof s.get||"function"!=typeof s.set||(Object.defineProperty(t,n,{enumerable:s.enumerable,configurable:!0,get:function(){return s.get.call(this)},set:function(e){l=""+e,s.set.call(this,e)}}),a(e,{getValue:function(){return l},setValue:function(e){l=""+e},stopTracking:function(){i(e),delete t[n]}}))}},updateValueIfChanged:function(e){if(!e)return!1;var t=o(e);if(!t)return l.track(e),!0;var n=t.getValue(),r=s(u.getNodeFromInstance(e));return r!==n&&(t.setValue(r),!0)},stopTracking:function(e){var t=o(e);t&&t.stopTracking()}};t.exports=l},{33:33}],109:[function(e,t,n){"use strict";function r(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function o(e){return"function"==typeof e&&void 0!==e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function a(e,t){var n;if(null===e||!1===e)n=l.create(a);else if("object"==typeof e){var s=e,u=s.type;if("function"!=typeof u&&"string"!=typeof u){var d="";d+=r(s._owner),i("130",null==u?u:typeof u,d)}"string"==typeof s.type?n=c.createInternalComponent(s):o(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new p(s)}else"string"==typeof e||"number"==typeof e?n=c.createInstanceForText(e):i("131",typeof e);return n._mountIndex=0,n._mountImage=null,n}var i=e(113),s=e(144),u=e(29),l=e(49),c=e(54),p=(e(122),e(138),e(143),function(e){this.construct(e)});s(p.prototype,u,{_instantiateReactComponent:a}),t.exports=a},{113:113,122:122,138:138,143:143,144:144,29:29,49:49,54:54}],110:[function(e,t,n){"use strict";function r(e,t){if(!a.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r="function"==typeof i[n]}return!r&&o&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var o,a=e(124);a.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),t.exports=r},{124:124}],111:[function(e,t,n){"use strict";function r(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!o[e.type]:"textarea"===t}var o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=r},{}],112:[function(e,t,n){"use strict";function r(e){return'"'+o(e)+'"'}var o=e(95);t.exports=r},{95:95}],113:[function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var o=new Error(n);throw o.name="Invariant Violation",o.framesToPop=1,o}t.exports=r},{}],114:[function(e,t,n){"use strict";var r=e(60);t.exports=r.renderSubtreeIntoContainer},{60:60}],115:[function(e,t,n){"use strict";var r,o=e(124),a=e(10),i=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,u=e(93),l=u(function(e,t){if(e.namespaceURI!==a.svg||"innerHTML"in e)e.innerHTML=t;else{r=r||document.createElement("div"),r.innerHTML="<svg>"+t+"</svg>";for(var n=r.firstChild;n.firstChild;)e.appendChild(n.firstChild)}});if(o.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(l=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),i.test(t)||"<"===t[0]&&s.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),c=null}t.exports=l},{10:10,124:124,93:93}],116:[function(e,t,n){"use strict";var r=e(124),o=e(95),a=e(115),i=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(i=function(e,t){if(3===e.nodeType)return void(e.nodeValue=t);a(e,o(t))})),t.exports=i},{115:115,124:124,95:95}],117:[function(e,t,n){"use strict";function r(e,t){var n=null===e||!1===e,r=null===t||!1===t;if(n||r)return n===r;var o=typeof e,a=typeof t;return"string"===o||"number"===o?"string"===a||"number"===a:"object"===a&&e.type===t.type&&e.key===t.key}t.exports=r},{}],118:[function(e,t,n){"use strict";function r(e,t){return e&&"object"==typeof e&&null!=e.key?l.escape(e.key):t.toString(36)}function o(e,t,n,a){var d=typeof e;if("undefined"!==d&&"boolean"!==d||(e=null),null===e||"string"===d||"number"===d||"object"===d&&e.$$typeof===s)return n(a,e,""===t?c+r(e,0):t),1;var f,h,m=0,v=""===t?c:t+p;if(Array.isArray(e))for(var g=0;g<e.length;g++)f=e[g],h=v+r(f,g),m+=o(f,h,n,a);else{var y=u(e);if(y){var _,C=y.call(e);if(y!==e.entries)for(var b=0;!(_=C.next()).done;)f=_.value,h=v+r(f,b++),m+=o(f,h,n,a);else for(;!(_=C.next()).done;){var E=_.value;E&&(f=E[1],h=v+l.escape(E[0])+p+r(f,0),m+=o(f,h,n,a))}}else if("object"===d){var x=String(e);i("31","[object Object]"===x?"object with keys {"+Object.keys(e).join(", ")+"}":x,"")}}return m}function a(e,t,n){return null==e?0:o(e,"",t,n)}var i=e(113),s=(e(120),e(48)),u=e(104),l=(e(138),e(22)),c=(e(143),"."),p=":";t.exports=a},{104:104,113:113,120:120,138:138,143:143,22:22,48:48}],119:[function(e,t,n){"use strict";var r=(e(144),e(130)),o=(e(143),r);t.exports=o},{130:130,143:143,144:144}],120:[function(t,n,r){"use strict";var o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;n.exports=o.ReactCurrentOwner},{}],121:[function(t,n,r){"use strict";n.exports=e},{}],122:[function(t,n,r){"use strict";var o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;n.exports=o.getNextDebugID},{}],123:[function(e,t,n){"use strict";var r=e(130),o={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};t.exports=o},{130:130}],124:[function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=o},{}],125:[function(e,t,n){"use strict";function r(e){return e.replace(o,function(e,t){return t.toUpperCase()})}var o=/-(.)/g;t.exports=r},{}],126:[function(e,t,n){"use strict";function r(e){return o(e.replace(a,"ms-"))}var o=e(125),a=/^-ms-/;t.exports=r},{125:125}],127:[function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!o(e)&&(o(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var o=e(140);t.exports=r},{140:140}],128:[function(e,t,n){"use strict";function r(e){var t=e.length;if((Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e)&&i(!1),"number"!=typeof t&&i(!1),0===t||t-1 in e||i(!1),"function"==typeof e.callee&&i(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}function o(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function a(e){return o(e)?Array.isArray(e)?e.slice():r(e):[e]}var i=e(138);t.exports=a},{138:138}],129:[function(e,t,n){"use strict";function r(e){var t=e.match(c);return t&&t[1].toLowerCase()}function o(e,t){var n=l;l||u(!1);var o=r(e),a=o&&s(o);if(a){n.innerHTML=a[1]+e+a[2];for(var c=a[0];c--;)n=n.lastChild}else n.innerHTML=e;var p=n.getElementsByTagName("script");p.length&&(t||u(!1),i(p).forEach(t));for(var d=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return d}var a=e(124),i=e(128),s=e(134),u=e(138),l=a.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;t.exports=o},{124:124,128:128,134:134,138:138}],130:[function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},t.exports=o},{}],131:[function(e,t,n){"use strict";var r={};t.exports=r},{}],132:[function(e,t,n){"use strict";function r(e){try{e.focus()}catch(e){}}t.exports=r},{}],133:[function(e,t,n){"use strict";function r(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}t.exports=r},{}],134:[function(e,t,n){"use strict";function r(e){return i||a(!1),d.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||(i.innerHTML="*"===e?"<link />":"<"+e+"></"+e+">",s[e]=!i.firstChild),s[e]?d[e]:null}var o=e(124),a=e(138),i=o.canUseDOM?document.createElement("div"):null,s={},u=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],p=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],d={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:c,th:c};["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"].forEach(function(e){d[e]=p,s[e]=!0}),t.exports=r},{124:124,138:138}],135:[function(e,t,n){"use strict";function r(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=r},{}],136:[function(e,t,n){"use strict";function r(e){return e.replace(o,"-$1").toLowerCase()}var o=/([A-Z])/g;t.exports=r},{}],137:[function(e,t,n){"use strict";function r(e){return o(e).replace(a,"-ms-")}var o=e(136),a=/^ms-/;t.exports=r},{136:136}],138:[function(e,t,n){"use strict";function r(e,t,n,r,a,i,s,u){if(o(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,i,s,u],p=0;l=new Error(t.replace(/%s/g,function(){return c[p++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var o=function(e){};t.exports=r},{}],139:[function(e,t,n){"use strict";function r(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"==typeof n.Node?e instanceof n.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}t.exports=r},{}],140:[function(e,t,n){"use strict";function r(e){return o(e)&&3==e.nodeType}var o=e(139);t.exports=r},{139:139}],141:[function(e,t,n){"use strict";function r(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}t.exports=r},{}],142:[function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!==e&&t!==t}function o(e,t){if(r(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var i=0;i<n.length;i++)if(!a.call(t,n[i])||!r(e[n[i]],t[n[i]]))return!1;return!0}var a=Object.prototype.hasOwnProperty;t.exports=o},{}],143:[function(e,t,n){"use strict";var r=e(130),o=r;t.exports=o},{130:130}],144:[function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)a.call(n,c)&&(u[c]=n[c]);if(o){s=o(n);for(var p=0;p<s.length;p++)i.call(n,s[p])&&(u[s[p]]=n[s[p]])}}return u}},{}],145:[function(e,t,n){"use strict";function r(e,t,n,r,o){}t.exports=r},{138:138,143:143,148:148}],146:[function(e,t,n){"use strict";var r=e(147);t.exports=function(e){return r(e,!1)}},{147:147}],147:[function(e,t,n){"use strict";var r=e(130),o=e(138),a=e(143),i=e(148),s=e(145);t.exports=function(e,t){function n(e){var t=e&&(w&&e[w]||e[T]);if("function"==typeof t)return t}function u(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function l(e){this.message=e,this.stack=""}function c(e){function n(n,r,a,s,u,c,p){if(s=s||k,c=c||a,p!==i)if(t)o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else;return null==r[a]?n?new l(null===r[a]?"The "+u+" `"+c+"` is marked as required in `"+s+"`, but its value is `null`.":"The "+u+" `"+c+"` is marked as required in `"+s+"`, but its value is `undefined`."):null:e(r,a,s,u,c)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function p(e){function t(t,n,r,o,a,i){var s=t[n];if(C(s)!==e)return new l("Invalid "+o+" `"+a+"` of type `"+b(s)+"` supplied to `"+r+"`, expected `"+e+"`.");return null}return c(t)}function d(e){function t(t,n,r,o,a){if("function"!=typeof e)return new l("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){return new l("Invalid "+o+" `"+a+"` of type `"+C(s)+"` supplied to `"+r+"`, expected an array.")}for(var u=0;u<s.length;u++){var c=e(s,u,r,o,a+"["+u+"]",i);if(c instanceof Error)return c}return null}return c(t)}function f(e){function t(t,n,r,o,a){if(!(t[n]instanceof e)){var i=e.name||k;return new l("Invalid "+o+" `"+a+"` of type `"+x(t[n])+"` supplied to `"+r+"`, expected instance of `"+i+"`.")}return null}return c(t)}function h(e){function t(t,n,r,o,a){for(var i=t[n],s=0;s<e.length;s++)if(u(i,e[s]))return null;return new l("Invalid "+o+" `"+a+"` of value `"+i+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?c(t):r.thatReturnsNull}function m(e){function t(t,n,r,o,a){if("function"!=typeof e)return new l("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],u=C(s);if("object"!==u)return new l("Invalid "+o+" `"+a+"` of type `"+u+"` supplied to `"+r+"`, expected an object.");for(var c in s)if(s.hasOwnProperty(c)){var p=e(s,c,r,o,a+"."+c,i);if(p instanceof Error)return p}return null}return c(t)}function v(e){function t(t,n,r,o,a){for(var s=0;s<e.length;s++){if(null==(0,e[s])(t,n,r,o,a,i))return null}return new l("Invalid "+o+" `"+a+"` supplied to `"+r+"`.")}if(!Array.isArray(e))return r.thatReturnsNull;for(var n=0;n<e.length;n++){var o=e[n];if("function"!=typeof o)return a(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",E(o),n),r.thatReturnsNull}return c(t)}
function g(e){function t(t,n,r,o,a){var s=t[n],u=C(s);if("object"!==u)return new l("Invalid "+o+" `"+a+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var p=e[c];if(p){var d=p(s,c,r,o,a+"."+c,i);if(d)return d}}return null}return c(t)}function y(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(y);if(null===t||e(t))return!0;var r=n(t);if(!r)return!1;var o,a=r.call(t);if(r!==t.entries){for(;!(o=a.next()).done;)if(!y(o.value))return!1}else for(;!(o=a.next()).done;){var i=o.value;if(i&&!y(i[1]))return!1}return!0;default:return!1}}function _(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function C(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":_(t,e)?"symbol":t}function b(e){if(void 0===e||null===e)return""+e;var t=C(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function E(e){var t=b(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function x(e){return e.constructor&&e.constructor.name?e.constructor.name:k}var w="function"==typeof Symbol&&Symbol.iterator,T="@@iterator",k="<<anonymous>>",P={array:p("array"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:function(){return c(r.thatReturnsNull)}(),arrayOf:d,element:function(){function t(t,n,r,o,a){var i=t[n];if(!e(i)){return new l("Invalid "+o+" `"+a+"` of type `"+C(i)+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}return c(t)}(),instanceOf:f,node:function(){function e(e,t,n,r,o){return y(e[t])?null:new l("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}return c(e)}(),objectOf:m,oneOf:h,oneOfType:v,shape:g};return l.prototype=Error.prototype,P.checkPropTypes=s,P.PropTypes=P,P}},{130:130,138:138,143:143,145:145,148:148}],148:[function(e,t,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}]},{},[45])(45)}()}()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:react', location = '/static/lib/react/react-AMD.js' */
define("react",function(){return window.React});define("react-dom",function(){return window.ReactDOM});window.React.addons&&window.React.addons.Perf&&(window.Perf=window.React.addons.Perf);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:react', location = '/static/lib/react/prop-types.js' */
!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.PropTypes=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){"use strict";var emptyFunction=require(4),invariant=require(5),ReactPropTypesSecret=require(3);module.exports=function(){function e(e,r,t,n,p,o){o!==ReactPropTypesSecret&&invariant(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function r(){return e}e.isRequired=e;var t={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r};return t.checkPropTypes=emptyFunction,t.PropTypes=t,t}},{3:3,4:4,5:5}],2:[function(require,module){module.exports=require(1)()},{1:1}],3:[function(require,module){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},{}],4:[function(require,module){"use strict";function makeEmptyFunction(arg){return function(){return arg}}var emptyFunction=function(){};emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(arg){return arg},module.exports=emptyFunction},{}],5:[function(require,module){"use strict";function invariant(condition,format,a,b,c,d,e,f){if(validateFormat(format),!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]})),error.name="Invariant Violation"}throw error.framesToPop=1,error}}var validateFormat=function(){};module.exports=invariant},{}]},{},[2])(2)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:react', location = '/static/lib/react/prop-types-AMD.js' */
define("prop-types",function(){return window.PropTypes});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:redux', location = '/static/lib/redux/redux.js' */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Redux=e():t.Redux=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.compose=e.applyMiddleware=e.bindActionCreators=e.combineReducers=e.createStore=void 0;var o=n(2),u=r(o),i=n(7),c=r(i),a=n(6),f=r(a),s=n(5),d=r(s),l=n(1),p=r(l),y=n(3);r(y);e.createStore=u["default"],e.combineReducers=c["default"],e.bindActionCreators=f["default"],e.applyMiddleware=d["default"],e.compose=p["default"]},function(t,e){"use strict";function n(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];if(0===e.length)return function(t){return t};if(1===e.length)return e[0];var r=e[e.length-1],o=e.slice(0,-1);return function(){return o.reduceRight(function(t,e){return e(t)},r.apply(void 0,arguments))}}e.__esModule=!0,e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n){function r(){b===h&&(b=h.slice())}function u(){return v}function c(t){if("function"!=typeof t)throw Error("Expected listener to be a function.");var e=!0;return r(),b.push(t),function(){if(e){e=!1,r();var n=b.indexOf(t);b.splice(n,1)}}}function s(t){if(!(0,i["default"])(t))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(m)throw Error("Reducers may not dispatch actions.");try{m=!0,v=y(v,t)}finally{m=!1}for(var e=h=b,n=0;e.length>n;n++)e[n]();return t}function d(t){if("function"!=typeof t)throw Error("Expected the nextReducer to be a function.");y=t,s({type:f.INIT})}function l(){var t,e=c;return t={subscribe:function(t){function n(){t.next&&t.next(u())}if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");n();var r=e(n);return{unsubscribe:r}}},t[a["default"]]=function(){return this},t}var p;if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw Error("Expected the enhancer to be a function.");return n(o)(t,e)}if("function"!=typeof t)throw Error("Expected the reducer to be a function.");var y=t,v=e,h=[],b=h,m=!1;return s({type:f.INIT}),p={dispatch:s,subscribe:c,getState:u,replaceReducer:d},p[a["default"]]=l,p}e.__esModule=!0,e.ActionTypes=void 0,e["default"]=o;var u=n(4),i=r(u),c=n(12),a=r(c),f=e.ActionTypes={INIT:"@@redux/INIT"}},function(t,e){"use strict";function n(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t);try{throw Error(t)}catch(e){}}e.__esModule=!0,e["default"]=n},function(t,e,n){function r(t){if(!i(t)||p.call(t)!=c||u(t))return!1;var e=o(t);if(null===e)return!0;var n=d.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==l}var o=n(8),u=n(9),i=n(11),c="[object Object]",a=Function.prototype,f=Object.prototype,s=a.toString,d=f.hasOwnProperty,l=s.call(Object),p=f.toString;t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return function(t){return function(n,r,o){var i=t(n,r,o),a=i.dispatch,f=[],s={getState:i.getState,dispatch:function(t){return a(t)}};return f=e.map(function(t){return t(s)}),a=c["default"].apply(void 0,f)(i.dispatch),u({},i,{dispatch:a})}}}e.__esModule=!0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e["default"]=o;var i=n(1),c=r(i)},function(t,e){"use strict";function n(t,e){return function(){return e(t.apply(void 0,arguments))}}function r(t,e){if("function"==typeof t)return n(t,e);if("object"!=typeof t||null===t)throw Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(t),o={},u=0;r.length>u;u++){var i=r[u],c=t[i];"function"==typeof c&&(o[i]=n(c,e))}return o}e.__esModule=!0,e["default"]=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n=e&&e.type,r=n&&'"'+n+'"'||"an action";return"Given action "+r+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function u(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:c.ActionTypes.INIT});if(void 0===r)throw Error('Reducer "'+e+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var o="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if(void 0===n(void 0,{type:o}))throw Error('Reducer "'+e+'" returned undefined when probed with a random type. '+("Don't try to handle "+c.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function i(t){for(var e=Object.keys(t),n={},r=0;e.length>r;r++){var i=e[r];"function"==typeof t[i]&&(n[i]=t[i])}var c,a=Object.keys(n);try{u(n)}catch(f){c=f}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(c)throw c;for(var r=!1,u={},i=0;a.length>i;i++){var f=a[i],s=n[f],d=t[f],l=s(d,e);if(void 0===l){var p=o(f,e);throw Error(p)}u[f]=l,r=r||l!==d}return r?u:t}}e.__esModule=!0,e["default"]=i;var c=n(2),a=n(4),f=(r(a),n(3));r(f)},function(t,e,n){var r=n(10),o=r(Object.getPrototypeOf,Object);t.exports=o},function(t,e){function n(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}t.exports=n},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e){function n(t){return!!t&&"object"==typeof t}t.exports=n},function(t,e,n){t.exports=n(13)},function(t,e,n){(function(t){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),u=r(o),i=void 0;void 0!==t?i=t:"undefined"!=typeof window&&(i=window);var c=(0,u["default"])(i);e["default"]=c}).call(e,function(){return this}())},function(t,e){"use strict";function n(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n}])});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:redux', location = '/static/lib/redux/redux-AMD.js' */
define("redux",function(){return window.Redux});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:react-redux', location = '/static/lib/redux/react-redux.js' */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("redux")):"function"==typeof define&&define.amd?define(["exports","react","redux"],e):e(t.ReactRedux=t.ReactRedux||{},t.React,t.Redux)}(this,function(t,e,n){"use strict";function r(t,e){return e={exports:{}},t(e,e.exports),e.exports}function o(t){return function(){return t}}function i(t,e,n,r,o,i,s,u){if(U(e),!t){var p;if(void 0===e)p=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=[n,r,o,i,s,u],c=0;p=Error(e.replace(/%s/g,function(){return a[c++]})),p.name="Invariant Violation"}throw p.framesToPop=1,p}}function s(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",r=arguments[1],o=r||n+"Subscription",i=function(t){function r(e,o){H(this,r);var i=Y(this,t.call(this,e,o));return i[n]=e.store,i}return L(r,t),r.prototype.getChildContext=function(){var t;return t={},t[n]=this[n],t[o]=null,t},r.prototype.render=function(){return e.Children.only(this.props.children)},r}(e.Component);return i.propTypes={store:A.isRequired,children:F.element.isRequired},i.childContextTypes=(t={},t[n]=A.isRequired,t[o]=k,t),i.displayName="Provider",i}function u(){var t=[],e=[];return{clear:function(){e=tt,t=tt},notify:function(){for(var n=t=e,r=0;n.length>r;r++)n[r]()},subscribe:function(n){var r=!0;return e===t&&(e=t.slice()),e.push(n),function(){r&&t!==tt&&(r=!1,e===t&&(e=t.slice()),e.splice(e.indexOf(n),1))}}}}function p(){}function a(t,e){var n={run:function(r){try{var o=t(e.getState(),r);(o!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=o,n.error=null)}catch(t){n.shouldComponentUpdate=!0,n.error=t}}};return n}function c(t){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.getDisplayName,s=void 0===i?function(t){return"ConnectAdvanced("+t+")"}:i,u=o.methodName,c=void 0===u?"connectAdvanced":u,d=o.renderCountProp,f=void 0===d?void 0:d,l=o.shouldHandleStateChanges,h=void 0===l||l,y=o.storeKey,b=void 0===y?"store":y,v=o.withRef,m=void 0!==v&&v,P=V(o,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),g=b+"Subscription",O=rt++,S=(n={},n[b]=A,n[g]=k,n),w=(r={},r[g]=k,r);return function(n){$("function"==typeof n,"You must pass a component to the function returned by connect. Instead received "+JSON.stringify(n));var r=n.displayName||n.name||"Component",o=s(r),i=K({},P,{getDisplayName:s,methodName:c,renderCountProp:f,shouldHandleStateChanges:h,storeKey:b,withRef:m,displayName:o,wrappedComponentName:r,WrappedComponent:n}),u=function(r){function s(t,e){H(this,s);var n=Y(this,r.call(this,t,e));return n.version=O,n.state={},n.renderCount=0,n.store=t[b]||e[b],n.propsMode=!!t[b],n.setWrappedInstance=n.setWrappedInstance.bind(n),$(n.store,'Could not find "'+b+'" in either the context or props of '+('"'+o+'". Either wrap the root component in a <Provider>, ')+('or explicitly pass "'+b+'" as a prop to "'+o+'".')),n.initSelector(),n.initSubscription(),n}return L(s,r),s.prototype.getChildContext=function(){var t,e=this.propsMode?null:this.subscription;return t={},t[g]=e||this.context[g],t},s.prototype.componentDidMount=function(){h&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},s.prototype.componentWillReceiveProps=function(t){this.selector.run(t)},s.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},s.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=p,this.store=null,this.selector.run=p,this.selector.shouldComponentUpdate=!1},s.prototype.getWrappedInstance=function(){return $(m,"To access the wrapped instance, you need to specify "+("{ withRef: true } in the options argument of the "+c+"() call.")),this.wrappedInstance},s.prototype.setWrappedInstance=function(t){this.wrappedInstance=t},s.prototype.initSelector=function(){var e=t(this.store.dispatch,i);this.selector=a(e,this.store),this.selector.run(this.props)},s.prototype.initSubscription=function(){if(h){var t=(this.propsMode?this.props:this.context)[g];this.subscription=new nt(this.store,t,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},s.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(ot)):this.notifyNestedSubs()},s.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},s.prototype.isSubscribed=function(){return!!this.subscription&&this.subscription.isSubscribed()},s.prototype.addExtraProps=function(t){if(!(m||f||this.propsMode&&this.subscription))return t;var e=K({},t);return m&&(e.ref=this.setWrappedInstance),f&&(e[f]=this.renderCount++),this.propsMode&&this.subscription&&(e[g]=this.subscription),e},s.prototype.render=function(){var t=this.selector;if(t.shouldComponentUpdate=!1,t.error)throw t.error;return e.createElement(n,this.addExtraProps(t.props))},s}(e.Component);return u.WrappedComponent=n,u.displayName=o,u.childContextTypes=w,u.contextTypes=S,u.propTypes=S,Q(u,n)}}function d(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function f(t,e){if(d(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var o=0;n.length>o;o++)if(!it.call(e,n[o])||!d(t[n[o]],e[n[o]]))return!1;return!0}function l(t){return function(e,n){function r(){return o}var o=t(e,n);return r.dependsOnOwnProps=!1,r}}function h(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?!!t.dependsOnOwnProps:1!==t.length}function y(t,e){return function(e,n){var r=function(t,e){return r.dependsOnOwnProps?r.mapToProps(t,e):r.mapToProps(t)};return r.dependsOnOwnProps=!0,r.mapToProps=function(e,n){r.mapToProps=t,r.dependsOnOwnProps=h(t);var o=r(e,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=h(o),o=r(e,n)),o},r}}function b(t){return"function"==typeof t?y(t,"mapDispatchToProps"):void 0}function v(t){return t?void 0:l(function(t){return{dispatch:t}})}function m(t){return t&&"object"==typeof t?l(function(e){return n.bindActionCreators(t,e)}):void 0}function P(t){return"function"==typeof t?y(t,"mapStateToProps"):void 0}function g(t){return t?void 0:l(function(){return{}})}function O(t,e,n){return K({},n,t,e)}function S(t){return function(e,n){var r=n.pure,o=n.areMergedPropsEqual,i=!1,s=void 0;return function(e,n,u){var p=t(e,n,u);return i?r&&o(p,s)||(s=p):(i=!0,s=p),s}}}function w(t){return"function"==typeof t?S(t):void 0}function C(t){return t?void 0:function(){return O}}function T(t,e,n,r){return function(o,i){return n(t(o,i),e(r,i),i)}}function E(t,e,n,r,o){function i(o,i){return h=o,y=i,b=t(h,y),v=e(r,y),m=n(b,v,y),l=!0,m}function s(){return b=t(h,y),e.dependsOnOwnProps&&(v=e(r,y)),m=n(b,v,y)}function u(){return t.dependsOnOwnProps&&(b=t(h,y)),e.dependsOnOwnProps&&(v=e(r,y)),m=n(b,v,y)}function p(){var e=t(h,y),r=!f(e,b);return b=e,r&&(m=n(b,v,y)),m}function a(t,e){var n=!d(e,y),r=!c(t,h);return h=t,y=e,n&&r?s():n?u():r?p():m}var c=o.areStatesEqual,d=o.areOwnPropsEqual,f=o.areStatePropsEqual,l=!1,h=void 0,y=void 0,b=void 0,v=void 0,m=void 0;return function(t,e){return l?a(t,e):i(t,e)}}function R(t,e){var n=e.initMapStateToProps,r=e.initMapDispatchToProps,o=e.initMergeProps,i=V(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),s=n(t,i),u=r(t,i),p=o(t,i),a=i.pure?E:T;return a(s,u,p,t,i)}function x(t,e,n){for(var r=e.length-1;r>=0;r--){var o=e[r](t);if(o)return o}return function(e,r){throw Error("Invalid value of type "+typeof t+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function q(t,e){return t===e}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.connectHOC,n=void 0===e?c:e,r=t.mapStateToPropsFactories,o=void 0===r?dt:r,i=t.mapDispatchToPropsFactories,s=void 0===i?ct:i,u=t.mergePropsFactories,p=void 0===u?ft:u,a=t.selectorFactory,d=void 0===a?R:a;return function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=i.pure,a=void 0===u||u,c=i.areStatesEqual,l=void 0===c?q:c,h=i.areOwnPropsEqual,y=void 0===h?f:h,b=i.areStatePropsEqual,v=void 0===b?f:b,m=i.areMergedPropsEqual,P=void 0===m?f:m,g=V(i,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),O=x(t,o,"mapStateToProps"),S=x(e,s,"mapDispatchToProps"),w=x(r,p,"mergeProps");return n(d,K({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:!!t,initMapStateToProps:O,initMapDispatchToProps:S,initMergeProps:w,pure:a,areStatesEqual:l,areOwnPropsEqual:y,areStatePropsEqual:v,areMergedPropsEqual:P},g))}}var j=function(){};j.thatReturns=o,j.thatReturnsFalse=o(!1),j.thatReturnsTrue=o(!0),j.thatReturnsNull=o(null),j.thatReturnsThis=function(){return this},j.thatReturnsArgument=function(t){return t};var M=j,U=function(t){},D=i,_="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",I=_,W=function(){function t(t,e,n,r,o,i){i!==I&&D(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e};return n.checkPropTypes=M,n.PropTypes=n,n},F=r(function(t){t.exports=W()}),k=F.shape({trySubscribe:F.func.isRequired,tryUnsubscribe:F.func.isRequired,notifyNestedSubs:F.func.isRequired,isSubscribed:F.func.isRequired}),A=F.shape({subscribe:F.func.isRequired,dispatch:F.func.isRequired,getState:F.func.isRequired}),H=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},K=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},V=function(t,e){var n={};for(var r in t)e.indexOf(r)<0&&Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},Y=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},B=s(),J={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},z={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},G="function"==typeof Object.getOwnPropertySymbols,Q=function(t,e,n){if("string"!=typeof e){var r=Object.getOwnPropertyNames(e);G&&(r=r.concat(Object.getOwnPropertySymbols(e)));for(var o=0;r.length>o;++o)if(!(J[r[o]]||z[r[o]]||n&&n[r[o]]))try{t[r[o]]=e[r[o]]}catch(t){}}return t},X="production",Z=function(t,e,n,r,o,i,s,u){if("production"!==X&&void 0===e)throw Error("invariant requires an error message argument");if(!t){var p;if(void 0===e)p=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=[n,r,o,i,s,u],c=0;p=Error(e.replace(/%s/g,function(){return a[c++]})),p.name="Invariant Violation"}throw p.framesToPop=1,p}},$=Z,tt=null,et={notify:function(){}},nt=function(){function t(e,n,r){H(this,t),this.store=e,this.parentSub=n,this.onStateChange=r,this.unsubscribe=null,this.listeners=et}return t.prototype.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},t.prototype.notifyNestedSubs=function(){this.listeners.notify()},t.prototype.isSubscribed=function(){return!!this.unsubscribe},t.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=u())},t.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=et)},t}(),rt=0,ot={},it=Object.prototype.hasOwnProperty,st="object"==typeof global&&global&&global.Object===Object&&global,ut="object"==typeof self&&self&&self.Object===Object&&self,pt=(st||ut||Function("return this")(),Function.prototype),at=pt.toString,ct=(at.call(Object),[b,v,m]),dt=[P,g],ft=[w,C],lt=N();t.Provider=B,t.createProvider=s,t.connectAdvanced=c,t.connect=lt,Object.defineProperty(t,"__esModule",{value:!0})});
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:react-redux', location = '/static/lib/redux/react-redux-AMD.js' */
define("react-redux",function(){return window.ReactRedux});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:utils', location = '/static/bitbucket/internal/bbui/utils/create-reducer.js' */
define("bitbucket/internal/bbui/utils/create-reducer",["module","exports"],function(e,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,c){return function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a,b=arguments[1];return c[b.type]?c[b.type](d,b):d}};e.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:utils', location = '/static/bitbucket/internal/bbui/utils/pull-request-unique-id.js' */
define("bitbucket/internal/bbui/utils/pull-request-unique-id",["module","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){var b=a.toRef.repository;return[b.project.key,b.slug,a.id].join("::")};c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:utils', location = '/static/bitbucket/internal/bbui/utils/merge-state-with-rollback.js' */
define("bitbucket/internal/bbui/utils/merge-state-with-rollback",["module","exports"],function(e,b){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(c,d,a){var b=a.forward,e=a.back;a=a.commit;if(d.hasOwnProperty("meta")){if(!d.meta.isPending&&d.payload&&d.payload.error)return babelHelpers.extends({},c,e());if(d.meta.isPending)return babelHelpers.extends({},c,b())}else return c;return a?babelHelpers.extends({},c,a()):c};e.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:utils', location = '/static/bitbucket/internal/bbui/utils/actors.js' */
define("bitbucket/internal/bbui/utils/actors",["exports","lodash","bitbucket/util/server"],function(b,c,g){Object.defineProperty(b,"__esModule",{value:!0});b.restActor=function(a,b){var d=a.type,h=a.payload;a=a.meta;var e=(0,c.get)(a,"rest");if(e){var f=babelHelpers.extends({},(0,c.omit)(a,"rest"),{originalPayload:h});(0,g.rest)(e).done(function(a){b({type:d+"_SUCCESS",payload:a,meta:f})}).fail(function(a){b({type:d+"_FAILURE",payload:a,meta:f})})}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:utils', location = '/static/bitbucket/internal/bbui/utils/merge-object-in-array.js' */
define("bitbucket/internal/bbui/utils/merge-object-in-array",["module","exports","lodash"],function(e,b,f){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(c,a,b){a=d.default.findIndex(c,a);return-1===a?c:[].concat(babelHelpers.toConsumableArray(c.slice(0,a)),[d.default.assign({},c[a],b)],babelHelpers.toConsumableArray(c.slice(a+1)))};var d=babelHelpers.interopRequireDefault(f);e.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:utils', location = '/static/bitbucket/internal/bbui/utils/replace-state-with-rollback.js' */
define("bitbucket/internal/bbui/utils/replace-state-with-rollback",["module","exports"],function(g,d){Object.defineProperty(d,"__esModule",{value:!0});d.default=function(b,a,c){var d=c.forward,f=c.back;c=c.commit;if(!a.hasOwnProperty("meta"))return b;if(a.meta.isPending)return e[a.meta.actionId]=b,d();if(a.payload&&a.payload.error)return b=e[a.meta.actionId],delete e[a.meta.actionId],f?f(b):b;delete e[a.meta.actionId];return c?c():b};var e={};g.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:utils', location = '/static/bitbucket/internal/bbui/utils/thunk-middleware.js' */
define("bitbucket/internal/bbui/utils/thunk-middleware",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){var b=a.dispatch,d=a.getState;return function(a){return function(c){return"function"===typeof c?c(b,d):a(c)}}};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:utils', location = '/static/bitbucket/internal/bbui/utils/promise-middleware.js' */
define("bitbucket/internal/bbui/utils/promise-middleware",["module","exports","lodash"],function(e,a,h){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){var f=a.dispatch;return function(a){return function(b){function g(c,a){c=babelHelpers.extends({},b,{payload:c,meta:babelHelpers.extends({},d,{actionId:e,isPending:a})});delete c.meta.promise;return c}var d=b.meta;if(!d||!d.promise)return a(b);var e=Number((0,h.uniqueId)());f(g(b.payload,!0));return d.promise.then(function(a){return f(g(a,
!1))},function(a){return f(g({error:a},!1))})}}};e.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:redux-util', location = '/static/bitbucket/internal/util/redux.js' */
define("bitbucket/internal/util/redux",["exports","redux","bitbucket/internal/bbui/utils/promise-middleware","bitbucket/internal/bbui/utils/thunk-middleware"],function(c,d,h,l){Object.defineProperty(c,"__esModule",{value:!0});c.actorMiddleware=void 0;c.customCreateStore=function(b,e){for(var a=arguments.length,f=Array(2<a?a-2:0),g=2;g<a;g++)f[g-2]=arguments[g];return(0,d.createStore)((0,d.combineReducers)(b),e,(0,d.compose)(d.applyMiddleware.apply(void 0,babelHelpers.toConsumableArray(k.concat(f||
[]))),window.devToolsExtension?window.devToolsExtension():function(a){return a}))};h=babelHelpers.interopRequireDefault(h);var m=function(b){return function(e){return function(a){console.group(a.type);console.log("dispatching",a);var f=e(a);console.log("next state",JSON.parse(JSON.stringify(b.getState())));console.groupEnd(a.type);return f}}},k=[babelHelpers.interopRequireDefault(l).default,h.default];/[?&]dev=true($|&)/.test(window.location.search)&&k.push(m);c.actorMiddleware=function(){for(var b=
arguments.length,e=Array(b),a=0;a<b;a++)e[a]=arguments[a];return function(a){return function(b){return function(c){var d=a.getState();b(c);var f=a.getState();e.forEach(function(b){return b(c,a.dispatch,d,f)})}}}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-analytics', location = '/static/bitbucket/internal/feature/pull-request/pull-request-analytics/pull-request-analytics.js' */
define("bitbucket/internal/feature/pull-request/pull-request-analytics/pull-request-analytics","module exports jquery bitbucket/util/events bitbucket/util/state bitbucket/internal/util/analytics".split(" "),function(d,c,e,h,k,l){function a(a){m.default.on(a,function(f){var g=a.substring(27);a.match(/comment.actions.reply|comment.actions.view/)&&(g=a.substring(39));var c=b.default.getPullRequest().id,d=b.default.getRepository().id;var e=b.default.getCurrentUser().id===b.default.getPullRequest().author.user.id?
"author":n()?"reviewer":p()?"participant":"other";f=q.default.extend({},{"pullRequest.id":c,"repository.id":d,userRole:e},f);r.default.add(g,f,!0)})}function n(){var a=b.default.getPullRequest().reviewers;return a.length&&a.some(function(a){return a.user.id===b.default.getCurrentUser().id})}function p(){var a=b.default.getPullRequest().participants;return a.length&&a.some(function(a){return a.user.id===b.default.getCurrentUser().id})}Object.defineProperty(c,"__esModule",{value:!0});var q=babelHelpers.interopRequireDefault(e),
m=babelHelpers.interopRequireDefault(h),b=babelHelpers.interopRequireDefault(k),r=babelHelpers.interopRequireDefault(l);c.default={init:function(){a("bitbucket.internal.feature.pullRequest.comment.actions.reply");a("bitbucket.internal.feature.pullRequest.comment.actions.view");a("bitbucket.internal.feature.pullRequest.commit.open");a("bitbucket.internal.feature.pullRequest.commitDiff.view");a("bitbucket.internal.feature.pullRequest.diff.fileChange");a("bitbucket.internal.feature.pullRequest.effectiveDiff.view");
a("bitbucket.internal.feature.pullRequest.iterativeDiff.view");a("bitbucket.internal.feature.pullRequest.overview.comment.delete.clicked");a("bitbucket.internal.feature.pullRequest.overview.comment.edit.clicked");a("bitbucket.internal.feature.pullRequest.overview.comment.like.clicked");a("bitbucket.internal.feature.pullRequest.overview.comment.open");a("bitbucket.internal.feature.pullRequest.overview.comment.reply.clicked");a("bitbucket.internal.feature.pullRequest.overview.comment.task.clicked");
a("bitbucket.internal.feature.pullRequest.overview.commit.open");a("bitbucket.internal.feature.pullRequest.tab.commits");a("bitbucket.internal.feature.pullRequest.tab.diff");a("bitbucket.internal.feature.pullRequest.tab.overview")}};d.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-feature-discovery', location = '/static/bitbucket/internal/feature/pull-request/feature-discovery/pull-request-feature-dialog.soy' */
// This file was automatically generated from pull-request-feature-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.feature.discovery.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }
if (typeof bitbucket.internal.feature.pullRequest.feature == 'undefined') { bitbucket.internal.feature.pullRequest.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest.feature.discovery == 'undefined') { bitbucket.internal.feature.pullRequest.feature.discovery = {}; }


bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatus = function(opt_data, opt_ignored) {
  return '<div class="feature-img"></div><h2>' + soy.$$escapeHtml('New reviewer status') + '</h2><h3 class="header-approve">' + soy.$$escapeHtml('Approved') + '</h3><p>' + soy.$$escapeHtml('Once you\x27re happy with the changes click approve (same as before).') + '</p><h3 class="header-needs-work">' + soy.$$escapeHtml('Needs work') + '</h3><p>' + soy.$$escapeHtml('Let the author know you reviewed their changes but don\x27t yet approve. Don\x27t forget to leave some comments!') + '</p>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatus.soyTemplateName = 'bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatus';
}


bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatusClick = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('When new changes are pushed, your status resets and you\x27ll be notified to review again.') + '</p>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatusClick.soyTemplateName = 'bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatusClick';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:actions', location = '/static/bitbucket/internal/bbui/actions/pull-request.js' */
define("bitbucket/internal/bbui/actions/pull-request",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});a.PR_CHANGE_REVIEWER_STATE="PR_CHANGE_REVIEWER_STATE";a.PR_CHANGE_SELF_REVIEWER="PR_CHANGE_SELF_REVIEWER";a.PR_CHECK_MERGEABILITY="PR_CHECK_MERGEABILITY";a.PR_MERGE="PR_MERGE";a.PR_SET_IS_WATCHING="PR_SET_IS_WATCHING";a.PR_SET_PULL_REQUEST="PR_SET_PULL_REQUEST";a.PR_WATCH="PR_WATCH"});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:actions', location = '/static/bitbucket/internal/bbui/actions/actions.js' */
define("bitbucket/internal/bbui/actions/actions",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});a.SET_CURRENT_USER="SET_CURRENT_USER"});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-action-creators', location = '/static/bitbucket/internal/feature/pull-request/action-creators/can-merge.js' */
define("bitbucket/internal/feature/pull-request/action-creators/can-merge","module exports bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/server bitbucket/util/state bitbucket/internal/bbui/actions/pull-request".split(" "),function(c,a,d,e,f,g,h){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(b,a){b=b||k.default.getPullRequest();a=l.default.rest({url:m.default.rest().currentRepo().pullRequest(b.id).merge().build(),type:"GET",timeout:1E3*a});return{type:h.PR_CHECK_MERGEABILITY,
payload:null,meta:{promise:a.then(function(a){n.default.trigger(a.canMerge?"bitbucket.internal.pull-request.can.merge":"bitbucket.internal.pull-request.cant.merge",null,b,a.conflicted,a.vetoes,a.properties,a.outcome);return a})}}};var n=babelHelpers.interopRequireDefault(d),m=babelHelpers.interopRequireDefault(e),l=babelHelpers.interopRequireDefault(f),k=babelHelpers.interopRequireDefault(g);c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-action-creators', location = '/static/bitbucket/internal/feature/pull-request/action-creators/change-self-reviewer.js' */
define("bitbucket/internal/feature/pull-request/action-creators/change-self-reviewer","module exports bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/bbui/actions/pull-request bitbucket/internal/enums bitbucket/internal/model/pull-request-json bitbucket/internal/util/analytics".split(" "),function(g,a,k,l,m,n,p,q,r){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(b,d,c,a){var e="ADD_SELF"===c,f=b.toRef.repository,g=f.project;f=t.default.rest({type:e?
"POST":"DELETE",url:u.default.rest().project(g).repo(f).pullRequest(b).participants(e?null:d).build(),data:e?{user:d,role:"reviewer"}:null}).done(function(){v.default.trigger(e?"bitbucket.internal.feature.pullRequest.self.added":"bitbucket.internal.feature.pullRequest.self.removed",null,{action:c,user:d,pullRequest:(0,q.filter)(b)});w.default.add("pullRequest."+(c===h.default.SelfAction.ADD_SELF?"addSelf":"removeSelf"),{userStatus:a||h.default.ApprovalStatus.UNAPPROVED,"pullRequest.fromRef.repository.id":b.fromRef.repository.id,
"pullRequest.id":b.id,"pullRequest.toRef.repository.id":b.toRef.repository.id},!0)});return{type:n.PR_CHANGE_SELF_REVIEWER,payload:{pullRequest:b,user:d,selfAction:c},meta:{promise:f.then(function(a){return{pullRequest:b,user:a?a.user:null,selfAction:c}})}}};var v=babelHelpers.interopRequireDefault(k),u=babelHelpers.interopRequireDefault(l),t=babelHelpers.interopRequireDefault(m),h=babelHelpers.interopRequireDefault(p),w=babelHelpers.interopRequireDefault(r);g.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-action-creators', location = '/static/bitbucket/internal/feature/pull-request/action-creators/change-reviewer-status.js' */
define("bitbucket/internal/feature/pull-request/action-creators/change-reviewer-status","module exports lodash bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/bbui/actions/pull-request bitbucket/internal/enums bitbucket/internal/model/pull-request-json".split(" "),function(l,f,m,n,p,q,r,t,g){function u(a){function b(b,c){h.default.trigger(b,null,k.default.merge(a,{approved:c,pullRequest:(0,g.filter)(a.pullRequest)}))}if(a.newStatus!==e.default.ApprovalStatus.APPROVED&&
a.oldStatus!==e.default.ApprovalStatus.APPROVED)a.request.then(function(){var c=a.newStatus===e.default.ApprovalStatus.NEEDS_WORK;b("bitbucket.internal.widget.needs-work."+(c?"added":"removed"),c)});else{var c=a.newStatus===e.default.ApprovalStatus.APPROVED,d=c?{ing:"bitbucket.internal.widget.approve-button.adding",ed:"bitbucket.internal.widget.approve-button.added",failed:"bitbucket.internal.widget.approve-button.add.failed"}:{ing:"bitbucket.internal.widget.approve-button.removing",ed:"bitbucket.internal.widget.approve-button.removed",
failed:"bitbucket.internal.widget.approve-button.remove.failed"};b(d.ing,c);a.request.then(function(){b(d.ed,c)},function(){b(d.failed,!c)})}}Object.defineProperty(f,"__esModule",{value:!0});f.default=function(a){var b=a.pullRequest.toRef.repository,c=b.project,d=a.user;b=v.default.rest({type:"PUT",url:w.default.rest().project(c).repo(b).pullRequest(a.pullRequest).participants(d).withParams({avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})}).build(),data:{status:a.newStatus}});
a=k.default.merge(a,{request:b,prId:Number(a.pullRequest.id),user:d});u(a);return{type:r.PR_CHANGE_REVIEWER_STATE,payload:{pullRequest:a.pullRequest,user:a.user,newState:a.newStatus},meta:{promise:b.then(function(b){h.default.trigger("bitbucket.internal.feature.pullRequest.reviewerStatus.changed",null,{pullRequest:(0,g.filter)(a.pullRequest),user:b.user,newState:b.status,oldState:a.oldStatus});return{pullRequest:a.pullRequest,user:b.user,newState:b.status}})}}};var k=babelHelpers.interopRequireDefault(m),
h=babelHelpers.interopRequireDefault(n),w=babelHelpers.interopRequireDefault(p),v=babelHelpers.interopRequireDefault(q),e=babelHelpers.interopRequireDefault(t);l.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-action-creators', location = '/static/bitbucket/internal/feature/pull-request/action-creators/watch.js' */
define("bitbucket/internal/feature/pull-request/action-creators/watch","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/bbui/actions/pull-request bitbucket/internal/model/page-state bitbucket/internal/util/events".split(" "),function(d,c,h,k,l,m,n,p,q,r){Object.defineProperty(c,"__esModule",{value:!0});c.default=function(a){a=e.default.assign({},t,a);if(a.stateOnly)var b=u.default.Deferred().resolve();else b=v.default.rest().currentPullRequest().watch().build(),
b=w.default.rest({url:b,type:a.watchState?"POST":"DELETE",statusCode:{401:function(a,b,c,d,f){return e.default.assign({},f,{title:"Could not watch this.",message:"You do not have permission to watch this.",fallbackUrl:!1,shouldReload:!0})},409:function(a,b,c,d,f){return e.default.assign({},f,{title:"Could not watch this.",fallbackUrl:!1,shouldReload:!0})}}});b.done(function(){x.default.setIsWatching(a.watchState);
y.default.trigger(a.watchState?"bitbucket.internal.web.watch-button.added":"bitbucket.internal.web.watch-button.removed",null,a)});return{type:p.PR_WATCH,payload:a.watchState,meta:{promise:b}}};var g=babelHelpers.interopRequireDefault(h),u=babelHelpers.interopRequireDefault(k),e=babelHelpers.interopRequireDefault(l),v=babelHelpers.interopRequireDefault(m),w=babelHelpers.interopRequireDefault(n),x=babelHelpers.interopRequireDefault(q),y=babelHelpers.interopRequireDefault(r),t={stateOnly:!1};d.exports=
c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:form', location = '/static/bitbucket/internal/widget/form/form.soy' */
// This file was automatically generated from form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.form = function(opt_data, opt_ignored, opt_ijData) {
  var param3 = '' + ((opt_data.headingContent) ? soy.$$filterNoAutoescape(opt_data.headingContent) : '');
  if (opt_data.errors) {
    var messageList10 = opt_data.errors;
    var messageListLen10 = messageList10.length;
    for (var messageIndex10 = 0; messageIndex10 < messageListLen10; messageIndex10++) {
      var messageData10 = messageList10[messageIndex10];
      param3 += aui.message.error({content: '' + bitbucket.internal.widget.errorContent({message: messageData10}, null, opt_ijData)}, null, opt_ijData);
    }
  }
  if (opt_data.detailedErrors) {
    var errorList18 = opt_data.detailedErrors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      param3 += aui.message.error({content: '' + bitbucket.internal.widget.errorContent(errorData18, null, opt_ijData)}, null, opt_ijData);
    }
  }
  param3 += ((opt_data.additionalErrorContent) ? soy.$$filterNoAutoescape(opt_data.additionalErrorContent) : '') + soy.$$filterNoAutoescape(opt_data.content);
  var output = '' + aui.form.form({content: param3, action: opt_data.action, method: opt_data.method, enctype: opt_data.enctype, isUnsectioned: opt_data.isUnsectioned, isLongLabels: opt_data.isLongLabels, isTopLabels: opt_data.isTopLabels, id: opt_data.id, extraClasses: '' + ((! (opt_data.preventDoubleSubmit == false)) ? 'prevent-double-submit ' : '') + aui.renderExtraClasses(opt_data, null, opt_ijData), extraAttributes: 'accept-charset="UTF-8"' + ((opt_data.autocomplete) ? ' autocomplete="' + soy.$$escapeHtml(opt_data.autocomplete) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData)}, null, opt_ijData);
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.form.soyTemplateName = 'bitbucket.internal.widget.form';
}


bitbucket.internal.widget.xsrfProtectedForm = function(opt_data, opt_ignored, opt_ijData) {
  var param66 = '';
  var xsrfTokenName__soy67 = opt_data.xsrfTokenName ? opt_data.xsrfTokenName : opt_ijData.xsrfTokenName ? opt_ijData.xsrfTokenName : null;
  param66 += soy.$$filterNoAutoescape(opt_data.content) + ((xsrfTokenName__soy67) ? '<input type="hidden" name="' + soy.$$escapeHtml(xsrfTokenName__soy67) + '" value="' + soy.$$escapeHtml(opt_data.xsrfTokenValue ? opt_data.xsrfTokenValue : opt_ijData.xsrfTokenValue ? opt_ijData.xsrfTokenValue : null) + '">' : '');
  var output = '' + bitbucket.internal.widget.form({action: opt_data.action, method: opt_data.method, enctype: opt_data.enctype, isUnsectioned: opt_data.isUnsectioned, isLongLabels: opt_data.isLongLabels, isTopLabels: opt_data.isTopLabels, id: opt_data.id, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, errors: opt_data.errors, detailedErrors: opt_data.detailedErrors, additionalErrorContent: opt_data.additionalErrorContent, preventDoubleSubmit: opt_data.preventDoubleSubmit, autocomplete: opt_data.autocomplete, headingContent: opt_data.headingContent ? opt_data.headingContent : null, content: param66}, null, opt_ijData);
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.xsrfProtectedForm.soyTemplateName = 'bitbucket.internal.widget.xsrfProtectedForm';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:form', location = '/static/bitbucket/internal/widget/form/xsrfProtectedForm.soy' */
// This file was automatically generated from xsrfProtectedForm.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.form.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.form == 'undefined') { widget.form = {}; }


widget.form.xsrfProtectedForm = function(opt_data, opt_ignored, opt_ijData) {
  return '' + widget.aui.form.form(soy.$$augmentMap(opt_data, {xsrfTokenName: opt_ijData.xsrfTokenName ? opt_ijData.xsrfTokenName : null, xsrfTokenValue: opt_ijData.xsrfTokenValue ? opt_ijData.xsrfTokenValue : null}), null, opt_ijData);
};
if (goog.DEBUG) {
  widget.form.xsrfProtectedForm.soyTemplateName = 'widget.form.xsrfProtectedForm';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:focus-snapshots', location = '/static/bitbucket/internal/util/focus-snapshot.js' */
define("bitbucket/internal/util/focus-snapshot",["module","exports","jquery"],function(d,a,e){Object.defineProperty(a,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(e);a.default=function(){var b,c;return{save:function(){var a=document.activeElement;a&&(b=(0,f.default)(a),b.is(":text, textarea")&&(c=b.getSelection()))},restore:function(){b&&(b.focus(),c&&b.setSelection(c.start,c.end))}}}();d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.auiplugin:internal-src-js-vendor-jquery-plugins-jquery-select2', location = 'src/js-vendor/jquery/plugins/jquery.select2.js' */
("undefined"===typeof window?global:window).__b2190710f2822b5d7286528d3eaff37f=function(){var y=jQuery;"undefined"==typeof y.fn.each2&&y.extend(y.fn,{each2:function(a){for(var b=y([0]),c=-1,d=this.length;++c<d&&(b.context=b[0]=this[c])&&!1!==a.call(b[0],c,b););return this}});var e=jQuery,w=function(a){var b,c,d,g;if(!a||1>a.length)return a;b="";c=0;for(d=a.length;c<d;c++)g=a.charAt(c),b+=O[g]||g;return b},k=function(a,b){for(var c=0,d=b.length;c<d;c+=1)if(m(a,b[c]))return c;return-1},m=function(a,
b){return a===b?!0:void 0===a||void 0===b||null===a||null===b?!1:a.constructor===String?a+""===b+"":b.constructor===String?b+""===a+"":!1},B=function(a,b){var c,d,g;if(null===a||1>a.length)return[];c=a.split(b);d=0;for(g=c.length;d<g;d+=1)c[d]=e.trim(c[d]);return c},G=function(a){a.on("keydown",function(){void 0===e.data(a,"keyup-change-value")&&e.data(a,"keyup-change-value",a.val())});a.on("keyup",function(){var b=e.data(a,"keyup-change-value");void 0!==b&&a.val()!==b&&(e.removeData(a,"keyup-change-value"),
a.trigger("keyup-change"))})},H=function(a,b,c){var c=c||void 0,d;return function(){var g=arguments;window.clearTimeout(d);d=window.setTimeout(function(){b.apply(c,g)},a)}},j=function(a){a.preventDefault();a.stopPropagation()},z=function(a,b,c){var d,g=[],h;(d=a.attr("class"))&&e((""+d).split(" ")).each2(function(){0===this.indexOf("select2-")&&g.push(this)});(d=b.attr("class"))&&e((""+d).split(" ")).each2(function(){0!==this.indexOf("select2-")&&(h=c(this))&&g.push(h)});a.attr("class",g.join(" "))},
I=function(a,b,c,d){var g=w(a.toUpperCase()).indexOf(w(b.toUpperCase())),b=b.length;0>g?c.push(d(a)):(c.push(d(a.substring(0,g))),c.push("<span class='select2-match'>"),c.push(d(a.substring(g,g+b))),c.push("</span>"),c.push(d(a.substring(g+b,a.length))))},J=function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})},K=function(a){var b,c=null,d=a.quietMillis||100,g=a.url,h=this;return function(l){window.clearTimeout(b);
b=window.setTimeout(function(){var b=a.data,d=g,t=a.transport||e.fn.select2.ajaxDefaults.transport,f=e.extend({},e.fn.select2.ajaxDefaults.params,{type:a.type||"GET",cache:a.cache||!1,jsonpCallback:a.jsonpCallback||void 0,dataType:a.dataType||"json"}),b=b?b.call(h,l.term,l.page,l.context):null,d="function"===typeof d?d.call(h,l.term,l.page,l.context):d;c&&c.abort();a.params&&(e.isFunction(a.params)?e.extend(f,a.params.call(h)):e.extend(f,a.params));e.extend(f,{url:d,dataType:a.dataType,data:b,success:function(b){b=
a.results(b,l.page);l.callback(b)}});c=t.call(h,f)},d)}},L=function(a){var b=a,c,d,g=function(a){return""+a.text};e.isArray(b)&&(d=b,b={results:d});!1===e.isFunction(b)&&(d=b,b=function(){return d});a=b();a.text&&(g=a.text,e.isFunction(g)||(c=a.text,g=function(a){return a[c]}));return function(a){var c=a.term,d={results:[]},n;if(c==="")a.callback(b());else{n=function(b,d){var i,f,b=b[0];if(b.children){i={};for(f in b)b.hasOwnProperty(f)&&(i[f]=b[f]);i.children=[];e(b.children).each2(function(a,b){n(b,
i.children)});(i.children.length||a.matcher(c,g(i),b))&&d.push(i)}else a.matcher(c,g(b),b)&&d.push(b)};e(b().results).each2(function(a,b){n(b,d.results)});a.callback(d)}}},M=function(a){var b=e.isFunction(a);return function(c){var d=c.term,g={results:[]};e(b?a():a).each(function(){var a=void 0!==this.text,b=a?this.text:this;if(""===d||c.matcher(d,b))g.results.push(a?this:{id:this,text:this})});c.callback(g)}},r=function(a,b){if(e.isFunction(a))return!0;if(!a)return!1;throw Error(b+" must be a function or a falsy value");
},o=function(a){return e.isFunction(a)?a():a},N=function(a){var b=0;e.each(a,function(a,d){d.children?b+=N(d.children):b++});return b},P=function(a,b,c,d){var g=a,h=!1,e,i,f,t;if(d.createSearchChoice&&d.tokenSeparators&&!(1>d.tokenSeparators.length)){for(;;){h=-1;i=0;for(f=d.tokenSeparators.length;i<f&&!(t=d.tokenSeparators[i],h=a.indexOf(t),0<=h);i++);if(0>h)break;e=a.substring(0,h);a=a.substring(h+t.length);if(0<e.length&&(e=d.createSearchChoice.call(this,e,b),void 0!==e&&null!==e&&void 0!==d.id(e)&&
null!==d.id(e))){h=!1;i=0;for(f=b.length;i<f;i++)if(m(d.id(e),d.id(b[i]))){h=!0;break}h||c(e)}}if(g!==a)return a}},C=function(a,b){var c=function(){};c.prototype=new a;c.prototype.constructor=c;c.prototype.parent=a.prototype;c.prototype=e.extend(c.prototype,b);return c};if(void 0===window.Select2){var f,s,D,E,A,v,x={x:0,y:0},F;f={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=
a.which?a.which:a;switch(a){case f.LEFT:case f.RIGHT:case f.UP:case f.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case f.SHIFT:case f.CTRL:case f.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}};var O={"\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A",
"\u00c4":"A","\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C",
"\u00c7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E",
"\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H",
"\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\u00cf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K",
"\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N",
"\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O",
"\u1ed8":"O","\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R",
"\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U",
"\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W",
"\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a",
"\u1e9a":"a","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av",
"\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e",
"\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\u00eb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g",
"\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i",
"\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l",
"\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o",
"\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p",
"\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\u00df":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s",
"\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u",
"\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y",
"\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z"};s=e(document);var Q=1;A=function(){return Q++};s.on("mousemove",function(a){x.x=a.pageX;x.y=a.pageY});s=C(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(a){var b,c;this.opts=a=this.prepareOpts(a);
this.id=a.id;void 0!==a.element.data("select2")&&null!==a.element.data("select2")&&a.element.data("select2").destroy();this.container=this.createContainer();this.containerId="s2id_"+(a.element.attr("id")||"autogen"+A());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);var d=!1,g;this.body=function(){!1===d&&(g=a.element.closest("body"),d=!0);return g};z(this.container,this.opts.element,this.opts.adaptContainerCssClass);
this.container.attr("style",a.element.attr("style"));this.container.css(o(a.containerCss));this.container.addClass(o(a.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",j);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(o(a.dropdownCssClass));
this.dropdown.data("select2",this);this.dropdown.on("click",j);this.results=b=this.container.find(".select2-results");this.search=c=this.container.find("input.select2-input");this.resultsPage=this.queryCount=0;this.context=null;this.initContainer();this.container.on("click",j);this.results.on("mousemove",function(a){(void 0===x||x.x!==a.pageX||x.y!==a.pageY)&&e(a.target).trigger("mousemove-filtered",a)});this.dropdown.on("mousemove-filtered touchstart touchmove touchend",".select2-results",this.bind(this.highlightUnderEvent));
var h=this.results,l=H(80,function(a){h.trigger("scroll-debounced",a)});h.on("scroll",function(a){0<=k(a.target,h.get())&&l(a)});this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded));e(this.container).on("change",".select2-input",function(a){a.stopPropagation()});e(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()});e.fn.mousewheel&&b.mousewheel(function(a,c,d,g){c=b.scrollTop();0<g&&0>=c-g?(b.scrollTop(0),j(a)):0>g&&b.get(0).scrollHeight-
b.scrollTop()+g<=b.height()&&(b.scrollTop(b.get(0).scrollHeight-b.height()),j(a))});G(c);c.on("keyup-change input paste",this.bind(this.updateResults));c.on("focus",function(){c.addClass("select2-focused")});c.on("blur",function(){c.removeClass("select2-focused")});this.dropdown.on("mouseup",".select2-results",this.bind(function(a){0<e(a.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(a),this.selectHighlighted(a))}));this.dropdown.on("click mouseup mousedown",function(a){a.stopPropagation()});
e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());null!==a.maximumInputLength&&this.search.attr("maxlength",a.maximumInputLength);var i=a.element.prop("disabled");void 0===i&&(i=!1);this.enable(!i);i=a.element.prop("readonly");void 0===i&&(i=!1);this.readonly(i);if(!(i=F)){i=e("<div class='select2-measure-scrollbar'></div>");i.appendTo("body");var f={width:i.width()-i[0].clientWidth,height:i.height()-i[0].clientHeight};i.remove();i=f}F=i;this.autofocus=a.element.prop("autofocus");
a.element.prop("autofocus",!1);this.autofocus&&this.focus();this.nextSearchTerm=void 0},destroy:function(){var a=this.opts.element,b=a.data("select2");this.close();this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null);void 0!==b&&(b.container.remove(),b.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show())},
optionToData:function(a){if(a.is("option"))return{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:m(a.attr("locked"),"locked")||m(a.data("locked"),!0)};if(a.is("optgroup"))return{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}},prepareOpts:function(a){var b,c,d,g=this;b=a.element;"select"===b.get(0).tagName.toLowerCase()&&(this.select=c=a.element);c&&e.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),
function(){if(this in a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");});a=e.extend({},{populateResults:function(b,c,d){var f,t=this.opts.id;f=function(b,c,h){var l,j,m,k,o,u,q,b=a.sortResults(b,c,d);l=0;for(j=b.length;l<j;l=l+1){m=b[l];o=m.disabled===true;k=!o&&t(m)!==void 0;u=m.children&&m.children.length>0;q=e("<li></li>");q.addClass("select2-results-dept-"+h);q.addClass("select2-result");q.addClass(k?"select2-result-selectable":"select2-result-unselectable");
o&&q.addClass("select2-disabled");u&&q.addClass("select2-result-with-children");q.addClass(g.opts.formatResultCssClass(m));k=e(document.createElement("div"));k.addClass("select2-result-label");o=a.formatResult(m,k,d,g.opts.escapeMarkup);o!==void 0&&k.html(o);q.append(k);if(u){u=e("<ul></ul>");u.addClass("select2-result-sub");f(m.children,u,h+1);q.append(u)}q.data("select2-data",m);c.append(q)}};f(c,b,0)}},e.fn.select2.defaults,a);"function"!==typeof a.id&&(d=a.id,a.id=function(a){return a[d]});if(e.isArray(a.element.data("select2Tags"))){if("tags"in
a)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+a.element.attr("id");a.tags=a.element.data("select2Tags")}if(c)a.query=this.bind(function(a){var c={results:[],more:false},d=a.term,e,f,p;p=function(b,c){var e;if(b.is("option"))a.matcher(d,b.text(),b)&&c.push(g.optionToData(b));else if(b.is("optgroup")){e=g.optionToData(b);b.children().each2(function(a,b){p(b,e.children)});e.children.length>0&&c.push(e)}};e=b.children();if(this.getPlaceholder()!==void 0&&
e.length>0)(f=this.getPlaceholderOption())&&(e=e.not(f));e.each2(function(a,b){p(b,c.results)});a.callback(c)}),a.id=function(a){return a.id},a.formatResultCssClass=function(a){return a.css};else if(!("query"in a))if("ajax"in a){if((c=a.element.data("ajax-url"))&&0<c.length)a.ajax.url=c;a.query=K.call(a.element,a.ajax)}else if("data"in a)a.query=L(a.data);else if("tags"in a&&(a.query=M(a.tags),void 0===a.createSearchChoice&&(a.createSearchChoice=function(a){return{id:e.trim(a),text:e.trim(a)}}),void 0===
a.initSelection))a.initSelection=function(b,c){var d=[];e(B(b.val(),a.separator)).each(function(){var b={id:this,text:this},c=a.tags;e.isFunction(c)&&(c=c());e(c).each(function(){if(m(this.id,b.id)){b=this;return false}});d.push(b)});c(d)};if("function"!==typeof a.query)throw"query function not defined for Select2 "+a.element.attr("id");return a},monitorSource:function(){var a=this.opts.element,b,c;a.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&
this.initSelection()}));b=this.bind(function(){var b=a.prop("disabled");void 0===b&&(b=!1);this.enable(!b);b=a.prop("readonly");void 0===b&&(b=!1);this.readonly(b);z(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(o(this.opts.containerCssClass));z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(o(this.opts.dropdownCssClass))});a.on("propertychange.select2",b);void 0===this.mutationCallback&&(this.mutationCallback=function(a){a.forEach(b)});
c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;void 0!==c&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new c(this.mutationCallback),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(a){a=e.Event("select2-selecting",{val:this.id(a),object:a});this.opts.element.trigger(a);return!a.isDefaultPrevented()},triggerChange:function(a){a=a||{};a=e.extend({},a,{type:"change",
val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(a);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var a=this._enabled&&!this._readonly;if(a===this.enabledInterface)return!1;this.container.toggleClass("select2-container-disabled",!a);this.close();this.enabledInterface=a;return!0},
enable:function(a){void 0===a&&(a=!0);this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){void 0===a&&(a=!1);if(this._readonly===a)return!1;this._readonly=a;this.opts.element.prop("readonly",a);this.enableInterface();return!0},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var a=this.dropdown,b=this.container.offset(),c=this.container.outerHeight(!1),
d=this.container.outerWidth(!1),g=a.outerHeight(!1),h=e(window),f=h.width(),i=h.height(),n=h.scrollLeft()+f,j=h.scrollTop()+i,c=b.top+c,p=b.left,j=c+g<=j,m=b.top-g>=this.body().scrollTop(),k=a.outerWidth(!1),r=p+k<=n,s;a.hasClass("select2-drop-above")?(g=!0,!m&&j&&(s=!0,g=!1)):(g=!1,!j&&m&&(g=s=!0));s&&(a.hide(),b=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),a.outerHeight(!1),n=h.scrollLeft()+f,h.scrollTop(),c=b.top+c,p=b.left,k=a.outerWidth(!1),r=p+k<=
n,a.show());this.opts.dropdownAutoWidth?(h=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),k=a.outerWidth(!1)+(h.scrollHeight===h.clientHeight?0:F.width),k>d?d=k:k=d,r=p+k<=n):this.container.removeClass("select2-drop-auto-width");"static"!==this.body().css("position")&&(n=this.body().offset(),c-=n.top,p-=n.left);r||(p=b.left+d-k);d={left:p,width:d};g?(d.bottom=i-b.top,d.top="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(d.top=
c,d.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above"));d=e.extend(d,o(this.opts.dropdownCss));a.css(d)},shouldOpen:function(){var a;if(this.opened()||!1===this._enabled||!0===this._readonly)return!1;a=e.Event("select2-opening");this.opts.element.trigger(a);return!a.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;
this.opening();return!0},opening:function(){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());a=e("#select2-drop-mask");0==a.length&&(a=e(document.createElement("div")),a.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),a.hide(),a.appendTo(this.body()),
a.on("mousedown touchstart click",function(a){var b=e("#select2-drop");0<b.length&&(b=b.data("select2"),b.opts.selectOnBlur&&b.selectHighlighted({noFocus:!0}),b.close({focus:!0}),a.preventDefault(),a.stopPropagation())}));this.dropdown.prev()[0]!==a[0]&&this.dropdown.before(a);e("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");a.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var g=this;this.container.parents().add(window).each(function(){e(this).on(c+
" "+b+" "+d,function(){g.positionDropdown()})})},close:function(){if(this.opened()){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.parents().add(window).each(function(){e(this).off(b).off(c).off(d)});this.clearDropdownAlignmentPreference();e("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");
this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(a){this.open();this.search.val(a);this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return o(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var a=this.results,b,c,d,g;c=this.highlight();0>c||(0==c?a.scrollTop(0):(b=this.findHighlightableChoices().find(".select2-result-label"),d=e(b[c]),g=d.offset().top+d.outerHeight(!0),c===b.length-1&&(b=a.find("li.select2-more-results"),
0<b.length&&(g=b.offset().top+b.outerHeight(!0))),b=a.offset().top+a.outerHeight(!0),g>b&&a.scrollTop(a.scrollTop()+(g-b)),g=d.offset().top-a.offset().top,0>g&&"none"!=d.css("display")&&a.scrollTop(a.scrollTop()+g)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(a){for(var b=this.findHighlightableChoices(),c=this.highlight();-1<c&&c<b.length;){var c=c+a,d=e(b[c]);if(d.hasClass("select2-result-selectable")&&
!d.hasClass("select2-disabled")&&!d.hasClass("select2-selected")){this.highlight(c);break}}},highlight:function(a){var b=this.findHighlightableChoices();if(0===arguments.length)return k(b.filter(".select2-highlighted")[0],b.get());a>=b.length&&(a=b.length-1);0>a&&(a=0);this.removeHighlight();b=e(b[a]);b.addClass("select2-highlighted");this.ensureHighlightVisible();(b=b.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(b),choice:b})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},
countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(a){a=e(a.target).closest(".select2-result-selectable");if(0<a.length&&!a.is(".select2-highlighted")){var b=this.findHighlightableChoices();this.highlight(b.index(a))}else 0==a.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c,d=this.resultsPage+1,e=this,h=this.search.val(),f=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-
a.height(),c<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:h,page:d,context:f,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:h,page:d,context:f}),e.postprocessResults(c,!1,!1),!0===c.more?(b.detach().appendTo(a).text(e.opts.formatLoadMore(d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,
this.opts.element.trigger({type:"select2-loaded",items:c}))})})))},tokenize:function(){},updateResults:function(a){function b(){d.removeClass("select2-active");i.positionDropdown()}function c(a){g.html(a);b()}var d=this.search,g=this.results,h=this.opts,f,i=this;f=d.val();var n=e.data(this.container,"select2-last-term"),j;if(!(!0!==a&&n&&m(f,n))&&(e.data(this.container,"select2-last-term",f),!(!0!==a&&(!1===this.showSearchInput||!this.opened())))){j=++this.queryCount;n=this.getMaximumSelectionSize();
if(1<=n&&(f=this.data(),e.isArray(f)&&f.length>=n&&r(h.formatSelectionTooBig,"formatSelectionTooBig"))){c("<li class='select2-selection-limit'>"+h.formatSelectionTooBig(n)+"</li>");return}d.val().length<h.minimumInputLength?(r(h.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+h.formatInputTooShort(d.val(),h.minimumInputLength)+"</li>"):c(""),a&&this.showSearch&&this.showSearch(!0)):h.maximumInputLength&&d.val().length>h.maximumInputLength?r(h.formatInputTooLong,"formatInputTooLong")?
c("<li class='select2-no-results'>"+h.formatInputTooLong(d.val(),h.maximumInputLength)+"</li>"):c(""):(h.formatSearching&&0===this.findHighlightableChoices().length&&c("<li class='select2-searching'>"+h.formatSearching()+"</li>"),d.addClass("select2-active"),this.removeHighlight(),f=this.tokenize(),void 0!=f&&null!=f&&d.val(f),this.resultsPage=1,h.query({element:h.element,term:d.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(f){var l;j==this.queryCount&&(this.opened()?
(this.context=void 0===f.context?null:f.context,this.opts.createSearchChoice&&""!==d.val()&&(l=this.opts.createSearchChoice.call(i,d.val(),f.results),void 0!==l&&null!==l&&void 0!==i.id(l)&&null!==i.id(l)&&0===e(f.results).filter(function(){return m(i.id(this),i.id(l))}).length&&f.results.unshift(l)),0===f.results.length&&r(h.formatNoMatches,"formatNoMatches"))?c("<li class='select2-no-results'>"+h.formatNoMatches(d.val())+"</li>"):(g.empty(),i.opts.populateResults.call(this,g,f.results,{term:d.val(),
page:this.resultsPage,context:null}),!0===f.more&&r(h.formatLoadMore,"formatLoadMore")&&(g.append("<li class='select2-more-results'>"+i.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){i.loadMoreIfNeeded()},10)),this.postprocessResults(f,a),b(),this.opts.element.trigger({type:"select2-loaded",items:f})):this.search.removeClass("select2-active"))})}))}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});
this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var a=this.search;a[0]!==document.activeElement&&window.setTimeout(function(){var b=a[0],c=a.val().length;a.focus();a.is(":visible")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(b=b.createTextRange(),
b.collapse(!1),b.select()))},0)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");c?(this.highlight(b),this.onSelect(c,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||(void 0!==(a=this.getPlaceholderOption())?a.text():void 0)},getPlaceholderOption:function(){if(this.select){var a=
this.select.children("option").first();if(void 0!==this.opts.placeholderOption)return"first"===this.opts.placeholderOption&&a||"function"===typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.text()&&""===a.val())return a}},initContainerWidth:function(){var a=function(){var a,c,d,g;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||
"resolve"===this.opts.width){a=this.opts.element.attr("style");if(void 0!==a){a=a.split(";");d=0;for(g=a.length;d<g;d+=1)if(c=a[d].replace(/\s/g,""),c=c.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==c&&1<=c.length)return c[1]}return"resolve"===this.opts.width?(a=this.opts.element.css("width"),0<a.indexOf("%")?a:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);
null!==a&&this.container.css("width",a)}});D=C(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>   <span class='select2-arrow'><b></b></span></a><input class='select2-focusser select2-offscreen' type='text'/><div class='select2-drop select2-display-none'>   <div class='select2-search'>       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>   </div>   <ul class='select2-results'>   </ul></div>")},
enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var a,b;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0);this.parent.opening.apply(this,arguments);!1!==this.showSearchInput&&this.search.val(this.focusser.val());this.search.focus();a=this.search.get(0);a.createTextRange?(a=a.createTextRange(),a.collapse(!1),a.select()):a.setSelectionRange&&(b=this.search.val().length,a.setSelectionRange(b,
b));""===this.search.val()&&void 0!=this.nextSearchTerm&&(this.search.val(this.nextSearchTerm),this.search.select());this.focusser.prop("disabled",!0).val("");this.updateResults(!0);this.opts.element.trigger(e.Event("select2-open"))},close:function(a){this.opened()&&(this.parent.close.apply(this,arguments),a=a||{focus:!0},this.focusser.removeAttr("disabled"),a.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},
cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a,b=this.container,c=this.dropdown;0>this.opts.minimumResultsForSearch?this.showSearch(!1):this.showSearch(!0);this.selection=a=b.find(".select2-choice");this.focusser=b.find(".select2-focusser");this.focusser.attr("id",
"s2id_autogen"+A());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));this.focusser.attr("tabindex",this.elementTabIndex);this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled())if(a.which===f.PAGE_UP||a.which===f.PAGE_DOWN)j(a);else switch(a.which){case f.UP:case f.DOWN:this.moveHighlight(a.which===f.UP?-1:1);j(a);break;case f.ENTER:this.selectHighlighted();j(a);break;case f.TAB:this.selectHighlighted({noFocus:!0});break;case f.ESC:this.cancel(a),
j(a)}}));this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)}));this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&!(a.which===f.TAB||f.isControl(a)||f.isFunctionKey(a)||a.which===f.ESC))if(!1===this.opts.openOnEnter&&a.which===f.ENTER)j(a);else if(a.which==f.DOWN||a.which==f.UP||a.which==f.ENTER&&this.opts.openOnEnter)!a.altKey&&(!a.ctrlKey&&!a.shiftKey&&!a.metaKey)&&(this.open(),
j(a));else if(a.which==f.DELETE||a.which==f.BACKSPACE)this.opts.allowClear&&this.clear(),j(a)}));G(this.focusser);this.focusser.on("keyup-change input",this.bind(function(a){0<=this.opts.minimumResultsForSearch&&(a.stopPropagation(),this.opened()||this.open())}));a.on("mousedown","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),a.preventDefault(),a.stopImmediatePropagation(),this.close(),this.selection.focus())}));a.on("mousedown",this.bind(function(a){this.container.hasClass("select2-container-active")||
this.opts.element.trigger(e.Event("select2-focus"));this.opened()?this.close():this.isInterfaceEnabled()&&this.open();j(a)}));c.on("mousedown",this.bind(function(){this.search.focus()}));a.on("focus",this.bind(function(a){j(a)}));this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),
this.opts.element.trigger(e.Event("select2-blur")))}));this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(a){var b=this.selection.data("select2-data");if(b){var c=e.Event("select2-clearing");this.opts.element.trigger(c);c.isDefaultPrevented()||
(c=this.getPlaceholderOption(),this.opts.element.val(c?c.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==a&&(this.opts.element.trigger({type:"select2-removed",val:this.id(b),choice:b}),this.triggerChange({removed:b})))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){void 0!==
b&&null!==b&&(a.updateSelection(b),a.close(),a.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var a;return!this.getPlaceholder()?!1:void 0!==(a=this.getPlaceholderOption())&&a.prop("selected")||""===this.opts.element.val()||void 0===this.opts.element.val()||null===this.opts.element.val()},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=a.find("option").filter(function(){return this.selected});
d(b.optionToData(e))}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var g=b.val(),f=null;a.query({matcher:function(b,c,d){(b=m(g,a.id(d)))&&(f=d);return b},callback:!e.isFunction(d)?e.noop:function(){d(f)}})});return a},getPlaceholder:function(){return this.select&&void 0===this.getPlaceholderOption()?void 0:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();this.isPlaceholderOptionSelected()&&void 0!==a&&!(this.select&&void 0===this.getPlaceholderOption())&&
(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"))},postprocessResults:function(a,b,c){var d=0,e=this;this.findHighlightableChoices().each2(function(a,b){if(m(e.id(b.data("select2-data")),e.opts.element.val()))return d=a,!1});!1!==c&&(!0===b&&0<=d?this.highlight(d):this.highlight(0));!0===b&&(b=this.opts.minimumResultsForSearch,0<=b&&this.showSearch(N(a.results)>=b))},showSearch:function(a){this.showSearchInput!==
a&&(this.showSearchInput=a,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!a),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!a),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",a))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a));this.updateSelection(a);this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a});this.nextSearchTerm=
this.opts.nextSearchTerm(a,this.search.val());this.close();(!b||!b.noFocus)&&this.focusser.focus();m(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var b=this.selection.find(".select2-chosen"),c;this.selection.data("select2-data",a);b.empty();null!==a&&(c=this.opts.formatSelection(a,b,this.opts.escapeMarkup));void 0!==c&&b.append(c);a=this.opts.formatSelectionCssClass(a,b);void 0!==a&&b.addClass(a);this.selection.removeClass("select2-default");this.opts.allowClear&&
void 0!==this.getPlaceholder()&&this.container.addClass("select2-allowclear")},val:function(){var a,b=!1,c=null,d=this,e=this.data();if(0===arguments.length)return this.opts.element.val();a=arguments[0];1<arguments.length&&(b=arguments[1]);if(this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){c=d.optionToData(b);return!1}),this.updateSelection(c),this.setPlaceholder(),b&&this.triggerChange({added:c,removed:e});else if(!a&&0!==a)this.clear(b);
else{if(void 0===this.opts.initSelection)throw Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a);this.opts.initSelection(this.opts.element,function(a){d.opts.element.val(!a?"":d.id(a));d.updateSelection(a);d.setPlaceholder();b&&d.triggerChange({added:a,removed:e})})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(a){var b,c=!1;if(0===arguments.length)return b=this.selection.data("select2-data"),void 0==b&&(b=null),b;1<arguments.length&&
(c=arguments[1]);a?(b=this.data(),this.opts.element.val(!a?"":this.id(a)),this.updateSelection(a),c&&this.triggerChange({added:a,removed:b})):this.clear(c)}});E=C(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("<ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi select2-display-none'>   <ul class='select2-results'>   </ul></div>")},
prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=[];a.find("option").filter(function(){return this.selected}).each2(function(a,c){e.push(b.optionToData(c))});d(e)}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var g=B(b.val(),a.separator),f=[];a.query({matcher:function(b,c,d){(b=e.grep(g,function(b){return m(b,a.id(d))}).length)&&f.push(d);return b},callback:!e.isFunction(d)?
e.noop:function(){for(var b=[],c=0;c<g.length;c++)for(var e=g[c],j=0;j<f.length;j++){var k=f[j];if(m(e,a.id(k))){b.push(k);f.splice(j,1);break}}d(b)}})});return a},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");if(!b.length||!(a&&a[0]==b[0]))b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a))},destroy:function(){e("label[for='"+
this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a;this.searchContainer=this.container.find(".select2-search-field");this.selection=a=this.container.find(".select2-choices");var b=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){b.search[0].focus();b.selectChoice(e(this))});this.search.attr("id","s2id_autogen"+A());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",
this.search.attr("id"));this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(b){var d,g;if(this.isInterfaceEnabled()){++this.keydowns;var h=a.find(".select2-search-choice-focus"),l=h.prev(".select2-search-choice:not(.select2-locked)"),i=h.next(".select2-search-choice:not(.select2-locked)");d=this.search;d=e(d)[0];var k=0;g=0;"selectionStart"in
d?(k=d.selectionStart,g=d.selectionEnd-k):"selection"in document&&(d.focus(),k=document.selection.createRange(),g=document.selection.createRange().text.length,k.moveStart("character",-d.value.length),k=k.text.length-g);d=k;if(h.length&&(b.which==f.LEFT||b.which==f.RIGHT||b.which==f.BACKSPACE||b.which==f.DELETE||b.which==f.ENTER))g=h,b.which==f.LEFT&&l.length?g=l:b.which==f.RIGHT?g=i.length?i:null:b.which===f.BACKSPACE?(this.unselect(h.first()),this.search.width(10),g=l.length?l:i):b.which==f.DELETE?
(this.unselect(h.first()),this.search.width(10),g=i.length?i:null):b.which==f.ENTER&&(g=null),this.selectChoice(g),j(b),(!g||!g.length)&&this.open();else if((b.which===f.BACKSPACE&&1==this.keydowns||b.which==f.LEFT)&&0==d&&!g)this.selectChoice(a.find(".select2-search-choice:not(.select2-locked)").last()),j(b);else{this.selectChoice(null);if(this.opened())switch(b.which){case f.UP:case f.DOWN:this.moveHighlight(b.which===f.UP?-1:1);j(b);return;case f.ENTER:this.selectHighlighted();j(b);return;case f.TAB:this.selectHighlighted({noFocus:!0});
this.close();return;case f.ESC:this.cancel(b);j(b);return}b.which===f.TAB||f.isControl(b)||f.isFunctionKey(b)||b.which===f.BACKSPACE||b.which===f.ESC||b.which===f.ENTER&&(!1===this.opts.openOnEnter||b.altKey||b.ctrlKey||b.shiftKey||b.metaKey)||(this.open(),(b.which===f.PAGE_UP||b.which===f.PAGE_DOWN)&&j(b),b.which===f.ENTER&&j(b))}}}));this.search.on("keyup",this.bind(function(){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(a){this.container.removeClass("select2-container-active");
this.search.removeClass("select2-focused");this.selectChoice(null);this.opened()||this.clearSearch();a.stopImmediatePropagation();this.opts.element.trigger(e.Event("select2-blur"))}));this.container.on("click",".select2-choices",this.bind(function(a){this.isInterfaceEnabled()&&!(0<e(a.target).closest(".select2-search-choice").length)&&(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),
this.focusSearch(),a.preventDefault())}));this.container.on("focus",".select2-choices",this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,
arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){if(b!==void 0&&b!==null){a.updateSelection(b);a.close();a.clearSearch()}})}},clearSearch:function(){var a=this.getPlaceholder(),b=this.getMaxSearchWidth();void 0!==a&&
0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.search.width(0<b?b:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.updateResults(!0);this.search.focus();this.opts.element.trigger(e.Event("select2-open"))},
close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(a){var b=[],c=[],d=this;e(a).each(function(){0>k(d.id(this),b)&&(b.push(d.id(this)),c.push(this))});a=c;this.selection.find(".select2-search-choice").remove();e(a).each(function(){d.addSelectedChoice(this)});d.postprocessResults()},tokenize:function(){var a=this.search.val(),a=this.opts.tokenizer.call(this,
a,this.data(),this.bind(this.onSelect),this.opts);null!=a&&void 0!=a&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a,b){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&
this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),(!b||!b.noFocus)&&this.focusSearch())},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var b=!a.locked,c=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),d=e("<li class='select2-search-choice select2-locked'><div></div></li>"),
c=b?c:d,d=this.id(a),f=this.getVal(),h;h=this.opts.formatSelection(a,c.find("div"),this.opts.escapeMarkup);void 0!=h&&c.find("div").replaceWith("<div>"+h+"</div>");h=this.opts.formatSelectionCssClass(a,c.find("div"));void 0!=h&&c.addClass(h);if(b)c.find(".select2-search-choice-close").on("mousedown",j).on("click dblclick",this.bind(function(a){this.isInterfaceEnabled()&&(e(a.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(a.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");
this.close();this.focusSearch()})).dequeue(),j(a))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));c.data("select2-data",a);c.insertBefore(this.searchContainer);f.push(d);this.setVal(f)},unselect:function(a){var b=this.getVal(),c,d,a=a.closest(".select2-search-choice");if(0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";if(c=a.data("select2-data")){for(;0<=
(d=k(this.id(c),b));)b.splice(d,1),this.setVal(b),this.select&&this.postprocessResults();b=e.Event("select2-removing");b.val=this.id(c);b.choice=c;this.opts.element.trigger(b);b.isDefaultPrevented()||(a.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},postprocessResults:function(a,b,c){var d=this.getVal(),b=this.results.find(".select2-result"),e=this.results.find(".select2-result-with-children"),f=this;b.each2(function(a,b){var c=
f.id(b.data("select2-data"));0<=k(c,d)&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))});e.each2(function(a,b){!b.is(".select2-result-selectable")&&0===b.find(".select2-result-selectable:not(.select2-selected)").length&&b.addClass("select2-selected")});-1==this.highlight()&&!1!==c&&f.highlight(0);!this.opts.createSearchChoice&&0<!b.filter(".select2-result:not(.select2-selected)").length&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&
r(f.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+f.opts.formatNoMatches(f.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-(this.search.outerWidth(!1)-this.search.width())},resizeSearch:function(){var a,b,c,d,f=this.search.outerWidth(!1)-this.search.width();a=this.search;v||(c=a[0].currentStyle||window.getComputedStyle(a[0],null),v=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",
display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),v.attr("class","select2-sizer"),e("body").append(v));v.text(a.val());a=v.width()+10;b=this.search.offset().left;c=this.selection.width();d=this.selection.offset().left;b=c-(b-d)-f;b<a&&(b=c-f);40>b&&(b=c-f);0>=b&&(b=a);this.search.width(Math.floor(b))},getVal:function(){var a;if(this.select)return a=this.select.val(),
null===a?[]:a;a=this.opts.element.val();return B(a,this.opts.separator)},setVal:function(a){var b;this.select?this.select.val(a):(b=[],e(a).each(function(){0>k(this,b)&&b.push(this)}),this.opts.element.val(0===b.length?"":b.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)m(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),0<c&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(a,b){var c,
d=this;if(0===arguments.length)return this.getVal();c=this.data();c.length||(c=[]);if(!a&&0!==a)this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),b&&this.triggerChange({added:this.data(),removed:c});else{this.setVal(a);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),b&&this.triggerChange(this.buildChangeDetails(c,this.data()));else{if(void 0===this.opts.initSelection)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,
function(a){var f=e.map(a,d.id);d.setVal(f);d.updateSelection(a);d.clearSearch();b&&d.triggerChange(d.buildChangeDetails(c,d.data()))})}this.clearSearch()}},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],b=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();
this.selection.find(".select2-search-choice").each(function(){a.push(b.opts.id(e(this).data("select2-data")))});this.setVal(a);this.triggerChange()},data:function(a,b){var c=this,d,f;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();f=this.data();a||(a=[]);d=e.map(a,function(a){return c.opts.id(a)});this.setVal(d);this.updateSelection(a);this.clearSearch();b&&this.triggerChange(this.buildChangeDetails(f,this.data()))}});
e.fn.select2=function(){var a=Array.prototype.slice.call(arguments,0),b,c,d,f,h,j="val destroy opened open close focus isFocused container dropdown onSortStart onSortEnd enable disable readonly positionDropdown data search".split(" "),i=["opened","isFocused","container","dropdown"],m=["val","data"],o={search:"externalSearch"};this.each(function(){if(0===a.length||"object"===typeof a[0])b=0===a.length?{}:e.extend({},a[0]),b.element=e(this),"select"===b.element.get(0).tagName.toLowerCase()?h=b.element.prop("multiple"):
(h=b.multiple||!1,"tags"in b&&(b.multiple=h=!0)),c=h?new E:new D,c.init(b);else if("string"===typeof a[0]){if(0>k(a[0],j))throw"Unknown method: "+a[0];f=void 0;c=e(this).data("select2");if(void 0!==c&&(d=a[0],"container"===d?f=c.container:"dropdown"===d?f=c.dropdown:(o[d]&&(d=o[d]),f=c[d].apply(c,a.slice(1))),0<=k(a[0],i)||k(a[0],m)&&1==a.length))return!1}else throw"Invalid arguments to select2 plugin: "+a;});return void 0===f?this:f};e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,
openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){b=[];I(a.text,c.term,b,d);return b.join("")},formatSelection:function(a,b,c){return a?c(a.text):void 0},sortResults:function(a){return a},formatResultCssClass:function(){},formatSelectionCssClass:function(){},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" more character"+(1==c?"":"s")},formatInputTooLong:function(a,
b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return 0<=w(""+b).toUpperCase().indexOf(w(""+a).toUpperCase())},separator:",",tokenSeparators:[],
tokenizer:P,escapeMarkup:J,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){}};e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}};window.Select2={query:{ajax:K,local:L,tags:M},util:{debounce:H,markMatch:I,escapeMarkup:J,stripDiacritics:w},"class":{"abstract":s,single:D,multi:E}}}return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-select2', location = 'src/js/aui/select2.js' */
("undefined"===typeof window?global:window).__dfd5f5c723e08e5f95e38718fe4f73eb=function(){"use strict";var b=__77629c8e853846530dfdc3ccd3393ab6,d=b&&b.__esModule?b:{"default":b};__b2190710f2822b5d7286528d3eaff37f;var e=d.default.fn.select2;d.default.fn.auiSelect2=function(b){var c;if(d.default.isPlainObject(b)){var a=d.default.extend({},b);c=a.hasAvatar?" aui-has-avatar":"";a.containerCssClass="aui-select2-container"+c+(a.containerCssClass?" "+a.containerCssClass:"");a.dropdownCssClass="aui-select2-drop aui-dropdown2 aui-style-default"+
c+(a.dropdownCssClass?" "+a.dropdownCssClass:"");c=Array.prototype.slice.call(arguments,1);c.unshift(a)}else c=arguments.length?arguments:[{containerCssClass:"aui-select2-container",dropdownCssClass:"aui-select2-drop aui-dropdown2 aui-style-default"}];return e.apply(this,c)};return{}}.call(this);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:searchable-multi-selector', location = '/static/bitbucket/internal/widget/searchable-multi-selector/searchable-multi-selector.js' */
define("bitbucket/internal/widget/searchable-multi-selector/searchable-multi-selector","module exports aui jquery lodash bitbucket/internal/util/ajax bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/promise".split(" "),function(m,f,k,n,p,q,r,t,u){function l(a,b){this._$field=a;a=b=this._options=g.default.extend(!0,{},this.defaults,b);if(!a.dataSource)if(a.url)a.dataSource=new e(a.url,a.urlParams,a.filterParamName);else throw Error("either a dataSource or url must be supplied");
a.dataSource=new v(a.dataSource,a.debounceInterval);if(!d.default.isFunction(b.selectionTemplate))throw Error("a selectionTemplate must be a function");if(!d.default.isFunction(b.resultTemplate))throw Error("a resultTemplate must be a function");this._selectedItems=[];this._initialItems=[];this._excludedIds=d.default.map(b.excludedItems,b.generateId);w(this);this.setSelectedItems(b.initialItems.slice(0))}function e(a,b,c){this._url=a;this._urlParams=b;this._filterParamName=c||"filter";this.clear();
this._pageReceived=d.default.bind(this._pageReceived,this)}function v(a,b){this.clear=d.default.bind(a.clear,a);this.nextPage=x.default.delay(d.default.bind(a.nextPage,a),b)}function y(a){var b=(0,g.default)(".select2-drop-active \x3e .select2-results");b.length&&0===b.children(".select2-result-selectable").length&&b.children(".select2-disabled").length&&(0,g.default)('\x3cli class\x3d"select2-no-results"\x3e\x3c/li\x3e').html(a._options.noMatchesTemplate()).appendTo(b)}function z(a,b){return{id:a.generateId(b),
text:a.generateText(b),item:b}}function A(a,b){return d.default.reject(a,function(a){return a.id===b.id})}function B(a){a&&a.abort&&a.abort()}function w(a){var b=a._options,c=a._$field,e=a._excludedIds,f=d.default.bind(z,null,b),h=[];c.auiSelect2({hasAvatar:b.hasAvatar,query:function(a){1>=a.page&&(b.dataSource.clear(),d.default.forEach(h,B),h=[]);var C=b.prepareSearchTerm(g.default.trim(a.term)),c=b.dataSource.nextPage(C);c=c.then(function(a){return{results:d.default.chain(a.values).map(f).filter(function(a){return!d.default.includes(e,
a.id)}).value(),more:!a.isLastPage}}).promise(c);h.push(c);c.always(function(){h=d.default.reject(h,D.default.eq(c))}).done(a.callback)},formatSelection:function(a){return b.selectionTemplate(a.item)},formatResult:function(a){return b.resultTemplate(a.item)},initSelection:function(b,c){b=d.default.map(a._initialItems,f);a._selectedItems=b;c(b)},separator:b.separator,multiple:!0,minimumInputLength:b.minimumInputLength,formatInputTooShort:b.inputTooShortTemplate,formatNoMatches:b.noMatchesTemplate,
formatSearching:b.searchingTemplate,containerCssClass:["searchable-multi-selector",b.extraClasses].join(" "),dropdownCssClass:["searchable-multi-selector-dropdown",b.dropdownClasses].join(" "),openOnEnter:!1}).on("change",function(b){b.removed&&(a._selectedItems=A(a._selectedItems,b.removed));b.added&&a._selectedItems.push(b.added);a.trigger("change")}).on("open",d.default.bind(y,null,this))}Object.defineProperty(f,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(k),g=babelHelpers.interopRequireDefault(n),
d=babelHelpers.interopRequireDefault(p),E=babelHelpers.interopRequireDefault(q);k=babelHelpers.interopRequireDefault(r);var D=babelHelpers.interopRequireDefault(t),x=babelHelpers.interopRequireDefault(u);g.default.extend(!0,l.prototype,k.default.createEventMixin("bitbucket.internal.widget.searchable.multi.selector"),{defaults:{minimumInputLength:2,extraClasses:null,dropdownClasses:null,debounceInterval:300,initialItems:[],excludedItems:[],filterParamName:"filter",separator:"|!|",urlParams:{},hasAvatar:!1,
inputTooShortTemplate:function(){return c.default.escapeHtml("Start typing to filter")},noMatchesTemplate:function(){return c.default.escapeHtml("No matches found")},searchingTemplate:function(){return c.default.escapeHtml("Filtering...")},generateId:function(a){return a.id||a.name},generateText:function(a){return a.displayName||a.name},prepareSearchTerm:d.default.identity},
getSelectedItems:function(){return d.default.map(this._selectedItems,"item")},setSelectedItems:function(a){this._initialItems=a.slice(0);this._$field.auiSelect2("val",d.default.map(a,this._options.generateId))},clearSelectedItems:function(){this.setSelectedItems([])}});e.prototype.clear=function(){this._nextPageStart=0};e.prototype.nextPage=function(a){a=babelHelpers.defineProperty({start:this._nextPageStart},this._filterParamName,a);return E.default.rest({url:d.default.isFunction(this._url)?this._url():
this._url,data:babelHelpers.extends({},this._urlParams,a)}).done(this._pageReceived)};e.prototype._pageReceived=function(a){this._nextPageStart=a.nextPageStart||a.start+a.size};l.PagedDataSource=e;f.default=l;m.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:user-multi-selector', location = '/static/bitbucket/internal/feature/user/user-multi-selector/user-multi-selector.js' */
define("bitbucket/internal/feature/user/user-multi-selector/user-multi-selector","module exports aui jquery bitbucket/util/navbuilder bitbucket/internal/widget/searchable-multi-selector/searchable-multi-selector".split(" "),function(h,c,d,k,e,l){function f(a,b){g.default.call(this,a,b)}Object.defineProperty(c,"__esModule",{value:!0});var b=babelHelpers.interopRequireDefault(d);d=babelHelpers.interopRequireDefault(k);e=babelHelpers.interopRequireDefault(e);var g=babelHelpers.interopRequireDefault(l);
d.default.extend(!0,f.prototype,g.default.prototype,{defaults:{hasAvatar:!0,url:e.default.rest().users().build(),selectionTemplate:function(a){return bitbucket.internal.widget.avatarWithName({size:"xsmall",person:a})},urlParams:{avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})},resultTemplate:function(a){return bitbucket.internal.widget.avatarWithNameAndEmail({size:"small",person:a})},generateId:function(a){return a.name},inputTooShortTemplate:function(){return b.default.escapeHtml("Start typing to find users")},
noMatchesTemplate:function(){return b.default.escapeHtml("No matching users found")},prepareSearchTerm:function(a){return a.replace(/^@/,"")}}});c.default=f;h.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-details-form', location = '/static/bitbucket/internal/feature/pull-request/details-form/pull-request-details.soy' */
// This file was automatically generated from pull-request-details.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.detailsForm = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<fieldset class="pull-request-details">' + aui.form.textField({id: 'title', extraClasses: 'pull-request-title', name: 'title', value: opt_data.title ? opt_data.title : '', errorTexts: opt_data.fieldErrors && opt_data.fieldErrors.title ? opt_data.fieldErrors.title : null, isRequired: true, maxLength: 255, labelContent: '' + soy.$$escapeHtml('Title'), fieldWidth: 'long'}) + widget.aui.form.field({id: 'description', labelContent: '' + soy.$$escapeHtml('Description'), errors: opt_data.fieldErrors && opt_data.fieldErrors.description ? opt_data.fieldErrors.description : null, fieldGroupClass: 'pull-request-description', input: '' + bitbucket.internal.widget.markupEditor.editor({textareaId: 'pull-request-description', textareaName: 'description', text: opt_data.description, previewButtonTitle: 'View a preview of this description', attachmentButtonTitle: 'Attach a file to this pull request. You can also drag and drop a file to attach it.', attachmentButtonAccessibilityText: 'Attach file'})}) + aui.form.textField({id: 'reviewers', extraClasses: 'pull-request-reviewers', name: 'reviewers', errorTexts: opt_data.fieldErrors && opt_data.fieldErrors.reviewers ? opt_data.fieldErrors.reviewers : null, labelContent: '' + soy.$$escapeHtml('Reviewers'), descriptionText: 'Reviewers can approve a pull request to let others know when it is good to merge', fieldWidth: 'long'}) + ((opt_data.pluginFieldsContent) ? soy.$$filterNoAutoescape(opt_data.pluginFieldsContent) : '') + '</fieldset>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.detailsForm.soyTemplateName = 'bitbucket.internal.feature.pullRequest.detailsForm';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:jquery-mousewheel', location = '/static/bower/jquery-mousewheel/jquery.mousewheel.js' */
/*
 Copyright (c) 2013 Brandon Aaron (http://brandonaaron.net)
 Licensed under the MIT License (LICENSE.txt).

 Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 Thanks to: Seamus Leahy for adding deltaX and deltaY

 Version: 3.1.1

 Requires: 1.2.2+
*/
(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(jQuery)})(function(c){function l(b){var a=b||window.event,f=[].slice.call(arguments,1),d=0,e=0,g=0;b=c.event.fix(a);b.type="mousewheel";a.wheelDelta&&(d=a.wheelDelta);a.detail&&(d=-1*a.detail);a.deltaY&&(d=g=-1*a.deltaY);a.deltaX&&(e=a.deltaX,d=-1*e);void 0!==a.wheelDeltaY&&(g=a.wheelDeltaY);void 0!==a.wheelDeltaX&&(e=-1*a.wheelDeltaX);a=Math.abs(d);if(!k||a<k)k=a;a=Math.max(Math.abs(g),Math.abs(e));if(!h||a<h)h=a;a=0<d?"floor":
"ceil";d=Math[a](d/k);e=Math[a](e/h);g=Math[a](g/h);f.unshift(b,d,e,g);return(c.event.dispatch||c.event.handle).apply(this,f)}var m=["wheel","mousewheel","DOMMouseScroll"],f="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],k,h;if(c.event.fixHooks)for(var n=m.length;n;)c.event.fixHooks[m[--n]]=c.event.mouseHooks;c.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=f.length;b;)this.addEventListener(f[--b],l,!1);
else this.onmousewheel=l},teardown:function(){if(this.removeEventListener)for(var b=f.length;b;)this.removeEventListener(f[--b],l,!1);else this.onmousewheel=null}};c.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:searchable-selector', location = '/static/bitbucket/internal/widget/searchable-selector/searchable-selector.js' */
define("bitbucket/internal/widget/searchable-selector/searchable-selector","module exports aui jquery lodash bitbucket/internal/util/ajax bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/navigator bitbucket/internal/util/promise bitbucket/internal/widget/keyboard-controller bitbucket/internal/widget/paged-scrollable".split(" "),function(n,l,k,p,q,r,t,u,v,w,x,y){function b(a,c){return this.init.apply(this,arguments)}Object.defineProperty(l,"__esModule",{value:!0});
var g=babelHelpers.interopRequireDefault(k),d=babelHelpers.interopRequireDefault(p),f=babelHelpers.interopRequireDefault(q),z=babelHelpers.interopRequireDefault(r),A=babelHelpers.interopRequireDefault(t),B=babelHelpers.interopRequireDefault(u),m=babelHelpers.interopRequireDefault(v),C=babelHelpers.interopRequireDefault(w);k=babelHelpers.interopRequireDefault(x);var D=babelHelpers.interopRequireDefault(y),E=k.default.TabKeyboardController,F=k.default.ListKeyboardController,G=0;b.prototype.defaults=
{id:null,extraClasses:null,namespace:"searchable-selector",url:null,tabs:null,searchable:!0,searchPlaceholder:null,queryParamKey:"filter",queryParamsBuilder:null,pageSize:20,statusCodeHandlers:{},followLinks:!1,hideDialogOnSelect:!0,itemSelectedEvent:"bitbucket.internal.widget.searchableSelector.itemSelected",context:null,field:null,itemDataKey:"item",template:bitbucket.internal.widget.searchableSelector,resultsTemplate:bitbucket.internal.widget.searchableSelectorResults,noResultsText:null,noMoreResultsText:null,
triggerContentTemplate:bitbucket.internal.widget.searchableSelectorTriggerContent,triggerPlaceholder:null,preloadData:null,alwaysShowPreload:!1,dataTransform:null,postOptionsInit:null,clearResultsOnSearch:!0,popUpOffsetX:0,popUpOffsetY:-1,width:350};b.constructDataPageFromPreloadArray=function(a){return f.default.isArray(a)?{values:a,isLastPage:!1,size:a.length,start:0,limit:a.length}:null};b.prototype.tabOptionKeys="label url resultsTemplate noResultsText noMoreResultsText dataTransform queryParamKey preloadData searchPlaceholder".split(" ");
b.prototype.init=function(a,c){var e=this;this.instanceId=G++;this.$trigger=(0,d.default)(a);this.setOptions(c);this.scrollables=[];this.scrollableDataStores=[];this._getOptionVal("id")||(this.options.id=this._getOptionVal("namespace")+"-"+this.instanceId);this.options.tabs&&this.options.tabs.length&&(this.tabs=f.default.map(this.options.tabs,function(a){return d.default.extend(!0,{},f.default.pick(e.options,e.tabOptionKeys),a)}));a=this._getOption("postOptionsInit");f.default.isFunction(a)&&a.call(this);
var b;this.blockShortcutPropagation=b=function(a){var c=this===document;a.keyCode===g.default.keyCode.ESCAPE?(a[c?"stopImmediatePropagation":"stopPropagation"](),e.dialog.hide()):c||a.stopPropagation()};var h=e._getOptionVal("externalSearchField");this.dialog=g.default.InlineDialog(this.$trigger,this._getOptionVal("id"),function(a,c,b){a.data("initialised")||e._initialiseDialogContent(a);b();h||f.default.defer(f.default.bind(e.setFocus,e))},{offsetX:this._getOptionVal("popUpOffsetX"),offsetY:this._getOptionVal("popUpOffsetY"),
noBind:!!h,width:this._getOptionVal("width"),hideCallback:function(){(e.$content.is(document.activeElement)||d.default.contains(e.$content[0],document.activeElement))&&e.$trigger.focus();(0,d.default)(document).add(e.dialog).off("keydown keypress",b)},initCallback:function(){(0,d.default)(document).add(e.dialog).on("keydown keypress",b)}});this._getOptionVal("searchable")&&h&&(this.$searchField=(0,d.default)(h),this._initialiseSearchOnInput());this.$trigger.find(".name").length&&(this._selectedItem=
this._getItemFromTrigger());g.default.bind("hide.dialog",function(a,c){e.$trigger.closest(c.dialog.popup.element).length&&e.dialog.hide()});return this};b.prototype.getSelectedItem=function(){return this._selectedItem};b.prototype.setSelectedItem=function(a){d.default.isPlainObject(a)&&null!=a.id&&(this._selectedItem&&this._selectedItem.id===a.id||this._itemSelected(a))};b.prototype.clearSelection=function(){this._selectedItem=null;this._getOptionVal("field")&&(0,d.default)(this._getOptionVal("field")).val("").trigger("change");
this.resetTrigger()};b.prototype._getItemFromTrigger=function(){var a=this.$trigger.find(".name");return d.default.extend({},this._buildObjectFromElementDataAttributes(a),{name:a.text()})};b.prototype._buildObjectFromElementDataAttributes=function(a){return(0,d.default)(a).data(this._getOptionVal("itemDataKey"))};b.prototype._initialiseDialogContent=function(a){var c=this,e=this._getOptionVal("searchable"),b=this._getOptionVal("externalSearchField");a.append(this._getOption("template")({id:this._getOptionVal("id"),
tabs:this.tabs,searchable:!b&&e,searchPlaceholder:this._getOptionVal("searchPlaceholder"),extraClasses:this._getOptionVal("extraClasses")}));a.closest(".aui-inline-dialog").addClass("searchable-selector-dialog");e&&!b&&(this.$searchField=a.find("input.filter"),this._initialiseSearchOnInput());this.tabs&&(b=a.find("ul.tabs-menu a"),b.on("tabSelect",function(a,b){c.currentTabId=b.tab.parent().data("tab-id");(c._getOptionVal("searchable")||0===c._getDataStoreForScrollable().length)&&c._populateScrollable();
c._resultsKeyboardController.setListElement(c._getCurrentScrollable().$scrollElement.find("ul.results-list"));e&&c.$searchField.focus();c._updateSearchPlaceholder()}),b.on("click",function(a){(0,d.default)(this).parent().hasClass("active-tab")&&(a.stopPropagation(),a.preventDefault())}),b.on("keydown",function(a){if(a.keyCode===g.default.keyCode.ENTER){var c=(0,d.default)(this);c.parent("li").hasClass("active-tab")?a.preventDefault():c.click()}}),g.default.tabs.setup());a.find(".results").each(function(){c.scrollables.push(c._createScrollable((0,
d.default)(this)));c.scrollableDataStores.push([])});a.on("click",".result a",function(a){c.selectItem(a,(0,d.default)(this))});this._initialiseKeyboardNavigation(a);this._initialiseMouseNavigation(a);this._populateScrollable();this.$content=a;a.data("initialised",!0)};b.prototype._initialiseSearchOnInput=function(){var a=this,c=this._getSearchTerm(),b=this._getOptionVal("externalSearchField"),d=C.default.delay(f.default.bind(this._handleSearchInput,this),350),h=f.default.bind(function(){c!==(c=this._getSearchTerm())&&
(this._pendingSearch?this._pendingSearch.reset(c):(this._pendingSearch=d(c),this._pendingSearch.always(function(){a._pendingSearch=null})))},this);this.$searchField.on("keydown.searchable-selector input.searchable-selector",f.default.bind(function(e){b&&(e.which===g.default.keyCode.ESCAPE?this._pendingSearch&&this._pendingSearch.abort():e.which===g.default.keyCode.DOWN&&this._shouldSearch(c)?this.dialog.show():e.which!==g.default.keyCode.ENTER||this.dialog.is(":visible")||this._pendingSearch&&this._pendingSearch.done(function(){var c=
a._getCurrentScrollable().$scrollElement.find("ul.results-list li.result:first");a._clickItem(c)}));f.default.defer(h)},this))};b.prototype._handleSearchInput=function(a){if(this._getOptionVal("externalSearchField")){if(this._shouldSearch(a))return this.dialog.is(":visible")||this.dialog.show(),this._populateScrollable();this.dialog.hide();return d.default.Deferred().reject().promise()}return this._populateScrollable()};b.prototype._initialiseKeyboardNavigation=function(a){var c=this,b=!1,d=function(a){var e=
c.dialog.is(":visible");if(!c._getOptionVal("externalSearchField")||e)b&&!e?c.$trigger.click():c._clickItem(a)};this._resultsKeyboardController&&this._resultsKeyboardController.destroy();if(this.$searchField)var f=this.$searchField;else this.tabs?f=a.find("ul.tabs-menu"):(f=this.$trigger,b=!0);var g=c._getCurrentScrollable().$scrollElement.find("ul.results-list");this._resultsKeyboardController=new F(f,g,{wrapAround:!1,focusedClass:"focused",itemSelector:"li.result",requestMore:function(){var a=c._getCurrentScrollable().loadAfter();
return a&&a.then(function(a){return a.isLastPage})},onSelect:function(a){c._pendingSearch?c._pendingSearch.done(function(){var a=g.find("li.result:first");a.length&&d(a)}):d(a)},focusIntoView:!0,adjacentItems:c._getOptionVal("adjacentItems")});this._tabKeyboardController&&this._tabKeyboardController.destroy();(m.default.isMozilla()||m.default.isWebkit())&&a.addClass("override-focus-style");this._tabKeyboardController=new E(a)};b.prototype._initialiseMouseNavigation=function(a){a.on("mousemove","li",
function(){(0,d.default)(this).find(".focused").hasClass("focused")||(a.find(".focused").removeClass("focused"),(0,d.default)(this).addClass("focused"))})};b.prototype._clickItem=function(a){a.children("a").each(function(){this.click()})};b.prototype.setFocus=function(){this.$searchField?this.$searchField.focus():this.tabs?this.$content.find("ul.tabs-menu a").first().focus():this.$trigger.focus()};b.prototype._createScrollable=function(a){a=new D.default(a,{pageSize:this._getOptionVal("pageSize"),
bufferPixels:0,preventOverscroll:!0,paginationContext:this.options.paginationContext});a.requestData=f.default.bind(this.getResults,this,a);a.attachNewContent=f.default.bind(this.addResultsToList,this,a,!1);return a};b.prototype._populateScrollable=function(a){a=a||this._getCurrentScrollable();this._emptyScrollable(a);var c=this._getPreloadData(),b=0;c&&(b=this.addResultsToList(a,!0,c));a=a.init();return 0<b?d.default.Deferred().resolve().promise():a};b.prototype._getPreloadData=function(){var a=
this._getOptionVal("preloadData"),c=this._getSearchTerm();if(a&&(this._getOptionVal("alwaysShowPreload")||""===c)){var b=this._getOption("dataTransform");f.default.isFunction(b)&&(a=b.call(this,a,c))}else a=null;return a};b.prototype._emptyScrollable=function(a){a=a||this._getCurrentScrollable();a.reset();this._getDataStoreForScrollable(a).length=0;this._getOptionVal("clearResultsOnSearch")&&a.$scrollElement.children("ul.results-list").empty()};b.prototype._getCurrentScrollable=function(){return this.scrollables[this.tabs&&
this.currentTabId?this.currentTabId:0]};b.prototype._getDataStoreForScrollable=function(a){if(!a)return this.scrollableDataStores[this.tabs&&this.currentTabId?this.currentTabId:0];a=f.default.indexOf(this.scrollables,a);return-1!==a?this.scrollableDataStores[a]:null};b.prototype._getSearchTerm=function(){return this.$searchField?this.$searchField.val():""};b.prototype._updateSearchPlaceholder=function(){this.$searchField&&this.$searchField.attr("placeholder",this._getOptionVal("searchPlaceholder"))};
b.prototype._getOptionVal=function(a){return this._getOption(a,!0)};b.prototype._getOption=function(a,c){a=this.tabs&&f.default.includes(this.tabOptionKeys,a)?this.tabs[this.currentTabId||0][a]:this.options[a];return c?f.default.isFunction(a)?a.call(this):a:a};b.prototype.setOptions=function(a){this.options=d.default.extend(!0,{},this.defaults,a)};b.prototype.getResults=function(a,c,b){var e=this;this.currentXHR&&this.currentXHR.abort&&this.currentXHR.abort();c=(this._getOption("queryParamsBuilder")||
this._defaultQueryParamsBuilder).call(this,this._getSearchTerm(),c,b);if(null===c)return d.default.Deferred().reject().promise();b=a.$scrollElement.children("ul.results-list");this._showSpinner(a);b.scrollTop(b[0].scrollHeight);c=this.currentXHR=z.default.rest({url:this._getOptionVal("url"),data:c,statusCode:this._getOptionVal("statusCodeHandlers")});c.always(function(){e._hideSpinner(a);e.currentXHR=null});return c};b.prototype._showSpinner=function(a){a.$scrollElement.children(".spinner").show().spin()};
b.prototype._hideSpinner=function(a){a.$scrollElement.children(".spinner").spinStop().hide()};b.prototype._shouldSearch=function(a){return null!=(this._getOption("queryParamsBuilder")||this._defaultQueryParamsBuilder).call(this,a,0,this._getOptionVal("pageSize"))};b.prototype._defaultQueryParamsBuilder=function(a,c,b){c={start:c,limit:b};this._getOptionVal("searchable")&&(c[this._getOptionVal("queryParamKey")]=a);return c};b.prototype.addResultsToList=function(a,c,b){var e=this._getOption("dataTransform"),
h;f.default.isFunction(e)&&(b=e.call(this,b,this._getSearchTerm()));!c&&(h=this._getPreloadData())&&(b=this.dedupeData(b,h));b=d.default.extend({},b,{isPreload:c,noResultsText:this._getOptionVal("noResultsText"),noMoreResultsText:this._getOptionVal("noMoreResultsText")});e=(0,d.default)(this._getOption("resultsTemplate")(b));var g=this._getDataStoreForScrollable(a);g.push.apply(g,b.values);a=a.$scrollElement.children("ul.results-list");(c=0===b.start&&!(h&&0<h.size)&&(!c||0<b.size))&&a.empty();a.append(e).attr("data-last-updated",
(new Date).getTime());c&&0<b.size&&this._resultsKeyboardController.moveToNext();return b.size};b.prototype.dedupeData=function(a,b){a&&a.values&&b&&b.values&&(a=d.default.extend(!0,{},a),a.values=f.default.reject(a.values,function(a){return f.default.find(b.values,function(b){return a.id===b.id})}));return a};b.prototype.selectItem=function(a,b){var c=b.data("id"),d=f.default.find(this._getDataStoreForScrollable(),function(a){return a.id===c});("#"===b.attr("href")||!this._getOptionVal("followLinks")&&
A.default.openInSameTab)&&a.preventDefault();this._selectedItem&&this._selectedItem.id===d.id||this._itemSelected(d);this._getOptionVal("hideDialogOnSelect")&&this.dialog.hide()};b.prototype._itemSelected=function(a){this._selectedItem=a;this._getOptionVal("field")&&(0,d.default)(this._getOptionVal("field")).val(a.id).trigger("change");this.updateTrigger({item:a});B.default.trigger(this._getOptionVal("itemSelectedEvent"),this,a,this._getOptionVal("context"))};b.prototype.updateTrigger=function(a,
b){this._getOptionVal("externalSearchField")||(this.$trigger.html(this._getOption("triggerContentTemplate")(a||{})),b&&this.$trigger.attr("title",b));this.$trigger.trigger("change")};b.prototype.resetTrigger=function(){this.updateTrigger({text:this._getOptionVal("triggerPlaceholder")})};b.prototype.destroy=function(){this.blockShortcutPropagation&&(0,d.default)(document).add(this.dialog).off("keydown keypress",this.blockShortcutPropagation);this._getOptionVal("externalSearchField")&&this.$searchField.off(".searchable-selector");
this.dialog&&(this.dialog.hide(),this.dialog.remove(),this.dialog=null);this._resultsKeyboardController&&(this._resultsKeyboardController.destroy(),this._resultsKeyboardController=null);this._tabKeyboardController&&(this._tabKeyboardController.destroy(),this._tabKeyboardController=null);this.tabs=this.scrollableDataStores=this.scrollables=this.$trigger=null;this._initialiseDialogContent=d.default.noop};l.default=b;n.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:searchable-selector', location = '/static/bitbucket/internal/widget/searchable-selector/searchable-selector.soy' */
// This file was automatically generated from searchable-selector.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.searchableSelector = function(opt_data, opt_ignored) {
  var output = '<div class="searchable-selector ' + ((opt_data.extraClasses) ? soy.$$escapeHtml(opt_data.extraClasses) : '') + '" id="' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.searchable) ? '<header><label class="assistive" for="' + soy.$$escapeHtml(opt_data.id) + '-search-input">' + soy.$$escapeHtml(opt_data.searchPlaceholder ? opt_data.searchPlaceholder : 'Find') + '</label><input id="' + soy.$$escapeHtml(opt_data.id) + '-search-input" type="text" name="filter" class="filter" placeholder="' + soy.$$escapeHtml(opt_data.searchPlaceholder ? opt_data.searchPlaceholder : 'Find') + '"/></header>' : '');
  if (opt_data.tabs && opt_data.tabs.length > 1) {
    output += '<div class="aui-tabs horizontal-tabs"><ul class="tabs-menu">';
    var tabList24 = opt_data.tabs;
    var tabListLen24 = tabList24.length;
    for (var tabIndex24 = 0; tabIndex24 < tabListLen24; tabIndex24++) {
      var tabData24 = tabList24[tabIndex24];
      output += aui.tabMenuItem({url: '#' + soy.$$escapeHtml(opt_data.id) + '-tab-pane-' + soy.$$escapeHtml(tabIndex24), text: tabData24.label, isActive: tabIndex24 == 0, extraAttributes: {'data-tab-id': tabIndex24}});
    }
    output += '</ul>';
    var tabList36 = opt_data.tabs;
    var tabListLen36 = tabList36.length;
    for (var tabIndex36 = 0; tabIndex36 < tabListLen36; tabIndex36++) {
      var tabData36 = tabList36[tabIndex36];
      output += aui.tabPane({content: '<ul class="results-list"></ul><div class="spinner"></div>', id: opt_data.id + '-tab-pane-' + tabIndex36, isActive: tabIndex36 == 0, extraClasses: 'results', extraAttributes: {'data-tab-id': tabIndex36}});
    }
    output += '</div>';
  } else {
    output += '<div class="results"><ul class="results-list"></ul><div class="spinner"></div></div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.searchableSelector.soyTemplateName = 'bitbucket.internal.widget.searchableSelector';
}


bitbucket.internal.widget.searchableSelectorResults = function(opt_data, opt_ignored) {
  var output = '';
  var resultList50 = opt_data.values;
  var resultListLen50 = resultList50.length;
  for (var resultIndex50 = 0; resultIndex50 < resultListLen50; resultIndex50++) {
    var resultData50 = resultList50[resultIndex50];
    output += '<li class="result ' + ((opt_data.isPreload) ? 'preload' : '') + '"><a href="' + soy.$$escapeHtml(resultData50.url ? resultData50.url : '#') + '" tabindex="-1" data-id="' + soy.$$escapeHtml(resultData50.id) + '" data-item="' + soy.$$escapeHtml(JSON.stringify(resultData50).replace(/\//g, '\\/')) + '">' + soy.$$escapeHtml(resultData50.name) + '</a></li>';
  }
  output += (opt_data.isLastPage) ? (opt_data.size > 0) ? '<li class="no-results">' + soy.$$escapeHtml(opt_data.noMoreResultsText ? opt_data.noMoreResultsText : 'No more results') + '</li>' : '<li class="no-results">' + soy.$$escapeHtml(opt_data.noResultsText ? opt_data.noResultsText : 'No results') + '</li>' : '';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.searchableSelectorResults.soyTemplateName = 'bitbucket.internal.widget.searchableSelectorResults';
}


bitbucket.internal.widget.searchableSelectorTrigger = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.searchableSelectorTriggerGeneric({id: opt_data.id, content: '' + bitbucket.internal.widget.searchableSelectorTriggerContent(opt_data), autofocus: opt_data.autofocus, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.searchableSelectorTrigger.soyTemplateName = 'bitbucket.internal.widget.searchableSelectorTrigger';
}


bitbucket.internal.widget.searchableSelectorTriggerGeneric = function(opt_data, opt_ignored) {
  return '<button ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '" ' : '') + 'type="button" class="aui-button searchable-selector-trigger' + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.autofocus) ? ' autofocus' : '') + ((opt_data.titleContent) ? ' title="' + soy.$$filterNoAutoescape(opt_data.titleContent) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</button>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.searchableSelectorTriggerGeneric.soyTemplateName = 'bitbucket.internal.widget.searchableSelectorTriggerGeneric';
}


bitbucket.internal.widget.searchableSelectorTriggerWithField = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.searchableSelectorTrigger(opt_data) + widget.aui.form.input({id: opt_data.fieldId ? opt_data.fieldId : opt_data.id + '-field', name: opt_data.fieldName ? opt_data.fieldName : opt_data.id + '-field', initialValue: opt_data.item ? opt_data.item.id : null, type: 'hidden'});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.searchableSelectorTriggerWithField.soyTemplateName = 'bitbucket.internal.widget.searchableSelectorTriggerWithField';
}


bitbucket.internal.widget.searchableSelectorTriggerContent = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.item) ? '<span class="name" data-id="' + soy.$$escapeHtml(opt_data.item.id) + '" data-item="' + soy.$$escapeHtml(JSON.stringify(opt_data.item).replace(/\//g, '\\/')) + '">' + soy.$$escapeHtml(opt_data.item.name) + '</span>' : '<span class="placeholder">' + soy.$$escapeHtml(opt_data.text ? opt_data.text : 'Select item') + '</span>');
};
if (goog.DEBUG) {
  bitbucket.internal.widget.searchableSelectorTriggerContent.soyTemplateName = 'bitbucket.internal.widget.searchableSelectorTriggerContent';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:revision-reference-selector', location = '/static/bitbucket/internal/feature/repository/revision-reference-selector/revision-reference-selector.soy' */
// This file was automatically generated from revision-reference-selector.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.repository.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.repository == 'undefined') { bitbucket.internal.feature.repository = {}; }


bitbucket.internal.feature.repository.revisionReferenceSelectorBranchResults = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.repository.revisionReferenceSelectorResults({values: opt_data.values, isLastPage: opt_data.isLastPage, size: opt_data.size, isPreload: opt_data.isPreload, noResultsText: 'No branches', noMoreResultsText: 'No more branches'});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorBranchResults.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorBranchResults';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorTagResults = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.repository.revisionReferenceSelectorResults({values: opt_data.values, isLastPage: opt_data.isLastPage, size: opt_data.size, isPreload: opt_data.isPreload, noResultsText: 'No tags', noMoreResultsText: 'No more tags'});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorTagResults.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorTagResults';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorCommitResults = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.repository.revisionReferenceSelectorResults({values: opt_data.values, isLastPage: opt_data.isLastPage, size: opt_data.size, isPreload: opt_data.isPreload, noResultsText: 'No commits', noMoreResultsText: 'No more commits'});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorCommitResults.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorCommitResults';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorResults = function(opt_data, opt_ignored) {
  var output = '';
  var refList27 = opt_data.values;
  var refListLen27 = refList27.length;
  for (var refIndex27 = 0; refIndex27 < refListLen27; refIndex27++) {
    var refData27 = refList27[refIndex27];
    output += '<li class="result ' + ((opt_data.isPreload) ? 'preload' : '') + '"><a href="' + soy.$$escapeHtml(refData27.url ? refData27.url : '#') + '" data-id="' + soy.$$escapeHtml(refData27.id) + '" tabindex="-1">' + bitbucket.internal.feature.repository.revisionReferenceSelectorRef({ref: refData27}) + '</a></li>';
  }
  output += (opt_data.isLastPage) ? (opt_data.size > 0) ? '<li class="no-results">' + soy.$$escapeHtml(opt_data.noMoreResultsText ? opt_data.noMoreResultsText : 'No more results') + '</li>' : '<li class="no-results">' + soy.$$escapeHtml(opt_data.noResultsText ? opt_data.noResultsText : 'No results') + '</li>' : '';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorResults.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorResults';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorTrigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bitbucket.internal.widget.searchableSelectorTriggerGeneric({id: opt_data.id, content: '' + bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerContent(opt_data), autofocus: opt_data.autofocus, extraClasses: 'revision-reference-selector-trigger' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: opt_data.extraAttributes, titleContent: '' + bitbucket.internal.feature.repository.revisionReferenceSelectorTitle(opt_data)});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorTrigger.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorTrigger';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerWithField = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bitbucket.internal.feature.repository.revisionReferenceSelectorTrigger(opt_data) + widget.aui.form.input({id: opt_data.fieldId ? opt_data.fieldId : opt_data.id ? opt_data.id + '-field' : opt_data.id, name: opt_data.fieldName ? opt_data.fieldName : opt_data.id + '-field', initialValue: opt_data.ref ? opt_data.ref.id : null, type: 'hidden'});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerWithField.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerWithField';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerContent = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.ref) ? bitbucket.internal.feature.repository.revisionReferenceSelectorRef(opt_data) : '<span class="placeholder">' + soy.$$escapeHtml(opt_data.text ? opt_data.text : 'Select revision') + '</span>');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerContent.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerContent';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorRef = function(opt_data, opt_ignored) {
  return ((opt_data.ref.type) ? aui.icons.icon({size: 'small', useIconFont: true, iconFontSet: 'devtools', icon: opt_data.ref.type.id, accessibilityText: opt_data.ref.type.name}) : '') + '<span class="name" title="' + soy.$$escapeHtml(opt_data.ref.displayId) + '" data-id="' + soy.$$escapeHtml(opt_data.ref.id) + '" data-revision-ref="' + soy.$$escapeHtml(JSON.stringify(opt_data.ref).replace(/\//g, '\\/')) + '">' + soy.$$escapeHtml(opt_data.ref.displayId ? opt_data.ref.displayId : opt_data.ref.id) + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorRef.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorRef';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorTitle = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + soy.$$escapeHtml(opt_data.ref ? (opt_data.ref.displayId ? opt_data.ref.displayId : opt_data.ref.id) : opt_data.text ? opt_data.text : 'Select revision');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorTitle.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorTitle';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:revision-reference-selector', location = '/static/bitbucket/internal/feature/repository/revision-reference-selector/revision-reference-selector.js' */
define("bitbucket/internal/feature/repository/revision-reference-selector/revision-reference-selector","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/model/page-state bitbucket/internal/model/repository bitbucket/internal/model/revision-reference bitbucket/internal/util/ajax bitbucket/internal/util/events bitbucket/internal/widget/searchable-selector/searchable-selector".split(" "),function(n,h,d,k,p,q,r,t,u,v,w,x){function b(a,b){return this.init.apply(this,arguments)}
Object.defineProperty(h,"__esModule",{value:!0});d=babelHelpers.interopRequireDefault(d);var e=babelHelpers.interopRequireDefault(k),f=babelHelpers.interopRequireDefault(p),l=babelHelpers.interopRequireDefault(q),z=babelHelpers.interopRequireDefault(r),A=babelHelpers.interopRequireDefault(t),c=babelHelpers.interopRequireDefault(u);k=babelHelpers.interopRequireDefault(v);var m=babelHelpers.interopRequireDefault(w),g=babelHelpers.interopRequireDefault(x);e.default.extend(b.prototype,g.default.prototype);
b.prototype._addRefTypeAndRepositoryToResults=function(a){if(a&&a.values){a=e.default.extend(!0,{},a);var b=this._getCurrentType();f.default.forEach(a.values,f.default.bind(function(a){a.type=b;a.repository||(a.repository=this.repository&&this.repository.toJSON())},this))}return a};b.prototype.defaults=e.default.extend(!0,{},g.default.prototype.defaults,{tabs:[{label:"Branches",type:c.default.type.BRANCH,url:function(){return this.getBranchesUrl()},resultsTemplate:bitbucket.internal.feature.repository.revisionReferenceSelectorBranchResults,
searchPlaceholder:"Filter branches"},{label:"Tags",type:c.default.type.TAG,url:function(){return this.getTagsUrl()},resultsTemplate:bitbucket.internal.feature.repository.revisionReferenceSelectorTagResults,searchPlaceholder:"Filter tags"},{label:"Commits",type:c.default.type.COMMIT,url:function(){return this.getCommitsUrl()},resultsTemplate:bitbucket.internal.feature.repository.revisionReferenceSelectorCommitResults,
searchPlaceholder:"Filter commits"}],queryParamKey:"filterText",namespace:"revision-reference-selector",itemSelectedEvent:"bitbucket.internal.feature.repository.revisionReferenceSelector.revisionRefChanged",itemUnselectedEvent:"bitbucket.internal.feature.repository.revisionReferenceSelector.revisionRefUnselected",itemDataKey:"revision-ref",statusCodeHandlers:k.default.ignore404WithinRepository(),triggerContentTemplate:bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerContent,
extraClasses:"revision-reference-selector",repository:function(){return z.default.getRepository()},show:{branches:!0,tags:!0,commits:!1},dataTransform:b.prototype._addRefTypeAndRepositoryToResults,postOptionsInit:function(){this.setRepository(this._getOptionVal("repository"))},paginationContext:"revision-reference-selector"});b.prototype.init=function(a,b){g.default.prototype.init.apply(this,arguments);return this};b.prototype.setOptions=function(a){a.extraClasses&&(a.extraClasses=this.defaults.extraClasses+
" "+e.default.trim(a.extraClasses));a=e.default.extend(!0,{},this.defaults,a);var b=f.default.filter({branches:c.default.type.BRANCH.id,tags:c.default.type.TAG.id,commits:c.default.type.COMMIT.id},function(b,y){return a.show[y]});a.tabs=f.default.filter(a.tabs,function(a){return f.default.includes(b,a.type.id)});this.options=a};b.prototype._getItemFromTrigger=function(){var a=this.$trigger.find(".name");return new c.default(e.default.extend({},this._buildObjectFromElementDataAttributes(a),{displayId:a.text(),
repository:this.repository}))};b.prototype.getBranchesUrl=function(){return l.default.rest().project(this.repository.getProject()).repo(this.repository).branches().build()};b.prototype.getTagsUrl=function(){return l.default.rest().project(this.repository.getProject()).repo(this.repository).tags().build()};b.prototype.getCommitsUrl=function(){return l.default.rest().project(this.repository.getProject()).repo(this.repository).commits().build()};b.prototype.getRepository=function(){return this.repository};
b.prototype.setRepository=function(a){var b=this.repository;if(a instanceof A.default&&!a.isEqual(b)&&(this.repository=a,b)){if(b=this._getCurrentScrollable())this._emptyScrollable(b),b.init();this.clearSelection();this.dialog.hide();m.default.trigger("bitbucket.internal.feature.repository.revisionReferenceSelector.repoChanged",this,a,this._getOptionVal("context"))}};b.prototype._getCurrentType=function(){return this.tabs[this.currentTabId||0].type};b.prototype.setSelectedItem=function(a){a instanceof
c.default&&!a.isEqual(this._selectedItem)&&this._itemSelected(a)};b.prototype.clearSelection=function(){g.default.prototype.clearSelection.apply(this,arguments);m.default.trigger(this._getOptionVal("itemUnselectedEvent"),this,null,this._getOptionVal("context"))};b.prototype._itemSelected=function(a){if(a instanceof c.default)var b=a.toJSON();else b=f.default.pick(a,f.default.keys(c.default.prototype.namedAttributes)),a=new c.default(b);this._selectedItem=a;this._getOptionVal("field")&&(0,e.default)(this._getOptionVal("field")).val(b.id).trigger("change");
var d=bitbucket.internal.feature.repository.revisionReferenceSelectorTitle({ref:b});this.updateTrigger({ref:b},d);m.default.trigger(this._getOptionVal("itemSelectedEvent"),this,a,this._getOptionVal("context"))};h.default=b;n.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-branch-selector', location = '/static/bitbucket/internal/feature/repository/branch-selector/branch-selector.js' */
define("bitbucket/internal/feature/repository/branch-selector/branch-selector",["module","exports","aui","jquery","bitbucket/internal/feature/repository/revision-reference-selector/revision-reference-selector"],function(c,a,d,e,f){Object.defineProperty(a,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(d),h=babelHelpers.interopRequireDefault(e),k=babelHelpers.interopRequireDefault(f);a.default=function(a,b){b=h.default.extend({show:{branches:!0,tags:!1,commits:!1},triggerPlaceholder:"Select branch",
paginationContext:"branch-selector"},b);return new k.default(a,b)};c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-branch-selector', location = '/static/bitbucket/internal/feature/repository/branch-selector/branch-selector.soy' */
// This file was automatically generated from branch-selector.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.repository.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.repository == 'undefined') { bitbucket.internal.feature.repository = {}; }


bitbucket.internal.feature.repository.branchSelectorTrigger = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.repository.revisionReferenceSelectorTrigger({id: opt_data.id, ref: opt_data.ref, text: opt_data.text ? opt_data.text : 'Select branch', autofocus: opt_data.autofocus, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.branchSelectorTrigger.soyTemplateName = 'bitbucket.internal.feature.repository.branchSelectorTrigger';
}


bitbucket.internal.feature.repository.branchSelectorTriggerWithField = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerWithField({id: opt_data.id, ref: opt_data.ref, text: opt_data.text ? opt_data.text : 'Select branch', fieldName: opt_data.fieldName, fieldId: opt_data.fieldId, autofocus: opt_data.autofocus, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.branchSelectorTriggerWithField.soyTemplateName = 'bitbucket.internal.feature.repository.branchSelectorTriggerWithField';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:warn-before-unload', location = '/static/bitbucket/internal/util/warn-before-unload.js' */
define("bitbucket/internal/util/warn-before-unload",["module","exports","aui"],function(b,a,g){Object.defineProperty(a,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(g);a.default=function(a,c){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){return!0},e=!1;c=c||h.default.format("You made changes that have not yet reached {0}. If you leave this page, those changes will be lost.",bitbucket.internal.util.productName());var d=window.onbeforeunload,f=function(){if(!e&&b())return c;if(d)return d.apply(this,arguments)};window.onbeforeunload=
f;a.always(function(){e=!0;window.onbeforeunload===f&&(window.onbeforeunload=d)})};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-edit', location = '/static/bitbucket/internal/feature/pull-request/edit/pull-request-edit.js' */
define("bitbucket/internal/feature/pull-request/edit/pull-request-edit","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/repository/branch-selector/branch-selector bitbucket/internal/feature/user/user-multi-selector/user-multi-selector bitbucket/internal/model/revision-reference bitbucket/internal/util/ajax bitbucket/internal/util/client-storage bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/focus-snapshot bitbucket/internal/util/function bitbucket/internal/util/warn-before-unload bitbucket/internal/widget/markup-editor/markup-editor".split(" "),
function(u,n,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J){function b(a,c){var l={width:800,height:350,id:"edit-pull-request-dialog",closeOnOutsideClick:!1,focusSelector:"#pull-request-description",keypressListener:d.default.bind(this.keypressListener,this)};this._pullRequest=a;this._currentReviewerUsers=this._pullRequest.getReviewers();this._opts=f.default.extend({},l,c);this._dialog=new e.default.Dialog(this._opts);this._dialogEl=(0,f.default)("#"+this._opts.id);this._isDisabled=!1;this._draftKey=m.default.buildKey("draft-description",
"pull-request");this.initDialog()}function K(a){return{user:a}}function k(a){var c=d.default.pick(a,["title","description"]);d.default.has(a,"reviewers")&&(c.reviewers=d.default.chain(a.reviewers).map(L.default.dot("user.name")).sort().map(function(a){return{user:{name:a}}}).value());d.default.has(a,"toRef")&&(c.toRef={id:a.toRef.id});return c}Object.defineProperty(n,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(v),f=babelHelpers.interopRequireDefault(w),d=babelHelpers.interopRequireDefault(x),
M=babelHelpers.interopRequireDefault(y),N=babelHelpers.interopRequireDefault(z),O=babelHelpers.interopRequireDefault(A),P=babelHelpers.interopRequireDefault(B),Q=babelHelpers.interopRequireDefault(C),m=babelHelpers.interopRequireDefault(D),R=babelHelpers.interopRequireDefault(E),r=babelHelpers.interopRequireDefault(F),t=babelHelpers.interopRequireDefault(G),L=babelHelpers.interopRequireDefault(H),S=babelHelpers.interopRequireDefault(I),q=babelHelpers.interopRequireDefault(J);b.prototype.keypressListener=
function(a){a.stopImmediatePropagation();R.default.isCtrlEnter(a)&&(a.preventDefault(),(0,f.default)(".button-panel-submit-button",this._dialogEl).click());27===a.keyCode&&this._dialogEl.is(":visible")&&!this._isDisabled&&(q.default.unbindFrom(this._dialog.getCurrentPanel().body),this.hide())};b.prototype.initDialog=function(){this._$buttonPanel=this._dialog.addHeader("Edit Pull Request").addPanel("Edit Pull Request").addSubmit("Save",
d.default.bind(this.save,this)).addCancel("Cancel",d.default.bind(this.cancel,this)).getPage(0).buttonpanel;this._$spinner=(0,f.default)('\x3cdiv class\x3d"spinner"\x3e\x3c/div\x3e').prependTo(this._$buttonPanel);this.triggerPanelResize=d.default.bind(this.triggerPanelResize,this);this._dialogEl.on("input","textarea#pull-request-description",this.updateDraftDescription.bind(this))};b.prototype.updateDraftDescription=d.default.debounce(function(a){(a=a.target.value)?
m.default.setSessionItem(this._draftKey,a):this.deleteDraftDescription()},300);b.prototype.deleteDraftDescription=function(){m.default.removeSessionItem(this._draftKey)};b.prototype.populatePanelFromPullRequest=function(){var a=m.default.getSessionItem(this._draftKey);this.updatePanel({title:this._pullRequest.getTitle(),description:a||this._pullRequest.getDescription(),toRef:d.default.assign({type:P.default.type.BRANCH},this._pullRequest.getToRef().toJSON()),reviewers:this._currentReviewerUsers.map(function(a){return a.getUser().toJSON()})},
!!a)};b.prototype.triggerPanelResize=function(){var a=this._dialog.isMaximised(),c=this._dialog.getCurrentPanel().body;c=c.innerHeight()>=c.get(0).scrollHeight;a&&!c||d.default.defer(d.default.bind(function(){this.isVisible()&&(t.default.save(),this._dialog.updateHeight(),t.default.restore())},this))};b.prototype.updatePanel=function(a,c){var b=this._dialog.getCurrentPanel().body;a.reviewers.length&&a.reviewers[0].user&&(a.reviewers=d.default.map(a.reviewers,"user"));b.empty().append(bitbucket.internal.feature.pullRequest.edit(a));
if(c)b.find("textarea#pull-request-description").addClass("restored").attr("title","The description of this pull request has been restored from an automatically saved draft.").one("click keydown input",function(a){(0,f.default)(a.target).removeClass("restored").removeAttr("title")});this.userSelect=new O.default(b.find("#reviewers"),{initialItems:a.reviewers,excludedItems:[this._pullRequest.getAuthor().getUser().toJSON()],urlParams:{"permission.1":"LICENSED_USER","permission.2":"REPO_READ","permission.2.repositoryId":this._pullRequest.getToRef().getRepository().getId()}});
a=b.find("#toRef");this.branchSelector=new N.default(a,{id:"toRef-dialog",repository:this._pullRequest.getToRef().getRepository(),field:a.next("input")});q.default.bindTo(b).on("resize",this.triggerPanelResize.bind(this));this.triggerPanelResize()};b.prototype.getPullRequestUpdateFromForm=function(a){return{title:a.find("#title").val(),description:a.find("#pull-request-description").val(),reviewers:d.default.map(this.userSelect.getSelectedItems(),K),toRef:this.branchSelector.getSelectedItem().toJSON(),
version:this._pullRequest.getVersion()}};b.prototype.mergePullRequestUpdate=function(a,c,b){var e=c.version;a=k(a);c=k(c);b=k(b);var f=d.default.reduce(d.default.keys(b),function(e,f){if(!e)return null;var l=c[f],h=b[f];if(d.default.isEqual(l,h))return e;var g=a[f];return d.default.isEqual(g,h)?e:d.default.isEqual(g,l)?(e[f]=h,e):null},d.default.merge({},c));f&&(f.version=e);return f};b.prototype.save=function(a,c){if(!this._isDisabled){a=this.getPullRequestUpdateFromForm(c.getCurrentPanel().body.find("form"));
if(a.title)return this._$spinner.show().spin("small"),this.toggleDisabled(!0),this._doSave(a);c="You must supply a title for this pull request.";this.updatePanel(f.default.extend({fieldErrors:{title:[c]}},a))}};b.prototype._doSave=function(a){var c=this,b=Q.default.rest({url:M.default.rest().currentPullRequest().withParams({avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})}).build(),type:"PUT",data:a,statusCode:{400:!1,409:!1}});(0,S.default)(b,e.default.format("You have made changes to the pull request that have not yet reached {0}. If you leave this page, those changes will be lost.",
bitbucket.internal.util.productName()));b.done(function(a){c.deleteDraftDescription();window.location.reload()});b.fail(function(b,l,m,p,n){var h=[],g={},k;if(1===p.errors.length&&"com.atlassian.bitbucket.pull.PullRequestOutOfDateException"===p.errors[0].exceptionName&&(b=c.mergePullRequestUpdate(c._pullRequest.toJSON(),p.errors[0].pullRequest,a))){c._doSave(b);return}d.default.forEach(p.errors,function(a){a.context?(Object.prototype.hasOwnProperty.call(g,a.context)||(g[a.context]=[]),"reviewers"===
a.context?(g[a.context]=d.default.map(a.reviewerErrors,"message"),h.push(a),k=a.validReviewers):g[a.context].push(a.message)):("com.atlassian.bitbucket.pull.PullRequestOutOfDateException"===a.exceptionName&&(a.messageContent=e.default.escapeHtml(a.message)+" \x3ca href\x3d'"+window.location.href.split("#")[0]+"'\x3e"+e.default.escapeHtml("Reload")+"\x3c/a\x3e."),h.push(a))});c.updatePanel(f.default.extend({errors:h,fieldErrors:g},a,{reviewers:k}));c._$spinner.spinStop().hide();
c.toggleDisabled(!1)})};b.prototype.toggleDisabled=function(a){void 0===("undefined"===typeof a?"undefined":babelHelpers.typeof(a))&&(a=!this._isDisabled);this._$buttonPanel.toggleClass("disabled",a);this._$buttonPanel.find("button")[a?"attr":"removeAttr"]("disabled","disabled");this._dialog[a?"disable":"enable"]();this._isDisabled=a};b.prototype.cancel=function(){this._isDisabled||(q.default.unbindFrom(this._dialog.getCurrentPanel().body),this.deleteDraftDescription(),this.hide())};b.prototype.isVisible=
function(){return this._dialogEl.is(":visible")};b.prototype.show=function(){this.populatePanelFromPullRequest();this._dialog.show();r.default.on("window.resize.debounced",this.triggerPanelResize)};b.prototype.hide=function(){document.activeElement.blur();this._dialog.hide();r.default.off("window.resize.debounced",this.triggerPanelResize)};b.prototype.bind=function(a){var b=this;(0,f.default)(document).on("click",a,function(a){a.preventDefault();b.show()})};n.default=b;u.exports=n["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-edit', location = '/static/bitbucket/internal/feature/pull-request/edit/pull-request-edit.soy' */
// This file was automatically generated from pull-request-edit.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.edit = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.errors) {
    var errorList5 = opt_data.errors;
    var errorListLen5 = errorList5.length;
    for (var errorIndex5 = 0; errorIndex5 < errorListLen5; errorIndex5++) {
      var errorData5 = errorList5[errorIndex5];
      output += aui.message.error({content: '' + ((errorData5.messageContent) ? soy.$$filterNoAutoescape(errorData5.messageContent) : soy.$$escapeHtml(errorData5.message))});
    }
  }
  output += bitbucket.internal.widget.form({action: '', autocomplete: 'off', content: '' + widget.aui.form.field({id: 'toRef', labelContent: '' + soy.$$escapeHtml('Destination'), description: 'Update the destination branch for the pull request', errors: opt_data.fieldErrors ? opt_data.fieldErrors.toRef : null, input: '' + bitbucket.internal.feature.repository.branchSelectorTriggerWithField({id: 'toRef', fieldName: 'toRef', ref: opt_data.toRef})}) + bitbucket.internal.feature.pullRequest.detailsForm(opt_data)});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.edit.soyTemplateName = 'bitbucket.internal.feature.pullRequest.edit';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:code-block', location = '/static/bitbucket/internal/widget/code-block/code-block.soy' */
// This file was automatically generated from code-block.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.codeBlock = function(opt_data, opt_ignored) {
  return '<div class="code-block' + ((opt_data.instructionBlock) ? ' instruction-block' : '') + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><pre><code>' + soy.$$filterNoAutoescape(opt_data.content) + '</code></pre></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.codeBlock.soyTemplateName = 'bitbucket.internal.widget.codeBlock';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:branch-diagram', location = '/static/bitbucket/internal/feature/repository/branch-diagram/branch-diagram.js' */
define("bitbucket/internal/feature/repository/branch-diagram/branch-diagram","module exports jquery lodash bitbucket/internal/model/repository bitbucket/internal/model/revision-reference".split(" "),function(g,f,e,h,k,l){function a(b){this.$el=(0,m.default)(b)}Object.defineProperty(f,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(e);e=babelHelpers.interopRequireDefault(h);var n=babelHelpers.interopRequireDefault(k),p=babelHelpers.interopRequireDefault(l);a.prototype._updateRefLozenge=
function(b,c,a){var d=this.$el.find("."+b);d.trigger("mouseout");c&&c instanceof p.default?c.getDisplayId()||c.getId()?(b=bitbucket.internal.feature.repository.refLozenge({ref:c.toJSON(),repository:a&&a instanceof n.default?a.toJSON():null,extraClasses:b}),d.length?d.replaceWith(b).removeClass("invisible"):this.$el.append(b)):d.addClass("invisible"):null!=c&&""!==c||d.addClass("invisible");d=this.$el.find(".source-ref").length&&this.$el.find(".target-ref").length;this.$el.toggleClass("disabled",!d)};
a.prototype.updateSourceRef=e.default.partial(a.prototype._updateRefLozenge,"source-ref");a.prototype.updateTargetRef=e.default.partial(a.prototype._updateRefLozenge,"target-ref");f.default=a;g.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:branch-diagram', location = '/static/bitbucket/internal/feature/repository/branch-diagram/branch-diagram.soy' */
// This file was automatically generated from branch-diagram.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.repository.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.repository == 'undefined') { bitbucket.internal.feature.repository = {}; }


bitbucket.internal.feature.repository.branchDiagram = function(opt_data, opt_ignored) {
  return '<div class="branch-diagram branch-diagram-' + soy.$$escapeHtml(opt_data.type) + ((! opt_data.sourceRef || ! opt_data.targetRef) ? ' disabled' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + '><div class="diagram-image"></div>' + ((opt_data.sourceRef) ? bitbucket.internal.feature.repository.refLozenge({ref: opt_data.sourceRef, extraClasses: 'source-ref', repository: opt_data.sourceRepo}) : '') + ((opt_data.targetRef) ? bitbucket.internal.feature.repository.refLozenge({ref: opt_data.targetRef, extraClasses: 'target-ref', repository: opt_data.targetRepo}) : '') + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.branchDiagram.soyTemplateName = 'bitbucket.internal.feature.repository.branchDiagram';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:set-dialog-buttons-disabled', location = '/static/bitbucket/internal/util/set-dialog-buttons-disabled.js' */
define("bitbucket/internal/util/set-dialog-buttons-disabled",["module","exports","jquery"],function(b,a,d){Object.defineProperty(a,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(d);a.default=function(a,c){a.$el.find(".aui-dialog2-footer-actions .aui-button").each(function(a,b){a=(0,e.default)(b);a.prop("disabled",c).toggleClass("disabled",c);c?a.attr("aria-disabled","true"):a.removeAttr("aria-disabled")})};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:javascript-errors', location = '/static/bitbucket/internal/bbui/javascript-errors/not-implemented-error.js' */
define("bitbucket/internal/bbui/javascript-errors/not-implemented-error",["module","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var e=function(a){function b(a){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.name="NotImplementedError";c.message=a||"This method has not been implemented";return c}babelHelpers.inherits(b,a);return b}(Error);a.default=e;d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:javascript-errors', location = '/static/bitbucket/internal/bbui/javascript-errors/javascript-errors.js' */
define("bitbucket/internal/bbui/javascript-errors/javascript-errors",["exports","./not-implemented-error"],function(a,b){Object.defineProperty(a,"__esModule",{value:!0});a.NotImplementedError=void 0;b=babelHelpers.interopRequireDefault(b);a.NotImplementedError=b.default});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:urls', location = '/static/bitbucket/internal/bbui/urls/urls.js' */
define("bitbucket/internal/bbui/urls/urls",["module","exports","../javascript-errors/javascript-errors"],function(e,c,d){Object.defineProperty(c,"__esModule",{value:!0});var a=babelHelpers.interopRequireDefault(d);d=function(){function c(){babelHelpers.classCallCheck(this,c)}babelHelpers.createClass(c,[{key:"fileChanges",value:function(b,c){throw new a.default.NotImplementedError;}},{key:"avatarUrl",value:function(b,c){throw new a.default.NotImplementedError;}},{key:"user",value:function(b){throw new a.default.NotImplementedError;
}},{key:"pullRequest",value:function(b){throw new a.default.NotImplementedError;}},{key:"createPullRequest",value:function(b){throw new a.default.NotImplementedError;}},{key:"allPullRequests",value:function(b){throw new a.default.NotImplementedError;}},{key:"help",value:function(b){throw new a.default.NotImplementedError;}},{key:"search",value:function(b){throw new a.default.NotImplementedError;}},{key:"project",value:function(b){throw new a.default.NotImplementedError;}},{key:"repo",value:function(b){throw new a.default.NotImplementedError;
}},{key:"remote",value:function(b){throw new a.default.NotImplementedError;}}]);return c}();c.default=d;e.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:bitbucket-urls', location = '/static/bitbucket/internal/impl/urls.js' */
define("bitbucket/internal/impl/urls","module exports bitbucket/util/navbuilder bitbucket/internal/bbui/javascript-errors/javascript-errors bitbucket/internal/bbui/urls/urls bitbucket/internal/util/object".split(" "),function(f,d,g,h,k,l){function b(){e.default.call(this)}Object.defineProperty(d,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(g),m=babelHelpers.interopRequireDefault(h),e=babelHelpers.interopRequireDefault(k);babelHelpers.interopRequireDefault(l).default.inherits(b,
e.default);b.prototype.avatarUrl=function(a,b){return c.default._avatarUrl(a,b).build()};b.prototype.pullRequest=function(a){return c.default.currentRepo().pullRequest(a).build()};b.prototype.inboxPullRequest=function(a,b,d){return c.default.project(a).repo(b).pullRequest(d).build()};b.prototype.createPullRequest=function(a){return c.default.project(a.project).repo(a).createPullRequest().build()};b.prototype.allPullRequests=function(a,b){return b?c.default.project(a.project).repo(a).allPullRequests().state(b).build():
c.default.project(a.project).repo(a).allPullRequests().build()};b.prototype.help=function(a){switch(a){case "help.mirroring.clone.dialog":return 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Clone+a+repository?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash#Clonearepository-mirrorclone';case "help.mirroring.getting.started":return 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Smart+Mirroring?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash';case "help.mirroring.setup":return 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Set+up+a+mirror?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash';case "help.pull.request":return 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Using+pull+requests+in+Bitbucket+Server?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash';case "help.search.guide":return 'http:\/\/go.atlassian.com\/bitbucket.go.search.guide?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash';
case "help.search.troubleshoot":return 'http:\/\/go.atlassian.com\/bitbucket.go.search.troubleshoot?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash';case "help.search.query":return 'http:\/\/go.atlassian.com\/bitbucket.go.search.query?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash';default:throw new m.default.NotImplementedError;}};b.prototype.search=function(a){return c.default.search(a).build()};b.prototype.project=function(a){return c.default.project(a).build()};b.prototype.repo=function(a){return c.default.project(a.project).repo(a).build()};b.prototype.user=function(a){return c.default.user(a.slug).build()};
b.prototype.remote=function(a){return c.default.project(a.project.key).repo(a.slug).clone(a.scmId).buildAbsolute()};d.default=new b;f.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:classnames', location = '/static/lib/react/classnames.js' */
/*
 Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
(function(){function b(){for(var c=[],d=0;d<arguments.length;d++){var a=arguments[d];if(a){var e=typeof a;if("string"===e||"number"===e)c.push(a);else if(Array.isArray(a))c.push(b.apply(null,a));else if("object"===e)for(var f in a)g.call(a,f)&&a[f]&&c.push(f)}}return c.join(" ")}var g={}.hasOwnProperty;"undefined"!==typeof module&&module.exports?module.exports=b:"function"===typeof define&&"object"===typeof define.amd&&define.amd?define("classnames",[],function(){return b}):window.classNames=b})();;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:classnames', location = '/static/lib/react/classnames-AMD.js' */
define("classnames",function(){return window.classNames});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/tabs.js' */
define("bitbucket/internal/bbui/aui-react/tabs",["exports","classnames","prop-types","react"],function(d,a,f,g){Object.defineProperty(d,"__esModule",{value:!0});d.Tabs=d.Tab=void 0;var h=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(f);var e=babelHelpers.interopRequireDefault(g);(d.Tab=function(a){return e.default.createElement("div",{className:"tabs-pane active-pane"},a.children)}).propTypes={title:a.default.string.isRequired,children:a.default.node.isRequired};(d.Tabs=
function(a){function c(a){babelHelpers.classCallCheck(this,c);var b=babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a));b.onChange=function(a){b.setState(function(){return{selectedIndex:a}})};b.state={selectedIndex:a.startingIndex||0};return b}babelHelpers.inherits(c,a);babelHelpers.createClass(c,[{key:"render",value:function(){var a=this,b=this.props,c=b.children;b=b.className;var d=this.state.selectedIndex,f=e.default.Children.toArray(c)[d];return e.default.createElement("div",
{className:"aui-tabs horizontal-tabs "+(b||"")},e.default.createElement("ul",{className:"tabs-menu"},e.default.Children.map(c,function(c,b){return e.default.createElement("li",{className:(0,h.default)("menu-item",{"active-tab":b===d})},e.default.createElement("a",{onClick:function(){return a.onChange(b)}},c.props.title))})),f)}}]);return c}(e.default.Component)).propTypes={children:a.default.node.isRequired,onChange:a.default.func,startingIndex:a.default.number,className:a.default.string}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/inline-dialog.js' */
define("bitbucket/internal/bbui/aui-react/inline-dialog",["exports","classnames","prop-types","react","./component"],function(d,a,g,b,e){Object.defineProperty(d,"__esModule",{value:!0});d.InlineDialogTrigger=void 0;var h=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(g);var f=babelHelpers.interopRequireDefault(b),k=babelHelpers.interopRequireDefault(e);e={children:a.default.node,className:a.default.string,dialogId:a.default.string.isRequired,href:a.default.string,title:a.default.string};
a={alignment:a.default.string,children:a.default.node,className:a.default.string,id:a.default.string.isRequired};b=d.InlineDialogTrigger=function(a){function b(a){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.elementType="button";c.triggerProps={"aria-controls":a.dialogId,"aria-haspopup":!0,className:(0,h.default)("aui-button",a.className),"data-aui-trigger":!0,role:"button",title:a.title};a.href&&(c.triggerProps=
babelHelpers.extends({},c.triggerProps,{className:a.className,href:a.href,tabIndex:"0"}),c.elementType="a");return c}babelHelpers.inherits(b,a);babelHelpers.createClass(b,[{key:"render",value:function(){return f.default.createElement(this.elementType,this.triggerProps,this.props.children)}}]);return b}(b.Component);b.defaultProps={className:"",href:"",title:""};b.propTypes=e;b=function(a){return f.default.createElement(k.default,{id:a.id,markup:'\x3caui-inline-dialog\n                        id\x3d"'+
a.id+'"\n                        class\x3d"'+a.className+'"\n                        alignment\x3d"'+a.alignment+'"\n                     \x3e\x3c/aui-inline-dialog\x3e',containerSelector:"#"+a.id+" .aui-inline-dialog-contents"},a.children)};b.defaultProps={alignment:"right middle",className:""};b.propTypes=a;d.default=b});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/avatar.js' */
define("bitbucket/internal/bbui/aui-react/avatar","exports aui classnames lodash prop-types react bitbucket/internal/impl/urls".split(" "),function(d,c,r,f,t,h,k){Object.defineProperty(d,"__esModule",{value:!0});d.Avatar=d.ProjectAvatar=d.AvatarTShirtSize=d.AvatarSize=void 0;var u=babelHelpers.interopRequireDefault(c),l=babelHelpers.interopRequireDefault(r);c=babelHelpers.interopRequireDefault(t);var e=babelHelpers.interopRequireDefault(h),m=babelHelpers.interopRequireDefault(k);h={avatarAttrs:c.default.object,
avatarClassName:c.default.string,badges:c.default.arrayOf(c.default.shape({className:c.default.string,text:c.default.string})),className:c.default.string,size:c.default.string,tooltip:c.default.bool,tooltipText:c.default.string,visibleBadge:c.default.string,withLink:c.default.bool,withName:c.default.bool,withEmail:c.default.bool};k={badges:[],size:"small",tooltip:!0,tooltipText:"",withName:!1,withEmail:!1};var n=d.AvatarSize={XSMALL:32,SMALL:48,MEDIUM:64,LARGE:96,XLARGE:128,XXLARGE:192,XXXLARGE:256};
d.AvatarTShirtSize=(0,f.mapValues)(n,function(a,b){return b.toLowerCase()});f=function(a){var b=a.person.user||a.person,c=b.displayName||b.name,d=c,g=[];a.withName&&g.push(c);a.withEmail&&b.emailAddress&&(d+=" ("+b.emailAddress+")",g.push(e.default.createElement("span",{key:"email",className:"email-address"},b.emailAddress)));b={alt:c,avatarAttrs:{"data-username":b.name},avatarSrc:m.default.avatarUrl(b,n[a.size.toUpperCase()]),badges:a.badges,className:(0,l.default)("user-avatar",a.avatarClassName,
{"badge-hidden":a.hideBadge},a.withName||a.withEmail?null:a.className),display:g,displayLink:m.default.user(b),size:a.size,title:a.tooltip&&(a.tooltipText||d),tooltip:a.tooltip,visibleBadge:a.visibleBadge};return e.default.createElement(p,babelHelpers.extends({},a,{avatarProps:b}))};f.defaultProps=babelHelpers.extends({},k);f.propTypes=babelHelpers.extends({},h,{person:c.default.object.isRequired});d.default=f;f=d.ProjectAvatar=function(a){return e.default.createElement(p,babelHelpers.extends({},
a,{avatarProps:{alt:a.project.name,avatarSrc:a.project.avatarUrl||"XXX TODO TEST",badges:a.badges,className:"aui-avatar-project",display:a.project.name,displayLink:"XXX TODO TEST",size:a.size,title:a.project.name,tooltip:a.tooltip,visibleBadge:a.visibleBadge}}))};f.defaultProps=babelHelpers.extends({},k,{avatarAttrs:{}});f.propTypes=babelHelpers.extends({},h,{project:c.default.object.isRequired});var q=d.Avatar=function(a){var b=a.alt,c=a.avatarAttrs,d=a.avatarSrc,g=a.badges;g=void 0===g?[]:g;var f=
a.className,h=a.size,k=a.title,m=a.tooltip,n=a.visibleBadge;a=(0,l.default)(f,"aui-avatar","aui-avatar-"+h,{"aui-avatar-badged":g.length});b={alt:b,ref:m?function(a){return u.default.$(a).tooltip()}:null,src:d,title:m?k:void 0};return e.default.createElement("span",babelHelpers.extends({className:a},c),e.default.createElement("span",{className:"aui-avatar-inner"},e.default.createElement("img",b)),g.map(function(a){return e.default.createElement("span",{key:a.className,className:(0,l.default)("badge",
a.className,{"badge-hidden":n!==a.className}),"aria-hidden":!n},a.text)}))},p=function(a){var b=a.avatarProps;return a.withName?e.default.createElement("div",{className:(0,l.default)(a.className,"avatar-with-name"),title:b.tooltip?b.title:void 0},e.default.createElement(q,babelHelpers.extends({},b,{tooltip:!1})),e.default.createElement(v,{display:b.display,href:a.withLink?b.displayLink:null})):e.default.createElement(q,babelHelpers.extends({},b,{className:(0,l.default)(b.className,a.className)}))},
v=function(a){var b=a.display;return(a=a.href)?e.default.createElement("a",{className:"name",href:a},b):e.default.createElement("span",{className:"name"},b)}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/flags.js' */
define("bitbucket/internal/bbui/aui-react/flags",["exports","classnames","lodash","prop-types","react"],function(b,a,h,k,c){Object.defineProperty(b,"__esModule",{value:!0});b.Flag=b.flagType=b.closeType=void 0;var n=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(k);var e=babelHelpers.interopRequireDefault(c),f=b.closeType={AUTO:"auto",MANUAL:"manual",NEVER:"never"};k=b.flagType={ERROR:"error",INFO:"info",SUCCESS:"success",WARNING:"warning"};var m=b.Flag=function(a){function g(){var l,
a,d,b;babelHelpers.classCallCheck(this,g);for(var e=arguments.length,f=Array(e),c=0;c<e;c++)f[c]=arguments[c];return b=(a=(d=babelHelpers.possibleConstructorReturn(this,(l=g.__proto__||Object.getPrototypeOf(g)).call.apply(l,[this].concat(f))),d),d.state={hidden:void 0},d.onTransitionEnd=(0,h.debounce)(function(){var a=d.props,l=a.id;a=a.onClose;d.state.hidden&&a&&a(l)},250),d.close=function(){return d.setState({hidden:!0})},a),babelHelpers.possibleConstructorReturn(d,b)}babelHelpers.inherits(g,a);
babelHelpers.createClass(g,[{key:"componentDidMount",value:function(){var a=this;(0,h.defer)(function(){return a.setState({hidden:!1})});this.props.close===f.AUTO&&(this.autoCloseTimeout=setTimeout(this.close,5E3))}},{key:"componentWillUnmount",value:function(){this.autoCloseTimeout&&clearTimeout(this.autoCloseTimeout)}},{key:"render",value:function(){var a=this.props,b=a.body,d=a.close,c=a.title;a=a.type;var g=this.state.hidden;return e.default.createElement("div",{className:"aui-flag","aria-hidden":(0,
h.isBoolean)(g)?""+g:g,onTransitionEnd:this.onTransitionEnd},e.default.createElement("div",{className:(0,n.default)("aui-message","aui-message-"+a,"shadowed",a,{closeable:d!==f.NEVER,"aui-will-close":d===f.AUTO})},e.default.createElement("p",{className:"title"},e.default.createElement("strong",null,c)),b,d===f.AUTO||d===f.MANUAL?e.default.createElement("span",{className:"aui-icon icon-close",role:"button",tabIndex:"0",onClick:this.close}):null))}}]);return g}(c.Component);m.propTypes={body:a.default.node,
close:a.default.oneOf((0,h.values)(f)),id:a.default.string.isRequired,onClose:a.default.func,title:a.default.string,type:a.default.oneOf((0,h.values)(k))};m.defaultProps={close:f.MANUAL,type:k.INFO};c=function(a){var b=a.flags,c=a.onClose;return e.default.createElement("div",{id:"aui-flag-container"},b&&b.map(function(a){return e.default.createElement(m,babelHelpers.extends({key:a.id},a,{onClose:c}))}))};c.propTypes={flags:a.default.array,onClose:a.default.func};b.default=c});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/spinner.js' */
define("bitbucket/internal/bbui/aui-react/spinner",["exports","jquery","prop-types","react","react-dom"],function(a,d,h,e,k){Object.defineProperty(a,"__esModule",{value:!0});a.SpinnerSize=void 0;var f=babelHelpers.interopRequireDefault(d),l=babelHelpers.interopRequireDefault(h),m=babelHelpers.interopRequireDefault(e),g=babelHelpers.interopRequireDefault(k),c=a.SpinnerSize={SMALL:"small",MEDIUM:"medium",LARGE:"large"};d=function(a){function b(){babelHelpers.classCallCheck(this,b);return babelHelpers.possibleConstructorReturn(this,
(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}babelHelpers.inherits(b,a);babelHelpers.createClass(b,[{key:"componentDidMount",value:function(){this.spin()}},{key:"shouldComponentUpdate",value:function(a){return this.props.size!==a.size}},{key:"componentDidUpdate",value:function(){this.spinStop();this.spin()}},{key:"componentWillUnmount",value:function(){this.spinStop()}},{key:"spin",value:function(){(0,f.default)(g.default.findDOMNode(this)).spin(this.props.size||c.SMALL)}},{key:"spinStop",
value:function(){(0,f.default)(g.default.findDOMNode(this)).spinStop()}},{key:"render",value:function(){return m.default.createElement("div",{className:"bb-spinner"})}}],[{key:"propTypes",get:function(){return{size:l.default.oneOf([c.SMALL,c.MEDIUM,c.LARGE])}}}]);return b}(e.Component);a.default=d});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/dialog.js' */
define("bitbucket/internal/bbui/aui-react/dialog","exports aui classnames lodash prop-types react ./icon".split(" "),function(c,l,a,n,p,d,h){Object.defineProperty(c,"__esModule",{value:!0});c.DialogSize=c.DialogContent=c.DialogFooter=c.DialogHeader=void 0;var w=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(p);var b=babelHelpers.interopRequireDefault(d),q=babelHelpers.interopRequireDefault(h),r=c.DialogHeader=function(a){var e=a.headerActionContent,m=a.headerSecondaryContent,
y=a.modal,g=a.onClose,f=a.showCloseButton;return b.default.createElement("header",{className:"aui-dialog2-header"},b.default.createElement("h2",{className:"aui-dialog2-header-main"},a.titleContent),m?b.default.createElement("div",{className:"aui-dialog2-header-secondary"},m):null,e?b.default.createElement("div",{className:"aui-dialog2-header-actions"},e):null,!y&&g&&f?b.default.createElement("a",{className:"aui-dialog2-header-close",href:"#",onClick:g},b.default.createElement(q.default,{icon:"close-dialog"},
"Close")):null)};r.propTypes={headerSecondaryContent:a.default.node,headerActionContent:a.default.node,modal:a.default.bool,onClose:a.default.func,showCloseButton:a.default.bool,titleContent:a.default.node};var t=c.DialogFooter=function(a){var e=a.footerActionContent;a=a.footerHintContent;return b.default.createElement("footer",{className:"aui-dialog2-footer"},e?b.default.createElement("div",{className:"aui-dialog2-footer-actions"},e):null,a?b.default.createElement("div",
{className:"aui-dialog2-footer-hint"},a):null)};t.propTypes={footerActionContent:a.default.node,footerHintContent:a.default.node};var u=c.DialogContent=function(a){return b.default.createElement("div",{className:"aui-dialog2-content"},a.children)};u.propTypes={children:a.default.node};h=c.DialogSize={SMALL:"small",MEDIUM:"medium",LARGE:"large",XLARGE:"xlarge"};d=function(a){function c(){var a,b,g,f;babelHelpers.classCallCheck(this,c);for(var e=arguments.length,d=Array(e),k=0;k<e;k++)d[k]=arguments[k];
return f=(b=(g=babelHelpers.possibleConstructorReturn(this,(a=c.__proto__||Object.getPrototypeOf(c)).call.apply(a,[this].concat(d))),g),g.onKeyDownEsc=function(a){var m=a.keyCode,b=g.props,c=b.modal;b=b.onClose;"Escape"!==a.key&&m!==l.keyCode.ESCAPE||c||!b||b()},b),babelHelpers.possibleConstructorReturn(g,f)}babelHelpers.inherits(c,a);babelHelpers.createClass(c,[{key:"componentDidMount",value:function(){var a=document.body.style;this.allowBodyScroll=function(b){return function(){a.overflow=b}}(a.overflow);
a.overflow="hidden";addEventListener("keydown",this.onKeyDownEsc)}},{key:"componentWillUnmount",value:function(){this.allowBodyScroll();removeEventListener("keydown",this.onKeyDownEsc)}},{key:"render",value:function(){var a=this.props,c=a.children,e=a.className,f=a.headerSecondaryContent,d=a.headerActionContent,h=a.footerActionContent,k=a.footerHintContent,l=a.modal,v=a.onClose,n=a.showCloseButton,p=a.size,q=a.titleContent,x=a.warning;return b.default.createElement("div",null,b.default.createElement("section",
{role:"dialog",id:a.id,className:(0,w.default)("aui-layer","aui-dialog2","aui-dialog2-"+p,{"aui-dialog2-warning":x},e),style:{zIndex:3E3}},b.default.createElement(r,{headerActionContent:d,headerSecondaryContent:f,modal:l,onClose:v,showCloseButton:n,titleContent:q}),b.default.createElement(u,null,c),b.default.createElement(t,{footerActionContent:h,footerHintContent:k})),b.default.createElement("div",{className:"aui-blanket",tabIndex:"0",style:{zIndex:2980},"aria-hidden":!1,onClick:l?null:v}))}}]);
return c}(d.Component);d.propTypes={children:a.default.node,className:a.default.string,headerSecondaryContent:a.default.node,headerActionContent:a.default.node,footerActionContent:a.default.node,footerHintContent:a.default.node,id:a.default.string,modal:a.default.bool,onClose:function(a,b){return function(c){for(var e=arguments.length,d=Array(1<e?e-1:0),f=1;f<e;f++)d[f-1]=arguments[f];return(b(c)?a.isRequired:a).apply(void 0,[c].concat(d))}}(a.default.func,function(a){return!a.modal}),showCloseButton:a.default.bool,
size:a.default.oneOf((0,n.values)(h)),titleContent:a.default.node,warning:a.default.bool};d.defaultProps={modal:!1,size:h.MEDIUM,showCloseButton:!0,warning:!1};c.default=d});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/form.js' */
define("bitbucket/internal/bbui/aui-react/form",["exports","classnames","prop-types","react"],function(d,b,e,f){Object.defineProperty(d,"__esModule",{value:!0});d.Checkbox=d.TextField=d.Error=void 0;var n=babelHelpers.interopRequireDefault(b);b=babelHelpers.interopRequireDefault(e);var c=babelHelpers.interopRequireDefault(f),k=function(a){return(a=a.error)?c.default.createElement("ul",{className:"error"},a.map(function(a){return c.default.createElement("li",{key:a},a)})):null};k.propTypes={error:b.default.array};
f=function(a){var b=a.required,d=a.title,e=a.name,g=a.description,l=a.descriptionHtml,f=a.onChange,p=a.value,h=a.errors;h=void 0===h?[]:h;var m=a.size,q=a.maxLength;a=a.autoFocus;a=void 0===a?!1:a;b=(void 0===b?0:b)?c.default.createElement("span",{className:"aui-icon icon-required"},"(required)"):null;g=l?c.default.createElement("div",{className:"description",dangerouslySetInnerHTML:l}):c.default.createElement("div",{className:"description"},g);return c.default.createElement("div",{className:"field-group"},
c.default.createElement("label",{htmlFor:"title"},d,b),c.default.createElement("input",{className:(0,n.default)("text",m&&m+"-field"),type:"text",id:e,name:e,value:p,onChange:f,maxLength:q,autoFocus:a}),g,c.default.createElement(k,{error:h}))};f.propTypes={required:b.default.bool,description:b.default.string,descriptionHtml:b.default.object,title:b.default.string.isRequired,name:b.default.string.isRequired,onChange:b.default.func,value:b.default.string,errors:b.default.array,size:b.default.oneOf(["short",
"medium","medium-long","long","full-width"]),maxLength:b.default.number,autoFocus:b.default.bool};e=function(a){var b=a.checked,d=a.description,e=a.label,g=a.name,f=a.id;return c.default.createElement("div",{className:"checkbox"},c.default.createElement("input",{"data-grouping":"trigger",className:"checkbox",type:"checkbox",name:g,id:f||g,onChange:a.onChange,checked:void 0===b?!1:b}),c.default.createElement("label",{htmlFor:f||g},e),c.default.createElement("div",{className:"description"},d))};e.propTypes=
{checked:b.default.bool,description:b.default.string,label:b.default.string.isRequired,name:b.default.string.isRequired,id:b.default.string,onChange:b.default.func};d.Error=k;d.TextField=f;d.Checkbox=e});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/component.js' */
define("bitbucket/internal/bbui/aui-react/component","module exports classnames lodash prop-types react react-dom".split(" "),function(h,d,a,k,l,c,e){Object.defineProperty(d,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(a),n=babelHelpers.interopRequireDefault(k);a=babelHelpers.interopRequireDefault(l);var g=babelHelpers.interopRequireDefault(c),f=babelHelpers.interopRequireDefault(e);e={children:a.default.node.isRequired,containerSelector:a.default.string,id:a.default.string,markup:a.default.string.isRequired,
wrapperClass:a.default.string};c=function(a){function b(){babelHelpers.classCallCheck(this,b);return babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}babelHelpers.inherits(b,a);babelHelpers.createClass(b,[{key:"componentDidMount",value:function(){var a=this,b=f.default.findDOMNode(this);b.innerHTML=this.props.markup;b.firstChild.id=this.props.id;n.default.defer(function(){return a.updateContent()})}},{key:"componentDidUpdate",value:function(){this.updateContent()}},
{key:"componentWillUnmount",value:function(){f.default.unmountComponentAtNode(this.getContainer());if(this.props.id){var a=document.querySelector("#"+this.props.id);a&&a.parentNode.removeChild(a)}}},{key:"getContainer",value:function(){return this._container?this._container:this._container=document.querySelector(this.props.containerSelector||"#"+this.props.id)}},{key:"updateContent",value:function(){var a=g.default.createElement("div",{className:(0,m.default)(this.props.wrapperClass)},this.props.children);
this.getContainer()&&f.default.render(a,this.getContainer())}},{key:"render",value:function(){return g.default.createElement("div",null)}}]);return b}(c.Component);c.propTypes=e;d.default=c;h.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/icon.js' */
define("bitbucket/internal/bbui/aui-react/icon",["module","exports","classnames","prop-types","react"],function(e,c,a,f,d){Object.defineProperty(c,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(f);var h=babelHelpers.interopRequireDefault(d);d={icon:a.default.string.isRequired,size:a.default.oneOf(["small","large"]),title:a.default.string,children:a.default.node};a=function(a){var b=a.icon;/^aui-iconfont-/.test(b)||(b="aui-iconfont-"+b);return h.default.createElement("span",
{className:(0,g.default)("aui-icon","aui-icon-"+a.size,b),title:a.title},a.children)};a.propTypes=d;a.defaultProps={size:"small"};c.default=a;e.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/toggle-button.js' */
define("bitbucket/internal/bbui/aui-react/toggle-button",["module","exports","lodash","prop-types","react"],function(k,e,l,a,b){Object.defineProperty(e,"__esModule",{value:!0});a=babelHelpers.interopRequireDefault(a);var m=babelHelpers.interopRequireDefault(b);b=function(a){function c(){var a,b,d,e;babelHelpers.classCallCheck(this,c);for(var g=arguments.length,h=Array(g),f=0;f<g;f++)h[f]=arguments[f];return e=(b=(d=babelHelpers.possibleConstructorReturn(this,(a=c.__proto__||Object.getPrototypeOf(c)).call.apply(a,
[this].concat(h))),d),d.onToggle=function(a){a=a.target.checked;var b=d.props.onToggle;b&&b(a)},d.setBooleanProps=function(a){c.booleanProps.forEach(function(b){d.toggle[b]=a[b]})},b),babelHelpers.possibleConstructorReturn(d,e)}babelHelpers.inherits(c,a);babelHelpers.createClass(c,[{key:"componentDidMount",value:function(){var a=this;this.toggle.addEventListener("change",this.onToggle);this.setBooleanProps(this.props);setTimeout(function(){return a.setBooleanProps(a.props)})}},{key:"componentWillReceiveProps",
value:function(a){this.setBooleanProps(a)}},{key:"componentWillUnmount",value:function(){this.toggle.removeEventListener("change",this.onToggle)}},{key:"render",value:function(){var a=this;return m.default.createElement("aui-toggle",babelHelpers.extends({ref:function(b){a.toggle=b}},(0,l.omit)(this.props,c.booleanProps.concat("onToggle"))))}}]);return c}(b.Component);b.propTypes={busy:a.default.bool,checked:a.default.bool,disabled:a.default.bool,label:a.default.string.isRequired,onToggle:a.default.func};
b.booleanProps=["checked","disabled","busy"];e.default=b;k.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-pull-request-branch-deletion:branch-deletion-static-resources', location = '/static/bitbucket-plugin-branch-deletion/internal/branch-deletion.js' */
define("bitbucket-plugin-branch-deletion/internal/branch-deletion",["aui","jquery","lodash","bitbucket/util/navbuilder","bitbucket/internal/model/page-state","bitbucket/internal/util/ajax","bitbucket/internal/util/client-storage","bitbucket/internal/util/events","exports",],function(l,e,o,a,k,j,c,q,d){var f="#pull-request-merge-dialog";var g="#delete-branch-checkbox";function i(r){return a.newBuilder().addPathComponents("rest","pull-request-source-branch-deletion","1.0","projects",k.getProject().getKey(),"repos",k.getRepository().getSlug(),"pull-requests",k.getPullRequest().getId()).withParams({dryRun:!!r}).build()}function n(r,t){var s=new l.Dialog({width:650,height:200,id:"branch-deletion-failure",closeOnOutsideClick:false,});s.addHeader("Pull request merged").addPanel("",bitbucket.internal.plugin.pullRequestDeleteBranch.failureDialogContents({errorMessage:r,})).addCancel("Close",function(){s.remove();t()});s.show();s.updateHeight()}function h(r){if(r&&r.errors&&r.errors.length){return r.errors[0].message}return null}function b(){return false}function m(s,t){var r=e.Deferred();s.done(function(){var u=Array.prototype.slice.call(arguments);function v(){r.resolve.apply(this,u)}if(e(g).is(":checked")){j.rest({url:d._getRestDeleteBranchUrl(),type:"POST",statusCode:{400:b,401:b,403:b,409:b,},}).done(function(){q.trigger("bitbucket.internal.page.pullRequest.revisionRefRemoved",null,k.getPullRequest().getFromRef().toJSON());return v()}).fail(function(y,A,x,z){t();var w=h(z);if(w){n(w,r.resolve)}else{v()}})}else{v()}}).fail(function(){r.reject.apply(this,Array.prototype.slice.call(arguments))});return r.promise()}d.initialiseBranchDeletion=function(){o.defer(function(){var u=e(f).find(g);var r=c.buildKey(["pr","merge","delete","branch"],"repo");var t=!!c.getItem(r);u.prop("checked",t).on("change",function(){c.setItem(r,!!this.checked,{noCleanup:true,})});var v=l.dialog2(f);v.on("show",function s(){p();v.off("show",s)})})};function p(){var r=e(f).find(g);j.rest({url:i(true),type:"POST",dataType:"json",statusCode:{400:b,403:b,409:b,},}).done(function(){r.removeAttr("disabled")}).fail(function(u,w,t,v){var s=h(v);if(s){r.attr("disabled","disabled").removeAttr("checked").parent().tooltip({delayOut:200,delayIn:0,gravity:"n",html:false,hoverable:true,offset:7,title:function(){return s},})}})}d.getMergePromiseDecorator=m;d._getRestDeleteBranchUrl=i});require("bitbucket-plugin-branch-deletion/internal/branch-deletion");;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-pull-request-branch-deletion:branch-deletion-static-resources', location = '/static/bitbucket-plugin-branch-deletion/internal/branch-deletion.soy' */
// This file was automatically generated from branch-deletion.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.plugin.pullRequestDeleteBranch.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.plugin == 'undefined') { bitbucket.internal.plugin = {}; }
if (typeof bitbucket.internal.plugin.pullRequestDeleteBranch == 'undefined') { bitbucket.internal.plugin.pullRequestDeleteBranch = {}; }


bitbucket.internal.plugin.pullRequestDeleteBranch.deleteBranchCheckbox = function(opt_data, opt_ignored) {
  return '<span class="delete-branch-checkbox-wrapper" title="' + soy.$$escapeHtml('Delete the source branch after the merge completes successfully.') + '"><input id="delete-branch-checkbox" class="checkbox" disabled="disabled" type="checkbox" name="delete-branch-checkbox"/><label for="delete-branch-checkbox">' + soy.$$escapeHtml('Delete source branch after merging') + '</label></span>';
};
if (goog.DEBUG) {
  bitbucket.internal.plugin.pullRequestDeleteBranch.deleteBranchCheckbox.soyTemplateName = 'bitbucket.internal.plugin.pullRequestDeleteBranch.deleteBranchCheckbox';
}


bitbucket.internal.plugin.pullRequestDeleteBranch.failureDialogContents = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({titleContent: '' + soy.$$escapeHtml('The pull request was merged, but the branch could not be deleted'), content: '' + soy.$$escapeHtml(opt_data.errorMessage)});
};
if (goog.DEBUG) {
  bitbucket.internal.plugin.pullRequestDeleteBranch.failureDialogContents.soyTemplateName = 'bitbucket.internal.plugin.pullRequestDeleteBranch.failureDialogContents';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-pull-request-branch-deletion:branch-deletion-web-panel', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-pull-request-branch-deletion','key':'branch-deletion-web-panel','moduleKey':'branch-deletion-web-panel','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-pull-request-branch-deletion:branch-deletion-web-panel','weight':0.0,'context-provider':function(ctx) { return WebFragments._getValue((require('bitbucket-plugin-branch-deletion/internal/branch-deletion').initialiseBranchDeletion), ctx); },'params':{},'location':'internal.stash.pull-request.merge-dialog.footer.hint','view':function(ctx) { return WebFragments._getValue((bitbucket.internal.plugin.pullRequestDeleteBranch.deleteBranchCheckbox), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-merge-dialog', location = '/static/bitbucket/internal/feature/pull-request/merge-dialog/pull-request-merge-dialog.soy' */
// This file was automatically generated from pull-request-merge-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.merge.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }
if (typeof bitbucket.internal.feature.pullRequest.merge == 'undefined') { bitbucket.internal.feature.pullRequest.merge = {}; }


bitbucket.internal.feature.pullRequest.merge.dialog = function(opt_data, opt_ignored) {
  var param39 = '';
  var webPanelList40 = WebFragments.getWebPanels('internal.stash.pull-request.merge-dialog.footer.hint').map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
  var webPanelListLen40 = webPanelList40.length;
  for (var webPanelIndex40 = 0; webPanelIndex40 < webPanelListLen40; webPanelIndex40++) {
    var webPanelData40 = webPanelList40[webPanelIndex40];
    param39 += (webPanelIndex40 == 0) ? soy.$$escapeHtml(webPanelData40) : '';
  }
  var output = '' + aui.dialog.dialog2({id: 'pull-request-merge-dialog', size: 'large', content: '<div class="commit-message-container"><div class="committer-avatar">' + bitbucket.internal.widget.avatar({size: 'medium', person: opt_data.person}) + '</div>' + bitbucket.internal.widget.codeBlock({content: '' + bitbucket.internal.feature.pullRequest.merge.mergeMessage(opt_data), extraClasses: 'default-commit-message'}) + bitbucket.internal.widget.form({action: '', autocomplete: 'off', extraClasses: 'commit-message-form collapsed', content: '' + widget.aui.form.expandingTextarea({id: 'commit-message', name: 'commit-message', extraClasses: 'text commit-message full-width-field', placeholderText: soydata.VERY_UNSAFE.ordainSanitizedHtml('Add to the commit message\x26hellip;')}) + aui.buttons.button({type: 'link', text: 'Cancel', extraClasses: 'commit-message-action cancel-commit-message-link'})}) + '</div>' + bitbucket.internal.feature.repository.branchDiagram({type: 'merge', id: 'merge-branch', sourceRef: opt_data.pullRequest.fromRef, sourceRepo: opt_data.pullRequest.fromRef.repository.id != opt_data.pullRequest.toRef.repository.id ? opt_data.pullRequest.fromRef.repository : null, targetRef: opt_data.pullRequest.toRef, targetRepo: opt_data.pullRequest.fromRef.repository.id != opt_data.pullRequest.toRef.repository.id ? opt_data.pullRequest.toRef.repository : null}), titleText: 'Merge Pull Request', footerHintContent: param39, footerActionContent: '' + ((opt_data.mergeStrategies && opt_data.mergeStrategies.length > 1 && opt_data.defaultStrategy) ? bitbucket.internal.feature.pullRequest.merge.mergeStrategy(opt_data) : '') + aui.buttons.button({text: 'Merge', type: 'primary', extraClasses: 'confirm-button'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'cancel-button'})});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.merge.dialog.soyTemplateName = 'bitbucket.internal.feature.pullRequest.merge.dialog';
}


bitbucket.internal.feature.pullRequest.merge.mergeMessage = function(opt_data, opt_ignored) {
  var output = '';
  var crossRepo__soy61 = opt_data.pullRequest.toRef.repository.id != opt_data.pullRequest.fromRef.repository.id;
  output += 'Merge pull request #' + soy.$$escapeHtml(opt_data.pullRequest.id) + ' in ' + soy.$$escapeHtml(opt_data.pullRequest.toRef.repository.project.key) + '/' + soy.$$escapeHtml(opt_data.pullRequest.toRef.repository.slug) + ' from ' + ((crossRepo__soy61) ? soy.$$escapeHtml(opt_data.pullRequest.fromRef.repository.project.key) + '/' + soy.$$escapeHtml(opt_data.pullRequest.fromRef.repository.slug) + ':' : '') + soy.$$escapeHtml(opt_data.pullRequest.fromRef.displayId) + ' to ' + soy.$$escapeHtml(opt_data.pullRequest.toRef.displayId);
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.merge.mergeMessage.soyTemplateName = 'bitbucket.internal.feature.pullRequest.merge.mergeMessage';
}


bitbucket.internal.feature.pullRequest.merge.errors = function(opt_data, opt_ignored) {
  var param79 = '';
  var errorList80 = opt_data.errors;
  var errorListLen80 = errorList80.length;
  for (var errorIndex80 = 0; errorIndex80 < errorListLen80; errorIndex80++) {
    var errorData80 = errorList80[errorIndex80];
    if (errorData80.conflicted || errorData80.vetoes && errorData80.vetoes.length) {
      param79 += soy.$$escapeHtml(AJS.format('There {0,choice,1#is|1\x3care} {0} {0,choice,1#issue|1\x3cissues} preventing you from merging this pull request.',errorData80.vetoes ? errorData80.vetoes.length + errorData80.conflicted : errorData80.conflicted)) + '<ul>' + ((errorData80.conflicted) ? '<li>' + soy.$$escapeHtml('Merge conflict.') + aui.buttons.button({text: 'Show details', type: 'link', extraClasses: 'view-merge-veto-details-button'}) + '</li>' : '');
      if (errorData80.vetoes && errorData80.vetoes.length) {
        var vetoList96 = errorData80.vetoes;
        var vetoListLen96 = vetoList96.length;
        for (var vetoIndex96 = 0; vetoIndex96 < vetoListLen96; vetoIndex96++) {
          var vetoData96 = vetoList96[vetoIndex96];
          param79 += '<li>' + soy.$$escapeHtml(vetoData96.detailedMessage) + '</li>';
        }
      }
      param79 += '</ul>';
    } else {
      param79 += bitbucket.internal.widget.errorContent({message: errorData80.message, details: errorData80.details, detailListExtraClasses: 'errors'});
    }
  }
  var output = '' + aui.message.error({content: param79});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.merge.errors.soyTemplateName = 'bitbucket.internal.feature.pullRequest.merge.errors';
}


bitbucket.internal.feature.pullRequest.merge.mergeStrategy = function(opt_data, opt_ignored) {
  var output = '<button id="merge-strategy-button" class="aui-button aui-dropdown2-trigger" aria-controls="merge-strategy-opts">' + soy.$$escapeHtml(opt_data.defaultStrategy.name) + '</button><aui-dropdown-menu id="merge-strategy-opts"><aui-section label="' + soy.$$escapeHtml('Merge strategy') + '">';
  var strategyList115 = opt_data.mergeStrategies;
  var strategyListLen115 = strategyList115.length;
  for (var strategyIndex115 = 0; strategyIndex115 < strategyListLen115; strategyIndex115++) {
    var strategyData115 = strategyList115[strategyIndex115];
    output += '<aui-item-link href="#" data-strategy="' + soy.$$escapeHtml(strategyData115.id) + '"><span class="strategy-name">' + soy.$$escapeHtml(strategyData115.name) + '</span>' + ((strategyData115.id == opt_data.defaultStrategy.id) ? ' (' + soy.$$escapeHtml('default') + ')' : '') + ' <code>' + soy.$$escapeHtml(strategyData115.flag) + '</code></aui-item-link>';
  }
  output += '</aui-section></aui-dropdown-menu>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.merge.mergeStrategy.soyTemplateName = 'bitbucket.internal.feature.pullRequest.merge.mergeStrategy';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-merge-dialog', location = '/static/bitbucket/internal/feature/pull-request/merge-dialog/merge-dialog.js' */
define("bitbucket/internal/feature/pull-request/merge-dialog/merge-dialog","module exports aui jquery bitbucket/util/navbuilder bitbucket/internal/bbui/aui-react/avatar bitbucket/internal/model/page-state bitbucket/internal/util/ajax bitbucket/internal/util/events bitbucket/internal/util/set-dialog-buttons-disabled bitbucket/internal/widget/submit-spinner/submit-spinner".split(" "),function(u,m,v,w,x,y,z,A,B,C,D){function E(e){var b=n.default.dialog2(bitbucket.internal.feature.pullRequest.merge.dialog(e.dialog));
(0,c.default)("body").append(b.$el);var f=void 0,g=void 0,p=void 0;(0,c.default)(document).on("click","#merge-strategy-opts aui-item-link",function(d){var a=(0,c.default)(d.currentTarget);p=a.data("strategy");b.$el.find("#merge-strategy-button").text(a.find(".strategy-name").text());d.preventDefault()});b.$el.find(".confirm-button").on("click",function(d){d=(0,c.default)("#merge-strategy-button").length?(0,c.default)("#merge-strategy-button"):d.target;var a=new F.default(d,"before");d=q.default.rest().currentPullRequest().merge().withParams({avatarSize:y.AvatarSize.XSMALL,
version:h.default.getPullRequest().getVersion()}).build();(0,r.default)(b,!0);a.show();d=f=t.default.rest(babelHelpers.extends({},e.ajax,{url:d,type:"POST",data:{message:b.$el.find("#commit-message").val(),strategyId:p}}));f.always(function(){f=null;a.hide();(0,r.default)(b,!1)});if(!g)try{g=require("bitbucket-plugin-branch-deletion/internal/branch-deletion").getMergePromiseDecorator}catch(H){}g&&(d=g(d,function(){return b.hide()})||d);d.done(function(a){k.default.trigger("bitbucket.internal.feature.pullRequest.merged",
null,{user:h.default.getCurrentUser().toJSON(),pullRequest:a});e.callback(a)})});b.$el.find(".cancel-button").on("click",function(){f&&(f.abort(),f=null);l(b);b.hide()});b.$el.find(".commit-message").on("focus",G);b.$el.find(".cancel-commit-message-link").click(function(d){d.preventDefault();l(b)});b.on("hide",function(){l(b)});b.$el.on("click",".view-merge-veto-details-button",function(){b.hide();k.default.trigger("bitbucket.internal.pull-request.show.cant.merge.help")});return b}function G(){(0,
c.default)(this).closest(".commit-message-form").removeClass("collapsed")}function l(e){e.$el.find(".commit-message").val("");e.$el.find(".commit-message-form").addClass("collapsed")}Object.defineProperty(m,"__esModule",{value:!0});var n=babelHelpers.interopRequireDefault(v),c=babelHelpers.interopRequireDefault(w),q=babelHelpers.interopRequireDefault(x),h=babelHelpers.interopRequireDefault(z),t=babelHelpers.interopRequireDefault(A),k=babelHelpers.interopRequireDefault(B),r=babelHelpers.interopRequireDefault(C),
F=babelHelpers.interopRequireDefault(D),e=void 0;m.default={onMergeClick:function(){e.show();l(e);e.$el.find(".confirm-button").focus()},initMergeDialog:function(c){var b=c.callback,f=c.mergeTimeout;t.default.rest({url:q.default.rest().currentRepo().pullRequestSettings().build(),type:"GET"}).done(function(c){var g=h.default.getPullRequest(),d=c.mergeConfig.strategies.filter(function(a){return a.enabled}).filter(function(a){return a.id!==c.mergeConfig.defaultStrategy.id});d.unshift(c.mergeConfig.defaultStrategy);
d={dialog:{person:h.default.getCurrentUser()&&h.default.getCurrentUser().toJSON(),pullRequest:g.toJSON(),mergeStrategies:d,defaultStrategy:c.mergeConfig.defaultStrategy},ajax:{statusCode:{400:function(a,b,d,c,f){a=e.$el.find(".aui-dialog2-content");c.errors&&(a.children(".aui-message").remove(),a.prepend(bitbucket.internal.feature.pullRequest.merge.errors({errors:c.errors})));return!1},401:function(a,b,d,c,f){e.hide();return babelHelpers.extends({},f,{title:"Could not merge pull request",
message:"You no longer have permission to merge this pull request.",fallbackUrl:!1,shouldReload:!0})},409:function(a,b,d,c,f){a=c.errors&&c.errors.length&&c.errors[0];b=e.$el.find(".aui-dialog2-content");if("com.atlassian.bitbucket.pull.PullRequestOutOfDateException"===a.exceptionName)b.find(".aui-message").remove(),e.hide();else if(a&&(a.isConflicted||a.conflicted||a.vetoes&&a.vetoes.length))return k.default.trigger("bitbucket.internal.pull-request.cant.merge",null,g,a.conflicted||
a.isConflicted,a.vetoes),b.children(".aui-message").remove(),b.prepend(bitbucket.internal.feature.pullRequest.merge.errors({errors:c.errors})),"false"!==e.$el.attr("aria-hidden")&&k.default.trigger("bitbucket.internal.pull-request.show.cant.merge.help"),!1},"*":function(){e.hide()}},timeout:1E3*f},callback:function(a){b(a);e.hide()}};e=E(d)})}};u.exports=m["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-json', location = '/static/bitbucket/internal/model/pull-request-json.js' */
define("bitbucket/internal/model/pull-request-json",["exports","lodash","bitbucket/internal/model/pull-request"],function(a,c,b){Object.defineProperty(a,"__esModule",{value:!0});a.filter=a.pullRequestProperties=void 0;b=babelHelpers.interopRequireDefault(b);var d=a.pullRequestProperties=Object.keys((new b.default({})).namedAttributes);a.filter=function(a){return(0,c.pick)(a,d)}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:branch-from-to', location = '/static/bitbucket/internal/bbui/branch-from-to/branch-from-to.js' */
define("bitbucket/internal/bbui/branch-from-to/branch-from-to","module exports aui classnames prop-types react react-dom ../aui-react/avatar".split(" "),function(k,f,b,l,m,e,g,n){Object.defineProperty(f,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(b),p=babelHelpers.interopRequireDefault(l);b=babelHelpers.interopRequireDefault(m);var d=babelHelpers.interopRequireDefault(e);b={fromRef:b.default.object.isRequired,toRef:b.default.object.isRequired};e=function(b){function c(){babelHelpers.classCallCheck(this,
c);return babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}babelHelpers.inherits(c,b);babelHelpers.createClass(c,[{key:"componentDidMount",value:function(){var a=(0,g.findDOMNode)(this);h.default.$(".ref-name",a).tooltip()}},{key:"componentWillUnmount",value:function(){var a=(0,g.findDOMNode)(this);h.default.$(".ref-name",a).tooltip("destroy")}},{key:"refItem",value:function(a,q,b,c){c=b&&!c;b=this.projectAvatar(a,!b);return d.default.createElement("div",
{className:(0,p.default)("ref-name","ref-name-"+q,{"with-avatar":b}),title:this.refTitle(a)},b,this.displayTitle(a,c))}},{key:"projectAvatar",value:function(a,b){if(b)return d.default.createElement("span",{className:"avatar-to-project avatar-ref-project"},d.default.createElement(n.ProjectAvatar,{size:"xsmall",project:a.repository.project,tagName:"span"}))}},{key:"displayTitle",value:function(a,b){return b?d.default.createElement("span",null,d.default.createElement("span",{className:"repo-name"},a.repository.name),
d.default.createElement("span",{className:"repo-name-icon"}),d.default.createElement("span",{className:"branch-name"},a.displayId)):d.default.createElement("span",{className:"branch-name"},a.displayId)}},{key:"refTitle",value:function(a){return a.repository.project.name+" / "+a.repository.name+" : "+a.displayId}},{key:"render",value:function(){var a=this.props,b=a.fromRef;a=a.toRef;var c=b.repository.project.id===a.repository.project.id,e=b.repository.id===a.repository.id;return d.default.createElement("div",
{className:"branch-from-to"},this.refItem(b,"from",c,e),d.default.createElement("div",{className:"aui-icon aui-icon-small aui-iconfont-devtools-arrow-right arrow"},"to"),this.refItem(a,"to",c,e))}}]);return c}(e.Component);e.propTypes=b;f.default=e;k.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:codeblock', location = '/static/bitbucket/internal/bbui/codeblock/codeblock.js' */
define("bitbucket/internal/bbui/codeblock/codeblock",["module","exports","classnames","prop-types","react"],function(e,d,a,f,b){function g(a){return c.default.Children.map(a,function(a){return a.type&&"line"===a.type.toLowerCase()&&[a.props.children,"\n"]||a})}Object.defineProperty(d,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(f);var c=babelHelpers.interopRequireDefault(b);b=function(a){return c.default.createElement("div",{className:(0,
h.default)("code-block",{"instruction-block":a.instructionBlock},a.extraClasses)},c.default.createElement("pre",null,c.default.createElement("code",null,a.code||g(a.children))))};b.propTypes={instructionBlock:a.default.bool,extraClasses:a.default.string,children:a.default.node,code:a.default.string};d.default=b;e.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-title-enricher', location = '/static/bitbucket/internal/bbui/pull-request-header/pull-request-title-enricher.js' */
define("bitbucket/internal/bbui/pull-request-header/pull-request-title-enricher",["module","exports","../../util/string-replacer"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});b=new (babelHelpers.interopRequireDefault(b).default);a.default=b;c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reviewer-avatar', location = '/static/bitbucket/internal/bbui/reviewer-avatar/reviewer-avatar.js' */
define("bitbucket/internal/bbui/reviewer-avatar/reviewer-avatar","module exports lodash prop-types react bitbucket/internal/enums ../aui-react/avatar".split(" "),function(l,e,f,b,d,g,h){function m(b,c){var a=b.user.displayName||b.user.name;return c||!b.status||b.status===g.ApprovalStatus.UNAPPROVED?a:b.status===g.ApprovalStatus.APPROVED?AJS.format("{0} marked as approved.",a):AJS.format("{0} marked as needs work.",a)}
Object.defineProperty(e,"__esModule",{value:!0});f=babelHelpers.interopRequireDefault(f);b=babelHelpers.interopRequireDefault(b);var n=babelHelpers.interopRequireDefault(d),p=babelHelpers.interopRequireDefault(h);h={avatarSize:b.default.string,reviewer:b.default.shape({user:b.default.object.isRequired,status:b.default.oneOf(f.default.values(g.ApprovalStatus)).isRequired}).isRequired,withName:b.default.bool,tooltip:b.default.bool,nameOnly:b.default.bool};var k={APPROVED:"approved",NEEDS_WORK:"needs-work"},
q=[{className:k.APPROVED,text:"Approved"},{className:k.NEEDS_WORK,text:"Needs work"}];d=function(b){function c(){babelHelpers.classCallCheck(this,c);return babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}babelHelpers.inherits(c,b);babelHelpers.createClass(c,[{key:"shouldComponentUpdate",value:function(a){return this.props.reviewer.user.name!==
a.reviewer.user.name||this.props.reviewer.status!==a.reviewer.status||this.props.avatarSize!==a.avatarSize||!!this.props.nameOnly!==!!a.nameOnly||!!this.props.tooltip!==!!a.tooltip||!!this.props.withName!==!!a.withName}},{key:"render",value:function(){var a=this.props;return n.default.createElement(p.default,{person:a.reviewer.user,size:a.avatarSize,badges:q,tooltipText:m(a.reviewer,a.nameOnly),visibleBadge:a.reviewer.status?k[a.reviewer.status]:"",withName:a.withName,tooltip:a.tooltip})}}]);return c}(d.Component);
d.propTypes=h;e.default=d;l.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:tipsy', location = '/static/bitbucket/internal/bbui/tipsy/tipsy.js' */
define("bitbucket/internal/bbui/tipsy/tipsy",["module","exports","jquery","prop-types","react"],function(d,c,b,e,a){Object.defineProperty(c,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(b);b=babelHelpers.interopRequireDefault(e);var g=babelHelpers.interopRequireDefault(a);a=function(b){function a(){babelHelpers.classCallCheck(this,a);return babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}babelHelpers.inherits(a,b);babelHelpers.createClass(a,
[{key:"componentDidMount",value:function(){var a=this,b=this.props,c=b.gravity,d=b.offset,e=b.tooltipClassName;setTimeout(function(){return(0,f.default)(a.el).tooltip({gravity:c,offset:d,className:e})},this.props.delay)}},{key:"render",value:function(){var b=this,a=this.props;return g.default.createElement("span",{ref:function(a){b.el=a},className:a.className,title:a.title},a.children)}}]);return a}(a.Component);a.propTypes={children:b.default.node,className:b.default.string,delay:b.default.number,
gravity:b.default.string,offset:b.default.number,title:b.default.string,tooltipClassName:b.default.string};a.defaultProps={delay:0};c.default=a;d.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:i18n-html-react-util', location = '/static/bitbucket/internal/util/i18n-html.js' */
define("bitbucket/internal/util/i18n-html",["module","exports","aui","prop-types","react"],function(h,e,f,b,c){Object.defineProperty(e,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);var g=babelHelpers.interopRequireDefault(c),k=function(d,a){return a.length?f.format.apply(void 0,[d].concat(babelHelpers.toConsumableArray(a.map(String).map(f.escapeHtml)))):d},a=function(a){var b=a.tag,c=a.children,d=a.params;a=babelHelpers.objectWithoutProperties(a,["tag","children","params"]);return g.default.createElement(b,
babelHelpers.extends({dangerouslySetInnerHTML:{__html:k(c,d)}},a))};a.defaultProps={tag:"span"};a.propTypes={attributes:b.default.any,children:b.default.string.isRequired,tag:b.default.string,params:b.default.array.isRequired};c=function(b){return function(c){return g.default.createElement(a,babelHelpers.extends({},c,{tag:b}))}};a.p=c("p");a.span=c("span");a.div=c("div");a.a=c("a");e.default=a;h.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:self-reviewer', location = '/static/bitbucket/internal/bbui/self-reviewer/self-reviewer.js' */
define("bitbucket/internal/bbui/self-reviewer/self-reviewer","module exports aui classnames prop-types react bitbucket/internal/enums bitbucket/internal/util/i18n-html ../aui-react/inline-dialog ../reviewer-avatar/reviewer-avatar ../tipsy/tipsy".split(" "),function(n,g,b,p,q,f,k,h,l,r,t){Object.defineProperty(g,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(b),u=babelHelpers.interopRequireDefault(p);b=babelHelpers.interopRequireDefault(q);var a=babelHelpers.interopRequireDefault(f),
v=babelHelpers.interopRequireDefault(h),w=babelHelpers.interopRequireDefault(l),x=babelHelpers.interopRequireDefault(r),m=babelHelpers.interopRequireDefault(t);h={currentUserAsReviewer:b.default.object,isWatching:b.default.bool,onSelfClick:b.default.func.isRequired,removeSelfModalId:b.default.string.isRequired};f=function(b){function d(){babelHelpers.classCallCheck(this,d);var a=babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));a.state={hovered:!1};return a}
babelHelpers.inherits(d,b);babelHelpers.createClass(d,[{key:"mouseEnter",value:function(a){this.setState({hovered:!0})}},{key:"mouseLeave",value:function(a){this.setState({hovered:!1})}},{key:"render",value:function(){var c=this,b=this.props.currentUserAsReviewer,d=a.default.createElement("p",null,a.default.createElement("label",null,a.default.createElement("input",{className:"checkbox",type:"checkbox",ref:function(a){c._unwatchCheckbox=a}}),a.default.createElement(v.default,{params:[]},"\u003cstrong\u003eUnwatch\u003c/strong\u003e this pull request.")));
return b?a.default.createElement("div",{className:(0,u.default)("self-avatar",{jsHover:this.state.hovered,reviewing:this.props.currentUserAsReviewer}),onMouseEnter:function(){return c.mouseEnter()},onMouseLeave:function(){return c.mouseLeave()}},a.default.createElement(m.default,{key:"remove-self",title:"Remove yourself as a reviewer",className:"remove-self",delay:500},a.default.createElement(l.InlineDialogTrigger,{dialogId:this.props.removeSelfModalId,className:"aui-button"},
"\u2013")),a.default.createElement(w.default,{key:"remove_self_dialog",id:this.props.removeSelfModalId,className:"remove-self-dialog",alignment:"bottom right"},a.default.createElement("h5",null,"Confirm removal"),a.default.createElement("p",null,"Please confirm if you want to remove yourself as a reviewer."),this.props.isWatching?d:null,a.default.createElement("p",null,a.default.createElement("button",{className:"aui-button",
onClick:function(a){return c.props.onSelfClick(k.SelfAction.REMOVE_SELF,c._unwatchCheckbox?c._unwatchCheckbox.checked:null)}},"Remove as reviewer"))),a.default.createElement(x.default,{reviewer:b,tooltip:!1})):a.default.createElement("div",{className:"self-avatar"},a.default.createElement(m.default,{key:"add-self",ref:function(a){c._add_self=a},title:"Add yourself as a reviewer",className:"add-self"},a.default.createElement("button",
{onClick:function(){c.setState({hovered:!1});c.props.onSelfClick(k.SelfAction.ADD_SELF)},className:"aui-button"},"+")))}}]);return d}(f.Component);f.propTypes=h;g.default=f;n.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reviewer-avatar-list', location = '/static/bitbucket/internal/bbui/reviewer-avatar-list/reviewer-avatar-list.js' */
define("bitbucket/internal/bbui/reviewer-avatar-list/reviewer-avatar-list","module exports aui classnames lodash prop-types react bitbucket/internal/enums ../aui-react/inline-dialog ../reviewer-avatar/reviewer-avatar ../self-reviewer/self-reviewer".split(" "),function(r,f,a,t,u,v,g,w,m,x,y){function z(b){return b.slice().sort(function(b,a){return n[b.status]-n[a.status]||b.user.displayName.localeCompare(a.user.displayName)})}Object.defineProperty(f,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(a),
p=babelHelpers.interopRequireDefault(t),A=babelHelpers.interopRequireDefault(u);a=babelHelpers.interopRequireDefault(v);var e=babelHelpers.interopRequireDefault(g),l=babelHelpers.interopRequireDefault(w),B=babelHelpers.interopRequireDefault(m),q=babelHelpers.interopRequireDefault(x),C=babelHelpers.interopRequireDefault(y),d;g={avatarSize:a.default.string,currentUserAsReviewer:a.default.object,currentUserAvatarSize:a.default.string,dialogReviewersAsTooltip:a.default.bool,isWatching:a.default.bool,
maxOpen:a.default.number,menuId:a.default.string.isRequired,onSelfClick:a.default.func,permissionToReview:a.default.bool.isRequired,pullRequestIsOpen:a.default.bool.isRequired,reverse:a.default.bool,reviewers:a.default.array.isRequired,triggerClass:a.default.string};var n={APPROVED:1,NEEDS_WORK:2,UNAPPROVED:3},D=(d={},babelHelpers.defineProperty(d,l.default.ApprovalStatus.APPROVED,"Approved"),babelHelpers.defineProperty(d,l.default.ApprovalStatus.NEEDS_WORK,
"Needs work"),d);d=function(b){var a=z(b.reviewers),c=b.currentUserAsReviewer?A.default.findIndex(a,function(a){return a.user.name===(b.currentUserAsReviewer.name||b.currentUserAsReviewer.user.name)}):-1,d=b.permissionToReview&&b.pullRequestIsOpen,f=d?b.maxOpen-1:b.maxOpen;-1<c&&(c=a.splice(c,1)[0],d&&!b.currentUserAvatarSize||a.unshift(c));var g=void 0;c=void 0;a.length>f?(g=a.slice(0,f-1),c=a.slice(f-1)):(g=a,c=[]);a=g.map(function(a){return e.default.createElement(q.default,
{reviewer:a,key:a.user.name,avatarSize:b.currentUserAsReviewer&&b.currentUserAvatarSize&&a.user.name===b.currentUserAsReviewer.name?b.currentUserAvatarSize:"small"})}).slice();d&&a.unshift(e.default.createElement(C.default,{removeSelfModalId:"remove-self-modal",currentUserAsReviewer:b.currentUserAsReviewer,isWatching:b.isWatching,key:"self_reviewer",onSelfClick:b.onSelfClick}));if(c.length)if(b.dialogReviewersAsTooltip){var k="";c.map(function(a,b,c){k+=h.default.escapeHtml(a.user.displayName);a.status!==
l.default.ApprovalStatus.UNAPPROVED&&(k+=" ("+D[a.status]+")");b+1<c.length&&(k+="\x3cbr\x3e")});a.push(e.default.createElement("button",{className:"overflow-reviewers-trigger overflow-reviewers-tooltip aui-button aui-button-subtle",key:"overflow-reviewers-tooltip",title:k,ref:function(a){return h.default.$(a).tooltip({html:!0})}},"+",c.length))}else a.push(e.default.createElement(m.InlineDialogTrigger,{key:"trigger",dialogId:b.menuId,className:(0,p.default)("aui-button-subtle overflow-reviewers-trigger",
b.triggerClass)},"+",c.length)),a.push(e.default.createElement(B.default,{key:"dialog",id:b.menuId,className:"overflow-reviewers",alignment:b.reverse?"left top":"bottom right"},e.default.createElement("div",{className:"avatar-dropdown"},e.default.createElement("ul",{className:"aui-list-truncate"},c.map(function(a){return e.default.createElement("li",{key:a.user.name},e.default.createElement(q.default,{reviewer:a,tooltip:!1,nameOnly:!0,withName:!0}))})))));return e.default.createElement("div",{className:(0,
p.default)("reviewer-avatar-list",{reviewing:b.currentUserAsReviewer,reversed:b.reverse})},b.reverse?a.reverse():a)};d.propTypes=g;f.default=d;r.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reviewer-status', location = '/static/bitbucket/internal/bbui/reviewer-status/reviewer-status.js' */
define("bitbucket/internal/bbui/reviewer-status/reviewer-status","module exports aui classnames lodash prop-types react bitbucket/internal/enums".split(" "),function(l,b,c,m,n,a,g,e){Object.defineProperty(b,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(c),p=babelHelpers.interopRequireDefault(m);c=babelHelpers.interopRequireDefault(n);a=babelHelpers.interopRequireDefault(a);var h=babelHelpers.interopRequireDefault(g);g={currentUserAsReviewer:a.default.object,onStatusClick:a.default.func.isRequired,
status:a.default.oneOf(c.default.values(e.ApprovalStatus))};var k={approve:"Approve &mdash; This pull request is ready to merge","approve-deselect":"Remove approval","needs-work":"Needs work &mdash; This pull request shouldn\u0027t be merged yet","needs-work-deselect":"Remove Needs work"};a=function(a){function b(b,c){var f=a.status===
b;return h.default.createElement("button",{className:"aui-button "+c,"aria-pressed":f,title:k[c+(f?"-deselect":"")],onClick:function(){return a.onStatusClick({newStatus:f?e.ApprovalStatus.UNAPPROVED:b})},ref:function(a){return d.default.$(a).tooltip({html:!0})}},h.default.createElement("span",null,k[c+(f?"-deselect":"")]))}return h.default.createElement("div",{className:(0,p.default)("aui-buttons","reviewer-status-selector",{reviewing:a.currentUserAsReviewer}),"data-status":a.status},b(e.ApprovalStatus.NEEDS_WORK,
"needs-work"),b(e.ApprovalStatus.APPROVED,"approve"))};a.propTypes=g;b.default=a;l.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:web-fragments', location = '/static/bitbucket/internal/bbui/web-fragments/web-fragments.js' */
define("bitbucket/internal/bbui/web-fragments/web-fragments",["exports","../javascript-errors/javascript-errors"],function(c,d){Object.defineProperty(c,"__esModule",{value:!0});c.FragmentType=void 0;c.FragmentType={ITEM:"ITEM",SECTION:"SECTION",PANEL:"PANEL"};var e=function(){function c(){babelHelpers.classCallCheck(this,c)}babelHelpers.createClass(c,[{key:"getWebItems",value:function(a,b){throw new d.NotImplementedError;}},{key:"getWebSections",value:function(a,b){throw new d.NotImplementedError;
}},{key:"getWebPanels",value:function(a,b){throw new d.NotImplementedError;}},{key:"getWebFragments",value:function(a,b,c){throw new d.NotImplementedError;}}],[{key:"getExampleItem",value:function(a,b){b=b&&Object.keys(b).join(", ")||"(none)";return{type:"ITEM",completeModuleKey:a+":example-web-item",weight:1E3,location:a,url:"#example-web-item-url",key:"example-web-item",text:"Client Web Item: "+a,params:{},id:null,cssClass:"plugin-point",tooltip:"Client Context Items: "+b,iconUrl:null,iconWidth:0,
iconHeight:0}}},{key:"getExampleSection",value:function(a,b){return{type:"SECTION",completeModuleKey:a+":example-web-section",weight:1E3,location:a,key:"example-web-section",text:"Client Web Section: "+a,params:{}}}},{key:"getExamplePanel",value:function(a,b){b=b&&Object.keys(b).join(", ")||"(none)";return{type:"PANEL",completeModuleKey:a+":example-web-panel",weight:1E3,location:a,key:"example-web-panel",html:'\x3cdiv class\x3d"plugin-point web-panel"\x3e\x3cstrong\x3eClient Web Panel\x3c/strong\x3e: '+
a+"\x3cbr /\x3e\x3cstrong\x3eClient Context Items\x3c/strong\x3e: "+b+"\x3c/div\x3e",params:{}}}}]);return c}();c.default=e});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:bitbucket-web-fragments', location = '/static/bitbucket/internal/impl/web-fragments.js' */
define("bitbucket/internal/impl/web-fragments",["module","exports","lodash","bitbucket/internal/bbui/web-fragments/web-fragments","bitbucket/internal/util/object"],function(m,e,n,p,q){function h(b){return k.default.transform(b,function(a,b,d){a[d]=b&&b._stash?b._stash:b},{})}function c(){l.default.apply(this,arguments);this._handlers={}}function f(b,a,c){return function(d,g){return this._handlers[d]?this._handlers[d](d,[b],h(g),g):window.WebFragments[a](d,h(g)).map(c.bind(null,d))}}Object.defineProperty(e,
"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(n),l=babelHelpers.interopRequireDefault(p);babelHelpers.interopRequireDefault(q).default.inherits(c,l.default);c.prototype.getWebItems=f("ITEM","getWebItems",function(b,a){return{type:"ITEM",weight:a.weight,location:b,url:a.url,key:a.moduleKey,text:a.linkText,params:a.params,id:a.linkId,cssClass:a.styleClass,tooltip:a.tooltip,iconUrl:a.iconUrl||null,iconWidth:a.iconWidth||0,iconHeight:a.iconHeight||0,description:a.description}});c.prototype.getWebSections=
f("SECTION","getWebSections",function(b,a){return{type:"SECTION",weight:a.weight,location:b,key:a.key,text:a.labelText,params:a.params,description:a.description}});c.prototype.getWebPanels=f("PANEL","_getWebPanels",function(b,a){return{type:"PANEL",weight:a.weight,location:b,key:a.key,html:a.view,params:a.params,description:a.description}});c.prototype.getWebFragments=function(b,a,c){var d=this;return k.default.chain(a).flatMap(function(a){switch(a){case "ITEM":return d.getWebItems(b,c);case "SECTION":return d.getWebSections(b,
c);case "PANEL":return d.getWebPanels(b,c)}}).sortBy("weight").value()};c.prototype.registerHandler=function(b,a){if(this._handlers[b])throw Error("Location "+b+" is being double handled.");this._handlers[b]=a};e.default=new c;m.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/actions.js' */
define("bitbucket/internal/bbui/pull-request-header/actions",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});a.PR_HIDE_MERGE_ERRORS="PR_HIDE_MERGE_ERRORS";a.PR_SHOW_MERGE_ERRORS="PR_SHOW_MERGE_ERRORS"});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/components/merge-instructions.js' */
define("bitbucket/internal/bbui/pull-request-header/components/merge-instructions","module exports prop-types react bitbucket/internal/enums bitbucket/internal/impl/urls ../../codeblock/codeblock".split(" "),function(n,b,h,l,d,p,q){Object.defineProperty(b,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(h),a=babelHelpers.interopRequireDefault(l),m=babelHelpers.interopRequireDefault(p),g=babelHelpers.interopRequireDefault(q);h=function(b){function e(){var a;babelHelpers.classCallCheck(this,
e);for(var c=arguments.length,b=Array(c),f=0;f<c;f++)b[f]=arguments[f];c=babelHelpers.possibleConstructorReturn(this,(a=e.__proto__||Object.getPrototypeOf(e)).call.apply(a,[this].concat(b)));a=c.props.pullRequest.fromRef.repository;b=c.props.pullRequest.toRef.repository;var d=f=null;a.id!==b.id&&(f=m.default.remote(a),d=m.default.remote(b));c.refDetails={sourceBranch:c.props.pullRequest.fromRef.displayId,targetBranch:c.props.pullRequest.toRef.displayId,sourceRemote:f,targetRemote:d};return c}babelHelpers.inherits(e,
b);babelHelpers.createClass(e,null,[{key:"propTypes",get:function(){return{stability:k.default.oneOf(Object.keys(d.BranchStability).map(function(a){return d.BranchStability[a]})),isAutoMergeConflict:k.default.bool,pullRequest:k.default.object.isRequired}}},{key:"defaultProps",get:function(){return{stability:d.BranchStability.STABLE}}}]);babelHelpers.createClass(e,[{key:"mergeSteps",value:function(){return this.props.stability===d.BranchStability.STABLE||this.props.isAutoMergeConflict?a.default.createElement("div",
null,a.default.createElement("p",null,a.default.createElement("strong",null,"Step 1:"," "),"Checkout the target branch and merge in the changes from the source branch. Resolve conflicts."),a.default.createElement(g.default,{instructionBlock:!0},a.default.createElement("line",null,"git checkout ",this.refDetails.targetBranch),a.default.createElement("line",null,"git pull"," ",this.refDetails.sourceRemote?this.refDetails.sourceRemote:"origin",
" ",this.refDetails.sourceBranch)),a.default.createElement("p",null,a.default.createElement("strong",null,"Step 2:"," "),"After the merge conflicts are resolved, stage the changes accordingly, commit the changes and push."),a.default.createElement(g.default,{instructionBlock:!0},a.default.createElement("line",null,"git commit"),a.default.createElement("line",null,"git push"," ",this.refDetails.targetRemote?this.refDetails.targetRemote:"origin"," ","HEAD")),a.default.createElement("p",
null,a.default.createElement("strong",null,"Step 3:"," "),"The pull request will be updated and marked as merged.")):a.default.createElement("div",null,a.default.createElement("p",null,a.default.createElement("strong",null,"Step 1:"," "),"Checkout the source branch and merge in the changes from the target branch. Resolve conflicts."),a.default.createElement(g.default,{instructionBlock:!0},
a.default.createElement("line",null,"git checkout ",this.refDetails.sourceBranch),a.default.createElement("line",null,"git pull"," ",this.refDetails.targetRemote?this.refDetails.targetRemote:"origin"," ",this.refDetails.targetBranch)),a.default.createElement("p",null,a.default.createElement("strong",null,"Step 2:"," "),"After the merge conflicts are resolved, stage the changes accordingly, commit the changes and push."),a.default.createElement(g.default,{instructionBlock:!0},
a.default.createElement("line",null,"git commit"),a.default.createElement("line",null,"git push"," ",this.refDetails.sourceRemote?this.refDetails.sourceRemote:"origin"," ","HEAD")),a.default.createElement("p",null,a.default.createElement("strong",null,"Step 3:"," "),"Merge the updated pull request."))}},{key:"render",value:function(){var b="This pull request has conflicts.";
this.props.isAutoMergeConflict&&(b="Automatic merge failed because there were conflicts.");var c=AJS.format("You must resolve the conflicts by manually merging {0} into this branch. After the conflicts are resolved you will be able to merge the pull request.",this.refDetails.targetBranch);if(this.props.stability===d.BranchStability.STABLE||this.props.isAutoMergeConflict)c=AJS.format("You must resolve the conflicts by manually merging this branch into {0}. This will merge the pull request remotely.",this.refDetails.targetBranch);return a.default.createElement("div",{className:"merge-instructions"},
a.default.createElement("p",{className:"intro"},b),a.default.createElement("p",{className:"intro"},c),this.mergeSteps())}}]);return e}(l.Component);b.default=h;n.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/components/merge-help-dialog.js' */
define("bitbucket/internal/bbui/pull-request-header/components/merge-help-dialog","module exports aui prop-types react bitbucket/internal/enums ../../aui-react/component ./merge-instructions".split(" "),function(l,b,f,m,g,h,n,p){Object.defineProperty(b,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(f),d=babelHelpers.interopRequireDefault(m),k=babelHelpers.interopRequireDefault(g),q=babelHelpers.interopRequireDefault(n),r=babelHelpers.interopRequireDefault(p);f=function(b){function a(){babelHelpers.classCallCheck(this,
a);return babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}babelHelpers.inherits(a,b);babelHelpers.createClass(a,[{key:"componentDidMount",value:function(){var c=this;this.dialog=e.default.dialog2(document.querySelector("#"+this.props.id));this.dialog.on("hide",function(){c.dialog.$el.remove();c.props.onHide()});this.dialog.$el.find("#merge-help-dialog-close-button").on("click",function(){return c.dialog.hide()});this.dialog.show()}},{key:"render",
value:function(){var c=this.props,a="Merge conflict";this.props.isAutoMergeConflict&&(a="Auto-merge conflict");var b="Close";return k.default.createElement(q.default,{id:c.id,markup:'\n                \x3csection role\x3d"dialog" id\x3d"'+c.id+'" aria-hidden\x3d"true" class\x3d"aui-layer aui-dialog2 aui-dialog2-large"\x3e\n                    \x3cheader class\x3d"aui-dialog2-header"\x3e\n                        \x3ch2 class\x3d"aui-dialog2-header-main"\x3e'+
a+'\x3c/h2\x3e\n                        \x3ca class\x3d"aui-dialog2-header-close"\x3e\n                            \x3cspan class\x3d"aui-icon aui-icon-small aui-iconfont-close-dialog"\x3e'+b+'\x3c/span\x3e\n                        \x3c/a\x3e\n                    \x3c/header\x3e\n                    \x3cdiv class\x3d"aui-dialog2-content"\x3e\n                        \x3cdiv class\x3d"merge-help"\x3e\x3c/div\x3e\n                    \x3c/div\x3e\n                    \x3cfooter class\x3d"aui-dialog2-footer"\x3e\n                        \x3cdiv class\x3d"aui-dialog2-footer-actions"\x3e\n                            \x3cbutton id\x3d"merge-help-dialog-close-button" class\x3d"aui-button aui-button-link"\x3e'+
b+"\x3c/button\x3e\n                        \x3c/div\x3e\n                    \x3c/footer\x3e\n                \x3c/section\x3e\n        ",containerSelector:"#"+c.id+" .aui-dialog2-content .merge-help"},k.default.createElement(r.default,{pullRequest:this.props.pullRequest,stability:this.props.stability,isAutoMergeConflict:this.props.isAutoMergeConflict}))}}],[{key:"propTypes",get:function(){return{id:d.default.string.isRequired,onHide:d.default.func.isRequired,stability:d.default.oneOf(Object.keys(h.BranchStability).map(function(a){return h.BranchStability[a]})),
isAutoMergeConflict:d.default.bool,pullRequest:d.default.object.isRequired}}}]);return a}(g.Component);b.default=f;l.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/components/reopen-button.js' */
define("bitbucket/internal/bbui/pull-request-header/components/reopen-button","module exports prop-types react react-dom ../../aui-react/spinner".split(" "),function(k,f,e,a,l,g){Object.defineProperty(f,"__esModule",{value:!0});e=babelHelpers.interopRequireDefault(e);var h=babelHelpers.interopRequireDefault(a),m=babelHelpers.interopRequireDefault(g);g={onReOpenClick:e.default.func.isRequired,enabled:e.default.bool};a=function(a){function d(b){babelHelpers.classCallCheck(this,d);var c=babelHelpers.possibleConstructorReturn(this,
(d.__proto__||Object.getPrototypeOf(d)).call(this,b));c.state={enabled:b.enabled};return c}babelHelpers.inherits(d,a);babelHelpers.createClass(d,[{key:"componentWillUpdate",value:function(b,c){c.enabled||(b=(0,l.findDOMNode)(this),c=b.getBoundingClientRect(),b.style.width=c.right-c.left+"px")}},{key:"onClick",value:function(){var b=this;this.props.onReOpenClick().fail(function(){b.setState({enabled:!0})});this.setState({enabled:!1})}},{key:"render",value:function(){var b=this,c="Re-open for discussion",
a="Re-open";this.state.enabled||(a=h.default.createElement(m.default,null));return h.default.createElement("button",{onClick:function(){return b.onClick()},className:"aui-button aui-button-primary reopen-button","aria-disabled":!this.state.enabled,title:c},a)}}]);return d}(a.Component);a.propTypes=g;a.defaultProps={enabled:!0};f.default=a;k.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/components/pull-request-more.js' */
define("bitbucket/internal/bbui/pull-request-header/components/pull-request-more","module exports classnames jquery lodash prop-types react bitbucket/internal/enums bitbucket/internal/impl/web-fragments ../../aui-react/component".split(" "),function(h,g,b,k,p,q,e,m,f,r){Object.defineProperty(g,"__esModule",{value:!0});var t=babelHelpers.interopRequireDefault(b),c=babelHelpers.interopRequireDefault(k),n=babelHelpers.interopRequireDefault(p);b=babelHelpers.interopRequireDefault(q);var a=babelHelpers.interopRequireDefault(e),
l=babelHelpers.interopRequireDefault(f),u=babelHelpers.interopRequireDefault(r);f={onMoreAction:b.default.func.isRequired,isWatching:b.default.bool.isRequired,conditions:b.default.objectOf(b.default.bool).isRequired,pullRequest:b.default.object.isRequired};e=function(b){function d(){babelHelpers.classCallCheck(this,d);var a=babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));a.dropdownIsVisible=!1;a.throttledTriggerHideOnScroll=n.default.throttle(function(){this.dropdownIsVisible&&
(0,c.default)(".pull-request-more-trigger").trigger("aui-button-invoke")}.bind(a),50);return a}babelHelpers.inherits(d,b);babelHelpers.createClass(d,[{key:"componentDidMount",value:function(){var a=this;(0,c.default)("#pull-request-header-more").on({"aui-dropdown2-show":function(){a.dropdownIsVisible=!0},"aui-dropdown2-hide":function(b){(0,c.default)(b.target).hide();a.dropdownIsVisible=!1}});(0,c.default)(document).on("scroll",this.throttledTriggerHideOnScroll)}},{key:"componentWillUnmount",value:function(){(0,
c.default)("#pull-request-header-more").off("aui-dropdown2-hide");(0,c.default)(document).off("scroll",this.throttledTriggerHideOnScroll)}},{key:"render",value:function(){var b=this,c=void 0,d=void 0,e=void 0,g=this.props.pullRequest.state===m.PullRequestState.OPEN,f=this.props.pullRequest.state===m.PullRequestState.MERGED,h=l.default.getWebItems("bitbucket.pullrequest.action",{pullRequest:this.props.pullRequest,conditions:this.props.conditions}),k=n.default.flatten(l.default.getWebSections("bitbucket.internal.pullrequest.toolbar.deprecated").map(function(a){return l.default.getWebItems("bitbucket.internal.pullrequest.toolbar.deprecated/"+
a.key)}));this.props.conditions.canEdit&&!f&&(c=a.default.createElement("li",null,a.default.createElement("button",{className:"aui-button aui-button-link",role:"menuitem","data-action":"edit"},"Edit")));this.props.conditions.canDecline&&g&&(d=a.default.createElement("li",null,a.default.createElement("button",{className:"aui-button aui-button-link",role:"menuitem","data-action":"decline"},"Decline")));
this.props.conditions.canDelete&&!f&&(e=a.default.createElement("li",null,a.default.createElement("button",{className:"aui-button aui-button-link",role:"menuitem","data-action":"delete"},"Delete")));return a.default.createElement("div",null,a.default.createElement("button",{className:"pull-request-more-trigger aui-button aui-button-subtle aui-dropdown2-trigger aui-dropdown2-trigger-arrowless","aria-haspopup":"true","aria-owns":"pull-request-header-more"},
a.default.createElement("span",{className:"aui-icon aui-icon-small aui-iconfont-more"},"More")),a.default.createElement(u.default,{id:"pull-request-header-more",markup:'\x3cdiv class\x3d"aui-style-default aui-dropdown2"\x3e\x3c/div\x3e',wrapperClass:"aui-dropdown2-section"},a.default.createElement("ul",{className:"aui-list-truncate",onClick:function(a){return b.props.onMoreAction(a.target.dataset.action)}},c,d,e,a.default.createElement("li",null,
a.default.createElement("button",{className:"aui-button aui-button-link",role:"menuitem","data-action":"watch"},this.props.isWatching?"Unwatch":"Watch")),h.concat(k).map(function(b){return a.default.createElement("li",{key:b.completeModuleKey||b.key},b.url?a.default.createElement("a",{href:b.url,className:b.cssClass,id:b.id,title:b.tooltip},b.text):a.default.createElement("button",{className:(0,t.default)("aui-button aui-button-link",
b.cssClass),role:"menuitem",id:b.id,title:b.tooltip},b.text))}))))}}]);return d}(e.Component);e.propTypes=f;g.default=e;h.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/components/merge-button.js' */
define("bitbucket/internal/bbui/pull-request-header/components/merge-button","module exports classnames jquery prop-types react react-dom ../../aui-react/spinner".split(" "),function(m,e,f,n,p,h,g,q){Object.defineProperty(e,"__esModule",{value:!0});var r=babelHelpers.interopRequireDefault(f),k=babelHelpers.interopRequireDefault(n),c=babelHelpers.interopRequireDefault(p),l=babelHelpers.interopRequireDefault(h),t=babelHelpers.interopRequireDefault(q);f=function(e){function d(a){babelHelpers.classCallCheck(this,
d);a=babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a));a.state={canMerge:a.props.mergeable.canMerge&&a.props.conditions.canMerge};return a}babelHelpers.inherits(d,e);babelHelpers.createClass(d,null,[{key:"propTypes",get:function(){return{conflicted:c.default.bool,conditions:c.default.object.isRequired,mergeable:c.default.shape({isChecking:c.default.bool,canMerge:c.default.bool}),onMergeClick:c.default.func.isRequired,onMergeWarningClick:c.default.func.isRequired,
extraButtonProps:c.default.object,vetoes:c.default.arrayOf(c.default.shape({detailedMessage:c.default.string.isRequired})),tooltipVisibility:c.default.bool}}},{key:"defaultProps",get:function(){return{conflicted:!1,mergeable:{isChecking:!1,canMerge:!0},extraButtonProps:{}}}}]);babelHelpers.createClass(d,[{key:"componentDidMount",value:function(){var a=(0,g.findDOMNode)(this);(0,k.default)(a).tooltip({gravity:"ne",live:!0})}},{key:"componentWillReceiveProps",value:function(a){this.setState({canMerge:a.mergeable.canMerge&&
a.conditions.canMerge})}},{key:"componentWillUpdate",value:function(a){var b=(0,g.findDOMNode)(this);a.mergeable.isChecking?(a=b.getBoundingClientRect(),b.style.width=a.right-a.left+"px"):b.style.width="";b.getAttribute("title")||(b.setAttribute("title",b.getAttribute("original-title")||""),b.removeAttribute("original-title"))}},{key:"componentDidUpdate",value:function(){var a=(0,g.findDOMNode)(this),b=this.props.tooltipVisibility?"enable":"disable";(0,k.default)(a).tooltip(b)}},{key:"onClick",value:function(){if(this.state.canMerge)this.props.onMergeClick();
else if(!this.props.mergeable.isChecking)this.props.onMergeWarningClick()}},{key:"mergeIssueReason",value:function(){var a="";if(!this.state.canMerge){var b=this.props;a=b.conflicted;b=b.vetoes;b=void 0===b?[]:b;a=!a||b&&0!==b.length?b&&1===b.length&&!a?b[0].detailedMessage:"This pull request can\u0027t be merged. Click for details.":"You will need to resolve conflicts to be able to merge."}return a}},{key:"render",value:function(){var a=this,b=this.props.mergeable.isChecking,
c=!b&&this.state.canMerge,d=(0,r.default)("aui-button","merge-button");return l.default.createElement("button",babelHelpers.extends({onClick:function(){return a.onClick()},className:d,"aria-disabled":!c,title:b?null:this.mergeIssueReason()},this.props.extraButtonProps),b?l.default.createElement(t.default,null):"Merge")}}]);return d}(h.Component);e.default=f;m.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/components/merge.js' */
define("bitbucket/internal/bbui/pull-request-header/components/merge","module exports jquery lodash prop-types react bitbucket/internal/enums ../../aui-react/inline-dialog ./merge-button ./merge-help-dialog".split(" "),function(m,h,k,n,p,l,q,r,t,u){Object.defineProperty(h,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(k),v=babelHelpers.interopRequireDefault(n),g=babelHelpers.interopRequireDefault(p),b=babelHelpers.interopRequireDefault(l),w=babelHelpers.interopRequireDefault(r),
x=babelHelpers.interopRequireDefault(t),y=babelHelpers.interopRequireDefault(u);k=function(h){function e(){var c;babelHelpers.classCallCheck(this,e);for(var a=arguments.length,d=Array(a),b=0;b<a;b++)d[b]=arguments[b];a=babelHelpers.possibleConstructorReturn(this,(c=e.__proto__||Object.getPrototypeOf(e)).call.apply(c,[this].concat(d)));a.state={};return a}babelHelpers.inherits(e,h);babelHelpers.createClass(e,null,[{key:"propTypes",get:function(){return{conditions:g.default.object.isRequired,mergeHelp:g.default.object,
onMergeClick:g.default.func.isRequired,onMergeHelpDialogClose:g.default.func,pullRequest:g.default.object.isRequired,showMergeHelpDialog:g.default.bool}}}]);babelHelpers.createClass(e,[{key:"componentDidMount",value:function(){var c=this;this.mergeWarningDialog=document.getElementById("merge-warning-inline-dialog");this.throttledWarningDialogHide=v.default.throttle(function(){c.mergeWarningDialog&&(c.mergeWarningDialog.open=!1)},50);(0,f.default)(window).on("scroll resize",this.throttledWarningDialogHide);
this.onToggleMergeWarningDialog=function(a){c.setState({mergeWarningDialogOpen:"aui-show"===a.type?!0:!1})};(0,f.default)(this.mergeWarningDialog).on("aui-show aui-hide",this.onToggleMergeWarningDialog)}},{key:"componentWillReceiveProps",value:function(c){this.setState({mergeHelpDialogShowing:c.showMergeHelpDialog})}},{key:"componentWillUnmount",value:function(){(0,f.default)(window).off("scroll resize",this.throttledWarningDialogHide);(0,f.default)(this.mergeWarningDialog).off("aui-show aui-hide",
this.onToggleMergeWarningDialog)}},{key:"onHideMergeHelpDialog",value:function(){this.extendedMergeHelpContent="";this.setState({mergeHelpDialogShowing:!1});if(this.props.onMergeHelpDialogClose)this.props.onMergeHelpDialogClose()}},{key:"onMergeWarningClick",value:function(){this.toggleMergeWarningDialog()}},{key:"toggleMergeWarningDialog",value:function(c){null==c&&(c=!this.mergeWarningDialog.open);var a=(0,f.default)(this.mergeWarningDialog),b=a.find(".merge-warning-content .aui-list-truncate");
b.css({"max-height":0});this.mergeWarningDialog.open=c;c=(0,f.default)(window).height()-a.offset().top-a.outerHeight()-10;b.css({"max-height":Math.min(300,c)})}},{key:"showExtendedMergeHelp",value:function(){this.setState({mergeHelpDialogShowing:!0})}},{key:"render",value:function(){var c=this,a=this.props.pullRequest;if(a.state===q.PullRequestState.OPEN&&a.mergeable){var d=[].concat(a.mergeable.vetoes||[]);a.mergeable.conflicted&&d.unshift({detailedMessage:"Merge conflict.",
isConflictVeto:!0});this.props.conditions.canMerge||d.push({detailedMessage:"You do not have sufficient permissions to perform the merge."});var e=void 0;this.state.mergeHelpDialogShowing&&(e=b.default.createElement(y.default,{id:"extended-merge-help-dialog",onHide:function(){return c.onHideMergeHelpDialog()},pullRequest:a,stability:this.props.mergeHelp&&this.props.mergeHelp.stability,isAutoMergeConflict:this.props.mergeHelp&&this.props.mergeHelp.isAutoMergeConflict}));d=b.default.createElement(w.default,
{key:"merge-warning-dialog",id:"merge-warning-inline-dialog",alignment:"bottom"},b.default.createElement("div",{className:"merge-warning-content"},b.default.createElement("h6",null,"Merge issues"),b.default.createElement("p",null,AJS.format("There {0,choice,1#is|1\u003care} {0} {0,choice,1#issue|1\u003cissues} preventing you from merging this pull request.",d&&d.length)),b.default.createElement("ul",{className:"aui-list-truncate"},d&&d.map(function(a,d){var e=a.isConflictVeto?b.default.createElement("button",
{className:"aui-button aui-button-link more-info",onClick:function(){return c.showExtendedMergeHelp()}},"Show details"):null;return b.default.createElement("li",{key:"merge-issue-"+d},b.default.createElement("span",{className:"message"},b.default.createElement("span",{className:"aui-icon aui-icon-small aui-iconfont-warning"}),a.detailedMessage),e)}))));return b.default.createElement("div",null,b.default.createElement(x.default,{onMergeClick:this.props.onMergeClick,
onMergeWarningClick:function(){return c.onMergeWarningClick()},mergeable:a.mergeable,conditions:this.props.conditions,conflicted:a.mergeable.conflicted,vetoes:a.mergeable.vetoes,extraButtonProps:{"aria-controls":"merge-warning-inline-dialog","aria-haspopup":!0},tooltipVisibility:!this.state.mergeWarningDialogOpen}),d,e)}return null}}]);return e}(l.Component);h.default=k;m.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/pull-request-header.js' */
define("bitbucket/internal/bbui/pull-request-header/pull-request-header","module exports aui classnames jquery lodash prop-types react bitbucket/internal/enums ../aui-react/avatar ../branch-from-to/branch-from-to ../reviewer-avatar-list/reviewer-avatar-list ../reviewer-status/reviewer-status ./components/merge ./components/pull-request-more ./components/reopen-button ./pull-request-title-enricher".split(" "),function(n,h,k,p,q,r,a,f,d,l,t,u,v,w,x,y,z){Object.defineProperty(h,"__esModule",{value:!0});
var g=babelHelpers.interopRequireDefault(k),m=babelHelpers.interopRequireDefault(p),A=babelHelpers.interopRequireDefault(q);k=babelHelpers.interopRequireDefault(r);a=babelHelpers.interopRequireDefault(a);var c=babelHelpers.interopRequireDefault(f),B=babelHelpers.interopRequireDefault(l),C=babelHelpers.interopRequireDefault(t),D=babelHelpers.interopRequireDefault(u),E=babelHelpers.interopRequireDefault(v),F=babelHelpers.interopRequireDefault(w),G=babelHelpers.interopRequireDefault(x),H=babelHelpers.interopRequireDefault(y),
I=babelHelpers.interopRequireDefault(z);l={conditions:a.default.objectOf(a.default.bool),mergeHelp:a.default.object,currentUserAsReviewer:a.default.object,currentUserIsWatching:a.default.bool,currentUserStatus:a.default.oneOf(k.default.values(d.ApprovalStatus)),onMergeClick:a.default.func.isRequired,onReOpenClick:a.default.func.isRequired,onMergeHelpDialogClose:a.default.func,onMoreAction:a.default.func.isRequired,onSelfClick:a.default.func.isRequired,onStatusClick:a.default.func.isRequired,pullRequest:a.default.object.isRequired,
permissionToReview:a.default.bool.isRequired,showMergeHelpDialog:a.default.bool};f=function(a){function e(b){babelHelpers.classCallCheck(this,e);b=babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,b));b.state={prTitle:{__html:g.default.escapeHtml(b.props.pullRequest.title)}};return b}babelHelpers.inherits(e,a);babelHelpers.createClass(e,[{key:"componentDidMount",value:function(){var b=this;(0,A.default)(document).ready(function(){return b.enrichPullRequestTitle(b.props.pullRequest.title)})}},
{key:"componentWillReceiveProps",value:function(b){b.pullRequest.title!==this.props.pullRequest.title&&this.enrichPullRequestTitle(b.pullRequest.title)}},{key:"pullRequestStateReadable",value:function(b){var a,c=(a={},babelHelpers.defineProperty(a,d.PullRequestState.OPEN,"Open"),babelHelpers.defineProperty(a,d.PullRequestState.DECLINED,"Declined"),babelHelpers.defineProperty(a,
d.PullRequestState.MERGED,"Merged"),a);return c.hasOwnProperty(b)?c[b]:""}},{key:"enrichPullRequestTitle",value:function(b){var a=this;I.default.process(b,{},g.default.escapeHtml).then(function(b){a.setState({prTitle:{__html:b}})})}},{key:"render",value:function(){var b=this.props.pullRequest,a=b.state===d.PullRequestState.OPEN,e=void 0,f=void 0;b.state===d.PullRequestState.DECLINED&&this.props.conditions.canReOpen&&(e=c.default.createElement(H.default,
{onReOpenClick:this.props.onReOpenClick}));a&&(f=c.default.createElement(E.default,{currentUserAsReviewer:this.props.currentUserAsReviewer,onStatusClick:this.props.onStatusClick,status:this.props.currentUserStatus}));return c.default.createElement("div",{className:"pull-request-header"},c.default.createElement("div",{className:"flexible"},c.default.createElement("div",{className:"pull-request-metadata"},c.default.createElement(B.default,{className:"author",person:b.author,withName:!0,withLink:!0}),
c.default.createElement(C.default,{fromRef:b.fromRef,toRef:b.toRef}),c.default.createElement("div",{className:"divider"}),c.default.createElement("div",{className:(0,m.default)("status","aui-lozenge",{"aui-lozenge-complete":b.state===d.PullRequestState.OPEN,"aui-lozenge-error":b.state===d.PullRequestState.DECLINED,"aui-lozenge-success":b.state===d.PullRequestState.MERGED})},this.pullRequestStateReadable(b.state))),c.default.createElement("div",{className:(0,m.default)("pull-request-actions",{pullRequestIsOpen:a})},
c.default.createElement(D.default,{reviewers:b.reviewers,menuId:"overflow-reviewers",triggerClass:"overflow-reviewers-trigger",maxOpen:4,avatarSize:"small",reverse:!0,onSelfClick:this.props.onSelfClick,currentUserAsReviewer:this.props.currentUserAsReviewer,isWatching:this.props.currentUserIsWatching,permissionToReview:this.props.permissionToReview,pullRequestIsOpen:a}),f,c.default.createElement(F.default,{conditions:this.props.conditions,mergeHelp:this.props.mergeHelp,onMergeClick:this.props.onMergeClick,
onMergeHelpDialogClose:this.props.onMergeHelpDialogClose,pullRequest:b,showMergeHelpDialog:this.props.showMergeHelpDialog}),e,c.default.createElement(G.default,{onMoreAction:this.props.onMoreAction,isWatching:this.props.currentUserIsWatching,conditions:this.props.conditions,pullRequest:b}))),c.default.createElement("h2",{dangerouslySetInnerHTML:this.state.prTitle}))}}]);return e}(f.Component);f.propTypes=l;h.default=f;n.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-git-rest:rebase-pull-request', location = '/bitbucket-plugin-git-rest/internal/feature/git-rest/pull-request/rebase/rebase-pull-request.js' */
define("bitbucket-plugin-git-rest/internal/feature/git-rest/pull-request/rebase/rebase-pull-request","exports aui aui/flag jquery bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/server bitbucket/util/state bitbucket/internal/enums bitbucket/internal/util/notifications/notifications bitbucket/internal/util/property bitbucket/internal/widget/submit-spinner/submit-spinner".split(" "),function(d,e,u,v,w,x,l,y,m,z,A,B){Object.defineProperty(d,"__esModule",{value:!0});d.webItemCondition=
void 0;d.onReady=function(){var a=(0,g.default)(".git-rebase-pull-request");a.length&&(n.default.on("bitbucket.internal.pull-request.*.merge",function(c,b){return(0,l.rest)({url:p()}).always(function(c){return C(a,c.canRebase,c.vetoes,b)})}),a.on("click",function(c){if("true"===c.target.getAttribute("aria-disabled")){var b=document.getElementById(c.target.getAttribute("aria-controls"));a.tooltip("disable");b.open=!0;(0,g.default)(b).one("aui-hide",function(){return a.tooltip("enable")});c.stopPropagation()}else{var q=
D.default.getPullRequest(),f=(0,e.dialog2)(bitbucket.internal.feature.gitRest.pullRequest.rebase.confirmDialog(h(q)));f.show().$el.find(".confirm-button").click(function(a){a=a.target;(0,E.default)(a,"before").show();(0,g.default)(a.parentNode).find("button").prop("disabled",!0);F(q).always(function(){return f.hide()})}).end().find(".cancel-button").click(function(){return f.hide()}).focus()}}))};var r=babelHelpers.interopRequireDefault(u),g=babelHelpers.interopRequireDefault(v),n=babelHelpers.interopRequireDefault(w),
G=babelHelpers.interopRequireDefault(x),D=babelHelpers.interopRequireDefault(y),H=babelHelpers.interopRequireDefault(z),I=babelHelpers.interopRequireDefault(A),E=babelHelpers.interopRequireDefault(B),p=function(){return G.default.rest("git").currentPullRequest().addPathComponents("rebase").build()},k=function(a){return"\x3cdiv class\x3d'rebase-flag-body'\x3e"+a+"\x3c/div\x3e"},h=function(a){var c=a.fromRef;a=a.toRef;var b=c.repository.id!==a.repository.id;return{fromLozenge:bitbucket.internal.feature.repository.refLozenge({extraClasses:"rebase-ref-lozenge",
ref:c,repository:b?c.repository:null}),toLozenge:bitbucket.internal.feature.repository.refLozenge({extraClasses:"rebase-ref-lozenge",ref:a,repository:b?a.repository:null})}},t=function(a,c,b){if(b.exceptionName===a)return(0,r.default)({type:"error",title:"Rebase failed",body:k(c(b))}),!1},F=function(a){return I.default.getFromProvider("git.pull-request.rebase.timeout").then(function(c){return(0,l.rest)({data:{version:a.version},statusCode:{200:function(){var b=
h(a),c=b.fromLozenge;b=b.toLozenge;H.default.addFlash("Rebase completed",{body:k(e.format("{0} has been rebased to the tip of {1}",c,b))});document.location.reload()},204:function(){var b=h(a),c=b.fromLozenge;b=b.toLozenge;(0,r.default)({close:"auto",type:"info",title:"No rebase necessary",body:k(e.format("{0} is already up-to-date with {1}",c,b))})},400:function(a,
c,f,e){return t("com.atlassian.bitbucket.hook.repository.RepositoryHookVetoedException",bitbucket.internal.feature.gitRest.pullRequest.rebase.vetoedBody,e.errors[0])},409:function(a,c,e,d){return t("com.atlassian.bitbucket.scm.git.command.rebase.GitRebaseException",function(a){return a.message},d.errors[0])}},timeout:1E3*c,type:"POST",url:p()})})},J=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;return c&&!a.length?
"You will need to resolve conflicts to be able to rebase.":1!==a.length||c?"This pull request can\u0027t be rebased. Click for details.":a[0].detailedMessage},C=function(a,c){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!c||d){a.attr({"aria-disabled":!0,"aria-controls":"git-rebase-pull-request-details-dialog",title:J(b,d)}).tooltip({gravity:"e"});var f=document.getElementById("git-rebase-pull-request-details-dialog");
b=(0,g.default)(bitbucket.internal.feature.gitRest.pullRequest.rebase.rebaseWarningDialog({conflicted:d,id:"git-rebase-pull-request-details-dialog",vetoes:b}));f?b.replaceAll(f):b.insertAfter(a);b.on("click",".more-info",function(){return n.default.trigger("bitbucket.internal.pull-request.show.cant.merge.help")})}else a.attr({"aria-disabled":null,"aria-controls":null,title:"Rebase the source branch from the target branch"}).tooltip("disable")};d.webItemCondition=function(a){return a.pullRequest.state===
m.PullRequestState.OPEN&&a.pullRequest.toRef.repository.scmId===m.scmId.GIT&&a.conditions.canUpdateSourceBranch}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-git-rest:rebase-pull-request', location = '/bitbucket-plugin-git-rest/internal/feature/git-rest/pull-request/rebase/rebase-pull-request-init.js' */
jQuery(document).ready(function(){require("bitbucket-plugin-git-rest/internal/feature/git-rest/pull-request/rebase/rebase-pull-request").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-git-rest:rebase-pull-request', location = '/bitbucket-plugin-git-rest/internal/feature/git-rest/pull-request/rebase/rebase-pull-request.soy' */
// This file was automatically generated from rebase-pull-request.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.gitRest.pullRequest.rebase.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.gitRest == 'undefined') { bitbucket.internal.feature.gitRest = {}; }
if (typeof bitbucket.internal.feature.gitRest.pullRequest == 'undefined') { bitbucket.internal.feature.gitRest.pullRequest = {}; }
if (typeof bitbucket.internal.feature.gitRest.pullRequest.rebase == 'undefined') { bitbucket.internal.feature.gitRest.pullRequest.rebase = {}; }


bitbucket.internal.feature.gitRest.pullRequest.rebase.confirmDialog = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2({titleText: 'Rebase source branch', modal: true, removeOnHide: true, content: '<p>' + soy.$$filterNoAutoescape(AJS.format('Are you sure you want to rebase {0} from {1}?',opt_data.fromLozenge,opt_data.toLozenge)) + '</p><p>' + soy.$$escapeHtml('This operation will modify the source branch and cannot be undone.') + '</p><p><a href="' + soy.$$escapeHtml('http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Pull+request+merge+strategies?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash#Pullrequestmergestrategies-usingrebaseinbitbucketserver') + '">' + soy.$$escapeHtml('Learn more about rebasing') + '</a></p>', footerActionContent: '' + aui.buttons.button({text: 'Rebase', extraClasses: 'confirm-button'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'cancel-button'})});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.gitRest.pullRequest.rebase.confirmDialog.soyTemplateName = 'bitbucket.internal.feature.gitRest.pullRequest.rebase.confirmDialog';
}


bitbucket.internal.feature.gitRest.pullRequest.rebase.vetoedBody = function(opt_data, opt_ignored) {
  var output = '<p>' + soy.$$escapeHtml(opt_data.message) + '</p>';
  if (opt_data.details.length) {
    output += '<ul>';
    var detailList33 = opt_data.details;
    var detailListLen33 = detailList33.length;
    for (var detailIndex33 = 0; detailIndex33 < detailListLen33; detailIndex33++) {
      var detailData33 = detailList33[detailIndex33];
      output += '<li class="rebase-veto-detail">' + soy.$$escapeHtml(detailData33) + '</li>';
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.gitRest.pullRequest.rebase.vetoedBody.soyTemplateName = 'bitbucket.internal.feature.gitRest.pullRequest.rebase.vetoedBody';
}


bitbucket.internal.feature.gitRest.pullRequest.rebase.rebaseWarningDialog = function(opt_data, opt_ignored) {
  var output = '<aui-inline-dialog id="' + soy.$$escapeHtml(opt_data.id) + '"><div class="rebase-warning-content"><h6>' + soy.$$escapeHtml('Rebase issues') + '</h6><p>' + soy.$$escapeHtml(AJS.format('There {0,choice,1#is|1\x3care} {0} {0,choice,1#issue|1\x3cissues} preventing you from rebasing this pull request.',opt_data.vetoes.length + (opt_data.conflicted ? 1 : 0))) + '</p><ul class="aui-list-truncate">' + ((opt_data.conflicted) ? bitbucket.internal.feature.gitRest.pullRequest.rebase.rebaseWarningMessage({message: 'Pull request has conflicts', extraContent: '' + aui.buttons.button({text: 'Show details', type: 'link', extraClasses: 'more-info'})}) : '');
  var vetoList56 = opt_data.vetoes;
  var vetoListLen56 = vetoList56.length;
  for (var vetoIndex56 = 0; vetoIndex56 < vetoListLen56; vetoIndex56++) {
    var vetoData56 = vetoList56[vetoIndex56];
    output += bitbucket.internal.feature.gitRest.pullRequest.rebase.rebaseWarningMessage({message: vetoData56.detailedMessage});
  }
  output += '</ul></div></aui-inline-dialog>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.gitRest.pullRequest.rebase.rebaseWarningDialog.soyTemplateName = 'bitbucket.internal.feature.gitRest.pullRequest.rebase.rebaseWarningDialog';
}


bitbucket.internal.feature.gitRest.pullRequest.rebase.rebaseWarningMessage = function(opt_data, opt_ignored) {
  return '<li><span class="message">' + aui.icons.icon({size: 'small', useIconFont: true, icon: 'warning'}) + soy.$$escapeHtml(opt_data.message) + '</span>' + ((opt_data.extraContent) ? soy.$$filterNoAutoescape(opt_data.extraContent) : '') + '</li>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.gitRest.pullRequest.rebase.rebaseWarningMessage.soyTemplateName = 'bitbucket.internal.feature.gitRest.pullRequest.rebase.rebaseWarningMessage';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-git-rest:git-rebase-pull-request-button', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-git-rest','key':'git-rebase-pull-request-button','moduleKey':'git-rebase-pull-request-button','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-git-rest:git-rebase-pull-request-button','weight':1000.0,'condition':function(ctx) { return WebFragments._getValue((require('bitbucket-plugin-git-rest/internal/feature/git-rest/pull-request/rebase/rebase-pull-request').webItemCondition), ctx); },'params':{},'tooltip':WebFragments._formatI18n("Rebase the source branch from the target branch", 'bitbucket.git.pullrequest.rebase.tooltip', ''),'styleClass':WebFragments._formatI18n(null, null, 'git-rebase-pull-request'),'location':'bitbucket.pullrequest.action','linkText':WebFragments._formatI18n("Rebase", 'bitbucket.git.pullrequest.rebase.action', '')});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-header', location = '/static/bitbucket/internal/feature/pull-request/header/pull-request-header-view.js' */
define("bitbucket/internal/feature/pull-request/header/pull-request-header-view","module exports aui aui/flag jquery lodash prop-types react react-redux bitbucket/util/navbuilder bitbucket/internal/bbui/aui-react/avatar bitbucket/internal/bbui/pull-request-header/pull-request-header bitbucket/internal/enums bitbucket/internal/feature/pull-request/action-creators/can-merge bitbucket/internal/feature/pull-request/action-creators/change-reviewer-status bitbucket/internal/feature/pull-request/action-creators/change-self-reviewer bitbucket/internal/feature/pull-request/action-creators/watch bitbucket/internal/feature/pull-request/edit/pull-request-edit bitbucket/internal/feature/pull-request/merge-dialog/merge-dialog bitbucket/internal/model/page-state bitbucket/internal/model/participant bitbucket/internal/model/pull-request-json bitbucket/internal/util/ajax bitbucket/internal/util/events bitbucket/internal/util/set-dialog-buttons-disabled bitbucket/internal/util/shortcuts bitbucket/internal/widget/submit-spinner/submit-spinner".split(" "),
function(B,q,k,C,D,l,E,m,F,G,w,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W){function X(){function e(a){var c=a.approved?"You approved this pull request":"You removed your approval of this pull request";b(c,a)}function d(a){var c=a.watchState?"You are watching this pull request":"You are no longer watching this pull request";b(c,a)}function b(c,Y){(0,l.isMatch)(Y,r)&&(a&&a.close(),
a=(0,Z.default)({type:"success",title:c,close:"auto"}))}var a=void 0;g.default.on("bitbucket.internal.widget.approve-button.added",e);g.default.on("bitbucket.internal.widget.approve-button.removed",e);g.default.on("bitbucket.internal.web.watch-button.added",d);g.default.on("bitbucket.internal.web.watch-button.removed",d)}function x(e){var d=f.default.dialog2(e.templates.dialog()),b=void 0;d.$el.on("click",".confirm-button",function(a){var c=new aa.default(a.target,"before");(0,y.default)(d,!0);c.show();
b=z.default.rest(e.ajax);b.fail(function(a,c,b,f){400===a.status?(a=d.$el.find(".aui-dialog2-content"),f.errors&&(a.children(".aui-message").remove(),a.prepend(e.templates.error(f.errors)))):d.hide()}).always(function(){c.hide();(0,y.default)(d,!1);b=null}).done(function(a){g.default.trigger(e.events.done,null,{user:h.default.getCurrentUser().toJSON(),pullRequest:a});e.callback(a)})});d.$el.find(".cancel-button").on("click",function(){b&&(b.abort(),b=null);d.hide()});d.$el.on("aui-show",_.debounce(function(){return d.$el.find(".cancel-button").focus()}));
return d}function t(e,d,b){h.default.getPullRequest().set((0,R.filter)(e));!0===d&&b.dispatch({type:"PR_SET_PULL_REQUEST",payload:e})}Object.defineProperty(q,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(k),Z=babelHelpers.interopRequireDefault(C),ba=babelHelpers.interopRequireDefault(D);k=babelHelpers.interopRequireDefault(E);var ca=babelHelpers.interopRequireDefault(m),p=babelHelpers.interopRequireDefault(G),da=babelHelpers.interopRequireDefault(H),n=babelHelpers.interopRequireDefault(I),
ea=babelHelpers.interopRequireDefault(J),fa=babelHelpers.interopRequireDefault(K),ha=babelHelpers.interopRequireDefault(L),u=babelHelpers.interopRequireDefault(M),ia=babelHelpers.interopRequireDefault(N),A=babelHelpers.interopRequireDefault(O),h=babelHelpers.interopRequireDefault(P),ja=babelHelpers.interopRequireDefault(Q),z=babelHelpers.interopRequireDefault(S),g=babelHelpers.interopRequireDefault(T),y=babelHelpers.interopRequireDefault(U),v=babelHelpers.interopRequireDefault(V),aa=babelHelpers.interopRequireDefault(W),
r={triggeredBy:"keyboardShortcut"};m=function(e){function d(b){babelHelpers.classCallCheck(this,d);var a=babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,b));a.onMoreAction=function(c){switch(c){case "edit":a._pullRequestEdit.show();break;case "watch":a.toggleWatch();break;case "decline":a.declineDialog||a.createDeclineDialog();a.declineDialog.show();break;case "delete":a.deleteDialog||a.createDeleteDialog(),a.deleteDialog.show()}};a.onReOpenClick=function(){var c=
p.default.rest().currentPullRequest().reopen().withParams({avatarSize:w.AvatarSize.XSMALL,version:h.default.getPullRequest().getVersion()}).build();return z.default.rest({url:c,type:"POST",statusCode:{409:function(a,c,b,d,e){return babelHelpers.extends({},e,{title:"Could not reopen pull request.",fallbackUrl:!1,shouldReload:!1})}}}).done(function(c){g.default.trigger("bitbucket.internal.feature.pullRequest.reopened",null,{user:h.default.getCurrentUser().toJSON(),
pullRequest:c});t(c,!0,a.props);a.mergeCheck()})};a.onSelfClick=function(c,b){a.props.dispatch((0,ha.default)(a.props.pullRequest,a.props.currentUser,c,a.props.currentUserAsReviewer&&a.props.currentUserAsReviewer.status));"ADD_SELF"===c&&a.props.dispatch((0,u.default)({stateOnly:!0,watchState:!0}));b&&a.props.dispatch((0,u.default)({watchState:!1}))};a.onStatusClick=function(c){var b=a.props,d=b.dispatch,e=b.currentUser,f=b.currentUserAsReviewer;b=b.pullRequest;f?d((0,fa.default)((0,l.merge)({pullRequest:b,
user:e,oldStatus:f.status},c))):console.warn("Current user is not a reviewer")};a.onMergeHelpDialogClose=function(){a.setState({showMergeHelpDialog:!1})};a.getConditions=function(){var c=a.props,b=c.hasSourceRepoRead,d=c.pullRequest.author.user.name===c.currentUser.name,e=c.hasRepoWrite;d=e||d;return{canMerge:e,canDecline:d,canDelete:c.canDelete,canEdit:d,canReOpen:d&&b,canUpdateSourceBranch:c.hasSourceRepoWrite}};a.toggleWatch=function(c){var b=a.props,d=b.dispatch;b=b.pullRequest;d((0,u.default)((0,
l.merge)({},{watchState:!b.isWatching},c)))};a.mergeCheck=function(){var c=a.props,b=c.dispatch;c=c.pullRequest;c.state===n.default.PullRequestState.OPEN&&b((0,ea.default)(c,a.props.mergeTimeout))};a.initMergeEvents=function(){g.default.on("bitbucket.internal.feature.pull-request.merge-check",a.mergeCheck);["bitbucket.internal.feature.pullRequest.reviewerStatus.changed","bitbucket.internal.feature.pullRequest.self.added","bitbucket.internal.feature.pullRequest.self.removed"].forEach(function(c){return g.default.on(c,
a.mergeCheck)});g.default.on("bitbucket.internal.branch.plugin.conflict.merge.help",function(c){return a.setState({mergeHelp:c})});g.default.on("bitbucket.internal.pull-request.show.cant.merge.help",function(){return a.setState({showMergeHelpDialog:!0})})};a.createDeclineDialog=function(){a.declineDialog=x({buttonSelector:".decline-pull-request",ajax:{url:p.default.rest().currentPullRequest().decline().withParams({avatarSize:w.AvatarSize.XSMALL,version:h.default.getPullRequest().getVersion()}).build(),
type:"POST",statusCode:{401:function(a,b,d,e,g){return babelHelpers.extends({},g,{title:"Could not decline pull request",message:"You no longer have permission to decline this pull request.",fallbackUrl:!1,shouldReload:!0})}}},callback:function(c){t(c,!0,a.props);a.declineDialog.hide()},templates:{dialog:function(){return bitbucket.internal.feature.pullRequest.decline.dialog({content:'\x3cp class\x3d"decline-message"\x3e\n                        '+
"Are you sure you want to decline this pull request? This will close the pull request without merging."+"\n                    \x3c/p\x3e"})},error:function(a){return bitbucket.internal.feature.pullRequest.decline.errors({errors:a})}},events:{done:"bitbucket.internal.feature.pullRequest.declined"}})};a.createDeleteDialog=function(){a.deleteDialog=x({buttonSelector:".delete-pull-request",ajax:{url:p.default.rest().currentPullRequest().build(),type:"DELETE",data:{version:h.default.getPullRequest().getVersion()},statusCode:{400:!1,
401:function(a,b,d,e,g){return babelHelpers.extends({},g,{title:"Could not delete pull request",message:"You no longer have permission to delete this pull request.",fallbackUrl:!1,shouldReload:!0})}}},callback:function(){a.deleteDialog.hide();window.location=p.default.currentRepo().allPullRequests().build()},templates:{dialog:function(){return bitbucket.internal.feature.pullRequest.delete.dialog({content:'\x3cp class\x3d"delete-message"\x3e\n                        '+
"Are you sure you want to delete this pull request? All comments will be lost. This operation cannot be undone!"+"\n                    \x3c/p\x3e"})},error:function(a){return bitbucket.internal.feature.pullRequest.delete.errors({errors:a})}},events:{done:"bitbucket.internal.feature.pullRequest.deleted"}})};a.state={};return a}babelHelpers.inherits(d,e);babelHelpers.createClass(d,[{key:"componentDidMount",value:function(){var b=this,a=h.default.getPullRequest();this._pullRequestEdit=new ia.default(a);v.default.bind("pullRequestApprove",
function(){var a=(b.props.currentUserAsReviewer&&b.props.currentUserAsReviewer.status)===n.default.ApprovalStatus.APPROVED?n.default.ApprovalStatus.UNAPPROVED:n.default.ApprovalStatus.APPROVED;b.onStatusClick((0,l.merge)({newStatus:a},r))});v.default.bind("pullRequestEdit",function(){a.getState()!==n.default.PullRequestState.MERGED&&b._pullRequestEdit.show()});(0,ba.default)(document).on("click",".add-description",function(){b._pullRequestEdit.show()});v.default.bind("pullRequestWatch",function(){b.toggleWatch(r)});
g.default.once("bitbucket.internal.feature.comments.commentAdded",function(){var c=h.default.getCurrentUser(),d=a.getParticipants().toJSON();[a.getAuthor().toJSON()].concat(a.getReviewers().toJSON()).concat(d).some(function(a){return a.user.name===c.id})||(a.setParticipants(d.concat([new ja.default({user:c})])),b.toggleWatch({watchState:!0}))});this.mergeCheck();A.default.initMergeDialog({callback:function(a){return t(a,!0,b.props)},mergeTimeout:this.props.mergeTimeout});this.initMergeEvents();X()}},
{key:"render",value:function(){var b={pullRequest:this.props.pullRequest,conditions:this.getConditions(),currentUser:this.props.currentUser,currentUserAsReviewer:this.props.currentUserAsReviewer,currentUserIsWatching:this.props.pullRequest.isWatching,mergeHelp:this.state.mergeHelp,onMoreAction:this.onMoreAction,currentUserStatus:this.props.currentUserAsReviewer&&this.props.currentUserAsReviewer.status,onMergeClick:A.default.onMergeClick,onReOpenClick:this.onReOpenClick,onSelfClick:this.onSelfClick,
onStatusClick:this.onStatusClick,permissionToReview:this.props.currentUser.name!==this.props.pullRequest.author.user.name,showMergeHelpDialog:this.state.showMergeHelpDialog,onMergeHelpDialogClose:this.onMergeHelpDialogClose};return ca.default.createElement(da.default,b)}}]);return d}(m.Component);m.propTypes={canDelete:k.default.bool.isRequired,hasRepoWrite:k.default.bool.isRequired,hasSourceRepoWrite:k.default.bool.isRequired,hasSourceRepoRead:k.default.bool.isRequired,mergeTimeout:k.default.number.isRequired};
q.default=(0,F.connect)(function(e){var d=e.currentUser,b=e.pullRequest;return{pullRequest:b,currentUser:d,currentUserAsReviewer:function(){return(0,l.find)(b.reviewers,function(a){return a.user.name===d.name})}()}})(m);B.exports=q["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-header', location = '/static/bitbucket/internal/feature/pull-request/header/pull-request-decline-dialog.soy' */
// This file was automatically generated from pull-request-decline-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.decline.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }
if (typeof bitbucket.internal.feature.pullRequest.decline == 'undefined') { bitbucket.internal.feature.pullRequest.decline = {}; }


bitbucket.internal.feature.pullRequest.decline.dialog = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2({id: 'pull-request-decline-dialog', content: '' + soy.$$filterNoAutoescape(opt_data.content), titleText: 'Decline Pull Request', footerActionContent: '' + aui.buttons.button({text: 'Decline', type: 'primary', extraClasses: 'confirm-button'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'cancel-button'})});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.decline.dialog.soyTemplateName = 'bitbucket.internal.feature.pullRequest.decline.dialog';
}


bitbucket.internal.feature.pullRequest.decline.errors = function(opt_data, opt_ignored) {
  var param19 = '';
  var errorList20 = opt_data.errors;
  var errorListLen20 = errorList20.length;
  for (var errorIndex20 = 0; errorIndex20 < errorListLen20; errorIndex20++) {
    var errorData20 = errorList20[errorIndex20];
    param19 += bitbucket.internal.widget.errorContent({message: errorData20.message, details: errorData20.details, detailListExtraClasses: 'errors'});
  }
  var output = '' + aui.message.error({content: param19});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.decline.errors.soyTemplateName = 'bitbucket.internal.feature.pullRequest.decline.errors';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-header', location = '/static/bitbucket/internal/feature/pull-request/header/pull-request-delete-dialog.soy' */
// This file was automatically generated from pull-request-delete-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.delete.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }
if (typeof bitbucket.internal.feature.pullRequest.delete == 'undefined') { bitbucket.internal.feature.pullRequest.delete = {}; }


bitbucket.internal.feature.pullRequest.delete.dialog = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2({id: 'pull-request-delete-dialog', content: opt_data.content, titleText: 'Delete pull request', extraClasses: 'aui-dialog2-warning', size: 'small', class: 'aui-dialog2-warning', footerActionContent: '' + aui.buttons.button({text: 'Delete pull request', extraClasses: 'confirm-button'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'cancel-button'})});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.delete.dialog.soyTemplateName = 'bitbucket.internal.feature.pullRequest.delete.dialog';
}


bitbucket.internal.feature.pullRequest.delete.errors = function(opt_data, opt_ignored) {
  var param19 = '';
  var errorList20 = opt_data.errors;
  var errorListLen20 = errorList20.length;
  for (var errorIndex20 = 0; errorIndex20 < errorListLen20; errorIndex20++) {
    var errorData20 = errorList20[errorIndex20];
    param19 += bitbucket.internal.widget.errorContent({message: errorData20.message, details: errorData20.details, detailListExtraClasses: 'errors'});
  }
  var output = '' + aui.message.error({content: param19});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.delete.errors.soyTemplateName = 'bitbucket.internal.feature.pullRequest.delete.errors';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reducers', location = '/static/bitbucket/internal/bbui/reducers/pull-request-watch.js' */
define("bitbucket/internal/bbui/reducers/pull-request-watch",["module","exports","../actions/pull-request","../utils/create-reducer","../utils/replace-state-with-rollback"],function(f,c,e,d,g){Object.defineProperty(c,"__esModule",{value:!0});d=babelHelpers.interopRequireDefault(d);var h=babelHelpers.interopRequireDefault(g),a;c.default=(0,d.default)(!1,(a={},babelHelpers.defineProperty(a,e.PR_WATCH,function(a,b){return(0,h.default)(a,b,{forward:function(){return b.payload}})}),babelHelpers.defineProperty(a,
e.PR_SET_IS_WATCHING,function(a,b){return b.payload}),a));f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reducers', location = '/static/bitbucket/internal/bbui/reducers/pull-request-reviewers.js' */
define("bitbucket/internal/bbui/reducers/pull-request-reviewers","module exports lodash bitbucket/internal/enums ../actions/pull-request ../utils/create-reducer ../utils/merge-object-in-array ../utils/replace-state-with-rollback".split(" "),function(l,e,f,a,g,m,n,p){Object.defineProperty(e,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(f);f=babelHelpers.interopRequireDefault(m);var q=babelHelpers.interopRequireDefault(n),k=babelHelpers.interopRequireDefault(p),c;e.default=(0,f.default)([],
(c={},babelHelpers.defineProperty(c,g.PR_CHANGE_REVIEWER_STATE,function(d,b){var a=function(a){return b.payload.user&&a.user.name===b.payload.user.name};return(0,k.default)(d,b,{forward:function(){return(0,q.default)(d,a,{status:b.payload.newState})}})}),babelHelpers.defineProperty(c,g.PR_CHANGE_SELF_REVIEWER,function(d,b){return(0,k.default)(d,b,{forward:function(){switch(b.payload.selfAction){case a.SelfAction.ADD_SELF:return d.concat([{role:a.ParticipantRole.REVIEWER,status:a.ApprovalStatus.UNAPPROVED,
user:b.payload.user}]);case a.SelfAction.REMOVE_SELF:var c=h.default.assign([],d);return h.default.remove(c,function(a){return a.user.name!==b.payload.user.name});default:console.warn("Unknown reviewer action")}}})}),c));l.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reducers', location = '/static/bitbucket/internal/bbui/reducers/pull-request-can-merge.js' */
define("bitbucket/internal/bbui/reducers/pull-request-can-merge","module exports lodash ../actions/pull-request ../pull-request-header/actions ../utils/create-reducer ../utils/merge-state-with-rollback".split(" "),function(g,c,d,h,e,k,l){Object.defineProperty(c,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(d);d=babelHelpers.interopRequireDefault(k);var m=babelHelpers.interopRequireDefault(l),a;c.default=(0,d.default)({canMerge:!1,conflicted:null,vetoes:null,properties:null,isChecking:!1,
showDialog:!1},(a={},babelHelpers.defineProperty(a,h.PR_CHECK_MERGEABILITY,function(a,b){return(0,m.default)(a,b,{forward:function(){return{isChecking:!0}},commit:function(){return babelHelpers.extends({},b.payload,{isChecking:!1})}})}),babelHelpers.defineProperty(a,e.PR_SHOW_MERGE_ERRORS,function(a,b){return f.default.assign({},a,{showDialog:!0})}),babelHelpers.defineProperty(a,e.PR_HIDE_MERGE_ERRORS,function(a,b){return f.default.assign({},a,{showDialog:!1})}),a));g.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reducers', location = '/static/bitbucket/internal/bbui/reducers/noop.js' */
define("bitbucket/internal/bbui/reducers/noop",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:null};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reducers', location = '/static/bitbucket/internal/bbui/reducers/current-user.js' */
define("bitbucket/internal/bbui/reducers/current-user",["module","exports","../actions/actions","../utils/create-reducer"],function(c,b,d,a){Object.defineProperty(b,"__esModule",{value:!0});a=babelHelpers.interopRequireDefault(a);b.default=(0,a.default)({},babelHelpers.defineProperty({},d.SET_CURRENT_USER,function(b,a){return a.payload}));c.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reducers', location = '/static/bitbucket/internal/bbui/reducers/pull-request.js' */
define("bitbucket/internal/bbui/reducers/pull-request","module exports redux ../../model/pull-request-json ../actions/pull-request ./noop ./pull-request-can-merge ./pull-request-reviewers ./pull-request-watch".split(" "),function(g,a,h,k,l,b,m,c,d){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(e,a){var b=e;a.type===l.PR_SET_PULL_REQUEST&&(b=babelHelpers.extends({},e,a.payload));return n(b,a)};var p=babelHelpers.interopRequireDefault(b);b=babelHelpers.interopRequireDefault(m);
c=babelHelpers.interopRequireDefault(c);d=babelHelpers.interopRequireDefault(d);var f={};k.pullRequestProperties.forEach(function(a){f[a]=p.default});var n=(0,h.combineReducers)(babelHelpers.extends({},f,{reviewers:c.default,mergeable:b.default,isWatching:d.default}));g.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-store', location = '/static/bitbucket/internal/feature/pull-request/store/pull-request-store.js' */
define("bitbucket/internal/feature/pull-request/store/pull-request-store",["module","exports","bitbucket/internal/bbui/reducers/current-user","bitbucket/internal/bbui/reducers/pull-request","bitbucket/internal/util/redux"],function(b,a,c,d,e){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){return(0,e.customCreateStore)({pullRequest:f.default,currentUser:g.default},a)};var g=babelHelpers.interopRequireDefault(c),f=babelHelpers.interopRequireDefault(d);b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:feature-loader-util', location = '/static/bitbucket/internal/util/feature-loader.js' */
define("bitbucket/internal/util/feature-loader","module exports aui jquery lodash require bitbucket/internal/util/events".split(" "),function(r,l,t,F,G,H,I){function x(b,c){if("function"!==typeof b.load||"function"!==typeof b.unload)throw Error("Modules require both a load and unload callback. Please use:\n"+y(c));}function y(b){return"FeatureLoader.registerHandler('"+b+"', /urlMatcher/, {\n    load : loadFn,\n    unload : unloadFn,\n    keyboardShortcutContexts : [ 'commit', ... ]});"}function k(h){function l(a){function f(){g.default.trigger(h.unloadedEvent,
null,a)}if(!b.default.includes(e,a))return c.default.Deferred().resolve();var d=a.module.unload(m);e=b.default.without(e,a);if(d&&d.then)return d.then(f);f();return c.default.Deferred().resolve()}function z(a){function f(){g.default.trigger(h.loadedEvent,null,a)}if(b.default.includes(e,a))return c.default.Deferred().resolve();a.module||(a.module=(0,J.default)(a.moduleName),x(a.module,a.name));var d=a.module.load(m,A);e.push(a);if(d&&d.then)return d.then(f);f();return c.default.Deferred().resolve()}
function B(){if(!n||u!==window.location.href){u=window.location.href;var a=v(u);a.length?(b.default.forEach(a,function(a){g.default.trigger(h.requestedEvent,null,a.name)}),p||(p=!0,C.then(r))):n?window.location.reload():g.default.trigger(h.errorEvent,null,{message:"No handler is registered to the current page",code:k.NO_HANDLER})}}function r(){p=!1;var a=v(window.location.href),f=b.default.difference(a,e);a=b.default.difference(e,a);if(f.length||a.length)e.length?a=c.default.when.apply(c.default,
b.default.map(a,l)):((0,c.default)(m).empty(),a=c.default.Deferred().resolve()),C=a.then(function(){return c.default.when.apply(c.default,b.default.map(f,z))}).then(function(){w&&w.resetContexts()})}function v(a){return b.default.filter(q,function(b){return b.urlRegex&&b.urlRegex.test(a)})}function D(){B()}function t(a){return a.module&&a.module.keyboardShortcutContexts||[]}function E(a){var c=b.default.chain(e).flatMap(t).uniq().value();b.default.forEach(c,function(b){a.enableContext(b)})}if(!(this instanceof
k))return new k(h);h=c.default.extend({},k.defaults,h);var u=window.location.href,e=[],q={},C=c.default.Deferred().resolve(),p,n=!1,m,w,A={};this.registerHandler=function(a,c,d){if(b.default.has(q,a))throw Error("A handler with the name '"+a+"' already exists.");if(!d)throw Error("No module or module name was provided. Please use:\n"+y(a));"string"===typeof d?a=q[a]={name:a,urlRegex:c,moduleName:d}:(x(d,a),a=q[a]={name:a,urlRegex:c,module:d});n&&!p&&b.default.includes(v(window.location.href),a)&&
z(a);return this};this.setElement=function(a){m=a};this.setContext=function(a){A=a};this.setKeyboardShortcuts=function(a){w=a};this.current=function(){return e.slice()};this.init=function(a){m=a;B();g.default.on("bitbucket.internal.history.changestate",D);g.default.on("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",E);n=!0};this.destroy=function(){g.default.off("bitbucket.internal.history.changestate",D);g.default.off("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",
E)};return this}Object.defineProperty(l,"__esModule",{value:!0});var K=babelHelpers.interopRequireDefault(t),c=babelHelpers.interopRequireDefault(F),b=babelHelpers.interopRequireDefault(G),J=babelHelpers.interopRequireDefault(H),g=babelHelpers.interopRequireDefault(I);k.defaults={unloadedEvent:"stash.util.feature-loader.unloaded",loadedEvent:"stash.util.feature-loader.loaded",requestedEvent:"stash.util.feature-loader.loadRequested",errorEvent:"stash.util.feature-loader.errorOccurred"};k.NO_HANDLER=
"NO_HANDLER";l.default=k;r.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:summary-panel-widget', location = '/static/bitbucket/internal/widget/summary-panel/summary-panel.soy' */
// This file was automatically generated from summary-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.summaryPanel.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.summaryPanel == 'undefined') { bitbucket.internal.widget.summaryPanel = {}; }


bitbucket.internal.widget.summaryPanel.overviewWebPanel = function(opt_data, opt_ignored) {
  return '<div class="plugin-item' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + ((opt_data.linkContent.length > 0) ? '<a href="' + soy.$$escapeHtml(opt_data.linkHref ? opt_data.linkHref : '#') + '"' + ((opt_data.linkClass) ? ' class="' + soy.$$escapeHtml(opt_data.linkClass) + '"' : '') + ((opt_data.linkTooltip) ? ' title="' + soy.$$escapeHtml(opt_data.linkTooltip) + '"' : '') + ((opt_data.linkExtraAttributes) ? aui.renderExtraAttributes({extraAttributes: opt_data.linkExtraAttributes}) : '') + '>' + bitbucket.internal.widget.summaryPanel.overviewWebPanelIcon(opt_data) + soy.$$filterNoAutoescape(opt_data.linkContent) + '</a>' : (opt_data.iconClass && opt_data.iconClass.length > 0) ? bitbucket.internal.widget.summaryPanel.overviewWebPanelIcon(opt_data) : '') + ((opt_data.extraContent) ? '<div class="item-extra-content">' + soy.$$filterNoAutoescape(opt_data.extraContent) + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.summaryPanel.overviewWebPanel.soyTemplateName = 'bitbucket.internal.widget.summaryPanel.overviewWebPanel';
}


bitbucket.internal.widget.summaryPanel.overviewWebPanelIcon = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<span class="aui-icon' + ((opt_data.iconClass) ? ' ' + soy.$$escapeHtml(opt_data.iconClass) : '') + '" ' + ((opt_data.iconTooltip) ? 'title="' + soy.$$escapeHtml(opt_data.iconTooltip) + '"' : '') + ' >' + ((opt_data.iconUrl) ? '<img src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" alt="" />' : '') + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) : '') + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.summaryPanel.overviewWebPanelIcon.soyTemplateName = 'bitbucket.internal.widget.summaryPanel.overviewWebPanelIcon';
}


bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bitbucket.internal.widget.summaryPanel.overviewWebPanel(soy.$$augmentMap(opt_data, {linkContent: '' + ((opt_data.count) ? '<strong class="count">' + soy.$$escapeHtml(opt_data.count) + '</strong> ' : '') + ((opt_data.linkText) ? '<span class="label">' + soy.$$escapeHtml(opt_data.linkText) + '</span>' : '')}));
};
if (goog.DEBUG) {
  bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel.soyTemplateName = 'bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel';
}


bitbucket.internal.widget.summaryPanel.linkWebPanel = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.summaryPanel.overviewWebPanel(soy.$$augmentMap(opt_data, {iconClass: 'aui-icon-small' + (opt_data.iconClass ? ' ' + opt_data.iconClass : '')}));
};
if (goog.DEBUG) {
  bitbucket.internal.widget.summaryPanel.linkWebPanel.soyTemplateName = 'bitbucket.internal.widget.summaryPanel.linkWebPanel';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:discussion-plugin-templates', location = '/static/bitbucket/internal/feature/discussion/participants-list/participants-list.soy' */
// This file was automatically generated from participants-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.discussion.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.discussion == 'undefined') { bitbucket.internal.feature.discussion = {}; }


bitbucket.internal.feature.discussion.participants = function(opt_data, opt_ignored) {
  var param17 = '<ul class="aui-list-truncate">';
  var participantList19 = opt_data.participants;
  var participantListLen19 = participantList19.length;
  for (var participantIndex19 = 0; participantIndex19 < participantListLen19; participantIndex19++) {
    var participantData19 = participantList19[participantIndex19];
    param17 += '<li>' + bitbucket.internal.widget.avatarList.participantAvatar({participant: participantData19, extraClasses: 'participant-item', withName: true}) + '</li>';
  }
  param17 += '</ul>';
  var param14 = '' + aui.dropdown2.contents({id: 'participants-dropdown', extraClasses: 'aui-style-default aui-dropdown2-tailed avatar-dropdown participants-dropdown', content: param17});
  var output = '' + bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel({iconClass: 'aui-icon-small aui-iconfont-user', linkText: '' + soy.$$escapeHtml(AJS.format('{0,choice,1#Participant|1\x3cParticipants}',opt_data.participants.length)), linkClass: 'participants-trigger aui-dropdown2-trigger', linkExtraAttributes: 'aria-owns=participants-dropdown aria-haspopup=true', count: opt_data.participants.length, extraClasses: 'participants' + ((! opt_data.participants.length) ? ' hidden' : ''), extraContent: param14});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.discussion.participants.soyTemplateName = 'bitbucket.internal.feature.discussion.participants';
}


bitbucket.internal.feature.discussion.participantCount = function(opt_data, opt_ignored) {
  return '<strong class="count">' + soy.$$escapeHtml(opt_data.count) + '</strong> ';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.discussion.participantCount.soyTemplateName = 'bitbucket.internal.feature.discussion.participantCount';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-overview-plugin-templates', location = '/static/bitbucket/internal/feature/pull-request/overview/plugins/pull-request-overview-plugin-templates.soy' */
// This file was automatically generated from pull-request-overview-plugin-templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.overview.plugins.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }
if (typeof bitbucket.internal.feature.pullRequest.overview == 'undefined') { bitbucket.internal.feature.pullRequest.overview = {}; }
if (typeof bitbucket.internal.feature.pullRequest.overview.plugins == 'undefined') { bitbucket.internal.feature.pullRequest.overview.plugins = {}; }


bitbucket.internal.feature.pullRequest.overview.plugins.learnMore = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.summaryPanel.linkWebPanel({extraClasses: 'learn-more', iconClass: 'aui-iconfont-help', linkHref: 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Using+pull+requests+in+Bitbucket+Server?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash', linkExtraAttributes: {target: '_blank'}, linkContent: '' + soy.$$escapeHtml('Learn more')});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.overview.plugins.learnMore.soyTemplateName = 'bitbucket.internal.feature.pullRequest.overview.plugins.learnMore';
}
;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:lodash-amd', location = 'applinks/internal/lib/lodash-amd.js' */
define("applinks/lib/lodash",["lodash"],function(a){return a});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/lib-version.js' */
define("applinks/lib/version",["applinks/lib/lodash"],function(c){function d(f,g){if(c.isUndefined(f)){return 0}else{if(typeof f!=="number"||isNaN(f)){throw new Error(g+": expected a number, was: <"+f+">")}else{return Math.floor(f)}}}function a(f,g){if(!f||!(f instanceof e)){throw new Error(g+": expected a Version object, was: <"+f+">")}return f}function b(f,g){return f>g?1:f==g?0:-1}function e(g,h,f){this.major=d(g,"major");this.minor=d(h,"minor");this.bugfix=d(f,"bugfix")}e.parse=function(g,h){h=h||"versionString";if(!g){throw new Error(h+": expected a non-empty string")}var f=g.split(".");if(f.length!==3){throw new Error(h+": expected <major>.<minor>.<bugfix> string, was: <"+g+">")}return new e(parseInt(f[0]),parseInt(f[1]),parseInt(f[2]))};e.comparator=function(g,f){return a(g,"versionOne").compareTo(a(f,"versionTwo"))};e.prototype.compareTo=function(h){a(h,"that");var f=b(this.major,h.major);if(f!=0){return f}var g=b(this.minor,h.minor);if(g!=0){return g}return b(this.bugfix,h.bugfix)};e.prototype.greaterThan=function(f){return this.compareTo(f)>0};e.prototype.greaterThanOrEqual=function(f){return this.compareTo(f)>=0};e.prototype.lessThan=function(f){return this.compareTo(f)<0};e.prototype.lessThanOrEqual=function(f){return this.compareTo(f)<=0};e.prototype.equals=function(f){return this.compareTo(f)==0};e.prototype.toMinor=function(){return new e(this.major,this.minor)};e.prototype.toMajor=function(){return new e(this.major)};e.prototype.toString=function(){return this.major+"."+this.minor+"."+this.bugfix};return e});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/aui-version-details.js' */
define("applinks/lib/aui-version-details",["applinks/lib/version"],function(g){var d=new g(5,8,15);var f=new g(5,9,13);var e=new g(5,8);var c=new g(5,9);function a(h){if(h.lessThan(d)){throw new Error("AUI version "+h+" is too low, you need to upgrade AUI to "+d+" or "+f+" for Applinks to work")}if(h.greaterThanOrEqual(c)&&h.lessThan(f)){throw new Error("AUI version "+h+" is too low, you need to upgrade AUI to "+f+" for Applinks to work")}}function b(h){var i=g.parse(h.version,"AUI version");a(i);h.versionDetails=i;h.versionDetails.is58=i.toMinor().equals(e);h.versionDetails.is59=i.toMinor().equals(c);return h}return{addVersionDetails:b}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/console-amd.js' */
define("applinks/lib/console",function(){return window.console});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/jquery-amd.js' */
define("applinks/lib/jquery",function(){return window.jQuery});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/aui-amd.js' */
define("applinks/lib/aui",["applinks/lib/window","applinks/lib/aui-version-details"],function(b,c){var a=b.AJS;if(!a){throw new Error("window.AJS not defined, cannot load AUI")}return c.addVersionDetails(a)});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/wrm-amd.js' */
define("applinks/lib/wrm",function(){return window.WRM});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/skate-amd.js' */
define("applinks/lib/skate",function(){return window.skate});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/window-amd.js' */
define("applinks/lib/window",function(){return window});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/spi-amd.js' */
define("applinks/lib/spi",function(){return{get:function(){return AppLinks.SPI}}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/applinks-creation-amd.js' */
define("applinks/lib/creation",function(){return{get:function(){return AppLinks.Creation}}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-public', location = 'js/applinks.public.js' */
var ApplinksUtils=ApplinksUtils||(function(f){var c={},b={};var p="com_atlassian_applinks_authentication";function o(r){var q=f('<span class="aui-icon icon-close"></span>').click(function(){r.trigger("messageClose",[this]).remove()});r.append(q)}function g(){if(window===parent.window){return null}var r=null,q=window;f("iframe",parent.document.body).each(function(s){if(this.contentWindow.window===q){r=this}});return r}function d(r,x,w,q,s,u){if(x in c){var t=c[x];if(w){t.authAdminUri=q;delete c[x]}j(t,w,u)}if(!s&&parent&&(parent!==window)){var v=window;f("iframe",parent.document.body).each(function(y,A){var z=A.contentWindow;if(z!==v){if(z.AJS&&z.AJS.$){z.AJS.$(z.document).trigger("applinks.auth.completion",[x,w,q,true,u])}}})}}function j(q,u,t){var s=f(document);if(u){var r=function(v){if(v.isDefaultPrevented()){m(q)}else{h(q);document.location.reload(true)}};s.bind("applinks.auth.approved",r);s.trigger("applinks.auth.approved",q);s.unbind("applinks.auth.approved",r)}else{s.trigger("applinks.auth.denied",[q,t])}}function k(r,q){var s=r.find("a.applink-authenticate");if(r.hasClass("aui-message")){o(r)}s.click(function(t){window.open(q.authUri,p);t.preventDefault()});c[q.id]=q;return r}function n(){f(".applinks-auth-request").each(function(t){var s=f(this),v=s.find(".applinkId").val(),q=s.find(".appName").val(),r=s.find(".appUri").val(),u=s.find(".authUri").val();if(v&&u){k(s,{id:v,appName:q,appUri:r,authUri:u})}})}function i(q){var r=f('<div class="aui-message warning closeable applinks-auth-request"><p><span class="aui-icon icon-applinks-key"></span></p></div>');r.append(AJS.format("Additional information may be available, please \u003ca class=\u0022applink-authenticate\u0022 href=\u0022{0}\u0022\u003eauthenticate\u003c/a\u003e with \u003ca href=\u0022{1}\u0022\u003e{2}\u003c/a\u003e.",AJS.escapeHtml(q.authUri),AJS.escapeHtml(q.appUri),AJS.escapeHtml(q.appName)));k(r,q);return r}function e(u,r){var q=f('<span class="applinks-auth-request"></span>'),s=f('<span class="applinks-request-description"></span>'),t=AJS.format("\u003ca class=\u0022applink-authenticate\u0022 href=\u0022{0}\u0022\u003eAuthenticate\u003c/a\u003e to see additional information.",AJS.escapeHtml(r.authUri));if(u){s.append(u);s.append(" - ")}s.append(t);q.append(s);k(q,r);return q}function h(q){var r=g();if((!r)||(!r.id)){return}if(!parent.ApplinksUtils.pendingConfirmations){parent.ApplinksUtils.pendingConfirmations={}}if(!(r.id in parent.ApplinksUtils.pendingConfirmations)){parent.ApplinksUtils.pendingConfirmations[r.id]=[]}parent.ApplinksUtils.pendingConfirmations[r.id].push(q);return}function l(){if(parent&&parent.ApplinksUtils&&parent.ApplinksUtils.pendingConfirmations){var r=g();if(r){if(r.id in parent.ApplinksUtils.pendingConfirmations){var s=parent.ApplinksUtils.pendingConfirmations[r.id];delete parent.ApplinksUtils.pendingConfirmations[r.id];for(var q=0,t=s.length;q<t;q++){m(s[q])}}}}}function m(s){var t=f(document),r=f('<div class="aui-message success closeable applinks-auth-confirmation"><p><span class="aui-icon icon-applinks-key-success"></span></p></div>'),q=t.find("div.applinks-auth-confirmation-container");if(!q.length){q=t.find("body")}r.append(AJS.format("This application is now using \u003ca href=\u0022{0}\u0022\u003e{1}\u003c/a\u003e\u0027\u0027s credentials. Revoke access at any time by going to \u003ca href=\u0022{2}\u0022\u003eOAuth access tokens\u003c/a\u003e.",AJS.escapeHtml(s.appUri),AJS.escapeHtml(s.appName),AJS.escapeHtml(s.authAdminUri)));o(r);q.prepend(r);setTimeout(function(){r.fadeOut(1000,function(){f(this).remove()})},5000)}function a(){if(parent&&!(parent===window)){if(!parent.ApplinksUtils){parent.ApplinksUtils={}}}f(document).bind("applinks.auth.completion",d);n();l()}f(document).ready(a);return{createAuthRequestBanner:i,createAuthRequestInline:e}})(AJS.$);;
;
/* module-key = 'com.atlassian.plugins.issue-status-plugin:issue-status-resources', location = 'templates/status.soy' */
// This file was automatically generated from status.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Template.Util.Issue.Status.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Template == 'undefined') { JIRA.Template = {}; }
if (typeof JIRA.Template.Util == 'undefined') { JIRA.Template.Util = {}; }
if (typeof JIRA.Template.Util.Issue == 'undefined') { JIRA.Template.Util.Issue = {}; }
if (typeof JIRA.Template.Util.Issue.Status == 'undefined') { JIRA.Template.Util.Issue.Status = {}; }


JIRA.Template.Util.Issue.Status.issueStatusResolver = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.issueStatus) ? '<span class="aui-icon aui-icon-small aui-iconfont-help jira-issue-status-render-error" title="' + soy.$$escapeHtml('no.issue.status.info') + '"></span>' : (opt_data.issueStatus.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatus(opt_data) : JIRA.Template.Util.Issue.Status.iconStatus({name: opt_data.issueStatus.name, iconUrl: opt_data.issueStatus.iconUrl, description: opt_data.issueStatus.description, isCompact: opt_data.isCompact}));
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.issueStatusResolver.soyTemplateName = 'JIRA.Template.Util.Issue.Status.issueStatusResolver';
}


JIRA.Template.Util.Issue.Status.iconStatus = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" width="16" height="16" alt="' + soy.$$escapeHtml(opt_data.name) + '" title="' + soy.$$escapeHtml(opt_data.name) + ((opt_data.description) ? ' - ' + soy.$$escapeHtml(opt_data.description) : '') + '" class="jira-issue-status-icon">' + ((! opt_data.isCompact) ? ' ' + soy.$$escapeHtml(opt_data.name) : '');
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.iconStatus.soyTemplateName = 'JIRA.Template.Util.Issue.Status.iconStatus';
}


JIRA.Template.Util.Issue.Status.issueStatus = function(opt_data, opt_ignored) {
  return '' + JIRA.Template.Util.Issue.Status.statusLozenge({name: opt_data.issueStatus.name, categoryKey: opt_data.issueStatus.statusCategory.key, colorName: opt_data.issueStatus.statusCategory.colorName, description: opt_data.issueStatus.description, isSubtle: opt_data.isSubtle, isCompact: opt_data.isCompact, maxWidth: opt_data.maxWidth});
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.issueStatus.soyTemplateName = 'JIRA.Template.Util.Issue.Status.issueStatus';
}


JIRA.Template.Util.Issue.Status.statusLozenge = function(opt_data, opt_ignored) {
  var output = '';
  var maxWidth__soy46 = opt_data.maxWidth ? opt_data.maxWidth : 'medium';
  var tooltipContent__soy47 = '<span class="jira-issue-status-tooltip-title">' + soy.$$escapeHtml(opt_data.name) + '</span>' + ((opt_data.description) ? '<br><span class="jira-issue-status-tooltip-desc">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '');
  output += '<span class=" jira-issue-status-lozenge aui-lozenge ' + JIRA.Template.Util.Issue.Status.statusLozengeClasses(opt_data) + ((opt_data.isSubtle && ! opt_data.isCompact) ? ' aui-lozenge-subtle' : '') + ((opt_data.isCompact) ? ' jira-issue-status-lozenge-compact' : '') + ' jira-issue-status-lozenge-max-width-' + soy.$$escapeHtml(maxWidth__soy46) + '" data-tooltip="' + soy.$$escapeHtml(tooltipContent__soy47) + '">' + soy.$$escapeHtml(opt_data.name) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.statusLozenge.soyTemplateName = 'JIRA.Template.Util.Issue.Status.statusLozenge';
}


JIRA.Template.Util.Issue.Status.statusLozengeClasses = function(opt_data, opt_ignored) {
  return 'jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.colorName ? opt_data.colorName : 'medium-gray') + ' ' + ((opt_data.categoryKey) ? 'jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.categoryKey) : '');
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.statusLozengeClasses.soyTemplateName = 'JIRA.Template.Util.Issue.Status.statusLozengeClasses';
}
;
;
/* module-key = 'com.atlassian.plugins.issue-status-plugin:issue-status-resources', location = '/js/issue-status-plugin.js' */
AJS.$(function(){if(AJS.$.fn.tooltip){AJS.$(".jira-issue-status-lozenge[data-tooltip]").tooltip({aria:true,gravity:AJS.$.fn.tipsy.autoWE,delayIn:100,html:true,live:true,title:"data-tooltip",className:"jira-issue-status-tooltip"})}});;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/fields.soy' */
// This file was automatically generated from fields.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jiraIntegration.templates.fields.
 */

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates.fields == 'undefined') { jiraIntegration.templates.fields = {}; }


jiraIntegration.templates.fields.stringField = function(opt_data, opt_ignored) {
  return '' + jiraIntegration.templates.fields.fieldWithExtraAttributes(soy.$$augmentMap(opt_data, {extraFieldClasses: 'long-field'}));
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.stringField.soyTemplateName = 'jiraIntegration.templates.fields.stringField';
}


jiraIntegration.templates.fields.textareaField = function(opt_data, opt_ignored) {
  return '<div class="field-group jira-field' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" data-jira-type="' + soy.$$escapeHtml(opt_data.jiraType) + '"><label for="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.labelText) + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><textarea rows="3" id="' + soy.$$escapeHtml(opt_data.name) + '" name="' + soy.$$escapeHtml(opt_data.name) + '" class="textarea long-field"' + ((opt_data.extraAttributes) ? ' ' + aui.renderExtraAttributes(opt_data) : '') + '>' + soy.$$escapeHtml(opt_data.value) + '</textarea>' + jiraIntegration.templates.fields.errors(opt_data) + '</div>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.textareaField.soyTemplateName = 'jiraIntegration.templates.fields.textareaField';
}


jiraIntegration.templates.fields.arrayField = function(opt_data, opt_ignored) {
  return '' + jiraIntegration.templates.fields.fieldWithExtraAttributes(soy.$$augmentMap(opt_data, {extraFieldClasses: 'long-field'}));
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.arrayField.soyTemplateName = 'jiraIntegration.templates.fields.arrayField';
}


jiraIntegration.templates.fields.numberField = function(opt_data, opt_ignored) {
  return '' + jiraIntegration.templates.fields.fieldWithExtraAttributes(soy.$$augmentMap(opt_data, {extraFieldClasses: 'medium-field'}));
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.numberField.soyTemplateName = 'jiraIntegration.templates.fields.numberField';
}


jiraIntegration.templates.fields.allowedValuesField = function(opt_data, opt_ignored) {
  return '' + ((opt_data.options.length) ? jiraIntegration.templates.fields.fieldWithExtraAttributes(soy.$$augmentMap(opt_data, {type: 'select'})) : jiraIntegration.templates.fields.fieldWithExtraAttributes(soy.$$augmentMap(opt_data, {type: 'value', value: 'None'})));
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.allowedValuesField.soyTemplateName = 'jiraIntegration.templates.fields.allowedValuesField';
}


jiraIntegration.templates.fields.timeTrackingField = function(opt_data, opt_ignored) {
  return '' + jiraIntegration.templates.fields.fieldWithExtraAttributes(soy.$$augmentMap(opt_data, {extraFieldClasses: 'medium-field'}));
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.timeTrackingField.soyTemplateName = 'jiraIntegration.templates.fields.timeTrackingField';
}


jiraIntegration.templates.fields.unrenderableTypeField = function(opt_data, opt_ignored) {
  return '<div class="field-group jira-field jira-field-unrenderable' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><label>' + soy.$$escapeHtml(opt_data.labelText) + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label>' + aui.form.value({content: opt_data.reasonContent}) + jiraIntegration.templates.fields.errors(opt_data) + '</div>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.unrenderableTypeField.soyTemplateName = 'jiraIntegration.templates.fields.unrenderableTypeField';
}


jiraIntegration.templates.fields.dateField = function(opt_data, opt_ignored) {
  return '' + jiraIntegration.templates.fields.fieldWithExtraAttributes(soy.$$augmentMap(opt_data, {extraFieldClasses: 'medium-field'}));
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.dateField.soyTemplateName = 'jiraIntegration.templates.fields.dateField';
}


jiraIntegration.templates.fields.select2WithIconField = function(opt_data, opt_ignored) {
  var output = '<div class="field-group jira-field' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" data-jira-type="' + soy.$$escapeHtml(opt_data.jiraType) + '"><label for="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.labelText) + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><select id="' + soy.$$escapeHtml(opt_data.name) + '" class="medium-field" name="' + soy.$$escapeHtml(opt_data.name) + '"' + ((opt_data.extraAttributes) ? ' ' + aui.renderExtraAttributes(opt_data) : '') + '>';
  var optionList98 = opt_data.options;
  var optionListLen98 = optionList98.length;
  for (var optionIndex98 = 0; optionIndex98 < optionListLen98; optionIndex98++) {
    var optionData98 = optionList98[optionIndex98];
    output += '<option value="' + soy.$$escapeHtml(optionData98.value) + '" ' + ((optionData98.selected) ? 'selected' : '') + ' data-icon-url="' + soy.$$escapeHtml(optionData98.iconUrl) + '">' + soy.$$escapeHtml(optionData98.text) + '</option>';
  }
  output += '</select>' + jiraIntegration.templates.fields.errors(opt_data) + '</div>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.select2WithIconField.soyTemplateName = 'jiraIntegration.templates.fields.select2WithIconField';
}


jiraIntegration.templates.fields.select2WithIconOption = function(opt_data, opt_ignored) {
  return ((opt_data.iconUrl) ? aui.avatar.avatar({avatarImageUrl: opt_data.iconUrl, size: 'xsmall', isProject: opt_data.isProject, extraClasses: 'select-option-image', tagName: 'span'}) : '') + '<span class="select-option" title="' + soy.$$escapeHtml(opt_data.optionValue) + '">' + soy.$$escapeHtml(opt_data.optionValue) + '</span>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.select2WithIconOption.soyTemplateName = 'jiraIntegration.templates.fields.select2WithIconOption';
}


jiraIntegration.templates.fields.labelFieldResult = function(opt_data, opt_ignored) {
  return '' + ((opt_data.label.isNew) ? soy.$$escapeHtml(AJS.format('\x22{0}\x22 - (New label)',opt_data.label.labelName)) : soy.$$escapeHtml(opt_data.label.labelName));
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.labelFieldResult.soyTemplateName = 'jiraIntegration.templates.fields.labelFieldResult';
}


jiraIntegration.templates.fields.userOptionSelect = function(opt_data, opt_ignored) {
  var output = '';
  var userOption__soy136 = '' + soy.$$escapeHtml(opt_data.displayName) + ((! opt_data.isSystemOption) ? ' - (' + soy.$$escapeHtml(opt_data.name) + ')' : '');
  output += '<span data-value="' + soy.$$escapeHtml(opt_data.name) + '" title="' + soy.$$filterNoAutoescape(userOption__soy136) + '">' + soy.$$filterNoAutoescape(userOption__soy136) + '</span>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.userOptionSelect.soyTemplateName = 'jiraIntegration.templates.fields.userOptionSelect';
}


jiraIntegration.templates.fields.sprintSelect = function(opt_data, opt_ignored) {
  return '<span title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '<span class="sprint-detail">' + ((opt_data.state == 'FUTURE') ? soy.$$escapeHtml(AJS.format('(Future sprint in {0})',opt_data.board)) : '') + ((opt_data.state == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('(Active sprint in {0})',opt_data.board)) : '') + '</span></span>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.sprintSelect.soyTemplateName = 'jiraIntegration.templates.fields.sprintSelect';
}


jiraIntegration.templates.fields.epicSelect = function(opt_data, opt_ignored) {
  return '<span title="' + soy.$$escapeHtml(opt_data.name) + ' (' + soy.$$escapeHtml(opt_data.key) + ')">' + soy.$$escapeHtml(opt_data.name) + ((opt_data.key) ? '<span class="epic-detail">' + soy.$$escapeHtml(opt_data.key) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.epicSelect.soyTemplateName = 'jiraIntegration.templates.fields.epicSelect';
}


jiraIntegration.templates.fields.errors = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.errorTexts) {
    var errorList181 = opt_data.errorTexts;
    var errorListLen181 = errorList181.length;
    for (var errorIndex181 = 0; errorIndex181 < errorListLen181; errorIndex181++) {
      var errorData181 = errorList181[errorIndex181];
      output += '<div class="error">' + soy.$$escapeHtml(errorData181) + '</div>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.errors.soyTemplateName = 'jiraIntegration.templates.fields.errors';
}


jiraIntegration.templates.fields.fieldWithExtraAttributes = function(opt_data, opt_ignored) {
  var output = '<div class="field-group jira-field' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" data-jira-type=' + soy.$$escapeHtml(opt_data.jiraType) + '>' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: '' + soy.$$escapeHtml(opt_data.labelText)});
  switch (opt_data.type) {
    case 'select':
      output += aui.form.select({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), options: opt_data.options, isRequired: opt_data.isRequired, isMultiple: opt_data.isMultiple, extraAttributes: opt_data.extraAttributes, extraClasses: opt_data.extraFieldClasses});
      break;
    case 'value':
      output += aui.form.value({id: opt_data.name, content: '' + soy.$$escapeHtml(opt_data.value)});
      break;
    default:
      output += aui.form.input({id: opt_data.name, name: opt_data.name, type: 'text', value: opt_data.value, extraAttributes: opt_data.extraAttributes, extraClasses: opt_data.extraFieldClasses});
  }
  output += jiraIntegration.templates.fields.errors(opt_data) + '</div>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.fieldWithExtraAttributes.soyTemplateName = 'jiraIntegration.templates.fields.fieldWithExtraAttributes';
}
;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/fields.js' */
window.jiraIntegration=window.jiraIntegration||{};window.jiraIntegration.fields=(function(R,ah){var s=window.jiraIntegration;var n="YYYY-MM-DD";var j={template:s.templates.fields.stringField,getContext:C,getValue:J};var Z={template:s.templates.fields.stringField,getContext:aa,getValue:J};var T={template:s.templates.fields.stringField,getContext:t,getValue:v,behavior:i};var G={template:s.templates.fields.stringField,getContext:t,getValue:M,behavior:q};var B={template:s.templates.fields.arrayField,getContext:k,getValue:K,behavior:l};var z={template:s.templates.fields.textareaField,getContext:C,getValue:J};var O={template:s.templates.fields.numberField,getContext:ab,getValue:L};var d={template:s.templates.fields.arrayField,getContext:k,getValue:K};var ae={template:s.templates.fields.allowedValuesField,getContext:h,getValue:ah.bind(c,null,"id"),behavior:ag};var X={template:s.templates.fields.allowedValuesField,getContext:h,getValue:ah.bind(c,null,"id")};var W={template:s.templates.fields.timeTrackingField,getContext:af,getValue:g};var S={template:s.templates.fields.dateField,getContext:H,getValue:w,behavior:F};var m={template:s.templates.fields.select2WithIconField,getContext:Q,getValue:ah.bind(c,null,"id"),behavior:b};var u={template:s.templates.fields.unrenderableTypeField,getContext:e,};var ai={template:s.templates.fields.stringField,getContext:C,getValue:L,behavior:U,};var x={template:s.templates.fields.stringField,getContext:C,getValue:V,behavior:Y,};var o={"com.pyxis.greenhopper.jira:gh-epic-label":j,string:j,summary:j,"com.atlassian.jira.plugin.system.customfieldtypes:textfield":j,"com.atlassian.jira.plugin.system.customfieldtypes:url":Z,environment:z,"com.atlassian.jira.plugin.system.customfieldtypes:textarea":z,description:z,"com.atlassian.jira.plugin.system.customfieldtypes:float":O,array:d,"com.atlassian.jira.plugin.system.customfieldtypes:labels":d,labels:B,priority:m,resolution:ae,fixVersions:ae,versions:ae,components:ae,security:ae,"com.atlassian.jira.plugin.system.customfieldtypes:version":ae,"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":ae,"com.atlassian.jira.plugin.system.customfieldtypes:project":ae,assignee:T,reporter:G,"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":G,"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":G,timetracking:W,duedate:S,"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":S,"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":X,"com.atlassian.jira.plugin.system.customfieldtypes:select":X,"com.pyxis.greenhopper.jira:gh-sprint":ai,"com.pyxis.greenhopper.jira:gh-epic-link":x,};var D={ignoreFieldsWithDefaultValue:false};function y(ap,at,au,aq){var aj=at.schema.system||"customfield_"+at.schema.customId;var ak=at.schema.system||at.schema.custom||at.schema.customId;var al=o[ak];var ar=Boolean(al&&(!al.canRender||al.canRender(at)));var ao=Boolean(at.operations&&at.operations.length);var av=ar&&ao?al:u;var an=at.required&&{"data-aui-validation-field":"",required:true};var am={labelText:at.name,name:aj,isRequired:at.required,value:au[aj],errorTexts:aq[aj],jiraType:ak,isRenderable:ar,hasOperations:ao,handler:av,extraAttributes:an};return av.getContext(am,at,ap,au)}function e(al,aj,ak){if(!al.isRenderable){al.reasonContent=ak?AJS.format("{0}Edit{1} this field in JIRA.",'<a href="'+ak.url+'">',"</a>"):AJS.escapeHtml("Edit this field in JIRA after creation.")}else{if(!al.hasOperations){al.reasonContent=ak?AJS.format("{0}Edit{1} this field in JIRA.",'<a href="'+ak.url+'">',"</a>"):AJS.escapeHtml("Edit this field in JIRA after creation.")}else{al.reasonContent=null}}return al}function C(am,aj,ak){var al=am.name;am.value=(R.isPlainObject(am.value)?am.value.name:am.value)||(ak&&ak.fields[al])||"";return am}function J(aj){return aj.val()}function aa(al,aj,ak){var am={"data-aui-validation-field":"",pattern:"([a-zA-Z][a-zA-Z0-9-+.]*://.+)|^$","data-aui-validation-pattern-msg":"Enter a valid URL scheme"};return R.extend(true,{},C(al,aj,ak),{extraAttributes:am})}function H(al,aj,ak){var am={"data-aui-validation-field":"",pattern:"([0-9]{4}-(0?[1-9]|10|11|12)-([0-2]?[1-9]|10|20|30|31))|^$","data-aui-validation-pattern-msg":"Enter a valid date"};return R.extend(true,{},C(al,aj,ak),{extraAttributes:am})}function w(aj){var ak=aj.val();if(ak===""){return null}else{return ak}}function ab(al,aj,ak){var am={"data-aui-validation-field":"",pattern:"(([0-9]*[.])?[0-9]+)|^$","data-aui-validation-pattern-msg":"Enter a valid number"};return R.extend(true,{},C(al,aj,ak),{extraAttributes:am})}function L(aj){var ak=aj.val();if(A(ak)){return Number(ak)}return ak||null}function F(aj){var al=aj.find("input");if(!!navigator.userAgent.match(/Trident/)&&AJS.version<"5.3.5"){var ak="placeholder" in document.createElement("input");al.attr("placeholder",n);if(!ak){al.on("focus",function(){if(al.val()===al.attr("placeholder")){al.val("")}}).on("blur",function(){if(al.val()===""){al.val(al.attr("placeholder"))}}).blur()}}else{WRM.require("wr!com.atlassian.auiplugin:aui-date-picker").done(function(){al.datePicker({overrideBrowserDefault:true})})}}function k(am,aj,ak){var al=am.name;am.value=(am.value&&am.value.join(","))||(ak&&ak.fields[al]&&ak.fields[al].join(","));return am}function K(aj){return ah.map(aj.val().split(","),R.trim)}function h(ao,aj,ak){var am=ao.name;var al=ao.value;var ap=ak&&ak.fields[am];var an;if(al){an=R.isArray(al)?ah.pluck(al,"name"):[al.name]}else{if(ap){an=R.isArray(ap)?ah.pluck(ap,"name"):[ap.name]}else{an=[]}}ao.options=ah.map(aj.allowedValues,function(aq){return{value:aq.id,text:aq.name||aq.value,selected:ah.contains(an,aq.name||aq.id)}});if(!aj.required&&aj.schema.type==="option"){ao.options.unshift({value:-1,text:"None",selected:an.length===0})}ao.isMultiple=ah.contains(aj.operations,"add");delete ao.value;return ao}function c(am,ak){var an=ak.val();var aj=ak.attr("multiple");var al=function(ap){var ao={};ao[am]=ap;return ao};if(aj){return R.isArray(an)?ah.map(an,al):[al(an)]}return al(an)}function ag(aj){aj.find("select[multiple]").auiSelect2()}function t(am,aj,ak){var al=am.name;am.value=(am.value&&am.value.name)||(ak&&ak.fields[al]&&ak.fields[al].name)||(N(aj)==="assignee"?-1:"");am.extraClasses=aj.schema.type==="array"?"multi-user-picker":"single-user-picker";return am}function M(ak){var al=function(an){return{name:an}};var am=ak.val();var aj=ak.closest(".jira-field").is(".multi-user-picker");if(!am){return aj?[]:null}return aj?ah.map(am.split(","),al):al(am)}function v(aj){var ak=aj.val();if(ak==="-1"){return undefined}return{name:ak}}function ad(ak,an,am,al,ao){var aq=ak.find("input");var ap=ak.attr("name");aq.removeClass("text").removeClass("long-field").addClass("medium-long-field");var aj={minimumInputLength:1,id:ap,name:ap,query:function(at){function ar(au){at.callback({results:au})}p(an,am,at.term,al).done(ar)}};aq.auiSelect2(R.extend(aj,ao));ak.find("div.aui-select2-container").addClass("jira-select2-drop-box")}function q(aj,an,al,ak,am){var ao=R.extend({},am,{multiple:al==="com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker",formatInputTooShort:function(){return "Find users..."},formatResult:function(ap){return s.templates.fields.userOptionSelect({name:ap.id,displayName:ap.text,isSystemOption:!!ap.isSystemOption})}});ad(aj,an,al,ak,ao)}function i(aj,am,al,ak){var an={minimumInputLength:0,initSelection:function(ao,ap){ap({id:-1,text:"Automatic",isSystemOption:true})},query:function(ap){function ao(aq){if(ap.page===1){if(!ap.element.prop("required")){aq.unshift({id:"",text:"Unassigned",isSystemOption:true})}aq.unshift({id:-1,text:"Automatic",isSystemOption:true})}ap.callback({results:aq})}if(ap.term.length>0){p(am,al,ap.term,ak).done(ao)}else{ao([])}},};q(aj,am,al,ak,an)}function l(aj,am,al,ak){var an=aj.find("input");s.fields._labelPicker.build(an,function(ao){return p(am,al,ao,ak)})}function p(an,al,am,ak){var aj=R.extend({restType:al,issueKey:(ak&&ak.key)||"",term:am},an);return R.ajax({type:"POST",timeout:0,contentType:"application/json",dataType:"json",url:AJS.contextPath()+"/rest/jira-integration/latest/fields/autocomplete",data:JSON.stringify(aj)})}function af(al,aj,ak){var am={"data-aui-validation-field":"",pattern:"(([0-9]+w|[0-9]+d|[0-9]+m|[0-9]+h|[0-9]+)\\s*)*","data-aui-validation-pattern-msg":"Enter a valid time estimate (eg. 3w 4d 12h)"};al.value=(al.value&&al.value.remainingEstimate)||(ak&&ak.fields[name]&&ak.fields[name].remainingEstimate)||"";return R.extend(true,{},al,{extraAttributes:am})}function g(aj){return{remainingEstimate:aj.val()}}function Q(an,aj,ak){var al=an.name;var am=(an.value&&an.value.name)||(ak&&ak.fields&&ak.fields[al]&&ak.fields[al].name)||"";delete an.value;an.options=ah.map(aj.allowedValues,function(ao){return{value:ao.id,text:ao.name,selected:am===ao.name,iconUrl:ao.iconUrl}});return an}function I(ak){var aj;if(ak.id){aj=R(ak.element).attr("data-icon-url")}return s.templates.fields.select2WithIconOption({optionValue:ak.text,iconUrl:aj})}function b(an,am,ak,aj){if(!R.fn.auiSelect2){AJS.log("AUI version 5.2 or greater is required as this plugin needs the .auiSelect2() jQuery plugin.");return}var al=an.find("select");al.addClass("jira-select2-drop-box");al.auiSelect2({hasAvatar:true,minimumResultsForSearch:-1,formatSelection:I,formatResult:I})}function U(aj,an,al,ak){var am={minimumInputLength:0,formatResult:function(ao){return s.templates.fields.sprintSelect({name:ao.text,state:ao.state,board:ao.board})},query:function(ao){p(an,al,ao.term,ak).done(function(ar){var aq=ah.groupBy(ar,function(at){return at.suggestion?"suggestions":"all"});var ap=["suggestions","all"].filter(function(at){return aq[at]&&aq[at].length>0}).map(function(at){return{text:at==="suggestions"?"Suggestions":"All sprints",children:aq[at]}});ao.callback({results:ah.compact(ap)})})}};return ad(aj,an,al,ak,am)}function Y(aj,an,al,ak){var am={minimumInputLength:0,formatResult:function(ao){return s.templates.fields.epicSelect({name:ao.text,key:ao.id})},query:function(ao){p(an,al,ao.term,ak).done(function(aq){var ap=ah.uniq(aq.map(function(ar){return ar.list})).map(function(ar){return{text:ar,children:aq.filter(function(at){return at.list===ar})}});ao.callback({results:ap})})}};return ad(aj,an,al,ak,am)}function V(aj){var ak=J(aj);return ak&&ak!==""?ak:undefined}function r(ak,aj){if(ah.has(o,ak)&&console&&console.warn){console.warn("Redefining handler for type "+ak+".")}o[ak]=aj}function N(aj){return aj.schema?(aj.schema.system||aj.schema.custom||aj.schema.customId):aj}function ac(aj){return o[N(aj)]}function E(aj){var ak=f(aj);return ak&&ac(ak)}function f(aj){return aj.closest(".jira-field").attr("data-jira-type")}function P(ak,aj){return R.ajax({type:"GET",timeout:0,url:AJS.contextPath()+"/rest/jira-integration/1.0/servers/"+ak.serverId+"/projects/"+ak.projectKey+"/issue-types/"+ak.issueType+"/fields-meta"}).pipe(function(am){var al=[];ah.each(am.fields,function(ao){var an=N(ao);if(ao.required&&!ah.contains(aj.excludedFields,an)){al.push(ao)}});return al})}function A(aj){return/\d/.test(aj)&&/^-?\d*\.?\d*$/.test(aj)}function a(ak,al,aj){var an=f(ak);var am=an&&ac(an);var ao=am&&am.behavior;if(ao){ao(ak,al,an,aj)}}return{addFieldHandler:r,getFieldHandler:ac,getFieldType:N,isKnownRestType:function(aj){return o.hasOwnProperty(aj)},canRender:function(aj){var al=N(aj);var ak=o[al];if(!ak){return false}return aj.operations&&aj.operations.length&&(!ak.canRender||ak.canRender(aj))},getContext:function(ak,aj,al,am){return y(ak,aj,al||{},am||{})},renderField:function(ak,aj,al,an){var am=y(ak,aj,al||{},an||{});return am.handler.template(am)},getJSON:function(aj){var ak=E(aj);return ak&&ak.getValue&&ak.getValue(aj)},attachFieldBehavior:a,attachFieldBehaviors:function(al,ak,aj){al.find(".jira-field").each(function(ao,an){var am=R(an);a(am,ak,aj)})},setFieldError:function(ak,am){var aj=ak.find(".error");aj.remove();if(!am){return}var al=s.templates.fields.errors({errorTexts:am});ak.append(al)},renderCreateRequiredFields:function(an,am,al,ak,aj){ak=ah.extend({},D,ak);function ao(ap){if(ak.ignoreFieldsWithDefaultValue){ap=ah.filter(ap,function(ar){return !ar.hasDefaultValue})}var aq=ah.filter(ap,function(ar){return !s.fields.canRender(ar)});if(aq.length){if(aj){aj(aq)}return}an.html(ah.map(ap,function(ar){return s.fields.renderField(null,ar,null,null)}).join(""));s.fields.attachFieldBehaviors(an,{serverId:al.serverId,projectKey:al.projectKey},null)}if(ak.requiredFields){ao(ak.requiredFields)}else{P(al,ak).done(ao)}}}}(AJS.$,window._));;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/label-picker.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.fields=jiraIntegration.fields||{};jiraIntegration.fields._labelPicker=function(a){var b=function(d,c){d.auiSelect2({tags:true,multiple:true,tokenSeparators:[","," "],createSearchChoice:function(e){if(!e){return null}return{id:e,text:e,isNew:true}},query:function(f){var e=function(g){f.callback({results:g})};c(f.term).done(e)},formatResult:function(e){return jiraIntegration.templates.fields.labelFieldResult({label:{labelName:e.text,isNew:e.isNew}})}})};return{build:b}}(AJS.$);;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:transition-form', location = '/transition-form/transition-form.soy' */
// This file was automatically generated from transition-form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jiraIntegration.templates._transitionForm.
 */

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates._transitionForm == 'undefined') { jiraIntegration.templates._transitionForm = {}; }


jiraIntegration.templates._transitionForm.globalError = function(opt_data, opt_ignored) {
  var param3 = '';
  var errorTextList4 = opt_data.errorTexts;
  var errorTextListLen4 = errorTextList4.length;
  for (var errorTextIndex4 = 0; errorTextIndex4 < errorTextListLen4; errorTextIndex4++) {
    var errorTextData4 = errorTextList4[errorTextIndex4];
    param3 += '<p>' + soy.$$escapeHtml(errorTextData4) + '</p>';
  }
  var output = '' + aui.message.error({content: param3});
  output += aui.buttons.button({tagName: 'a', type: 'primary', extraClasses: 'jira-error-action', extraAttributes: {href: opt_data.actionUrl}, text: opt_data.actionText});
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates._transitionForm.globalError.soyTemplateName = 'jiraIntegration.templates._transitionForm.globalError';
}


jiraIntegration.templates._transitionForm.form = function(opt_data, opt_ignored) {
  var param19 = '<div class="jira-section-heading"><h3>' + soy.$$escapeHtml(opt_data.transition.name) + '</h3></div>';
  if (opt_data.errorText) {
    var param25 = '';
    var errorTextList26 = opt_data.errorText;
    var errorTextListLen26 = errorTextList26.length;
    for (var errorTextIndex26 = 0; errorTextIndex26 < errorTextListLen26; errorTextIndex26++) {
      var errorTextData26 = errorTextList26[errorTextIndex26];
      param25 += soy.$$escapeHtml(errorTextData26);
    }
    param19 += aui.message.error({content: param25});
  }
  param19 += soy.$$filterNoAutoescape(opt_data.fieldContent) + aui.form.buttons({content: '' + aui.buttons.button({type: 'primary', extraClasses: 'jira-transition', extraAttributes: {'data-transition-id': opt_data.transition.id}, text: opt_data.transition.name}) + aui.buttons.button({extraClasses: 'jira-transition-cancel', type: 'link', text: 'Cancel'})});
  var output = '' + aui.form.form({action: '', extraClasses: 'jira-transition-form', content: param19});
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates._transitionForm.form.soyTemplateName = 'jiraIntegration.templates._transitionForm.form';
}
;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:transition-form', location = '/transition-form/transition-form.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.transitionForm=(function(b,a){return{isRequired:function(c,d){return d.fields&&a.some(d.fields,jiraIntegration.fields.canRender)},$render:function(g,f,c,h){if(!b.fn.auiSelect2){throw new Error("AUI version 5.2 or greater is required as this plugin needs the .auiSelect2() jQuery plugin.")}var d={};var k=false;a.each(h&&h.errors||[],function(l){k=k||l.context;var m=l.context||"__global__";d[m]=d[m]||[];d[m].push(l.message)});var i=!!d.__global__;if(!i||k){var e=f.fields?a.values(f.fields):[];a.each(e,function(m,l){m.fieldIndex=l});e.sort(function(o,n){var m=jiraIntegration.fields.canRender(o)?0:1;var l=jiraIntegration.fields.canRender(n)?0:1;return(m-l)||(o.fieldIndex-n.fieldIndex)});var j=b(jiraIntegration.templates._transitionForm.form({errorTexts:d.__global__,transition:f,fieldContent:a.map(e,function(l){return jiraIntegration.fields.renderField(g,l,c,d)}).join("")}));jiraIntegration.fields.attachFieldBehaviors(j,{serverId:g.applicationLinkId,projectKey:g.fields.project.key},g);return j}else{return b(jiraIntegration.templates._transitionForm.globalError({errorTexts:d.__global__,actionText:AJS.format("{0} in JIRA",f.name),actionUrl:g.url}))}},getJSON:function(c){return a.reduce(c.find("input,select,textarea").not(".select2-input,.select2-focusser"),function(d,f){var e=b(f);d[e.attr("name")]=jiraIntegration.fields.getJSON(e);return d},{})}}}(AJS.$,window._));;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-issues-dialog', location = '/jira-issue-dialog/jira-issues-dialog.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.JiraIssuesDialog=(function(d,r){d(document).on("jira-img-error","img",function(){var t=d('<div class="jira-default-project-avatar"></div>').text(this.getAttribute("alt"));d(this).replaceWith(t)});var i;function o(t){this.options=d.extend({},o.prototype.defaults,t);this.issueKeys=this.options.issueKeys||[];this.entityKey=this.options.entityKey||null;r.bindAll(this,"show","hide","onOAuthSuccess","setIssueKeys","setEntityKey","setTitle","reset","destroy","_renderJiraData");this._initDialog();this._truncated=false;this._jiraIssuesData=null;this._jiraIssuesDataPromise=null;this._events={};this._currentXhr=null}o.prototype.defaults={id:"jira-issues-dialog",issueKeys:null,entityKey:null,maxIssues:10,headerTitle:"JIRA Issues",get$AuthMessage:function(v){var t=d(jiraIntegration.templates.dialog.authenticate({extraClasses:"jira-oauth-dialog",multipleJiras:v.length>1}));var u=t.find(".jira-instance-list");v.forEach(function(x,w){if(w!==0){u.append(", ")}u.append(a(x))});return t},get$ConnectionLostMessage:function(v){if(v.length===1){var u=v[0];return d(jiraIntegration.templates.dialog.error({titleContent:jiraIntegration.templates.dialog.linkTitle({text:"Connection lost with",link:u.applicationUrl,linkText:u.applicationName}),text:"Unfortunately, we\u0027ve encountered problems connecting to JIRA"+":\n"+u.message,extraClasses:"communication-error"}))}else{var t=r.map(v,function(w){return jiraIntegration.templates.dialog.linkText({link:w.applicationUrl,linkText:w.applicationName,text:w.message,extraClasses:"multi"})});return d(jiraIntegration.templates.dialog.error({title:"There were errors communicating with JIRA",content:t.join(""),extraClasses:"communication-error"}))}},get$UnknownErrorMessage:function(){return d(jiraIntegration.templates.dialog.error({title:"Unknown error",text:"An unexpected error occurred.\nPlease contact your system administrator if the problem persists."}))},get$NoIssuesExistMessage:function(){return d(jiraIntegration.templates.dialog.message({title:"Can\u0027t display issues",text:"Either you don\u0027t have access to view them or they don\u0027t exist.\nPlease contact your system administrator if you believe this is incorrect.",iconClass:"icon-jira",extraClasses:"no-issues-exist"}))},ajax:function(t){alert("JiraIssuesDialog requires the option 'ajax(options)' to be specified and respond like jQuery.ajax.\nThis method should handle response status codes other than 200 and 500 (those are handled by us).")}};function g(t){return Math.max(0,Math.min(t-250,640))}o.prototype.on=function(t,u){this._events[t]=this._events[t]||[];this._events[t].push(u)};o.prototype.off=function(t,u){if(this._events[t]){this._events[t]=r.without(this._events[t],u)}};o.prototype._trigger=function(u){var t=this;var v=Array.prototype.slice.call(arguments,1);if(this._events[u]){r.map(this._events[u],function(w){w.apply(t,v)})}};o.prototype._initDialog=function(){var t=this;var v=d(window).height();this.dialog=new AJS.Dialog({width:980,height:g(v),id:this.options.id,closeOnOutsideClick:true,focusSelector:".button-panel-cancel-link"});d("#"+this.options.id).addClass("jira-issues-dialog");this.setTitle();this.dialog.addCancel("Close",this.hide).addPanel("jira-issues-list");this._transitionClickHandler=function(w){w.preventDefault();t._onTransitionClicked(this)};this.dialog.getCurrentPanel().body.on("click",".jira-transition-cancel",function(w){w.preventDefault();t._onTransitionCancelled(this)});d(document).on("hideLayer",function(){if(t.multiIssueView){t.multiIssueView.destroy()}});this._updateOAuthStatus();var u=d(window);this.onWindowResize=r.debounce(function(){t._setMinHeight(u.height())},200);u.on("resize",this.onWindowResize)};o.prototype._setMinHeight=function(u){var t=this.dialog.getCurrentPanel().body;t.css("min-height",g(u));if(t.is(":visible")){this.dialog.updateHeight()}};function l(t){return(!t.which||t.which===1)&&!(t.metaKey||t.ctrlKey||t.shiftKey||(t.altKey&&!d.browser.msie))}o.prototype.reset=function(){this._cancelPendingRender();this._truncated=false;this._jiraIssuesData=null};o.prototype.setIssueKeys=function(u,t){u=r.uniq(u);this.initialIssueKey=t;if(!this.issueKeys||u.length!==this.issueKeys.length||r.difference(u,this.issueKeys).length){this.issueKeys=u;this.reset()}};o.prototype.setEntityKey=function(t){if(this.entityKey!==t){this.entityKey=t;this.reset()}};o.prototype.destroy=function(){this.reset();this.dialog.remove();this._events=null;this.dialog=null;this.issueKeys=null;this.entityKey=null;this.options=null;if(this.onWindowResize){d(window).off("resize",this.onWindowResize);this.onWindowResize=null}};o.prototype.setTitle=function(t){this.dialog.addHeader(t||this.options.headerTitle||o.prototype.defaults.headerTitle)};o.prototype.show=function(){this._bindOAuthCallbacks();d(document).on("click",".jira-transition",this._transitionClickHandler);this.dialog.getCurrentPanel().body.removeClass("multi-issues");this.dialog.show();this._setMinHeight(d(window).height());this._loadJiraData().done(this._renderJiraData);this._trigger("show")};o.prototype.hide=function(){this._removeJiraDialog();this.dialog.hide();this._unbindOAuthCallbacks();d(document).off("click",".jira-transition",this._transitionClickHandler);this._trigger("hide")};o.prototype._removeJiraDialog=function(){d("#jira-instance-list-dialog").remove()};o.prototype._getRestIssuesUrl=function(){return AJS.contextPath()+"/rest/jira-integration/latest/issues?issueKey="+r.map(this.issueKeys,encodeURIComponent).join("&issueKey=")+(this.entityKey?"&entityKey="+encodeURIComponent(this.entityKey):"")+"&fields=*all,-comment&minimum="+this.options.maxIssues};o.prototype._getRestTransitionUrl=function(t,u){return AJS.contextPath()+"/rest/jira-integration/latest/issues/"+encodeURIComponent(t)+"/transitions?applicationId="+encodeURIComponent(u)+"&fields=*all,-comment"};o.prototype._getOAuthStatusUrl=function(){return AJS.contextPath()+"/rest/jira-integration/latest/servers"};o.prototype._loadJiraData=function(){if((!this._jiraIssuesData||this._jiraIssuesDataIncomplete)&&!this._jiraIssuesDataPromise){var t=this;var u=this.dialog.getCurrentPanel().body;if(!d.fn.spin){alert("This plugin requires spin.js and the jquery plugin to be available.")}u.empty().spin("large");this._jiraIssuesDataPromise=this.options.ajax({type:"GET",url:this._getRestIssuesUrl(),dataType:"json",contentType:"application/json",jsonp:false}).pipe(function(x,A,y){if(x.errors&&x.errors.length){t._handleAuthenticationRequired(x.errors);return d.Deferred().reject()}if(x&&x.length){var z=r.filter(x,function(B){return B.canTransition&&B.transitions.length===0});if(z.length){r.forEach(z,function(B){B.transitions=t._getTransitions(B.key,B.applicationLinkId,x);B.transitions.done(function(){f(B)})});r.forEach(r.difference(x,z),f);var v=z[0].transitions;var w=d.Deferred();v.done(function(){w.resolve(x)});v.fail(w.reject);return w}r.forEach(x,f)}return x},function(w,x,v){t._handle500Error(w)}).always(function(){u.spinStop()}).done(function(v){if(v.length){t._truncated=v.length>t.options.maxIssues;v=r.first(v,t.options.maxIssues)}t._jiraIssuesData=v;t._jiraIssuesDataIncomplete=v.length!=t.issueKeys.length});return t._jiraIssuesDataPromise.always(function(){t._jiraIssuesDataPromise=null})}else{if(this._jiraIssuesDataPromise){return this._jiraIssuesDataPromise}else{return d.Deferred().resolve(this._jiraIssuesData).promise()}}};o.prototype._getTransitions=function(t,x,w){var v=this;var u;w=w||this._jiraIssuesData;if(w){u=r.find(w,function(y){return y.key===t});if(u&&u.transitions&&u.transitions[0]&&u.transitions[0].fields){return d.when(u.transitions)}}return this.options.ajax({type:"GET",url:this._getRestTransitionUrl(t,x),dataType:"json",contentType:"application/json",jsonp:false}).pipe(function(y){if(y.errors&&y.errors.length){v._handleAuthenticationRequired(y.errors);return d.Deferred().reject()}else{if(u){u.transitions=y}return y}},function(z,A,y){v._handle500Error(z)})};o.prototype._transitionIssue=function(u,w,x,t){var v=this;return this.options.ajax({type:"POST",url:this._getRestTransitionUrl(u.key,x),dataType:"json",contentType:"application/json",jsonp:false,data:JSON.stringify({fields:t,transition:{id:w.id}})}).pipe(function(z){if(z.errors&&z.errors.length){v._handleAuthenticationRequired(z.errors);return d.Deferred().reject()}if(u.fields.status.id===z.fields.status.id&&w.to&&w.to.id!==z.fields.status.id){return d.Deferred().reject(k("The transition could not be completed due to an unexpected error. Use JIRA to execute this transition."))}v._trigger("transitioned",u.key);if(z.canTransition&&!z.transitions.length){var y=d.Deferred();v._getTransitions(z.key,z.applicationLinkId,[z]).done(function(){f(z);v._updateCachedData(z);y.resolve(z)}).fail(y.reject);return y}f(z);v._updateCachedData(z);return z})};o.prototype.isVisible=function(){return this.dialog.getCurrentPanel().body.is(":visible")};o.prototype.onOAuthSuccess=function(t){if(this.isVisible()){this._removeJiraDialog();this._updateOAuthStatus(true);this._loadJiraData().done(this._renderJiraData);t.preventDefault()}};o.prototype._onTransitionClicked=function(A){var G=this;var v=d(A);var H=v.closest(".jira-transition-form");var E=this.dialog.getCurrentPanel().body.find(".jira-issue-detailed");var B=E.find(".jira-transition");var t=E.attr("data-application-id");var w=E.attr("data-issue-key");var y=v.attr("data-transition-id");var F=r.find(this._jiraIssuesData,function(I){return I.key===w});B.attr("aria-disabled","true").prop("disabled",true);var D;var C;var u=this._getTransitions(w,t).pipe(function(I){D=r.find(I,function(J){return J.id===y});if(D){if(H.length){C=jiraIntegration.transitionForm.getJSON(H)}else{if(jiraIntegration.transitionForm.isRequired(F,D)){return d.Deferred().reject("formRequired")}}}else{D={id:y,name:v.text()}}return G._transitionIssue(F,D,t,C)});var z;if(H.length){z=d('<div class="jira-transition-spinner"></div>').prependTo(H.find(".buttons"))}else{z=d('<div class="jira-transition-spinner"></div>').appendTo(E.find(".jira-transitions"))}z.spin();var x=E.closest(".list-and-detail-view").find('> .list-view .issue-item[data-issuekey="'+F.key+'"]');u.done(function(J){var I=J.fields.status;x.find(".issue-item-status").html(jiraIntegration.templates.dialog.itemIssueStatus({issueStatus:I}))});this._registerPendingRender(u).always(function(){B.attr("aria-disabled","false").prop("disabled",false);z.spinStop().remove()}).done(function(I){E.replaceWith(G._renderDetailedIssue(I))}).fail(function(J){if(!J){return}if(J==="formRequired"){E.children(".jira-header").nextAll().remove();E.append(jiraIntegration.transitionForm.$render(F,D));E.addClass("jira-transitioning");return}var K;if(J.responseText){try{K=JSON.parse(J.responseText)}catch(L){K=k("An unexpected error occurred.\nPlease contact your system administrator if the problem persists.")}}else{K=J}if(K&&K.errors){E.children(".jira-header").nextAll().remove();if(D){E.append(jiraIntegration.transitionForm.$render(F,D,C,K));E.addClass("jira-transitioning")}else{if(K.errors&&K.errors.length){var I=r.map(K.errors,function(M){return"<li>"+AJS.escapeHtml(M.message)+"</li>"});E.append(aui.message.error({content:'<ul class="jira-errors">'+I.join("")+"</ul>"}))}else{E.replaceWith(G.options.get$UnknownErrorMessage());G._setMinHeight(0)}}}})};o.prototype._renderDetailedIssue=function(t){var u=d(jiraIntegration.templates.dialog.detailedIssue({issue:t}));return u.attr("data-last-updated",new Date().getTime())};o.prototype._onTransitionCancelled=function(v){var x=d(v);var w=x.closest(".jira-issue-detailed");var t=w.attr("data-issue-key");var u=r.find(this._jiraIssuesData,function(y){return y.key===t});w.replaceWith(this._renderDetailedIssue(u))};o.prototype._updateCachedData=function(t){this._jiraIssuesData=r.map(this._jiraIssuesData,function(u){return(u.key===t.key)?t:u})};o.prototype._handleAuthenticationRequired=function(u){var t=this;this._removeViewWarning();i.then(function(v){if(u.length!==v.length){t._updateOAuthStatus(true)}i.then(function(w){t.dialog.getCurrentPanel().body.empty().append(t.options.get$AuthMessage(w));t._setMinHeight(0)})})};o.prototype._removeViewWarning=function(){this.dialog.popup.element.find(".view-warning").remove()};o.prototype._handle500Error=function(x){if(x.status===500){var u;try{u=JSON.parse(x.responseText)}catch(w){}var t;var v=u&&u.errors;if(!v||!v.length){t=this.options.get$UnknownErrorMessage()}else{t=this.options.get$ConnectionLostMessage(v)}this._removeViewWarning();this.dialog.getCurrentPanel().body.empty().append(t);this._setMinHeight(0)}};o.prototype._registerPendingRender=function(t){this._cancelPendingRender();var u=this._pendingRender=d.Deferred();t.done(function(){u.resolveWith(this,arguments)}).fail(function(){u.rejectWith(this,arguments)});return this._pendingRender};o.prototype._cancelPendingRender=function(){if(this._pendingRender){this._pendingRender.reject();this._pendingRender=null}};o.prototype._renderJiraData=function(){var u=this;var v;var y=this.dialog.getCurrentPanel().body;this._cancelPendingRender();var t;var z;var x;switch(this._jiraIssuesData.length){case 0:v=this.options.get$NoIssuesExistMessage();break;case 1:z=this.issueKeys.length>1;v=this._renderDetailedIssue(this._jiraIssuesData[0]);x=d(window).height();break;default:if(this._truncated){t=AJS.format("Showing the first {0} issues",this.options.maxIssues)}else{if(this.issueKeys.length!==this._jiraIssuesData.length){z=true}}var w=r.findWhere(this._jiraIssuesData,{key:this.initialIssueKey});v=d(jiraIntegration.templates.dialog.multiIssueView({issues:this._jiraIssuesData,selectedIssue:w}));this.multiIssueView=new c(v,function(D,C,E,F){if(!l(F)){return}F.preventDefault();u._cancelPendingRender();var A=D.attr("data-issuekey");var B=r.find(u._jiraIssuesData,function(G){return G.key===A});if(B.transitions&&B.transitions.promise){E.empty().spin("large");u._registerPendingRender(B.transitions).always(function(){E.spinStop()}).done(function(){E.html(u._renderDetailedIssue(B))})}else{E.html(u._renderDetailedIssue(B))}});y.addClass("multi-issues");x=d(window).height();break}this._removeViewWarning();if(t){this.dialog.popup.element.find(".dialog-button-panel").prepend(jiraIntegration.templates.dialog.warningMessage({warningText:t}))}else{if(z){i.then(this._renderOAuthStatus.bind(this))}}y.html(v);v.find(".issue-status").attr("data-last-updated",new Date().getTime());this._setMinHeight(x||0)};o.prototype._bindOAuthCallbacks=function(){var t=AJS.$(document);t.bind("applinks.auth.approved",this.onOAuthSuccess);d('<div class="applinks-auth-confirmation-container hidden"></div>').appendTo(this.dialog.popup.element)};o.prototype._unbindOAuthCallbacks=function(){var t=AJS.$(document);t.unbind("applinks.auth.approved",this.onOAuthSuccess);d(".applinks-auth-confirmation-container.hidden").remove()};o.prototype._updateOAuthStatus=function(t){if(i&&!t){return}i=this.options.ajax({type:"GET",url:this._getOAuthStatusUrl()}).then(function(u){return u.filter(function(v){return !v.authenticated})})};o.prototype._renderOAuthStatus=function(v){this._removeJiraDialog();this._removeViewWarning();var t=this.dialog.popup.element.find(".dialog-button-panel");if(v.length===0){t.prepend(jiraIntegration.templates.dialog.warningMessage({warningText:"You don\u0027t have access to view all issues or they may not exist"}));return}var w=d(jiraIntegration.templates.dialog.oauthFooterMessage({includeDialog:v.length>2,multipleJiras:v.length>1}));var x=w.find(".jira-instance-picker");v.slice(0,2).forEach(function(z,y){if(y!==0){x.append(", ")}x.append(a(z))});var u=w.find(".jira-instance-list");v.slice(2).forEach(function(y){u.append(d("<li></li>").append(a(y)))});t.prepend(jiraIntegration.templates.dialog.warningMessage({warningText:""}));t.find(".view-warning").html(w)};function a(v){var u=ApplinksUtils.createAuthRequestInline(null,{id:v.id,authUri:AJS.contextPath()+"/plugins/servlet/applinks/oauth/login-dance/authorize?applicationLinkID="+encodeURIComponent(v.id),appUri:v.displayUrl,appName:v.name});var t=u.find("a.applink-authenticate").text(v.name).attr("title",v.name);return t.wrap('<span class="instance"></span>')}function k(t){return{errors:[{message:t}]}}var m={j:74,k:75};function c(t,v,u){this.options=d.extend({},c.prototype.defaults,u);this.$listView=t.find(".list-view");this.$detailView=t.find(".detail-view");this.selectHandler=v;r.bindAll(this,"itemClickHandler","shortcutHandler");this.init()}c.prototype.defaults={selectedClass:"selectedItem"};c.prototype.init=function(){var t=this;this.bindShortcuts();this.$listView.on("click","li",this.itemClickHandler)};c.prototype.itemClickHandler=function(v){var u=this.options.selectedClass;this.$listView.find("li."+u).removeClass(u);var t=d(v.currentTarget).addClass(u);this.selectHandler(t,this.$listView,this.$detailView,v)};c.prototype.destroy=function(){this.unbindShortcuts()};c.prototype.shortcutHandler=function(w){if(d(w.target).is("input,textarea,select")){return}var u;if(w.which===m.j){u="next"}else{if(w.which===m.k){u="prev"}else{return}}var v=this.$listView.find("li."+this.options.selectedClass);var t=v[u]("li");t.click();this._scrollItemIntoView(t)};c.prototype.bindShortcuts=function(){d(document).on("keydown",this.shortcutHandler)};c.prototype.unbindShortcuts=function(){d(document).off("keydown",this.shortcutHandler)};c.prototype._scrollItemIntoView=function(t){t.find("a").focus().blur()};var q=/.*(?=\/browse\/[^\/]*-\d+)/;var j=/.*(?=\/rest\/api\/\d+\/)/;function f(w){var v=q.exec(w.url)[0];var x=j.exec(w.self)[0];function u(A,y,z){if(typeof A==="string"){z[y]=n(A,v,x);return}r.each(A,u)}function t(z,y){if(z[y]){z[y]=e(z[y],v,x)}}s(w.fields,h,u);s(w.renderedFields,h,u);s(w.transitions,h,u);if(w.renderedFields){t(w.renderedFields,"description");r.each(w.renderedFields.comment&&w.renderedFields.comment.comments||[],function(y){t(y,"body")})}}function h(v,t,u){return/[uU]rls?$/.test(t)}function e(u,t,w){try{var v=d("<div />").html(u);r.each(["href","src"],function(y){r.each(v.find("["+y+"]"),function(z){z.setAttribute(y,n(z.getAttribute(y),t,w))})});u=v.html()}catch(x){}return u}var b=/^((\w+:)?\/\/|\w+:)/;function n(u,t,v){if(u.substring(0,v.length)===v){return p(t,u.substring(v.length))}if(!b.test(u)){return p(t,u)}return u}function s(v,u,t){if(v&&typeof v==="object"){r.each(v,function(x,w){if(u(x,w,v)){t(x,w,v)}s(x,u,t)})}}function p(u,t){var w=u.charAt(u.length-1)==="/";var v=t.charAt(0)==="/";return w&&v?u+t.substring(1):w||v?u+t:u+"/"+t}return o}(AJS.$,_));require(["aui/inline-dialog2"]);;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-issues-dialog', location = '/jira-issue-dialog/jira-issues-dialog.soy' */
// This file was automatically generated from jira-issues-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jiraIntegration.templates.dialog.
 */

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates.dialog == 'undefined') { jiraIntegration.templates.dialog = {}; }


jiraIntegration.templates.dialog.detailedIssue = function(opt_data, opt_ignored) {
  return '<div class="jira-issue-detailed" data-issue-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" data-application-id="' + soy.$$escapeHtml(opt_data.issue.applicationLinkId) + '"><div class="jira-header">' + aui.group.group({content: '' + aui.group.item({extraClasses: 'jira-project-avatar', content: '<span class="aui-avatar aui-avatar-project jira-project-avatar aui-avatar-large"><span class="aui-avatar-inner"><img src="' + soy.$$escapeHtml(opt_data.issue.fields.project.avatarUrls['48x48']) + '" alt="' + soy.$$escapeHtml(opt_data.issue.fields.project.name ? opt_data.issue.fields.project.name : '') + '" onerror="AJS.$(this).trigger(\'jira-img-error\')" /></span></span>'}) + aui.group.item({content: '<span class="project-name">' + soy.$$escapeHtml(opt_data.issue.fields.project.name) + '</span><a class="issue-key" href="' + soy.$$escapeHtml(opt_data.issue.url) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a><h2 class="issue-summary" title="' + soy.$$escapeHtml(opt_data.issue.fields.summary) + '">' + soy.$$escapeHtml(opt_data.issue.fields.summary) + '</h2>'})}) + '</div>' + ((opt_data.issue.canTransition && opt_data.issue.transitions && opt_data.issue.transitions.length) ? jiraIntegration.templates.dialog.jiraActionsToolbar({transitions: opt_data.issue.transitions, maxTransitionsToDisplay: opt_data.maxTransitionsToDisplay}) : '') + '<div class="jira-section-heading"><h3>' + soy.$$escapeHtml('Details') + '</h3></div>' + aui.group.group({extraClasses: 'issue-details jira-section', content: '' + aui.group.item({content: '<ul class="fields"><li class="field issue-type"><span class="field-label">' + soy.$$escapeHtml('Type:') + '</span><img class="aui-icon" src="' + soy.$$escapeHtml(opt_data.issue.fields.issuetype.iconUrl) + '"/><span class="field-text">' + soy.$$escapeHtml(opt_data.issue.fields.issuetype.name) + '</span></li><li class="field issue-priority"><span class="field-label">' + soy.$$escapeHtml('Priority:') + '</span>' + ((opt_data.issue.fields.priority) ? '<img class="aui-icon" src="' + soy.$$escapeHtml(opt_data.issue.fields.priority.iconUrl) + '"/><span class="field-text">' + soy.$$escapeHtml(opt_data.issue.fields.priority.name) + '</span>' : '<span class="field-text empty">' + soy.$$escapeHtml('No priority') + '</span>') + '</li></ul>'}) + aui.group.item({content: '<ul class="fields"><li class="field issue-status"><span class="field-label">' + soy.$$escapeHtml('Status:') + '</span>' + JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.issue.fields.status}) + '</li><li class="field issue-assignee"><span class="field-label">' + soy.$$escapeHtml('Assignee:') + '</span>' + ((opt_data.issue.fields.assignee) ? '<img class="aui-icon" title="' + soy.$$escapeHtml(opt_data.issue.fields.assignee.displayName) + '" src="' + soy.$$escapeHtml(opt_data.issue.fields.assignee.avatarUrls['16x16']) + '"><span class="field-text">' + soy.$$escapeHtml(opt_data.issue.fields.assignee.displayName) + '</span>' : '<span class="field-text empty">' + soy.$$escapeHtml('Unassigned') + '</span>') + '</li></ul>'})}) + '<div class="jira-section-heading"><h3>' + soy.$$escapeHtml('Description') + '</h3></div><div class="jira-section">' + ((opt_data.issue.renderedFields && opt_data.issue.renderedFields.description) ? '<div class="issue-description rendered">' + soy.$$filterNoAutoescape(opt_data.issue.renderedFields.description) + '</div>' : (opt_data.issue.fields.description) ? '<p class="issue-description">' + soy.$$escapeHtml(opt_data.issue.fields.description) + '</p>' : '<p class="issue-description empty">' + soy.$$escapeHtml('No description') + '</p>') + '</div></div>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.detailedIssue.soyTemplateName = 'jiraIntegration.templates.dialog.detailedIssue';
}


jiraIntegration.templates.dialog.jiraActionsToolbar = function(opt_data, opt_ignored) {
  return '' + aui.toolbar2.toolbar2({extraClasses: 'jira-actions', content: '' + aui.toolbar2.group({content: '' + aui.toolbar2.item({item: 'primary', extraClasses: 'jira-transitions', content: '' + jiraIntegration.templates.dialog.transitionsButtons(opt_data)})})});
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.jiraActionsToolbar.soyTemplateName = 'jiraIntegration.templates.dialog.jiraActionsToolbar';
}


jiraIntegration.templates.dialog.transitionsButtons = function(opt_data, opt_ignored) {
  var output = '';
  var maxTransitionsToDisplay__soy122 = opt_data.maxTransitionsToDisplay ? opt_data.maxTransitionsToDisplay : 3;
  var param123 = '';
  var transitionList124 = opt_data.transitions;
  var transitionListLen124 = transitionList124.length;
  for (var transitionIndex124 = 0; transitionIndex124 < transitionListLen124; transitionIndex124++) {
    var transitionData124 = transitionList124[transitionIndex124];
    param123 += (transitionIndex124 < maxTransitionsToDisplay__soy122 - 1 || opt_data.transitions.length <= maxTransitionsToDisplay__soy122) ? aui.buttons.button({text: transitionData124.name, extraClasses: 'jira-transition', extraAttributes: {'data-transition-id': transitionData124.id, autocomplete: 'off'}}) : '';
  }
  param123 += (opt_data.transitions.length > maxTransitionsToDisplay__soy122) ? aui.buttons.button({text: 'More', dropdown2Target: 'jira-more-transitions', extraAttributes: {autocomplete: 'off'}}) : '';
  output += aui.buttons.buttons({content: param123});
  if (opt_data.transitions.length > maxTransitionsToDisplay__soy122) {
    var param143 = '<ul>';
    var transitionList145 = opt_data.transitions;
    var transitionListLen145 = transitionList145.length;
    for (var transitionIndex145 = 0; transitionIndex145 < transitionListLen145; transitionIndex145++) {
      var transitionData145 = transitionList145[transitionIndex145];
      param143 += (transitionIndex145 > maxTransitionsToDisplay__soy122 - 2) ? '<li><a class="jira-transition" data-transition-id="' + soy.$$escapeHtml(transitionData145.id) + '">' + soy.$$escapeHtml(transitionData145.name) + '</a></li>' : '';
    }
    param143 += '</ul>';
    output += aui.dropdown2.contents({id: 'jira-more-transitions', extraClasses: 'aui-style-default', content: param143});
  }
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.transitionsButtons.soyTemplateName = 'jiraIntegration.templates.dialog.transitionsButtons';
}


jiraIntegration.templates.dialog.warningMessage = function(opt_data, opt_ignored) {
  return '<div class="view-warning"><span class="aui-icon aui-icon-small aui-iconfont-info" /><span class="warning-message">' + soy.$$escapeHtml(opt_data.warningText) + '</span></div>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.warningMessage.soyTemplateName = 'jiraIntegration.templates.dialog.warningMessage';
}


jiraIntegration.templates.dialog.multiIssueView = function(opt_data, opt_ignored) {
  var output = '<div class="list-and-detail-view"><div class="list-view"><ul>';
  var issueList162 = opt_data.issues;
  var issueListLen162 = issueList162.length;
  for (var issueIndex162 = 0; issueIndex162 < issueListLen162; issueIndex162++) {
    var issueData162 = issueList162[issueIndex162];
    output += jiraIntegration.templates.dialog.issueItem({issue: issueData162, isSelected: opt_data.selectedIssue ? issueData162.key == opt_data.selectedIssue.key : issueIndex162 == 0});
  }
  output += '</ul></div><div class="detail-view">' + jiraIntegration.templates.dialog.detailedIssue({issue: opt_data.selectedIssue ? opt_data.selectedIssue : opt_data.issues[0]}) + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.multiIssueView.soyTemplateName = 'jiraIntegration.templates.dialog.multiIssueView';
}


jiraIntegration.templates.dialog.issueItem = function(opt_data, opt_ignored) {
  return '<li class="issue-item' + soy.$$escapeHtml(opt_data.isSelected ? ' selectedItem' : '') + '" data-issuekey="' + soy.$$escapeHtml(opt_data.issue.key) + '"><img class="aui-icon issue-item-type" title="' + soy.$$escapeHtml(opt_data.issue.fields.issuetype.name) + '" src="' + soy.$$escapeHtml(opt_data.issue.fields.issuetype.iconUrl) + '"/><a class="issue-item-key" href="' + soy.$$escapeHtml(opt_data.issue.url) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a><div class="issue-item-status">' + jiraIntegration.templates.dialog.itemIssueStatus({issueStatus: opt_data.issue.fields.status}) + '</div><a href="' + soy.$$escapeHtml(opt_data.issue.url) + '" class="issue-item-summary" title="' + soy.$$escapeHtml(opt_data.issue.fields.summary) + '">' + soy.$$escapeHtml(opt_data.issue.fields.summary) + '</a></li>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.issueItem.soyTemplateName = 'jiraIntegration.templates.dialog.issueItem';
}


jiraIntegration.templates.dialog.itemIssueStatus = function(opt_data, opt_ignored) {
  return '' + JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.issueStatus, isSubtle: true, isCompact: ! opt_data.issueStatus.statusCategory});
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.itemIssueStatus.soyTemplateName = 'jiraIntegration.templates.dialog.itemIssueStatus';
}


jiraIntegration.templates.dialog.message = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="jira-dialog-message' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.iconClass) ? '<div class="jira-dialog-message-icon aui-icon' + ((opt_data.iconClass) ? ' ' + soy.$$escapeHtml(opt_data.iconClass) : '') + '">' + soy.$$escapeHtml(opt_data.accessibilityText ? opt_data.accessibilityText : '') + '</div>' : '') + ((opt_data.title) ? '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + ((opt_data.titleContent) ? soy.$$filterNoAutoescape(opt_data.titleContent) : '') + ((opt_data.text) ? '<p>' + soy.$$escapeHtml(opt_data.text) + '</p>' : '') + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.message.soyTemplateName = 'jiraIntegration.templates.dialog.message';
}


jiraIntegration.templates.dialog.linkText = function(opt_data, opt_ignored) {
  return '<p class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '">' + soy.$$escapeHtml(opt_data.linkText) + '</a>: ' + soy.$$escapeHtml(opt_data.text) + '</p>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.linkText.soyTemplateName = 'jiraIntegration.templates.dialog.linkText';
}


jiraIntegration.templates.dialog.linkTitle = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.text) + ' <a href="' + soy.$$escapeHtml(opt_data.link) + '">' + soy.$$escapeHtml(opt_data.linkText) + '</a></h2>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.linkTitle.soyTemplateName = 'jiraIntegration.templates.dialog.linkTitle';
}


jiraIntegration.templates.dialog.authenticate = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + jiraIntegration.templates.dialog.message({title: 'Authenticate to see this issue', content: '<p>' + ((opt_data.multipleJiras) ? soy.$$escapeHtml('Please log in to approve these applications:') + ' ' : soy.$$escapeHtml('Please log in to approve this application:') + ' ') + '<span class=\'jira-instance-list\'></span></p>', extraClasses: opt_data.extraClasses, iconClass: 'icon-lock'});
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.authenticate.soyTemplateName = 'jiraIntegration.templates.dialog.authenticate';
}


jiraIntegration.templates.dialog.error = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + jiraIntegration.templates.dialog.message({title: opt_data.title, titleContent: opt_data.titleContent, text: opt_data.text, content: opt_data.content, extraClasses: opt_data.extraClasses, iconClass: 'icon-skull'});
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.error.soyTemplateName = 'jiraIntegration.templates.dialog.error';
}


jiraIntegration.templates.dialog.oauthFooterMessage = function(opt_data, opt_ignored) {
  return '<span>' + aui.icons.icon({icon: 'info', useIconFont: true}) + ((opt_data.multipleJiras) ? soy.$$escapeHtml('Authenticate with the following applications to view more issues:') + ' ' : soy.$$escapeHtml('Authenticate with the following application to view more issues:') + ' ') + '<span class=\'jira-instance-picker\'></span>' + ((opt_data.includeDialog) ? ', ' + aui.inlineDialog2.trigger({menu: {id: 'jira-instance-list-dialog'}, text: 'More'}) + aui.inlineDialog2.inlineDialog2({id: 'jira-instance-list-dialog', respondsTo: 'toggle', alignment: 'top center', content: '<ul class="jira-instance-list"></ul>'}) : '') + '</span>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.oauthFooterMessage.soyTemplateName = 'jiraIntegration.templates.dialog.oauthFooterMessage';
}
;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-issues-dialog-trigger', location = '/jira-issues-dialog-trigger/jira-issues-dialog-trigger.js' */
jiraIntegration.triggers=(function(d,b){function c(g){return g.which===3}function f(g){return(!g.which||g.which===1)&&!(g.metaKey||g.ctrlKey||g.shiftKey||(g.altKey&&!d.browser.msie))}var a={defaults:{selector:".jira-issues-trigger",headerTitleFn:null}};function e(j,h){j=d.extend({},a.defaults,j);var l;function i(){if(!l){if(h instanceof jiraIntegration.JiraIssuesDialog){l=h}else{l=new jiraIntegration.JiraIssuesDialog(h)}}return l}function n(v,r){var t=i();if(c(v)||(!f(v)&&!!r.data("single-issue"))){return}v.preventDefault();var u=r.attr("data-issue-keys");var s=u&&u.split(",");var q=r.attr("data-initial-issue-key");if(s){t.setIssueKeys(s,q)}if(typeof j.headerTitleFn==="function"){t.setTitle(j.headerTitleFn(r))}r.tipsy("hide");t.show()}var o={gravity:"n",className:function(){var s=d(".tipsy");var w=s[0];var q=w.offsetWidth;var v="multi-issues-tooltip";s.addClass(v);var t=w.offsetWidth;var r=q-t;var u=parseFloat(s.css("left"),10);s.css("left",(u+r/2)+"px");return v}};var g;var p;if(typeof j.selector==="string"){g=function(r){var q=d(r.target).closest(j.selector);if(q.length){n(r,q)}};d(document).on("click",g);o.live=true;d(j.selector+".multi-issues").tipsy(o);p=function(){d(document).off("click",g)}}else{g=function(q){n(q,d(this))};var k=d(j.selector);k.on("click",g);var m=k.filter(".multi-issues");m.tipsy(o);p=function(){k.off("click",g)}}return{getDialog:i,unbind:p}}a.init=e;return a}(AJS.$,_));;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-issues-dialog-trigger', location = '/jira-issues-dialog-trigger/jira-issues-dialog-trigger.soy' */
// This file was automatically generated from jira-issues-dialog-trigger.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jiraIntegration.templates.trigger.
 */

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates.trigger == 'undefined') { jiraIntegration.templates.trigger = {}; }


jiraIntegration.templates.trigger.issuesTrigger = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.displayedIssue || opt_data.issues.length == 1) {
    output += '<a class="' + soy.$$escapeHtml(opt_data.className ? opt_data.className : 'jira-issues-trigger') + '" data-issue-keys="';
    var issueList8 = opt_data.issues;
    var issueListLen8 = issueList8.length;
    for (var issueIndex8 = 0; issueIndex8 < issueListLen8; issueIndex8++) {
      var issueData8 = issueList8[issueIndex8];
      output += ((! (issueIndex8 == 0)) ? ',' : '') + soy.$$escapeHtml(issueData8.key);
    }
    output += '"' + ((opt_data.displayedIssue) ? ' data-initial-issue-key="' + soy.$$escapeHtml(opt_data.displayedIssue.key) + '"' : '') + ' data-single-issue="true" href="' + soy.$$escapeHtml(opt_data.displayedIssue ? opt_data.displayedIssue.url : opt_data.issues[0].url) + '">' + soy.$$escapeHtml(opt_data.displayedIssue ? opt_data.displayedIssue.key : opt_data.issues[0].key) + '</a>';
  } else if (opt_data.issues.length > 1) {
    output += '<a class="' + soy.$$escapeHtml(opt_data.className ? opt_data.className : 'jira-issues-trigger') + ' multi-issues" data-issue-keys="';
    var issueList29 = opt_data.issues;
    var issueListLen29 = issueList29.length;
    for (var issueIndex29 = 0; issueIndex29 < issueListLen29; issueIndex29++) {
      var issueData29 = issueList29[issueIndex29];
      output += ((! (issueIndex29 == 0)) ? ',' : '') + soy.$$escapeHtml(issueData29.key);
    }
    output += '" href="#" title="' + jiraIntegration.templates.trigger.tooltip(opt_data) + '"><strong>' + soy.$$escapeHtml(opt_data.issues.length <= (opt_data.maxIssues ? opt_data.maxIssues : 10) ? opt_data.issues.length : AJS.format('{0}+',opt_data.maxIssues ? opt_data.maxIssues : 10)) + '</strong> ' + soy.$$escapeHtml('JIRA Issues') + '</a>';
  }
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.trigger.issuesTrigger.soyTemplateName = 'jiraIntegration.templates.trigger.issuesTrigger';
}


jiraIntegration.templates.trigger.tooltip = function(opt_data, opt_ignored) {
  var output = '';
  var issueList44 = opt_data.issues;
  var issueListLen44 = issueList44.length;
  for (var issueIndex44 = 0; issueIndex44 < issueListLen44; issueIndex44++) {
    var issueData44 = issueList44[issueIndex44];
    output += (issueIndex44 < 5) ? ((! (issueIndex44 == 0)) ? '\n' : '') + soy.$$escapeHtml(issueData44.key) : '';
  }
  output += (opt_data.issues.length > 5) ? '\n' + soy.$$escapeHtml(AJS.format('and {0} more...',opt_data.issues.length - 5)) : '';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.trigger.tooltip.soyTemplateName = 'jiraIntegration.templates.trigger.tooltip';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:jira-integration-lib', location = '/bitbucket-plugin-jira/internal/feature/jira/integration/triggers.js' */
define("bitbucket-plugin-jira/internal/feature/jira/integration/triggers",[],function(){return jiraIntegration.triggers});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:jira-integration-lib', location = '/bitbucket-plugin-jira/internal/feature/jira/integration/dialog.js' */
define("bitbucket-plugin-jira/internal/feature/jira/integration/dialog",function(){return jiraIntegration.JiraIssuesDialog});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:oauth-util', location = '/static/bitbucket/internal/util/oauth.js' */
define("bitbucket/internal/util/oauth",["module","exports","jquery","bitbucket/internal/util/events"],function(k,d,l,m){function n(a){var c=new f.default.Deferred,b={url:a,deferred:c,api:c.promise({abort:function(){g.cancelRequest(a)}})};e.default.trigger("bitbucket.internal.util.oauth.authorizationRequested",null,a);c.then(function(){e.default.trigger("bitbucket.internal.util.oauth.authorizationSucceeded",null,a)},function(){e.default.trigger("bitbucket.internal.util.oauth.authorizationFailed",null,
a)});g.fireRequest(a,c.resolve,c.reject);return b}function h(a){if(b){if(b.url===a)return b.api;b.api.abort()}a=b=n(a);b.deferred.always(function(){b=null});return a.api}Object.defineProperty(d,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(l),e=babelHelpers.interopRequireDefault(m),g=function(){function a(){window.aouthWindow&&window.aouthWindow.close&&window.aouthWindow.close();window.oauthCallback=null;window.aouthWindow=null}return{fireRequest:function(c,b,d){window.oauthCallback=
{uri:c,success:function(){a();b&&b()},failure:function(){a();d&&d()}};window.aouthWindow=window.open(c)},cancelRequest:function(a){window.oauthCallback&&window.oauthCallback.uri===a&&window.oauthCallback.failure()}}}(),b;d.default={authorizeUrl:h,interceptLinks:function(a){(0,f.default)(document).on("click",a,function(a){var b=this.getAttribute("href");b&&(h(b),a.preventDefault())})}};k.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:jira-issues-dialog', location = '/bitbucket-plugin-jira/internal/feature/jira/dialog/dialog.js' */
define("bitbucket-plugin-jira/internal/feature/jira/dialog/dialog","module exports lodash bitbucket/internal/util/ajax bitbucket/internal/util/events bitbucket/internal/util/oauth ../integration/dialog ../integration/triggers".split(" "),function(g,c,d,h,k,l,m,n){function b(a){p.default.bindAll(this,"show","hide","showDialog","closeDialog","destroy");a=babelHelpers.extends({},this.defaults,a);a.triggerSelector?(this._triggerInfo=q.default.init({selector:a.triggerSelector,headerTitleFn:"function"===
typeof a.headerTitle?a.headerTitle:void 0},a),this._dialog=this._triggerInfo.getDialog()):this._dialog=new e.default(a);f.default.on("bitbucket.internal.util.oauth.authorizationSucceeded",this._dialog.onAuthorizationSucceeded)}Object.defineProperty(c,"__esModule",{value:!0});var p=babelHelpers.interopRequireDefault(d),r=babelHelpers.interopRequireDefault(h),f=babelHelpers.interopRequireDefault(k);d=babelHelpers.interopRequireDefault(l);var e=babelHelpers.interopRequireDefault(m),q=babelHelpers.interopRequireDefault(n);
d.default.interceptLinks(".jira-ual-authenticate");b.prototype.defaults=babelHelpers.extends({},e.default.prototype.defaults,{oauthTriggerClass:"jira-ual-authenticate",ajax:function(a){return r.default.rest(babelHelpers.extends({statusCode:{200:!1,500:!1}},a))}});b.prototype.destroy=function(){f.default.off("bitbucket.internal.util.oauth.authorizationSucceeded",this._dialog.onAuthorizationSucceeded);this._dialog.destroy();this._dialog=null;this._triggerInfo&&(this._triggerInfo.unbind(),this._triggerInfo=
null)};b.prototype.showDialog=b.prototype.show=function(){this._dialog.show()};b.prototype.closeDialog=b.prototype.hide=function(){this._dialog.hide()};b.prototype.setIssueKeys=function(a){this._dialog.setIssueKeys(a)};c.default=b;g.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:pull-request-jira-issues', location = '/bitbucket-plugin-jira/internal/feature/jira/pull-request/pull-request-jira-issues.js' */
define("bitbucket-plugin-jira/internal/feature/jira/pull-request/pull-request-jira-issues","exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/model/page-state bitbucket/internal/util/ajax bitbucket/internal/util/shortcuts ../dialog/dialog".split(" "),function(a,k,l,m,n,p,q,r){function t(){u.default.rest({url:v.default.newBuilder(["rest","jira","latest","projects",d.default.getProject().getKey(),"repos",d.default.getRepository().getSlug(),"pull-requests",d.default.getPullRequest().getId(),
"issues"]).build(),type:"GET",statusCode:{"*":!1}}).done(function(b){c=b;b=(0,g.default)(bitbucket.internal.feature.pullRequest.jiraWebPanel(a.getWebPanelParams())).hide();(0,g.default)(".jira-issues-placeholder").replaceWith(b);b.fadeIn();c.length&&(e=new h.default({id:"pull-request-jira-issues-dialog",issueKeys:w.default.map(c,"key"),maxIssues:f,triggerSelector:".pull-request-issues-trigger"}))})}function x(){y.default.bind("showJiraIssuesDialog",function(){e&&e.showDialog()})}Object.defineProperty(a,
"__esModule",{value:!0});a.getWebPanelParams=function(){return{issues:c,maxIssues:f}};a.onReady=function(){t();new h.default({id:"markup-jira-issues-dialog",maxIssues:f,triggerSelector:".markup-issues-trigger"});x()};var g=babelHelpers.interopRequireDefault(k),w=babelHelpers.interopRequireDefault(l),v=babelHelpers.interopRequireDefault(m),d=babelHelpers.interopRequireDefault(n),u=babelHelpers.interopRequireDefault(p),y=babelHelpers.interopRequireDefault(q),h=babelHelpers.interopRequireDefault(r),
f=10,e=void 0,c=void 0});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:pull-request-jira-issues', location = '/bitbucket-plugin-jira/internal/feature/jira/pull-request/pull-request-jira-issues-init.js' */
jQuery(document).ready(function(){require("bitbucket-plugin-jira/internal/feature/jira/pull-request/pull-request-jira-issues").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:pull-request-jira-issues', location = '/bitbucket-plugin-jira/internal/feature/jira/pull-request/pull-request-jira-issues.soy' */
// This file was automatically generated from pull-request-jira-issues.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.jiraWebPanel = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.issues || opt_data.issues.length == 0) ? '<div class=\'jira-issues-placeholder hidden\'></div>' : (opt_data.issues.length == 1) ? bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel({linkText: opt_data.issues[0].key, linkHref: opt_data.issues[0].url, linkExtraAttributes: 'data-single-issue=true', linkClass: 'pull-request-issues-trigger', iconClass: 'aui-icon-small aui-iconfont-jira', iconTooltip: 'Issues', extraClasses: 'jira-issues'}) : bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel({count: opt_data.issues.length > opt_data.maxIssues ? opt_data.maxIssues + '+' : opt_data.issues.length, linkText: 'JIRA Issues', linkClass: 'pull-request-issues-trigger multi-issues', linkTooltip: '' + jiraIntegration.templates.trigger.tooltip(opt_data), iconClass: 'aui-icon-small aui-iconfont-jira', iconTooltip: 'Issues', extraClasses: 'jira-issues'}));
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.jiraWebPanel.soyTemplateName = 'bitbucket.internal.feature.pullRequest.jiraWebPanel';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:pull-request-jira-issues-panel', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-jira','key':'pull-request-jira-issues-panel','moduleKey':'pull-request-jira-issues-panel','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-jira:pull-request-jira-issues-panel','weight':15.0,'context-provider':function(ctx) { return WebFragments._getValue((require('bitbucket-plugin-jira/internal/feature/jira/pull-request/pull-request-jira-issues').getWebPanelParams()), ctx); },'params':{},'location':'bitbucket.pull-request.related-entities','view':function(ctx) { return WebFragments._getValue((bitbucket.internal.feature.pullRequest.jiraWebPanel), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-build:build-status-common-resources', location = '/bitbucket-plugin-build/internal/feature/build/common/build-status-dialog.js' */
define("bitbucket-plugin-build/internal/feature/build/common/build-status-dialog","module exports aui jquery bitbucket/internal/util/ajax bitbucket/internal/util/dom-event".split(" "),function(h,e,k,l,m,n){function f(){this._xhr=this._instance=null}function p(a,b){b=(new d.default.Dialog({closeOnOutsideClick:!0,id:"build-status-dialog",height:240,width:600,keypressListener:function(b){b.keyCode===d.default.keyCode.ESCAPE&&a._instance&&a._instance.hide()}})).addHeader("Builds").addPanel("",
b,"build-status-dialog-panel").addLink("Close",function(){a._instance&&a._instance.hide()});(0,c.default)(document).one("hideLayer",function(){a._xhr&&a._xhr.abort();a._instance&&(a._instance.remove(),a._instance=null)});return b}function q(a,b){a._xhr=r.default.rest({url:t(b)}).fail(function(){a._instance&&a._instance.hide()}).done(function(b){b=b.values.sort(function(a,b){var c;(c=g[a.state]-g[b.state]||b.dateAdded-a.dateAdded)||(a=a.name||a.key,b=b.name||
b.key,c=a<b?-1:a>b?1:0);return c});u(a,bitbucket.internal.build.status.dialogList({statuses:b}))}).always(function(){a._xhr=null});return a._xhr}function t(a){return d.default.contextPath()+"/rest/build-status/latest/commits/"+encodeURIComponent(a)}function u(a,b){a._instance.getCurrentPanel().html(b);a._instance.updateHeight()}Object.defineProperty(e,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(k),c=babelHelpers.interopRequireDefault(l),r=babelHelpers.interopRequireDefault(m),
v=babelHelpers.interopRequireDefault(n);f.prototype.bindTo=function(a,b,d,e){var f=this;(0,c.default)(a).on(d,b,function(a){var b=(0,c.default)(this).prop("href");b=b&&b!==location.href+"#"&&b!==location.href;if(v.default.openInSameTab(a)||!b)a.preventDefault(),f.showFor(e((0,c.default)(this)))})};f.prototype.showFor=function(a){this._instance&&this._instance.remove();var b=(0,c.default)('\x3cdiv class\x3d"spinner"\x3e\x3c/div\x3e');this._instance=p(this,b);this._instance.show();(0,c.default)(".button-panel-link").focus();
b.show().spin("large");q(this,a).always(function(){b.spinStop().remove()})};var g={INPROGRESS:0,FAILED:1,SUCCESSFUL:2};e.default=f;h.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-build:build-status-common-resources', location = '/bitbucket-plugin-build/internal/feature/build/common/build-status-common.js' */
define("bitbucket-plugin-build/internal/feature/build/common/build-status-common","exports jquery lodash bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/util/ajax ../common/build-status-dialog".split(" "),function(c,r,t,u,v,w,x){function y(a){return m.default.rest("build-status").addPathComponents("commits","stats",a).build()}function n(a,b,c,d,h){if(d&&(d.failed||d.inProgress||d.successful))return b.replaceWith(a({commitId:c,stats:d})),p.default.isFunction(h)&&h(b),!0;b.remove();
return!1}function z(a){return A.default.rest({url:m.default.rest("build-status").addPathComponents("commits","stats").build(),type:"POST",data:a,statusCode:{"*":!1}})}function B(a){return(0,g.default)(bitbucket.internal.build.status.summaryIcon(a)).tooltip({gravity:"ne",html:!1})}function C(a,b,c){b=(0,g.default)(b+" .build-status-placeholder");Array.prototype.reduce.call(b,function(a,b){b=(0,g.default)(b);var d=b.attr("data-commit-id");b=n(B,b,d,c[d]);return a||b},!1)&&a.show()}function e(a,b){this._pendingCommitIds=
[];this._headerSelector=a;this._cellSelector=b;k.bindTo((0,g.default)(document),b+" .build-icon","click",function(a){return a.attr("data-commit-id")})}function q(a,b){return D.default.rest({url:y(a),data:b,statusCode:{"*":!1}})}Object.defineProperty(c,"__esModule",{value:!0});c.showDialogIfHasBuildStatus=c.requestBuildStatus=c.queryBuildStatusAndDecorate=c.BuildStatusColumnRenderer=void 0;var g=babelHelpers.interopRequireDefault(r),p=babelHelpers.interopRequireDefault(t),m=babelHelpers.interopRequireDefault(u),
A=babelHelpers.interopRequireDefault(v),D=babelHelpers.interopRequireDefault(w),k=new (babelHelpers.interopRequireDefault(x).default),l=!1,f={};e.prototype.renderPlaceholder=function(a,b){this.populateBuildStatusLater(a,C);return f.hasOwnProperty(a)?bitbucket.internal.build.status.summaryIcon({commitId:a,stats:f[a],isPlaceholder:!0,date:b}):bitbucket.internal.build.status.placeholder({commitId:a,date:b})};e.prototype.populateBuildStatusLater=function(a,b){this._pendingCommitIds.length||this._queuePopulation(b);
this._pendingCommitIds.push(a)};e.prototype._queuePopulation=function(a){var b=this;setTimeout(function(){var c=b._pendingCommitIds;b._pendingCommitIds=[];z(c).then(function(a){p.default.forEach(a,function(a,b){f[b]=a});return f}).done(a.bind(null,(0,g.default)(b._headerSelector),b._cellSelector))},50)};c.BuildStatusColumnRenderer=e;c.queryBuildStatusAndDecorate=function(a,b,c,d,h){var e=a.commitId;q(e,{includeUnique:!!a.includeUnique}).done(function(a){var f=(0,g.default)(b);a=n(d,f,e,a,function(){k.bindTo(c,
"","click",function(){return e});h&&h(f)});l=l||a});return a};c.requestBuildStatus=q;c.showDialogIfHasBuildStatus=function(a){l&&k.showFor(a)}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-build:build-status-common-resources', location = '/bitbucket-plugin-build/internal/feature/build/common/build-status-common.soy' */
// This file was automatically generated from build-status-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.build.status.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.build == 'undefined') { bitbucket.internal.build = {}; }
if (typeof bitbucket.internal.build.status == 'undefined') { bitbucket.internal.build.status = {}; }


bitbucket.internal.build.status.summaryIcon = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stats.failed > 0) ? bitbucket.internal.build.status.failedBuildIcon({commitId: opt_data.commitId, clickable: true, results: opt_data.stats.results, isPlaceholder: opt_data.isPlaceholder, date: opt_data.date, title: '' + bitbucket.internal.build.status.title(opt_data)}) : (opt_data.stats.inProgress > 0) ? bitbucket.internal.build.status.inProgressBuildIcon({commitId: opt_data.commitId, clickable: true, results: opt_data.stats.results, isPlaceholder: opt_data.isPlaceholder, date: opt_data.date, title: '' + bitbucket.internal.build.status.title(opt_data)}) : (opt_data.stats.successful > 0) ? bitbucket.internal.build.status.successfulBuildIcon({commitId: opt_data.commitId, clickable: true, results: opt_data.stats.results, isPlaceholder: opt_data.isPlaceholder, date: opt_data.date, title: '' + bitbucket.internal.build.status.title(opt_data)}) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.summaryIcon.soyTemplateName = 'bitbucket.internal.build.status.summaryIcon';
}


bitbucket.internal.build.status.title = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stats.failed >= 1) ? soy.$$escapeHtml(AJS.format('{0} {0,choice,1#build|1\x3cbuilds} failed',opt_data.stats.failed)) : (opt_data.stats.inProgress >= 1) ? soy.$$escapeHtml(AJS.format('{0} {0,choice,1#build|1\x3cbuilds} in progress',opt_data.stats.inProgress)) : (opt_data.stats.successful >= 1) ? soy.$$escapeHtml(AJS.format('{0} {0,choice,1#build|1\x3cbuilds} passed',opt_data.stats.successful)) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.title.soyTemplateName = 'bitbucket.internal.build.status.title';
}


bitbucket.internal.build.status.dialogList = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.statuses.length == 0) {
    output += bitbucket.internal.widget.focusMessage.message({title: 'None found', text: 'There are no build results available for this commit.'});
  } else {
    output += '<ul class="build-status-list">';
    var statusList50 = opt_data.statuses;
    var statusListLen50 = statusList50.length;
    for (var statusIndex50 = 0; statusIndex50 < statusListLen50; statusIndex50++) {
      var statusData50 = statusList50[statusIndex50];
      output += '<li>';
      switch (statusData50.state) {
        case 'SUCCESSFUL':
          output += bitbucket.internal.build.status.successfulBuildIcon({content: 'Build successful', title: 'Build successful'});
          break;
        case 'FAILED':
          output += bitbucket.internal.build.status.failedBuildIcon({content: 'Build failed', title: 'Build failed'});
          break;
        case 'INPROGRESS':
          output += bitbucket.internal.build.status.inProgressBuildIcon({content: 'Build in progress', title: 'Build in progress'});
          break;
      }
      output += '<div class="summary" data-key="' + soy.$$escapeHtml(statusData50.key) + '"><span class="name"><a href="' + soy.$$escapeHtml(statusData50.url) + '" target="_blank" title="' + bitbucket.internal.build.status.buildName({status: statusData50}) + '">' + bitbucket.internal.build.status.buildName({status: statusData50}) + '</a></span>' + bitbucket.internal.widget.date.shortAge({date: statusData50.dateAdded, extraClasses: 'date-added'}) + '</div>' + bitbucket.internal.build.status.buildDescription({status: statusData50}) + '</li>';
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.dialogList.soyTemplateName = 'bitbucket.internal.build.status.dialogList';
}


bitbucket.internal.build.status.buildLabel = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.status) {
    case 'FAILED':
      output += soy.$$escapeHtml(AJS.format('{0,choice,1#build|1\x3cbuilds} failed',opt_data.count));
      break;
    case 'INPROGRESS':
      output += soy.$$escapeHtml(AJS.format('{0,choice,1#build|1\x3cbuilds} in progress',opt_data.count));
      break;
    case 'SUCCESSFUL':
      output += soy.$$escapeHtml(AJS.format('{0,choice,1#build|1\x3cbuilds}',opt_data.count));
      break;
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.buildLabel.soyTemplateName = 'bitbucket.internal.build.status.buildLabel';
}


bitbucket.internal.build.status.successfulBuildIcon = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.build.status.buildIcon(soy.$$augmentMap(opt_data, {iconClasses: 'aui-iconfont-approve successful-build-icon', status: 'SUCCESSFUL'}));
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.successfulBuildIcon.soyTemplateName = 'bitbucket.internal.build.status.successfulBuildIcon';
}


bitbucket.internal.build.status.failedBuildIcon = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.build.status.buildIcon(soy.$$augmentMap(opt_data, {iconClasses: 'aui-iconfont-error failed-build-icon', status: 'FAILED'}));
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.failedBuildIcon.soyTemplateName = 'bitbucket.internal.build.status.failedBuildIcon';
}


bitbucket.internal.build.status.inProgressBuildIcon = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.build.status.buildIcon(soy.$$augmentMap(opt_data, {iconClasses: 'aui-iconfont-time inprogress-build-icon', status: 'INPROGRESS'}));
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.inProgressBuildIcon.soyTemplateName = 'bitbucket.internal.build.status.inProgressBuildIcon';
}


bitbucket.internal.build.status.buildIcon = function(opt_data, opt_ignored) {
  var output = '';
  var url__soy106 = opt_data.clickable && opt_data.results && opt_data.results.length == 1 ? opt_data.results[0].url : null;
  var cssClassesContent__soy107 = 'aui-icon aui-icon-small build-icon ' + soy.$$escapeHtml(opt_data.iconClasses) + ' ' + ((opt_data.isPlaceholder) ? ' build-status-placeholder' : '');
  var attributesContent__soy114 = '' + ((opt_data.title) ? '  title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ((opt_data.commitId) ? '  data-commit-id="' + soy.$$escapeHtml(opt_data.commitId) + '"' : '') + ((opt_data.status) ? '  data-build-status="' + soy.$$escapeHtml(opt_data.status) + '"' : '') + ((opt_data.date) ? '  data-date="' + soy.$$escapeHtml(opt_data.date) + '"' : '');
  output += (! opt_data.clickable) ? '<span class="' + soy.$$escapeHtml(cssClassesContent__soy107) + '" ' + soy.$$filterNoAutoescape(attributesContent__soy114) + '>' + ((opt_data.content) ? soy.$$escapeHtml(opt_data.content) : '') + '</span>' : (url__soy106) ? '<a href="' + soy.$$escapeHtml(url__soy106) + '" class="' + soy.$$escapeHtml(cssClassesContent__soy107) + '" ' + soy.$$filterNoAutoescape(attributesContent__soy114) + '>' + ((opt_data.content) ? soy.$$escapeHtml(opt_data.content) : '') + '</a>' : '<button type="button" class="aui-button aui-button-link ' + soy.$$escapeHtml(cssClassesContent__soy107) + '" ' + soy.$$filterNoAutoescape(attributesContent__soy114) + '>' + ((opt_data.content) ? soy.$$escapeHtml(opt_data.content) : '') + '</button>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.buildIcon.soyTemplateName = 'bitbucket.internal.build.status.buildIcon';
}


bitbucket.internal.build.status.buildName = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.status.name ? opt_data.status.name : opt_data.status.key);
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.buildName.soyTemplateName = 'bitbucket.internal.build.status.buildName';
}


bitbucket.internal.build.status.buildDescription = function(opt_data, opt_ignored) {
  return '<div class="description" title="' + soy.$$escapeHtml(opt_data.status.description ? opt_data.status.description : '') + '">' + soy.$$escapeHtml(opt_data.status.description ? opt_data.status.description : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.buildDescription.soyTemplateName = 'bitbucket.internal.build.status.buildDescription';
}


bitbucket.internal.build.status.placeholder = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="build-status-placeholder hidden"' + ((opt_data.commitId) ? ' data-commit-id="' + soy.$$escapeHtml(opt_data.commitId) + '"' : '') + ((opt_data.date) ? ' data-last-updated="' + soy.$$escapeHtml(opt_data.date) + '"' : '') + '></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.placeholder.soyTemplateName = 'bitbucket.internal.build.status.placeholder';
}


bitbucket.internal.build.status.stats = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.build.status.statsPanel({stats: opt_data.stats, build: opt_data.stats.results && opt_data.stats.results.length == 1 ? opt_data.stats.results[0] : null});
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.stats.soyTemplateName = 'bitbucket.internal.build.status.stats';
}


bitbucket.internal.build.status.statsPanel = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stats.failed > 0) ? bitbucket.internal.build.status.summary({build: opt_data.build, buildIconContent: '' + bitbucket.internal.build.status.failedBuildIcon({clickable: true, results: opt_data.stats.results}), count: opt_data.stats.failed, status: 'FAILED'}) : (opt_data.stats.inProgress > 0) ? bitbucket.internal.build.status.summary({build: opt_data.build, buildIconContent: '' + bitbucket.internal.build.status.inProgressBuildIcon({clickable: true, results: opt_data.stats.results}), count: opt_data.stats.inProgress, status: 'INPROGRESS'}) : (opt_data.stats.successful > 0) ? bitbucket.internal.build.status.summary({build: opt_data.build, buildIconContent: '' + bitbucket.internal.build.status.successfulBuildIcon({clickable: true, results: opt_data.stats.results}), count: opt_data.stats.successful, status: 'SUCCESSFUL'}) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.statsPanel.soyTemplateName = 'bitbucket.internal.build.status.statsPanel';
}


bitbucket.internal.build.status.summary = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel({iconClass: 'aui-icon-small aui-iconfont-build', iconText: 'Build status', iconTooltip: 'Builds', linkClass: 'build-status-overview-link', linkHref: opt_data.build ? opt_data.build.url : null, linkExtraAttributes: opt_data.build ? 'data-single-build=true' : null, linkText: '' + bitbucket.internal.build.status.buildLabel(opt_data), count: opt_data.count, extraClasses: 'build-status-summary', extraContent: '' + soy.$$filterNoAutoescape(opt_data.buildIconContent)});
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.summary.soyTemplateName = 'bitbucket.internal.build.status.summary';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-build:build-status-panel-resources', location = '/bitbucket-plugin-build/internal/feature/build/status-panel/status-panel-context-provider.js' */
define("bitbucket-plugin-build/internal/feature/build/status-panel/status-panel-context-provider",["exports","bitbucket/internal/util/shortcuts","../common/build-status-common"],function(a,d,b){Object.defineProperty(a,"__esModule",{value:!0});a.fetchContext=function(a){c=a.commitId;(0,b.queryBuildStatusAndDecorate)(a,".build-status-placeholder",".build-status-summary .build-status-overview-link, .build-status-summary .build-icon",bitbucket.internal.build.status.stats)};var c=void 0;babelHelpers.interopRequireDefault(d).default.bind("showBuildDialog",
function(){(0,b.showDialogIfHasBuildStatus)(c)})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-build:build-status-pr-overview', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-build','key':'build-status-pr-overview','moduleKey':'build-status-pr-overview','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-build:build-status-pr-overview','weight':10.0,'context-provider':function(ctx) { return WebFragments._getValue((require('bitbucket-plugin-build/internal/feature/build/status-panel/status-panel-context-provider').fetchContext({ commitId: ctx['pullRequest'].fromRef.latestCommit, includeUnique: true })), ctx); },'params':{},'location':'bitbucket.pull-request.related-entities','view':function(ctx) { return WebFragments._getValue((bitbucket.internal.build.status.placeholder), ctx); }});;
;
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-expander', location = 'src/js/aui/expander.js' */
("undefined"===typeof window?global:window).__f165ad68f415362651d0d7f733fcdcea=function(){"use strict";var c=__77629c8e853846530dfdc3ccd3393ab6,d=c&&c.__esModule?c:{"default":c},e=(0,d.default)(document),f=function(a){var b={};b.$trigger=(0,d.default)(a.currentTarget);b.$content=e.find("#"+b.$trigger.attr("aria-controls"));b.triggerIsParent=0!==b.$content.parent().filter(b.$trigger).length;b.$shortContent=b.triggerIsParent?b.$trigger.find(".aui-expander-short-content"):null;b.height=b.$content.css("min-height");
b.isCollapsible=!1!==b.$trigger.data("collapsible");b.replaceText=b.$trigger.attr("data-replace-text");b.replaceSelector=b.$trigger.data("replace-selector");return b},g=function(a){if(a.replaceText){var b=a.replaceSelector?a.$trigger.find(a.replaceSelector):a.$trigger;a.$trigger.attr("data-replace-text",b.text());b.text(a.replaceText)}};e.on({"aui-expander-invoke":function(a){var a=(0,d.default)(a.currentTarget),b=e.find("#"+a.attr("aria-controls")),c=!1!==a.data("collapsible");"true"===b.attr("aria-expanded")&&
c?a.trigger("aui-expander-collapse"):a.trigger("aui-expander-expand")},"aui-expander-expand":function(a){a=f(a);"true"!==a.$content.attr("aria-expanded")&&(a.$content.attr("aria-expanded","true"),a.$trigger.attr("aria-expanded","true"),0<a.$content.outerHeight()&&a.$content.attr("aria-hidden","false"),g(a),a.triggerIsParent&&a.$shortContent.hide(),a.$trigger.trigger("aui-expander-expanded"))},"aui-expander-collapse":function(a){a=f(a);"true"===a.$content.attr("aria-expanded")&&(g(a),a.$content.attr("aria-expanded",
"false"),a.$trigger.attr("aria-expanded","false"),a.triggerIsParent&&a.$shortContent.show(),0===a.$content.outerHeight()&&a.$content.attr("aria-hidden","true"),a.$trigger.trigger("aui-expander-collapsed"))},"click.aui-expander":function(a){(0,d.default)(a.currentTarget).trigger("aui-expander-invoke",a.currentTarget)}},".aui-expander-trigger");return{}}.call(this);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web-api:pull-request-web-panels', location = '/static/bitbucket/feature/pull-request/pull-request-web-panels.soy' */
// This file was automatically generated from pull-request-web-panels.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.feature == 'undefined') { bitbucket.feature = {}; }
if (typeof bitbucket.feature.pullRequest == 'undefined') { bitbucket.feature.pullRequest = {}; }


bitbucket.feature.pullRequest.relatedEntitiesWebPanel = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel(opt_data);
};
if (goog.DEBUG) {
  bitbucket.feature.pullRequest.relatedEntitiesWebPanel.soyTemplateName = 'bitbucket.feature.pullRequest.relatedEntitiesWebPanel';
}


bitbucket.feature.pullRequest.linkWebPanel = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.summaryPanel.linkWebPanel(opt_data);
};
if (goog.DEBUG) {
  bitbucket.feature.pullRequest.linkWebPanel.soyTemplateName = 'bitbucket.feature.pullRequest.linkWebPanel';
}
;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-pr-analyzer-statistics-resources', location = '/soy/sonar-issues.soy' */
// This file was automatically generated from sonar-issues.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace plugin.page.sonar4stash.
 */

if (typeof plugin == 'undefined') { var plugin = {}; }
if (typeof plugin.page == 'undefined') { plugin.page = {}; }
if (typeof plugin.page.sonar4stash == 'undefined') { plugin.page.sonar4stash = {}; }


plugin.page.sonar4stash.sonarIssueHeader = function(opt_data, opt_ignored) {
  return '<div class="sonar-issue-marker-' + soy.$$escapeHtml(opt_data.issue.severity) + ' ' + ((opt_data.issue.status == 'RESOLVED') ? 'sonar-resolved' : '') + '" title="' + plugin.page.sonar4stash.sonarIssueDesc(opt_data) + '"></div><strong ' + ((opt_data.issue.status == 'RESOLVED') ? 'class="strike-through"' : '') + '>' + soy.$$escapeHtml(opt_data.issue.severity) + '</strong>&nbsp;' + ((opt_data.issue.type == 'CODE_SMELL') ? '<div class="sonar-issue-type sonar-code-smell" title="' + soy.$$escapeHtml('Code smell: a maintainability-related issue in the code') + '"></div>' : (opt_data.issue.type == 'VULNERABILITY') ? '<div class="sonar-issue-type sonar-vulnerability" title="' + soy.$$escapeHtml('Vulnerability: a security-related issue which represents a potential backdoor for attackers') + '"></div>' : (opt_data.issue.type == 'BUG') ? '<div class="sonar-issue-type sonar-bug" title="' + soy.$$escapeHtml('Bug: an issue that represents something wrong in the code') + '"></div>' : '') + ((opt_data.issue.type) ? '<strong ' + ((opt_data.issue.status == 'RESOLVED') ? 'class="strike-through"' : '') + '>' + soy.$$escapeHtml(opt_data.issue.type) + '</strong>&nbsp;' : '') + '<br><span ' + ((opt_data.issue.status == 'RESOLVED') ? 'class="strike-through"' : '') + '>' + soy.$$escapeHtml(opt_data.issue.message) + '</span>';
};
if (goog.DEBUG) {
  plugin.page.sonar4stash.sonarIssueHeader.soyTemplateName = 'plugin.page.sonar4stash.sonarIssueHeader';
}


plugin.page.sonar4stash.sonarIssueDesc = function(opt_data, opt_ignored) {
  return '' + ((opt_data.issue.severity == 'CRITICAL') ? soy.$$escapeHtml('Critical: must be reviewed immediately and fixed soon') : (opt_data.issue.severity == 'BLOCKER') ? soy.$$escapeHtml('Blocker: must be fixed immediately') : (opt_data.issue.severity == 'MAJOR') ? soy.$$escapeHtml('Major: high potential for significant to moderate impact') : (opt_data.issue.severity == 'MINOR') ? soy.$$escapeHtml('Minor: potential for moderate to minor impact') : (opt_data.issue.severity == 'INFO') ? soy.$$escapeHtml('Info: neither a bug nor a quality flaw, just a finding') : '');
};
if (goog.DEBUG) {
  plugin.page.sonar4stash.sonarIssueDesc.soyTemplateName = 'plugin.page.sonar4stash.sonarIssueDesc';
}


plugin.page.sonar4stash.sonarIssuePanel = function(opt_data, opt_ignored) {
  var output = '<nav class="aui-navgroup aui-navgroup-vertical sonar-issue-panel"><div class="aui-navgroup-inner comment-container">';
  var issueList62 = opt_data.issues;
  var issueListLen62 = issueList62.length;
  for (var issueIndex62 = 0; issueIndex62 < issueListLen62; issueIndex62++) {
    var issueData62 = issueList62[issueIndex62];
    output += '<ul class="aui-nav comment" style="border-top: 0px"><li>' + plugin.page.sonar4stash.sonarIssueHeader({issue: issueData62}) + '<br><ul class="actions"><li><a class="edit" href="' + soy.$$escapeHtml(issueData62.detailUrl) + '" title="Shows details about this issue in SonarQube">Details</a></li><li><a href="' + soy.$$escapeHtml(issueData62.fileUrl) + '" title="Shows details about the current file in SonarQube">File</a></li><li><a href="' + soy.$$escapeHtml(issueData62.ruleUrl) + '" title="Shows details about the rule for this issue in SonarQube">Rule</a></li>' + ((opt_data.commentFeatureAvailable) ? '<li><a href="#" title="Creates a pull request task for this issue" data-issue-comment="' + soy.$$escapeHtml(issueData62.message) + '" data-issue-line="' + soy.$$escapeHtml(issueData62.line) + '" class="sonar4stash-create-task">Create task</a></li>' : '') + ((opt_data.commentFeatureAvailable) ? '<li><a href="#" title="Creates a comment for this issue"  data-issue-comment="' + soy.$$escapeHtml(issueData62.message) + '" data-issue-line="' + soy.$$escapeHtml(issueData62.line) + '" class="sonar4stash-create-comment">Comment</a></li>' : '') + ((issueData62.status != 'RESOLVED') ? '<li><a href="#" title="Marks this issue as resolved" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" class="sonar4stash-resolve">Fixed</a></li><li><a href="#" title="Marks this issue as a won\'t fix" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" class="sonar4stash-wont-fix">Won\'t fix</a></li><li><a href="#" title="Marks this issue as a false positive" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" class="sonar4stash-false-positive">False positive</a></li>' : (issueData62.status == 'RESOLVED') ? '<li><a href="#" title="Marks this issue as reopened" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" class="sonar4stash-unresolve">Re-open (' + soy.$$escapeHtml(issueData62.resolution) + ')</a></li>' : '') + ((issueData62.status != 'RESOLVED' && issueData62.status != 'CONFIRMED') ? '<li><a href="#" title="Marks this issue as confirmed" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" class="sonar4stash-confirm">Confirm</a></li>' : (issueData62.status != 'RESOLVED' && issueData62.status == 'CONFIRMED') ? '<li><a href="#" title="Un-confirm this issue" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" class="sonar4stash-unconfirm">Un-confirm</a></li>' : '') + '</ul><br><ul class="actions"><li><label for="sonarIssueSeverity">Severity: </label><select class="sonarIssueSeverity" name="sonarIssueSeverity" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '"><option value="BLOCKER" ' + soy.$$escapeHtml(issueData62.severity == 'BLOCKER' ? 'selected' : '') + '>Blocker</option><option value="CRITICAL" ' + soy.$$escapeHtml(issueData62.severity == 'CRITICAL' ? 'selected' : '') + '>Critical</option><option value="MAJOR" ' + soy.$$escapeHtml(issueData62.severity == 'MAJOR' ? 'selected' : '') + '>Major</option><option value="MINOR" ' + soy.$$escapeHtml(issueData62.severity == 'MINOR' ? 'selected' : '') + '>Minor</option><option value="INFO" ' + soy.$$escapeHtml(issueData62.severity == 'INFO' ? 'selected' : '') + '>Info</option></select></li>' + ((opt_data.issueTypesAvailable) ? '<li><label for="sonarIssueType">Type: </label><select class="sonarIssueType" name="sonarIssueType" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '"><option value="CODE_SMELL" ' + soy.$$escapeHtml(issueData62.type == 'CODE_SMELL' ? 'selected' : '') + '>Code smell</option><option value="VULNERABILITY" ' + soy.$$escapeHtml(issueData62.type == 'VULNERABILITY' ? 'selected' : '') + '>Vulnerability</option><option value="BUG" ' + soy.$$escapeHtml(issueData62.type == 'BUG' ? 'selected' : '') + '>Bug</option></select></li>' : '') + '<li><label for="sonarIssueAssignee">Assignee: </label><input type="text" name="sonarIssueAssignee" class="sonarIssueAssignee" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" value="' + soy.$$escapeHtml(issueData62.assignee) + '"></li>' + ((opt_data.tagsAvailable) ? '<li><label for="sonarTags">Tags: </label><input type="text" name="sonarTags" class="text sonarTags" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" value="' + soy.$$escapeHtml(issueData62.tags) + '"></li>' : '') + '</ul><br><ul class="actions"><li><p title="Technical debt of this issue" class="times">Debt: ' + ((issueData62.debt) ? soy.$$escapeHtml(issueData62.debt) : 'n/a') + '</p></li><li><p title="Creation date of this issue" class="times">Created: ' + soy.$$escapeHtml(issueData62.creationDate) + '</p></li>' + ((issueData62.updateDate) ? '<li><p title="Last update of this issue" class="times">Updated: ' + soy.$$escapeHtml(issueData62.updateDateShortFormat) + '</p></li>' : '') + ((issueData62.squid) ? '<li><p title="Squid Rule ID" class="times">&nbsp;' + soy.$$escapeHtml(issueData62.squid) + '</p></li>' : '') + '</ul></li></ul>';
  }
  output += '</div></nav>';
  return output;
};
if (goog.DEBUG) {
  plugin.page.sonar4stash.sonarIssuePanel.soyTemplateName = 'plugin.page.sonar4stash.sonarIssuePanel';
}
;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-pr-analyzer-statistics-resources', location = '/soy/sonar-statistics-view.soy' */
// This file was automatically generated from sonar-statistics-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace ch.mibex.stash.sonar4stash.
 */

if (typeof ch == 'undefined') { var ch = {}; }
if (typeof ch.mibex == 'undefined') { ch.mibex = {}; }
if (typeof ch.mibex.stash == 'undefined') { ch.mibex.stash = {}; }
if (typeof ch.mibex.stash.sonar4stash == 'undefined') { ch.mibex.stash.sonar4stash = {}; }


ch.mibex.stash.sonar4stash.prAnalyzerStatisticsPanel = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.error) {
    output += (opt_data.error.url) ? '<div class="aui-message aui-message-info"><p class="title"><strong>Sonar data unavailable</strong></p><p>' + soy.$$escapeHtml(opt_data.error.error) + ' <a href="' + soy.$$escapeHtml(opt_data.error.url) + '">repository settings</a>.</p></div>' : '<div class="aui-message aui-message-error"><p class="title"><strong>An error occurred while getting data from Sonar</strong></p><p>' + soy.$$filterNoAutoescape(opt_data.error.error) + '</p></div>';
  } else {
    output += ((opt_data.statistics.warning) ? aui.message.warning({title: 'Evaluation license expiry', closeable: 'true', id: 'licenseWarning', content: '<p>' + soy.$$escapeHtml(opt_data.statistics.warning) + '</p>'}) : '') + ((opt_data.statistics.isPossiblyOutdated) ? aui.message.warning({title: 'Sonar analysis might be outdated', closeable: 'false', id: 'outdatedWarning', content: '<p><strong>Sonar analysis might be outdated:</strong> Because a build is either in-progress or the last one failed, the Sonar statistics are possibly outdated and issues shown in files can be out of sync.</p>'}) : '');
    if (opt_data.statistics.showQualityGates && opt_data.statistics.qualityGates && opt_data.statistics.qualityGates.qualityGateStatus) {
      output += '<div class="aui-message aui-message-' + soy.$$escapeHtml(opt_data.statistics.qualityGates.qualityGateStatus) + '"><p class="title"><strong><a href="' + soy.$$escapeHtml(opt_data.statistics.projectDashboardUrl) + '">' + soy.$$escapeHtml(opt_data.statistics.name) + '</a>&nbsp;' + ((opt_data.statistics.qualityGates.qualityGateStatus == 'error') ? 'failed these quality gates:' : (opt_data.statistics.qualityGates.qualityGateStatus == 'warning') ? 'has warnings on these quality gates:' : 'has passed all quality gates.') + '</strong></p>';
      var gateList53 = opt_data.statistics.qualityGates.qualityGates;
      var gateListLen53 = gateList53.length;
      for (var gateIndex53 = 0; gateIndex53 < gateListLen53; gateIndex53++) {
        var gateData53 = gateList53[gateIndex53];
        output += (gateData53.alertType == 'ERROR') ? '<span class="aui-lozenge aui-lozenge-error">' + soy.$$escapeHtml(gateData53.alertText) + '</span>' : (gateData53.alertType == 'WARN') ? '<span class="aui-lozenge aui-lozenge-current">' + soy.$$escapeHtml(gateData53.alertText) + '</span>' : '';
      }
      output += '</div>';
    }
    output += ((opt_data.statistics.mode == 'BRANCH_DIFF' && opt_data.statistics.isSourceBranchBehindTarget > 0) ? '<div class="aui-message aui-message-warning warning"><div class="alertbox"><span class="alert-warning">Your source branch <strong>' + soy.$$escapeHtml(opt_data.statistics.name) + '</strong> is ' + soy.$$escapeHtml(opt_data.statistics.isSourceBranchBehindTarget) + ' commits behind <strong>' + soy.$$escapeHtml(opt_data.statistics.otherName) + '</strong>. The shown Sonar statistics might not be accurate. Please update your source branch.</span></div></div>' : '') + ((opt_data.statistics.statistics) ? '<table class="aui sonar-statistics"><thead><tr><th colspan="2" id="metric" style="padding: 0"><span class="alignleft"><a href="#" title="Collapse/uncollapse statistics" class="collapse-statistics"><span class="aui-icon aui-icon-small aui-iconfont-arrows-up"></span></a>Sonar:</span><span class="alignright"><a href="#" class="issueOverview" title="The issue count can be different from what SonarQube reports because by default only the issues in the pull request diff (i.e. changed/new code lines) are counted.">' + soy.$$escapeHtml(opt_data.statistics.metrics.issuesByTypeInPr.violations) + '</a><span style="font-weight: normal;">&nbsp;' + ((opt_data.statistics.metrics.issuesByTypeInPr.violations == 1) ? 'issue' : 'issues') + '</span>&nbsp;&nbsp;<a id="sonar-refresh-statistics" href="#"><span class="aui-icon aui-icon-small aui-iconfont-build" title="Refresh statistics from SonarQube"></span><a/></span></th></tr></thead><tbody><tr ' + ((opt_data.statistics.metrics.lastAnalysisFrom) ? 'style="border-bottom: 0px;"' : '') + '><td colspan="2" headers="metric"><span class="alignleft">Branch</span><span class="alignright"><a title="' + soy.$$escapeHtml(opt_data.statistics.name) + '" href="' + soy.$$escapeHtml(opt_data.statistics.projectDashboardUrl) + '">' + soy.$$truncate(soy.$$escapeHtml(opt_data.statistics.name), 25, true) + '</a></span></td></tr>' + ((opt_data.statistics.metrics.lastAnalysisFrom) ? '<tr><td colspan="2" headers="metric"><span class="alignleft">Last analysis</span><span class="alignright"><time title="' + soy.$$escapeHtml(opt_data.statistics.metrics.lastAnalysisFrom.full) + '" datetime="' + soy.$$escapeHtml(opt_data.statistics.metrics.lastAnalysisFrom.dateTime) + '" class="creation-date">' + soy.$$escapeHtml(opt_data.statistics.metrics.lastAnalysisFrom.shortAge) + '</time></span></td></tr>' : '') + ((opt_data.statistics.newIssuesDate) ? '<tr><td colspan="2" headers="metric"><span class="alignleft">Only issues since</span><span class="alignright"><time title="' + soy.$$escapeHtml(opt_data.statistics.newIssuesDate.full) + '" datetime="' + soy.$$escapeHtml(opt_data.statistics.newIssuesDate.dateTime) + '" class="creation-date">' + soy.$$escapeHtml(opt_data.statistics.newIssuesDate.shortAge) + '</time></span></td></tr>' : '') + ((opt_data.statistics.sonarVersionGt55) ? '<tr style="border-bottom: 0px;"><td headers="metric"><table class="sonar-statistics"><tr><td>Issues</td><td><a href="#" class="issueOverview" title="The issue count can be different from what SonarQube reports because by default only the issues in the pull request diff (i.e. changed/new code lines) are counted.">' + soy.$$escapeHtml(opt_data.statistics.metrics.issuesByTypeInPr.violations) + '</a></td></tr></table></td><td headers="value"><table class="sonar-statistics"><tr><td><span class="sonar-issue-type sonar-bug" title="' + soy.$$escapeHtml('Bug: an issue that represents something wrong in the code') + '"></span></td><td>' + ((opt_data.statistics.metrics.issuesByTypeInPr.bugs != null) ? '<a href="#" class="issueOverview" data-issue-type="bug">' + soy.$$escapeHtml(opt_data.statistics.metrics.issuesByTypeInPr.bugs) + '</a>' : 'n/a') + '</td></tr></table></td></tr><tr style="border-bottom: 0px;"><td headers="metric"><table class="sonar-statistics"><tr><td><span class="sonar-issue-type sonar-vulnerability" title="' + soy.$$escapeHtml('Vulnerability: a security-related issue which represents a potential backdoor for attackers') + '"></span></td><td>' + ((opt_data.statistics.metrics.issuesByTypeInPr.vulnerabilities != null) ? '<a href="#" class="issueOverview" data-issue-type="vulnerability">' + soy.$$escapeHtml(opt_data.statistics.metrics.issuesByTypeInPr.vulnerabilities) + '</a>' : 'n/a') + '</td></tr></table></td><td headers="value"><table class="sonar-statistics"><tr><td><span class="sonar-issue-type sonar-code-smell" title="' + soy.$$escapeHtml('Code smell: a maintainability-related issue in the code') + '"></span></td><td>' + ((opt_data.statistics.metrics.issuesByTypeInPr.codeSmells != null) ? '<a href="#" class="issueOverview" data-issue-type="code-smell">' + soy.$$escapeHtml(opt_data.statistics.metrics.issuesByTypeInPr.codeSmells) + '</a>' : 'n/a') + '</td></tr></table></td></tr>' : '<tr style="border-bottom: 0px;"><td headers="metric"><table class="sonar-statistics"><tr><td>Issues</td><td><a href="#" class="issueOverview" title="The issue count can be different from what SonarQube reports because by default only the issues in the pull request diff (i.e. changed/new code lines) are counted.">' + soy.$$escapeHtml(opt_data.statistics.metrics.issuesBySeverityInPr.violations) + '</a></td></tr></table></td><td headers="value">' + ((opt_data.statistics.metrics.issuesBySeverityInPr.criticalViolations != null) ? '<table class="sonar-statistics"><tr><td><span class="sonar-issue-marker-BLOCKER" title="' + soy.$$escapeHtml('Blocker: must be fixed immediately') + '"></span></td><td>' + soy.$$escapeHtml(opt_data.statistics.metrics.issuesBySeverityInPr.blockerViolations) + '</td></tr></table>' : '') + '</td></tr>' + ((opt_data.statistics.metrics.issuesBySeverityInPr.criticalViolations != null || opt_data.statistics.metrics.issuesBySeverityInPr.majorViolations != null) ? '<tr style="border-bottom: 0px;"><td headers="metric">' + ((opt_data.statistics.metrics.issuesBySeverityInPr.criticalViolations != null) ? '<table class="sonar-statistics"><tr><td><span class="sonar-issue-marker-CRITICAL" title="' + soy.$$escapeHtml('Critical: must be reviewed immediately and fixed soon') + '"></span></td><td>' + soy.$$escapeHtml(opt_data.statistics.metrics.issuesBySeverityInPr.criticalViolations) + '</td></tr></table>' : '') + '</td><td headers="value">' + ((opt_data.statistics.metrics.issuesBySeverityInPr.majorViolations != null) ? '<table class="sonar-statistics"><tr><td><span class="sonar-issue-marker-MAJOR" title="' + soy.$$escapeHtml('Major: high potential for significant to moderate impact') + '"></span></td><td>' + soy.$$escapeHtml(opt_data.statistics.metrics.issuesBySeverityInPr.majorViolations) + '</td></tr></table>' : '') + '</td></tr>' : '') + ((opt_data.statistics.metrics.issuesBySeverityInPr.minorViolations != null || opt_data.statistics.metrics.issuesBySeverityInPr.infoViolations != null) ? '<tr style="border-bottom: 0px;"><td headers="value">' + ((opt_data.statistics.metrics.issuesBySeverityInPr.minorViolations != null) ? '<table class="sonar-statistics"><tr><td><span class="sonar-issue-marker-MINOR" title="' + soy.$$escapeHtml('Minor: potential for moderate to minor impact') + '"></span></td><td>' + soy.$$escapeHtml(opt_data.statistics.metrics.issuesBySeverityInPr.minorViolations) + '</td></tr></table>' : '') + '</td><td headers="metric">' + ((opt_data.statistics.metrics.issuesBySeverityInPr.infoViolations != null) ? '<table class="sonar-statistics"><tr><td><span class="sonar-issue-marker-INFO" title="' + soy.$$escapeHtml('Info: neither a bug nor a quality flaw, just a finding') + '"></span></td><td>' + soy.$$escapeHtml(opt_data.statistics.metrics.issuesBySeverityInPr.infoViolations) + '</td></tr></table>' : '') + '</td><td headers="value"></td></tr>' : '')) + '<tr ' + ((! opt_data.statistics.sonarVersionGt74 && opt_data.statistics.mode == 'INCREMENTAL') ? 'style="border-bottom: 0px;"' : '') + '><td colspan="2" headers="metric"><span class="footnote-text">The numbers represent the actual issues in this pull request (i.e. issues on changed/new code lines)</span></td></tr>' + ((opt_data.statistics.mode == 'BRANCH_DIFF' || opt_data.statistics.mode == 'LEAK_PERIOD' || opt_data.statistics.sonarVersionGt74 && opt_data.statistics.mode == 'INCREMENTAL') ? '<tr style="border-bottom: 0px;"><td colspan="2">Branch statistics<br>' + ch.mibex.stash.sonar4stash.renderBranchStats({statistics: opt_data.statistics, isIncremental: opt_data.statistics.sonarVersionGt74 && opt_data.statistics.mode == 'INCREMENTAL', isRepoSourcePage: false}) + '</td></tr>' : '') + '<tr><td colspan="2" headers="metric">' + ((opt_data.statistics.mode == 'BRANCH_DIFF') ? '<span class="footnote-text">Branch-based mode (&Delta; between <a href="' + soy.$$escapeHtml(opt_data.statistics.projectDashboardUrl) + '">' + soy.$$escapeHtml(opt_data.statistics.name) + '</a> and <a href="' + soy.$$escapeHtml(opt_data.statistics.otherProjectDashboardUrl) + '">' + soy.$$escapeHtml(opt_data.statistics.otherName) + '</a>)</span><br>' : (opt_data.statistics.mode == 'LEAK_PERIOD') ? '<span class="footnote-text">Leak-period mode (since previous version from ' + soy.$$escapeHtml(opt_data.statistics.metrics.leakPeriod ? opt_data.statistics.metrics.leakPeriod.date.shortAge : '?') + ')</span><br>' : '') + '</td></tr></tbody></table>' : '');
  }
  output += '<br>';
  return output;
};
if (goog.DEBUG) {
  ch.mibex.stash.sonar4stash.prAnalyzerStatisticsPanel.soyTemplateName = 'ch.mibex.stash.sonar4stash.prAnalyzerStatisticsPanel';
}


ch.mibex.stash.sonar4stash.prAnalyzerStatisticsPanelEmpty = function(opt_data, opt_ignored) {
  return '<div id="sonar4stash-statistics"><aui-spinner></aui-spinner><span class="aui-icon aui-icon-wait"></span>&nbsp;Fetching data from SonarQube...</div>';
};
if (goog.DEBUG) {
  ch.mibex.stash.sonar4stash.prAnalyzerStatisticsPanelEmpty.soyTemplateName = 'ch.mibex.stash.sonar4stash.prAnalyzerStatisticsPanelEmpty';
}
;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-pr-analyzer-statistics-resources', location = '/soy/branch-statistics.soy' */
// This file was automatically generated from branch-statistics.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace ch.mibex.stash.sonar4stash.
 */

if (typeof ch == 'undefined') { var ch = {}; }
if (typeof ch.mibex == 'undefined') { ch.mibex = {}; }
if (typeof ch.mibex.stash == 'undefined') { ch.mibex.stash = {}; }
if (typeof ch.mibex.stash.sonar4stash == 'undefined') { ch.mibex.stash.sonar4stash = {}; }


ch.mibex.stash.sonar4stash.abs = function(opt_data, opt_ignored) {
  return '' + ((opt_data.value < 0) ? soy.$$escapeHtml(-1 * opt_data.value) : soy.$$escapeHtml(opt_data.value));
};
if (goog.DEBUG) {
  ch.mibex.stash.sonar4stash.abs.soyTemplateName = 'ch.mibex.stash.sonar4stash.abs';
}


ch.mibex.stash.sonar4stash.double2score = function(opt_data, opt_ignored) {
  return '' + ((opt_data.value < 2.0) ? 'A' : (opt_data.value < 3.0) ? 'B' : (opt_data.value < 4.0) ? 'C' : (opt_data.value < 5.0) ? 'D' : 'E');
};
if (goog.DEBUG) {
  ch.mibex.stash.sonar4stash.double2score.soyTemplateName = 'ch.mibex.stash.sonar4stash.double2score';
}


ch.mibex.stash.sonar4stash.int2sizeRating = function(opt_data, opt_ignored) {
  return '' + ((opt_data.value != null) ? (opt_data.value < 1000) ? 'XS' : (opt_data.value < 10000) ? 'S' : (opt_data.value < 100000) ? 'M' : (opt_data.value < 500000) ? 'L' : (opt_data.value >= 500000) ? 'XL' : '' : '?');
};
if (goog.DEBUG) {
  ch.mibex.stash.sonar4stash.int2sizeRating.soyTemplateName = 'ch.mibex.stash.sonar4stash.int2sizeRating';
}


ch.mibex.stash.sonar4stash.formatTechnicalDebt = function(opt_data, opt_ignored) {
  var output = '';
  var absValue__soy37 = '' + ch.mibex.stash.sonar4stash.abs({value: opt_data.valueInMinutes});
  output += (absValue__soy37 < 60) ? soy.$$escapeHtml(opt_data.valueInMinutes) + 'm' : (absValue__soy37 < 480) ? soy.$$escapeHtml(Math.floor(opt_data.valueInMinutes / 60)) + 'h ' + ((opt_data.valueInMinutes % 60 > 0) ? soy.$$escapeHtml(opt_data.valueInMinutes % 60) + 'm' : '') : (! opt_data.valueInMinutes) ? 'n/a' : soy.$$escapeHtml(Math.floor(opt_data.valueInMinutes / 480)) + 'd ' + ((opt_data.valueInMinutes % 480 > 0) ? soy.$$escapeHtml(Math.floor(opt_data.valueInMinutes % 480 / 60)) + 'h' : '');
  return output;
};
if (goog.DEBUG) {
  ch.mibex.stash.sonar4stash.formatTechnicalDebt.soyTemplateName = 'ch.mibex.stash.sonar4stash.formatTechnicalDebt';
}


ch.mibex.stash.sonar4stash.renderMetric = function(opt_data, opt_ignored) {
  return '' + ((opt_data.metric) ? (opt_data.colorDelta && opt_data.metric > 0) ? '<span class="text-' + soy.$$escapeHtml(opt_data.negativeIsGood ? 'danger' : 'success') + '">+' + soy.$$escapeHtml(Math.round(opt_data.metric * 10) / 10) + ((opt_data.isPercentage) ? '%' : '') + '</span>' : (opt_data.colorDelta && opt_data.metric < 0) ? '<span class="text-' + soy.$$escapeHtml(opt_data.negativeIsGood ? 'success' : 'danger') + '">' + soy.$$escapeHtml(Math.round(opt_data.metric * 10) / 10) + ((opt_data.isPercentage) ? '%' : '') + '</span>' : soy.$$escapeHtml(Math.round(opt_data.metric * 10) / 10) : (! opt_data.isIncremental) ? ((opt_data.colorDelta) ? '+' : '') + '0' + ((opt_data.isPercentage) ? '%' : '') : '');
};
if (goog.DEBUG) {
  ch.mibex.stash.sonar4stash.renderMetric.soyTemplateName = 'ch.mibex.stash.sonar4stash.renderMetric';
}


ch.mibex.stash.sonar4stash.renderBranchStats = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.isRepoSourcePage && ! opt_data.isIncremental) {
    output += '<nav class="aui-navgroup sonar">' + ((opt_data.statistics.isPossiblyOutdated) ? aui.message.warning({title: 'Sonar analysis might be outdated', closeable: 'false', id: 'outdatedWarning', content: '<p><strong>Sonar analysis might be outdated:</strong> Because a build is either in-progress or the last one failed, the Sonar statistics are possibly outdated and issues shown in files can be out of sync.</p>'}) + '<br>' : '') + '<strong><a href="' + soy.$$escapeHtml(opt_data.statistics.projectDashboardUrl) + '">' + soy.$$escapeHtml(opt_data.statistics.name) + '</a>&nbsp;</strong>' + ((opt_data.statistics.qualityGates.qualityGateStatus == 'success') ? '<span class="aui-lozenge aui-lozenge-success">has passed</span>' : '') + ((opt_data.statistics.metrics.lastAnalysisFrom) ? '<span class="alignright">Last analysis: <time title="' + soy.$$escapeHtml(opt_data.statistics.metrics.lastAnalysisFrom.full) + '" datetime="' + soy.$$escapeHtml(opt_data.statistics.metrics.lastAnalysisFrom.dateTime) + '" class="creation-date">' + soy.$$escapeHtml(opt_data.statistics.metrics.lastAnalysisFrom.shortAge) + '</time></span>' : '');
    var gateList122 = opt_data.statistics.qualityGates.qualityGates;
    var gateListLen122 = gateList122.length;
    for (var gateIndex122 = 0; gateIndex122 < gateListLen122; gateIndex122++) {
      var gateData122 = gateList122[gateIndex122];
      output += (gateData122.alertType == 'ERROR') ? '&nbsp;<span class="aui-lozenge aui-lozenge-error">' + soy.$$escapeHtml(gateData122.alertText) + '</span>&nbsp;' : (gateData122.alertType == 'WARN') ? '&nbsp;<span class="aui-lozenge aui-lozenge-current">' + soy.$$escapeHtml(gateData122.alertText) + '</span>&nbsp;' : '';
    }
  }
  output += '<div class="aui-group">' + ((opt_data.isIncremental) ? '<div class="aui-item"><div class="stat-column"><h5>Coverage</h5><div id="coverage-chart" style="margin:auto;"></div><div class="footnote-text">' + ch.mibex.stash.sonar4stash.renderMetric({metric: null, colorDelta: true, negativeIsGood: false, isPercentage: true, isIncremental: true}) + '</div></div></div><!-- if duplicate code statistics is available in SQ 7.5, add it here --><div class="aui-item"></div><div class="aui-item"></div>' : '') + ((opt_data.statistics.sonarVersionGt55 && ! opt_data.isIncremental) ? '<div class="aui-item"><div class="score-column"><h5>Reliability</h5><div><span class="score score-' + ch.mibex.stash.sonar4stash.double2score({value: opt_data.statistics.metrics.reliabilityRating}) + '">' + ch.mibex.stash.sonar4stash.double2score({value: opt_data.statistics.metrics.reliabilityRating}) + '</span></div><div class="aui-item"><div class="stat-column"><div><a class="footnote-text" href="' + soy.$$escapeHtml(opt_data.statistics.issuesUrlPrefixWithoutDateDelta) + 'BUG">' + ch.mibex.stash.sonar4stash.renderMetric({metric: opt_data.statistics.metrics.issuesByTypeInBranch.bugs, colorDelta: false, negativeIsGood: false, isPercentage: false}) + '</a> <span id="bugs-title" class="footnote-text">bugs</span></div><div class="footnote-text">' + ch.mibex.stash.sonar4stash.renderMetric({metric: opt_data.statistics.metrics.issuesByTypeInBranch.newBugs, colorDelta: true, negativeIsGood: true, isPercentage: false}) + '</div></div></div></div></div><div class="aui-item"><div class="score-column"><h5>Security</h5><div><span class="score score-' + ch.mibex.stash.sonar4stash.double2score({value: opt_data.statistics.metrics.securityRating}) + '">' + ch.mibex.stash.sonar4stash.double2score({value: opt_data.statistics.metrics.securityRating}) + '</span></div><div class="aui-item"><div class="stat-column"><div><a class="footnote-text" href="' + soy.$$escapeHtml(opt_data.statistics.issuesUrlPrefixWithoutDateDelta) + 'VULNERABILITY">' + ch.mibex.stash.sonar4stash.renderMetric({metric: opt_data.statistics.metrics.issuesByTypeInBranch.vulnerabilities, colorDelta: false, negativeIsGood: false, isPercentage: false}) + '</a> <span id="bugs-title" class="footnote-text">vulnerabilities</span></div><div class="footnote-text">' + ch.mibex.stash.sonar4stash.renderMetric({metric: opt_data.statistics.metrics.issuesByTypeInBranch.newVulnerabilities, colorDelta: true, negativeIsGood: true, isPercentage: false}) + '</div></div></div></div></div>' + ((! opt_data.isRepoSourcePage && ! opt_data.isIncremental) ? '</div>' : '') : '') + ((! opt_data.isRepoSourcePage && ! opt_data.isIncremental) ? '<div class="aui-group">' : '') + ((! opt_data.isIncremental) ? '<div class="aui-item"><div class="score-column"><h5>Maintainability</h5><div><span class="score score-' + ch.mibex.stash.sonar4stash.double2score({value: opt_data.statistics.metrics.maintainabilityRating}) + '">' + ch.mibex.stash.sonar4stash.double2score({value: opt_data.statistics.metrics.maintainabilityRating}) + '</span></div>' + ((opt_data.statistics.sonarVersionGt55 && ! opt_data.isIncremental) ? '<div class="aui-item"><div class="stat-column"><div><a class="footnote-text" href="' + soy.$$escapeHtml(opt_data.statistics.issuesUrlPrefixWithoutDateDelta) + 'CODE_SMELL">' + ch.mibex.stash.sonar4stash.renderMetric({metric: opt_data.statistics.metrics.issuesByTypeInBranch.codeSmells, colorDelta: false, negativeIsGood: false, isPercentage: false}) + '</a> <span id="bugs-title" class="footnote-text">code smells</span></div><div class="footnote-text">' + ch.mibex.stash.sonar4stash.renderMetric({metric: opt_data.statistics.metrics.issuesByTypeInBranch.newCodeSmells, colorDelta: true, negativeIsGood: true, isPercentage: false}) + '</div></div></div>' : '') + '</div></div><div class="aui-item"><div class="stat-column"><h5>Coverage</h5><div id="coverage-chart" style="margin:auto;"></div><div class="footnote-text">' + ch.mibex.stash.sonar4stash.renderMetric({metric: opt_data.isIncremental ? null : opt_data.statistics.metrics.utCoverageNewCode, colorDelta: true, negativeIsGood: false, isPercentage: true}) + '</div></div></div>' : '') + ((! opt_data.isRepoSourcePage && ! opt_data.isIncremental) ? '</div><div class="aui-group">' : '') + ((! opt_data.isIncremental) ? '<div class="aui-item"><div class="stat-column"><h5>Duplications</h5><div id="duplications-chart" style="margin:auto;"></div><div class="footnote-text">' + ch.mibex.stash.sonar4stash.renderMetric({metric: opt_data.statistics.metrics.newDuplicatedLinesDensity, colorDelta: true, negativeIsGood: true, isPercentage: true}) + '</div></div></div><div class="aui-item"><div class="score-column"><h5>Size</h5><div><span class="score score-' + ch.mibex.stash.sonar4stash.int2sizeRating({value: opt_data.statistics.metrics.linesOfCode}) + ' score-size">' + ch.mibex.stash.sonar4stash.int2sizeRating({value: opt_data.statistics.metrics.linesOfCode}) + '</span></div><div class="aui-item"><div class="stat-column"><div><a class="footnote-text" href="' + ((opt_data.statistics.newDashboardUrls) ? (opt_data.statistics.useBranchingFeature) ? soy.$$escapeHtml(opt_data.statistics.sonarServer) + '/component_measures/metric/ncloc/list?id=' + soy.$$escapeHtml(opt_data.statistics.projectKey) + '&branch=' + soy.$$escapeHtml(opt_data.statistics.branchKey) : soy.$$escapeHtml(opt_data.statistics.sonarServer) + '/component_measures/metric/ncloc/list?id=' + soy.$$escapeHtml(opt_data.statistics.fullProjectKey) : soy.$$escapeHtml(opt_data.statistics.sonarServer) + '/drilldown/measures?metric=ncloc&id=' + soy.$$escapeHtml(opt_data.statistics.fullProjectKey)) + '">' + ch.mibex.stash.sonar4stash.renderMetric({metric: opt_data.statistics.metrics.linesOfCode, colorDelta: false, negativeIsGood: false, isPercentage: false}) + '</a> <span id="bugs-title" class="footnote-text">LOCs</span></div><div class="footnote-text">' + ch.mibex.stash.sonar4stash.renderMetric({metric: opt_data.statistics.metrics.newLinesOfCode, colorDelta: true, negativeIsGood: true, isPercentage: false}) + '</div></div></div></div></div>' : '') + '</div><script>require(\'mibexsoftware/sonar4stash/render-statistic-pies\').renderPieCharts(' + soy.$$escapeHtml(opt_data.statistics.metrics.duplicatedLinesDensity) + ', ' + soy.$$escapeHtml(opt_data.isIncremental ? Math.round(opt_data.statistics.metrics.utCoverageNewCode * 10) / 10 : opt_data.statistics.metrics.utCoverage) + ');<\/script>' + ((opt_data.isRepoSourcePage && ! opt_data.isIncremental) ? '<br></nav>' : '');
  return output;
};
if (goog.DEBUG) {
  ch.mibex.stash.sonar4stash.renderBranchStats.soyTemplateName = 'ch.mibex.stash.sonar4stash.renderBranchStats';
}
;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-pr-analyzer-statistics-resources', location = '/js/sonar-statistics-provider.js' */
define("mibexsoftware/sonar4stash/statistics",["jquery","bitbucket/util/navbuilder","bitbucket/util/server","bitbucket/internal/feature/pull-request/can-merge/can-merge","bitbucket/util/state","aui/flag","mibexsoftware/sonar4stash-issue-overview","exports"],function(d,o,j,l,e,m,f,q){function p(s){d("#sonar4stash-statistics").html(ch.mibex.stash.sonar4stash.prAnalyzerStatisticsPanel(s))}function n(s,t){return{pullRequestId:e.getPullRequest().id,repoId:e.getRepository().id,fromCache:t,initial:s}}function g(){d(".collapse-statistics").click(function(){var s=d(this).children("span");if(s.hasClass("aui-iconfont-arrows-up")){s.removeClass("aui-iconfont-arrows-up");s.addClass("aui-iconfont-arrows-down");h(true)}else{s.addClass("aui-iconfont-arrows-up");s.removeClass("aui-iconfont-arrows-down");h(false)}d(".sonar-statistics").toggleClass("collapsed-statistics")})}function c(u){if(r(u)){var t=d(".sonar-statistics");var s=d(".collapse-statistics span");s.removeClass("aui-iconfont-arrows-up");s.addClass("aui-iconfont-arrows-down");if(!t.hasClass("aui-iconfont-arrows-up")){t.addClass("collapsed-statistics")}}}function r(s){if(s){return true}else{if(localStorage){var t=localStorage.getItem("sonar4stash-show-statistics-collapsed");return t==null?s:t==="true"}else{return false}}}function h(s){if(localStorage){localStorage.setItem("sonar4stash-show-statistics-collapsed",s?"true":"")}}function b(s){d("#sonar-refresh-statistics").click(function(t){d(this).html('<aui-spinner></aui-spinner><span class="aui-icon aui-icon-wait"></span>');k(s,false);return false})}function a(u){var s={error:"Unknown Error"};try{s=d.parseJSON(u.responseText)}catch(t){console.error("Sonar: Not able to parse statistic results response: "+t)}console.error("Sonar: Error while getting Sonar statistic data: "+s.error);p({statistics:[],error:s})}function i(){d(".issueOverview").click(function(){var s=d(this).attr("data-issue-type");var w=e.getPullRequest();var v=e.getRepository();var t=f.getIssueOverviewDisplayStatus(v.id,w.id,w.fromRef.id);var u=t===200;f.openSonarIssueOverview(u,s);return false})}function k(t,u,s){j.rest({url:o.rest("sonar4stash","1.0").addPathComponents("statistics").build(),data:n(s===0,u),success:function(v,x,w){if(w.status===200){p({statistics:v});b(t);g();c(v.collapsedByDefault);i();if(e.getPullRequest().state==="OPEN"){l()}return true}else{if(w.status===201){a(w)}else{if(w.status===204){d("#sonar4stash-statistics").html("");return true}}}if(s<150){setTimeout(function(){k(t,u,++s)},5000)}},statusCode:{400:function(v,x,w){a(v);return false},403:function(v,x,w){d("#sonar4stash-statistics").html("");return false},404:function(v,x,w){return false}}})}q.showSonarStatistics=function(s){k(s,true,0);return{}};q.isSonarStatisticsActive=function(s){var t=false;j.rest({url:o.rest("sonar4stash","1.0").addPathComponents("statistics","enabled").build(),data:n(true,false),type:"GET",async:false,success:function(u,w,v){t=v.status!==204},error:function(u,w,v){m({type:"error",title:"Sonar for Bitbucket Server failed",body:"Error while determining if Sonar statistics should be shown",close:"manual"});t=false}});return t}});;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-pr-analyzer-statistics-resources', location = '/js/vendor/d3.min.js' */
// https://d3js.org Version 5.4.0. Copyright 2018 Mike Bostock.
(function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.d3=t.d3||{})})(this,function(t){"use strict";function n(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function e(t){return 1===t.length&&(t=function(t){return function(e,r){return n(t(e),r)}}(t)),{left:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}}function r(t,n){return[t,n]}function i(t){return null===t?NaN:+t}function o(t,n){var e,r,o=t.length,a=0,u=-1,f=0,c=0;if(null==n)for(;++u<o;)isNaN(e=i(t[u]))||(c+=(r=e-f)*(e-(f+=r/++a)));else for(;++u<o;)isNaN(e=i(n(t[u],u,t)))||(c+=(r=e-f)*(e-(f+=r/++a)));if(a>1)return c/(a-1)}function a(t,n){var e=o(t,n);return e?Math.sqrt(e):e}function u(t,n){var e,r,i,o=t.length,a=-1;if(null==n){for(;++a<o;)if(null!=(e=t[a])&&e>=e)for(r=i=e;++a<o;)null!=(e=t[a])&&(r>e&&(r=e),i<e&&(i=e))}else for(;++a<o;)if(null!=(e=n(t[a],a,t))&&e>=e)for(r=i=e;++a<o;)null!=(e=n(t[a],a,t))&&(r>e&&(r=e),i<e&&(i=e));return[r,i]}function f(t){return function(){return t}}function c(t){return t}function s(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}function l(t,n,e){var r,i,o,a,u=-1;if(n=+n,t=+t,e=+e,t===n&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(a=h(t,n,e))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),n=Math.floor(n/a),o=new Array(i=Math.ceil(n-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),n=Math.ceil(n*a),o=new Array(i=Math.ceil(t-n+1));++u<i;)o[u]=(t-u)/a;return r&&o.reverse(),o}function h(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=rs?10:o>=is?5:o>=os?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=rs?10:o>=is?5:o>=os?2:1)}function d(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=rs?i*=10:o>=is?i*=5:o>=os&&(i*=2),n<t?-i:i}function p(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function v(t,n,e){if(null==e&&(e=i),r=t.length){if((n=+n)<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,o=(r-1)*n,a=Math.floor(o),u=+e(t[a],a,t);return u+(+e(t[a+1],a+1,t)-u)*(o-a)}}function g(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&e>r&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&e>r&&(r=e);return r}function y(t){for(var n,e,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(e=new Array(a);--i>=0;)for(n=(r=t[i]).length;--n>=0;)e[--a]=r[n];return e}function _(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&r>e&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&r>e&&(r=e);return r}function b(t){if(!(i=t.length))return[];for(var n=-1,e=_(t,m),r=new Array(e);++n<e;)for(var i,o=-1,a=r[n]=new Array(i);++o<i;)a[o]=t[o][n];return r}function m(t){return t.length}function x(t){return t}function w(t){return"translate("+(t+.5)+",0)"}function M(t){return"translate(0,"+(t+.5)+")"}function A(){return!this.__axis}function T(t,n){function e(e){var h=null==i?n.ticks?n.ticks.apply(n,r):n.domain():i,d=null==o?n.tickFormat?n.tickFormat.apply(n,r):x:o,p=Math.max(a,0)+f,v=n.range(),g=+v[0]+.5,y=+v[v.length-1]+.5,_=(n.bandwidth?function(t){var n=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(n=Math.round(n)),function(e){return+t(e)+n}}:function(t){return function(n){return+t(n)}})(n.copy()),b=e.selection?e.selection():e,m=b.selectAll(".domain").data([null]),w=b.selectAll(".tick").data(h,n).order(),M=w.exit(),T=w.enter().append("g").attr("class","tick"),N=w.select("line"),S=w.select("text");m=m.merge(m.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),w=w.merge(T),N=N.merge(T.append("line").attr("stroke","#000").attr(s+"2",c*a)),S=S.merge(T.append("text").attr("fill","#000").attr(s,c*p).attr("dy",t===us?"0em":t===cs?"0.71em":"0.32em")),e!==b&&(m=m.transition(e),w=w.transition(e),N=N.transition(e),S=S.transition(e),M=M.transition(e).attr("opacity",ls).attr("transform",function(t){return isFinite(t=_(t))?l(t):this.getAttribute("transform")}),T.attr("opacity",ls).attr("transform",function(t){var n=this.parentNode.__axis;return l(n&&isFinite(n=n(t))?n:_(t))})),M.remove(),m.attr("d",t===ss||t==fs?"M"+c*u+","+g+"H0.5V"+y+"H"+c*u:"M"+g+","+c*u+"V0.5H"+y+"V"+c*u),w.attr("opacity",1).attr("transform",function(t){return l(_(t))}),N.attr(s+"2",c*a),S.attr(s,c*p).text(d),b.filter(A).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===fs?"start":t===ss?"end":"middle"),b.each(function(){this.__axis=_})}var r=[],i=null,o=null,a=6,u=6,f=3,c=t===us||t===ss?-1:1,s=t===ss||t===fs?"x":"y",l=t===us||t===cs?w:M;return e.scale=function(t){return arguments.length?(n=t,e):n},e.ticks=function(){return r=as.call(arguments),e},e.tickArguments=function(t){return arguments.length?(r=null==t?[]:as.call(t),e):r.slice()},e.tickValues=function(t){return arguments.length?(i=null==t?null:as.call(t),e):i&&i.slice()},e.tickFormat=function(t){return arguments.length?(o=t,e):o},e.tickSize=function(t){return arguments.length?(a=u=+t,e):a},e.tickSizeInner=function(t){return arguments.length?(a=+t,e):a},e.tickSizeOuter=function(t){return arguments.length?(u=+t,e):u},e.tickPadding=function(t){return arguments.length?(f=+t,e):f},e}function N(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new S(r)}function S(t){this._=t}function E(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=hs,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}function k(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),ps.hasOwnProperty(n)?{space:ps[n],local:t}:t}function C(t){var n=k(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===ds&&n.documentElement.namespaceURI===ds?n.createElement(t):n.createElementNS(e,t)}})(n)}function P(){}function z(t){return null==t?P:function(){return this.querySelector(t)}}function R(){return[]}function L(t){return null==t?R:function(){return this.querySelectorAll(t)}}function D(t){return new Array(t.length)}function U(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function q(t,n,e,r,i,o){for(var a,u=0,f=n.length,c=o.length;u<c;++u)(a=n[u])?(a.__data__=o[u],r[u]=a):e[u]=new U(t,o[u]);for(;u<f;++u)(a=n[u])&&(i[u]=a)}function O(t,n,e,r,i,o,a){var u,f,c,s={},l=n.length,h=o.length,d=new Array(l);for(u=0;u<l;++u)(f=n[u])&&(d[u]=c=bs+a.call(f,f.__data__,u,n),c in s?i[u]=f:s[c]=f);for(u=0;u<h;++u)(f=s[c=bs+a.call(t,o[u],u,o)])?(r[u]=f,f.__data__=o[u],s[c]=null):e[u]=new U(t,o[u]);for(u=0;u<l;++u)(f=n[u])&&s[d[u]]===f&&(i[u]=f)}function Y(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function B(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function F(t,n){return t.style.getPropertyValue(n)||B(t).getComputedStyle(t,null).getPropertyValue(n)}function I(t){return t.trim().split(/^|\s+/)}function j(t){return t.classList||new H(t)}function H(t){this._node=t,this._names=I(t.getAttribute("class")||"")}function X(t,n){for(var e=j(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function G(t,n){for(var e=j(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function V(){this.textContent=""}function $(){this.innerHTML=""}function W(){this.nextSibling&&this.parentNode.appendChild(this)}function Z(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Q(){return null}function J(){var t=this.parentNode;t&&t.removeChild(this)}function K(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function tt(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function nt(t,n,e){return t=et(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function et(n,e,r){return function(i){var o=t.event;t.event=i;try{n.call(this,this.__data__,e,r)}finally{t.event=o}}}function rt(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function it(t,n,e){var r=ms.hasOwnProperty(t.type)?nt:et;return function(i,o,a){var u,f=this.__on,c=r(n,o,a);if(f)for(var s=0,l=f.length;s<l;++s)if((u=f[s]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=e),void(u.value=n);this.addEventListener(t.type,c,e),u={type:t.type,name:t.name,value:n,listener:c,capture:e},f?f.push(u):this.__on=[u]}}function ot(n,e,r,i){var o=t.event;n.sourceEvent=t.event,t.event=n;try{return e.apply(r,i)}finally{t.event=o}}function at(t,n,e){var r=B(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function ut(t,n){this._groups=t,this._parents=n}function ft(){return new ut([[document.documentElement]],xs)}function ct(t){return"string"==typeof t?new ut([[document.querySelector(t)]],[document.documentElement]):new ut([[t]],xs)}function st(){return new lt}function lt(){this._="@"+(++ws).toString(36)}function ht(){for(var n,e=t.event;n=e.sourceEvent;)e=n;return e}function dt(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]}function pt(t){var n=ht();return n.changedTouches&&(n=n.changedTouches[0]),dt(t,n)}function vt(t,n,e){arguments.length<3&&(e=n,n=ht().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return dt(t,r);return null}function gt(){t.event.stopImmediatePropagation()}function yt(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function _t(t){var n=t.document.documentElement,e=ct(t).on("dragstart.drag",yt,!0);"onselectstart"in n?e.on("selectstart.drag",yt,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function bt(t,n){var e=t.document.documentElement,r=ct(t).on("dragstart.drag",null);n&&(r.on("click.drag",yt,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function mt(t){return function(){return t}}function xt(t,n,e,r,i,o,a,u,f,c){this.target=t,this.type=n,this.subject=e,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=u,this.dy=f,this._=c}function wt(){return!t.event.button}function Mt(){return this.parentNode}function At(n){return null==n?{x:t.event.x,y:t.event.y}:n}function Tt(){return"ontouchstart"in this}function Nt(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function St(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Et(){}function kt(t){var n;return t=(t+"").trim().toLowerCase(),(n=Ns.exec(t))?(n=parseInt(n[1],16),new Lt(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1)):(n=Ss.exec(t))?Ct(parseInt(n[1],16)):(n=Es.exec(t))?new Lt(n[1],n[2],n[3],1):(n=ks.exec(t))?new Lt(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Cs.exec(t))?Pt(n[1],n[2],n[3],n[4]):(n=Ps.exec(t))?Pt(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=zs.exec(t))?Ut(n[1],n[2]/100,n[3]/100,1):(n=Rs.exec(t))?Ut(n[1],n[2]/100,n[3]/100,n[4]):Ls.hasOwnProperty(t)?Ct(Ls[t]):"transparent"===t?new Lt(NaN,NaN,NaN,0):null}function Ct(t){return new Lt(t>>16&255,t>>8&255,255&t,1)}function Pt(t,n,e,r){return r<=0&&(t=n=e=NaN),new Lt(t,n,e,r)}function zt(t){return t instanceof Et||(t=kt(t)),t?(t=t.rgb(),new Lt(t.r,t.g,t.b,t.opacity)):new Lt}function Rt(t,n,e,r){return 1===arguments.length?zt(t):new Lt(t,n,e,null==r?1:r)}function Lt(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Dt(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ut(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Ot(t,n,e,r)}function qt(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof Ot)return new Ot(t.h,t.s,t.l,t.opacity);if(t instanceof Et||(t=kt(t)),!t)return new Ot;if(t instanceof Ot)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,u=o-i,f=(o+i)/2;return u?(a=n===o?(e-r)/u+6*(e<r):e===o?(r-n)/u+2:(n-e)/u+4,u/=f<.5?o+i:2-o-i,a*=60):u=f>0&&f<1?0:a,new Ot(a,u,f,t.opacity)}(t):new Ot(t,n,e,null==r?1:r)}function Ot(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Yt(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function Bt(t){if(t instanceof It)return new It(t.l,t.a,t.b,t.opacity);if(t instanceof Wt){if(isNaN(t.h))return new It(t.l,0,0,t.opacity);var n=t.h*Ds;return new It(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof Lt||(t=zt(t));var e,r,i=Gt(t.r),o=Gt(t.g),a=Gt(t.b),u=jt((.2225045*i+.7168786*o+.0606169*a)/Os);return i===o&&o===a?e=r=u:(e=jt((.4360747*i+.3850649*o+.1430804*a)/qs),r=jt((.0139322*i+.0971045*o+.7141733*a)/Ys)),new It(116*u-16,500*(e-u),200*(u-r),t.opacity)}function Ft(t,n,e,r){return 1===arguments.length?Bt(t):new It(t,n,e,null==r?1:r)}function It(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function jt(t){return t>js?Math.pow(t,1/3):t/Is+Bs}function Ht(t){return t>Fs?t*t*t:Is*(t-Bs)}function Xt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Gt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Vt(t){if(t instanceof Wt)return new Wt(t.h,t.c,t.l,t.opacity);if(t instanceof It||(t=Bt(t)),0===t.a&&0===t.b)return new Wt(NaN,0,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Us;return new Wt(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function $t(t,n,e,r){return 1===arguments.length?Vt(t):new Wt(t,n,e,null==r?1:r)}function Wt(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function Zt(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof Qt)return new Qt(t.h,t.s,t.l,t.opacity);t instanceof Lt||(t=zt(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(Ws*r+Vs*n-$s*e)/(Ws+Vs-$s),o=r-i,a=(Gs*(e-i)-Hs*o)/Xs,u=Math.sqrt(a*a+o*o)/(Gs*i*(1-i)),f=u?Math.atan2(a,o)*Us-120:NaN;return new Qt(f<0?f+360:f,u,i,t.opacity)}(t):new Qt(t,n,e,null==r?1:r)}function Qt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Jt(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}function Kt(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,u=r<n-1?t[r+2]:2*o-i;return Jt((e-r/n)*n,a,i,o,u)}}function tn(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],a=t[(r+1)%n],u=t[(r+2)%n];return Jt((e-r/n)*n,i,o,a,u)}}function nn(t){return function(){return t}}function en(t,n){return function(e){return t+e*n}}function rn(t,n){var e=n-t;return e?en(t,e>180||e<-180?e-360*Math.round(e/360):e):nn(isNaN(t)?n:t)}function on(t){return 1==(t=+t)?an:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):nn(isNaN(n)?e:n)}}function an(t,n){var e=n-t;return e?en(t,e):nn(isNaN(t)?n:t)}function un(t){return function(n){var e,r,i=n.length,o=new Array(i),a=new Array(i),u=new Array(i);for(e=0;e<i;++e)r=Rt(n[e]),o[e]=r.r||0,a[e]=r.g||0,u[e]=r.b||0;return o=t(o),a=t(a),u=t(u),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=u(t),r+""}}}function fn(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=dn(t[e],n[e]);for(;e<r;++e)a[e]=n[e];return function(t){for(e=0;e<i;++e)a[e]=o[e](t);return a}}function cn(t,n){var e=new Date;return t=+t,n-=t,function(r){return e.setTime(t+n*r),e}}function sn(t,n){return t=+t,n-=t,function(e){return t+n*e}}function ln(t,n){var e,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={});for(e in n)e in t?r[e]=dn(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}function hn(t,n){var e,r,i,o=ol.lastIndex=al.lastIndex=0,a=-1,u=[],f=[];for(t+="",n+="";(e=ol.exec(t))&&(r=al.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,f.push({i:a,x:sn(e,r)})),o=al.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?f[0]?function(t){return function(n){return t(n)+""}}(f[0].x):function(t){return function(){return t}}(n):(n=f.length,function(t){for(var e,r=0;r<n;++r)u[(e=f[r]).i]=e.x(t);return u.join("")})}function dn(t,n){var e,r=typeof n;return null==n||"boolean"===r?nn(n):("number"===r?sn:"string"===r?(e=kt(n))?(n=e,el):hn:n instanceof kt?el:n instanceof Date?cn:Array.isArray(n)?fn:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?ln:sn)(t,n)}function pn(t,n){return t=+t,n-=t,function(e){return Math.round(t+n*e)}}function vn(t,n,e,r,i,o){var a,u,f;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(f=t*e+n*r)&&(e-=t*f,r-=n*f),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,f/=u),t*r<n*e&&(t=-t,n=-n,f=-f,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*ul,skewX:Math.atan(f)*ul,scaleX:a,scaleY:u}}function gn(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],f=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var f=a.push("translate(",null,n,null,e);u.push({i:f-4,x:sn(t,i)},{i:f-2,x:sn(r,o)})}else(i||o)&&a.push("translate("+i+n+o+e)}(o.translateX,o.translateY,a.translateX,a.translateY,u,f),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:sn(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,a.rotate,u,f),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:sn(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,a.skewX,u,f),function(t,n,e,r,o,a){if(t!==e||n!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:sn(t,e)},{i:u-2,x:sn(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,f),o=a=null,function(t){for(var n,e=-1,r=f.length;++e<r;)u[(n=f[e]).i]=n.x(t);return u.join("")}}}function yn(t){return((t=Math.exp(t))+1/t)/2}function _n(t,n){var e,r,i=t[0],o=t[1],a=t[2],u=n[0],f=n[1],c=n[2],s=u-i,l=f-o,h=s*s+l*l;if(h<pl)r=Math.log(c/a)/ll,e=function(t){return[i+t*s,o+t*l,a*Math.exp(ll*t*r)]};else{var d=Math.sqrt(h),p=(c*c-a*a+dl*h)/(2*a*hl*d),v=(c*c-a*a-dl*h)/(2*c*hl*d),g=Math.log(Math.sqrt(p*p+1)-p),y=Math.log(Math.sqrt(v*v+1)-v);r=(y-g)/ll,e=function(t){var n=t*r,e=yn(g),u=a/(hl*d)*(e*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(ll*n+g)-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[i+u*s,o+u*l,a*e/yn(ll*n+g)]}}return e.duration=1e3*r,e}function bn(t){return function(n,e){var r=t((n=qt(n)).h,(e=qt(e)).h),i=an(n.s,e.s),o=an(n.l,e.l),a=an(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=i(t),n.l=o(t),n.opacity=a(t),n+""}}}function mn(t){return function(n,e){var r=t((n=$t(n)).h,(e=$t(e)).h),i=an(n.c,e.c),o=an(n.l,e.l),a=an(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=o(t),n.opacity=a(t),n+""}}}function xn(t){return function n(e){function r(n,r){var i=t((n=Zt(n)).h,(r=Zt(r)).h),o=an(n.s,r.s),a=an(n.l,r.l),u=an(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(Math.pow(t,e)),n.opacity=u(t),n+""}}return e=+e,r.gamma=n,r}(1)}function wn(){return Nl||(kl(Mn),Nl=El.now()+Sl)}function Mn(){Nl=0}function An(){this._call=this._time=this._next=null}function Tn(t,n,e){var r=new An;return r.restart(t,n,e),r}function Nn(){wn(),++xl;for(var t,n=tl;n;)(t=Nl-n._time)>=0&&n._call.call(null,t),n=n._next;--xl}function Sn(){Nl=(Tl=El.now())+Sl,xl=wl=0;try{Nn()}finally{xl=0,function(){var t,n,e=tl,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:tl=n);nl=t,kn(r)}(),Nl=0}}function En(){var t=El.now(),n=t-Tl;n>Al&&(Sl-=n,Tl=t)}function kn(t){if(!xl){wl&&(wl=clearTimeout(wl));t-Nl>24?(t<1/0&&(wl=setTimeout(Sn,t-El.now()-Sl)),Ml&&(Ml=clearInterval(Ml))):(Ml||(Tl=El.now(),Ml=setInterval(En,Al)),xl=1,kl(Sn))}}function Cn(t,n,e){var r=new An;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r}function Pn(t,n,e,r,i,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};(function(t,n,e){function r(f){var c,s,l,h;if(e.state!==Rl)return o();for(c in u)if((h=u[c]).name===e.name){if(h.state===Dl)return Cn(r);h.state===Ul?(h.state=Ol,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete u[c]):+c<n&&(h.state=Ol,h.timer.stop(),delete u[c])}if(Cn(function(){e.state===Dl&&(e.state=Ul,e.timer.restart(i,e.delay,e.time),i(f))}),e.state=Ll,e.on.call("start",t,t.__data__,e.index,e.group),e.state===Ll){for(e.state=Dl,a=new Array(l=e.tween.length),c=0,s=-1;c<l;++c)(h=e.tween[c].value.call(t,t.__data__,e.index,e.group))&&(a[++s]=h);a.length=s+1}}function i(n){for(var r=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(o),e.state=ql,1),i=-1,u=a.length;++i<u;)a[i].call(null,r);e.state===ql&&(e.on.call("end",t,t.__data__,e.index,e.group),o())}function o(){e.state=Ol,e.timer.stop(),delete u[n];for(var r in u)return;delete t.__transition}var a,u=t.__transition;u[n]=e,e.timer=Tn(function(t){e.state=Rl,e.timer.restart(r,e.delay,e.time),e.delay<=t&&r(t-e.delay)},0,e.time)})(t,e,{name:n,index:r,group:i,on:Cl,tween:Pl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:zl})}function zn(t,n){var e=Ln(t,n);if(e.state>zl)throw new Error("too late; already scheduled");return e}function Rn(t,n){var e=Ln(t,n);if(e.state>Ll)throw new Error("too late; already started");return e}function Ln(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Dn(t,n){var e,r,i,o=t.__transition,a=!0;if(o){n=null==n?null:n+"";for(i in o)(e=o[i]).name===n?(r=e.state>Ll&&e.state<ql,e.state=Ol,e.timer.stop(),r&&e.on.call("interrupt",t,t.__data__,e.index,e.group),delete o[i]):a=!1;a&&delete t.__transition}}function Un(t,n,e){var r=t._id;return t.each(function(){var t=Rn(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}),function(t){return Ln(t,r).value[n]}}function qn(t,n){var e;return("number"==typeof n?sn:n instanceof kt?el:(e=kt(n))?(n=e,el):hn)(t,n)}function On(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Yn(t){return ft().transition(t)}function Bn(){return++Bl}function Fn(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function In(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function jn(t){return(1-Math.cos(Xl*t))/2}function Hn(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Xn(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function Gn(t){return(t=+t)<Vl?eh*t*t:t<Wl?eh*(t-=$l)*t+Zl:t<Jl?eh*(t-=Ql)*t+Kl:eh*(t-=th)*t+nh}function Vn(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return sh.time=wn(),sh;return e}function $n(t){return function(){return t}}function Wn(){t.event.stopImmediatePropagation()}function Zn(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Qn(t){return{type:t}}function Jn(){return!t.event.button}function Kn(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function te(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function ne(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function ee(n){function e(t){var e=t.property("__brush",u).selectAll(".overlay").data([Qn("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",bh.overlay).merge(e).each(function(){var t=te(this).extent;ct(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([Qn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",bh.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(n.handles,function(t){return t.type});i.exit().remove(),i.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return bh[t.type]}),t.each(r).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",a)}function r(){var t=ct(this),n=te(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?n[1][0]-h/2:n[0][0]-h/2}).attr("y",function(t){return"s"===t.type[0]?n[1][1]-h/2:n[0][1]-h/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+h:h}).attr("height",function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+h:h})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function i(t,n){return t.__brush.emitter||new o(t,n)}function o(t,n){this.that=t,this.args=n,this.state=t.__brush,this.active=0}function a(){function e(){var t=pt(w);!L||m||x||(Math.abs(t[0]-U[0])>Math.abs(t[1]-U[1])?x=!0:m=!0),U=t,b=!0,Zn(),o()}function o(){var t;switch(y=U[0]-D[0],_=U[1]-D[1],A){case dh:case hh:T&&(y=Math.max(C-u,Math.min(z-d,y)),c=u+y,p=d+y),N&&(_=Math.max(P-l,Math.min(R-v,_)),h=l+_,g=v+_);break;case ph:T<0?(y=Math.max(C-u,Math.min(z-u,y)),c=u+y,p=d):T>0&&(y=Math.max(C-d,Math.min(z-d,y)),c=u,p=d+y),N<0?(_=Math.max(P-l,Math.min(R-l,_)),h=l+_,g=v):N>0&&(_=Math.max(P-v,Math.min(R-v,_)),h=l,g=v+_);break;case vh:T&&(c=Math.max(C,Math.min(z,u-y*T)),p=Math.max(C,Math.min(z,d+y*T))),N&&(h=Math.max(P,Math.min(R,l-_*N)),g=Math.max(P,Math.min(R,v+_*N)))}p<c&&(T*=-1,t=u,u=d,d=t,t=c,c=p,p=t,M in mh&&Y.attr("cursor",bh[M=mh[M]])),g<h&&(N*=-1,t=l,l=v,v=t,t=h,h=g,g=t,M in xh&&Y.attr("cursor",bh[M=xh[M]])),S.selection&&(k=S.selection),m&&(c=k[0][0],p=k[1][0]),x&&(h=k[0][1],g=k[1][1]),k[0][0]===c&&k[0][1]===h&&k[1][0]===p&&k[1][1]===g||(S.selection=[[c,h],[p,g]],r.call(w),q.brush())}function a(){if(Wn(),t.event.touches){if(t.event.touches.length)return;f&&clearTimeout(f),f=setTimeout(function(){f=null},500),O.on("touchmove.brush touchend.brush touchcancel.brush",null)}else bt(t.event.view,b),B.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);O.attr("pointer-events","all"),Y.attr("cursor",bh.overlay),S.selection&&(k=S.selection),ne(k)&&(S.selection=null,r.call(w)),q.end()}if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return Zn()}else if(f)return;if(s.apply(this,arguments)){var u,c,l,h,d,p,v,g,y,_,b,m,x,w=this,M=t.event.target.__data__.type,A="selection"===(t.event.metaKey?M="overlay":M)?hh:t.event.altKey?vh:ph,T=n===yh?null:wh[M],N=n===gh?null:Mh[M],S=te(w),E=S.extent,k=S.selection,C=E[0][0],P=E[0][1],z=E[1][0],R=E[1][1],L=T&&N&&t.event.shiftKey,D=pt(w),U=D,q=i(w,arguments).beforestart();"overlay"===M?S.selection=k=[[u=n===yh?C:D[0],l=n===gh?P:D[1]],[d=n===yh?z:u,v=n===gh?R:l]]:(u=k[0][0],l=k[0][1],d=k[1][0],v=k[1][1]),c=u,h=l,p=d,g=v;var O=ct(w).attr("pointer-events","none"),Y=O.selectAll(".overlay").attr("cursor",bh[M]);if(t.event.touches)O.on("touchmove.brush",e,!0).on("touchend.brush touchcancel.brush",a,!0);else{var B=ct(t.event.view).on("keydown.brush",function(){switch(t.event.keyCode){case 16:L=T&&N;break;case 18:A===ph&&(T&&(d=p-y*T,u=c+y*T),N&&(v=g-_*N,l=h+_*N),A=vh,o());break;case 32:A!==ph&&A!==vh||(T<0?d=p-y:T>0&&(u=c-y),N<0?v=g-_:N>0&&(l=h-_),A=dh,Y.attr("cursor",bh.selection),o());break;default:return}Zn()},!0).on("keyup.brush",function(){switch(t.event.keyCode){case 16:L&&(m=x=L=!1,o());break;case 18:A===vh&&(T<0?d=p:T>0&&(u=c),N<0?v=g:N>0&&(l=h),A=ph,o());break;case 32:A===dh&&(t.event.altKey?(T&&(d=p-y*T,u=c+y*T),N&&(v=g-_*N,l=h+_*N),A=vh):(T<0?d=p:T>0&&(u=c),N<0?v=g:N>0&&(l=h),A=ph),Y.attr("cursor",bh[M]),o());break;default:return}Zn()},!0).on("mousemove.brush",e,!0).on("mouseup.brush",a,!0);_t(t.event.view)}Wn(),Dn(w),r.call(w),q.start()}}function u(){var t=this.__brush||{selection:null};return t.extent=c.apply(this,arguments),t.dim=n,t}var f,c=Kn,s=Jn,l=N(e,"start","brush","end"),h=6;return e.move=function(t,e){t.selection?t.on("start.brush",function(){i(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){i(this,arguments).end()}).tween("brush",function(){function t(t){a.selection=1===t&&ne(c)?null:s(t),r.call(o),u.brush()}var o=this,a=o.__brush,u=i(o,arguments),f=a.selection,c=n.input("function"==typeof e?e.apply(this,arguments):e,a.extent),s=dn(f,c);return f&&c?t:t(1)}):t.each(function(){var t=arguments,o=this.__brush,a=n.input("function"==typeof e?e.apply(this,t):e,o.extent),u=i(this,t).beforestart();Dn(this),o.selection=null==a||ne(a)?null:a,r.call(this),u.start().brush().end()})},o.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){ot(new function(t,n,e){this.target=t,this.type=n,this.selection=e}(e,t,n.output(this.state.selection)),l.apply,l,[t,this.that,this.args])}},e.extent=function(t){return arguments.length?(c="function"==typeof t?t:$n([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):c},e.filter=function(t){return arguments.length?(s="function"==typeof t?t:$n(!!t),e):s},e.handleSize=function(t){return arguments.length?(h=+t,e):h},e.on=function(){var t=l.on.apply(l,arguments);return t===l?e:t},e}function re(t){return function(){return t}}function ie(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function oe(){return new ie}function ae(t){return t.source}function ue(t){return t.target}function fe(t){return t.radius}function ce(t){return t.startAngle}function se(t){return t.endAngle}function le(){}function he(t,n){var e=new le;if(t instanceof le)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var a in t)e.set(a,t[a]);return e}function de(){return{}}function pe(t,n,e){t[n]=e}function ve(){return he()}function ge(t,n,e){t.set(n,e)}function ye(){}function _e(t,n){var e=new ye;if(t instanceof ye)t.each(function(t){e.add(t)});else if(t){var r=-1,i=t.length;if(null==n)for(;++r<i;)e.add(t[r]);else for(;++r<i;)e.add(n(t[r],r,t))}return e}function be(t,n){return t-n}function me(t){return function(){return t}}function xe(t,n){for(var e,r=-1,i=n.length;++r<i;)if(e=function(t,n){for(var e=n[0],r=n[1],i=-1,o=0,a=t.length,u=a-1;o<a;u=o++){var f=t[o],c=f[0],s=f[1],l=t[u],h=l[0],d=l[1];if(function(t,n,e){var r;return function(t,n,e){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])}(t,n,e)&&function(t,n,e){return t<=n&&n<=e||e<=n&&n<=t}(t[r=+(t[0]===n[0])],e[r],n[r])}(f,l,n))return 0;s>r!=d>r&&e<(h-c)*(r-s)/(d-s)+c&&(i=-i)}return i}(t,n[r]))return e;return 0}function we(){}function Me(){function t(t){var e=a(t);if(Array.isArray(e))e=e.slice().sort(be);else{var r=u(t),i=r[0],o=r[1];e=d(i,o,e),e=s(Math.floor(i/e)*e,Math.floor(o/e)*e,e)}return e.map(function(e){return n(t,e)})}function n(t,n){var r=[],a=[];return function(t,n,r){function a(t){var n,i,o=[t[0][0]+u,t[0][1]+f],a=[t[1][0]+u,t[1][1]+f],c=e(o),s=e(a);(n=p[c])?(i=d[s])?(delete p[n.end],delete d[i.start],n===i?(n.ring.push(a),r(n.ring)):d[n.start]=p[i.end]={start:n.start,end:i.end,ring:n.ring.concat(i.ring)}):(delete p[n.end],n.ring.push(a),p[n.end=s]=n):(n=d[s])?(i=p[c])?(delete d[n.start],delete p[i.end],n===i?(n.ring.push(a),r(n.ring)):d[i.start]=p[n.end]={start:i.start,end:n.end,ring:i.ring.concat(n.ring)}):(delete d[n.start],n.ring.unshift(o),d[n.start=c]=n):d[c]=p[s]={start:c,end:s,ring:[o,a]}}var u,f,c,s,l,h,d=new Array,p=new Array;u=f=-1,s=t[0]>=n,Uh[s<<1].forEach(a);for(;++u<i-1;)c=s,s=t[u+1]>=n,Uh[c|s<<1].forEach(a);Uh[s<<0].forEach(a);for(;++f<o-1;){for(u=-1,s=t[f*i+i]>=n,l=t[f*i]>=n,Uh[s<<1|l<<2].forEach(a);++u<i-1;)c=s,s=t[f*i+i+u+1]>=n,h=l,l=t[f*i+u+1]>=n,Uh[c|s<<1|l<<2|h<<3].forEach(a);Uh[s|l<<3].forEach(a)}u=-1,l=t[f*i]>=n,Uh[l<<2].forEach(a);for(;++u<i-1;)h=l,l=t[f*i+u+1]>=n,Uh[l<<2|h<<3].forEach(a);Uh[l<<3].forEach(a)}(t,n,function(e){f(e,t,n),function(t){for(var n=0,e=t.length,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r}(e)>0?r.push([e]):a.push(e)}),a.forEach(function(t){for(var n,e=0,i=r.length;e<i;++e)if(-1!==xe((n=r[e])[0],t))return void n.push(t)}),{type:"MultiPolygon",value:n,coordinates:r}}function e(t){return 2*t[0]+t[1]*(i+1)*4}function r(t,n,e){t.forEach(function(t){var r,a=t[0],u=t[1],f=0|a,c=0|u,s=n[c*i+f];a>0&&a<i&&f===a&&(r=n[c*i+f-1],t[0]=a+(e-r)/(s-r)-.5),u>0&&u<o&&c===u&&(r=n[(c-1)*i+f],t[1]=u+(e-r)/(s-r)-.5)})}var i=1,o=1,a=p,f=r;return t.contour=n,t.size=function(n){if(!arguments.length)return[i,o];var e=Math.ceil(n[0]),r=Math.ceil(n[1]);if(!(e>0&&r>0))throw new Error("invalid size");return i=e,o=r,t},t.thresholds=function(n){return arguments.length?(a="function"==typeof n?n:Array.isArray(n)?me(Dh.call(n)):me(n),t):a},t.smooth=function(n){return arguments.length?(f=n?r:we,t):f===r},t}function Ae(t,n,e){for(var r=t.width,i=t.height,o=1+(e<<1),a=0;a<i;++a)for(var u=0,f=0;u<r+e;++u)u<r&&(f+=t.data[u+a*r]),u>=e&&(u>=o&&(f-=t.data[u-o+a*r]),n.data[u-e+a*r]=f/Math.min(u+1,r-1+o-u,o))}function Te(t,n,e){for(var r=t.width,i=t.height,o=1+(e<<1),a=0;a<r;++a)for(var u=0,f=0;u<i+e;++u)u<i&&(f+=t.data[a+u*r]),u>=e&&(u>=o&&(f-=t.data[a+(u-o)*r]),n.data[a+(u-e)*r]=f/Math.min(u+1,i-1+o-u,o))}function Ne(t){return t[0]}function Se(t){return t[1]}function Ee(t){return new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}")}function ke(t){function n(t,n){function e(){if(c)return Oh;if(s)return s=!1,qh;var n,e,r=u;if(t.charCodeAt(r)===Yh){for(;u++<a&&t.charCodeAt(u)!==Yh||t.charCodeAt(++u)===Yh;);return(n=u)>=a?c=!0:(e=t.charCodeAt(u++))===Bh?s=!0:e===Fh&&(s=!0,t.charCodeAt(u)===Bh&&++u),t.slice(r+1,n-1).replace(/""/g,'"')}for(;u<a;){if((e=t.charCodeAt(n=u++))===Bh)s=!0;else if(e===Fh)s=!0,t.charCodeAt(u)===Bh&&++u;else if(e!==o)continue;return t.slice(r,n)}return c=!0,t.slice(r,a)}var r,i=[],a=t.length,u=0,f=0,c=a<=0,s=!1;for(t.charCodeAt(a-1)===Bh&&--a,t.charCodeAt(a-1)===Fh&&--a;(r=e())!==Oh;){for(var l=[];r!==qh&&r!==Oh;)l.push(r),r=e();n&&null==(l=n(l,f++))||i.push(l)}return i}function e(n){return n.map(r).join(t)}function r(t){return null==t?"":i.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var i=new RegExp('["'+t+"\n\r]"),o=t.charCodeAt(0);return{parse:function(t,e){var r,i,o=n(t,function(t,n){if(r)return r(t,n-1);i=t,r=e?function(t,n){var e=Ee(t);return function(r,i){return n(e(r),i,t)}}(t,e):Ee(t)});return o.columns=i||[],o},parseRows:n,format:function(n,e){return null==e&&(e=function(t){var n=Object.create(null),e=[];return t.forEach(function(t){for(var r in t)r in n||e.push(n[r]=r)}),e}(n)),[e.map(r).join(t)].concat(n.map(function(n){return e.map(function(t){return r(n[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(e).join("\n")}}}function Ce(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Pe(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function ze(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Re(t,n){return fetch(t,n).then(ze)}function Le(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=void 0),Re(n,e).then(function(n){return t(n,r)})}}function De(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function Ue(t){return function(n,e){return Re(n,e).then(function(n){return(new DOMParser).parseFromString(n,t)})}}function qe(t){return function(){return t}}function Oe(){return 1e-6*(Math.random()-.5)}function Ye(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,a,u,f,c,s,l,h,d=t._root,p={data:r},v=t._x0,g=t._y0,y=t._x1,_=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=n>=(o=(v+y)/2))?v=o:y=o,(s=e>=(a=(g+_)/2))?g=a:_=a,i=d,!(d=d[l=s<<1|c]))return i[l]=p,t;if(u=+t._x.call(null,d.data),f=+t._y.call(null,d.data),n===u&&e===f)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(c=n>=(o=(v+y)/2))?v=o:y=o,(s=e>=(a=(g+_)/2))?g=a:_=a}while((l=s<<1|c)==(h=(f>=a)<<1|u>=o));return i[h]=d,i[l]=p,t}function Be(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function Fe(t){return t[0]}function Ie(t){return t[1]}function je(t,n,e){var r=new He(null==n?Fe:n,null==e?Ie:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function He(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Xe(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}function Ge(t){return t.x+t.vx}function Ve(t){return t.y+t.vy}function $e(t){return t.index}function We(t,n){var e=t.get(n);if(!e)throw new Error("missing: "+n);return e}function Ze(t){return t.x}function Qe(t){return t.y}function Je(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function Ke(t){return(t=Je(Math.abs(t)))?t[1]:NaN}function tr(t){return new nr(t)}function nr(t){if(!(n=ad.exec(t)))throw new Error("invalid format: "+t);var n;this.fill=n[1]||" ",this.align=n[2]||">",this.sign=n[3]||"-",this.symbol=n[4]||"",this.zero=!!n[5],this.width=n[6]&&+n[6],this.comma=!!n[7],this.precision=n[8]&&+n[8].slice(1),this.trim=!!n[9],this.type=n[10]||""}function er(t,n){var e=Je(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}function rr(t){return t}function ir(t){function n(t){function n(t){var n,r,a,s=y,x=_;if("c"===g)x=b(t)+x,t="";else{var w=(t=+t)<0;if(t=b(Math.abs(t),p),v&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),w&&0==+t&&(w=!1),s=(w?"("===c?c:"-":"-"===c||"("===c?"":c)+s,x=("s"===g?sd[8+ud/3]:"")+x+(w&&"("===c?")":""),m)for(n=-1,r=t.length;++n<r;)if(48>(a=t.charCodeAt(n))||a>57){x=(46===a?i+t.slice(n+1):t.slice(n))+x,t=t.slice(0,n);break}}d&&!l&&(t=e(t,1/0));var M=s.length+t.length+x.length,A=M<h?new Array(h-M+1).join(u):"";switch(d&&l&&(t=e(A+t,A.length?h-x.length:1/0),A=""),f){case"<":t=s+t+x+A;break;case"=":t=s+A+t+x;break;case"^":t=A.slice(0,M=A.length>>1)+s+t+x+A.slice(M);break;default:t=A+s+t+x}return o(t)}var u=(t=tr(t)).fill,f=t.align,c=t.sign,s=t.symbol,l=t.zero,h=t.width,d=t.comma,p=t.precision,v=t.trim,g=t.type;"n"===g?(d=!0,g="g"):cd[g]||(null==p&&(p=12),v=!0,g="g"),(l||"0"===u&&"="===f)&&(l=!0,u="0",f="=");var y="$"===s?r[0]:"#"===s&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",_="$"===s?r[1]:/[%p]/.test(g)?a:"",b=cd[g],m=/[defgprs%]/.test(g);return p=null==p?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),n.toString=function(){return t+""},n}var e=t.grouping&&t.thousands?function(t,n){return function(e,r){for(var i=e.length,o=[],a=0,u=t[0],f=0;i>0&&u>0&&(f+u+1>r&&(u=Math.max(1,r-f)),o.push(e.substring(i-=u,i+u)),!((f+=u+1)>r));)u=t[a=(a+1)%t.length];return o.reverse().join(n)}}(t.grouping,t.thousands):rr,r=t.currency,i=t.decimal,o=t.numerals?function(t){return function(n){return n.replace(/[0-9]/g,function(n){return t[+n]})}}(t.numerals):rr,a=t.percent||"%";return{format:n,formatPrefix:function(t,e){var r=n((t=tr(t),t.type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Ke(e)/3))),o=Math.pow(10,-i),a=sd[8+i/3];return function(t){return r(o*t)+a}}}}function or(n){return fd=ir(n),t.format=fd.format,t.formatPrefix=fd.formatPrefix,fd}function ar(t){return Math.max(0,-Ke(Math.abs(t)))}function ur(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ke(n)/3)))-Ke(Math.abs(t)))}function fr(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Ke(n)-Ke(t))+1}function cr(){return new sr}function sr(){this.reset()}function lr(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}function hr(t){return t>1?0:t<-1?Xd:Math.acos(t)}function dr(t){return t>1?Gd:t<-1?-Gd:Math.asin(t)}function pr(t){return(t=op(t/2))*t}function vr(){}function gr(t,n){t&&sp.hasOwnProperty(t.type)&&sp[t.type](t,n)}function yr(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function _r(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)yr(t[e],n,1);n.polygonEnd()}function br(t,n){t&&cp.hasOwnProperty(t.type)?cp[t.type](t,n):gr(t,n)}function mr(){dp.point=wr}function xr(){Mr(ld,hd)}function wr(t,n){dp.point=Mr,ld=t,hd=n,dd=t*=Zd,pd=tp(n=(n*=Zd)/2+Vd),vd=op(n)}function Mr(t,n){n=(n*=Zd)/2+Vd;var e=(t*=Zd)-dd,r=e>=0?1:-1,i=r*e,o=tp(n),a=op(n),u=vd*a,f=pd*o+u*tp(i),c=u*r*op(i);lp.add(Kd(c,f)),dd=t,pd=o,vd=a}function Ar(t){return[Kd(t[1],t[0]),dr(t[2])]}function Tr(t){var n=t[0],e=t[1],r=tp(e);return[r*tp(n),r*op(n),op(e)]}function Nr(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Sr(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Er(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function kr(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Cr(t){var n=up(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Pr(t,n){Ad.push(Td=[gd=t,_d=t]),n<yd&&(yd=n),n>bd&&(bd=n)}function zr(t,n){var e=Tr([t*Zd,n*Zd]);if(Md){var r=Sr(Md,e),i=Sr([r[1],-r[0],0],r);Cr(i),i=Ar(i);var o,a=t-md,u=a>0?1:-1,f=i[0]*Wd*u,c=Qd(a)>180;c^(u*md<f&&f<u*t)?(o=i[1]*Wd)>bd&&(bd=o):(f=(f+360)%360-180,c^(u*md<f&&f<u*t)?(o=-i[1]*Wd)<yd&&(yd=o):(n<yd&&(yd=n),n>bd&&(bd=n))),c?t<md?Or(gd,t)>Or(gd,_d)&&(_d=t):Or(t,_d)>Or(gd,_d)&&(gd=t):_d>=gd?(t<gd&&(gd=t),t>_d&&(_d=t)):t>md?Or(gd,t)>Or(gd,_d)&&(_d=t):Or(t,_d)>Or(gd,_d)&&(gd=t)}else Ad.push(Td=[gd=t,_d=t]);n<yd&&(yd=n),n>bd&&(bd=n),Md=e,md=t}function Rr(){vp.point=zr}function Lr(){Td[0]=gd,Td[1]=_d,vp.point=Pr,Md=null}function Dr(t,n){if(Md){var e=t-md;pp.add(Qd(e)>180?e+(e>0?360:-360):e)}else xd=t,wd=n;dp.point(t,n),zr(t,n)}function Ur(){dp.lineStart()}function qr(){Dr(xd,wd),dp.lineEnd(),Qd(pp)>jd&&(gd=-(_d=180)),Td[0]=gd,Td[1]=_d,Md=null}function Or(t,n){return(n-=t)<0?n+360:n}function Yr(t,n){return t[0]-n[0]}function Br(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function Fr(t,n){t*=Zd;var e=tp(n*=Zd);Ir(e*tp(t),e*op(t),op(n))}function Ir(t,n,e){Ed+=(t-Ed)/++Nd,kd+=(n-kd)/Nd,Cd+=(e-Cd)/Nd}function jr(){gp.point=Hr}function Hr(t,n){t*=Zd;var e=tp(n*=Zd);Yd=e*tp(t),Bd=e*op(t),Fd=op(n),gp.point=Xr,Ir(Yd,Bd,Fd)}function Xr(t,n){t*=Zd;var e=tp(n*=Zd),r=e*tp(t),i=e*op(t),o=op(n),a=Kd(up((a=Bd*o-Fd*i)*a+(a=Fd*r-Yd*o)*a+(a=Yd*i-Bd*r)*a),Yd*r+Bd*i+Fd*o);Sd+=a,Pd+=a*(Yd+(Yd=r)),zd+=a*(Bd+(Bd=i)),Rd+=a*(Fd+(Fd=o)),Ir(Yd,Bd,Fd)}function Gr(){gp.point=Fr}function Vr(){gp.point=Wr}function $r(){Zr(qd,Od),gp.point=Fr}function Wr(t,n){qd=t,Od=n,t*=Zd,n*=Zd,gp.point=Zr;var e=tp(n);Yd=e*tp(t),Bd=e*op(t),Fd=op(n),Ir(Yd,Bd,Fd)}function Zr(t,n){t*=Zd;var e=tp(n*=Zd),r=e*tp(t),i=e*op(t),o=op(n),a=Bd*o-Fd*i,u=Fd*r-Yd*o,f=Yd*i-Bd*r,c=up(a*a+u*u+f*f),s=dr(c),l=c&&-s/c;Ld+=l*a,Dd+=l*u,Ud+=l*f,Sd+=s,Pd+=s*(Yd+(Yd=r)),zd+=s*(Bd+(Bd=i)),Rd+=s*(Fd+(Fd=o)),Ir(Yd,Bd,Fd)}function Qr(t){return function(){return t}}function Jr(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function Kr(t,n){return[t>Xd?t-$d:t<-Xd?t+$d:t,n]}function ti(t,n,e){return(t%=$d)?n||e?Jr(ei(t),ri(n,e)):ei(t):n||e?ri(n,e):Kr}function ni(t){return function(n,e){return n+=t,[n>Xd?n-$d:n<-Xd?n+$d:n,e]}}function ei(t){var n=ni(t);return n.invert=ni(-t),n}function ri(t,n){function e(t,n){var e=tp(n),u=tp(t)*e,f=op(t)*e,c=op(n),s=c*r+u*i;return[Kd(f*o-s*a,u*r-c*i),dr(s*o+f*a)]}var r=tp(t),i=op(t),o=tp(n),a=op(n);return e.invert=function(t,n){var e=tp(n),u=tp(t)*e,f=op(t)*e,c=op(n),s=c*o-f*a;return[Kd(f*o+c*a,u*r+s*i),dr(s*r-u*i)]},e}function ii(t){function n(n){return n=t(n[0]*Zd,n[1]*Zd),n[0]*=Wd,n[1]*=Wd,n}return t=ti(t[0]*Zd,t[1]*Zd,t.length>2?t[2]*Zd:0),n.invert=function(n){return n=t.invert(n[0]*Zd,n[1]*Zd),n[0]*=Wd,n[1]*=Wd,n},n}function oi(t,n,e,r,i,o){if(e){var a=tp(n),u=op(n),f=r*e;null==i?(i=n+r*$d,o=n-f/2):(i=ai(a,i),o=ai(a,o),(r>0?i<o:i>o)&&(i+=r*$d));for(var c,s=i;r>0?s>o:s<o;s-=f)c=Ar([a,-u*tp(s),-u*op(s)]),t.point(c[0],c[1])}}function ai(t,n){(n=Tr(n))[0]-=t,Cr(n);var e=hr(-n[1]);return((-n[2]<0?-e:e)+$d-jd)%$d}function ui(){var t,n=[];return{point:function(n,e){t.push([n,e])},lineStart:function(){n.push(t=[])},lineEnd:vr,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function fi(t,n){return Qd(t[0]-n[0])<jd&&Qd(t[1]-n[1])<jd}function ci(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function si(t,n,e,r,i){var o,a,u=[],f=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],a=t[n];if(fi(r,a)){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else u.push(e=new ci(r,t,null,!0)),f.push(e.o=new ci(r,null,e,!1)),u.push(e=new ci(a,t,null,!1)),f.push(e.o=new ci(a,null,e,!0))}}),u.length){for(f.sort(n),li(u),li(f),o=0,a=f.length;o<a;++o)f[o].e=e=!e;for(var c,s,l=u[0];;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=c.length;o<a;++o)i.point((s=c[o])[0],s[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((s=c[o])[0],s[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function li(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function hi(t,n){var e=n[0],r=n[1],i=op(r),o=[op(e),-tp(e),0],a=0,u=0;Ep.reset(),1===i?r=Gd+jd:-1===i&&(r=-Gd-jd);for(var f=0,c=t.length;f<c;++f)if(l=(s=t[f]).length)for(var s,l,h=s[l-1],d=h[0],p=h[1]/2+Vd,v=op(p),g=tp(p),y=0;y<l;++y,d=b,v=x,g=w,h=_){var _=s[y],b=_[0],m=_[1]/2+Vd,x=op(m),w=tp(m),M=b-d,A=M>=0?1:-1,T=A*M,N=T>Xd,S=v*x;if(Ep.add(Kd(S*A*op(T),g*w+S*tp(T))),a+=N?M+A*$d:M,N^d>=e^b>=e){var E=Sr(Tr(h),Tr(_));Cr(E);var k=Sr(o,E);Cr(k);var C=(N^M>=0?-1:1)*dr(k[2]);(r>C||r===C&&(E[0]||E[1]))&&(u+=N^M>=0?1:-1)}}return(a<-jd||a<jd&&Ep<-jd)^1&u}function di(t,n,e,r){return function(i){function o(n,e){t(n,e)&&i.point(n,e)}function a(t,n){v.point(t,n)}function u(){m.point=a,v.lineStart()}function f(){m.point=o,v.lineEnd()}function c(t,n){p.push([t,n]),_.point(t,n)}function s(){_.lineStart(),p=[]}function l(){c(p[0][0],p[0][1]),_.lineEnd();var t,n,e,r,o=_.clean(),a=g.result(),u=a.length;if(p.pop(),h.push(p),p=null,u)if(1&o){if(e=a[0],(n=e.length-1)>0){for(b||(i.polygonStart(),b=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else u>1&&2&o&&a.push(a.pop().concat(a.shift())),d.push(a.filter(pi))}var h,d,p,v=n(i),g=ui(),_=n(g),b=!1,m={point:o,lineStart:u,lineEnd:f,polygonStart:function(){m.point=c,m.lineStart=s,m.lineEnd=l,d=[],h=[]},polygonEnd:function(){m.point=o,m.lineStart=u,m.lineEnd=f,d=y(d);var t=hi(h,r);d.length?(b||(i.polygonStart(),b=!0),si(d,vi,t,e,i)):t&&(b||(i.polygonStart(),b=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),b&&(i.polygonEnd(),b=!1),d=h=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};return m}}function pi(t){return t.length>1}function vi(t,n){return((t=t.x)[0]<0?t[1]-Gd-jd:Gd-t[1])-((n=n.x)[0]<0?n[1]-Gd-jd:Gd-n[1])}function gi(t){function n(t,n){return tp(t)*tp(n)>i}function e(t,n,e){var r=[1,0,0],o=Sr(Tr(t),Tr(n)),a=Nr(o,o),u=o[0],f=a-u*u;if(!f)return!e&&t;var c=i*a/f,s=-i*u/f,l=Sr(r,o),h=kr(r,c);Er(h,kr(o,s));var d=l,p=Nr(h,d),v=Nr(d,d),g=p*p-v*(Nr(h,h)-1);if(!(g<0)){var y=up(g),_=kr(d,(-p-y)/v);if(Er(_,h),_=Ar(_),!e)return _;var b,m=t[0],x=n[0],w=t[1],M=n[1];x<m&&(b=m,m=x,x=b);var A=x-m,T=Qd(A-Xd)<jd;if(!T&&M<w&&(b=w,w=M,M=b),T||A<jd?T?w+M>0^_[1]<(Qd(_[0]-m)<jd?w:M):w<=_[1]&&_[1]<=M:A>Xd^(m<=_[0]&&_[0]<=x)){var N=kr(d,(-p+y)/v);return Er(N,h),[_,Ar(N)]}}}function r(n,e){var r=a?t:Xd-t,i=0;return n<-r?i|=1:n>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var i=tp(t),o=6*Zd,a=i>0,u=Qd(i)>jd;return di(n,function(t){var i,o,f,c,s;return{lineStart:function(){c=f=!1,s=1},point:function(l,h){var d,p=[l,h],v=n(l,h),g=a?v?0:r(l,h):v?r(l+(l<0?Xd:-Xd),h):0;if(!i&&(c=f=v)&&t.lineStart(),v!==f&&(!(d=e(i,p))||fi(i,d)||fi(p,d))&&(p[0]+=jd,p[1]+=jd,v=n(p[0],p[1])),v!==f)s=0,v?(t.lineStart(),d=e(p,i),t.point(d[0],d[1])):(d=e(i,p),t.point(d[0],d[1]),t.lineEnd()),i=d;else if(u&&i&&a^v){var y;g&o||!(y=e(p,i,!0))||(s=0,a?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!v||i&&fi(i,p)||t.point(p[0],p[1]),i=p,f=v,o=g},lineEnd:function(){f&&t.lineEnd(),i=null},clean:function(){return s|(c&&f)<<1}}},function(n,e,r,i){oi(i,t,o,r,n,e)},a?[0,-t]:[-Xd,t-Xd])}function yi(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,u,c){var s=0,l=0;if(null==i||(s=a(i,u))!==(l=a(o,u))||f(i,o)<0^u>0)do{c.point(0===s||3===s?t:e,s>1?r:n)}while((s=(s+u+4)%4)!==l);else c.point(o[0],o[1])}function a(r,i){return Qd(r[0]-t)<jd?i>0?0:3:Qd(r[0]-e)<jd?i>0?2:1:Qd(r[1]-n)<jd?i>0?1:0:i>0?3:2}function u(t,n){return f(t.x,n.x)}function f(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){function f(t,n){i(t,n)&&w.point(t,n)}function c(o,a){var u=i(o,a);if(l&&h.push([o,a]),m)d=o,p=a,v=u,m=!1,u&&(w.lineStart(),w.point(o,a));else if(u&&b)w.point(o,a);else{var f=[g=Math.max(Pp,Math.min(Cp,g)),_=Math.max(Pp,Math.min(Cp,_))],c=[o=Math.max(Pp,Math.min(Cp,o)),a=Math.max(Pp,Math.min(Cp,a))];!function(t,n,e,r,i,o){var a,u=t[0],f=t[1],c=0,s=1,l=n[0]-u,h=n[1]-f;if(a=e-u,l||!(a>0)){if(a/=l,l<0){if(a<c)return;a<s&&(s=a)}else if(l>0){if(a>s)return;a>c&&(c=a)}if(a=i-u,l||!(a<0)){if(a/=l,l<0){if(a>s)return;a>c&&(c=a)}else if(l>0){if(a<c)return;a<s&&(s=a)}if(a=r-f,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<s&&(s=a)}else if(h>0){if(a>s)return;a>c&&(c=a)}if(a=o-f,h||!(a<0)){if(a/=h,h<0){if(a>s)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<s&&(s=a)}return c>0&&(t[0]=u+c*l,t[1]=f+c*h),s<1&&(n[0]=u+s*l,n[1]=f+s*h),!0}}}}}(f,c,t,n,e,r)?u&&(w.lineStart(),w.point(o,a),x=!1):(b||(w.lineStart(),w.point(f[0],f[1])),w.point(c[0],c[1]),u||w.lineEnd(),x=!1)}g=o,_=a,b=u}var s,l,h,d,p,v,g,_,b,m,x,w=a,M=ui(),A={point:f,lineStart:function(){A.point=c,l&&l.push(h=[]),m=!0,b=!1,g=_=NaN},lineEnd:function(){s&&(c(d,p),v&&b&&M.rejoin(),s.push(M.result())),A.point=f,b&&w.lineEnd()},polygonStart:function(){w=M,s=[],l=[],x=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=l.length;e<i;++e)for(var o,a,u=l[e],f=1,c=u.length,s=u[0],h=s[0],d=s[1];f<c;++f)o=h,a=d,h=(s=u[f])[0],d=s[1],a<=r?d>r&&(h-o)*(r-a)>(d-a)*(t-o)&&++n:d<=r&&(h-o)*(r-a)<(d-a)*(t-o)&&--n;return n}(),e=x&&n,i=(s=y(s)).length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&si(s,u,n,o,a),a.polygonEnd()),w=a,s=l=h=null}};return A}}function _i(){Rp.point=Rp.lineEnd=vr}function bi(t,n){yp=t*=Zd,_p=op(n*=Zd),bp=tp(n),Rp.point=mi}function mi(t,n){t*=Zd;var e=op(n*=Zd),r=tp(n),i=Qd(t-yp),o=tp(i),a=r*op(i),u=bp*e-_p*r*o,f=_p*e+bp*r*o;zp.add(Kd(up(a*a+u*u),f)),yp=t,_p=e,bp=r}function xi(t){return zp.reset(),br(t,Rp),+zp}function wi(t,n){return Lp[0]=t,Lp[1]=n,xi(Dp)}function Mi(t,n){return!(!t||!qp.hasOwnProperty(t.type))&&qp[t.type](t,n)}function Ai(t,n){return 0===wi(t,n)}function Ti(t,n){var e=wi(t[0],t[1]);return wi(t[0],n)+wi(n,t[1])<=e+jd}function Ni(t,n){return!!hi(t.map(Si),Ei(n))}function Si(t){return(t=t.map(Ei)).pop(),t}function Ei(t){return[t[0]*Zd,t[1]*Zd]}function ki(t,n,e){var r=s(t,n-jd,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function Ci(t,n,e){var r=s(t,n-jd,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function Pi(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return s(np(o/y)*y,i,y).map(d).concat(s(np(c/_)*_,f,_).map(p)).concat(s(np(r/v)*v,e,v).filter(function(t){return Qd(t%y)>jd}).map(l)).concat(s(np(u/g)*g,a,g).filter(function(t){return Qd(t%_)>jd}).map(h))}var e,r,i,o,a,u,f,c,l,h,d,p,v=10,g=v,y=90,_=360,b=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(p(f).slice(1),d(i).reverse().slice(1),p(c).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.extentMajor(n).extentMinor(n):t.extentMinor()},t.extentMajor=function(n){return arguments.length?(o=+n[0][0],i=+n[1][0],c=+n[0][1],f=+n[1][1],o>i&&(n=o,o=i,i=n),c>f&&(n=c,c=f,f=n),t.precision(b)):[[o,c],[i,f]]},t.extentMinor=function(n){return arguments.length?(r=+n[0][0],e=+n[1][0],u=+n[0][1],a=+n[1][1],r>e&&(n=r,r=e,e=n),u>a&&(n=u,u=a,a=n),t.precision(b)):[[r,u],[e,a]]},t.step=function(n){return arguments.length?t.stepMajor(n).stepMinor(n):t.stepMinor()},t.stepMajor=function(n){return arguments.length?(y=+n[0],_=+n[1],t):[y,_]},t.stepMinor=function(n){return arguments.length?(v=+n[0],g=+n[1],t):[v,g]},t.precision=function(n){return arguments.length?(b=+n,l=ki(u,a,90),h=Ci(r,e,b),d=ki(c,f,90),p=Ci(o,i,b),t):b},t.extentMajor([[-180,-90+jd],[180,90-jd]]).extentMinor([[-180,-80-jd],[180,80+jd]])}function zi(t){return t}function Ri(){Bp.point=Li}function Li(t,n){Bp.point=Di,mp=wp=t,xp=Mp=n}function Di(t,n){Yp.add(Mp*t-wp*n),wp=t,Mp=n}function Ui(){Di(mp,xp)}function qi(t,n){Gp+=t,Vp+=n,++$p}function Oi(){nv.point=Yi}function Yi(t,n){nv.point=Bi,qi(Np=t,Sp=n)}function Bi(t,n){var e=t-Np,r=n-Sp,i=up(e*e+r*r);Wp+=i*(Np+t)/2,Zp+=i*(Sp+n)/2,Qp+=i,qi(Np=t,Sp=n)}function Fi(){nv.point=qi}function Ii(){nv.point=Hi}function ji(){Xi(Ap,Tp)}function Hi(t,n){nv.point=Xi,qi(Ap=Np=t,Tp=Sp=n)}function Xi(t,n){var e=t-Np,r=n-Sp,i=up(e*e+r*r);Wp+=i*(Np+t)/2,Zp+=i*(Sp+n)/2,Qp+=i,Jp+=(i=Sp*t-Np*n)*(Np+t),Kp+=i*(Sp+n),tv+=3*i,qi(Np=t,Sp=n)}function Gi(t){this._context=t}function Vi(t,n){fv.point=$i,rv=ov=t,iv=av=n}function $i(t,n){ov-=t,av-=n,uv.add(up(ov*ov+av*av)),ov=t,av=n}function Wi(){this._string=[]}function Zi(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Qi(t){return function(n){var e=new Ji;for(var r in t)e[r]=t[r];return e.stream=n,e}}function Ji(){}function Ki(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),br(e,t.stream(Xp)),n(Xp.result()),null!=r&&t.clipExtent(r),t}function to(t,n,e){return Ki(t,function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),a=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,u])},e)}function no(t,n,e){return to(t,[[0,0],n],e)}function eo(t,n,e){return Ki(t,function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,a=-i*e[0][1];t.scale(150*i).translate([o,a])},e)}function ro(t,n,e){return Ki(t,function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],a=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,a])},e)}function io(t,n){return+n?function(t,n){function e(r,i,o,a,u,f,c,s,l,h,d,p,v,g){var y=c-r,_=s-i,b=y*y+_*_;if(b>4*n&&v--){var m=a+h,x=u+d,w=f+p,M=up(m*m+x*x+w*w),A=dr(w/=M),T=Qd(Qd(w)-1)<jd||Qd(o-l)<jd?(o+l)/2:Kd(x,m),N=t(T,A),S=N[0],E=N[1],k=S-r,C=E-i,P=_*k-y*C;(P*P/b>n||Qd((y*k+_*C)/b-.5)>.3||a*h+u*d+f*p<sv)&&(e(r,i,o,a,u,f,S,E,T,m/=M,x/=M,w,v,g),g.point(S,E),e(S,E,T,m,x,w,c,s,l,h,d,p,v,g))}}return function(n){function r(e,r){e=t(e,r),n.point(e[0],e[1])}function i(){y=NaN,w.point=o,n.lineStart()}function o(r,i){var o=Tr([r,i]),a=t(r,i);e(y,_,g,b,m,x,y=a[0],_=a[1],g=r,b=o[0],m=o[1],x=o[2],cv,n),n.point(y,_)}function a(){w.point=r,n.lineEnd()}function u(){i(),w.point=f,w.lineEnd=c}function f(t,n){o(s=t,n),l=y,h=_,d=b,p=m,v=x,w.point=o}function c(){e(y,_,g,b,m,x,l,h,s,d,p,v,cv,n),w.lineEnd=a,a()}var s,l,h,d,p,v,g,y,_,b,m,x,w={point:r,lineStart:i,lineEnd:a,polygonStart:function(){n.polygonStart(),w.lineStart=u},polygonEnd:function(){n.polygonEnd(),w.lineStart=i}};return w}}(t,n):function(t){return Qi({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}function oo(t,n,e,r){function i(t,r){return[u*t-f*r+n,e-f*t-u*r]}var o=tp(r),a=op(r),u=o*t,f=a*t,c=o/t,s=a/t,l=(a*e-o*n)/t,h=(a*n+o*e)/t;return i.invert=function(t,n){return[c*t-s*n+l,h-s*t-c*n]},i}function ao(t){return uo(function(){return t})()}function uo(t){function n(t){return l(t[0]*Zd,t[1]*Zd)}function e(){var t=oo(p,0,0,w).apply(null,i(y,_)),n=(w?oo:function(t,n,e){function r(r,i){return[n+t*r,e-t*i]}return r.invert=function(r,i){return[(r-n)/t,(e-i)/t]},r})(p,v-t[0],g-t[1],w);return o=ti(b,m,x),s=Jr(i,n),l=Jr(o,s),c=io(s,S),r()}function r(){return h=d=null,n}var i,o,a,u,f,c,s,l,h,d,p=150,v=480,g=250,y=0,_=0,b=0,m=0,x=0,w=0,M=null,A=kp,T=null,N=zi,S=.5;return n.stream=function(t){return h&&d===t?h:h=lv(function(t){return Qi({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(o)(A(c(N(d=t)))))},n.preclip=function(t){return arguments.length?(A=t,M=void 0,r()):A},n.postclip=function(t){return arguments.length?(N=t,T=a=u=f=null,r()):N},n.clipAngle=function(t){return arguments.length?(A=+t?gi(M=t*Zd):(M=null,kp),r()):M*Wd},n.clipExtent=function(t){return arguments.length?(N=null==t?(T=a=u=f=null,zi):yi(T=+t[0][0],a=+t[0][1],u=+t[1][0],f=+t[1][1]),r()):null==T?null:[[T,a],[u,f]]},n.scale=function(t){return arguments.length?(p=+t,e()):p},n.translate=function(t){return arguments.length?(v=+t[0],g=+t[1],e()):[v,g]},n.center=function(t){return arguments.length?(y=t[0]%360*Zd,_=t[1]%360*Zd,e()):[y*Wd,_*Wd]},n.rotate=function(t){return arguments.length?(b=t[0]%360*Zd,m=t[1]%360*Zd,x=t.length>2?t[2]%360*Zd:0,e()):[b*Wd,m*Wd,x*Wd]},n.angle=function(t){return arguments.length?(w=t%360*Zd,e()):w*Wd},n.precision=function(t){return arguments.length?(c=io(s,S=t*t),r()):up(S)},n.fitExtent=function(t,e){return to(n,t,e)},n.fitSize=function(t,e){return no(n,t,e)},n.fitWidth=function(t,e){return eo(n,t,e)},n.fitHeight=function(t,e){return ro(n,t,e)},function(){return i=t.apply(this,arguments),n.invert=i.invert&&function(t){return(t=l.invert(t[0],t[1]))&&[t[0]*Wd,t[1]*Wd]},e()}}function fo(t){var n=0,e=Xd/3,r=uo(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*Zd,e=t[1]*Zd):[n*Wd,e*Wd]},i}function co(t,n){function e(t,n){var e=up(o-2*i*op(n))/i;return[e*op(t*=i),a-e*tp(t)]}var r=op(t),i=(r+op(n))/2;if(Qd(i)<jd)return function(t){function n(t,n){return[t*e,op(n)/e]}var e=tp(t);return n.invert=function(t,n){return[t/e,dr(n*e)]},n}(t);var o=1+r*(2*i-r),a=up(o)/i;return e.invert=function(t,n){var e=a-n;return[Kd(t,Qd(e))/i*ap(e),dr((o-(t*t+e*e)*i*i)/(2*i))]},e}function so(){return fo(co).scale(155.424).center([0,33.6442])}function lo(){return so().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ho(t){return function(n,e){var r=tp(n),i=tp(e),o=t(r*i);return[o*i*op(n),o*op(e)]}}function po(t){return function(n,e){var r=up(n*n+e*e),i=t(r),o=op(i),a=tp(i);return[Kd(n*o,r*a),dr(r&&e*o/r)]}}function vo(t,n){return[t,rp(fp((Gd+n)/2))]}function go(t){function n(){var n=Xd*u(),a=o(ii(o.rotate()).invert([0,0]));return c(null==s?[[a[0]-n,a[1]-n],[a[0]+n,a[1]+n]]:t===vo?[[Math.max(a[0]-n,s),e],[Math.min(a[0]+n,r),i]]:[[s,Math.max(a[1]-n,e)],[r,Math.min(a[1]+n,i)]])}var e,r,i,o=ao(t),a=o.center,u=o.scale,f=o.translate,c=o.clipExtent,s=null;return o.scale=function(t){return arguments.length?(u(t),n()):u()},o.translate=function(t){return arguments.length?(f(t),n()):f()},o.center=function(t){return arguments.length?(a(t),n()):a()},o.clipExtent=function(t){return arguments.length?(null==t?s=e=r=i=null:(s=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),n()):null==s?null:[[s,e],[r,i]]},n()}function yo(t){return fp((Gd+t)/2)}function _o(t,n){function e(t,n){o>0?n<-Gd+jd&&(n=-Gd+jd):n>Gd-jd&&(n=Gd-jd);var e=o/ip(yo(n),i);return[e*op(i*t),o-e*tp(i*t)]}var r=tp(t),i=t===n?op(t):rp(r/tp(n))/rp(yo(n)/yo(t)),o=r*ip(yo(t),i)/i;return i?(e.invert=function(t,n){var e=o-n,r=ap(i)*up(t*t+e*e);return[Kd(t,Qd(e))/i*ap(e),2*Jd(ip(o/r,1/i))-Gd]},e):vo}function bo(t,n){return[t,n]}function mo(t,n){function e(t,n){var e=o-n,r=i*t;return[e*op(r),o-e*tp(r)]}var r=tp(t),i=t===n?op(t):(r-tp(n))/(n-t),o=r/i+t;return Qd(i)<jd?bo:(e.invert=function(t,n){var e=o-n;return[Kd(t,Qd(e))/i*ap(e),o-ap(i)*up(t*t+e*e)]},e)}function xo(t,n){var e=tp(n),r=tp(t)*e;return[e*op(t)/r,op(n)/r]}function wo(t,n,e,r){return 1===t&&1===n&&0===e&&0===r?zi:Qi({point:function(i,o){this.stream.point(i*t+e,o*n+r)}})}function Mo(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}function Ao(t,n){return[tp(n)*op(t),op(n)]}function To(t,n){var e=tp(n),r=1+tp(t)*e;return[e*op(t)/r,op(n)/r]}function No(t,n){return[rp(fp((Gd+n)/2)),-t]}function So(t,n){return t.parent===n.parent?1:2}function Eo(t,n){return t+n.x}function ko(t,n){return Math.max(t,n.y)}function Co(t){var n=0,e=t.children,r=e&&e.length;if(r)for(;--r>=0;)n+=e[r].value;else n=1;t.value=n}function Po(t,n){var e,r,i,o,a,u=new Do(t),f=+t.value&&(u.value=t.value),c=[u];for(null==n&&(n=zo);e=c.pop();)if(f&&(e.value=+e.data.value),(i=n(e.data))&&(a=i.length))for(e.children=new Array(a),o=a-1;o>=0;--o)c.push(r=e.children[o]=new Do(i[o])),r.parent=e,r.depth=e.depth+1;return u.eachBefore(Lo)}function zo(t){return t.children}function Ro(t){t.data=t.data.data}function Lo(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function Do(t){this.data=t,this.depth=this.height=0,this.parent=null}function Uo(t){for(var n,e,r=0,i=(t=function(t){for(var n,e,r=t.length;r;)e=Math.random()*r--|0,n=t[r],t[r]=t[e],t[e]=n;return t}(pv.call(t))).length,o=[];r<i;)n=t[r],e&&Oo(e,n)?++r:(e=function(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return Bo(t[0],t[1]);case 3:return Fo(t[0],t[1],t[2])}}(o=function(t,n){var e,r;if(Yo(n,t))return[n];for(e=0;e<t.length;++e)if(qo(n,t[e])&&Yo(Bo(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(qo(Bo(t[e],t[r]),n)&&qo(Bo(t[e],n),t[r])&&qo(Bo(t[r],n),t[e])&&Yo(Fo(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}(o,n)),r=0);return e}function qo(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function Oo(t,n){var e=t.r-n.r+1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function Yo(t,n){for(var e=0;e<n.length;++e)if(!Oo(t,n[e]))return!1;return!0}function Bo(t,n){var e=t.x,r=t.y,i=t.r,o=n.x,a=n.y,u=n.r,f=o-e,c=a-r,s=u-i,l=Math.sqrt(f*f+c*c);return{x:(e+o+f/l*s)/2,y:(r+a+c/l*s)/2,r:(l+i+u)/2}}function Fo(t,n,e){var r=t.x,i=t.y,o=t.r,a=n.x,u=n.y,f=n.r,c=e.x,s=e.y,l=e.r,h=r-a,d=r-c,p=i-u,v=i-s,g=f-o,y=l-o,_=r*r+i*i-o*o,b=_-a*a-u*u+f*f,m=_-c*c-s*s+l*l,x=d*p-h*v,w=(p*m-v*b)/(2*x)-r,M=(v*g-p*y)/x,A=(d*b-h*m)/(2*x)-i,T=(h*y-d*g)/x,N=M*M+T*T-1,S=2*(o+w*M+A*T),E=w*w+A*A-o*o,k=-(N?(S+Math.sqrt(S*S-4*N*E))/(2*N):E/S);return{x:r+w+M*k,y:i+A+T*k,r:k}}function Io(t,n,e){var r,i,o,a,u=t.x-n.x,f=t.y-n.y,c=u*u+f*f;c?(i=n.r+e.r,i*=i,a=t.r+e.r,i>(a*=a)?(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),e.x=t.x-r*u-o*f,e.y=t.y-r*f+o*u):(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),e.x=n.x+r*u-o*f,e.y=n.y+r*f+o*u)):(e.x=n.x+e.r,e.y=n.y)}function jo(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function Ho(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,o=(n.y*e.r+e.y*n.r)/r;return i*i+o*o}function Xo(t){this._=t,this.next=null,this.previous=null}function Go(t){if(!(i=t.length))return 0;var n,e,r,i,o,a,u,f,c,s,l;if(n=t[0],n.x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;Io(e,n,r=t[2]),n=new Xo(n),e=new Xo(e),r=new Xo(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(u=3;u<i;++u){Io(n._,e._,r=t[u]),r=new Xo(r),f=e.next,c=n.previous,s=e._.r,l=n._.r;do{if(s<=l){if(jo(f._,r._)){e=f,n.next=e,e.previous=n,--u;continue t}s+=f._.r,f=f.next}else{if(jo(c._,r._)){(n=c).next=e,e.previous=n,--u;continue t}l+=c._.r,c=c.previous}}while(f!==c.next);for(r.previous=n,r.next=e,n.next=e.previous=e=r,o=Ho(n);(r=r.next)!==e;)(a=Ho(r))<o&&(n=r,o=a);e=n.next}for(n=[e._],r=e;(r=r.next)!==e;)n.push(r._);for(r=Uo(n),u=0;u<i;++u)n=t[u],n.x-=r.x,n.y-=r.y;return r.r}function Vo(t){if("function"!=typeof t)throw new Error;return t}function $o(){return 0}function Wo(t){return function(){return t}}function Zo(t){return Math.sqrt(t.value)}function Qo(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Jo(t,n){return function(e){if(r=e.children){var r,i,o,a=r.length,u=t(e)*n||0;if(u)for(i=0;i<a;++i)r[i].r+=u;if(o=Go(r),u)for(i=0;i<a;++i)r[i].r-=u;e.r=o+u}}}function Ko(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function ta(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function na(t,n,e,r,i){for(var o,a=t.children,u=-1,f=a.length,c=t.value&&(r-n)/t.value;++u<f;)(o=a[u]).y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*c}function ea(t){return t.id}function ra(t){return t.parentId}function ia(t,n){return t.parent===n.parent?1:2}function oa(t){var n=t.children;return n?n[0]:t.t}function aa(t){var n=t.children;return n?n[n.length-1]:t.t}function ua(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function fa(t,n,e){return t.a.parent===n.parent?t.a:e}function ca(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function sa(t,n,e,r,i){for(var o,a=t.children,u=-1,f=a.length,c=t.value&&(i-e)/t.value;++u<f;)(o=a[u]).x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*c}function la(t,n,e,r,i,o){for(var a,u,f,c,s,l,h,d,p,v,g,y=[],_=n.children,b=0,m=0,x=_.length,w=n.value;b<x;){f=i-e,c=o-r;do{s=_[m++].value}while(!s&&m<x);for(l=h=s,g=s*s*(v=Math.max(c/f,f/c)/(w*t)),p=Math.max(h/g,g/l);m<x;++m){if(s+=u=_[m].value,u<l&&(l=u),u>h&&(h=u),g=s*s*v,(d=Math.max(h/g,g/l))>p){s-=u;break}p=d}y.push(a={value:s,dice:f<c,children:_.slice(b,m)}),a.dice?na(a,e,r,i,w?r+=c*s/w:o):sa(a,e,r,w?e+=f*s/w:i,o),w-=s,b=m}return y}function ha(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function da(t,n){return t[0]-n[0]||t[1]-n[1]}function pa(t){for(var n=t.length,e=[0,1],r=2,i=2;i<n;++i){for(;r>1&&ha(t[e[r-2]],t[e[r-1]],t[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function va(){return Math.random()}function ga(t){function n(n){var o=n+"",a=e.get(o);if(!a){if(i!==Cv)return i;e.set(o,a=r.push(n))}return t[(a-1)%t.length]}var e=he(),r=[],i=Cv;return t=null==t?[]:kv.call(t),n.domain=function(t){if(!arguments.length)return r.slice();r=[],e=he();for(var i,o,a=-1,u=t.length;++a<u;)e.has(o=(i=t[a])+"")||e.set(o,r.push(i));return n},n.range=function(e){return arguments.length?(t=kv.call(e),n):t.slice()},n.unknown=function(t){return arguments.length?(i=t,n):i},n.copy=function(){return ga().domain(r).range(t).unknown(i)},n}function ya(){function t(){var t=i().length,r=a[1]<a[0],h=a[r-0],d=a[1-r];n=(d-h)/Math.max(1,t-f+2*c),u&&(n=Math.floor(n)),h+=(d-h-n*(t-f))*l,e=n*(1-f),u&&(h=Math.round(h),e=Math.round(e));var p=s(t).map(function(t){return h+n*t});return o(r?p.reverse():p)}var n,e,r=ga().unknown(void 0),i=r.domain,o=r.range,a=[0,1],u=!1,f=0,c=0,l=.5;return delete r.unknown,r.domain=function(n){return arguments.length?(i(n),t()):i()},r.range=function(n){return arguments.length?(a=[+n[0],+n[1]],t()):a.slice()},r.rangeRound=function(n){return a=[+n[0],+n[1]],u=!0,t()},r.bandwidth=function(){return e},r.step=function(){return n},r.round=function(n){return arguments.length?(u=!!n,t()):u},r.padding=function(n){return arguments.length?(f=c=Math.max(0,Math.min(1,n)),t()):f},r.paddingInner=function(n){return arguments.length?(f=Math.max(0,Math.min(1,n)),t()):f},r.paddingOuter=function(n){return arguments.length?(c=Math.max(0,Math.min(1,n)),t()):c},r.align=function(n){return arguments.length?(l=Math.max(0,Math.min(1,n)),t()):l},r.copy=function(){return ya().domain(i()).range(a).round(u).paddingInner(f).paddingOuter(c).align(l)},t()}function _a(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return _a(n())},t}function ba(t){return function(){return t}}function ma(t){return+t}function xa(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:ba(n)}function wa(t,n,e,r){var i=t[0],o=t[1],a=n[0],u=n[1];return o<i?(i=e(o,i),a=r(u,a)):(i=e(i,o),a=r(a,u)),function(t){return a(i(t))}}function Ma(t,n,e,r){var i=Math.min(t.length,n.length)-1,o=new Array(i),a=new Array(i),u=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++u<i;)o[u]=e(t[u],t[u+1]),a[u]=r(n[u],n[u+1]);return function(n){var e=Jc(t,n,1,i)-1;return a[e](o[e](n))}}function Aa(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Ta(t,n){function e(){return i=Math.min(u.length,f.length)>2?Ma:wa,o=a=null,r}function r(n){return(o||(o=i(u,f,s?function(t){return function(n,e){var r=t(n=+n,e=+e);return function(t){return t<=n?0:t>=e?1:r(t)}}}(t):t,c)))(+n)}var i,o,a,u=Pv,f=Pv,c=dn,s=!1;return r.invert=function(t){return(a||(a=i(f,u,xa,s?function(t){return function(n,e){var r=t(n=+n,e=+e);return function(t){return t<=0?n:t>=1?e:r(t)}}}(n):n)))(+t)},r.domain=function(t){return arguments.length?(u=Ev.call(t,ma),e()):u.slice()},r.range=function(t){return arguments.length?(f=kv.call(t),e()):f.slice()},r.rangeRound=function(t){return f=kv.call(t),c=pn,e()},r.clamp=function(t){return arguments.length?(s=!!t,e()):s},r.interpolate=function(t){return arguments.length?(c=t,e()):c},e()}function Na(n){var e=n.domain;return n.ticks=function(t){var n=e();return l(n[0],n[n.length-1],null==t?10:t)},n.tickFormat=function(n,r){return function(n,e,r){var i,o=n[0],a=n[n.length-1],u=d(o,a,null==e?10:e);switch((r=tr(null==r?",f":r)).type){case"s":var f=Math.max(Math.abs(o),Math.abs(a));return null!=r.precision||isNaN(i=ur(u,f))||(r.precision=i),t.formatPrefix(r,f);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=fr(u,Math.max(Math.abs(o),Math.abs(a))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=ar(u))||(r.precision=i-2*("%"===r.type))}return t.format(r)}(e(),n,r)},n.nice=function(t){null==t&&(t=10);var r,i=e(),o=0,a=i.length-1,u=i[o],f=i[a];return f<u&&(r=u,u=f,f=r,r=o,o=a,a=r),(r=h(u,f,t))>0?r=h(u=Math.floor(u/r)*r,f=Math.ceil(f/r)*r,t):r<0&&(r=h(u=Math.ceil(u*r)/r,f=Math.floor(f*r)/r,t)),r>0?(i[o]=Math.floor(u/r)*r,i[a]=Math.ceil(f/r)*r,e(i)):r<0&&(i[o]=Math.ceil(u*r)/r,i[a]=Math.floor(f*r)/r,e(i)),n},n}function Sa(){var t=Ta(xa,sn);return t.copy=function(){return Aa(t,Sa())},Na(t)}function Ea(){function t(t){return+t}var n=[0,1];return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=Ev.call(e,ma),t):n.slice()},t.copy=function(){return Ea().domain(n)},Na(t)}function ka(t,n){var e,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}function Ca(t,n){return(n=Math.log(n/t))?function(e){return Math.log(e/t)/n}:ba(n)}function Pa(t,n){return t<0?function(e){return-Math.pow(-n,e)*Math.pow(-t,1-e)}:function(e){return Math.pow(n,e)*Math.pow(t,1-e)}}function za(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Ra(t){return 10===t?za:t===Math.E?Math.exp:function(n){return Math.pow(t,n)}}function La(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(n){return Math.log(n)/t})}function Da(t){return function(n){return-t(-n)}}function Ua(){function n(){return o=La(i),a=Ra(i),r()[0]<0&&(o=Da(o),a=Da(a)),e}var e=Ta(Ca,Pa).domain([1,10]),r=e.domain,i=10,o=La(10),a=Ra(10);return e.base=function(t){return arguments.length?(i=+t,n()):i},e.domain=function(t){return arguments.length?(r(t),n()):r()},e.ticks=function(t){var n,e=r(),u=e[0],f=e[e.length-1];(n=f<u)&&(d=u,u=f,f=d);var c,s,h,d=o(u),p=o(f),v=null==t?10:+t,g=[];if(!(i%1)&&p-d<v){if(d=Math.round(d)-1,p=Math.round(p)+1,u>0){for(;d<p;++d)for(s=1,c=a(d);s<i;++s)if(!((h=c*s)<u)){if(h>f)break;g.push(h)}}else for(;d<p;++d)for(s=i-1,c=a(d);s>=1;--s)if(!((h=c*s)<u)){if(h>f)break;g.push(h)}}else g=l(d,p,Math.min(p-d,v)).map(a);return n?g.reverse():g},e.tickFormat=function(n,r){if(null==r&&(r=10===i?".0e":","),"function"!=typeof r&&(r=t.format(r)),n===1/0)return r;null==n&&(n=10);var u=Math.max(1,i*n/e.ticks().length);return function(t){var n=t/a(Math.round(o(t)));return n*i<i-.5&&(n*=i),n<=u?r(t):""}},e.nice=function(){return r(ka(r(),{floor:function(t){return a(Math.floor(o(t)))},ceil:function(t){return a(Math.ceil(o(t)))}}))},e.copy=function(){return Aa(e,Ua().base(i))},e}function qa(t,n){return t<0?-Math.pow(-t,n):Math.pow(t,n)}function Oa(){var t=1,n=Ta(function(n,e){return(e=qa(e,t)-(n=qa(n,t)))?function(r){return(qa(r,t)-n)/e}:ba(e)},function(n,e){return e=qa(e,t)-(n=qa(n,t)),function(r){return qa(n+e*r,1/t)}}),e=n.domain;return n.exponent=function(n){return arguments.length?(t=+n,e(e())):t},n.copy=function(){return Aa(n,Oa().exponent(t))},Na(n)}function Ya(){function t(){var t=0,n=Math.max(1,i.length);for(o=new Array(n-1);++t<n;)o[t-1]=v(r,t/n);return e}function e(t){if(!isNaN(t=+t))return i[Jc(o,t)]}var r=[],i=[],o=[];return e.invertExtent=function(t){var n=i.indexOf(t);return n<0?[NaN,NaN]:[n>0?o[n-1]:r[0],n<o.length?o[n]:r[r.length-1]]},e.domain=function(e){if(!arguments.length)return r.slice();r=[];for(var i,o=0,a=e.length;o<a;++o)null==(i=e[o])||isNaN(i=+i)||r.push(i);return r.sort(n),t()},e.range=function(n){return arguments.length?(i=kv.call(n),t()):i.slice()},e.quantiles=function(){return o.slice()},e.copy=function(){return Ya().domain(r).range(i)},e}function Ba(){function t(t){if(t<=t)return a[Jc(o,t,0,i)]}function n(){var n=-1;for(o=new Array(i);++n<i;)o[n]=((n+1)*r-(n-i)*e)/(i+1);return t}var e=0,r=1,i=1,o=[.5],a=[0,1];return t.domain=function(t){return arguments.length?(e=+t[0],r=+t[1],n()):[e,r]},t.range=function(t){return arguments.length?(i=(a=kv.call(t)).length-1,n()):a.slice()},t.invertExtent=function(t){var n=a.indexOf(t);return n<0?[NaN,NaN]:n<1?[e,o[0]]:n>=i?[o[i-1],r]:[o[n-1],o[n]]},t.copy=function(){return Ba().domain([e,r]).range(a)},Na(t)}function Fa(){function t(t){if(t<=t)return e[Jc(n,t,0,r)]}var n=[.5],e=[0,1],r=1;return t.domain=function(i){return arguments.length?(n=kv.call(i),r=Math.min(n.length,e.length-1),t):n.slice()},t.range=function(i){return arguments.length?(e=kv.call(i),r=Math.min(n.length,e.length-1),t):e.slice()},t.invertExtent=function(t){var r=e.indexOf(t);return[n[r-1],n[r]]},t.copy=function(){return Fa().domain(n).range(e)},t}function Ia(t,n,e,r){function i(n){return t(n=new Date(+n)),n}return i.floor=i,i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,o){var a,u=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return u;do{u.push(a=new Date(+e)),n(e,o),t(e)}while(a<e&&e<r);return u},i.filter=function(e){return Ia(function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););})},e&&(i.count=function(n,r){return zv.setTime(+n),Rv.setTime(+r),t(zv),t(Rv),Math.floor(e(zv,Rv))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t==0}:function(n){return i.count(0,n)%t==0}):i:null}),i}function ja(t){return Ia(function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Uv)/qv})}function Ha(t){return Ia(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/qv})}function Xa(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ga(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Va(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function $a(t){function n(t,n){return function(e){var r,i,o,a=[],u=-1,f=0,c=t.length;for(e instanceof Date||(e=new Date(+e));++u<c;)37===t.charCodeAt(u)&&(a.push(t.slice(f,u)),null!=(i=Dg[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),a.push(r),f=u+1);return a.push(t.slice(f,u)),a.join("")}}function e(t,n){return function(e){var i,o,a=Va(1900);if(r(a,t,e+="",0)!=e.length)return null;if("Q"in a)return new Date(a.Q);if("p"in a&&(a.H=a.H%12+12*a.p),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(o=(i=Ga(Va(a.y))).getUTCDay())>4||0===o?yg.ceil(i):yg(i),i=pg.offset(i,7*(a.V-1)),a.y=i.getUTCFullYear(),a.m=i.getUTCMonth(),a.d=i.getUTCDate()+(a.w+6)%7):(i=(o=(i=n(Va(a.y))).getDay())>4||0===o?Vv.ceil(i):Vv(i),i=Hv.offset(i,7*(a.V-1)),a.y=i.getFullYear(),a.m=i.getMonth(),a.d=i.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),o="Z"in a?Ga(Va(a.y)).getUTCDay():n(Va(a.y)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(o+5)%7:a.w+7*a.U-(o+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Ga(a)):n(a)}}function r(t,n,e,r){for(var i,o,a=0,u=n.length,f=e.length;a<u;){if(r>=f)return-1;if(37===(i=n.charCodeAt(a++))){if(i=n.charAt(a++),!(o=A[i in Dg?n.charAt(a++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}var i=t.dateTime,o=t.date,a=t.time,u=t.periods,f=t.days,c=t.shortDays,s=t.months,l=t.shortMonths,h=Qa(u),d=Ja(u),p=Qa(f),v=Ja(f),g=Qa(c),y=Ja(c),_=Qa(s),b=Ja(s),m=Qa(l),x=Ja(l),w={a:function(t){return c[t.getDay()]},A:function(t){return f[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:_u,e:_u,f:Mu,H:bu,I:mu,j:xu,L:wu,m:Au,M:Tu,p:function(t){return u[+(t.getHours()>=12)]},Q:Ku,s:tf,S:Nu,u:Su,U:Eu,V:ku,w:Cu,W:Pu,x:null,X:null,y:zu,Y:Ru,Z:Lu,"%":Ju},M={a:function(t){return c[t.getUTCDay()]},A:function(t){return f[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Du,e:Du,f:Bu,H:Uu,I:qu,j:Ou,L:Yu,m:Fu,M:Iu,p:function(t){return u[+(t.getUTCHours()>=12)]},Q:Ku,s:tf,S:ju,u:Hu,U:Xu,V:Gu,w:Vu,W:$u,x:null,X:null,y:Wu,Y:Zu,Z:Qu,"%":Ju},A={a:function(t,n,e){var r=g.exec(n.slice(e));return r?(t.w=y[r[0].toLowerCase()],e+r[0].length):-1},A:function(t,n,e){var r=p.exec(n.slice(e));return r?(t.w=v[r[0].toLowerCase()],e+r[0].length):-1},b:function(t,n,e){var r=m.exec(n.slice(e));return r?(t.m=x[r[0].toLowerCase()],e+r[0].length):-1},B:function(t,n,e){var r=_.exec(n.slice(e));return r?(t.m=b[r[0].toLowerCase()],e+r[0].length):-1},c:function(t,n,e){return r(t,i,n,e)},d:fu,e:fu,f:pu,H:su,I:su,j:cu,L:du,m:uu,M:lu,p:function(t,n,e){var r=h.exec(n.slice(e));return r?(t.p=d[r[0].toLowerCase()],e+r[0].length):-1},Q:gu,s:yu,S:hu,u:tu,U:nu,V:eu,w:Ka,W:ru,x:function(t,n,e){return r(t,o,n,e)},X:function(t,n,e){return r(t,a,n,e)},y:ou,Y:iu,Z:au,"%":vu};return w.x=n(o,w),w.X=n(a,w),w.c=n(i,w),M.x=n(o,M),M.X=n(a,M),M.c=n(i,M),{format:function(t){var e=n(t+="",w);return e.toString=function(){return t},e},parse:function(t){var n=e(t+="",Xa);return n.toString=function(){return t},n},utcFormat:function(t){var e=n(t+="",M);return e.toString=function(){return t},e},utcParse:function(t){var n=e(t,Ga);return n.toString=function(){return t},n}}}function Wa(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function Za(t){return t.replace(Og,"\\$&")}function Qa(t){return new RegExp("^(?:"+t.map(Za).join("|")+")","i")}function Ja(t){for(var n={},e=-1,r=t.length;++e<r;)n[t[e].toLowerCase()]=e;return n}function Ka(t,n,e){var r=Ug.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function tu(t,n,e){var r=Ug.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function nu(t,n,e){var r=Ug.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function eu(t,n,e){var r=Ug.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function ru(t,n,e){var r=Ug.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function iu(t,n,e){var r=Ug.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function ou(t,n,e){var r=Ug.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function au(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function uu(t,n,e){var r=Ug.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function fu(t,n,e){var r=Ug.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function cu(t,n,e){var r=Ug.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function su(t,n,e){var r=Ug.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function lu(t,n,e){var r=Ug.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function hu(t,n,e){var r=Ug.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function du(t,n,e){var r=Ug.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function pu(t,n,e){var r=Ug.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function vu(t,n,e){var r=qg.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function gu(t,n,e){var r=Ug.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function yu(t,n,e){var r=Ug.exec(n.slice(e));return r?(t.Q=1e3*+r[0],e+r[0].length):-1}function _u(t,n){return Wa(t.getDate(),n,2)}function bu(t,n){return Wa(t.getHours(),n,2)}function mu(t,n){return Wa(t.getHours()%12||12,n,2)}function xu(t,n){return Wa(1+Hv.count(fg(t),t),n,3)}function wu(t,n){return Wa(t.getMilliseconds(),n,3)}function Mu(t,n){return wu(t,n)+"000"}function Au(t,n){return Wa(t.getMonth()+1,n,2)}function Tu(t,n){return Wa(t.getMinutes(),n,2)}function Nu(t,n){return Wa(t.getSeconds(),n,2)}function Su(t){var n=t.getDay();return 0===n?7:n}function Eu(t,n){return Wa(Gv.count(fg(t),t),n,2)}function ku(t,n){var e=t.getDay();return t=e>=4||0===e?Zv(t):Zv.ceil(t),Wa(Zv.count(fg(t),t)+(4===fg(t).getDay()),n,2)}function Cu(t){return t.getDay()}function Pu(t,n){return Wa(Vv.count(fg(t),t),n,2)}function zu(t,n){return Wa(t.getFullYear()%100,n,2)}function Ru(t,n){return Wa(t.getFullYear()%1e4,n,4)}function Lu(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Wa(n/60|0,"0",2)+Wa(n%60,"0",2)}function Du(t,n){return Wa(t.getUTCDate(),n,2)}function Uu(t,n){return Wa(t.getUTCHours(),n,2)}function qu(t,n){return Wa(t.getUTCHours()%12||12,n,2)}function Ou(t,n){return Wa(1+pg.count(zg(t),t),n,3)}function Yu(t,n){return Wa(t.getUTCMilliseconds(),n,3)}function Bu(t,n){return Yu(t,n)+"000"}function Fu(t,n){return Wa(t.getUTCMonth()+1,n,2)}function Iu(t,n){return Wa(t.getUTCMinutes(),n,2)}function ju(t,n){return Wa(t.getUTCSeconds(),n,2)}function Hu(t){var n=t.getUTCDay();return 0===n?7:n}function Xu(t,n){return Wa(gg.count(zg(t),t),n,2)}function Gu(t,n){var e=t.getUTCDay();return t=e>=4||0===e?mg(t):mg.ceil(t),Wa(mg.count(zg(t),t)+(4===zg(t).getUTCDay()),n,2)}function Vu(t){return t.getUTCDay()}function $u(t,n){return Wa(yg.count(zg(t),t),n,2)}function Wu(t,n){return Wa(t.getUTCFullYear()%100,n,2)}function Zu(t,n){return Wa(t.getUTCFullYear()%1e4,n,4)}function Qu(){return"+0000"}function Ju(){return"%"}function Ku(t){return+t}function tf(t){return Math.floor(+t/1e3)}function nf(n){return Rg=$a(n),t.timeFormat=Rg.format,t.timeParse=Rg.parse,t.utcFormat=Rg.utcFormat,t.utcParse=Rg.utcParse,Rg}function ef(t){return new Date(t)}function rf(t){return t instanceof Date?+t:+new Date(+t)}function of(t,n,r,i,o,a,u,f,c){function s(e){return(u(e)<e?g:a(e)<e?y:o(e)<e?_:i(e)<e?b:n(e)<e?r(e)<e?m:x:t(e)<e?w:M)(e)}function l(n,r,i,o){if(null==n&&(n=10),"number"==typeof n){var a=Math.abs(i-r)/n,u=e(function(t){return t[2]}).right(A,a);u===A.length?(o=d(r/$g,i/$g,n),n=t):u?(o=(u=A[a/A[u-1][2]<A[u][2]/a?u-1:u])[1],n=u[0]):(o=Math.max(d(r,i,n),1),n=f)}return null==o?n:n.every(o)}var h=Ta(xa,sn),p=h.invert,v=h.domain,g=c(".%L"),y=c(":%S"),_=c("%I:%M"),b=c("%I %p"),m=c("%a %d"),x=c("%b %d"),w=c("%B"),M=c("%Y"),A=[[u,1,Ig],[u,5,5*Ig],[u,15,15*Ig],[u,30,30*Ig],[a,1,jg],[a,5,5*jg],[a,15,15*jg],[a,30,30*jg],[o,1,Hg],[o,3,3*Hg],[o,6,6*Hg],[o,12,12*Hg],[i,1,Xg],[i,2,2*Xg],[r,1,Gg],[n,1,Vg],[n,3,3*Vg],[t,1,$g]];return h.invert=function(t){return new Date(p(t))},h.domain=function(t){return arguments.length?v(Ev.call(t,rf)):v().map(ef)},h.ticks=function(t,n){var e,r=v(),i=r[0],o=r[r.length-1],a=o<i;return a&&(e=i,i=o,o=e),e=l(t,i,o,n),e=e?e.range(i,o+1):[],a?e.reverse():e},h.tickFormat=function(t,n){return null==n?s:c(n)},h.nice=function(t,n){var e=v();return(t=l(t,e[0],e[e.length-1],n))?v(ka(e,t)):h},h.copy=function(){return Aa(h,of(t,n,r,i,o,a,u,f,c))},h}function af(t){function n(n){var o=(n-e)/(r-e);return t(i?Math.max(0,Math.min(1,o)):o)}var e=0,r=1,i=!1;return n.domain=function(t){return arguments.length?(e=+t[0],r=+t[1],n):[e,r]},n.clamp=function(t){return arguments.length?(i=!!t,n):i},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return af(t).domain([e,r]).clamp(i)},Na(n)}function uf(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}function ff(t){return rl(t[t.length-1])}function cf(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}function sf(t){return function(){return t}}function lf(t){return t>=1?A_:t<=-1?-A_:Math.asin(t)}function hf(t){return t.innerRadius}function df(t){return t.outerRadius}function pf(t){return t.startAngle}function vf(t){return t.endAngle}function gf(t){return t&&t.padAngle}function yf(t,n,e,r,i,o,a){var u=t-e,f=n-r,c=(a?o:-o)/x_(u*u+f*f),s=c*f,l=-c*u,h=t+s,d=n+l,p=e+s,v=r+l,g=(h+p)/2,y=(d+v)/2,_=p-h,b=v-d,m=_*_+b*b,x=i-o,w=h*v-p*d,M=(b<0?-1:1)*x_(__(0,x*x*m-w*w)),A=(w*b-_*M)/m,T=(-w*_-b*M)/m,N=(w*b+_*M)/m,S=(-w*_+b*M)/m,E=A-g,k=T-y,C=N-g,P=S-y;return E*E+k*k>C*C+P*P&&(A=N,T=S),{cx:A,cy:T,x01:-s,y01:-l,x11:A*(i/x-1),y11:T*(i/x-1)}}function _f(t){this._context=t}function bf(t){return new _f(t)}function mf(t){return t[0]}function xf(t){return t[1]}function wf(){function t(t){var u,f,c,s=t.length,l=!1;for(null==i&&(a=o(c=oe())),u=0;u<=s;++u)!(u<s&&r(f=t[u],u,t))===l&&((l=!l)?a.lineStart():a.lineEnd()),l&&a.point(+n(f,u,t),+e(f,u,t));if(c)return a=null,c+""||null}var n=mf,e=xf,r=sf(!0),i=null,o=bf,a=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:sf(+e),t):n},t.y=function(n){return arguments.length?(e="function"==typeof n?n:sf(+n),t):e},t.defined=function(n){return arguments.length?(r="function"==typeof n?n:sf(!!n),t):r},t.curve=function(n){return arguments.length?(o=n,null!=i&&(a=o(i)),t):o},t.context=function(n){return arguments.length?(null==n?i=a=null:a=o(i=n),t):i},t}function Mf(){function t(t){var n,s,l,h,d,p=t.length,v=!1,g=new Array(p),y=new Array(p);for(null==u&&(c=f(d=oe())),n=0;n<=p;++n){if(!(n<p&&a(h=t[n],n,t))===v)if(v=!v)s=n,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),l=n-1;l>=s;--l)c.point(g[l],y[l]);c.lineEnd(),c.areaEnd()}v&&(g[n]=+e(h,n,t),y[n]=+i(h,n,t),c.point(r?+r(h,n,t):g[n],o?+o(h,n,t):y[n]))}if(d)return c=null,d+""||null}function n(){return wf().defined(a).curve(f).context(u)}var e=mf,r=null,i=sf(0),o=xf,a=sf(!0),u=null,f=bf,c=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:sf(+n),r=null,t):e},t.x0=function(n){return arguments.length?(e="function"==typeof n?n:sf(+n),t):e},t.x1=function(n){return arguments.length?(r=null==n?null:"function"==typeof n?n:sf(+n),t):r},t.y=function(n){return arguments.length?(i="function"==typeof n?n:sf(+n),o=null,t):i},t.y0=function(n){return arguments.length?(i="function"==typeof n?n:sf(+n),t):i},t.y1=function(n){return arguments.length?(o=null==n?null:"function"==typeof n?n:sf(+n),t):o},t.lineX0=t.lineY0=function(){return n().x(e).y(i)},t.lineY1=function(){return n().x(e).y(o)},t.lineX1=function(){return n().x(r).y(i)},t.defined=function(n){return arguments.length?(a="function"==typeof n?n:sf(!!n),t):a},t.curve=function(n){return arguments.length?(f=n,null!=u&&(c=f(u)),t):f},t.context=function(n){return arguments.length?(null==n?u=c=null:c=f(u=n),t):u},t}function Af(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function Tf(t){return t}function Nf(t){this._curve=t}function Sf(t){function n(n){return new Nf(t(n))}return n._curve=t,n}function Ef(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?n(Sf(t)):n()._curve},t}function kf(){return Ef(wf().curve(N_))}function Cf(){var t=Mf().curve(N_),n=t.curve,e=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Ef(e())},delete t.lineX0,t.lineEndAngle=function(){return Ef(r())},delete t.lineX1,t.lineInnerRadius=function(){return Ef(i())},delete t.lineY0,t.lineOuterRadius=function(){return Ef(o())},delete t.lineY1,t.curve=function(t){return arguments.length?n(Sf(t)):n()._curve},t}function Pf(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}function zf(t){return t.source}function Rf(t){return t.target}function Lf(t){function n(){var n,u=S_.call(arguments),f=e.apply(this,u),c=r.apply(this,u);if(a||(a=n=oe()),t(a,+i.apply(this,(u[0]=f,u)),+o.apply(this,u),+i.apply(this,(u[0]=c,u)),+o.apply(this,u)),n)return a=null,n+""||null}var e=zf,r=Rf,i=mf,o=xf,a=null;return n.source=function(t){return arguments.length?(e=t,n):e},n.target=function(t){return arguments.length?(r=t,n):r},n.x=function(t){return arguments.length?(i="function"==typeof t?t:sf(+t),n):i},n.y=function(t){return arguments.length?(o="function"==typeof t?t:sf(+t),n):o},n.context=function(t){return arguments.length?(a=null==t?null:t,n):a},n}function Df(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n=(n+r)/2,e,n,i,r,i)}function Uf(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n,e=(e+i)/2,r,e,r,i)}function qf(t,n,e,r,i){var o=Pf(n,e),a=Pf(n,e=(e+i)/2),u=Pf(r,e),f=Pf(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],u[0],u[1],f[0],f[1])}function Of(){}function Yf(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function Bf(t){this._context=t}function Ff(t){this._context=t}function If(t){this._context=t}function jf(t,n){this._basis=new Bf(t),this._beta=n}function Hf(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function Xf(t,n){this._context=t,this._k=(1-n)/6}function Gf(t,n){this._context=t,this._k=(1-n)/6}function Vf(t,n){this._context=t,this._k=(1-n)/6}function $f(t,n,e){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>w_){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,f=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/f,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/f}if(t._l23_a>w_){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,s=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-n*t._l12_2a)/s,a=(a*c+t._y1*t._l23_2a-e*t._l12_2a)/s}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Wf(t,n){this._context=t,this._alpha=n}function Zf(t,n){this._context=t,this._alpha=n}function Qf(t,n){this._context=t,this._alpha=n}function Jf(t){this._context=t}function Kf(t){return t<0?-1:1}function tc(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(e-t._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(Kf(o)+Kf(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function nc(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function ec(t,n,e){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*n,o-u,a-u*e,o,a)}function rc(t){this._context=t}function ic(t){this._context=new oc(t)}function oc(t){this._context=t}function ac(t){this._context=t}function uc(t){var n,e,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,o[n]=4,a[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/o[n-1],o[n]-=e,a[n]-=e*a[n-1];for(i[r-1]=a[r-1]/o[r-1],n=r-2;n>=0;--n)i[n]=(a[n]-i[n+1])/o[n];for(o[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)o[n]=2*t[n+1]-i[n+1];return[i,o]}function fc(t,n){this._context=t,this._t=n}function cc(t,n){if((i=t.length)>1)for(var e,r,i,o=1,a=t[n[0]],u=a.length;o<i;++o)for(r=a,a=t[n[o]],e=0;e<u;++e)a[e][1]+=a[e][0]=isNaN(r[e][1])?r[e][0]:r[e][1]}function sc(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e}function lc(t,n){return t[n]}function hc(t){var n=t.map(dc);return sc(t).sort(function(t,e){return n[t]-n[e]})}function dc(t){for(var n,e=0,r=-1,i=t.length;++r<i;)(n=+t[r][1])&&(e+=n);return e}function pc(t){return function(){return t}}function vc(t){return t[0]}function gc(t){return t[1]}function yc(){this._=null}function _c(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function bc(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function mc(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function xc(t){for(;t.L;)t=t.L;return t}function wc(t,n,e,r){var i=[null,null],o=eb.push(i)-1;return i.left=t,i.right=n,e&&Ac(i,t,n,e),r&&Ac(i,n,t,r),tb[t.index].halfedges.push(o),tb[n.index].halfedges.push(o),i}function Mc(t,n,e){var r=[n,e];return r.left=t,r}function Ac(t,n,e,r){t[0]||t[1]?t.left===e?t[1]=r:t[0]=r:(t[0]=r,t.left=n,t.right=e)}function Tc(t,n,e,r,i){var o,a=t[0],u=t[1],f=a[0],c=a[1],s=0,l=1,h=u[0]-f,d=u[1]-c;if(o=n-f,h||!(o>0)){if(o/=h,h<0){if(o<s)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>s&&(s=o)}if(o=r-f,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>s&&(s=o)}else if(h>0){if(o<s)return;o<l&&(l=o)}if(o=e-c,d||!(o>0)){if(o/=d,d<0){if(o<s)return;o<l&&(l=o)}else if(d>0){if(o>l)return;o>s&&(s=o)}if(o=i-c,d||!(o<0)){if(o/=d,d<0){if(o>l)return;o>s&&(s=o)}else if(d>0){if(o<s)return;o<l&&(l=o)}return!(s>0||l<1)||(s>0&&(t[0]=[f+s*h,c+s*d]),l<1&&(t[1]=[f+l*h,c+l*d]),!0)}}}}}function Nc(t,n,e,r,i){var o=t[1];if(o)return!0;var a,u,f=t[0],c=t.left,s=t.right,l=c[0],h=c[1],d=s[0],p=s[1],v=(l+d)/2,g=(h+p)/2;if(p===h){if(v<n||v>=r)return;if(l>d){if(f){if(f[1]>=i)return}else f=[v,e];o=[v,i]}else{if(f){if(f[1]<e)return}else f=[v,i];o=[v,e]}}else if(a=(l-d)/(p-h),u=g-a*v,a<-1||a>1)if(l>d){if(f){if(f[1]>=i)return}else f=[(e-u)/a,e];o=[(i-u)/a,i]}else{if(f){if(f[1]<e)return}else f=[(i-u)/a,i];o=[(e-u)/a,e]}else if(h<p){if(f){if(f[0]>=r)return}else f=[n,a*n+u];o=[r,a*r+u]}else{if(f){if(f[0]<n)return}else f=[r,a*r+u];o=[n,a*n+u]}return t[0]=f,t[1]=o,!0}function Sc(t,n){var e=t.site,r=n.left,i=n.right;return e===i&&(i=r,r=e),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(e===r?(r=n[1],i=n[0]):(r=n[0],i=n[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Ec(t,n){return n[+(n.left!==t.site)]}function kc(t,n){return n[+(n.left===t.site)]}function Cc(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,i=t.site,o=e.site;if(r!==o){var a=i[0],u=i[1],f=r[0]-a,c=r[1]-u,s=o[0]-a,l=o[1]-u,h=2*(f*l-c*s);if(!(h>=-ab)){var d=f*f+c*c,p=s*s+l*l,v=(l*d-c*p)/h,g=(f*p-s*d)/h,y=rb.pop()||new function(){_c(this),this.x=this.y=this.arc=this.site=this.cy=null};y.arc=t,y.site=i,y.x=v+a,y.y=(y.cy=g+u)+Math.sqrt(v*v+g*g),t.circle=y;for(var _=null,b=nb._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){_=b.P;break}b=b.L}else{if(!b.R){_=b;break}b=b.R}nb.insert(_,y),_||(J_=y)}}}}function Pc(t){var n=t.circle;n&&(n.P||(J_=n.N),nb.remove(n),rb.push(n),_c(n),t.circle=null)}function zc(t){var n=ib.pop()||new function(){_c(this),this.edge=this.site=this.circle=null};return n.site=t,n}function Rc(t){Pc(t),K_.remove(t),ib.push(t),_c(t)}function Lc(t){var n=t.circle,e=n.x,r=n.cy,i=[e,r],o=t.P,a=t.N,u=[t];Rc(t);for(var f=o;f.circle&&Math.abs(e-f.circle.x)<ob&&Math.abs(r-f.circle.cy)<ob;)o=f.P,u.unshift(f),Rc(f),f=o;u.unshift(f),Pc(f);for(var c=a;c.circle&&Math.abs(e-c.circle.x)<ob&&Math.abs(r-c.circle.cy)<ob;)a=c.N,u.push(c),Rc(c),c=a;u.push(c),Pc(c);var s,l=u.length;for(s=1;s<l;++s)c=u[s],f=u[s-1],Ac(c.edge,f.site,c.site,i);f=u[0],(c=u[l-1]).edge=wc(f.site,c.site,null,i),Cc(f),Cc(c)}function Dc(t){for(var n,e,r,i,o=t[0],a=t[1],u=K_._;u;)if((r=Uc(u,a)-o)>ob)u=u.L;else{if(!((i=o-function(t,n){var e=t.N;if(e)return Uc(e,n);var r=t.site;return r[1]===n?r[0]:1/0}(u,a))>ob)){r>-ob?(n=u.P,e=u):i>-ob?(n=u,e=u.N):n=e=u;break}if(!u.R){n=u;break}u=u.R}(function(t){tb[t.index]={site:t,halfedges:[]}})(t);var f=zc(t);if(K_.insert(n,f),n||e){if(n===e)return Pc(n),e=zc(n.site),K_.insert(f,e),f.edge=e.edge=wc(n.site,f.site),Cc(n),void Cc(e);if(e){Pc(n),Pc(e);var c=n.site,s=c[0],l=c[1],h=t[0]-s,d=t[1]-l,p=e.site,v=p[0]-s,g=p[1]-l,y=2*(h*g-d*v),_=h*h+d*d,b=v*v+g*g,m=[(g*_-d*b)/y+s,(h*b-v*_)/y+l];Ac(e.edge,c,p,m),f.edge=wc(c,t,null,m),e.edge=wc(t,p,null,m),Cc(n),Cc(e)}else f.edge=wc(n.site,f.site)}}function Uc(t,n){var e=t.site,r=e[0],i=e[1],o=i-n;if(!o)return r;var a=t.P;if(!a)return-1/0;var u=(e=a.site)[0],f=e[1],c=f-n;if(!c)return u;var s=u-r,l=1/o-1/c,h=s/c;return l?(-h+Math.sqrt(h*h-2*l*(s*s/(-2*c)-f+c/2+i-o/2)))/l+r:(r+u)/2}function qc(t,n,e){return(t[0]-e[0])*(n[1]-t[1])-(t[0]-n[0])*(e[1]-t[1])}function Oc(t,n){return n[1]-t[1]||n[0]-t[0]}function Yc(t,n){var e,r,i,o=t.sort(Oc).pop();for(eb=[],tb=new Array(t.length),K_=new yc,nb=new yc;;)if(i=J_,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===e&&o[1]===r||(Dc(o),e=o[0],r=o[1]),o=t.pop();else{if(!i)break;Lc(i.arc)}if(function(){for(var t,n,e,r,i=0,o=tb.length;i<o;++i)if((t=tb[i])&&(r=(n=t.halfedges).length)){var a=new Array(r),u=new Array(r);for(e=0;e<r;++e)a[e]=e,u[e]=Sc(t,eb[n[e]]);for(a.sort(function(t,n){return u[n]-u[t]}),e=0;e<r;++e)u[e]=n[a[e]];for(e=0;e<r;++e)n[e]=u[e]}}(),n){var a=+n[0][0],u=+n[0][1],f=+n[1][0],c=+n[1][1];(function(t,n,e,r){for(var i,o=eb.length;o--;)Nc(i=eb[o],t,n,e,r)&&Tc(i,t,n,e,r)&&(Math.abs(i[0][0]-i[1][0])>ob||Math.abs(i[0][1]-i[1][1])>ob)||delete eb[o]})(a,u,f,c),function(t,n,e,r){var i,o,a,u,f,c,s,l,h,d,p,v,g=tb.length,y=!0;for(i=0;i<g;++i)if(o=tb[i]){for(a=o.site,u=(f=o.halfedges).length;u--;)eb[f[u]]||f.splice(u,1);for(u=0,c=f.length;u<c;)p=(d=kc(o,eb[f[u]]))[0],v=d[1],l=(s=Ec(o,eb[f[++u%c]]))[0],h=s[1],(Math.abs(p-l)>ob||Math.abs(v-h)>ob)&&(f.splice(u,0,eb.push(Mc(a,d,Math.abs(p-t)<ob&&r-v>ob?[t,Math.abs(l-t)<ob?h:r]:Math.abs(v-r)<ob&&e-p>ob?[Math.abs(h-r)<ob?l:e,r]:Math.abs(p-e)<ob&&v-n>ob?[e,Math.abs(l-e)<ob?h:n]:Math.abs(v-n)<ob&&p-t>ob?[Math.abs(h-n)<ob?l:t,n]:null))-1),++c);c&&(y=!1)}if(y){var _,b,m,x=1/0;for(i=0,y=null;i<g;++i)(o=tb[i])&&(m=(_=(a=o.site)[0]-t)*_+(b=a[1]-n)*b)<x&&(x=m,y=o);if(y){var w=[t,n],M=[t,r],A=[e,r],T=[e,n];y.halfedges.push(eb.push(Mc(a=y.site,w,M))-1,eb.push(Mc(a,M,A))-1,eb.push(Mc(a,A,T))-1,eb.push(Mc(a,T,w))-1)}}for(i=0;i<g;++i)(o=tb[i])&&(o.halfedges.length||delete tb[i])}(a,u,f,c)}this.edges=eb,this.cells=tb,K_=nb=eb=tb=null}function Bc(t){return function(){return t}}function Fc(t,n,e){this.k=t,this.x=n,this.y=e}function Ic(t){return t.__zoom||ub}function jc(){t.event.stopImmediatePropagation()}function Hc(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Xc(){return!t.event.button}function Gc(){var t,n,e=this;return e instanceof SVGElement?(t=(e=e.ownerSVGElement||e).width.baseVal.value,n=e.height.baseVal.value):(t=e.clientWidth,n=e.clientHeight),[[0,0],[t,n]]}function Vc(){return this.__zoom||ub}function $c(){return-t.event.deltaY*(t.event.deltaMode?120:1)/500}function Wc(){return"ontouchstart"in this}function Zc(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}var Qc=e(n),Jc=Qc.right,Kc=Qc.left,ts=Array.prototype,ns=ts.slice,es=ts.map,rs=Math.sqrt(50),is=Math.sqrt(10),os=Math.sqrt(2),as=Array.prototype.slice,us=1,fs=2,cs=3,ss=4,ls=1e-6,hs={value:function(){}};S.prototype=N.prototype={constructor:S,on:function(t,n){var e,r=this._,i=function(t,n){return t.trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}(t+"",r),o=-1,a=i.length;{if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++o<a;)if(e=(t=i[o]).type)r[e]=E(r[e],t.name,n);else if(null==n)for(e in r)r[e]=E(r[e],t.name,null);return this}for(;++o<a;)if((e=(t=i[o]).type)&&(e=function(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}(r[e],t.name)))return e}},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new S(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var ds="http://www.w3.org/1999/xhtml",ps={svg:"http://www.w3.org/2000/svg",xhtml:ds,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},vs=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var gs=document.documentElement;if(!gs.matches){var ys=gs.webkitMatchesSelector||gs.msMatchesSelector||gs.mozMatchesSelector||gs.oMatchesSelector;vs=function(t){return function(){return ys.call(this,t)}}}}var _s=vs;U.prototype={constructor:U,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var bs="$";H.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ms={};if(t.event=null,"undefined"!=typeof document){"onmouseenter"in document.documentElement||(ms={mouseenter:"mouseover",mouseleave:"mouseout"})}var xs=[null];ut.prototype=ft.prototype={constructor:ut,select:function(t){"function"!=typeof t&&(t=z(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,u=n[i],f=u.length,c=r[i]=new Array(f),s=0;s<f;++s)(o=u[s])&&(a=t.call(o,o.__data__,s,u))&&("__data__"in o&&(a.__data__=o.__data__),c[s]=a);return new ut(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=L(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a,u=n[o],f=u.length,c=0;c<f;++c)(a=u[c])&&(r.push(t.call(a,a.__data__,c,u)),i.push(a));return new ut(r,i)},filter:function(t){"function"!=typeof t&&(t=_s(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,f=r[i]=[],c=0;c<u;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&f.push(o);return new ut(r,this._parents)},data:function(t,n){if(!t)return d=new Array(this.size()),c=-1,this.each(function(t){d[++c]=t}),d;var e=n?O:q,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,a=new Array(o),u=new Array(o),f=new Array(o),c=0;c<o;++c){var s=r[c],l=i[c],h=l.length,d=t.call(s,s&&s.__data__,c,r),p=d.length,v=u[c]=new Array(p),g=a[c]=new Array(p);e(s,l,v,g,f[c]=new Array(h),d,n);for(var y,_,b=0,m=0;b<p;++b)if(y=v[b]){for(b>=m&&(m=b+1);!(_=g[m])&&++m<p;);y._next=_||null}}return a=new ut(a,r),a._enter=u,a._exit=f,a},enter:function(){return new ut(this._enter||this._groups.map(D),this._parents)},exit:function(){return new ut(this._exit||this._groups.map(D),this._parents)},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var f,c=n[u],s=e[u],l=c.length,h=a[u]=new Array(l),d=0;d<l;++d)(f=c[d]||s[d])&&(h[d]=f);for(;u<r;++u)a[u]=n[u];return new ut(a,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=Y);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,u=e[o],f=u.length,c=i[o]=new Array(f),s=0;s<f;++s)(a=u[s])&&(c[s]=a);c.sort(n)}return new ut(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=k(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):F(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=I(t+"");if(arguments.length<2){for(var r=j(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?X:G)(this,t)}}:n?function(t){return function(){X(this,t)}}:function(t){return function(){G(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?V:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?$:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(W)},lower:function(){return this.each(Z)},append:function(t){var n="function"==typeof t?t:C(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:C(t),r=null==n?Q:"function"==typeof n?n:z(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(J)},clone:function(t){return this.select(t?tt:K)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}(t+""),a=o.length;if(!(arguments.length<2)){for(u=n?it:rt,null==e&&(e=!1),r=0;r<a;++r)this.each(u(o[r],n,e));return this}var u=this.node().__on;if(u)for(var f,c=0,s=u.length;c<s;++c)for(r=0,f=u[c];r<a;++r)if((i=o[r]).type===f.type&&i.name===f.name)return f.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return at(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return at(this,t,n)}})(t,n))}};var ws=0;lt.prototype=st.prototype={constructor:lt,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},xt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Ms="\\s*([+-]?\\d+)\\s*",As="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ts="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ns=/^#([0-9a-f]{3})$/,Ss=/^#([0-9a-f]{6})$/,Es=new RegExp("^rgb\\("+[Ms,Ms,Ms]+"\\)$"),ks=new RegExp("^rgb\\("+[Ts,Ts,Ts]+"\\)$"),Cs=new RegExp("^rgba\\("+[Ms,Ms,Ms,As]+"\\)$"),Ps=new RegExp("^rgba\\("+[Ts,Ts,Ts,As]+"\\)$"),zs=new RegExp("^hsl\\("+[As,Ts,Ts]+"\\)$"),Rs=new RegExp("^hsla\\("+[As,Ts,Ts,As]+"\\)$"),Ls={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nt(Et,kt,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),Nt(Lt,Rt,St(Et,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Dt(this.r)+Dt(this.g)+Dt(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Nt(Ot,qt,St(Et,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ot(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ot(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Lt(Yt(t>=240?t-240:t+120,i,r),Yt(t,i,r),Yt(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Ds=Math.PI/180,Us=180/Math.PI,qs=.96422,Os=1,Ys=.82521,Bs=4/29,Fs=6/29,Is=3*Fs*Fs,js=Fs*Fs*Fs;Nt(It,Ft,St(Et,{brighter:function(t){return new It(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new It(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return n=qs*Ht(n),t=Os*Ht(t),e=Ys*Ht(e),new Lt(Xt(3.1338561*n-1.6168667*t-.4906146*e),Xt(-.9787684*n+1.9161415*t+.033454*e),Xt(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),Nt(Wt,$t,St(Et,{brighter:function(t){return new Wt(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Wt(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Bt(this).rgb()}}));var Hs=-.29227,Xs=-.90649,Gs=1.97294,Vs=Gs*Xs,$s=1.78277*Gs,Ws=1.78277*Hs- -.14861*Xs;Nt(Qt,Zt,St(Et,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Qt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Qt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ds,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new Lt(255*(n+e*(-.14861*r+1.78277*i)),255*(n+e*(Hs*r+Xs*i)),255*(n+e*(Gs*r)),this.opacity)}}));var Zs,Qs,Js,Ks,tl,nl,el=function t(n){function e(t,n){var e=r((t=Rt(t)).r,(n=Rt(n)).r),i=r(t.g,n.g),o=r(t.b,n.b),a=an(t.opacity,n.opacity);return function(n){return t.r=e(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}var r=on(n);return e.gamma=t,e}(1),rl=un(Kt),il=un(tn),ol=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,al=new RegExp(ol.source,"g"),ul=180/Math.PI,fl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},cl=gn(function(t){return"none"===t?fl:(Zs||(Zs=document.createElement("DIV"),Qs=document.documentElement,Js=document.defaultView),Zs.style.transform=t,t=Js.getComputedStyle(Qs.appendChild(Zs),null).getPropertyValue("transform"),Qs.removeChild(Zs),t=t.slice(7,-1).split(","),vn(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),sl=gn(function(t){return null==t?fl:(Ks||(Ks=document.createElementNS("http://www.w3.org/2000/svg","g")),Ks.setAttribute("transform",t),(t=Ks.transform.baseVal.consolidate())?(t=t.matrix,vn(t.a,t.b,t.c,t.d,t.e,t.f)):fl)},", ",")",")"),ll=Math.SQRT2,hl=2,dl=4,pl=1e-12,vl=bn(rn),gl=bn(an),yl=mn(rn),_l=mn(an),bl=xn(rn),ml=xn(an),xl=0,wl=0,Ml=0,Al=1e3,Tl=0,Nl=0,Sl=0,El="object"==typeof performance&&performance.now?performance:Date,kl="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};An.prototype=Tn.prototype={constructor:An,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?wn():+e)+(null==n?0:+n),this._next||nl===this||(nl?nl._next=this:tl=this,nl=this),this._call=t,this._time=e,kn()},stop:function(){this._call&&(this._call=null,this._time=1/0,kn())}};var Cl=N("start","end","interrupt"),Pl=[],zl=0,Rl=1,Ll=2,Dl=3,Ul=4,ql=5,Ol=6,Yl=ft.prototype.constructor,Bl=0,Fl=ft.prototype;On.prototype=Yn.prototype={constructor:On,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=z(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,f,c=r[a],s=c.length,l=o[a]=new Array(s),h=0;h<s;++h)(u=c[h])&&(f=t.call(u,u.__data__,h,c))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,Pn(l[h],n,e,h,l,Ln(u,e)));return new On(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=L(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var f,c=r[u],s=c.length,l=0;l<s;++l)if(f=c[l]){for(var h,d=t.call(f,f.__data__,l,c),p=Ln(f,e),v=0,g=d.length;v<g;++v)(h=d[v])&&Pn(h,n,e,v,d,p);o.push(d),a.push(f)}return new On(o,a,n,e)},filter:function(t){"function"!=typeof t&&(t=_s(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,f=r[i]=[],c=0;c<u;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&f.push(o);return new On(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var f,c=n[u],s=e[u],l=c.length,h=a[u]=new Array(l),d=0;d<l;++d)(f=c[d]||s[d])&&(h[d]=f);for(;u<r;++u)a[u]=n[u];return new On(a,this._parents,this._name,this._id)},selection:function(){return new Yl(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=Bn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],f=u.length,c=0;c<f;++c)if(a=u[c]){var s=Ln(a,n);Pn(a,t,e,c,u,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new On(r,this._parents,t,e)},call:Fl.call,nodes:Fl.nodes,node:Fl.node,size:Fl.size,empty:Fl.empty,each:Fl.each,on:function(t,n){var e=this._id;return arguments.length<2?Ln(this.node(),e).on.on(t):this.each(function(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t})}(n)?zn:Rn;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(n,e),a.on=i}}(e,t,n))},attr:function(t,n){var e=k(t),r="transform"===e?sl:qn;return this.attrTween(t,"function"==typeof n?(e.local?function(t,n,e){var r,i,o;return function(){var a,u=e(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===u?null:a===r&&u===i?o:o=n(r=a,i=u);this.removeAttributeNS(t.space,t.local)}}:function(t,n,e){var r,i,o;return function(){var a,u=e(this);if(null!=u)return(a=this.getAttribute(t))===u?null:a===r&&u===i?o:o=n(r=a,i=u);this.removeAttribute(t)}})(e,r,Un(this,"attr."+t,n)):null==n?(e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(e):(e.local?function(t,n,e){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===e?null:o===r?i:i=n(r=o,e)}}:function(t,n,e){var r,i;return function(){var o=this.getAttribute(t);return o===e?null:o===r?i:i=n(r=o,e)}})(e,r,n+""))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=k(t);return this.tween(e,(r.local?function(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttributeNS(t.space,t.local,r(n))}}return e._value=n,e}:function(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttribute(t,r(n))}}return e._value=n,e})(r,n))},style:function(t,n,e){var r="transform"==(t+="")?cl:qn;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=F(this,t),a=(this.style.removeProperty(t),F(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}(t,r)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof n?function(t,n,e){var r,i,o;return function(){var a=F(this,t),u=e(this);return null==u&&(this.style.removeProperty(t),u=F(this,t)),a===u?null:a===r&&u===i?o:o=n(r=a,i=u)}}(t,r,Un(this,"style."+t,n)):function(t,n,e){var r,i;return function(){var o=F(this,t);return o===e?null:o===r?i:i=n(r=o,e)}}(t,r,n+""),e)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){function r(){var r=this,i=n.apply(r,arguments);return i&&function(n){r.style.setProperty(t,i(n),e)}}return r._value=n,r}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(Un(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Ln(this.node(),e).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?function(t,n){var e,r;return function(){var i=Rn(this,t),o=i.tween;if(o!==e)for(var a=0,u=(r=e=o).length;a<u;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=Rn(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:n,value:e},f=0,c=i.length;f<c;++f)if(i[f].name===n){i[f]=u;break}f===c&&i.push(u)}o.tween=i}})(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){zn(this,t).delay=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){zn(this,t).delay=n}})(n,t)):Ln(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){Rn(this,t).duration=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){Rn(this,t).duration=n}})(n,t)):Ln(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){Rn(this,t).ease=n}}(n,t)):Ln(this.node(),n).ease}};var Il=function t(n){function e(t){return Math.pow(t,n)}return n=+n,e.exponent=t,e}(3),jl=function t(n){function e(t){return 1-Math.pow(1-t,n)}return n=+n,e.exponent=t,e}(3),Hl=function t(n){function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,e.exponent=t,e}(3),Xl=Math.PI,Gl=Xl/2,Vl=4/11,$l=6/11,Wl=8/11,Zl=.75,Ql=9/11,Jl=10/11,Kl=.9375,th=21/22,nh=63/64,eh=1/Vl/Vl,rh=function t(n){function e(t){return t*t*((n+1)*t-n)}return n=+n,e.overshoot=t,e}(1.70158),ih=function t(n){function e(t){return--t*t*((n+1)*t+n)+1}return n=+n,e.overshoot=t,e}(1.70158),oh=function t(n){function e(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}return n=+n,e.overshoot=t,e}(1.70158),ah=2*Math.PI,uh=function t(n,e){function r(t){return n*Math.pow(2,10*--t)*Math.sin((i-t)/e)}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=ah);return r.amplitude=function(n){return t(n,e*ah)},r.period=function(e){return t(n,e)},r}(1,.3),fh=function t(n,e){function r(t){return 1-n*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/e)}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=ah);return r.amplitude=function(n){return t(n,e*ah)},r.period=function(e){return t(n,e)},r}(1,.3),ch=function t(n,e){function r(t){return((t=2*t-1)<0?n*Math.pow(2,10*t)*Math.sin((i-t)/e):2-n*Math.pow(2,-10*t)*Math.sin((i+t)/e))/2}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=ah);return r.amplitude=function(n){return t(n,e*ah)},r.period=function(e){return t(n,e)},r}(1,.3),sh={time:null,delay:0,duration:250,ease:In};ft.prototype.interrupt=function(t){return this.each(function(){Dn(this,t)})},ft.prototype.transition=function(t){var n,e;t instanceof On?(n=t._id,t=t._name):(n=Bn(),(e=sh).time=wn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],f=u.length,c=0;c<f;++c)(a=u[c])&&Pn(a,t,n,c,u,e||Vn(a,n));return new On(r,this._parents,t,n)};var lh=[null],hh={name:"drag"},dh={name:"space"},ph={name:"handle"},vh={name:"center"},gh={name:"x",handles:["e","w"].map(Qn),input:function(t,n){return t&&[[t[0],n[0][1]],[t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},yh={name:"y",handles:["n","s"].map(Qn),input:function(t,n){return t&&[[n[0][0],t[0]],[n[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},_h={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Qn),input:function(t){return t},output:function(t){return t}},bh={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},mh={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},xh={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},wh={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Mh={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},Ah=Math.cos,Th=Math.sin,Nh=Math.PI,Sh=Nh/2,Eh=2*Nh,kh=Math.max,Ch=Array.prototype.slice,Ph=Math.PI,zh=2*Ph,Rh=zh-1e-6;ie.prototype=oe.prototype={constructor:ie,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,a=this._y1,u=e-t,f=r-n,c=o-t,s=a-n,l=c*c+s*s;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(l>1e-6)if(Math.abs(s*u-f*c)>1e-6&&i){var h=e-o,d=r-a,p=u*u+f*f,v=h*h+d*d,g=Math.sqrt(p),y=Math.sqrt(l),_=i*Math.tan((Ph-Math.acos((p+l-v)/(2*g*y)))/2),b=_/y,m=_/g;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*c)+","+(n+b*s)),this._+="A"+i+","+i+",0,0,"+ +(s*h>c*d)+","+(this._x1=t+m*u)+","+(this._y1=n+m*f)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,r,i,o){t=+t,n=+n;var a=(e=+e)*Math.cos(r),u=e*Math.sin(r),f=t+a,c=n+u,s=1^o,l=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+f+","+c:(Math.abs(this._x1-f)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+f+","+c),e&&(l<0&&(l=l%zh+zh),l>Rh?this._+="A"+e+","+e+",0,1,"+s+","+(t-a)+","+(n-u)+"A"+e+","+e+",0,1,"+s+","+(this._x1=f)+","+(this._y1=c):l>1e-6&&(this._+="A"+e+","+e+",0,"+ +(l>=Ph)+","+s+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};le.prototype=he.prototype={constructor:le,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,n){return this["$"+t]=n,this},remove:function(t){var n="$"+t;return n in this&&delete this[n]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)"$"===n[0]&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)"$"===n[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var n in this)"$"===n[0]&&t(this[n],n.slice(1),this)}};var Lh=he.prototype;ye.prototype=_e.prototype={constructor:ye,has:Lh.has,add:function(t){return t+="",this["$"+t]=t,this},remove:Lh.remove,clear:Lh.clear,values:Lh.keys,size:Lh.size,empty:Lh.empty,each:Lh.each};var Dh=Array.prototype.slice,Uh=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],qh={},Oh={},Yh=34,Bh=10,Fh=13,Ih=ke(","),jh=Ih.parse,Hh=Ih.parseRows,Xh=Ih.format,Gh=Ih.formatRows,Vh=ke("\t"),$h=Vh.parse,Wh=Vh.parseRows,Zh=Vh.format,Qh=Vh.formatRows,Jh=Le(jh),Kh=Le($h),td=Ue("application/xml"),nd=Ue("text/html"),ed=Ue("image/svg+xml"),rd=je.prototype=He.prototype;rd.copy=function(){var t,n,e=new He(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=Xe(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=Xe(n));return e},rd.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return Ye(this.cover(n,e),n,e,t)},rd.addAll=function(t){var n,e,r,i,o=t.length,a=new Array(o),u=new Array(o),f=1/0,c=1/0,s=-1/0,l=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(a[e]=r,u[e]=i,r<f&&(f=r),r>s&&(s=r),i<c&&(c=i),i>l&&(l=i));for(s<f&&(f=this._x0,s=this._x1),l<c&&(c=this._y0,l=this._y1),this.cover(f,c).cover(s,l),e=0;e<o;++e)Ye(this,a[e],u[e],t[e]);return this},rd.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{if(!(e>t||t>i||r>n||n>o))return this;var a,u,f=i-e,c=this._root;switch(u=(n<(r+o)/2)<<1|t<(e+i)/2){case 0:do{a=new Array(4),a[u]=c,c=a}while(f*=2,i=e+f,o=r+f,t>i||n>o);break;case 1:do{a=new Array(4),a[u]=c,c=a}while(f*=2,e=i-f,o=r+f,e>t||n>o);break;case 2:do{a=new Array(4),a[u]=c,c=a}while(f*=2,i=e+f,r=o-f,t>i||r>n);break;case 3:do{a=new Array(4),a[u]=c,c=a}while(f*=2,e=i-f,r=o-f,e>t||r>n)}this._root&&this._root.length&&(this._root=c)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},rd.data=function(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},rd.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},rd.find=function(t,n,e){var r,i,o,a,u,f,c,s=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new Be(v,s,l,h,d)),null==e?e=1/0:(s=t-e,l=n-e,h=t+e,d=n+e,e*=e);f=p.pop();)if(!(!(v=f.node)||(i=f.x0)>h||(o=f.y0)>d||(a=f.x1)<s||(u=f.y1)<l))if(v.length){var g=(i+a)/2,y=(o+u)/2;p.push(new Be(v[3],g,y,a,u),new Be(v[2],i,y,g,u),new Be(v[1],g,o,a,y),new Be(v[0],i,o,g,y)),(c=(n>=y)<<1|t>=g)&&(f=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=f)}else{var _=t-+this._x.call(null,v.data),b=n-+this._y.call(null,v.data),m=_*_+b*b;if(m<e){var x=Math.sqrt(e=m);s=t-x,l=n-x,h=t+x,d=n+x,r=v.data}}return r},rd.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var n,e,r,i,o,a,u,f,c,s,l,h,d=this._root,p=this._x0,v=this._y0,g=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(u=(p+g)/2))?p=u:g=u,(s=a>=(f=(v+y)/2))?v=f:y=f,n=d,!(d=d[l=s<<1|c]))return this;if(!d.length)break;(n[l+1&3]||n[l+2&3]||n[l+3&3])&&(e=n,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):n?(i?n[l]=i:delete n[l],(d=n[0]||n[1]||n[2]||n[3])&&d===(n[3]||n[2]||n[1]||n[0])&&!d.length&&(e?e[h]=d:this._root=d),this):(this._root=i,this)},rd.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},rd.root=function(){return this._root},rd.size=function(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},rd.visit=function(t){var n,e,r,i,o,a,u=[],f=this._root;for(f&&u.push(new Be(f,this._x0,this._y0,this._x1,this._y1));n=u.pop();)if(!t(f=n.node,r=n.x0,i=n.y0,o=n.x1,a=n.y1)&&f.length){var c=(r+o)/2,s=(i+a)/2;(e=f[3])&&u.push(new Be(e,c,s,o,a)),(e=f[2])&&u.push(new Be(e,r,s,c,a)),(e=f[1])&&u.push(new Be(e,c,i,o,s)),(e=f[0])&&u.push(new Be(e,r,i,c,s))}return this},rd.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new Be(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,a=n.x0,u=n.y0,f=n.x1,c=n.y1,s=(a+f)/2,l=(u+c)/2;(o=i[0])&&e.push(new Be(o,a,u,s,l)),(o=i[1])&&e.push(new Be(o,s,u,f,l)),(o=i[2])&&e.push(new Be(o,a,l,s,c)),(o=i[3])&&e.push(new Be(o,s,l,f,c))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},rd.x=function(t){return arguments.length?(this._x=t,this):this._x},rd.y=function(t){return arguments.length?(this._y=t,this):this._y};var id=10,od=Math.PI*(3-Math.sqrt(5)),ad=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;tr.prototype=nr.prototype,nr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var ud,fd,cd={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return er(100*t,n)},r:er,s:function(t,n){var e=Je(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(ud=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Je(t,Math.max(0,n+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},sd=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];or({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),sr.prototype={constructor:sr,reset:function(){this.s=this.t=0},add:function(t){lr(Id,t,this.t),lr(this,Id.s,this.s),this.s?this.t+=Id.t:this.s=Id.t},valueOf:function(){return this.s}};var ld,hd,dd,pd,vd,gd,yd,_d,bd,md,xd,wd,Md,Ad,Td,Nd,Sd,Ed,kd,Cd,Pd,zd,Rd,Ld,Dd,Ud,qd,Od,Yd,Bd,Fd,Id=new sr,jd=1e-6,Hd=1e-12,Xd=Math.PI,Gd=Xd/2,Vd=Xd/4,$d=2*Xd,Wd=180/Xd,Zd=Xd/180,Qd=Math.abs,Jd=Math.atan,Kd=Math.atan2,tp=Math.cos,np=Math.ceil,ep=Math.exp,rp=Math.log,ip=Math.pow,op=Math.sin,ap=Math.sign||function(t){return t>0?1:t<0?-1:0},up=Math.sqrt,fp=Math.tan,cp={Feature:function(t,n){gr(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)gr(e[r].geometry,n)}},sp={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){yr(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)yr(e[r],n,0)},Polygon:function(t,n){_r(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)_r(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)gr(e[r],n)}},lp=cr(),hp=cr(),dp={point:vr,lineStart:vr,lineEnd:vr,polygonStart:function(){lp.reset(),dp.lineStart=mr,dp.lineEnd=xr},polygonEnd:function(){var t=+lp;hp.add(t<0?$d+t:t),this.lineStart=this.lineEnd=this.point=vr},sphere:function(){hp.add($d)}},pp=cr(),vp={point:Pr,lineStart:Rr,lineEnd:Lr,polygonStart:function(){vp.point=Dr,vp.lineStart=Ur,vp.lineEnd=qr,pp.reset(),dp.polygonStart()},polygonEnd:function(){dp.polygonEnd(),vp.point=Pr,vp.lineStart=Rr,vp.lineEnd=Lr,lp<0?(gd=-(_d=180),yd=-(bd=90)):pp>jd?bd=90:pp<-jd&&(yd=-90),Td[0]=gd,Td[1]=_d}},gp={sphere:vr,point:Fr,lineStart:jr,lineEnd:Gr,polygonStart:function(){gp.lineStart=Vr,gp.lineEnd=$r},polygonEnd:function(){gp.lineStart=jr,gp.lineEnd=Gr}};Kr.invert=Kr;var yp,_p,bp,mp,xp,wp,Mp,Ap,Tp,Np,Sp,Ep=cr(),kp=di(function(){return!0},function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var u=o>0?Xd:-Xd,f=Qd(o-e);Qd(f-Xd)<jd?(t.point(e,r=(r+a)/2>0?Gd:-Gd),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&f>=Xd&&(Qd(e-i)<jd&&(e-=i*jd),Qd(o-u)<jd&&(o-=u*jd),r=function(t,n,e,r){var i,o,a=op(t-e);return Qd(a)>jd?Jd((op(n)*(o=tp(r))*op(e)-op(r)*(i=tp(n))*op(t))/(i*o*a)):(n+r)/2}(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=a),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}},function(t,n,e,r){var i;if(null==t)i=e*Gd,r.point(-Xd,i),r.point(0,i),r.point(Xd,i),r.point(Xd,0),r.point(Xd,-i),r.point(0,-i),r.point(-Xd,-i),r.point(-Xd,0),r.point(-Xd,i);else if(Qd(t[0]-n[0])>jd){var o=t[0]<n[0]?Xd:-Xd;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])},[-Xd,-Gd]),Cp=1e9,Pp=-Cp,zp=cr(),Rp={sphere:vr,point:vr,lineStart:function(){Rp.point=bi,Rp.lineEnd=_i},lineEnd:vr,polygonStart:vr,polygonEnd:vr},Lp=[null,null],Dp={type:"LineString",coordinates:Lp},Up={Feature:function(t,n){return Mi(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if(Mi(e[r].geometry,n))return!0;return!1}},qp={Sphere:function(){return!0},Point:function(t,n){return Ai(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Ai(e[r],n))return!0;return!1},LineString:function(t,n){return Ti(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Ti(e[r],n))return!0;return!1},Polygon:function(t,n){return Ni(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Ni(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if(Mi(e[r],n))return!0;return!1}},Op=cr(),Yp=cr(),Bp={point:vr,lineStart:vr,lineEnd:vr,polygonStart:function(){Bp.lineStart=Ri,Bp.lineEnd=Ui},polygonEnd:function(){Bp.lineStart=Bp.lineEnd=Bp.point=vr,Op.add(Qd(Yp)),Yp.reset()},result:function(){var t=Op/2;return Op.reset(),t}},Fp=1/0,Ip=Fp,jp=-Fp,Hp=jp,Xp={point:function(t,n){t<Fp&&(Fp=t),t>jp&&(jp=t),n<Ip&&(Ip=n),n>Hp&&(Hp=n)},lineStart:vr,lineEnd:vr,polygonStart:vr,polygonEnd:vr,result:function(){var t=[[Fp,Ip],[jp,Hp]];return jp=Hp=-(Ip=Fp=1/0),t}},Gp=0,Vp=0,$p=0,Wp=0,Zp=0,Qp=0,Jp=0,Kp=0,tv=0,nv={point:qi,lineStart:Oi,lineEnd:Fi,polygonStart:function(){nv.lineStart=Ii,nv.lineEnd=ji},polygonEnd:function(){nv.point=qi,nv.lineStart=Oi,nv.lineEnd=Fi},result:function(){var t=tv?[Jp/tv,Kp/tv]:Qp?[Wp/Qp,Zp/Qp]:$p?[Gp/$p,Vp/$p]:[NaN,NaN];return Gp=Vp=$p=Wp=Zp=Qp=Jp=Kp=tv=0,t}};Gi.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,$d)}},result:vr};var ev,rv,iv,ov,av,uv=cr(),fv={point:vr,lineStart:function(){fv.point=Vi},lineEnd:function(){ev&&$i(rv,iv),fv.point=vr},polygonStart:function(){ev=!0},polygonEnd:function(){ev=null},result:function(){var t=+uv;return uv.reset(),t}};Wi.prototype={_radius:4.5,_circle:Zi(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=Zi(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Ji.prototype={constructor:Ji,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var cv=16,sv=tp(30*Zd),lv=Qi({point:function(t,n){this.stream.point(t*Zd,n*Zd)}}),hv=ho(function(t){return up(2/(1+t))});hv.invert=po(function(t){return 2*dr(t/2)});var dv=ho(function(t){return(t=hr(t))&&t/op(t)});dv.invert=po(function(t){return t}),vo.invert=function(t,n){return[t,2*Jd(ep(n))-Gd]},bo.invert=bo,xo.invert=po(Jd),Mo.invert=function(t,n){var e,r=n,i=25;do{var o=r*r,a=o*o;r-=e=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-n)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Qd(e)>jd&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},Ao.invert=po(dr),To.invert=po(function(t){return 2*Jd(t)}),No.invert=function(t,n){return[-n,2*Jd(ep(t))-Gd]},Do.prototype=Po.prototype={constructor:Do,count:function(){return this.eachAfter(Co)},each:function(t){var n,e,r,i,o=this,a=[o];do{for(n=a.reverse(),a=[];o=n.pop();)if(t(o),e=o.children)for(r=0,i=e.length;r<i;++r)a.push(e[r])}while(a.length);return this},eachAfter:function(t){for(var n,e,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),n=i.children)for(e=0,r=n.length;e<r;++e)o.push(n[e]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var n,e,r=this,i=[r];r=i.pop();)if(t(r),n=r.children)for(e=n.length-1;e>=0;--e)i.push(n[e]);return this},sum:function(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})},sort:function(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})},path:function(t){for(var n=this,e=function(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n},descendants:function(){var t=[];return this.each(function(n){t.push(n)}),t},leaves:function(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t},links:function(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n},copy:function(){return Po(this).eachBefore(Ro)}};var pv=Array.prototype.slice,vv="$",gv={depth:-1},yv={};ca.prototype=Object.create(Do.prototype);var _v=(1+Math.sqrt(5))/2,bv=function t(n){function e(t,e,r,i,o){la(n,t,e,r,i,o)}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(_v),mv=function t(n){function e(t,e,r,i,o){if((a=t._squarify)&&a.ratio===n)for(var a,u,f,c,s,l=-1,h=a.length,d=t.value;++l<h;){for(f=(u=a[l]).children,c=u.value=0,s=f.length;c<s;++c)u.value+=f[c].value;u.dice?na(u,e,r,i,r+=(o-r)*u.value/d):sa(u,e,r,e+=(i-e)*u.value/d,o),d-=u.value}else t._squarify=a=la(n,t,e,r,i,o),a.ratio=n}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(_v),xv=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return n()*e+t}}return e.source=t,e}(va),wv=function t(n){function e(t,e){var r,i;return t=null==t?0:+t,e=null==e?1:+e,function(){var o;if(null!=r)o=r,r=null;else do{r=2*n()-1,o=2*n()-1,i=r*r+o*o}while(!i||i>1);return t+e*o*Math.sqrt(-2*Math.log(i)/i)}}return e.source=t,e}(va),Mv=function t(n){function e(){var t=wv.source(n).apply(this,arguments);return function(){return Math.exp(t())}}return e.source=t,e}(va),Av=function t(n){function e(t){return function(){for(var e=0,r=0;r<t;++r)e+=n();return e}}return e.source=t,e}(va),Tv=function t(n){function e(t){var e=Av.source(n)(t);return function(){return e()/t}}return e.source=t,e}(va),Nv=function t(n){function e(t){return function(){return-Math.log(1-n())/t}}return e.source=t,e}(va),Sv=Array.prototype,Ev=Sv.map,kv=Sv.slice,Cv={name:"implicit"},Pv=[0,1],zv=new Date,Rv=new Date,Lv=Ia(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});Lv.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Ia(function(n){n.setTime(Math.floor(n/t)*t)},function(n,e){n.setTime(+n+e*t)},function(n,e){return(e-n)/t}):Lv:null};var Dv=Lv.range,Uv=6e4,qv=6048e5,Ov=Ia(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(+t+1e3*n)},function(t,n){return(n-t)/1e3},function(t){return t.getUTCSeconds()}),Yv=Ov.range,Bv=Ia(function(t){t.setTime(Math.floor(t/Uv)*Uv)},function(t,n){t.setTime(+t+n*Uv)},function(t,n){return(n-t)/Uv},function(t){return t.getMinutes()}),Fv=Bv.range,Iv=Ia(function(t){var n=t.getTimezoneOffset()*Uv%36e5;n<0&&(n+=36e5),t.setTime(36e5*Math.floor((+t-n)/36e5)+n)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getHours()}),jv=Iv.range,Hv=Ia(function(t){t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Uv)/864e5},function(t){return t.getDate()-1}),Xv=Hv.range,Gv=ja(0),Vv=ja(1),$v=ja(2),Wv=ja(3),Zv=ja(4),Qv=ja(5),Jv=ja(6),Kv=Gv.range,tg=Vv.range,ng=$v.range,eg=Wv.range,rg=Zv.range,ig=Qv.range,og=Jv.range,ag=Ia(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),ug=ag.range,fg=Ia(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});fg.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Ia(function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,e){n.setFullYear(n.getFullYear()+e*t)}):null};var cg=fg.range,sg=Ia(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*Uv)},function(t,n){return(n-t)/Uv},function(t){return t.getUTCMinutes()}),lg=sg.range,hg=Ia(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getUTCHours()}),dg=hg.range,pg=Ia(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/864e5},function(t){return t.getUTCDate()-1}),vg=pg.range,gg=Ha(0),yg=Ha(1),_g=Ha(2),bg=Ha(3),mg=Ha(4),xg=Ha(5),wg=Ha(6),Mg=gg.range,Ag=yg.range,Tg=_g.range,Ng=bg.range,Sg=mg.range,Eg=xg.range,kg=wg.range,Cg=Ia(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Pg=Cg.range,zg=Ia(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});zg.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Ia(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)}):null};var Rg,Lg=zg.range,Dg={"-":"",_:" ",0:"0"},Ug=/^\s*\d+/,qg=/^%/,Og=/[\\^$*+?|[\]().{}]/g;nf({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Yg="%Y-%m-%dT%H:%M:%S.%LZ",Bg=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat(Yg),Fg=+new Date("2000-01-01T00:00:00.000Z")?function(t){var n=new Date(t);return isNaN(n)?null:n}:t.utcParse(Yg),Ig=1e3,jg=60*Ig,Hg=60*jg,Xg=24*Hg,Gg=7*Xg,Vg=30*Xg,$g=365*Xg,Wg=uf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Zg=uf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Qg=uf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Jg=uf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Kg=uf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),ty=uf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),ny=uf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),ey=uf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),ry=uf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),iy=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(uf),oy=ff(iy),ay=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(uf),uy=ff(ay),fy=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(uf),cy=ff(fy),sy=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(uf),ly=ff(sy),hy=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(uf),dy=ff(hy),py=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(uf),vy=ff(py),gy=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(uf),yy=ff(gy),_y=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(uf),by=ff(_y),my=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(uf),xy=ff(my),wy=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(uf),My=ff(wy),Ay=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(uf),Ty=ff(Ay),Ny=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(uf),Sy=ff(Ny),Ey=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(uf),ky=ff(Ey),Cy=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(uf),Py=ff(Cy),zy=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(uf),Ry=ff(zy),Ly=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(uf),Dy=ff(Ly),Uy=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(uf),qy=ff(Uy),Oy=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(uf),Yy=ff(Oy),By=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(uf),Fy=ff(By),Iy=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(uf),jy=ff(Iy),Hy=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(uf),Xy=ff(Hy),Gy=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(uf),Vy=ff(Gy),$y=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(uf),Wy=ff($y),Zy=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(uf),Qy=ff(Zy),Jy=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(uf),Ky=ff(Jy),t_=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(uf),n_=ff(t_),e_=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(uf),r_=ff(e_),i_=ml(Zt(300,.5,0),Zt(-240,.5,1)),o_=ml(Zt(-100,.75,.35),Zt(80,1.5,.8)),a_=ml(Zt(260,.75,.35),Zt(80,1.5,.8)),u_=Zt(),f_=Rt(),c_=Math.PI/3,s_=2*Math.PI/3,l_=cf(uf("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),h_=cf(uf("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),d_=cf(uf("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),p_=cf(uf("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),v_=Math.abs,g_=Math.atan2,y_=Math.cos,__=Math.max,b_=Math.min,m_=Math.sin,x_=Math.sqrt,w_=1e-12,M_=Math.PI,A_=M_/2,T_=2*M_;_f.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var N_=Sf(bf);Nf.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};var S_=Array.prototype.slice,E_={draw:function(t,n){var e=Math.sqrt(n/M_);t.moveTo(e,0),t.arc(0,0,e,0,T_)}},k_={draw:function(t,n){var e=Math.sqrt(n/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},C_=Math.sqrt(1/3),P_=2*C_,z_={draw:function(t,n){var e=Math.sqrt(n/P_),r=e*C_;t.moveTo(0,-e),t.lineTo(r,0),t.lineTo(0,e),t.lineTo(-r,0),t.closePath()}},R_=Math.sin(M_/10)/Math.sin(7*M_/10),L_=Math.sin(T_/10)*R_,D_=-Math.cos(T_/10)*R_,U_={draw:function(t,n){var e=Math.sqrt(.8908130915292852*n),r=L_*e,i=D_*e;t.moveTo(0,-e),t.lineTo(r,i);for(var o=1;o<5;++o){var a=T_*o/5,u=Math.cos(a),f=Math.sin(a);t.lineTo(f*e,-u*e),t.lineTo(u*r-f*i,f*r+u*i)}t.closePath()}},q_={draw:function(t,n){var e=Math.sqrt(n),r=-e/2;t.rect(r,r,e,e)}},O_=Math.sqrt(3),Y_={draw:function(t,n){var e=-Math.sqrt(n/(3*O_));t.moveTo(0,2*e),t.lineTo(-O_*e,-e),t.lineTo(O_*e,-e),t.closePath()}},B_=Math.sqrt(3)/2,F_=1/Math.sqrt(12),I_=3*(F_/2+1),j_={draw:function(t,n){var e=Math.sqrt(n/I_),r=e/2,i=e*F_,o=r,a=e*F_+e,u=-o,f=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(u,f),t.lineTo(-.5*r-B_*i,B_*r+-.5*i),t.lineTo(-.5*o-B_*a,B_*o+-.5*a),t.lineTo(-.5*u-B_*f,B_*u+-.5*f),t.lineTo(-.5*r+B_*i,-.5*i-B_*r),t.lineTo(-.5*o+B_*a,-.5*a-B_*o),t.lineTo(-.5*u+B_*f,-.5*f-B_*u),t.closePath()}},H_=[E_,k_,z_,q_,U_,Y_,j_];Bf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yf(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Ff.prototype={areaStart:Of,areaEnd:Of,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Yf(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},If.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:Yf(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},jf.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],o=n[0],a=t[e]-i,u=n[e]-o,f=-1;++f<=e;)r=f/e,this._basis.point(this._beta*t[f]+(1-this._beta)*(i+r*a),this._beta*n[f]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var X_=function t(n){function e(t){return 1===n?new Bf(t):new jf(t,n)}return e.beta=function(n){return t(+n)},e}(.85);Xf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Hf(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Hf(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var G_=function t(n){function e(t){return new Xf(t,n)}return e.tension=function(n){return t(+n)},e}(0);Gf.prototype={areaStart:Of,areaEnd:Of,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Hf(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var V_=function t(n){function e(t){return new Gf(t,n)}return e.tension=function(n){return t(+n)},e}(0);Vf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Hf(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var $_=function t(n){function e(t){return new Vf(t,n)}return e.tension=function(n){return t(+n)},e}(0);Wf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:$f(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var W_=function t(n){function e(t){return n?new Wf(t,n):new Xf(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);Zf.prototype={areaStart:Of,areaEnd:Of,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:$f(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Z_=function t(n){function e(t){return n?new Zf(t,n):new Gf(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);Qf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$f(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Q_=function t(n){function e(t){return n?new Qf(t,n):new Vf(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);Jf.prototype={areaStart:Of,areaEnd:Of,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}},rc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ec(this,this._t0,nc(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(t=+t,n=+n,t!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,ec(this,nc(this,e=tc(this,t,n)),e);break;default:ec(this,this._t0,e=tc(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(ic.prototype=Object.create(rc.prototype)).point=function(t,n){rc.prototype.point.call(this,n,t)},oc.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}},ac.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var r=uc(t),i=uc(n),o=0,a=1;a<e;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],n[a]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}},fc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}},yc.prototype={constructor:yc,insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=xc(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)e===(r=e.U).L?(i=r.R)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&(bc(this,e),e=(t=e).U),e.C=!1,r.C=!0,mc(this,r)):(i=r.L)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&(mc(this,e),e=(t=e).U),e.C=!1,r.C=!0,bc(this,r)),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,i=t.U,o=t.L,a=t.R;if(e=o?a?xc(a):o:a,i?i.L===t?i.L=e:i.R=e:this._=e,o&&a?(r=e.C,e.C=t.C,e.L=o,o.U=e,e!==a?(i=e.U,e.U=t.U,t=e.R,i.L=t,e.R=a,a.U=e):(e.U=i,i=e,t=e.R)):(r=t.C,t=e),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((n=i.R).C&&(n.C=!1,i.C=!0,bc(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,mc(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,bc(this,i),t=this._;break}}else if((n=i.L).C&&(n.C=!1,i.C=!0,mc(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,bc(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,mc(this,i),t=this._;break}n.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var J_,K_,tb,nb,eb,rb=[],ib=[],ob=1e-6,ab=1e-12;Yc.prototype={constructor:Yc,polygons:function(){var t=this.edges;return this.cells.map(function(n){var e=n.halfedges.map(function(e){return Ec(n,t[e])});return e.data=n.site.data,e})},triangles:function(){var t=[],n=this.edges;return this.cells.forEach(function(e,r){if(o=(i=e.halfedges).length)for(var i,o,a,u=e.site,f=-1,c=n[i[o-1]],s=c.left===u?c.right:c.left;++f<o;)a=s,s=(c=n[i[f]]).left===u?c.right:c.left,a&&s&&r<a.index&&r<s.index&&qc(u,a,s)<0&&t.push([u.data,a.data,s.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,n,e){for(var r,i,o=this,a=o._found||0,u=o.cells.length;!(i=o.cells[a]);)if(++a>=u)return null;var f=t-i.site[0],c=n-i.site[1],s=f*f+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach(function(e){var r=o.edges[e],u=r.left;if(u!==i.site&&u||(u=r.right)){var f=t-u[0],c=n-u[1],l=f*f+c*c;l<s&&(s=l,a=u.index)}})}while(null!==a);return o._found=r,null==e||s<=e*e?i.site:null}},Fc.prototype={constructor:Fc,scale:function(t){return 1===t?this:new Fc(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new Fc(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ub=new Fc(1,0,0);Ic.prototype=Fc.prototype,t.version="5.4.0",t.bisect=Jc,t.bisectRight=Jc,t.bisectLeft=Kc,t.ascending=n,t.bisector=e,t.cross=function(t,n,e){var i,o,a,u,f=t.length,c=n.length,s=new Array(f*c);for(null==e&&(e=r),i=a=0;i<f;++i)for(u=t[i],o=0;o<c;++o,++a)s[a]=e(u,n[o]);return s},t.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},t.deviation=a,t.extent=u,t.histogram=function(){function t(t){var i,o,a=t.length,u=new Array(a);for(i=0;i<a;++i)u[i]=n(t[i],i,t);var f=e(u),c=f[0],l=f[1],h=r(u,c,l);Array.isArray(h)||(h=d(c,l,h),h=s(Math.ceil(c/h)*h,Math.floor(l/h)*h,h));for(var p=h.length;h[0]<=c;)h.shift(),--p;for(;h[p-1]>l;)h.pop(),--p;var v,g=new Array(p+1);for(i=0;i<=p;++i)(v=g[i]=[]).x0=i>0?h[i-1]:c,v.x1=i<p?h[i]:l;for(i=0;i<a;++i)c<=(o=u[i])&&o<=l&&g[Jc(h,o,0,p)].push(t[i]);return g}var n=c,e=u,r=p;return t.value=function(e){return arguments.length?(n="function"==typeof e?e:f(e),t):n},t.domain=function(n){return arguments.length?(e="function"==typeof n?n:f([n[0],n[1]]),t):e},t.thresholds=function(n){return arguments.length?(r="function"==typeof n?n:Array.isArray(n)?f(ns.call(n)):f(n),t):r},t},t.thresholdFreedmanDiaconis=function(t,e,r){return t=es.call(t,i).sort(n),Math.ceil((r-e)/(2*(v(t,.75)-v(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,n,e){return Math.ceil((e-n)/(3.5*a(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=p,t.max=g,t.mean=function(t,n){var e,r=t.length,o=r,a=-1,u=0;if(null==n)for(;++a<r;)isNaN(e=i(t[a]))?--o:u+=e;else for(;++a<r;)isNaN(e=i(n(t[a],a,t)))?--o:u+=e;if(o)return u/o},t.median=function(t,e){var r,o=t.length,a=-1,u=[];if(null==e)for(;++a<o;)isNaN(r=i(t[a]))||u.push(r);else for(;++a<o;)isNaN(r=i(e(t[a],a,t)))||u.push(r);return v(u.sort(n),.5)},t.merge=y,t.min=_,t.pairs=function(t,n){null==n&&(n=r);for(var e=0,i=t.length-1,o=t[0],a=new Array(i<0?0:i);e<i;)a[e]=n(o,o=t[++e]);return a},t.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},t.quantile=v,t.range=s,t.scan=function(t,e){if(r=t.length){var r,i,o=0,a=0,u=t[a];for(null==e&&(e=n);++o<r;)(e(i=t[o],u)<0||0!==e(u,u))&&(u=i,a=o);return 0===e(u,u)?a:void 0}},t.shuffle=function(t,n,e){for(var r,i,o=(null==e?t.length:e)-(n=null==n?0:+n);o;)i=Math.random()*o--|0,r=t[o+n],t[o+n]=t[i+n],t[i+n]=r;return t},t.sum=function(t,n){var e,r=t.length,i=-1,o=0;if(null==n)for(;++i<r;)(e=+t[i])&&(o+=e);else for(;++i<r;)(e=+n(t[i],i,t))&&(o+=e);return o},t.ticks=l,t.tickIncrement=h,t.tickStep=d,t.transpose=b,t.variance=o,t.zip=function(){return b(arguments)},t.axisTop=function(t){return T(us,t)},t.axisRight=function(t){return T(fs,t)},t.axisBottom=function(t){return T(cs,t)},t.axisLeft=function(t){return T(ss,t)},t.brush=function(){return ee(_h)},t.brushX=function(){return ee(gh)},t.brushY=function(){return ee(yh)},t.brushSelection=function(t){var n=t.__brush;return n?n.dim.output(n.selection):null},t.chord=function(){function t(t){var o,a,u,f,c,l,h=t.length,d=[],p=s(h),v=[],g=[],y=g.groups=new Array(h),_=new Array(h*h);for(o=0,c=-1;++c<h;){for(a=0,l=-1;++l<h;)a+=t[c][l];d.push(a),v.push(s(h)),o+=a}for(e&&p.sort(function(t,n){return e(d[t],d[n])}),r&&v.forEach(function(n,e){n.sort(function(n,i){return r(t[e][n],t[e][i])})}),f=(o=kh(0,Eh-n*h)/o)?n:Eh/h,a=0,c=-1;++c<h;){for(u=a,l=-1;++l<h;){var b=p[c],m=v[b][l],x=t[b][m],w=a,M=a+=x*o;_[m*h+b]={index:b,subindex:m,startAngle:w,endAngle:M,value:x}}y[b]={index:b,startAngle:u,endAngle:a,value:d[b]},a+=f}for(c=-1;++c<h;)for(l=c-1;++l<h;){var A=_[l*h+c],T=_[c*h+l];(A.value||T.value)&&g.push(A.value<T.value?{source:T,target:A}:{source:A,target:T})}return i?g.sort(i):g}var n=0,e=null,r=null,i=null;return t.padAngle=function(e){return arguments.length?(n=kh(0,e),t):n},t.sortGroups=function(n){return arguments.length?(e=n,t):e},t.sortSubgroups=function(n){return arguments.length?(r=n,t):r},t.sortChords=function(n){return arguments.length?(null==n?i=null:(i=function(t){return function(n,e){return t(n.source.value+n.target.value,e.source.value+e.target.value)}}(n))._=n,t):i&&i._},t},t.ribbon=function(){function t(){var t,u=Ch.call(arguments),f=n.apply(this,u),c=e.apply(this,u),s=+r.apply(this,(u[0]=f,u)),l=i.apply(this,u)-Sh,h=o.apply(this,u)-Sh,d=s*Ah(l),p=s*Th(l),v=+r.apply(this,(u[0]=c,u)),g=i.apply(this,u)-Sh,y=o.apply(this,u)-Sh;if(a||(a=t=oe()),a.moveTo(d,p),a.arc(0,0,s,l,h),l===g&&h===y||(a.quadraticCurveTo(0,0,v*Ah(g),v*Th(g)),a.arc(0,0,v,g,y)),a.quadraticCurveTo(0,0,d,p),a.closePath(),t)return a=null,t+""||null}var n=ae,e=ue,r=fe,i=ce,o=se,a=null;return t.radius=function(n){return arguments.length?(r="function"==typeof n?n:re(+n),t):r},t.startAngle=function(n){return arguments.length?(i="function"==typeof n?n:re(+n),t):i},t.endAngle=function(n){return arguments.length?(o="function"==typeof n?n:re(+n),t):o},t.source=function(e){return arguments.length?(n=e,t):n},t.target=function(n){return arguments.length?(e=n,t):e},t.context=function(n){return arguments.length?(a=null==n?null:n,t):a},t},t.nest=function(){function t(n,i,a,u){if(i>=o.length)return null!=e&&n.sort(e),null!=r?r(n):n;for(var f,c,s,l=-1,h=n.length,d=o[i++],p=he(),v=a();++l<h;)(s=p.get(f=d(c=n[l])+""))?s.push(c):p.set(f,[c]);return p.each(function(n,e){u(v,e,t(n,i,a,u))}),v}function n(t,e){if(++e>o.length)return t;var i,u=a[e-1];return null!=r&&e>=o.length?i=t.entries():(i=[],t.each(function(t,r){i.push({key:r,values:n(t,e)})})),null!=u?i.sort(function(t,n){return u(t.key,n.key)}):i}var e,r,i,o=[],a=[];return i={object:function(n){return t(n,0,de,pe)},map:function(n){return t(n,0,ve,ge)},entries:function(e){return n(t(e,0,ve,ge),0)},key:function(t){return o.push(t),i},sortKeys:function(t){return a[o.length-1]=t,i},sortValues:function(t){return e=t,i},rollup:function(t){return r=t,i}}},t.set=_e,t.map=he,t.keys=function(t){var n=[];for(var e in t)n.push(e);return n},t.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},t.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},t.color=kt,t.rgb=Rt,t.hsl=qt,t.lab=Ft,t.hcl=$t,t.lch=function(t,n,e,r){return 1===arguments.length?Vt(t):new Wt(e,n,t,null==r?1:r)},t.gray=function(t,n){return new It(t,0,0,null==n?1:n)},t.cubehelix=Zt,t.contours=Me,t.contourDensity=function(){function t(t){var e=new Float32Array(v*y),r=new Float32Array(v*y);t.forEach(function(t,n,r){var i=a(t,n,r)+p>>h,o=u(t,n,r)+p>>h;i>=0&&i<v&&o>=0&&o<y&&++e[i+o*v]}),Ae({width:v,height:y,data:e},{width:v,height:y,data:r},l>>h),Te({width:v,height:y,data:r},{width:v,height:y,data:e},l>>h),Ae({width:v,height:y,data:e},{width:v,height:y,data:r},l>>h),Te({width:v,height:y,data:r},{width:v,height:y,data:e},l>>h),Ae({width:v,height:y,data:e},{width:v,height:y,data:r},l>>h),Te({width:v,height:y,data:r},{width:v,height:y,data:e},l>>h);var i=_(e);if(!Array.isArray(i)){var o=g(e);i=d(0,o,i),(i=s(0,Math.floor(o/i)*i,i)).shift()}return Me().thresholds(i).size([v,y])(e).map(n)}function n(t){return t.value*=Math.pow(2,-2*h),t.coordinates.forEach(e),t}function e(t){t.forEach(r)}function r(t){t.forEach(i)}function i(t){t[0]=t[0]*Math.pow(2,h)-p,t[1]=t[1]*Math.pow(2,h)-p}function o(){return p=3*l,v=f+2*p>>h,y=c+2*p>>h,t}var a=Ne,u=Se,f=960,c=500,l=20,h=2,p=3*l,v=f+2*p>>h,y=c+2*p>>h,_=me(20);return t.x=function(n){return arguments.length?(a="function"==typeof n?n:me(+n),t):a},t.y=function(n){return arguments.length?(u="function"==typeof n?n:me(+n),t):u},t.size=function(t){if(!arguments.length)return[f,c];var n=Math.ceil(t[0]),e=Math.ceil(t[1]);if(!(n>=0||n>=0))throw new Error("invalid size");return f=n,c=e,o()},t.cellSize=function(t){if(!arguments.length)return 1<<h;if(!((t=+t)>=1))throw new Error("invalid cell size");return h=Math.floor(Math.log(t)/Math.LN2),o()},t.thresholds=function(n){return arguments.length?(_="function"==typeof n?n:Array.isArray(n)?me(Dh.call(n)):me(n),t):_},t.bandwidth=function(t){if(!arguments.length)return Math.sqrt(l*(l+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return l=Math.round((Math.sqrt(4*t*t+1)-1)/2),o()},t},t.dispatch=N,t.drag=function(){function n(t){t.on("mousedown.drag",e).filter(g).on("touchstart.drag",o).on("touchmove.drag",a).on("touchend.drag touchcancel.drag",u).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function e(){if(!h&&d.apply(this,arguments)){var n=f("mouse",p.apply(this,arguments),pt,this,arguments);n&&(ct(t.event.view).on("mousemove.drag",r,!0).on("mouseup.drag",i,!0),_t(t.event.view),gt(),l=!1,c=t.event.clientX,s=t.event.clientY,n("start"))}}function r(){if(yt(),!l){var n=t.event.clientX-c,e=t.event.clientY-s;l=n*n+e*e>m}y.mouse("drag")}function i(){ct(t.event.view).on("mousemove.drag mouseup.drag",null),bt(t.event.view,l),yt(),y.mouse("end")}function o(){if(d.apply(this,arguments)){var n,e,r=t.event.changedTouches,i=p.apply(this,arguments),o=r.length;for(n=0;n<o;++n)(e=f(r[n].identifier,i,vt,this,arguments))&&(gt(),e("start"))}}function a(){var n,e,r=t.event.changedTouches,i=r.length;for(n=0;n<i;++n)(e=y[r[n].identifier])&&(yt(),e("drag"))}function u(){var n,e,r=t.event.changedTouches,i=r.length;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),n=0;n<i;++n)(e=y[r[n].identifier])&&(gt(),e("end"))}function f(e,r,i,o,a){var u,f,c,s=i(r,e),l=_.copy();if(ot(new xt(n,"beforestart",u,e,b,s[0],s[1],0,0,l),function(){return null!=(t.event.subject=u=v.apply(o,a))&&(f=u.x-s[0]||0,c=u.y-s[1]||0,!0)}))return function t(h){var d,p=s;switch(h){case"start":y[e]=t,d=b++;break;case"end":delete y[e],--b;case"drag":s=i(r,e),d=b}ot(new xt(n,h,u,e,d,s[0]+f,s[1]+c,s[0]-p[0],s[1]-p[1],l),l.apply,l,[h,o,a])}}var c,s,l,h,d=wt,p=Mt,v=At,g=Tt,y={},_=N("start","drag","end"),b=0,m=0;return n.filter=function(t){return arguments.length?(d="function"==typeof t?t:mt(!!t),n):d},n.container=function(t){return arguments.length?(p="function"==typeof t?t:mt(t),n):p},n.subject=function(t){return arguments.length?(v="function"==typeof t?t:mt(t),n):v},n.touchable=function(t){return arguments.length?(g="function"==typeof t?t:mt(!!t),n):g},n.on=function(){var t=_.on.apply(_,arguments);return t===_?n:t},n.clickDistance=function(t){return arguments.length?(m=(t=+t)*t,n):Math.sqrt(m)},n},t.dragDisable=_t,t.dragEnable=bt,t.dsvFormat=ke,t.csvParse=jh,t.csvParseRows=Hh,t.csvFormat=Xh,t.csvFormatRows=Gh,t.tsvParse=$h,t.tsvParseRows=Wh,t.tsvFormat=Zh,t.tsvFormatRows=Qh,t.easeLinear=function(t){return+t},t.easeQuad=Fn,t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeQuadInOut=Fn,t.easeCubic=In,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeCubicInOut=In,t.easePoly=Hl,t.easePolyIn=Il,t.easePolyOut=jl,t.easePolyInOut=Hl,t.easeSin=jn,t.easeSinIn=function(t){return 1-Math.cos(t*Gl)},t.easeSinOut=function(t){return Math.sin(t*Gl)},t.easeSinInOut=jn,t.easeExp=Hn,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeExpInOut=Hn,t.easeCircle=Xn,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCircleInOut=Xn,t.easeBounce=Gn,t.easeBounceIn=function(t){return 1-Gn(1-t)},t.easeBounceOut=Gn,t.easeBounceInOut=function(t){return((t*=2)<=1?1-Gn(1-t):Gn(t-1)+1)/2},t.easeBack=oh,t.easeBackIn=rh,t.easeBackOut=ih,t.easeBackInOut=oh,t.easeElastic=fh,t.easeElasticIn=uh,t.easeElasticOut=fh,t.easeElasticInOut=ch,t.blob=function(t,n){return fetch(t,n).then(Ce)},t.buffer=function(t,n){return fetch(t,n).then(Pe)},t.dsv=function(t,n,e,r){3===arguments.length&&"function"==typeof e&&(r=e,e=void 0);var i=ke(t);return Re(n,e).then(function(t){return i.parse(t,r)})},t.csv=Jh,t.tsv=Kh,t.image=function(t,n){return new Promise(function(e,r){var i=new Image;for(var o in n)i[o]=n[o];i.onerror=r,i.onload=function(){e(i)},i.src=t})},t.json=function(t,n){return fetch(t,n).then(De)},t.text=Re,t.xml=td,t.html=nd,t.svg=ed,t.forceCenter=function(t,n){function e(){var e,i,o=r.length,a=0,u=0;for(e=0;e<o;++e)a+=(i=r[e]).x,u+=i.y;for(a=a/o-t,u=u/o-n,e=0;e<o;++e)(i=r[e]).x-=a,i.y-=u}var r;return null==t&&(t=0),null==n&&(n=0),e.initialize=function(t){r=t},e.x=function(n){return arguments.length?(t=+n,e):t},e.y=function(t){return arguments.length?(n=+t,e):n},e},t.forceCollide=function(t){function n(){for(var t,n,r,f,c,s,l,h=i.length,d=0;d<u;++d)for(n=je(i,Ge,Ve).visitAfter(e),t=0;t<h;++t)r=i[t],s=o[r.index],l=s*s,f=r.x+r.vx,c=r.y+r.vy,n.visit(function(t,n,e,i,o){var u=t.data,h=t.r,d=s+h;if(!u)return n>f+d||i<f-d||e>c+d||o<c-d;if(u.index>r.index){var p=f-u.x-u.vx,v=c-u.y-u.vy,g=p*p+v*v;g<d*d&&(0===p&&(p=Oe(),g+=p*p),0===v&&(v=Oe(),g+=v*v),g=(d-(g=Math.sqrt(g)))/g*a,r.vx+=(p*=g)*(d=(h*=h)/(l+h)),r.vy+=(v*=g)*d,u.vx-=p*(d=1-d),u.vy-=v*d)}})}function e(t){if(t.data)return t.r=o[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function r(){if(i){var n,e,r=i.length;for(o=new Array(r),n=0;n<r;++n)e=i[n],o[e.index]=+t(e,n,i)}}var i,o,a=1,u=1;return"function"!=typeof t&&(t=qe(null==t?1:+t)),n.initialize=function(t){i=t,r()},n.iterations=function(t){return arguments.length?(u=+t,n):u},n.strength=function(t){return arguments.length?(a=+t,n):a},n.radius=function(e){return arguments.length?(t="function"==typeof e?e:qe(+e),r(),n):t},n},t.forceLink=function(t){function n(n){for(var e=0,r=t.length;e<d;++e)for(var i,u,f,s,l,h,p,v=0;v<r;++v)u=(i=t[v]).source,s=(f=i.target).x+f.vx-u.x-u.vx||Oe(),l=f.y+f.vy-u.y-u.vy||Oe(),s*=h=((h=Math.sqrt(s*s+l*l))-a[v])/h*n*o[v],l*=h,f.vx-=s*(p=c[v]),f.vy-=l*p,u.vx+=s*(p=1-p),u.vy+=l*p}function e(){if(u){var n,e,l=u.length,h=t.length,d=he(u,s);for(n=0,f=new Array(l);n<h;++n)(e=t[n]).index=n,"object"!=typeof e.source&&(e.source=We(d,e.source)),"object"!=typeof e.target&&(e.target=We(d,e.target)),f[e.source.index]=(f[e.source.index]||0)+1,f[e.target.index]=(f[e.target.index]||0)+1;for(n=0,c=new Array(h);n<h;++n)e=t[n],c[n]=f[e.source.index]/(f[e.source.index]+f[e.target.index]);o=new Array(h),r(),a=new Array(h),i()}}function r(){if(u)for(var n=0,e=t.length;n<e;++n)o[n]=+l(t[n],n,t)}function i(){if(u)for(var n=0,e=t.length;n<e;++n)a[n]=+h(t[n],n,t)}var o,a,u,f,c,s=$e,l=function(t){return 1/Math.min(f[t.source.index],f[t.target.index])},h=qe(30),d=1;return null==t&&(t=[]),n.initialize=function(t){u=t,e()},n.links=function(r){return arguments.length?(t=r,e(),n):t},n.id=function(t){return arguments.length?(s=t,n):s},n.iterations=function(t){return arguments.length?(d=+t,n):d},n.strength=function(t){return arguments.length?(l="function"==typeof t?t:qe(+t),r(),n):l},n.distance=function(t){return arguments.length?(h="function"==typeof t?t:qe(+t),i(),n):h},n},t.forceManyBody=function(){function t(t){var n,u=i.length,f=je(i,Ze,Qe).visitAfter(e);for(a=t,n=0;n<u;++n)o=i[n],f.visit(r)}function n(){if(i){var t,n,e=i.length;for(u=new Array(e),t=0;t<e;++t)n=i[t],u[n.index]=+f(n,t,i)}}function e(t){var n,e,r,i,o,a=0,f=0;if(t.length){for(r=i=o=0;o<4;++o)(n=t[o])&&(e=Math.abs(n.value))&&(a+=n.value,f+=e,r+=e*n.x,i+=e*n.y);t.x=r/f,t.y=i/f}else{(n=t).x=n.data.x,n.y=n.data.y;do{a+=u[n.data.index]}while(n=n.next)}t.value=a}function r(t,n,e,r){if(!t.value)return!0;var i=t.x-o.x,f=t.y-o.y,h=r-n,d=i*i+f*f;if(h*h/l<d)return d<s&&(0===i&&(i=Oe(),d+=i*i),0===f&&(f=Oe(),d+=f*f),d<c&&(d=Math.sqrt(c*d)),o.vx+=i*t.value*a/d,o.vy+=f*t.value*a/d),!0;if(!(t.length||d>=s)){(t.data!==o||t.next)&&(0===i&&(i=Oe(),d+=i*i),0===f&&(f=Oe(),d+=f*f),d<c&&(d=Math.sqrt(c*d)));do{t.data!==o&&(h=u[t.data.index]*a/d,o.vx+=i*h,o.vy+=f*h)}while(t=t.next)}}var i,o,a,u,f=qe(-30),c=1,s=1/0,l=.81;return t.initialize=function(t){i=t,n()},t.strength=function(e){return arguments.length?(f="function"==typeof e?e:qe(+e),n(),t):f},t.distanceMin=function(n){return arguments.length?(c=n*n,t):Math.sqrt(c)},t.distanceMax=function(n){return arguments.length?(s=n*n,t):Math.sqrt(s)},t.theta=function(n){return arguments.length?(l=n*n,t):Math.sqrt(l)},t},t.forceRadial=function(t,n,e){function r(t){for(var r=0,i=o.length;r<i;++r){var f=o[r],c=f.x-n||1e-6,s=f.y-e||1e-6,l=Math.sqrt(c*c+s*s),h=(u[r]-l)*a[r]*t/l;f.vx+=c*h,f.vy+=s*h}}function i(){if(o){var n,e=o.length;for(a=new Array(e),u=new Array(e),n=0;n<e;++n)u[n]=+t(o[n],n,o),a[n]=isNaN(u[n])?0:+f(o[n],n,o)}}var o,a,u,f=qe(.1);return"function"!=typeof t&&(t=qe(+t)),null==n&&(n=0),null==e&&(e=0),r.initialize=function(t){o=t,i()},r.strength=function(t){return arguments.length?(f="function"==typeof t?t:qe(+t),i(),r):f},r.radius=function(n){return arguments.length?(t="function"==typeof n?n:qe(+n),i(),r):t},r.x=function(t){return arguments.length?(n=+t,r):n},r.y=function(t){return arguments.length?(e=+t,r):e},r},t.forceSimulation=function(t){function n(){e(),d.call("tick",o),a<u&&(h.stop(),d.call("end",o))}function e(){var n,e,r=t.length;for(a+=(c-a)*f,l.each(function(t){t(a)}),n=0;n<r;++n)null==(e=t[n]).fx?e.x+=e.vx*=s:(e.x=e.fx,e.vx=0),null==e.fy?e.y+=e.vy*=s:(e.y=e.fy,e.vy=0)}function r(){for(var n,e=0,r=t.length;e<r;++e){if(n=t[e],n.index=e,isNaN(n.x)||isNaN(n.y)){var i=id*Math.sqrt(e),o=e*od;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function i(n){return n.initialize&&n.initialize(t),n}var o,a=1,u=.001,f=1-Math.pow(u,1/300),c=0,s=.6,l=he(),h=Tn(n),d=N("tick","end");return null==t&&(t=[]),r(),o={tick:e,restart:function(){return h.restart(n),o},stop:function(){return h.stop(),o},nodes:function(n){return arguments.length?(t=n,r(),l.each(i),o):t},alpha:function(t){return arguments.length?(a=+t,o):a},alphaMin:function(t){return arguments.length?(u=+t,o):u},alphaDecay:function(t){return arguments.length?(f=+t,o):+f},alphaTarget:function(t){return arguments.length?(c=+t,o):c},velocityDecay:function(t){return arguments.length?(s=1-t,o):1-s},force:function(t,n){return arguments.length>1?(null==n?l.remove(t):l.set(t,i(n)),o):l.get(t)},find:function(n,e,r){var i,o,a,u,f,c=0,s=t.length;for(null==r?r=1/0:r*=r,c=0;c<s;++c)(a=(i=n-(u=t[c]).x)*i+(o=e-u.y)*o)<r&&(f=u,r=a);return f},on:function(t,n){return arguments.length>1?(d.on(t,n),o):d.on(t)}}},t.forceX=function(t){function n(t){for(var n,e=0,a=r.length;e<a;++e)(n=r[e]).vx+=(o[e]-n.x)*i[e]*t}function e(){if(r){var n,e=r.length;for(i=new Array(e),o=new Array(e),n=0;n<e;++n)i[n]=isNaN(o[n]=+t(r[n],n,r))?0:+a(r[n],n,r)}}var r,i,o,a=qe(.1);return"function"!=typeof t&&(t=qe(null==t?0:+t)),n.initialize=function(t){r=t,e()},n.strength=function(t){return arguments.length?(a="function"==typeof t?t:qe(+t),e(),n):a},n.x=function(r){return arguments.length?(t="function"==typeof r?r:qe(+r),e(),n):t},n},t.forceY=function(t){function n(t){for(var n,e=0,a=r.length;e<a;++e)(n=r[e]).vy+=(o[e]-n.y)*i[e]*t}function e(){if(r){var n,e=r.length;for(i=new Array(e),o=new Array(e),n=0;n<e;++n)i[n]=isNaN(o[n]=+t(r[n],n,r))?0:+a(r[n],n,r)}}var r,i,o,a=qe(.1);return"function"!=typeof t&&(t=qe(null==t?0:+t)),n.initialize=function(t){r=t,e()},n.strength=function(t){return arguments.length?(a="function"==typeof t?t:qe(+t),e(),n):a},n.y=function(r){return arguments.length?(t="function"==typeof r?r:qe(+r),e(),n):t},n},t.formatDefaultLocale=or,t.formatLocale=ir,t.formatSpecifier=tr,t.precisionFixed=ar,t.precisionPrefix=ur,t.precisionRound=fr,t.geoArea=function(t){return hp.reset(),br(t,dp),2*hp},t.geoBounds=function(t){var n,e,r,i,o,a,u;if(bd=_d=-(gd=yd=1/0),Ad=[],br(t,vp),e=Ad.length){for(Ad.sort(Yr),n=1,o=[r=Ad[0]];n<e;++n)Br(r,(i=Ad[n])[0])||Br(r,i[1])?(Or(r[0],i[1])>Or(r[0],r[1])&&(r[1]=i[1]),Or(i[0],r[1])>Or(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=0,r=o[e=o.length-1];n<=e;r=i,++n)i=o[n],(u=Or(r[1],i[0]))>a&&(a=u,gd=i[0],_d=r[1])}return Ad=Td=null,gd===1/0||yd===1/0?[[NaN,NaN],[NaN,NaN]]:[[gd,yd],[_d,bd]]},t.geoCentroid=function(t){Nd=Sd=Ed=kd=Cd=Pd=zd=Rd=Ld=Dd=Ud=0,br(t,gp);var n=Ld,e=Dd,r=Ud,i=n*n+e*e+r*r;return i<Hd&&(n=Pd,e=zd,r=Rd,Sd<jd&&(n=Ed,e=kd,r=Cd),(i=n*n+e*e+r*r)<Hd)?[NaN,NaN]:[Kd(e,n)*Wd,dr(r/up(i))*Wd]},t.geoCircle=function(){function t(){var t=r.apply(this,arguments),u=i.apply(this,arguments)*Zd,f=o.apply(this,arguments)*Zd;return n=[],e=ti(-t[0]*Zd,-t[1]*Zd,0).invert,oi(a,u,f,1),t={type:"Polygon",coordinates:[n]},n=e=null,t}var n,e,r=Qr([0,0]),i=Qr(90),o=Qr(6),a={point:function(t,r){n.push(t=e(t,r)),t[0]*=Wd,t[1]*=Wd}};return t.center=function(n){return arguments.length?(r="function"==typeof n?n:Qr([+n[0],+n[1]]),t):r},t.radius=function(n){return arguments.length?(i="function"==typeof n?n:Qr(+n),t):i},t.precision=function(n){return arguments.length?(o="function"==typeof n?n:Qr(+n),t):o},t},t.geoClipAntimeridian=kp,t.geoClipCircle=gi,t.geoClipExtent=function(){var t,n,e,r=0,i=0,o=960,a=500;return e={stream:function(e){return t&&n===e?t:t=yi(r,i,o,a)(n=e)},extent:function(u){return arguments.length?(r=+u[0][0],i=+u[0][1],o=+u[1][0],a=+u[1][1],t=n=null,e):[[r,i],[o,a]]}}},t.geoClipRectangle=yi,t.geoContains=function(t,n){return(t&&Up.hasOwnProperty(t.type)?Up[t.type]:Mi)(t,n)},t.geoDistance=wi,t.geoGraticule=Pi,t.geoGraticule10=function(){return Pi()()},t.geoInterpolate=function(t,n){var e=t[0]*Zd,r=t[1]*Zd,i=n[0]*Zd,o=n[1]*Zd,a=tp(r),u=op(r),f=tp(o),c=op(o),s=a*tp(e),l=a*op(e),h=f*tp(i),d=f*op(i),p=2*dr(up(pr(o-r)+a*f*pr(i-e))),v=op(p),g=p?function(t){var n=op(t*=p)/v,e=op(p-t)/v,r=e*s+n*h,i=e*l+n*d,o=e*u+n*c;return[Kd(i,r)*Wd,Kd(o,up(r*r+i*i))*Wd]}:function(){return[e*Wd,r*Wd]};return g.distance=p,g},t.geoLength=xi,t.geoPath=function(t,n){function e(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),br(t,r(i))),i.result()}var r,i,o=4.5;return e.area=function(t){return br(t,r(Bp)),Bp.result()},e.measure=function(t){return br(t,r(fv)),fv.result()},e.bounds=function(t){return br(t,r(Xp)),Xp.result()},e.centroid=function(t){return br(t,r(nv)),nv.result()},e.projection=function(n){return arguments.length?(r=null==n?(t=null,zi):(t=n).stream,e):t},e.context=function(t){return arguments.length?(i=null==t?(n=null,new Wi):new Gi(n=t),"function"!=typeof o&&i.pointRadius(o),e):n},e.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),e):o},e.projection(t).context(n)},t.geoAlbers=lo,t.geoAlbersUsa=function(){function t(t){var n=t[0],e=t[1];return u=null,i.point(n,e),u||(o.point(n,e),u)||(a.point(n,e),u)}function n(){return e=r=null,t}var e,r,i,o,a,u,f=lo(),c=so().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=so().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){u=[t,n]}};return t.invert=function(t){var n=f.scale(),e=f.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?c:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:f).invert(t)},t.stream=function(t){return e&&r===t?e:e=function(t){var n=t.length;return{point:function(e,r){for(var i=-1;++i<n;)t[i].point(e,r)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}([f.stream(r=t),c.stream(t),s.stream(t)])},t.precision=function(t){return arguments.length?(f.precision(t),c.precision(t),s.precision(t),n()):f.precision()},t.scale=function(n){return arguments.length?(f.scale(n),c.scale(.35*n),s.scale(n),t.translate(f.translate())):f.scale()},t.translate=function(t){if(!arguments.length)return f.translate();var e=f.scale(),r=+t[0],u=+t[1];return i=f.translate(t).clipExtent([[r-.455*e,u-.238*e],[r+.455*e,u+.238*e]]).stream(l),o=c.translate([r-.307*e,u+.201*e]).clipExtent([[r-.425*e+jd,u+.12*e+jd],[r-.214*e-jd,u+.234*e-jd]]).stream(l),a=s.translate([r-.205*e,u+.212*e]).clipExtent([[r-.214*e+jd,u+.166*e+jd],[r-.115*e-jd,u+.234*e-jd]]).stream(l),n()},t.fitExtent=function(n,e){return to(t,n,e)},t.fitSize=function(n,e){return no(t,n,e)},t.fitWidth=function(n,e){return eo(t,n,e)},t.fitHeight=function(n,e){return ro(t,n,e)},t.scale(1070)},t.geoAzimuthalEqualArea=function(){return ao(hv).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=hv,t.geoAzimuthalEquidistant=function(){return ao(dv).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=dv,t.geoConicConformal=function(){return fo(_o).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=_o,t.geoConicEqualArea=so,t.geoConicEqualAreaRaw=co,t.geoConicEquidistant=function(){return fo(mo).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=mo,t.geoEquirectangular=function(){return ao(bo).scale(152.63)},t.geoEquirectangularRaw=bo,t.geoGnomonic=function(){return ao(xo).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=xo,t.geoIdentity=function(){function t(){return i=o=null,a}var n,e,r,i,o,a,u=1,f=0,c=0,s=1,l=1,h=zi,d=null,p=zi;return a={stream:function(t){return i&&o===t?i:i=h(p(o=t))},postclip:function(i){return arguments.length?(p=i,d=n=e=r=null,t()):p},clipExtent:function(i){return arguments.length?(p=null==i?(d=n=e=r=null,zi):yi(d=+i[0][0],n=+i[0][1],e=+i[1][0],r=+i[1][1]),t()):null==d?null:[[d,n],[e,r]]},scale:function(n){return arguments.length?(h=wo((u=+n)*s,u*l,f,c),t()):u},translate:function(n){return arguments.length?(h=wo(u*s,u*l,f=+n[0],c=+n[1]),t()):[f,c]},reflectX:function(n){return arguments.length?(h=wo(u*(s=n?-1:1),u*l,f,c),t()):s<0},reflectY:function(n){return arguments.length?(h=wo(u*s,u*(l=n?-1:1),f,c),t()):l<0},fitExtent:function(t,n){return to(a,t,n)},fitSize:function(t,n){return no(a,t,n)},fitWidth:function(t,n){return eo(a,t,n)},fitHeight:function(t,n){return ro(a,t,n)}}},t.geoProjection=ao,t.geoProjectionMutator=uo,t.geoMercator=function(){return go(vo).scale(961/$d)},t.geoMercatorRaw=vo,t.geoNaturalEarth1=function(){return ao(Mo).scale(175.295)},t.geoNaturalEarth1Raw=Mo,t.geoOrthographic=function(){return ao(Ao).scale(249.5).clipAngle(90+jd)},t.geoOrthographicRaw=Ao,t.geoStereographic=function(){return ao(To).scale(250).clipAngle(142)},t.geoStereographicRaw=To,t.geoTransverseMercator=function(){var t=go(No),n=t.center,e=t.rotate;return t.center=function(t){return arguments.length?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])},e([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=No,t.geoRotation=ii,t.geoStream=br,t.geoTransform=function(t){return{stream:Qi(t)}},t.cluster=function(){function t(t){var o,a=0;t.eachAfter(function(t){var e=t.children;e?(t.x=function(t){return t.reduce(Eo,0)/t.length}(e),t.y=function(t){return 1+t.reduce(ko,0)}(e)):(t.x=o?a+=n(t,o):0,t.y=0,o=t)});var u=function(t){for(var n;n=t.children;)t=n[0];return t}(t),f=function(t){for(var n;n=t.children;)t=n[n.length-1];return t}(t),c=u.x-n(u,f)/2,s=f.x+n(f,u)/2;return t.eachAfter(i?function(n){n.x=(n.x-t.x)*e,n.y=(t.y-n.y)*r}:function(n){n.x=(n.x-c)/(s-c)*e,n.y=(1-(t.y?n.y/t.y:1))*r})}var n=So,e=1,r=1,i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(n){return arguments.length?(i=!1,e=+n[0],r=+n[1],t):i?null:[e,r]},t.nodeSize=function(n){return arguments.length?(i=!0,e=+n[0],r=+n[1],t):i?[e,r]:null},t},t.hierarchy=Po,t.pack=function(){function t(t){return t.x=e/2,t.y=r/2,n?t.eachBefore(Qo(n)).eachAfter(Jo(i,.5)).eachBefore(Ko(1)):t.eachBefore(Qo(Zo)).eachAfter(Jo($o,1)).eachAfter(Jo(i,t.r/Math.min(e,r))).eachBefore(Ko(Math.min(e,r)/(2*t.r))),t}var n=null,e=1,r=1,i=$o;return t.radius=function(e){return arguments.length?(n=function(t){return null==t?null:Vo(t)}(e),t):n},t.size=function(n){return arguments.length?(e=+n[0],r=+n[1],t):[e,r]},t.padding=function(n){return arguments.length?(i="function"==typeof n?n:Wo(+n),t):i},t},t.packSiblings=function(t){return Go(t),t},t.packEnclose=Uo,t.partition=function(){function t(t){var o=t.height+1;return t.x0=t.y0=r,t.x1=n,t.y1=e/o,t.eachBefore(function(t,n){return function(e){e.children&&na(e,e.x0,t*(e.depth+1)/n,e.x1,t*(e.depth+2)/n);var i=e.x0,o=e.y0,a=e.x1-r,u=e.y1-r;a<i&&(i=a=(i+a)/2),u<o&&(o=u=(o+u)/2),e.x0=i,e.y0=o,e.x1=a,e.y1=u}}(e,o)),i&&t.eachBefore(ta),t}var n=1,e=1,r=0,i=!1;return t.round=function(n){return arguments.length?(i=!!n,t):i},t.size=function(r){return arguments.length?(n=+r[0],e=+r[1],t):[n,e]},t.padding=function(n){return arguments.length?(r=+n,t):r},t},t.stratify=function(){function t(t){var r,i,o,a,u,f,c,s=t.length,l=new Array(s),h={};for(i=0;i<s;++i)r=t[i],u=l[i]=new Do(r),null!=(f=n(r,i,t))&&(f+="")&&(h[c=vv+(u.id=f)]=c in h?yv:u);for(i=0;i<s;++i)if(u=l[i],null!=(f=e(t[i],i,t))&&(f+="")){if(!(a=h[vv+f]))throw new Error("missing: "+f);if(a===yv)throw new Error("ambiguous: "+f);a.children?a.children.push(u):a.children=[u],u.parent=a}else{if(o)throw new Error("multiple roots");o=u}if(!o)throw new Error("no root");if(o.parent=gv,o.eachBefore(function(t){t.depth=t.parent.depth+1,--s}).eachBefore(Lo),o.parent=null,s>0)throw new Error("cycle");return o}var n=ea,e=ra;return t.id=function(e){return arguments.length?(n=Vo(e),t):n},t.parentId=function(n){return arguments.length?(e=Vo(n),t):e},t},t.tree=function(){function t(t){var f=function(t){for(var n,e,r,i,o,a=new ca(t,0),u=[a];n=u.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),i=o-1;i>=0;--i)u.push(e=n.children[i]=new ca(r[i],i)),e.parent=n;return(a.parent=new ca(null,0)).children=[a],a}(t);if(f.eachAfter(n),f.parent.m=-f.z,f.eachBefore(e),u)t.eachBefore(r);else{var c=t,s=t,l=t;t.eachBefore(function(t){t.x<c.x&&(c=t),t.x>s.x&&(s=t),t.depth>l.depth&&(l=t)});var h=c===s?1:i(c,s)/2,d=h-c.x,p=o/(s.x+h+d),v=a/(l.depth||1);t.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*v})}return t}function n(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n){(function(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)(n=i[o]).z+=e,n.m+=e,e+=n.s+(r+=n.c)})(t);var o=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+i(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+i(t._,r._));t.parent.A=function(t,n,e){if(n){for(var r,o=t,a=t,u=n,f=o.parent.children[0],c=o.m,s=a.m,l=u.m,h=f.m;u=aa(u),o=oa(o),u&&o;)f=oa(f),(a=aa(a)).a=t,(r=u.z+l-o.z-c+i(u._,o._))>0&&(ua(fa(u,t,e),t,r),c+=r,s+=r),l+=u.m,c+=o.m,h+=f.m,s+=a.m;u&&!aa(a)&&(a.t=u,a.m+=l-s),o&&!oa(f)&&(f.t=o,f.m+=c-h,e=t)}return e}(t,r,t.parent.A||e[0])}function e(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t){t.x*=o,t.y=t.depth*a}var i=ia,o=1,a=1,u=null;return t.separation=function(n){return arguments.length?(i=n,t):i},t.size=function(n){return arguments.length?(u=!1,o=+n[0],a=+n[1],t):u?null:[o,a]},t.nodeSize=function(n){return arguments.length?(u=!0,o=+n[0],a=+n[1],t):u?[o,a]:null},t},t.treemap=function(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=o,t.eachBefore(n),a=[0],r&&t.eachBefore(ta),t}function n(t){var n=a[t.depth],r=t.x0+n,i=t.y0+n,o=t.x1-n,h=t.y1-n;o<r&&(r=o=(r+o)/2),h<i&&(i=h=(i+h)/2),t.x0=r,t.y0=i,t.x1=o,t.y1=h,t.children&&(n=a[t.depth+1]=u(t)/2,r+=l(t)-n,i+=f(t)-n,o-=c(t)-n,h-=s(t)-n,o<r&&(r=o=(r+o)/2),h<i&&(i=h=(i+h)/2),e(t,r,i,o,h))}var e=bv,r=!1,i=1,o=1,a=[0],u=$o,f=$o,c=$o,s=$o,l=$o;return t.round=function(n){return arguments.length?(r=!!n,t):r},t.size=function(n){return arguments.length?(i=+n[0],o=+n[1],t):[i,o]},t.tile=function(n){return arguments.length?(e=Vo(n),t):e},t.padding=function(n){return arguments.length?t.paddingInner(n).paddingOuter(n):t.paddingInner()},t.paddingInner=function(n){return arguments.length?(u="function"==typeof n?n:Wo(+n),t):u},t.paddingOuter=function(n){return arguments.length?t.paddingTop(n).paddingRight(n).paddingBottom(n).paddingLeft(n):t.paddingTop()},t.paddingTop=function(n){return arguments.length?(f="function"==typeof n?n:Wo(+n),t):f},t.paddingRight=function(n){return arguments.length?(c="function"==typeof n?n:Wo(+n),t):c},t.paddingBottom=function(n){return arguments.length?(s="function"==typeof n?n:Wo(+n),t):s},t.paddingLeft=function(n){return arguments.length?(l="function"==typeof n?n:Wo(+n),t):l},t},t.treemapBinary=function(t,n,e,r,i){function o(t,n,e,r,i,a,u){if(t>=n-1){var c=f[t];return c.x0=r,c.y0=i,c.x1=a,void(c.y1=u)}for(var l=s[t],h=e/2+l,d=t+1,p=n-1;d<p;){var v=d+p>>>1;s[v]<h?d=v+1:p=v}h-s[d-1]<s[d]-h&&t+1<d&&--d;var g=s[d]-l,y=e-g;if(a-r>u-i){var _=(r*y+a*g)/e;o(t,d,g,r,i,_,u),o(d,n,y,_,i,a,u)}else{var b=(i*y+u*g)/e;o(t,d,g,r,i,a,b),o(d,n,y,r,b,a,u)}}var a,u,f=t.children,c=f.length,s=new Array(c+1);for(s[0]=u=a=0;a<c;++a)s[a+1]=u+=f[a].value;o(0,c,t.value,n,e,r,i)},t.treemapDice=na,t.treemapSlice=sa,t.treemapSliceDice=function(t,n,e,r,i){(1&t.depth?sa:na)(t,n,e,r,i)},t.treemapSquarify=bv,t.treemapResquarify=mv,t.interpolate=dn,t.interpolateArray=fn,t.interpolateBasis=Kt,t.interpolateBasisClosed=tn,t.interpolateDate=cn,t.interpolateNumber=sn,t.interpolateObject=ln,t.interpolateRound=pn,t.interpolateString=hn,t.interpolateTransformCss=cl,t.interpolateTransformSvg=sl,t.interpolateZoom=_n,t.interpolateRgb=el,t.interpolateRgbBasis=rl,t.interpolateRgbBasisClosed=il,t.interpolateHsl=vl,t.interpolateHslLong=gl,t.interpolateLab=function(t,n){var e=an((t=Ft(t)).l,(n=Ft(n)).l),r=an(t.a,n.a),i=an(t.b,n.b),o=an(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=r(n),t.b=i(n),t.opacity=o(n),t+""}},t.interpolateHcl=yl,t.interpolateHclLong=_l,t.interpolateCubehelix=bl,t.interpolateCubehelixLong=ml,t.piecewise=function(t,n){for(var e=0,r=n.length-1,i=n[0],o=new Array(r<0?0:r);e<r;)o[e]=t(i,i=n[++e]);return function(t){var n=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[n](t-n)}},t.quantize=function(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e},t.path=oe,t.polygonArea=function(t){for(var n,e=-1,r=t.length,i=t[r-1],o=0;++e<r;)n=i,i=t[e],o+=n[1]*i[0]-n[0]*i[1];return o/2},t.polygonCentroid=function(t){for(var n,e,r=-1,i=t.length,o=0,a=0,u=t[i-1],f=0;++r<i;)n=u,u=t[r],f+=e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return f*=3,[o/f,a/f]},t.polygonHull=function(t){if((e=t.length)<3)return null;var n,e,r=new Array(e),i=new Array(e);for(n=0;n<e;++n)r[n]=[+t[n][0],+t[n][1],n];for(r.sort(da),n=0;n<e;++n)i[n]=[r[n][0],-r[n][1]];var o=pa(r),a=pa(i),u=a[0]===o[0],f=a[a.length-1]===o[o.length-1],c=[];for(n=o.length-1;n>=0;--n)c.push(t[r[o[n]][2]]);for(n=+u;n<a.length-f;++n)c.push(t[r[a[n]][2]]);return c},t.polygonContains=function(t,n){for(var e,r,i=t.length,o=t[i-1],a=n[0],u=n[1],f=o[0],c=o[1],s=!1,l=0;l<i;++l)e=(o=t[l])[0],(r=o[1])>u!=c>u&&a<(f-e)*(u-r)/(c-r)+e&&(s=!s),f=e,c=r;return s},t.polygonLength=function(t){for(var n,e,r=-1,i=t.length,o=t[i-1],a=o[0],u=o[1],f=0;++r<i;)n=a,e=u,n-=a=(o=t[r])[0],e-=u=o[1],f+=Math.sqrt(n*n+e*e);return f},t.quadtree=je,t.randomUniform=xv,t.randomNormal=wv,t.randomLogNormal=Mv,t.randomBates=Tv,t.randomIrwinHall=Av,t.randomExponential=Nv,t.scaleBand=ya,t.scalePoint=function(){return _a(ya().paddingInner(1))},t.scaleIdentity=Ea,t.scaleLinear=Sa,t.scaleLog=Ua,t.scaleOrdinal=ga,t.scaleImplicit=Cv,t.scalePow=Oa,t.scaleSqrt=function(){return Oa().exponent(.5)},t.scaleQuantile=Ya,t.scaleQuantize=Ba,t.scaleThreshold=Fa,t.scaleTime=function(){return of(fg,ag,Gv,Hv,Iv,Bv,Ov,Lv,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},t.scaleUtc=function(){return of(zg,Cg,gg,pg,hg,sg,Ov,Lv,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},t.scaleSequential=af,t.schemeCategory10=Wg,t.schemeAccent=Zg,t.schemeDark2=Qg,t.schemePaired=Jg,t.schemePastel1=Kg,t.schemePastel2=ty,t.schemeSet1=ny,t.schemeSet2=ey,t.schemeSet3=ry,t.interpolateBrBG=oy,t.schemeBrBG=iy,t.interpolatePRGn=uy,t.schemePRGn=ay,t.interpolatePiYG=cy,t.schemePiYG=fy,t.interpolatePuOr=ly,t.schemePuOr=sy,t.interpolateRdBu=dy,t.schemeRdBu=hy,t.interpolateRdGy=vy,t.schemeRdGy=py,t.interpolateRdYlBu=yy,t.schemeRdYlBu=gy,t.interpolateRdYlGn=by,t.schemeRdYlGn=_y,t.interpolateSpectral=xy,t.schemeSpectral=my,t.interpolateBuGn=My,t.schemeBuGn=wy,t.interpolateBuPu=Ty,t.schemeBuPu=Ay,t.interpolateGnBu=Sy,t.schemeGnBu=Ny,t.interpolateOrRd=ky,t.schemeOrRd=Ey,t.interpolatePuBuGn=Py,t.schemePuBuGn=Cy,t.interpolatePuBu=Ry,t.schemePuBu=zy,t.interpolatePuRd=Dy,t.schemePuRd=Ly,t.interpolateRdPu=qy,t.schemeRdPu=Uy,t.interpolateYlGnBu=Yy,t.schemeYlGnBu=Oy,t.interpolateYlGn=Fy,t.schemeYlGn=By,t.interpolateYlOrBr=jy,t.schemeYlOrBr=Iy,t.interpolateYlOrRd=Xy,t.schemeYlOrRd=Hy,t.interpolateBlues=Vy,t.schemeBlues=Gy,t.interpolateGreens=Wy,t.schemeGreens=$y,t.interpolateGreys=Qy,t.schemeGreys=Zy,t.interpolatePurples=Ky,t.schemePurples=Jy,t.interpolateReds=n_,t.schemeReds=t_,t.interpolateOranges=r_,t.schemeOranges=e_,t.interpolateCubehelixDefault=i_,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return u_.h=360*t-100,u_.s=1.5-1.5*n,u_.l=.8-.9*n,u_+""},t.interpolateWarm=o_,t.interpolateCool=a_,t.interpolateSinebow=function(t){var n;return t=(.5-t)*Math.PI,f_.r=255*(n=Math.sin(t))*n,f_.g=255*(n=Math.sin(t+c_))*n,f_.b=255*(n=Math.sin(t+s_))*n,f_+""},t.interpolateViridis=l_,t.interpolateMagma=h_,t.interpolateInferno=d_,t.interpolatePlasma=p_,t.create=function(t){return ct(C(t).call(document.documentElement))},t.creator=C,t.local=st,t.matcher=_s,t.mouse=pt,t.namespace=k,t.namespaces=ps,t.clientPoint=dt,t.select=ct,t.selectAll=function(t){return"string"==typeof t?new ut([document.querySelectorAll(t)],[document.documentElement]):new ut([null==t?[]:t],xs)},t.selection=ft,t.selector=z,t.selectorAll=L,t.style=F,t.touch=vt,t.touches=function(t,n){null==n&&(n=ht().touches);for(var e=0,r=n?n.length:0,i=new Array(r);e<r;++e)i[e]=dt(t,n[e]);return i},t.window=B,t.customEvent=ot,t.arc=function(){function t(){var t,c,s=+n.apply(this,arguments),l=+e.apply(this,arguments),h=o.apply(this,arguments)-A_,d=a.apply(this,arguments)-A_,p=v_(d-h),v=d>h;if(f||(f=t=oe()),l<s&&(c=l,l=s,s=c),l>w_)if(p>T_-w_)f.moveTo(l*y_(h),l*m_(h)),f.arc(0,0,l,h,d,!v),s>w_&&(f.moveTo(s*y_(d),s*m_(d)),f.arc(0,0,s,d,h,v));else{var g,y,_=h,b=d,m=h,x=d,w=p,M=p,A=u.apply(this,arguments)/2,T=A>w_&&(i?+i.apply(this,arguments):x_(s*s+l*l)),N=b_(v_(l-s)/2,+r.apply(this,arguments)),S=N,E=N;if(T>w_){var k=lf(T/s*m_(A)),C=lf(T/l*m_(A));(w-=2*k)>w_?(k*=v?1:-1,m+=k,x-=k):(w=0,m=x=(h+d)/2),(M-=2*C)>w_?(C*=v?1:-1,_+=C,b-=C):(M=0,_=b=(h+d)/2)}var P=l*y_(_),z=l*m_(_),R=s*y_(x),L=s*m_(x);if(N>w_){var D=l*y_(b),U=l*m_(b),q=s*y_(m),O=s*m_(m);if(p<M_){var Y=w>w_?function(t,n,e,r,i,o,a,u){var f=e-t,c=r-n,s=a-i,l=u-o,h=(s*(n-o)-l*(t-i))/(l*f-s*c);return[t+h*f,n+h*c]}(P,z,q,O,D,U,R,L):[R,L],B=P-Y[0],F=z-Y[1],I=D-Y[0],j=U-Y[1],H=1/m_(function(t){return t>1?0:t<-1?M_:Math.acos(t)}((B*I+F*j)/(x_(B*B+F*F)*x_(I*I+j*j)))/2),X=x_(Y[0]*Y[0]+Y[1]*Y[1]);S=b_(N,(s-X)/(H-1)),E=b_(N,(l-X)/(H+1))}}M>w_?E>w_?(g=yf(q,O,P,z,l,E,v),y=yf(D,U,R,L,l,E,v),f.moveTo(g.cx+g.x01,g.cy+g.y01),E<N?f.arc(g.cx,g.cy,E,g_(g.y01,g.x01),g_(y.y01,y.x01),!v):(f.arc(g.cx,g.cy,E,g_(g.y01,g.x01),g_(g.y11,g.x11),!v),f.arc(0,0,l,g_(g.cy+g.y11,g.cx+g.x11),g_(y.cy+y.y11,y.cx+y.x11),!v),f.arc(y.cx,y.cy,E,g_(y.y11,y.x11),g_(y.y01,y.x01),!v))):(f.moveTo(P,z),f.arc(0,0,l,_,b,!v)):f.moveTo(P,z),s>w_&&w>w_?S>w_?(g=yf(R,L,D,U,s,-S,v),y=yf(P,z,q,O,s,-S,v),f.lineTo(g.cx+g.x01,g.cy+g.y01),S<N?f.arc(g.cx,g.cy,S,g_(g.y01,g.x01),g_(y.y01,y.x01),!v):(f.arc(g.cx,g.cy,S,g_(g.y01,g.x01),g_(g.y11,g.x11),!v),f.arc(0,0,s,g_(g.cy+g.y11,g.cx+g.x11),g_(y.cy+y.y11,y.cx+y.x11),v),f.arc(y.cx,y.cy,S,g_(y.y11,y.x11),g_(y.y01,y.x01),!v))):f.arc(0,0,s,x,m,v):f.lineTo(R,L)}else f.moveTo(0,0);if(f.closePath(),t)return f=null,t+""||null}var n=hf,e=df,r=sf(0),i=null,o=pf,a=vf,u=gf,f=null;return t.centroid=function(){var t=(+n.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-M_/2;return[y_(r)*t,m_(r)*t]},t.innerRadius=function(e){return arguments.length?(n="function"==typeof e?e:sf(+e),t):n},t.outerRadius=function(n){return arguments.length?(e="function"==typeof n?n:sf(+n),t):e},t.cornerRadius=function(n){return arguments.length?(r="function"==typeof n?n:sf(+n),t):r},t.padRadius=function(n){return arguments.length?(i=null==n?null:"function"==typeof n?n:sf(+n),t):i},t.startAngle=function(n){return arguments.length?(o="function"==typeof n?n:sf(+n),t):o},t.endAngle=function(n){return arguments.length?(a="function"==typeof n?n:sf(+n),t):a},t.padAngle=function(n){return arguments.length?(u="function"==typeof n?n:sf(+n),t):u},t.context=function(n){return arguments.length?(f=null==n?null:n,t):f},t},t.area=Mf,t.line=wf,t.pie=function(){function t(t){var u,f,c,s,l,h=t.length,d=0,p=new Array(h),v=new Array(h),g=+i.apply(this,arguments),y=Math.min(T_,Math.max(-T_,o.apply(this,arguments)-g)),_=Math.min(Math.abs(y)/h,a.apply(this,arguments)),b=_*(y<0?-1:1);for(u=0;u<h;++u)(l=v[p[u]=u]=+n(t[u],u,t))>0&&(d+=l);for(null!=e?p.sort(function(t,n){return e(v[t],v[n])}):null!=r&&p.sort(function(n,e){return r(t[n],t[e])}),u=0,c=d?(y-h*b)/d:0;u<h;++u,g=s)f=p[u],s=g+((l=v[f])>0?l*c:0)+b,v[f]={data:t[f],index:u,value:l,startAngle:g,endAngle:s,padAngle:_};return v}var n=Tf,e=Af,r=null,i=sf(0),o=sf(T_),a=sf(0);return t.value=function(e){return arguments.length?(n="function"==typeof e?e:sf(+e),t):n},t.sortValues=function(n){return arguments.length?(e=n,r=null,t):e},t.sort=function(n){return arguments.length?(r=n,e=null,t):r},t.startAngle=function(n){return arguments.length?(i="function"==typeof n?n:sf(+n),t):i},t.endAngle=function(n){return arguments.length?(o="function"==typeof n?n:sf(+n),t):o},t.padAngle=function(n){return arguments.length?(a="function"==typeof n?n:sf(+n),t):a},t},t.areaRadial=Cf,t.radialArea=Cf,t.lineRadial=kf,t.radialLine=kf,t.pointRadial=Pf,t.linkHorizontal=function(){return Lf(Df)},t.linkVertical=function(){return Lf(Uf)},t.linkRadial=function(){var t=Lf(qf);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.symbol=function(){function t(){var t;if(r||(r=t=oe()),n.apply(this,arguments).draw(r,+e.apply(this,arguments)),t)return r=null,t+""||null}var n=sf(E_),e=sf(64),r=null;return t.type=function(e){return arguments.length?(n="function"==typeof e?e:sf(e),t):n},t.size=function(n){return arguments.length?(e="function"==typeof n?n:sf(+n),t):e},t.context=function(n){return arguments.length?(r=null==n?null:n,t):r},t},t.symbols=H_,t.symbolCircle=E_,t.symbolCross=k_,t.symbolDiamond=z_,t.symbolSquare=q_,t.symbolStar=U_,t.symbolTriangle=Y_,t.symbolWye=j_,t.curveBasisClosed=function(t){return new Ff(t)},t.curveBasisOpen=function(t){return new If(t)},t.curveBasis=function(t){return new Bf(t)},t.curveBundle=X_,t.curveCardinalClosed=V_,t.curveCardinalOpen=$_,t.curveCardinal=G_,t.curveCatmullRomClosed=Z_,t.curveCatmullRomOpen=Q_,t.curveCatmullRom=W_,t.curveLinearClosed=function(t){return new Jf(t)},t.curveLinear=bf,t.curveMonotoneX=function(t){return new rc(t)},t.curveMonotoneY=function(t){return new ic(t)},t.curveNatural=function(t){return new ac(t)},t.curveStep=function(t){return new fc(t,.5)},t.curveStepAfter=function(t){return new fc(t,1)},t.curveStepBefore=function(t){return new fc(t,0)},t.stack=function(){function t(t){var o,a,u=n.apply(this,arguments),f=t.length,c=u.length,s=new Array(c);for(o=0;o<c;++o){for(var l,h=u[o],d=s[o]=new Array(f),p=0;p<f;++p)d[p]=l=[0,+i(t[p],h,p,t)],l.data=t[p];d.key=h}for(o=0,a=e(s);o<c;++o)s[a[o]].index=o;return r(s,a),s}var n=sf([]),e=sc,r=cc,i=lc;return t.keys=function(e){return arguments.length?(n="function"==typeof e?e:sf(S_.call(e)),t):n},t.value=function(n){return arguments.length?(i="function"==typeof n?n:sf(+n),t):i},t.order=function(n){return arguments.length?(e=null==n?sc:"function"==typeof n?n:sf(S_.call(n)),t):e},t.offset=function(n){return arguments.length?(r=null==n?cc:n,t):r},t},t.stackOffsetExpand=function(t,n){if((r=t.length)>0){for(var e,r,i,o=0,a=t[0].length;o<a;++o){for(i=e=0;e<r;++e)i+=t[e][o][1]||0;if(i)for(e=0;e<r;++e)t[e][o][1]/=i}cc(t,n)}},t.stackOffsetDiverging=function(t,n){if((u=t.length)>1)for(var e,r,i,o,a,u,f=0,c=t[n[0]].length;f<c;++f)for(o=a=0,e=0;e<u;++e)(i=(r=t[n[e]][f])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},t.stackOffsetNone=cc,t.stackOffsetSilhouette=function(t,n){if((e=t.length)>0){for(var e,r=0,i=t[n[0]],o=i.length;r<o;++r){for(var a=0,u=0;a<e;++a)u+=t[a][r][1]||0;i[r][1]+=i[r][0]=-u/2}cc(t,n)}},t.stackOffsetWiggle=function(t,n){if((i=t.length)>0&&(r=(e=t[n[0]]).length)>0){for(var e,r,i,o=0,a=1;a<r;++a){for(var u=0,f=0,c=0;u<i;++u){for(var s=t[n[u]],l=s[a][1]||0,h=(l-(s[a-1][1]||0))/2,d=0;d<u;++d){var p=t[n[d]];h+=(p[a][1]||0)-(p[a-1][1]||0)}f+=l,c+=h*l}e[a-1][1]+=e[a-1][0]=o,f&&(o-=c/f)}e[a-1][1]+=e[a-1][0]=o,cc(t,n)}},t.stackOrderAscending=hc,t.stackOrderDescending=function(t){return hc(t).reverse()},t.stackOrderInsideOut=function(t){var n,e,r=t.length,i=t.map(dc),o=sc(t).sort(function(t,n){return i[n]-i[t]}),a=0,u=0,f=[],c=[];for(n=0;n<r;++n)e=o[n],a<u?(a+=i[e],f.push(e)):(u+=i[e],c.push(e));return c.reverse().concat(f)},t.stackOrderNone=sc,t.stackOrderReverse=function(t){return sc(t).reverse()},t.timeInterval=Ia,t.timeMillisecond=Lv,t.timeMilliseconds=Dv,t.utcMillisecond=Lv,t.utcMilliseconds=Dv,t.timeSecond=Ov,t.timeSeconds=Yv,t.utcSecond=Ov,t.utcSeconds=Yv,t.timeMinute=Bv,t.timeMinutes=Fv,t.timeHour=Iv,t.timeHours=jv,t.timeDay=Hv,t.timeDays=Xv,t.timeWeek=Gv,t.timeWeeks=Kv,t.timeSunday=Gv,t.timeSundays=Kv,t.timeMonday=Vv,t.timeMondays=tg,t.timeTuesday=$v,t.timeTuesdays=ng,t.timeWednesday=Wv,t.timeWednesdays=eg,t.timeThursday=Zv,t.timeThursdays=rg,t.timeFriday=Qv,t.timeFridays=ig,t.timeSaturday=Jv,t.timeSaturdays=og,t.timeMonth=ag,t.timeMonths=ug,t.timeYear=fg,t.timeYears=cg,t.utcMinute=sg,t.utcMinutes=lg,t.utcHour=hg,t.utcHours=dg,t.utcDay=pg,t.utcDays=vg,t.utcWeek=gg,t.utcWeeks=Mg,t.utcSunday=gg,t.utcSundays=Mg,t.utcMonday=yg,t.utcMondays=Ag,t.utcTuesday=_g,t.utcTuesdays=Tg,t.utcWednesday=bg,t.utcWednesdays=Ng,t.utcThursday=mg,t.utcThursdays=Sg,t.utcFriday=xg,t.utcFridays=Eg,t.utcSaturday=wg,t.utcSaturdays=kg,t.utcMonth=Cg,t.utcMonths=Pg,t.utcYear=zg,t.utcYears=Lg,t.timeFormatDefaultLocale=nf,t.timeFormatLocale=$a,t.isoFormat=Bg,t.isoParse=Fg,t.now=wn,t.timer=Tn,t.timerFlush=Nn,t.timeout=Cn,t.interval=function(t,n,e){var r=new An,i=n;return null==n?(r.restart(t,n,e),r):(n=+n,e=null==e?wn():+e,r.restart(function o(a){a+=i,r.restart(o,i+=n,e),t(a)},n,e),r)},t.transition=Yn,t.active=function(t,n){var e,r,i=t.__transition;if(i){n=null==n?null:n+"";for(r in i)if((e=i[r]).state>Rl&&e.name===n)return new On([[t]],lh,n,+r)}return null},t.interrupt=Dn,t.voronoi=function(){function t(t){return new Yc(t.map(function(r,i){var o=[Math.round(n(r,i,t)/ob)*ob,Math.round(e(r,i,t)/ob)*ob];return o.index=i,o.data=r,o}),r)}var n=vc,e=gc,r=null;return t.polygons=function(n){return t(n).polygons()},t.links=function(n){return t(n).links()},t.triangles=function(n){return t(n).triangles()},t.x=function(e){return arguments.length?(n="function"==typeof e?e:pc(+e),t):n},t.y=function(n){return arguments.length?(e="function"==typeof n?n:pc(+n),t):e},t.extent=function(n){return arguments.length?(r=null==n?null:[[+n[0][0],+n[0][1]],[+n[1][0],+n[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(n){return arguments.length?(r=null==n?null:[[0,0],[+n[0],+n[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t},t.zoom=function(){function n(t){t.property("__zoom",Vc).on("wheel.zoom",f).on("mousedown.zoom",c).on("dblclick.zoom",s).filter(m).on("touchstart.zoom",l).on("touchmove.zoom",h).on("touchend.zoom touchcancel.zoom",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function e(t,n){return(n=Math.max(x[0],Math.min(x[1],n)))===t.k?t:new Fc(n,t.x,t.y)}function r(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new Fc(t.k,r,i)}function i(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function o(t,n,e){t.on("start.zoom",function(){a(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){a(this,arguments).end()}).tween("zoom",function(){var t=arguments,r=a(this,t),o=y.apply(this,t),u=e||i(o),f=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),c=this.__zoom,s="function"==typeof n?n.apply(this,t):n,l=A(c.invert(u).concat(f/c.k),s.invert(u).concat(f/s.k));return function(t){if(1===t)t=s;else{var n=l(t),e=f/n[2];t=new Fc(e,u[0]-n[0]*e,u[1]-n[1]*e)}r.zoom(null,t)}})}function a(t,n){for(var e,r=0,i=T.length;r<i;++r)if((e=T[r]).that===t)return e;return new u(t,n)}function u(t,n){this.that=t,this.args=n,this.index=-1,this.active=0,this.extent=y.apply(t,n)}function f(){if(g.apply(this,arguments)){var t=a(this,arguments),n=this.__zoom,i=Math.max(x[0],Math.min(x[1],n.k*Math.pow(2,b.apply(this,arguments)))),o=pt(this);if(t.wheel)t.mouse[0][0]===o[0]&&t.mouse[0][1]===o[1]||(t.mouse[1]=n.invert(t.mouse[0]=o)),clearTimeout(t.wheel);else{if(n.k===i)return;t.mouse=[o,n.invert(o)],Dn(this),t.start()}Hc(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},k),t.zoom("mouse",_(r(e(n,i),t.mouse[0],t.mouse[1]),t.extent,w))}}function c(){if(!v&&g.apply(this,arguments)){var n=a(this,arguments),e=ct(t.event.view).on("mousemove.zoom",function(){if(Hc(),!n.moved){var e=t.event.clientX-o,i=t.event.clientY-u;n.moved=e*e+i*i>C}n.zoom("mouse",_(r(n.that.__zoom,n.mouse[0]=pt(n.that),n.mouse[1]),n.extent,w))},!0).on("mouseup.zoom",function(){e.on("mousemove.zoom mouseup.zoom",null),bt(t.event.view,n.moved),Hc(),n.end()},!0),i=pt(this),o=t.event.clientX,u=t.event.clientY;_t(t.event.view),jc(),n.mouse=[i,this.__zoom.invert(i)],Dn(this),n.start()}}function s(){if(g.apply(this,arguments)){var i=this.__zoom,a=pt(this),u=i.invert(a),f=i.k*(t.event.shiftKey?.5:2),c=_(r(e(i,f),a,u),y.apply(this,arguments),w);Hc(),M>0?ct(this).transition().duration(M).call(o,c,a):ct(this).call(n.transform,c)}}function l(){if(g.apply(this,arguments)){var n,e,r,i,o=a(this,arguments),u=t.event.changedTouches,f=u.length;for(jc(),e=0;e<f;++e)i=[i=vt(this,u,(r=u[e]).identifier),this.__zoom.invert(i),r.identifier],o.touch0?o.touch1||(o.touch1=i):(o.touch0=i,n=!0);if(p&&(p=clearTimeout(p),!o.touch1))return o.end(),void((i=ct(this).on("dblclick.zoom"))&&i.apply(this,arguments));n&&(p=setTimeout(function(){p=null},E),Dn(this),o.start())}}function h(){var n,i,o,u,f=a(this,arguments),c=t.event.changedTouches,s=c.length;for(Hc(),p&&(p=clearTimeout(p)),n=0;n<s;++n)o=vt(this,c,(i=c[n]).identifier),f.touch0&&f.touch0[2]===i.identifier?f.touch0[0]=o:f.touch1&&f.touch1[2]===i.identifier&&(f.touch1[0]=o);if(i=f.that.__zoom,f.touch1){var l=f.touch0[0],h=f.touch0[1],d=f.touch1[0],v=f.touch1[1],g=(g=d[0]-l[0])*g+(g=d[1]-l[1])*g,y=(y=v[0]-h[0])*y+(y=v[1]-h[1])*y;i=e(i,Math.sqrt(g/y)),o=[(l[0]+d[0])/2,(l[1]+d[1])/2],u=[(h[0]+v[0])/2,(h[1]+v[1])/2]}else{if(!f.touch0)return;o=f.touch0[0],u=f.touch0[1]}f.zoom("touch",_(r(i,o,u),f.extent,w))}function d(){var n,e,r=a(this,arguments),i=t.event.changedTouches,o=i.length;for(jc(),v&&clearTimeout(v),v=setTimeout(function(){v=null},E),n=0;n<o;++n)e=i[n],r.touch0&&r.touch0[2]===e.identifier?delete r.touch0:r.touch1&&r.touch1[2]===e.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0?r.touch0[1]=this.__zoom.invert(r.touch0[0]):r.end()}var p,v,g=Xc,y=Gc,_=Zc,b=$c,m=Wc,x=[0,1/0],w=[[-1/0,-1/0],[1/0,1/0]],M=250,A=_n,T=[],S=N("start","zoom","end"),E=500,k=150,C=0;return n.transform=function(t,n){var e=t.selection?t.selection():t;e.property("__zoom",Vc),t!==e?o(t,n):e.interrupt().each(function(){a(this,arguments).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()})},n.scaleBy=function(t,e){n.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)})},n.scaleTo=function(t,o){n.transform(t,function(){var t=y.apply(this,arguments),n=this.__zoom,a=i(t),u=n.invert(a),f="function"==typeof o?o.apply(this,arguments):o;return _(r(e(n,f),a,u),t,w)})},n.translateBy=function(t,e,r){n.transform(t,function(){return _(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof r?r.apply(this,arguments):r),y.apply(this,arguments),w)})},n.translateTo=function(t,e,r){n.transform(t,function(){var t=y.apply(this,arguments),n=this.__zoom,o=i(t);return _(ub.translate(o[0],o[1]).scale(n.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof r?-r.apply(this,arguments):-r),t,w)})},u.prototype={start:function(){return 1==++this.active&&(this.index=T.push(this)-1,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(T.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){ot(new function(t,n,e){this.target=t,this.type=n,this.transform=e}(n,t,this.that.__zoom),S.apply,S,[t,this.that,this.args])}},n.wheelDelta=function(t){return arguments.length?(b="function"==typeof t?t:Bc(+t),n):b},n.filter=function(t){return arguments.length?(g="function"==typeof t?t:Bc(!!t),n):g},n.touchable=function(t){return arguments.length?(m="function"==typeof t?t:Bc(!!t),n):m},n.extent=function(t){return arguments.length?(y="function"==typeof t?t:Bc([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),n):y},n.scaleExtent=function(t){return arguments.length?(x[0]=+t[0],x[1]=+t[1],n):[x[0],x[1]]},n.translateExtent=function(t){return arguments.length?(w[0][0]=+t[0][0],w[1][0]=+t[1][0],w[0][1]=+t[0][1],w[1][1]=+t[1][1],n):[[w[0][0],w[0][1]],[w[1][0],w[1][1]]]},n.constrain=function(t){return arguments.length?(_=t,n):_},n.duration=function(t){return arguments.length?(M=+t,n):M},n.interpolate=function(t){return arguments.length?(A=t,n):A},n.on=function(){var t=S.on.apply(S,arguments);return t===S?n:t},n.clickDistance=function(t){return arguments.length?(C=(t=+t)*t,n):Math.sqrt(C)},n},t.zoomTransform=Ic,t.zoomIdentity=ub,Object.defineProperty(t,"__esModule",{value:!0})});;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-pr-analyzer-statistics-resources', location = '/js/vendor/d3pie.min.js' */
/*!
* d3pie
* @author Ben Keen
* @version 0.2.1
* @date March 11, 2017
* @repo http://github.com/benkeen/d3pie
*/
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.d3pie=b(a)}(this,function(){var a="d3pie",b="0.2.1",c=0,e={header:{title:{text:"",color:"#333333",fontSize:18,font:"arial"},subtitle:{text:"",color:"#666666",fontSize:14,font:"arial"},location:"top-center",titleSubtitlePadding:8},footer:{text:"",color:"#666666",fontSize:14,font:"arial",location:"left"},size:{canvasHeight:500,canvasWidth:500,pieInnerRadius:"0%",pieOuterRadius:null},data:{sortOrder:"none",ignoreSmallSegments:{enabled:!1,valueType:"percentage",value:null},smallSegmentGrouping:{enabled:!1,value:1,valueType:"percentage",label:"Other",color:"#cccccc"},content:[]},labels:{outer:{format:"label",hideWhenLessThanPercentage:null,pieDistance:30},inner:{format:"percentage",hideWhenLessThanPercentage:null},mainLabel:{color:"#333333",font:"arial",fontSize:10},percentage:{color:"#dddddd",font:"arial",fontSize:10,decimalPlaces:0},value:{color:"#cccc44",font:"arial",fontSize:10},lines:{enabled:!0,style:"curved",color:"segment"},truncation:{enabled:!1,truncateLength:30},formatter:null},effects:{load:{effect:"default",speed:1e3},pullOutSegmentOnClick:{effect:"bounce",speed:300,size:10},highlightSegmentOnMouseover:!0,highlightLuminosity:-.2},tooltips:{enabled:!1,type:"placeholder",string:"",placeholderParser:null,styles:{fadeInSpeed:250,backgroundColor:"#000000",backgroundOpacity:.5,color:"#efefef",borderRadius:2,font:"arial",fontSize:10,padding:4}},misc:{colors:{background:null,segments:["#2484c1","#65a620","#7b6888","#a05d56","#961a1a","#d8d23a","#e98125","#d0743c","#635222","#6ada6a","#0c6197","#7d9058","#207f33","#44b9b0","#bca44a","#e4a14b","#a3acb2","#8cc3e9","#69a6f9","#5b388f","#546e91","#8bde95","#d2ab58","#273c71","#98bf6e","#4daa4b","#98abc5","#cc1010","#31383b","#006391","#c2643f","#b0a474","#a5a39c","#a9c2bc","#22af8c","#7fcecf","#987ac6","#3d3b87","#b77b1c","#c9c2b6","#807ece","#8db27c","#be66a2","#9ed3c6","#00644b","#005064","#77979f","#77e079","#9c73ab","#1f79a7"],segmentStroke:"#ffffff"},gradient:{enabled:!1,percentage:95,color:"#000000"},canvasPadding:{top:5,right:5,bottom:5,left:5},pieCenterOffset:{x:0,y:0},cssPrefix:null},callbacks:{onload:null,onMouseoverSegment:null,onMouseoutSegment:null,onClickSegment:null}},f={initialCheck:function(a){var b=a.cssPrefix,c=a.element,d=a.options;if(!window.d3||!window.d3.hasOwnProperty("version"))return console.error("d3pie error: d3 is not available"),!1;if(!(c instanceof HTMLElement||c instanceof SVGElement))return console.error("d3pie error: the first d3pie() param must be a valid DOM element (not jQuery) or a ID string."),!1;if(!/[a-zA-Z][a-zA-Z0-9_-]*$/.test(b))return console.error("d3pie error: invalid options.misc.cssPrefix"),!1;if(!g.isArray(d.data.content))return console.error("d3pie error: invalid config structure: missing data.content property."),!1;if(0===d.data.content.length)return console.error("d3pie error: no data supplied."),!1;for(var e=[],f=0;f<d.data.content.length;f++)"number"!=typeof d.data.content[f].value||isNaN(d.data.content[f].value)?console.log("not valid: ",d.data.content[f]):d.data.content[f].value<=0?console.log("not valid - should have positive value: ",d.data.content[f]):e.push(d.data.content[f]);return a.options.data.content=e,!0}},g={addSVGSpace:function(a){var b=a.element,c=a.options.size.canvasWidth,d=a.options.size.canvasHeight,e=a.options.misc.colors.background,f=d3.select(b).append("svg:svg").attr("width",c).attr("height",d);return"transparent"!==e&&f.style("background-color",function(){return e}),f},whenIdExists:function(a,b){var c=1,d=1e3,e=setInterval(function(){document.getElementById(a)&&(clearInterval(e),b()),c>d&&clearInterval(e),c++},1)},whenElementsExist:function(a,b){var c=1,d=1e3,e=setInterval(function(){for(var f=!0,g=0;g<a.length;g++)if(!document.getElementById(a[g])){f=!1;break}f&&(clearInterval(e),b()),c>d&&clearInterval(e),c++},1)},shuffleArray:function(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a},processObj:function(a,b,c){return"string"==typeof b?g.processObj(a,b.split("."),c):1===b.length&&void 0!==c?(a[b[0]]=c,a[b[0]]):0===b.length?a:g.processObj(a[b[0]],b.slice(1),c)},getDimensions:function(a){var b=document.getElementById(a),c=0,d=0;if(b){var e=b.getBBox();c=e.width,d=e.height}else console.log("error: getDimensions() "+a+" not found.");return{w:c,h:d}},rectIntersect:function(a,b){var c=b.x>a.x+a.w||b.x+b.w<a.x||b.y+b.h<a.y||b.y>a.y+a.h;return!c},getColorShade:function(a,b){a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),b=b||0;for(var c="#",d=0;3>d;d++){var e=parseInt(a.substr(2*d,2),16);e=Math.round(Math.min(Math.max(0,e+e*b),255)).toString(16),c+=("00"+e).substr(e.length)}return c},initSegmentColors:function(a){for(var b=a.options.data.content,c=a.options.misc.colors.segments,d=[],e=0;e<b.length;e++)b[e].hasOwnProperty("color")?d.push(b[e].color):d.push(c[e]);return d},applySmallSegmentGrouping:function(a,b){var c;"percentage"===b.valueType&&(c=i.getTotalPieSize(a));for(var d=[],e=[],f=0,g=0;g<a.length;g++)if("percentage"===b.valueType){var h=a[g].value/c*100;if(h<=b.value){e.push(a[g]),f+=a[g].value;continue}a[g].isGrouped=!1,d.push(a[g])}else{if(a[g].value<=b.value){e.push(a[g]),f+=a[g].value;continue}a[g].isGrouped=!1,d.push(a[g])}return e.length&&d.push({color:b.color,label:b.label,value:f,isGrouped:!0,groupedData:e}),d},showPoint:function(a,b,c){a.append("circle").attr("cx",b).attr("cy",c).attr("r",2).style("fill","black")},isFunction:function(a){var b={};return a&&"[object Function]"===b.toString.call(a)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)}},h=function(){var a,b,c,d,e,f,g=arguments[0]||{},i=1,j=arguments.length,k=!1,l=Object.prototype.toString,m=Object.prototype.hasOwnProperty,n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},o={isFunction:function(a){return"function"===o.type(a)},isArray:Array.isArray||function(a){return"array"===o.type(a)},isWindow:function(a){return null!==a&&a===a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null===a?String(a):n[l.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==o.type(a)||a.nodeType)return!1;try{if(a.constructor&&!m.call(a,"constructor")&&!m.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}var c;for(c in a);return void 0===c||m.call(a,c)}};for("boolean"==typeof g&&(k=g,g=arguments[1]||{},i=2),"object"==typeof g||o.isFunction(g)||(g={}),j===i&&(g=this,--i),i;j>i;i++)if(null!==(a=arguments[i]))for(b in a)c=g[b],d=a[b],g!==d&&(k&&d&&(o.isPlainObject(d)||(e=o.isArray(d)))?(e?(e=!1,f=c&&o.isArray(c)?c:[]):f=c&&o.isPlainObject(c)?c:{},g[b]=h(k,f,d)):void 0!==d&&(g[b]=d));return g},i={toRadians:function(a){return a*(Math.PI/180)},toDegrees:function(a){return a*(180/Math.PI)},computePieRadius:function(a){var b=a.options.size,c=a.options.misc.canvasPadding,d=b.canvasWidth-c.left-c.right,e=b.canvasHeight-c.top-c.bottom;"pie-center"!==a.options.header.location&&(e-=a.textComponents.headerHeight),a.textComponents.footer.exists&&(e-=a.textComponents.footer.h),e=0>e?0:e;var f,g,h=(e>d?d:e)/3;if(null!==b.pieOuterRadius)if(/%/.test(b.pieOuterRadius)){g=parseInt(b.pieOuterRadius.replace(/[\D]/,""),10),g=g>99?99:g,g=0>g?0:g;var i=e>d?d:e;if("none"!==a.options.labels.outer.format){var j=2*parseInt(a.options.labels.outer.pieDistance,10);i-j>0&&(i-=j)}h=Math.floor(i/100*g)/2}else h=parseInt(b.pieOuterRadius,10);/%/.test(b.pieInnerRadius)?(g=parseInt(b.pieInnerRadius.replace(/[\D]/,""),10),g=g>99?99:g,g=0>g?0:g,f=Math.floor(h/100*g)):f=parseInt(b.pieInnerRadius,10),a.innerRadius=f,a.outerRadius=h},getTotalPieSize:function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].value;return b},sortPieData:function(a){var b=a.options.data.content,c=a.options.data.sortOrder;switch(c){case"none":break;case"random":b=g.shuffleArray(b);break;case"value-asc":b.sort(function(a,b){return a.value<b.value?-1:1});break;case"value-desc":b.sort(function(a,b){return a.value<b.value?1:-1});break;case"label-asc":b.sort(function(a,b){return a.label.toLowerCase()>b.label.toLowerCase()?1:-1});break;case"label-desc":b.sort(function(a,b){return a.label.toLowerCase()<b.label.toLowerCase()?1:-1})}return b},getPieTranslateCenter:function(a){return"translate("+a.x+","+a.y+")"},calculatePieCenter:function(a){var b=a.options.misc.pieCenterOffset,c=a.textComponents.title.exists&&"pie-center"!==a.options.header.location,d=a.textComponents.subtitle.exists&&"pie-center"!==a.options.header.location,e=a.options.misc.canvasPadding.top;c&&d?e+=a.textComponents.title.h+a.options.header.titleSubtitlePadding+a.textComponents.subtitle.h:c?e+=a.textComponents.title.h:d&&(e+=a.textComponents.subtitle.h);var f=0;a.textComponents.footer.exists&&(f=a.textComponents.footer.h+a.options.misc.canvasPadding.bottom);var g=(a.options.size.canvasWidth-a.options.misc.canvasPadding.left-a.options.misc.canvasPadding.right)/2+a.options.misc.canvasPadding.left,h=(a.options.size.canvasHeight-f-e)/2+e;g+=b.x,h+=b.y,a.pieCenter={x:g,y:h}},rotate:function(a,b,c,d,e){e=e*Math.PI/180;var f=Math.cos,g=Math.sin,h=(a-c)*f(e)-(b-d)*g(e)+c,i=(a-c)*g(e)+(b-d)*f(e)+d;return{x:h,y:i}},translate:function(a,b,c,d){var e=i.toRadians(d);return{x:a+c*Math.sin(e),y:b-c*Math.cos(e)}},pointIsInArc:function(a,b,c){var d=c.innerRadius()(b),e=c.outerRadius()(b),f=c.startAngle()(b),g=c.endAngle()(b),h=a.x*a.x+a.y*a.y,i=Math.atan2(a.x,-a.y);return i=0>i?i+2*Math.PI:i,h>=d*d&&e*e>=h&&i>=f&&g>=i}},j={add:function(a,b,c){var d=j.getIncludes(c),e=a.options.labels,f=a.svg.insert("g","."+a.cssPrefix+"labels-"+b).attr("class",a.cssPrefix+"labels-"+b),g=f.selectAll("."+a.cssPrefix+"labelGroup-"+b).data(a.options.data.content).enter().append("g").attr("id",function(c,d){return a.cssPrefix+"labelGroup"+d+"-"+b}).attr("data-index",function(a,b){return b}).attr("class",a.cssPrefix+"labelGroup-"+b).style("opacity",0),h={section:b,sectionDisplayType:c};d.mainLabel&&g.append("text").attr("id",function(c,d){return a.cssPrefix+"segmentMainLabel"+d+"-"+b}).attr("class",a.cssPrefix+"segmentMainLabel-"+b).text(function(a,b){var c=a.label;return e.formatter?(h.index=b,h.part="mainLabel",h.value=a.value,h.label=c,c=e.formatter(h)):e.truncation.enabled&&a.label.length>e.truncation.truncateLength&&(c=a.label.substring(0,e.truncation.truncateLength)+"..."),c}).style("font-size",e.mainLabel.fontSize+"px").style("font-family",e.mainLabel.font).style("fill",e.mainLabel.color),d.percentage&&g.append("text").attr("id",function(c,d){return a.cssPrefix+"segmentPercentage"+d+"-"+b}).attr("class",a.cssPrefix+"segmentPercentage-"+b).text(function(a,b){var c=a.percentage;return e.formatter?(h.index=b,h.part="percentage",h.value=a.value,h.label=a.percentage,c=e.formatter(h)):c+="%",c}).style("font-size",e.percentage.fontSize+"px").style("font-family",e.percentage.font).style("fill",e.percentage.color),d.value&&g.append("text").attr("id",function(c,d){return a.cssPrefix+"segmentValue"+d+"-"+b}).attr("class",a.cssPrefix+"segmentValue-"+b).text(function(a,b){return h.index=b,h.part="value",h.value=a.value,h.label=a.value,e.formatter?e.formatter(h,a.value):a.value}).style("font-size",e.value.fontSize+"px").style("font-family",e.value.font).style("fill",e.value.color)},positionLabelElements:function(a,b,c){j["dimensions-"+b]=[];var d=d3.selectAll("."+a.cssPrefix+"labelGroup-"+b);d.each(function(c,d){var e=d3.select(this).selectAll("."+a.cssPrefix+"segmentMainLabel-"+b),f=d3.select(this).selectAll("."+a.cssPrefix+"segmentPercentage-"+b),g=d3.select(this).selectAll("."+a.cssPrefix+"segmentValue-"+b);j["dimensions-"+b].push({mainLabel:null!==e.node()?e.node().getBBox():null,percentage:null!==f.node()?f.node().getBBox():null,value:null!==g.node()?g.node().getBBox():null})});var e=5,f=j["dimensions-"+b];switch(c){case"label-value1":d3.selectAll("."+a.cssPrefix+"segmentValue-"+b).attr("dx",function(a,b){return f[b].mainLabel.width+e});break;case"label-value2":d3.selectAll("."+a.cssPrefix+"segmentValue-"+b).attr("dy",function(a,b){return f[b].mainLabel.height});break;case"label-percentage1":d3.selectAll("."+a.cssPrefix+"segmentPercentage-"+b).attr("dx",function(a,b){return f[b].mainLabel.width+e});break;case"label-percentage2":d3.selectAll("."+a.cssPrefix+"segmentPercentage-"+b).attr("dx",function(a,b){return f[b].mainLabel.width/2-f[b].percentage.width/2}).attr("dy",function(a,b){return f[b].mainLabel.height})}},computeLabelLinePositions:function(a){a.lineCoordGroups=[],d3.selectAll("."+a.cssPrefix+"labelGroup-outer").each(function(b,c){return j.computeLinePosition(a,c)})},computeLinePosition:function(a,b){var c,d,e,f,g=k.getSegmentAngle(b,a.options.data.content,a.totalSize,{midpoint:!0}),h=i.rotate(a.pieCenter.x,a.pieCenter.y-a.outerRadius,a.pieCenter.x,a.pieCenter.y,g),j=a.outerLabelGroupData[b].h/5,l=6,m=Math.floor(g/90),n=4;switch(2===m&&180===g&&(m=1),m){case 0:c=a.outerLabelGroupData[b].x-l-(a.outerLabelGroupData[b].x-l-h.x)/2,d=a.outerLabelGroupData[b].y+(h.y-a.outerLabelGroupData[b].y)/n,e=a.outerLabelGroupData[b].x-l,f=a.outerLabelGroupData[b].y-j;break;case 1:c=h.x+(a.outerLabelGroupData[b].x-h.x)/n,d=h.y+(a.outerLabelGroupData[b].y-h.y)/n,e=a.outerLabelGroupData[b].x-l,f=a.outerLabelGroupData[b].y-j;break;case 2:var o=a.outerLabelGroupData[b].x+a.outerLabelGroupData[b].w+l;c=h.x-(h.x-o)/n,d=h.y+(a.outerLabelGroupData[b].y-h.y)/n,e=a.outerLabelGroupData[b].x+a.outerLabelGroupData[b].w+l,f=a.outerLabelGroupData[b].y-j;break;case 3:var p=a.outerLabelGroupData[b].x+a.outerLabelGroupData[b].w+l;c=p+(h.x-p)/n,d=a.outerLabelGroupData[b].y+(h.y-a.outerLabelGroupData[b].y)/n,e=a.outerLabelGroupData[b].x+a.outerLabelGroupData[b].w+l,f=a.outerLabelGroupData[b].y-j}"straight"===a.options.labels.lines.style?a.lineCoordGroups[b]=[{x:h.x,y:h.y},{x:e,y:f}]:a.lineCoordGroups[b]=[{x:h.x,y:h.y},{x:c,y:d},{x:e,y:f}]},addLabelLines:function(a){var b=a.svg.insert("g","."+a.cssPrefix+"pieChart").attr("class",a.cssPrefix+"lineGroups").style("opacity",0),c=b.selectAll("."+a.cssPrefix+"lineGroup").data(a.lineCoordGroups).enter().append("g").attr("class",a.cssPrefix+"lineGroup"),d=d3.line().curve(d3.curveBasis).x(function(a){return a.x}).y(function(a){return a.y});c.append("path").attr("d",d).attr("stroke",function(b,c){return"segment"===a.options.labels.lines.color?a.options.colors[c]:a.options.labels.lines.color}).attr("stroke-width",1).attr("fill","none").style("opacity",function(b,c){var d=a.options.labels.outer.hideWhenLessThanPercentage,e=null!==d&&b.percentage<d||""===a.options.data.content[c].label;return e?0:1})},positionLabelGroups:function(a,b){"none"!==a.options.labels[b].format&&d3.selectAll("."+a.cssPrefix+"labelGroup-"+b).style("opacity",0).attr("transform",function(c,d){var e,f;if("outer"===b)e=a.outerLabelGroupData[d].x,f=a.outerLabelGroupData[d].y;else{var j=h(!0,{},a.pieCenter);if(a.innerRadius>0){var l=k.getSegmentAngle(d,a.options.data.content,a.totalSize,{midpoint:!0}),m=i.translate(a.pieCenter.x,a.pieCenter.y,a.innerRadius,l);j.x=m.x,j.y=m.y}var n=g.getDimensions(a.cssPrefix+"labelGroup"+d+"-inner"),o=n.w/2,p=n.h/4;e=j.x+(a.lineCoordGroups[d][0].x-j.x)/1.8,f=j.y+(a.lineCoordGroups[d][0].y-j.y)/1.8,e-=o,f+=p}return"translate("+e+","+f+")"})},fadeInLabelsAndLines:function(a){var b="default"===a.options.effects.load.effect?a.options.effects.load.speed:1;setTimeout(function(){var b="default"===a.options.effects.load.effect?400:1;d3.selectAll("."+a.cssPrefix+"labelGroup-outer").transition().duration(b).style("opacity",function(b,c){var d=a.options.labels.outer.hideWhenLessThanPercentage;return null!==d&&b.percentage<d?0:1}),d3.selectAll("."+a.cssPrefix+"labelGroup-inner").transition().duration(b).style("opacity",function(b,c){var d=a.options.labels.inner.hideWhenLessThanPercentage;return null!==d&&b.percentage<d?0:1}),d3.selectAll("g."+a.cssPrefix+"lineGroups").transition().duration(b).style("opacity",1),g.isFunction(a.options.callbacks.onload)&&setTimeout(function(){try{a.options.callbacks.onload()}catch(b){}},b)},b)},getIncludes:function(a){var b=!1,c=!1,d=!1;switch(a){case"label":b=!0;break;case"value":c=!0;break;case"percentage":d=!0;break;case"label-value1":case"label-value2":b=!0,c=!0;break;case"label-percentage1":case"label-percentage2":b=!0,d=!0}return{mainLabel:b,value:c,percentage:d}},computeOuterLabelCoords:function(a){a.svg.selectAll("."+a.cssPrefix+"labelGroup-outer").each(function(b,c){return j.getIdealOuterLabelPositions(a,c)}),j.resolveOuterLabelCollisions(a)},resolveOuterLabelCollisions:function(a){if("none"!==a.options.labels.outer.format){var b=a.options.data.content.length;j.checkConflict(a,0,"clockwise",b),j.checkConflict(a,b-1,"anticlockwise",b)}},checkConflict:function(a,b,c,d){var e,f;if(!(1>=d)){var h=a.outerLabelGroupData[b].hs;if(!("clockwise"===c&&"right"!==h||"anticlockwise"===c&&"left"!==h)){var i="clockwise"===c?b+1:b-1,k=a.outerLabelGroupData[b],l=a.outerLabelGroupData[i],m={labelHeights:a.outerLabelGroupData[0].h,center:a.pieCenter,lineLength:a.outerRadius+a.options.labels.outer.pieDistance,heightChange:a.outerLabelGroupData[0].h+1};if("clockwise"===c){for(e=0;b>=e;e++)if(f=a.outerLabelGroupData[e],!j.isLabelHidden(a,e)&&g.rectIntersect(f,l)){j.adjustLabelPos(a,i,k,m);break}}else for(e=d-1;e>=b;e--)if(f=a.outerLabelGroupData[e],!j.isLabelHidden(a,e)&&g.rectIntersect(f,l)){j.adjustLabelPos(a,i,k,m);break}j.checkConflict(a,i,c,d)}}},isLabelHidden:function(a,b){var c=a.options.labels.outer.hideWhenLessThanPercentage;return null!==c&&d.percentage<c||""===a.options.data.content[b].label},adjustLabelPos:function(a,b,c,d){var e,f,g,h;h=c.y+d.heightChange,f=d.center.y-h,e=Math.abs(d.lineLength)>Math.abs(f)?Math.sqrt(d.lineLength*d.lineLength-f*f):Math.sqrt(f*f-d.lineLength*d.lineLength),g="right"===c.hs?d.center.x+e:d.center.x-e-a.outerLabelGroupData[b].w,a.outerLabelGroupData[b].x=g,a.outerLabelGroupData[b].y=h},getIdealOuterLabelPositions:function(a,b){var c=d3.select("#"+a.cssPrefix+"labelGroup"+b+"-outer").node();if(c){var d=c.getBBox(),e=k.getSegmentAngle(b,a.options.data.content,a.totalSize,{midpoint:!0}),f=a.pieCenter.x,g=a.pieCenter.y-(a.outerRadius+a.options.labels.outer.pieDistance),h=i.rotate(f,g,a.pieCenter.x,a.pieCenter.y,e),j="right";e>180?(h.x-=d.width+8,j="left"):h.x+=8,a.outerLabelGroupData[b]={x:h.x,y:h.y,w:d.width,h:d.height,hs:j}}}},k={effectMap:{none:d3.easeLinear,bounce:d3.easeBounce,linear:d3.easeLinear,sin:d3.easeSin,elastic:d3.easeElastic,back:d3.easeBack,quad:d3.easeQuad,circle:d3.easeCircle,exp:d3.easeExp},create:function(a){var b=a.pieCenter,c=a.options.colors,d=a.options.effects.load,e=a.options.misc.colors.segmentStroke,f=a.svg.insert("g","#"+a.cssPrefix+"title").attr("transform",function(){return i.getPieTranslateCenter(b)}).attr("class",a.cssPrefix+"pieChart"),g=d3.arc().innerRadius(a.innerRadius).outerRadius(a.outerRadius).startAngle(0).endAngle(function(b){return b.value/a.totalSize*2*Math.PI}),h=f.selectAll("."+a.cssPrefix+"arc").data(a.options.data.content).enter().append("g").attr("class",a.cssPrefix+"arc"),j=d.speed;"none"===d.effect&&(j=0),h.append("path").attr("id",function(b,c){return a.cssPrefix+"segment"+c}).attr("fill",function(b,d){var e=c[d];return a.options.misc.gradient.enabled&&(e="url(#"+a.cssPrefix+"grad"+d+")"),e}).style("stroke",e).style("stroke-width",1).transition().ease(d3.easeCubicInOut).duration(j).attr("data-index",function(a,b){return b}).attrTween("d",function(b){var c=d3.interpolate({value:0},b);return function(b){return a.arc(c(b))}}),a.svg.selectAll("g."+a.cssPrefix+"arc").attr("transform",function(b,c){var d=0;return c>0&&(d=k.getSegmentAngle(c-1,a.options.data.content,a.totalSize)),"rotate("+d+")"}),a.arc=g},addGradients:function(a){var b=a.svg.append("defs").selectAll("radialGradient").data(a.options.data.content).enter().append("radialGradient").attr("gradientUnits","userSpaceOnUse").attr("cx",0).attr("cy",0).attr("r","120%").attr("id",function(b,c){return a.cssPrefix+"grad"+c});b.append("stop").attr("offset","0%").style("stop-color",function(b,c){return a.options.colors[c]}),b.append("stop").attr("offset",a.options.misc.gradient.percentage+"%").style("stop-color",a.options.misc.gradient.color)},addSegmentEventHandlers:function(a){var b=d3.selectAll("."+a.cssPrefix+"arc,."+a.cssPrefix+"labelGroup-inner,."+a.cssPrefix+"labelGroup-outer");b.on("click",function(){var b,c=d3.select(this);if(c.attr("class")===a.cssPrefix+"arc")b=c.select("path");else{var d=c.attr("data-index");b=d3.select("#"+a.cssPrefix+"segment"+d)}var e=b.attr("class")===a.cssPrefix+"expanded";k.onSegmentEvent(a,a.options.callbacks.onClickSegment,b,e),"none"!==a.options.effects.pullOutSegmentOnClick.effect&&(e?k.closeSegment(a,b.node()):k.openSegment(a,b.node()))}),b.on("mouseover",function(){var b,c,d=d3.select(this);if(d.attr("class")===a.cssPrefix+"arc"?b=d.select("path"):(c=d.attr("data-index"),b=d3.select("#"+a.cssPrefix+"segment"+c)),a.options.effects.highlightSegmentOnMouseover){c=b.attr("data-index");var e=a.options.colors[c];b.style("fill",g.getColorShade(e,a.options.effects.highlightLuminosity))}a.options.tooltips.enabled&&(c=b.attr("data-index"),m.showTooltip(a,c));var f=b.attr("class")===a.cssPrefix+"expanded";k.onSegmentEvent(a,a.options.callbacks.onMouseoverSegment,b,f)}),b.on("mousemove",function(){m.moveTooltip(a)}),b.on("mouseout",function(){var b,c,d=d3.select(this);if(d.attr("class")===a.cssPrefix+"arc"?b=d.select("path"):(c=d.attr("data-index"),b=d3.select("#"+a.cssPrefix+"segment"+c)),a.options.effects.highlightSegmentOnMouseover){c=b.attr("data-index");var e=a.options.colors[c];a.options.misc.gradient.enabled&&(e="url(#"+a.cssPrefix+"grad"+c+")"),b.style("fill",e)}a.options.tooltips.enabled&&(c=b.attr("data-index"),m.hideTooltip(a,c));var f=b.attr("class")===a.cssPrefix+"expanded";k.onSegmentEvent(a,a.options.callbacks.onMouseoutSegment,b,f)})},onSegmentEvent:function(a,b,c,d){if(g.isFunction(b)){var e=parseInt(c.attr("data-index"),10);b({segment:c.node(),index:e,expanded:d,data:a.options.data.content[e]})}},openSegment:function(a,b){a.isOpeningSegment||(a.isOpeningSegment=!0,k.maybeCloseOpenSegment(),d3.select(b).transition().ease(k.effectMap[a.options.effects.pullOutSegmentOnClick.effect]).duration(a.options.effects.pullOutSegmentOnClick.speed).attr("transform",function(b,c){var d=a.arc.centroid(b),e=d[0],f=d[1],g=Math.sqrt(e*e+f*f),h=parseInt(a.options.effects.pullOutSegmentOnClick.size,10);return"translate("+e/g*h+","+f/g*h+")"}).on("end",function(c,d){a.currentlyOpenSegment=b,a.isOpeningSegment=!1,d3.select(b).attr("class",a.cssPrefix+"expanded")}))},maybeCloseOpenSegment:function(){d3.selectAll("."+pie.cssPrefix+"expanded").size()>0&&k.closeSegment(pie,d3.select("."+pie.cssPrefix+"expanded").node())},closeSegment:function(a,b){d3.select(b).transition().duration(400).attr("transform","translate(0,0)").on("end",function(c,d){d3.select(b).attr("class",""),a.currentlyOpenSegment=null})},getCentroid:function(a){var b=a.getBBox();return{x:b.x+b.width/2,y:b.y+b.height/2}},getSegmentAngle:function(a,b,c,d){var e,f=h({compounded:!0,midpoint:!1},d),g=b[a].value;if(f.compounded){e=0;for(var i=0;a>=i;i++)e+=b[i].value}"undefined"==typeof e&&(e=g);var j=e/c*360;if(f.midpoint){var k=g/c*360;j-=k/2}return j}},l={offscreenCoord:-1e4,addTitle:function(a){a.svg.selectAll("."+a.cssPrefix+"title").data([a.options.header.title]).enter().append("text").text(function(a){return a.text}).attr("id",a.cssPrefix+"title").attr("class",a.cssPrefix+"title").attr("x",l.offscreenCoord).attr("y",l.offscreenCoord).attr("text-anchor",function(){var b;return b="top-center"===a.options.header.location||"pie-center"===a.options.header.location?"middle":"left"}).attr("fill",function(a){return a.color}).style("font-size",function(a){return a.fontSize+"px"}).style("font-family",function(a){return a.font})},positionTitle:function(a){var b,c=a.textComponents,d=a.options.header.location,e=a.options.misc.canvasPadding,f=a.options.size.canvasWidth,g=a.options.header.titleSubtitlePadding;b="top-left"===d?e.left:(f-e.right)/2+e.left,b+=a.options.misc.pieCenterOffset.x;var h=e.top+c.title.h;if("pie-center"===d)if(h=a.pieCenter.y,c.subtitle.exists){var i=c.title.h+g+c.subtitle.h;h=h-i/2+c.title.h}else h+=c.title.h/4;a.svg.select("#"+a.cssPrefix+"title").attr("x",b).attr("y",h)},addSubtitle:function(a){var b=a.options.header.location;a.svg.selectAll("."+a.cssPrefix+"subtitle").data([a.options.header.subtitle]).enter().append("text").text(function(a){return a.text}).attr("x",l.offscreenCoord).attr("y",l.offscreenCoord).attr("id",a.cssPrefix+"subtitle").attr("class",a.cssPrefix+"subtitle").attr("text-anchor",function(){var a;return a="top-center"===b||"pie-center"===b?"middle":"left"}).attr("fill",function(a){return a.color}).style("font-size",function(a){return a.fontSize+"px"}).style("font-family",function(a){return a.font})},positionSubtitle:function(a){var b,c=a.options.misc.canvasPadding,d=a.options.size.canvasWidth;b="top-left"===a.options.header.location?c.left:(d-c.right)/2+c.left,b+=a.options.misc.pieCenterOffset.x;var e=l.getHeaderHeight(a);a.svg.select("#"+a.cssPrefix+"subtitle").attr("x",b).attr("y",e)},addFooter:function(a){a.svg.selectAll("."+a.cssPrefix+"footer").data([a.options.footer]).enter().append("text").text(function(a){return a.text}).attr("x",l.offscreenCoord).attr("y",l.offscreenCoord).attr("id",a.cssPrefix+"footer").attr("class",a.cssPrefix+"footer").attr("text-anchor",function(){var b="left";return"bottom-center"===a.options.footer.location?b="middle":"bottom-right"===a.options.footer.location&&(b="left"),b}).attr("fill",function(a){return a.color}).style("font-size",function(a){return a.fontSize+"px"}).style("font-family",function(a){return a.font})},positionFooter:function(a){var b,c=a.options.footer.location,d=a.textComponents.footer.w,e=a.options.size.canvasWidth,f=a.options.size.canvasHeight,g=a.options.misc.canvasPadding;b="bottom-left"===c?g.left:"bottom-right"===c?e-d-g.right:e/2,a.svg.select("#"+a.cssPrefix+"footer").attr("x",b).attr("y",f-g.bottom)},getHeaderHeight:function(a){var b;if(a.textComponents.title.exists){var c=a.textComponents.title.h+a.options.header.titleSubtitlePadding+a.textComponents.subtitle.h;b="pie-center"===a.options.header.location?a.pieCenter.y-c/2+c:c+a.options.misc.canvasPadding.top}else if("pie-center"===a.options.header.location){var d=a.options.misc.canvasPadding.bottom+a.textComponents.footer.h;b=(a.options.size.canvasHeight-d)/2+a.options.misc.canvasPadding.top+a.textComponents.subtitle.h/2}else b=a.options.misc.canvasPadding.top+a.textComponents.subtitle.h;return b}},m={addTooltips:function(a){var b=a.svg.insert("g").attr("class",a.cssPrefix+"tooltips");b.selectAll("."+a.cssPrefix+"tooltip").data(a.options.data.content).enter().append("g").attr("class",a.cssPrefix+"tooltip").attr("id",function(b,c){return a.cssPrefix+"tooltip"+c}).style("opacity",0).append("rect").attr("rx",a.options.tooltips.styles.borderRadius).attr("ry",a.options.tooltips.styles.borderRadius).attr("x",-a.options.tooltips.styles.padding).attr("opacity",a.options.tooltips.styles.backgroundOpacity).style("fill",a.options.tooltips.styles.backgroundColor),b.selectAll("."+a.cssPrefix+"tooltip").data(a.options.data.content).append("text").attr("fill",function(b){return a.options.tooltips.styles.color}).style("font-size",function(b){return a.options.tooltips.styles.fontSize}).style("font-family",function(b){return a.options.tooltips.styles.font}).text(function(b,c){var d=a.options.tooltips.string;return"caption"===a.options.tooltips.type&&(d=b.caption),m.replacePlaceholders(a,d,c,{label:b.label,value:b.value,percentage:b.percentage})}),b.selectAll("."+a.cssPrefix+"tooltip rect").attr("width",function(b,c){var d=g.getDimensions(a.cssPrefix+"tooltip"+c);return d.w+2*a.options.tooltips.styles.padding}).attr("height",function(b,c){var d=g.getDimensions(a.cssPrefix+"tooltip"+c);return d.h+2*a.options.tooltips.styles.padding}).attr("y",function(b,c){var d=g.getDimensions(a.cssPrefix+"tooltip"+c);return-(d.h/2)+1})},showTooltip:function(a,b){var c=a.options.tooltips.styles.fadeInSpeed;m.currentTooltip===b&&(c=1),m.currentTooltip=b,d3.select("#"+a.cssPrefix+"tooltip"+b).transition().duration(c).style("opacity",function(){return 1}),m.moveTooltip(a)},moveTooltip:function(a){d3.selectAll("#"+a.cssPrefix+"tooltip"+m.currentTooltip).attr("transform",function(b){var c=d3.mouse(this.parentNode),d=c[0]+a.options.tooltips.styles.padding+2,e=c[1]-2*a.options.tooltips.styles.padding-2;return"translate("+d+","+e+")"})},hideTooltip:function(a,b){d3.select("#"+a.cssPrefix+"tooltip"+b).style("opacity",function(){return 0}),d3.select("#"+a.cssPrefix+"tooltip"+m.currentTooltip).attr("transform",function(b,c){var d=a.options.size.canvasWidth+1e3,e=a.options.size.canvasHeight+1e3;return"translate("+d+","+e+")"})},replacePlaceholders:function(a,b,c,d){g.isFunction(a.options.tooltips.placeholderParser)&&a.options.tooltips.placeholderParser(c,d);var e=function(){return function(a){var b=arguments[1];return d.hasOwnProperty(b)?d[arguments[1]]:arguments[0]}};return b.replace(/\{(\w+)\}/g,e(d))}},n=function(d,g){if(this.element=d,"string"==typeof d){var i=d.replace(/^#/,"");this.element=document.getElementById(i)}var j={};h(!0,j,e,g),this.options=j,null!==this.options.misc.cssPrefix?this.cssPrefix=this.options.misc.cssPrefix:(this.cssPrefix="p"+c+"_",c++),f.initialCheck(this)&&(d3.select(this.element).attr(a,b),o.call(this),p.call(this))};n.prototype.recreate=function(){f.initialCheck(this)&&(o.call(this),p.call(this))},n.prototype.redraw=function(){this.element.innerHTML="",p.call(this)},n.prototype.destroy=function(){this.element.innerHTML="",d3.select(this.element).attr(a,null)},n.prototype.getOpenSegment=function(){var a=this.currentlyOpenSegment;if(null!==a&&"undefined"!=typeof a){var b=parseInt(d3.select(a).attr("data-index"),10);return{element:a,index:b,data:this.options.data.content[b]}}return null},n.prototype.openSegment=function(a){a=parseInt(a,10),0>a||a>this.options.data.content.length-1||k.openSegment(this,d3.select("#"+this.cssPrefix+"segment"+a).node())},n.prototype.closeSegment=function(){k.maybeCloseOpenSegment()},n.prototype.updateProp=function(a,b){switch(a){case"header.title.text":var c=g.processObj(this.options,a);g.processObj(this.options,a,b),d3.select("#"+this.cssPrefix+"title").html(b),(""===c&&""!==b||""!==c&&""===b)&&this.redraw();break;case"header.subtitle.text":var d=g.processObj(this.options,a);g.processObj(this.options,a,b),d3.select("#"+this.cssPrefix+"subtitle").html(b),(""===d&&""!==b||""!==d&&""===b)&&this.redraw();break;case"callbacks.onload":case"callbacks.onMouseoverSegment":case"callbacks.onMouseoutSegment":case"callbacks.onClickSegment":case"effects.pullOutSegmentOnClick.effect":case"effects.pullOutSegmentOnClick.speed":case"effects.pullOutSegmentOnClick.size":case"effects.highlightSegmentOnMouseover":case"effects.highlightLuminosity":g.processObj(this.options,a,b);break;default:g.processObj(this.options,a,b),this.destroy(),this.recreate()}};var o=function(){this.options.data.content=i.sortPieData(this),this.options.data.smallSegmentGrouping.enabled&&(this.options.data.content=g.applySmallSegmentGrouping(this.options.data.content,this.options.data.smallSegmentGrouping)),this.options.colors=g.initSegmentColors(this),this.totalSize=i.getTotalPieSize(this.options.data.content);for(var a=this.options.labels.percentage.decimalPlaces,b=0;b<this.options.data.content.length;b++)this.options.data.content[b].percentage=q(this.options.data.content[b].value,this.totalSize,a);for(var c=0,d=0;d<this.options.data.content.length;d++)d===this.options.data.content.length-1&&(this.options.data.content[d].percentage=(100-c).toFixed(a)),c+=parseFloat(this.options.data.content[d].percentage)},p=function(){this.svg=g.addSVGSpace(this),this.textComponents={
headerHeight:0,title:{exists:""!==this.options.header.title.text,h:0,w:0},subtitle:{exists:""!==this.options.header.subtitle.text,h:0,w:0},footer:{exists:""!==this.options.footer.text,h:0,w:0}},this.outerLabelGroupData=[],this.textComponents.title.exists&&l.addTitle(this),this.textComponents.subtitle.exists&&l.addSubtitle(this),l.addFooter(this);var a=this;g.whenIdExists(this.cssPrefix+"footer",function(){l.positionFooter(a);var b=g.getDimensions(a.cssPrefix+"footer");a.textComponents.footer.h=b.h,a.textComponents.footer.w=b.w});var b=[];this.textComponents.title.exists&&b.push(this.cssPrefix+"title"),this.textComponents.subtitle.exists&&b.push(this.cssPrefix+"subtitle"),this.textComponents.footer.exists&&b.push(this.cssPrefix+"footer"),g.whenElementsExist(b,function(){if(a.textComponents.title.exists){var b=g.getDimensions(a.cssPrefix+"title");a.textComponents.title.h=b.h,a.textComponents.title.w=b.w}if(a.textComponents.subtitle.exists){var c=g.getDimensions(a.cssPrefix+"subtitle");a.textComponents.subtitle.h=c.h,a.textComponents.subtitle.w=c.w}if(a.textComponents.title.exists||a.textComponents.subtitle.exists){var d=0;a.textComponents.title.exists&&(d+=a.textComponents.title.h,a.textComponents.subtitle.exists&&(d+=a.options.header.titleSubtitlePadding)),a.textComponents.subtitle.exists&&(d+=a.textComponents.subtitle.h),a.textComponents.headerHeight=d}i.computePieRadius(a),i.calculatePieCenter(a),l.positionTitle(a),l.positionSubtitle(a),a.options.misc.gradient.enabled&&k.addGradients(a),k.create(a),j.add(a,"inner",a.options.labels.inner.format),j.add(a,"outer",a.options.labels.outer.format),j.positionLabelElements(a,"inner",a.options.labels.inner.format),j.positionLabelElements(a,"outer",a.options.labels.outer.format),j.computeOuterLabelCoords(a),j.positionLabelGroups(a,"outer"),j.computeLabelLinePositions(a),a.options.labels.lines.enabled&&"none"!==a.options.labels.outer.format&&j.addLabelLines(a),j.positionLabelGroups(a,"inner"),j.fadeInLabelsAndLines(a),a.options.tooltips.enabled&&m.addTooltips(a),k.addSegmentEventHandlers(a)})},q=function(a,b,c){var d=a/b;return 0>=c?Math.round(100*d):(100*d).toFixed(c)};return n});;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-pr-analyzer-statistics-resources', location = '/js/render-statistic-pies.js' */
define("mibexsoftware/sonar4stash/render-statistic-pies",["jquery","exports"],function(b,a){a.renderPieCharts=function(f,h){if(b("#duplications-chart").length===0&&b("#coverage-chart").length===0){return}function g(j){return{title:{text:(j?j:0)+"%",fontSize:12},location:"pie-center"}}function d(k,j){return{content:[{label:"coverage",value:k?k:0,color:j?"#006644":"#DE350B"},{label:"non-coverage",value:k?100-k:100,color:j?"#DE350B":"#006644"}]}}var c={pieInnerRadius:"80%",pieOuterRadius:"100%",canvasHeight:60,canvasWidth:60};var e={load:{effect:"none"}};var i={outer:{format:"none",pieDistance:12},inner:{format:"none"},percentage:{color:"#ffffff"}};new d3pie("duplications-chart",{header:g(f),data:d(f,false),effects:e,size:c,labels:i});new d3pie("coverage-chart",{header:g(h),data:d(h,true),effects:e,size:c,labels:i})}});;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-pr-analyzer-statistics-panel', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'ch.mibex.stash.sonar4stash','key':'sonar4stash-pr-analyzer-statistics-panel','moduleKey':'sonar4stash-pr-analyzer-statistics-panel','completeModuleKey':'ch.mibex.stash.sonar4stash:sonar4stash-pr-analyzer-statistics-panel','weight':5.0,'condition':function(ctx) { return WebFragments._getValue((require('mibexsoftware/sonar4stash/statistics').isSonarStatisticsActive), ctx); },'context-provider':function(ctx) { return WebFragments._getValue((require('mibexsoftware/sonar4stash/statistics').showSonarStatistics), ctx); },'params':{},'location':'bitbucket.pull-request.related-entities','view':function(ctx) { return WebFragments._getValue((ch.mibex.stash.sonar4stash.prAnalyzerStatisticsPanelEmpty), ctx); }});;
;
/* module-key = 'com.izymes.workzone:wz-pullrequest-overview-resources', location = '/pullrequest/overview/js/signapprove-dialog-view.js' */
define("workzone/signapprove/dialog/view",["backbone","aui","workzone/pullrequestapproval"],function(d,b,c){var a=d.View.extend({tagName:"div",initialize:function(e){console.log("init sign approve dialog view",this.$el,this.model)},events:{"change input":"_updateModel"},render:function(){this.$el.empty();this.$el.append(Workzone.pullrequest.signapproval.dialog());return this},show:function(){b.dialog2("#wz-signapprove-dialog").show();this._enableDialogControls();this.setElement("#wz-signapprove-dialog")},_enableDialogControls:function(){var e=this;b.$("#wz-signapprove-dialog-close-button").click(function(f){f.preventDefault();b.dialog2("#wz-signapprove-dialog").remove();e.remove()});b.$("#wz-signapprove-dialog-submit-button").click(function(f){f.preventDefault();e.model.save({},{error:function(i,g,h){b.messages.warning({title:g,fadeout:true})},success:function(i,g,h){if(g&&g.error){b.messages.warning({title:g.error,fadeout:true});return false}c.reloadAfterApproval();b.dialog2("#wz-signapprove-dialog").remove();e.remove()}})})},_updateModel:function(e){this.model.set({signapproveUser:this.$("#signapproveUser").val(),signapprovePwd:this.$("#signapprovePwd").val()})}});return a});;
;
/* module-key = 'com.izymes.workzone:wz-pullrequest-overview-resources', location = '/pullrequest/overview/js/signapprove-model.js' */
define("workzone/signapprove/model",["backbone","aui"],function(c,a){var b=c.Model.extend({url:function(){return a.contextPath()+"/rest/workzoneresource/latest/approvals/"+this.get("projectKey")+"/"+this.get("repoSlug")+"/"+this.get("pullReqId")+"/sign"}});return b});;
;
/* module-key = 'com.izymes.workzone:wz-pullrequest-overview-resources', location = '/pullrequest/overview/js/signapprove-view.js' */
define("workzone/signapprove/view",["backbone","workzone/signapprove/dialog/view","workzone/signapprove/model","aui"],function(e,b,a,c){var d=e.View.extend({initialize:function(f){console.log("init sign approve ",this.options);this.render();this._removeDefaultApproveButton()},events:{"click ":"_openSignApproveDialog"},render:function(){this.$el.prepend("<span class='approve-icon'></span>");return this},_openSignApproveDialog:function(){this.$(".wz-signapprove-dialog").remove();this.$el.append("<div class='wz-signapprove-dialog'></div>");this.dialog=new b({el:".wz-signapprove-dialog",model:new a({projectKey:this.options.projectKey,repoSlug:this.options.repoSlug,pullReqId:this.options.pullReqId})});this.dialog.render().show()},_removeDefaultApproveButton:function(){c.$(".aui-button.approve").remove()}});return d});;
;
/* module-key = 'com.izymes.workzone:wz-pullrequest-overview-resources', location = '/pullrequest/overview/js/pullrequest-approval.js' */
define("workzone/pullrequestapproval",["jquery","bitbucket/util/events","lodash","aui"],function(e,d,c,a){var b={};a.toInit(function(k){var j=require("workzone/signapprove/view");var h=k("section#content").attr("data-pullrequestid");var f=k("section#content").attr("data-projectkey");var i=k("section#content").attr("data-reposlug");console.log("init auto-reviewers pull request ",f,i,h);var g=a.$(".wz-signapprove").size()>0;if(g){console.log("user must sign");new j({el:".wz-signapprove",projectKey:f,repoSlug:i,pullReqId:h})}b.reloadAfterApproval=function(m,l){l=l||3000;setTimeout(function(){k.getJSON(a.contextPath()+"/rest/api/1.0/projects/"+f+"/repos/"+i+"/pull-requests/"+h,function(n){if(m&&n.state===m){location.reload()}else{if(m==null){location.reload()}}})},l)};d.on("bitbucket.internal.widget.approve-button.added",function(l){b.reloadAfterApproval("MERGED")});d.on("bitbucket.internal.widget.approve-button.removed",function(l){b.reloadAfterApproval("OPEN",100)})});return b});require("workzone/pullrequestapproval");;
;
/* module-key = 'com.izymes.workzone:wz-pullrequest-overview-resources', location = '/pullrequest/overview/js/pullrequest-signatures-tab.js' */
define("workzone/pullrequest/overview/signatures-tab",["jquery","bitbucket/util/events","lodash","aui"],function(d,c,b,a){a.toInit(function(i){var g=i("section#content");var j=g.attr("data-pullrequestid");var e=g.attr("data-projectkey");var l=g.attr("data-reposlug");var k=require("workzone/pullrequest/common/signatures/collection");var f=require("workzone/pullrequest/signatures/tab/view");var m=null;function h(n){console.log("click signature tab view");var o=new k([],{pullReqId:j,projectKey:e,repoSlug:l});m=new f({el:".pull-request-content",signatures:o})}i("#wz-pr-overview-signatures").click(function(n){if(!m){i(this).parents("ul").find('[data-module-key="bitbucket.pull-request.nav.overview"]').click(function(){window.location.href=i(this).find("a").attr("href")})}h(n)});if(window.location.href.indexOf("#signatures")>0){i("#wz-pr-overview-signatures").click()}})});require("workzone/pullrequest/overview/signatures-tab");;
;
/* module-key = 'com.izymes.workzone:wz-pullrequest-overview-resources', location = '/pullrequest/overview/js/pullrequest-signatures-tab-view.js' */
define("workzone/pullrequest/signatures/tab/view",["aui","backbone"],function(a,b){return b.View.extend({initialize:function(c){this.signatures=c.signatures;a.$.when(this.signatures.deferred).done(_.bind(this.render,this),function(){})},render:function(c){console.log("tab view render",this,c);this.$el.html(a.$(com.izymes.workzone.pullrequest.overview.list.signatures({signaturesHistory:c.reverse()})))}})});;
;
/* module-key = 'com.izymes.workzone:wz-pullrequest-overview-resources', location = '/pullrequest/overview/templates/signapprove-dialog.soy' */
// This file was automatically generated from signapprove-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Workzone.pullrequest.signapproval.
 */

if (typeof Workzone == 'undefined') { var Workzone = {}; }
if (typeof Workzone.pullrequest == 'undefined') { Workzone.pullrequest = {}; }
if (typeof Workzone.pullrequest.signapproval == 'undefined') { Workzone.pullrequest.signapproval = {}; }


Workzone.pullrequest.signapproval.dialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="wz-signapprove-dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="true"><!-- Dialog header --><header class="aui-dialog2-header"><!-- The dialogs title --><h2 class="aui-dialog2-header-main">Sign & Approve</h2><!-- Actions to render on the right of the header --><div class="aui-dialog2-header-secondary"> </div><!-- Close icon --><a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">Close</span></a></header><!-- Main dialog content --><div class="aui-dialog2-content"><div id="aui-message-bar"></div><h4>' + soy.$$escapeHtml('Sign and approve this Pull Request') + '</h4><p>' + soy.$$escapeHtml('Your username and password is required to approve this Pull Request.') + '</p><form class="aui">' + widget.aui.form.text({id: 'signapproveUser', name: 'signapproveUser', labelContent: 'Username'}) + widget.aui.form.password({id: 'signapprovePwd', name: 'signapprovePwd', labelContent: 'Password'}) + '</form></div><!-- Dialog footer --><footer class="aui-dialog2-footer"><!-- Actions to render on the right of the footer --><div class="aui-dialog2-footer-actions"><button id="wz-signapprove-dialog-submit-button" class="aui-button aui-button-primary">Approve</button><button id="wz-signapprove-dialog-close-button" class="aui-button aui-button-link">Close</button></div><!-- Hint text is rendered on the left of the footer --><div class="aui-dialog2-footer-hint"></div></footer></section>';
};
if (goog.DEBUG) {
  Workzone.pullrequest.signapproval.dialog.soyTemplateName = 'Workzone.pullrequest.signapproval.dialog';
}


Workzone.pullrequest.signapproval.test = function(opt_data, opt_ignored) {
  return '<h1>Hello</h1>';
};
if (goog.DEBUG) {
  Workzone.pullrequest.signapproval.test.soyTemplateName = 'Workzone.pullrequest.signapproval.test';
}
;
;
/* module-key = 'com.izymes.workzone:wz-pullrequest-overview-resources', location = '/pullrequest/overview/templates/pullrequest-overview-list-signatures.soy' */
// This file was automatically generated from pullrequest-overview-list-signatures.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace com.izymes.workzone.pullrequest.overview.list.
 */

if (typeof com == 'undefined') { var com = {}; }
if (typeof com.izymes == 'undefined') { com.izymes = {}; }
if (typeof com.izymes.workzone == 'undefined') { com.izymes.workzone = {}; }
if (typeof com.izymes.workzone.pullrequest == 'undefined') { com.izymes.workzone.pullrequest = {}; }
if (typeof com.izymes.workzone.pullrequest.overview == 'undefined') { com.izymes.workzone.pullrequest.overview = {}; }
if (typeof com.izymes.workzone.pullrequest.overview.list == 'undefined') { com.izymes.workzone.pullrequest.overview.list = {}; }


com.izymes.workzone.pullrequest.overview.list.signatures = function(opt_data, opt_ignored) {
  var output = '<div class="aui-group">';
  if (opt_data.signaturesHistory && opt_data.signaturesHistory.length > 0) {
    output += '<table class="aui">';
    var signatureList7 = opt_data.signaturesHistory;
    var signatureListLen7 = signatureList7.length;
    for (var signatureIndex7 = 0; signatureIndex7 < signatureListLen7; signatureIndex7++) {
      var signatureData7 = signatureList7[signatureIndex7];
      output += '<tr><td>&nbsp;&nbsp;<span class="aui-icon aui-icon-small aui-iconfont-time"></span>&nbsp;' + soy.$$escapeHtml(signatureData7.dateTime) + '&nbsp;</td><td><b>' + soy.$$escapeHtml(signatureData7.user.displayName) + '</b></td><td>' + ((signatureData7.eventType == 'SIGNED') ? '&nbsp;<span class="aui-lozenge aui-lozenge-subtle aui-lozenge-success">signed</span>' : '&nbsp;<span class="aui-lozenge aui-lozenge-subtle aui-lozenge-moved">unapproved</span>') + '</td></tr>';
    }
    output += '</table>';
  }
  output += ((opt_data.signaturesHistory && opt_data.signaturesHistory.length == 0) ? '<span class=\'wz-signature-icon\'>There are no signatures yet.</span>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  com.izymes.workzone.pullrequest.overview.list.signatures.soyTemplateName = 'com.izymes.workzone.pullrequest.overview.list.signatures';
}
;
;
/* module-key = 'com.izymes.workzone:wz-pullrequest-overview-resources', location = '/pullrequest/common/templates/pullrequest-list-signatures.soy' */
// This file was automatically generated from pullrequest-list-signatures.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace com.izymes.workzone.pullrequest.list.
 */

if (typeof com == 'undefined') { var com = {}; }
if (typeof com.izymes == 'undefined') { com.izymes = {}; }
if (typeof com.izymes.workzone == 'undefined') { com.izymes.workzone = {}; }
if (typeof com.izymes.workzone.pullrequest == 'undefined') { com.izymes.workzone.pullrequest = {}; }
if (typeof com.izymes.workzone.pullrequest.list == 'undefined') { com.izymes.workzone.pullrequest.list = {}; }


com.izymes.workzone.pullrequest.list.signatures = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.signatureRequired) {
    output += '<button class=\'aui-button aui-button-subtle wz-signature-required\' data-pr-id=' + soy.$$escapeHtml(opt_data.pullRequest.id) + '><span class=\'wz-signature-icon\'>Sign</span></button>';
  } else {
    var param24 = '';
    if (opt_data.signaturesHistory && opt_data.signaturesHistory.length > 0) {
      param24 += '<table class="aui">';
      var signatureList28 = opt_data.signaturesHistory;
      var signatureListLen28 = signatureList28.length;
      for (var signatureIndex28 = 0; signatureIndex28 < signatureListLen28; signatureIndex28++) {
        var signatureData28 = signatureList28[signatureIndex28];
        param24 += '<tr><td>&nbsp;&nbsp;<span class="aui-icon aui-icon-small aui-iconfont-time"></span>&nbsp;' + soy.$$escapeHtml(signatureData28.dateTime) + '&nbsp;</td><td><b>' + soy.$$escapeHtml(signatureData28.user.displayName) + '</b></td><td>' + ((signatureData28.eventType == 'SIGNED') ? '&nbsp;<span class="aui-lozenge aui-lozenge-subtle aui-lozenge-success">signed</span>' : '&nbsp;<span class="aui-lozenge aui-lozenge-subtle aui-lozenge-moved">unapproved</span>') + '</td></tr>';
      }
      param24 += '</table>';
    }
    var param21 = '' + aui.dropdown2.contents({id: 'wz-signatures-dropdown' + opt_data.pullRequest.id, extraClasses: 'aui-style-default aui-dropdown2-tailed wz-signatures-dropdown', content: param24});
    output += bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel({iconClass: 'wz-signature-no-icon', linkText: '' + ((! opt_data.reviewersWithSignature.length) ? 'No Signatures' : ''), linkClass: 'wz-signatures-trigger aui-dropdown2-trigger wz-signature-icon', linkExtraAttributes: 'data-pr-id=' + opt_data.pullRequest.id + ' aria-owns=wz-signatures-dropdown' + opt_data.pullRequest.id + ' aria-haspopup=true title="Reviewers with Signature"', count: opt_data.reviewersWithSignature.length, extraClasses: 'wz-pr-list-signatures', extraContent: param21});
  }
  return output;
};
if (goog.DEBUG) {
  com.izymes.workzone.pullrequest.list.signatures.soyTemplateName = 'com.izymes.workzone.pullrequest.list.signatures';
}
;
;
/* module-key = 'com.izymes.workzone:wz-pullrequest-overview-resources', location = '/pullrequest/common/js/pullrequest-list-signatures-view.js' */
define("workzone/pullrequest/list/signatures/view",["aui","backbone","lodash","bitbucket/util/events"],function(a,e,b,c){var d=e.View.extend({initialize:function(f){this.approversList=f.approversList;this.signaturesList=f.signaturesList;this.reviewers=f.reviewers;this.pullRequest=f.pullRequest;a.$.when(this.approversList.deferred,this.signaturesList.deferred).done(b.bind(this.render,this),function(){});this.globalConfigSignaturesDisabled=a.$("#wz-global-config-disable-signatures").length>0},events:{"click .wz-signature-required":"signatureRequiredAction"},render:function(k,m){this.setElement(a.$(".wz-pr-list-signatures a[data-pr-id='"+this.pullRequest.id+"']").parent());var j=new e.Collection(k[0]);if(j&&j.length===0){a.$(".wz-pr-list-signatures a[data-pr-id='"+this.pullRequest.id+"']").empty();return false}var n=new e.Collection(m[0]);var f=b.filter(this.reviewers,function(q){return q.approved&&b.find(n.models,function(r){return r.get("user").name===q.user.name})});var l=a.$("header #current-user").attr("data-username");var p=b.find(j.models,function(q){return q.get("name")===l});var i=b.find(this.reviewers,function(q){return q.user.name===l});var g=false;if(i&&!i.approved||!i){g=true}var h=this.pullRequest.state==="OPEN"&&p&&g;var o=a.$(com.izymes.workzone.pullrequest.list.signatures({pullRequest:this.pullRequest,reviewersWithSignature:f,signaturesHistory:m[0].reverse(),signatureRequired:h,isPullRequestList:a.$(".pull-request-metadata").length===0}));this.$el.html(o);this.delegateEvents();c.trigger("workzone.events.displaySignaturesColumnHeader",{show:true})},signatureRequiredAction:function(){var f=a.$(".wz-signapprove");if(a.$(".pull-request-metadata").length===0){f=this.$el.parents("tr").find("a");window.location=f.attr("href");return}f.click()}});return d});;
;
/* module-key = 'com.izymes.workzone:wz-pullrequest-overview-resources', location = '/pullrequest/common/js/pullrequest-list-signatures.js' */
define("workzone/pullrequest/list/signatures",["aui","backbone"],function(a,c){window.Izymes=window.Izymes||{};Izymes.Workzone=Izymes.Workzone||{};Izymes.Workzone.PullReqList=Izymes.Workzone.PullReqList||{};var b=function(f){var k=require("workzone/pullrequest/common/signapprovers/collection");var g=require("workzone/pullrequest/common/signatures/collection");var e=require("workzone/pullrequest/list/signatures/view");var d=require("workzone/pullrequest/list/signatures/columnheader/view");var h=f.pullRequest.reviewers;var i=new k([],{pullReqId:f.pullRequest.id,projectKey:f.pullRequest.toRef.repository.project.key,repoSlug:f.pullRequest.toRef.repository.slug});var j=new g([],{pullReqId:f.pullRequest.id,projectKey:f.pullRequest.toRef.repository.project.key,repoSlug:f.pullRequest.toRef.repository.slug});new e({el:".wz-pr-list-signatures",approversList:i,signaturesList:j,reviewers:h,pullRequest:f.pullRequest});new d({el:"wz-pr-list-signatures-section"});return{pullRequest:f.pullRequest,reviewersWithSignature:[],signaturesHistory:[],signatureRequired:false,isPullRequestList:false}};Izymes.Workzone.PullReqList.getPullRequestSignatures=b});require("workzone/pullrequest/list/signatures");;
;
/* module-key = 'com.izymes.workzone:wz-pullrequest-overview-resources', location = '/pullrequest/common/js/pullrequest-signapprovers-collection.js' */
define("workzone/pullrequest/common/signapprovers/collection",["backbone","aui"],function(c,a){var b=c.Collection.extend({initialize:function(e,d){this.options=d||{};this.deferred=this.fetch()},url:function(){return a.contextPath()+"/rest/workzoneresource/latest/approvals/"+this.options.projectKey+"/"+this.options.repoSlug+"/"+this.options.pullReqId+"/approvers"}});return b});;
;
/* module-key = 'com.izymes.workzone:wz-pullrequest-overview-resources', location = '/pullrequest/common/js/pullrequest-list-signatures-columnheader-view.js' */
define("workzone/pullrequest/list/signatures/columnheader/view",["aui","backbone","lodash","bitbucket/util/events"],function(a,e,b,c){var d=e.View.extend({initialize:function(g){var f=this;c.on("workzone.events.displaySignaturesColumnHeader",function(){f.render(this)})},render:function(f){if(f.show){a.$(".wz-pr-list-signatures-section").empty().text("Signatures").append(" <span id='wz-config-approvals-help' class='aui-icon aui-icon-small aui-iconfont-help wz-help' title='"+"New! Digitally sign Pull Request Approvals."+"'></span>")}return this}});return d});;
;
/* module-key = 'com.izymes.workzone:wz-pullrequest-overview-resources', location = '/pullrequest/common/js/pullrequest-signatures-collection.js' */
define("workzone/pullrequest/common/signatures/collection",["backbone","aui"],function(c,a){var b=c.Collection.extend({initialize:function(e,d){this.options=d||{};this.deferred=this.fetch()},url:function(){return a.contextPath()+"/rest/workzoneresource/latest/approvals/"+this.options.projectKey+"/"+this.options.repoSlug+"/"+this.options.pullReqId+"/signatures"}});return b});;
;
/* module-key = 'com.izymes.workzone:wz-pr-overview-signatures-panel', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.izymes.workzone','key':'wz-pr-overview-signatures-panel','moduleKey':'wz-pr-overview-signatures-panel','completeModuleKey':'com.izymes.workzone:wz-pr-overview-signatures-panel','weight':2000.0,'context-provider':function(ctx) { return WebFragments._getValue((Izymes.Workzone.PullReqList.getPullRequestSignatures), ctx); },'params':{},'location':'bitbucket.pull-request.related-entities','view':function(ctx) { return WebFragments._getValue((com.izymes.workzone.pullrequest.list.signatures), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:tasks-overview-resources', location = '/static/bitbucket/internal/feature/tasks/tasks-overview/tasks-overview-panel.soy' */
// This file was automatically generated from tasks-overview-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.tasks.tasksOverview.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.tasks == 'undefined') { bitbucket.internal.feature.tasks = {}; }
if (typeof bitbucket.internal.feature.tasks.tasksOverview == 'undefined') { bitbucket.internal.feature.tasks.tasksOverview = {}; }


bitbucket.internal.feature.tasks.tasksOverview.overviewPanel = function(opt_data, opt_ignored) {
  return '<div class="plugin-section-separator"></div><div class="plugin-item plugin-item-task-count' + ((opt_data.openTaskCount == 0 && opt_data.resolvedTaskCount == 0) ? ' hidden' : '') + '"><a href="#" class="task-list-dialog-link">' + aui.icons.icon({useIconFont: true, icon: 'editor-task'}) + '<span class="replacement-placeholder" title="' + soy.$$escapeHtml('View all tasks (Type \x27Shift + T\x27)') + '">' + bitbucket.internal.feature.tasks.tasksOverview.taskCount(opt_data) + '</span></a></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.tasksOverview.overviewPanel.soyTemplateName = 'bitbucket.internal.feature.tasks.tasksOverview.overviewPanel';
}


bitbucket.internal.feature.tasks.tasksOverview.taskCount = function(opt_data, opt_ignored) {
  return '<span class="task-count" data-open="' + soy.$$escapeHtml(opt_data.openTaskCount) + '" data-resolved="' + soy.$$escapeHtml(opt_data.resolvedTaskCount) + '">' + ((opt_data.openTaskCount > 0) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('\x3cstrong\x3e{0}\x3c/strong\x3e open {0,choice,0#tasks|1#task|1\x3ctasks}',typeof (opt_data.openTaskCount) === 'number' ? opt_data.openTaskCount : soy.$$escapeHtml(opt_data.openTaskCount)))) : (opt_data.resolvedTaskCount > 0) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('All tasks resolved')) : '') + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.tasksOverview.taskCount.soyTemplateName = 'bitbucket.internal.feature.tasks.tasksOverview.taskCount';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:tasks-overview-resources', location = '/static/bitbucket/internal/feature/tasks/tasks-overview/tasks-overview-panel.js' */
define("bitbucket/internal/feature/tasks/tasks-overview/tasks-overview-panel",["module","exports","lodash","bitbucket/internal/widget/updating-section/updating-section"],function(d,a,e,f){function b(a,c){this.init.apply(this,arguments)}Object.defineProperty(a,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(e),h=babelHelpers.interopRequireDefault(f);b.prototype.init=function(a,c){var b=c.toEventStream();c={isVisibleProperty:c.map(function(a){return 0<a.resolvedTaskCount||0<a.openTaskCount}).toProperty()};
this._destroyCallbacks=[new h.default(a,b,bitbucket.internal.feature.tasks.tasksOverview.taskCount,c)]};b.prototype.destroy=function(){g.default.invokeMap(this._destroyCallbacks,"destroy")};a.default=b;d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:tasks-overview-resources', location = '/static/bitbucket/internal/feature/tasks/tasks-overview/tasks-counter.js' */
define("bitbucket/internal/feature/tasks/tasks-overview/tasks-counter","module exports bacon jquery lodash bitbucket/internal/feature/tasks/model/task-state bitbucket/internal/util/bacon bitbucket/internal/util/function".split(" "),function(h,e,k,l,m,n,p,q){function c(){this.init.apply(this,arguments)}Object.defineProperty(e,"__esModule",{value:!0});var r=babelHelpers.interopRequireDefault(k),t=babelHelpers.interopRequireDefault(l),f=babelHelpers.interopRequireDefault(m),d=babelHelpers.interopRequireDefault(n),
g=babelHelpers.interopRequireDefault(p),u=babelHelpers.interopRequireDefault(q);c.prototype.init=function(){var b=this;this._destroyCallbacks=[];f.default.bindAll(this,"_mapEventData");this._taskCounterStream=r.default.mergeAll(f.default.map(["created","resolved","reopened","deleted","failed-transition"],function(a){return g.default.events("bitbucket.internal.feature.pull-request-tasks."+a).map(b._mapEventData)})).merge(g.default.events("bitbucket.internal.feature.pull-request-tasks.set-counts"))};
c.prototype.emptyCounter=function(b){return{openTaskCount:0,resolvedTaskCount:0,pullRequestId:b&&b.pullRequestId||null,repositoryId:b&&b.repositoryId||null}};c.prototype._mapEventData=function(b){var a=this.emptyCounter(b.task);switch(b.task.state){case d.default.OPEN:a.openTaskCount=1;break;case d.default.RESOLVED:a.resolvedTaskCount=1}switch(b.task.lastState){case d.default.OPEN:a.openTaskCount=-1;break;case d.default.RESOLVED:a.resolvedTaskCount=-1}return a};c.prototype.countPropertyForPullRequest=
function(b,a){var c=this;a=this._taskCounterStream.merge(a).filter(function(a){return a.pullRequestId===b.pullRequestId&&a.repositoryId===b.repositoryId}).scan(this.emptyCounter(b),function(a,b){b.isReset&&(a=c.emptyCounter(b));a.openTaskCount+=b.openTaskCount;a.resolvedTaskCount+=b.resolvedTaskCount;return a});this._destroyCallbacks.push(a.onValue(t.default.noop));return a};c.prototype.destroy=function(){u.default.applyAll(this._destroyCallbacks)};e.default=c;h.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:tasks-overview-resources', location = '/static/bitbucket/internal/feature/tasks/tasks-overview/tasks-overview.js' */
define("bitbucket/internal/feature/tasks/tasks-overview/tasks-overview","module exports bacon jquery lodash bitbucket/util/events bitbucket/util/state bitbucket/internal/feature/tasks/tasks-overview/tasks-counter bitbucket/internal/feature/tasks/tasks-overview/tasks-overview-panel".split(" "),function(m,c,n,p,q,r,t,u,v){function b(){var a=g.default.getPullRequest().id,c=g.default.getRepository().id,b=w.default.fromPromise(_PageDataPlugin.ready("com.atlassian.bitbucket.server.bitbucket-web:pull-request-tasks-page-provider",
"bitbucket.layout.pullRequest")).map(function(b){return h.default.assign(b.hasOwnProperty("openTaskCount")?b:d.emptyCounter(),{pullRequestId:a,repositoryId:c})});e||(e=d.countPropertyForPullRequest({pullRequestId:a,repositoryId:c},b));(0,x.default)(".plugin-item-task-count").each(function(){f.push(new y.default(this,e))})}function z(a){"bitbucket.pull-request.nav.overview"===a.name&&b()}function A(a){"bitbucket.pull-request.nav.overview"===a.name&&(h.default.invokeMap(f,"destroy"),f=[])}Object.defineProperty(c,
"__esModule",{value:!0});var w=babelHelpers.interopRequireDefault(n),x=babelHelpers.interopRequireDefault(p),h=babelHelpers.interopRequireDefault(q),k=babelHelpers.interopRequireDefault(r),g=babelHelpers.interopRequireDefault(t),l=babelHelpers.interopRequireDefault(u),y=babelHelpers.interopRequireDefault(v),e,d,f=[];c.default={openTaskCountContext:function(a){return l.default.prototype.emptyCounter({pullRequestId:a.pullRequest.id,repositoryId:a.pullRequest.fromRef.repository.id})},onReady:function(){d=
new l.default;k.default.on("bitbucket.internal.page.pull-request.view.contextLoaded",z);k.default.on("bitbucket.internal.page.pull-request.view.contextUnloaded",A);b()}};m.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:tasks-overview-init-resource', location = '/static/bitbucket/internal/feature/tasks/tasks-overview/tasks-overview-init.js' */
jQuery(document).ready(function(){require("bitbucket/internal/feature/tasks/tasks-overview/tasks-overview").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-list-init-resource', location = '/static/bitbucket/internal/feature/tasks/task-list/task-list-init.js' */
jQuery(document).ready(function(){require("bitbucket/internal/feature/tasks/task-list/task-list").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-tasks-overview-panel', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'pull-request-tasks-overview-panel','moduleKey':'pull-request-tasks-overview-panel','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-tasks-overview-panel','weight':20.0,'context-provider':function(ctx) { return WebFragments._getValue((require('bitbucket/internal/feature/tasks/tasks-overview/tasks-overview').openTaskCountContext), ctx); },'params':{},'location':'bitbucket.pull-request.related-entities','view':function(ctx) { return WebFragments._getValue((bitbucket.internal.feature.tasks.tasksOverview.overviewPanel), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-contributing-guidelines:contributing-common', location = '/bitbucket/internal/model/contributing-guidelines/common.js' */
define("bitbucket/internal/model/contributing-guidelines/common",["exports","aui","bitbucket/util/navbuilder","bitbucket/util/server","bitbucket/internal/model/path"],function(c,f,g,h,k){Object.defineProperty(c,"__esModule",{value:!0});c.showContributingFileDialog=function(a){var b=l.default.dialog2(bitbucket.internal.contributing.common.contributingDialog());b.$el.on("click",".cancel-button",function(){return b.hide()});b.show();b.$el.find(".spinner").show().spin("large");a.done(function(a){b.$el.removeClass("loading");
b.$el.find(".aui-dialog2-content").html(a)})};c.getContributingGuidelinesData=function(a,b){return d.default.rest({url:e.default.rest().project(a.project.key).repo(a.slug).raw().path((new m.default(b)).toString()).withParams({markup:!0}).build(),type:"GET",dataType:"text"})};c.getContributingGuidelinesFilename=function(a){return d.default.rest({url:e.default.rest("contributing-guidelines").project(a.project.key).repo(a.slug).build(),statusCode:{"*":!1}})};var l=babelHelpers.interopRequireDefault(f),
e=babelHelpers.interopRequireDefault(g),d=babelHelpers.interopRequireDefault(h),m=babelHelpers.interopRequireDefault(k)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-contributing-guidelines:contributing-common', location = '/bitbucket/internal/model/contributing-guidelines/common.soy' */
// This file was automatically generated from common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.contributing.common.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.contributing == 'undefined') { bitbucket.internal.contributing = {}; }
if (typeof bitbucket.internal.contributing.common == 'undefined') { bitbucket.internal.contributing.common = {}; }


bitbucket.internal.contributing.common.contributingDialog = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2({id: 'contributing-guidelines-dialog', removeOnHide: true, size: 'large', titleText: 'Contribution guidelines', extraClasses: 'loading', content: '<div class="spinner"></div>', modal: true, footerActionContent: '' + aui.buttons.button({text: 'Close', type: 'link', extraClasses: 'cancel-button'})});
};
if (goog.DEBUG) {
  bitbucket.internal.contributing.common.contributingDialog.soyTemplateName = 'bitbucket.internal.contributing.common.contributingDialog';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-contributing-guidelines:pr-link-resources', location = '/bitbucket/internal/feature/contributing-guidelines/pull-request/pr-link.js' */
define("bitbucket/internal/feature/contributing-guidelines/pull-request/pr-link",["exports","jquery","bitbucket/util/state","bitbucket/internal/model/contributing-guidelines/common","bitbucket/internal/util/analytics"],function(a,e,f,c,g){Object.defineProperty(a,"__esModule",{value:!0});a.init=function(){var a=h.default.getRepository();(0,k.default)(".contributing-info-link").on("click",function(){b||(b=(0,c.getContributingGuidelinesFilename)(a));b.done(function(b){d||(d=(0,c.getContributingGuidelinesData)(a,
b));l.default.add("contributing.pullrequest.clicked");(0,c.showContributingFileDialog)(d)})})};var k=babelHelpers.interopRequireDefault(e),h=babelHelpers.interopRequireDefault(f),l=babelHelpers.interopRequireDefault(g),d=void 0,b=void 0});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-contributing-guidelines:pr-link-resources', location = '/bitbucket/internal/feature/contributing-guidelines/pull-request/pr-link.soy' */
// This file was automatically generated from pr-link.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.contributing.pr.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.contributing == 'undefined') { bitbucket.internal.contributing = {}; }
if (typeof bitbucket.internal.contributing.pr == 'undefined') { bitbucket.internal.contributing.pr = {}; }


bitbucket.internal.contributing.pr.link = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel({iconClass: 'aui-icon-small aui-iconfont-info', linkTooltip: 'View the contribution guidelines for this repository', linkClass: 'contributing-info-link', linkText: 'Contribution guidelines'});
};
if (goog.DEBUG) {
  bitbucket.internal.contributing.pr.link.soyTemplateName = 'bitbucket.internal.contributing.pr.link';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-contributing-guidelines:pr-link-resources', location = '/bitbucket/internal/feature/contributing-guidelines/pull-request/pr-link-init.js' */
jQuery(document).ready(function(){require("bitbucket/internal/feature/contributing-guidelines/pull-request/pr-link").init()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-contributing-guidelines:contributing-pr-panel', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-contributing-guidelines','key':'contributing-pr-panel','moduleKey':'contributing-pr-panel','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-contributing-guidelines:contributing-pr-panel','weight':100.0,'params':{},'location':'bitbucket.pull-request.links','view':function(ctx) { return WebFragments._getValue((bitbucket.internal.contributing.pr.link), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-learnmore', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'pull-request-learnmore','moduleKey':'pull-request-learnmore','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-learnmore','weight':20.0,'params':{},'location':'bitbucket.pull-request.links','view':function(ctx) { return WebFragments._getValue((bitbucket.internal.feature.pullRequest.overview.plugins.learnMore), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-overview', location = '/static/bitbucket/internal/feature/pull-request/overview/pull-request-view-overview.soy' */
// This file was automatically generated from pull-request-view-overview.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.viewOverview = function(opt_data, opt_ignored) {
  return bitbucket.internal.feature.pullRequest.overviewMetadata(opt_data) + '<h3>' + soy.$$escapeHtml('Activity') + '</h3>' + bitbucket.internal.feature.pullRequest.activity({id: 'pull-request-activity', currentUser: opt_data.currentUser, commentTips: opt_data.commentTips});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.viewOverview.soyTemplateName = 'bitbucket.internal.feature.pullRequest.viewOverview';
}


bitbucket.internal.feature.pullRequest.pullRequestSummary = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0} created a pull request',opt_data.authorNameContent));
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.pullRequestSummary.soyTemplateName = 'bitbucket.internal.feature.pullRequest.pullRequestSummary';
}


bitbucket.internal.feature.pullRequest.overviewMetadata = function(opt_data, opt_ignored) {
  var param15 = '' + widget.aui.group.item({content: '<h3>' + soy.$$escapeHtml('Details') + '</h3>' + widget.aui.group.group({extraClasses: 'details', content: '' + widget.aui.group.item({extraClasses: 'author-avatar-item', content: '' + bitbucket.internal.widget.avatar({person: opt_data.author, size: 'medium'})}) + widget.aui.group.item({content: '<p>' + bitbucket.internal.feature.pullRequest.pullRequestSummary({authorNameContent: '' + bitbucket.internal.widget.userLink({user: opt_data.author, extraClasses: 'author'})}) + bitbucket.internal.widget.date.shortAge({extraClasses: 'creation-date', date: opt_data.createdDate}) + '</p>' + ((opt_data.descriptionAsHtml) ? '<div class="description markup">' + soy.$$filterNoAutoescape(opt_data.descriptionAsHtml) + '</div>' : (opt_data.description) ? '<p class="description">' + soy.$$escapeHtml(opt_data.description) + '</p>' : '<p class="description no-description">' + soy.$$escapeHtml('No description for this pull request.') + ' <a class="add-description">' + soy.$$escapeHtml('Add one') + '</a></p>')})})});
  var param59 = '<div class="plugin-section-primary">';
  var panelHtmlList61 = WebFragments.getWebPanels('bitbucket.pull-request.related-entities',{pullRequest: opt_data.pullRequest}).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
  var panelHtmlListLen61 = panelHtmlList61.length;
  for (var panelHtmlIndex61 = 0; panelHtmlIndex61 < panelHtmlListLen61; panelHtmlIndex61++) {
    var panelHtmlData61 = panelHtmlList61[panelHtmlIndex61];
    param59 += soy.$$escapeHtml(panelHtmlData61);
  }
  param59 += '<div class="plugin-section-separator"></div></div><div class="plugin-section-secondary">';
  var panelHtmlList65 = WebFragments.getWebPanels('bitbucket.pull-request.links',{pullRequest: opt_data.pullRequest}).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
  var panelHtmlListLen65 = panelHtmlList65.length;
  for (var panelHtmlIndex65 = 0; panelHtmlIndex65 < panelHtmlListLen65; panelHtmlIndex65++) {
    var panelHtmlData65 = panelHtmlList65[panelHtmlIndex65];
    param59 += soy.$$escapeHtml(panelHtmlData65);
  }
  param59 += '</div>';
  var sectionList69 = WebFragments.getWebSections('bitbucket.pull-request.overview.sections',{pullRequest: opt_data.pullRequest});
  var sectionListLen69 = sectionList69.length;
  for (var sectionIndex69 = 0; sectionIndex69 < sectionListLen69; sectionIndex69++) {
    var sectionData69 = sectionList69[sectionIndex69];
    param59 += '<div class="' + soy.$$escapeHtml(sectionData69.key) + '">' + ((sectionData69.labelText) ? '<h4>' + soy.$$escapeHtml(sectionData69.labelText) + '</h4>' : '');
    var panelHtmlList78 = WebFragments.getWebPanels(sectionData69.location + '/' + sectionData69.key,{pullRequest: opt_data.pullRequest}).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
    var panelHtmlListLen78 = panelHtmlList78.length;
    for (var panelHtmlIndex78 = 0; panelHtmlIndex78 < panelHtmlListLen78; panelHtmlIndex78++) {
      var panelHtmlData78 = panelHtmlList78[panelHtmlIndex78];
      param59 += soy.$$escapeHtml(panelHtmlData78);
    }
    param59 += '</div>';
  }
  param15 += widget.aui.group.item({extraClasses: 'summary-panel', content: param59});
  var output = '' + widget.aui.group.group({content: param15});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.overviewMetadata.soyTemplateName = 'bitbucket.internal.feature.pullRequest.overviewMetadata';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-commits', location = '/static/bitbucket/internal/feature/pull-request/commits/pull-request-commits.soy' */
// This file was automatically generated from pull-request-commits.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.commits = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.commits.commitsTableImpl({repository: opt_data.repository, commitPage: opt_data.commitPage, pullRequest: opt_data.pullRequest, tableId: 'pull-request-commits-table', webSections: opt_data.commitsTableWebSections});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.commits.soyTemplateName = 'bitbucket.internal.feature.pullRequest.commits';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-commits', location = '/static/bitbucket/internal/feature/pull-request/commits/pull-request-commits.js' */
define("bitbucket/internal/feature/pull-request/commits/pull-request-commits","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/commits/commits-table bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/history".split(" "),function(k,b,l,m,n,p,q,r,t,u){function v(){return w.default.currentRepo().pullRequest(g).commits()}Object.defineProperty(b,"__esModule",{value:!0});var x=babelHelpers.interopRequireDefault(l),d=babelHelpers.interopRequireDefault(m),
y=babelHelpers.interopRequireDefault(n),w=babelHelpers.interopRequireDefault(p),z=babelHelpers.interopRequireDefault(q),A=babelHelpers.interopRequireDefault(r),h=babelHelpers.interopRequireDefault(t),B=babelHelpers.interopRequireDefault(u),f=void 0,g=void 0,a=void 0;b.default={init:function(c){f=[];g=c.pullRequest.getId();var e=(0,d.default)(bitbucket.internal.feature.pullRequest.commits({repository:c.repository.toJSON(),commitsTableWebSections:c.commitsTableWebSections})),b=(0,d.default)("\x3cdiv /\x3e").append(e);
a=new z.default(v,{target:e,webSections:c.commitsTableWebSections,allCommitsFetchedMessage:"No more commits in pull request"});(0,d.default)(c.el).append(a.$spinner);e=a.init({suspended:!0}).done(function(){(0,d.default)(c.el).prepend(b.children());a.resume()});a.bindKeyboardShortcuts();f.push(h.default.chainWith((0,d.default)(document)).on("click",".commits-table a.commitid",function(a){var b=(0,d.default)(a.target).closest("tr").attr("data-commit-json");h.default.trigger("bitbucket.internal.feature.pullRequest.commit.open",
this,{commitJSON:b?JSON.parse(b):null,pullRequest:c.pullRequest});b&&A.default.openInSameTab(a)&&(B.default.pushState({commit:JSON.parse(b)},null,a.target.href),a.preventDefault())}));return e},reset:function(){y.default.invokeMap(f,"destroy");a.destroy();a=null}};k.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-commit-diff-blame', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'pull-request-commit-diff-blame','moduleKey':'pull-request-commit-diff-blame','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-commit-diff-blame','weight':20.0,'condition':function(ctx) { return WebFragments._getValue((function(ctx) { return ctx.handlerID === 'diff-text-unified' }), ctx); },'params':{},'styleClass':WebFragments._formatI18n(null, null, 'file-blame'),'location':'bitbucket.pull-request.commit.diff.toolbar.secondary','linkText':WebFragments._formatI18n("Blame", 'bitbucket.web.file.content.sourceview.showblame', '')});;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-issue-overview-button-commit', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'ch.mibex.stash.sonar4stash','key':'sonar4stash-issue-overview-button-commit','moduleKey':'sonar4stash-issue-overview-button-commit','completeModuleKey':'ch.mibex.stash.sonar4stash:sonar4stash-issue-overview-button-commit','weight':20.0,'condition':function(ctx) { return WebFragments._getValue((require('mibexsoftware/sonar4stash-issue-overview').shouldShowIssueOverviewButtonCondition), ctx); },'params':{'iconClass':WebFragments._formatI18n(null, null, 'aui-icon aui-icon-small sonar-issue-overview-icon')},'styleClass':WebFragments._formatI18n(null, null, 'aui-button-subtle sonar4stash-button-trigger'),'location':'bitbucket.pull-request.commit.diff.toolbar.secondary'});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-commit-add-file-comment', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'pull-request-commit-add-file-comment','moduleKey':'pull-request-commit-add-file-comment','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-commit-add-file-comment','weight':10.0,'condition':function(ctx) { return WebFragments._getValue((function(ctx) { return ctx.commentMode === 'create-new' }), ctx); },'params':{'iconClass':WebFragments._formatI18n(null, null, 'aui-icon aui-icon-small aui-iconfont-add-comment')},'tooltip':WebFragments._formatI18n("Add a file comment (Type \u0027m\u0027)", 'bitbucket.web.comment.filecomments.add', ''),'styleClass':WebFragments._formatI18n(null, null, 'aui-button-subtle add-file-comment-trigger'),'location':'bitbucket.pull-request.commit.diff.toolbar.secondary'});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-add-file-comment', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'pull-request-add-file-comment','moduleKey':'pull-request-add-file-comment','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-add-file-comment','weight':10.0,'condition':function(ctx) { return WebFragments._getValue((function(ctx) { return ctx.commentMode === 'create-new' }), ctx); },'params':{'iconClass':WebFragments._formatI18n(null, null, 'aui-icon aui-icon-small aui-iconfont-add-comment')},'tooltip':WebFragments._formatI18n("Add a file comment (Type \u0027m\u0027)", 'bitbucket.web.comment.filecomments.add', ''),'styleClass':WebFragments._formatI18n(null, null, 'aui-button-subtle add-file-comment-trigger'),'location':'bitbucket.pull-request.diff.toolbar.secondary'});;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-issue-overview-button', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'ch.mibex.stash.sonar4stash','key':'sonar4stash-issue-overview-button','moduleKey':'sonar4stash-issue-overview-button','completeModuleKey':'ch.mibex.stash.sonar4stash:sonar4stash-issue-overview-button','weight':20.0,'condition':function(ctx) { return WebFragments._getValue((require('mibexsoftware/sonar4stash-issue-overview').shouldShowIssueOverviewButtonCondition), ctx); },'params':{'iconClass':WebFragments._formatI18n(null, null, 'aui-icon aui-icon-small sonar-issue-overview-icon')},'styleClass':WebFragments._formatI18n(null, null, 'aui-button-subtle sonar4stash-button-trigger'),'location':'bitbucket.pull-request.diff.toolbar.secondary'});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-diff-blame', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'pull-request-diff-blame','moduleKey':'pull-request-diff-blame','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-diff-blame','weight':20.0,'condition':function(ctx) { return WebFragments._getValue((function(ctx) { return ctx.handlerID === 'diff-text-unified' }), ctx); },'params':{},'styleClass':WebFragments._formatI18n(null, null, 'file-blame'),'location':'bitbucket.pull-request.diff.toolbar.secondary','linkText':WebFragments._formatI18n("Blame", 'bitbucket.web.file.content.sourceview.showblame', '')});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:icon-soy-templates', location = '/static/bitbucket/internal/images/icons/icons.soy' */
// This file was automatically generated from icons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.images.icons.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.images == 'undefined') { bitbucket.internal.images = {}; }
if (typeof bitbucket.internal.images.icons == 'undefined') { bitbucket.internal.images.icons = {}; }


bitbucket.internal.images.icons.createRepo = function(opt_data, opt_ignored) {
  return '<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="#B1B1B1" fill-rule="evenodd"><path d="M13.272 13.272h9.344a1.387 1.387 0 0 0-.01-2.772h-9.334V9.337 1.384a1.387 1.387 0 0 0-2.772.01V10.5H1.394C.617 10.5 0 11.12 0 11.886c0 .771.618 1.386 1.38 1.386h9.16l-.04 9.334c0 .777.62 1.394 1.386 1.394a1.38 1.38 0 0 0 1.386-1.38v-6.733-2.637z"/></g></svg>';
};
if (goog.DEBUG) {
  bitbucket.internal.images.icons.createRepo.soyTemplateName = 'bitbucket.internal.images.icons.createRepo';
}


bitbucket.internal.images.icons.importRepo = function(opt_data, opt_ignored) {
  return '<svg width="21" height="23" viewBox="0 0 21 23" xmlns="http://www.w3.org/2000/svg"><g fill="#B1B1B1" fill-rule="evenodd"><path d="M7 0h9.778c1.167 0 2.162.421 2.986 1.263.824.843 1.236 1.86 1.236 3.05v11.5a4.23 4.23 0 0 1-.837 2.566 4.24 4.24 0 0 1-2.138 1.566 4.192 4.192 0 0 1-1.504 2.201c-.74.57-1.58.854-2.521.854H4.2c-1.16 0-2.15-.421-2.97-1.263-.82-.843-1.23-1.86-1.23-3.05v-11.5C0 6.223.277 5.36.831 4.6a4.084 4.084 0 0 1 2.144-1.544A4.192 4.192 0 0 1 4.479.854 4.028 4.028 0 0 1 7 0zm12.578 15.813v-11.5c0-.787-.273-1.462-.82-2.028-.547-.565-1.207-.848-1.98-.848H7c-.518 0-.99.132-1.416.394-.427.262-.764.61-1.012 1.044H14c1.16 0 2.15.421 2.97 1.263.82.843 1.23 1.86 1.23 3.05v11.118a2.876 2.876 0 0 0 1.006-1.056c.248-.442.372-.92.372-1.438zm-2.756 2.897V7.21c0-.794-.275-1.471-.826-2.033A2.693 2.693 0 0 0 14 4.335H4.222c-.773 0-1.433.28-1.98.842a2.808 2.808 0 0 0-.82 2.033v11.5c0 .794.273 1.471.82 2.033a2.663 2.663 0 0 0 1.98.842H14c.78 0 1.446-.28 1.996-.842.55-.562.826-1.24.826-2.033z"/><path d="M9.873 17.853c-.356.424-.93.43-1.292 0l-3.734-4.426c-.357-.424-.193-.767.307-.767H8.222V6.652h1.95v6.008h3.063c.555 0 .722.337.36.767l-3.722 4.426z"/></g></svg>';
};
if (goog.DEBUG) {
  bitbucket.internal.images.icons.importRepo.soyTemplateName = 'bitbucket.internal.images.icons.importRepo';
}


bitbucket.internal.images.icons.logo = function(opt_data, opt_ignored) {
  return '<svg width="42" height="48" viewBox="0 0 42 48" xmlns="http://www.w3.org/2000/svg"><title>logo-BB</title><g fill="#205081" fill-rule="evenodd"><path d="M21 0C9.472 0 .002 3.063.002 6.942c0 1.02 2.47 15.517 3.5 21.233.411 2.654 7.205 6.33 17.498 6.33 10.293 0 16.88-3.676 17.498-6.33 1.03-5.716 3.5-20.212 3.5-21.233C41.792 3.062 32.528 0 21 0zm0 29.809c-3.706 0-6.588-2.859-6.588-6.534s2.882-6.533 6.588-6.533 6.588 2.858 6.588 6.533c0 3.471-2.882 6.534-6.588 6.534zm0-20.826c-7.411 0-13.381-1.225-13.381-2.858S13.589 3.267 21 3.267c7.411 0 13.381 1.225 13.381 2.858S28.411 8.983 21 8.983z"/><path d="M36.194 33.688c-.412 0-.618.204-.618.204s-5.147 4.083-14.41 4.083c-9.264 0-14.411-4.083-14.411-4.083s-.412-.204-.618-.204c-.411 0-.823.204-.823.817v.204c.823 4.287 1.441 7.35 1.441 7.758.618 3.063 6.794 5.513 14.205 5.513 7.41 0 13.587-2.45 14.204-5.513 0-.408.618-3.47 1.441-7.758v-.204c.206-.409 0-.817-.411-.817z"/><ellipse cx="21" cy="23.071" rx="3.294" ry="3.267"/></g></svg>';
};
if (goog.DEBUG) {
  bitbucket.internal.images.icons.logo.soyTemplateName = 'bitbucket.internal.images.icons.logo';
}


bitbucket.internal.images.icons.allCommits = function(opt_data, opt_ignored) {
  return '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="15" viewBox="0 0 12 14"><path    style="fill:#999" d="M13,11.91a2.47,2.47,0,0,0,.32-0.27A2.22,2.22,0,0,0,14,10V2.31A2.22,2.22,0,0,0,13.32.68,2.22,2.22,0,0,0,11.69,0H6.31A2.22,2.22,0,0,0,4.68.68,2.47,2.47,0,0,0,4.4,1H5.5A1.48,1.48,0,0,1,6.31.77h5.38a1.49,1.49,0,0,1,1.08.45,1.48,1.48,0,0,1,.45,1.09V10a1.47,1.47,0,0,1-.23.81v1.09Z" transform="translate(-2 0)"/><path    style="fill:#999" d="M4.31,2H9.69a2.22,2.22,0,0,1,1.63.68A2.22,2.22,0,0,1,12,4.31V12a2.31,2.31,0,0,1-2.31,2.31H4.31a2.22,2.22,0,0,1-1.63-.68A2.22,2.22,0,0,1,2,12V4.31a2.22,2.22,0,0,1,.68-1.63A2.22,2.22,0,0,1,4.31,2Zm6.92,10V4.31A1.54,1.54,0,0,0,9.69,2.77H4.31A1.54,1.54,0,0,0,2.77,4.31V12a1.54,1.54,0,0,0,1.54,1.54H9.69A1.54,1.54,0,0,0,11.23,12Z" transform="translate(-2 0)"/><polygon style="fill:#999" points="4.5 4 5.5 4 5.5 6.4 5.5 7 4.5 7 4.5 4" /><polygon style="fill:#999" points="4.5 9 5.5 9 5.5 11.4 5.5 12 4.5 12 4.5 9"/><path    style="fill:#999" d="M7,10A2,2,0,1,1,9,8,2,2,0,0,1,7,10ZM7,7A1,1,0,1,0,8,8,1,1,0,0,0,7,7Z" transform="translate(-2 0)"/></svg>';
};
if (goog.DEBUG) {
  bitbucket.internal.images.icons.allCommits.soyTemplateName = 'bitbucket.internal.images.icons.allCommits';
}


bitbucket.internal.images.icons.commit = function(opt_data, opt_ignored) {
  return '<svg xmlns="http://www.w3.org/2000/svg" width="7" height="15" viewBox="0 0 7 15"><path style="fill:#999" d="M11.07,7.39a3.5,3.5,0,0,0-3-3.45V0h-1V3.94a3.48,3.48,0,0,0,0,6.9V15h1V10.84A3.5,3.5,0,0,0,11.07,7.39Zm-3.5,2.5a2.5,2.5,0,1,1,2.5-2.5A2.5,2.5,0,0,1,7.57,9.89Z" transform="translate(-4.07 0)"/></svg>';
};
if (goog.DEBUG) {
  bitbucket.internal.images.icons.commit.soyTemplateName = 'bitbucket.internal.images.icons.commit';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-history', location = '/static/bitbucket/internal/feature/pull-request/pull-request-history/pull-request-history.js' */
define("bitbucket/internal/feature/pull-request/pull-request-history/pull-request-history","module exports jquery lodash bitbucket/internal/feature/file-content/diff-view-type bitbucket/internal/util/client-storage bitbucket/internal/util/events".split(" "),function(q,e,r,k,t,u,v){function l(a){f(a.$tree)}function f(a){a.find(".jstree-leaf").each(function(a,g){a=(0,w.default)(g);m(a).isViewed&&a.addClass("viewed")})}function n(a){var b=m(a),g=b.update;b.isViewed||(h.default.setItem(d,g(c)),a.addClass("viewed"))}
function m(a){var b=a.data("diffViewType"),g=a.data("path").toString,d=g+":contentIds",e=a.data("contentId");a=a.data("fromContentId");var f=e+":"+a;a=void 0;a=p.default.EFFECTIVE===b?c[g]===e:c[d]&&(0,k.includes)(c[d],f);return{isViewed:a,update:function(a){p.default.EFFECTIVE===b&&(a[g]=e);var c=a[d]||[];(0,k.includes)(c,f)||c.push(f);a[d]=c;return a}}}Object.defineProperty(e,"__esModule",{value:!0});var w=babelHelpers.interopRequireDefault(r),p=babelHelpers.interopRequireDefault(t),h=babelHelpers.interopRequireDefault(u),
b=babelHelpers.interopRequireDefault(v),d=void 0,c=void 0;e.default={init:function(){d=h.default.buildKey("history","pull-request");c=h.default.getItem(d)||{};b.default.on("bitbucket.internal.feature.commit.difftree.treeInitialised",l);b.default.on("bitbucket.internal.feature.commit.difftree.nodeOpening",f);b.default.on("bitbucket.internal.feature.commit.difftree.selectedNodeChanged",n)},reset:function(){c=d=null;b.default.off("bitbucket.internal.feature.commit.difftree.treeInitialised",l);b.default.off("bitbucket.internal.feature.commit.difftree.nodeOpening",
f);b.default.off("bitbucket.internal.feature.commit.difftree.selectedNodeChanged",n)}};q.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:cache-util', location = '/static/bitbucket/internal/util/cache.js' */
define("bitbucket/internal/util/cache",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});var c=a.Persist={ONCE:"ONCE",FOREVER:"FOREVER"},d=function(){function a(){babelHelpers.classCallCheck(this,a);this.entries={}}babelHelpers.createClass(a,[{key:"set",value:function(b,a){this.entries[b]={value:a,persistence:2<arguments.length&&void 0!==arguments[2]?arguments[2]:c.FOREVER}}},{key:"get",value:function(b){if(this.has(b)){var a=this.entries[b];a.persistence===c.ONCE&&delete this.entries[b];
return a.value}}},{key:"has",value:function(a){return this.entries.hasOwnProperty(a)}},{key:"clear",value:function(a){return arguments.length?this.has(a)?(delete this.entries[a],!0):!1:(this.entries={},!0)}}]);return a}();a.default=d});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:request-change', location = '/static/bitbucket/internal/feature/file-content/request-change.js' */
define("bitbucket/internal/feature/file-content/request-change","exports bitbucket/util/navbuilder bitbucket/internal/model/commit-range bitbucket/internal/model/revision bitbucket/internal/util/ajax bitbucket/internal/util/cache".split(" "),function(b,q,r,t,u,l){function e(a){var b=a.pullRequest,e=a.start,g=a.limit,h=m.default.rest().currentRepo().pullRequest(b).changes().withParams({start:e,limit:g}),d=h.withParams({changeScope:"unreviewed"}).build();if(c.has(d))return c.get(d);var f=k.default.rest({url:d,
statusCode:k.default.ignore404WithinRepository()}).fail(function(){c.clear(d)});f.done(function(a){if(a.properties&&a.properties.changeScope&&"ALL"===a.properties.changeScope){var d=h.withParams({pullRequestId:b.id}).build();c.set(d,f,l.Persist.ONCE)}a=m.default.rest().currentRepo().changes(new v.default({untilRevision:new n.default({id:a.toHash}),sinceRevision:new n.default({id:a.fromHash})})).withParams({start:e,limit:g,pullRequestId:b.id}).build();c.set(a,f)});c.set(d,f);return f}function g(a){if(c.has(a))return c.get(a);
var b=k.default.rest({url:a,statusCode:k.default.ignore404WithinRepository()}).fail(function(){c.clear(a)});c.set(a,b);return b}function h(){c.clear()}function p(a){c.clear(a)}Object.defineProperty(b,"__esModule",{value:!0});b.getUnreviewedChangesRequest=e;b.getChangesRequestFromUrl=g;b.reset=h;b.invalidateCacheForUrl=p;var m=babelHelpers.interopRequireDefault(q),v=babelHelpers.interopRequireDefault(r),n=babelHelpers.interopRequireDefault(t),k=babelHelpers.interopRequireDefault(u),c=new (babelHelpers.interopRequireDefault(l).default);
b.default={getUnreviewedChangesRequest:e,getChangesRequestFromUrl:g,reset:h,invalidateCacheForUrl:p}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:jstree', location = '/static/bower/jstree/jquery.jstree.js' */
(function(){if(!jQuery||!jQuery.jstree){var r=!1,t=!1,u=!1;(function(b){b.vakata={};b.vakata.css={get_css:function(a,b,c){a=a.toLowerCase();var f=c.cssRules||c.rules,d=0;do{if(f.length&&d>f.length+5)break;if(f[d].selectorText&&f[d].selectorText.toLowerCase()==a)return!0===b?(c.removeRule&&c.removeRule(d),c.deleteRule&&c.deleteRule(d),!0):f[d]}while(f[++d]);return!1},add_css:function(a,c){if(b.jstree.css.get_css(a,!1,c))return!1;c.insertRule?c.insertRule(a+" { }",0):c.addRule(a,null,0);return b.vakata.css.get_css(a)},
remove_css:function(a,c){return b.vakata.css.get_css(a,!0,c)},add_sheet:function(a){var f=!1,c=!0;if(a.str)return a.title&&(f=b("style[id\x3d'"+a.title+"-stylesheet']")[0]),f?c=!1:(f=document.createElement("style"),f.setAttribute("type","text/css"),a.title&&f.setAttribute("id",a.title+"-stylesheet")),f.styleSheet?c?(document.getElementsByTagName("head")[0].appendChild(f),f.styleSheet.cssText=a.str):f.styleSheet.cssText=f.styleSheet.cssText+" "+a.str:(f.appendChild(document.createTextNode(a.str)),
document.getElementsByTagName("head")[0].appendChild(f)),f.sheet||f.styleSheet;if(a.url)if(document.createStyleSheet)try{document.createStyleSheet(a.url)}catch(h){}else return f=document.createElement("link"),f.rel="stylesheet",f.type="text/css",f.media="all",f.href=a.url,document.getElementsByTagName("head")[0].appendChild(f),f.styleSheet}};var a=[],c=-1,e={},d={};b.fn.jstree=function(f){var c="string"==typeof f,d=Array.prototype.slice.call(arguments,1),h=this;if(c){if("_"==f.substring(0,1))return h;
this.each(function(){var c=a[b.data(this,"jstree_instance_id")];c=c&&b.isFunction(c[f])?c[f].apply(c,d):c;if("undefined"!==typeof c&&(0===f.indexOf("is_")||!0!==c&&!1!==c))return h=c,!1})}else this.each(function(){var c=b.data(this,"jstree_instance_id"),g=[],k=f?b.extend({},!0,f):{},h=b(this),p=!1,v=[];g=g.concat(d);h.data("jstree")&&g.push(h.data("jstree"));k=g.length?b.extend.apply(null,[!0,k].concat(g)):k;"undefined"!==typeof c&&a[c]&&a[c].destroy();c=parseInt(a.push({}),10)-1;b.data(this,"jstree_instance_id",
c);k.plugins=b.isArray(k.plugins)?k.plugins:b.jstree.defaults.plugins.slice();k.plugins.unshift("core");k.plugins=k.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");p=b.extend(!0,{},b.jstree.defaults,k);p.plugins=k.plugins;b.each(e,function(a,f){-1===b.inArray(a,p.plugins)?(p[a]=null,delete p[a]):v.push(a)});p.plugins=v;a[c]=new b.jstree._instance(c,b(this).addClass("jstree jstree-"+c),p);b.each(a[c]._get_settings().plugins,function(b,
f){a[c].data[f]={}});b.each(a[c]._get_settings().plugins,function(b,f){e[f]&&e[f].__init.apply(a[c])});setTimeout(function(){a[c]&&a[c].init()},0)});return h};b.jstree={defaults:{plugins:[]},_focused:function(){return a[c]||null},_reference:function(f){if(a[f])return a[f];var c=b(f);c.length||"string"!==typeof f||(c=b("#"+f));return c.length?a[c.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(a,c,d){this.data={core:{}};this.get_settings=function(){return b.extend(!0,
{},d)};this._get_settings=function(){return d};this.get_index=function(){return a};this.get_container=function(){return c};this.get_container_ul=function(){return c.children("ul:eq(0)")};this._set_settings=function(a){d=b.extend(!0,{},d,a)}},_fn:{},plugin:function(a,c){c=b.extend({},{__init:b.noop,__destroy:b.noop,_fn:{},defaults:!1},c);e[a]=c;b.jstree.defaults[a]=c.defaults;b.each(c._fn,function(f,c){c.plugin=a;c.old=b.jstree._fn[f];b.jstree._fn[f]=function(){var a=c,d=Array.prototype.slice.call(arguments);
var e=new b.Event("before.jstree");var g=!1;if(!0!==this.data.core.locked||"unlock"===f||"is_locked"===f){do{if(a&&a.plugin&&-1!==b.inArray(a.plugin,this._get_settings().plugins))break;a=a.old}while(a);if(a){if(0===f.indexOf("_"))e=a.apply(this,d);else{e=this.get_container().triggerHandler(e,{func:f,inst:this,args:d,plugin:a.plugin});if(!1===e)return;"undefined"!==typeof e&&(d=e);e=a.apply(b.extend({},this,{__callback:function(a){this.get_container().triggerHandler(f+".jstree",{inst:this,args:d,rslt:a,
rlbk:g})},__rollback:function(){return g=this.get_rollback()},__call_old:function(b){return a.old.apply(this,b?Array.prototype.slice.call(arguments,1):d)}}),d)}return e}}};b.jstree._fn[f].old=c.old;b.jstree._fn[f].plugin=a})},rollback:function(f){f&&(b.isArray(f)||(f=[f]),b.each(f,function(b,f){a[f.i].set_rollback(f.h,f.d)}))}};b.jstree._fn=b.jstree._instance.prototype={};b(function(){var a=navigator.userAgent.toLowerCase(),c=(a.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],d=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree \x3e ul \x3e li { margin-left:0px; } .jstree-rtl \x3e ul \x3e li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a \x3e ins { height:16px; width:16px; } .jstree a \x3e .jstree-icon { margin-right:3px; } .jstree-rtl a \x3e .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open \x3e ul { display:block; } li.jstree-closed \x3e ul { display:none; } ";
if(/msie/.test(a)&&6==parseInt(c,10)){r=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(h){}d+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(a)&&
7==parseInt(c,10)&&(t=!0,d+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(a)&&/mozilla/.test(a)&&1.9>parseFloat(c,10)&&(u=!0,d+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");b.vakata.css.add_sheet({str:d,title:"jstree"})});b.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("\x3cul\x3e\x3cli class\x3d'jstree-last jstree-leaf'\x3e\x3cins\x3e\x26#160;\x3c/ins\x3e\x3ca class\x3d'jstree-loading' href\x3d'#'\x3e\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e"+
this._get_string("loading")+"\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li \x3e ins","click.jstree",b.proxy(function(a){a=b(a.target);this.toggle_node(a)},this)).bind("mousedown.jstree",b.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(a){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){a=
window.getSelection();try{a.removeAllRanges(),a.collapse()}catch(g){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",b.proxy(function(a,c){a=this._get_node(c.rslt.obj);var f=this;-1===a&&(a=this.get_container_ul());a.length&&a.find("li").each(function(){var a=b(this);a.data("jstree")&&b.each(a.data("jstree"),function(c,d){f.data[c]&&b.isFunction(f["_"+c+"_notify"])&&f["_"+c+"_notify"].call(f,a,d)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
b.proxy(function(a,c){a=this._get_node(c.rslt.obj);var f=this;-1===a&&(a=this.get_container_ul());a.length&&a.find("li.jstree-open:not(:has(ul))").each(function(){f.load_node(this,b.noop,b.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var f,d=this.get_index(),k=this._get_settings(),h=this;b.each(k.plugins,function(a,b){try{e[b].__destroy.apply(h)}catch(m){}});this.__callback();if(this.is_focused())for(f in a)if(a.hasOwnProperty(f)&&
f!=d){a[f].set_focus();break}d===c&&(c=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^\x3d'jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});b(document).unbind(".jstree-"+d).undelegate(".jstree-"+d);a[d]=null;delete a[d]},_core_notify:function(a,b){b.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(a){var c=this,f=!0,d=[],e=[];a||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=b.map(b.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=b.map(b.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(b.each(this.data.core.to_load,function(a,c){if("#"==c)return!0;b(c).length?d.push(c):e.push(c)}),d.length&&(this.data.core.to_load=e,b.each(d,function(a,b){c._is_loaded(b)||(c.load_node(b,function(){c.reload_nodes(!0)},function(){c.reload_nodes(!0)}),
f=!1)})));this.data.core.to_open.length&&b.each(this.data.core.to_open,function(a,b){c.open_node(b,!1,!0)});f&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){c.__callback({},c)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var a=this;this.data.core.to_open.length&&b.each(this.data.core.to_open,function(b,c){a.open_node(c,!1,!0)});this.__callback({})},refresh:function(a){var b=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||
(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){b.__callback({obj:a});b.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var a=b.jstree._focused();a&&a.unset_focus();this.get_container().addClass("jstree-focused");c=this.get_index();this.__callback()}},is_focused:function(){return c==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),c=
-1);this.__callback()},_get_node:function(a){var c=b(a,this.get_container());if(c.is(".jstree")||-1==a)return-1;c=c.closest("li",this.get_container());return c.length?c:!1},_get_next:function(a,b){a=this._get_node(a);return-1===a?this.get_container().find("\x3e ul \x3e li:first-child"):a.length?b?0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:eq(0)"):0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):a.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(a,
b){a=this._get_node(a);if(-1===a)return this.get_container().find("\x3e ul \x3e li:last-child");if(!a.length)return!1;if(b)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:last");return a}a=a.parentsUntil(".jstree","li:eq(0)");return a.length?a:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:eq(0)");return a.length?a:
-1},_get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li"):a.length?a.children("ul:eq(0)").children("li"):!1},get_path:function(a,b){var c=[],d=this;a=this._get_node(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){c.push(b?this.id:d.get_text(this))});c.reverse();c.push(b?a.attr("id"):this.get_text(a));return c},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=
this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,b,c){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return b&&
b.call(),!1;var d=c||r?0:this._get_settings().core.animation,f=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){f.open_node(this,!1,!0)}),d&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),d?a.children("ul").stop(!0,!0).slideDown(d,function(){this.style.display="";f.after_open(a)}):f.after_open(a),this.__callback({obj:a}),b&&b.call()):
(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){f.open_node(a,b,c)},b))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,b){a=this._get_node(a);b=b||r?0:this._get_settings().core.animation;var c=this;if(!a.length||!a.hasClass("jstree-open"))return!1;b&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");b?a.children("ul").stop(!0,!0).slideUp(b,function(){this.style.display="";c.after_close(a)}):
c.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,b,c){(a=a?this._get_node(a):-1)&&-1!==a||(a=this.get_container_ul());c?a=a.find("li.jstree-closed"):(c=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").andSelf():a.find("li.jstree-closed"));var d=this;a.each(function(){var a=this;
d._is_loaded(this)?d.open_node(this,!1,!b):d.open_node(this,function(){d.open_all(a,b,c)},!b)});0===c.find("li.jstree-closed").length&&this.__callback({obj:c})},close_all:function(a,b){var c=this;(a=a?this._get_node(a):this.get_container())&&-1!==a||(a=this.get_container_ul());a.find("li.jstree-open").andSelf().each(function(){c.close_node(this,!b)});this.__callback({obj:a})},clean_node:function(a){a=a&&-1!=a?b(a):this.get_container_ul();a=a.is("li")?a.find("li").andSelf():a.find("li");a.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
a.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,b){this.get_container().empty().append(a);this.data=b;this.__callback()},load_node:function(a,b,c){this.__callback({obj:a})},_is_loaded:function(a){return!0},create_node:function(a,c,d,e,l){a=this._get_node(a);c="undefined"===typeof c?
"last":c;var f=b("\x3cli /\x3e"),g=this._get_settings().core;if(-1!==a&&!a.length)return!1;if(!l&&!this._is_loaded(a))return this.load_node(a,function(){this.create_node(a,c,d,e,!0)}),!1;this.__rollback();"string"===typeof d&&(d={data:d});d||(d={});d.attr&&f.attr(d.attr);d.metadata&&f.data(d.metadata);d.state&&f.addClass("jstree-"+d.state);d.data||(d.data=this._get_string("new_node"));if(!b.isArray(d.data)){var k=d.data;d.data=[];d.data.push(k)}b.each(d.data,function(a,c){k=b("\x3ca /\x3e");b.isFunction(c)&&
(c=c.call(this,d));if("string"==typeof c)k.attr("href","#")[g.html_titles?"html":"text"](c);else c.attr||(c.attr={}),c.attr.href||(c.attr.href="#"),k.attr(c.attr)[g.html_titles?"html":"text"](c.title),c.language&&k.addClass(c.language);k.prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e");!c.icon&&d.icon&&(c.icon=d.icon);c.icon&&(-1===c.icon.indexOf("/")?k.children("ins").addClass(c.icon):k.children("ins").css("background","url('"+c.icon+"') center center no-repeat"));f.append(k)});
f.prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e");-1===a&&(a=this.get_container(),"before"===c&&(c="first"),"after"===c&&(c="last"));switch(c){case "before":a.before(f);k=this._get_parent(a);break;case "after":a.after(f);k=this._get_parent(a);break;case "inside":case "first":a.children("ul").length||a.append("\x3cul /\x3e");a.children("ul").prepend(f);k=a;break;case "last":a.children("ul").length||a.append("\x3cul /\x3e");a.children("ul").append(f);k=a;break;default:a.children("ul").length||
a.append("\x3cul /\x3e"),c||(c=0),k=a.children("ul").children("li").eq(c),k.length?k.before(f):a.children("ul").append(f),k=a}if(-1===k||k.get(0)===this.get_container().get(0))k=-1;this.clean_node(k);this.__callback({obj:f,parent:k});e&&e.call(this,f);return f},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var b=this._get_settings().core.html_titles;a=a.children("a:eq(0)");if(b)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];
return a.nodeValue},set_text:function(a,b){a=this._get_node(a);if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var c=a.children("INS").clone();a.html(b).prepend(c);this.__callback({obj:a,name:b});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:b});return a.nodeValue=b},rename_node:function(a,b){a=this._get_node(a);this.__rollback();a&&a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&
this.__callback({obj:a,name:b})},delete_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.__rollback();var c=this._get_parent(a),d=b([]),e=this;a.each(function(){d=d.add(e._get_prev(this))});a=a.detach();-1!==c&&0===c.find("\x3e ul \x3e li").length&&c.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(c);this.__callback({obj:a,prev:d,parent:c});return a},prepare_move:function(a,c,e,h,l){var f={};f.ot=b.jstree._reference(a)||this;f.o=f.ot._get_node(a);f.r=
-1===c?-1:this._get_node(c);f.p="undefined"===typeof e||!1===e?"last":e;if(l||!d.o||d.o[0]!==f.o[0]||d.r[0]!==f.r[0]||d.p!==f.p){f.ot=b.jstree._reference(f.o)||this;f.rt=b.jstree._reference(f.r)||this;if(-1!==f.r&&f.r){if(!/^(before|after)$/.test(f.p)&&!this._is_loaded(f.r))return this.load_node(f.r,function(){this.prepare_move(a,c,e,h,!0)});switch(f.p){case "before":f.cp=f.r.index();f.cr=f.rt._get_parent(f.r);break;case "after":f.cp=f.r.index()+1;f.cr=f.rt._get_parent(f.r);break;case "inside":case "first":f.cp=
0;f.cr=f.r;break;case "last":f.cp=f.r.find(" \x3e ul \x3e li").length;f.cr=f.r;break;default:f.cp=f.p,f.cr=f.r}}else switch(f.cr=-1,f.p){case "first":case "before":case "inside":f.cp=0;break;case "after":case "last":f.cp=f.rt.get_container().find(" \x3e ul \x3e li").length;break;default:f.cp=f.p}f.np=-1==f.cr?f.rt.get_container():f.cr;f.op=f.ot._get_parent(f.o);f.cop=f.o.index();-1===f.op&&(f.op=f.ot?f.ot.get_container():this.get_container());!/^(before|after)$/.test(f.p)&&f.op&&f.np&&f.op[0]===f.np[0]&&
f.o.index()<f.cp&&f.cp++;f.or=f.np.find(" \x3e ul \x3e li:nth-child("+(f.cp+1)+")");d=f}this.__callback(d);h&&h.call(this,d)},check_move:function(){var a=d,b=!0,c=-1===a.r?this.get_container():a.r;if(!a||!a.o||a.or[0]===a.o[0]||a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==c.parentsUntil(".jstree","li").andSelf().index(this))return b=!1});return b},move_node:function(a,c,e,h,l,q){if(!l)return this.prepare_move(a,c,e,function(a){this.move_node(a,!1,!1,h,!0,
q)});h&&(d.cy=!0);if(!q&&!this.check_move())return!1;this.__rollback();c=!1;h?(c=a.o.clone(!0),c.find("*[id]").andSelf().each(function(){this.id&&(this.id="copy_"+this.id)})):c=a.o;a.or.length?a.or.before(c):(a.np.children("ul").length||b("\x3cul /\x3e").appendTo(a.np),a.np.children("ul:eq(0)").append(c));try{a.ot.clean_node(a.op),a.rt.clean_node(a.np),a.op.find("\x3e ul \x3e li").length||a.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(m){}h&&(d.cy=
!0,d.oc=c);this.__callback(d);return d},_get_move:function(){return d}}})})(jQuery);(function(b){var a,c,e;b(function(){/msie/.test(navigator.userAgent.toLowerCase())?(c=b('\x3ctextarea cols\x3d"10" rows\x3d"2"\x3e\x3c/textarea\x3e').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),e=b('\x3ctextarea cols\x3d"10" rows\x3d"2" style\x3d"overflow: hidden;"\x3e\x3c/textarea\x3e').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),a=c.width()-e.width(),c.add(e).remove()):(c=b("\x3cdiv /\x3e").css({width:100,
height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("\x3cdiv /\x3e").find("div").css({width:"100%",height:200}),a=100-c.width(),c.parent().remove())});b.jstree.plugin("ui",{__init:function(){this.data.ui.selected=b();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",b.proxy(function(a){a.preventDefault();a.currentTarget.blur();b(a.currentTarget).hasClass("jstree-loading")||
this.select_node(a.currentTarget,!0,a)},this)).delegate("a","mouseenter.jstree",b.proxy(function(a){b(a.currentTarget).hasClass("jstree-loading")||this.hover_node(a.target)},this)).delegate("a","mouseleave.jstree",b.proxy(function(a){b(a.currentTarget).hasClass("jstree-loading")||this.dehover_node(a.target)},this)).bind("reopen.jstree",b.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",b.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",
b.proxy(function(){this.reselect()},this)).bind("close_node.jstree",b.proxy(function(a,c){var d=this._get_settings().ui,e=this._get_node(c.rslt.obj);a=e&&e.length?e.children("ul").find("a.jstree-clicked"):b();var f=this;!1!==d.selected_parent_close&&a.length&&a.each(function(){f.deselect_node(this);"select_parent"===d.selected_parent_close&&f.select_node(e)})},this)).bind("delete_node.jstree",b.proxy(function(a,b){a=this._get_settings().ui.select_prev_on_delete;var c=this._get_node(b.rslt.obj);c=
c&&c.length?c.find("a.jstree-clicked"):[];var d=this;c.each(function(){d.deselect_node(this)});a&&c.length&&b.rslt.prev.each(function(){if(this.parentNode)return d.select_node(this),!1})},this)).bind("move_node.jstree",b.proxy(function(a,b){b.rslt.cy&&b.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,
disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(a,c){if("undefined"===typeof a||null===a)return c?this.data.ui.selected:this.data.ui.last_selected;c=b(a,this.get_container());if(c.is(".jstree")||-1==a)return-1;c=c.closest("li",this.get_container());return c.length?c:!1},_ui_notify:function(a,b){b.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,
"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},reselect:function(){var a=this,c=this.data.ui.to_select;c=b.map(b.makeArray(c),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});b.each(c,function(b,c){c&&"#"!==c&&a.select_node(c)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});
this.__callback()},refresh:function(a){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);if(!a.length)return!1;a.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered;if(!a||!a.length)return!1;var c=a.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===c[0]&&(this.data.ui.hovered=
null);this.__callback({obj:a})},select_node:function(a,c,b){a=this._get_node(a);if(-1==a||!a||!a.length)return!1;var d=this._get_settings().ui,e="on"==d.select_multiple_modifier||!1!==d.select_multiple_modifier&&b&&b[d.select_multiple_modifier+"Key"],f=!1!==d.select_range_modifier&&b&&b[d.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],g=this.is_selected(a),m=!0,n=this;if(c){if(d.disable_selecting_children&&
e&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;m=!1;switch(!0){case f:this.data.ui.last_selected.addClass("jstree-last-selected");a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf();-1==d.select_limit||a.length<d.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==n.data.ui.last_selected[0]&&
n.deselect_node(this)}),g=!1,m=!0):m=!1;break;case g&&!e:this.deselect_all();g=!1;m=!0;break;case !g&&!e:if(-1==d.select_limit||0<d.select_limit)this.deselect_all(),m=!0;break;case g&&e:this.deselect_node(a);break;case !g&&e:if(-1==d.select_limit||this.data.ui.selected.length+1<=d.select_limit)m=!0}}m&&!g&&(f||(this.data.ui.last_selected=a),a.children("a").addClass("jstree-clicked"),d.selected_parent_open&&a.parents(".jstree-closed").each(function(){n.open_node(this,!1,!0)}),this.data.ui.selected=
this.data.ui.selected.add(a),this._fix_scroll(a.eq(0)),this.__callback({obj:a,e:b}))},_fix_scroll:function(c){var b=this.get_container()[0];b.scrollHeight>b.offsetHeight&&(c=this._get_node(c))&&-1!==c&&c.length&&c.is(":visible")&&(c=c.offset().top-this.get_container().offset().top,0>c&&(b.scrollTop=b.scrollTop+c-1),c+this.data.core.li_height+(b.scrollWidth>b.offsetWidth?a:0)>b.offsetHeight&&(b.scrollTop+=c-b.offsetHeight+this.data.core.li_height+1+(b.scrollWidth>b.offsetWidth?a:0)))},deselect_node:function(a){a=
this._get_node(a);if(!a.length)return!1;this.is_selected(a)&&(a.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(a),this.data.ui.last_selected.get(0)===a.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:a}))},toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return 0<=this.data.ui.selected.index(this._get_node(a))},
get_selected:function(a){return a?b(a).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(a){a=a?b(a).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();a.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=b([]);this.data.ui.last_selected=!1;this.__callback({obj:a})}}});b.jstree.defaults.plugins.push("ui")})(jQuery);(function(b){b.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",
b.proxy(function(a,b){if(this._get_settings().crrm.move.open_onmove){var c=this;b.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){c.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(a){return!0}}},_fn:{_show_input:function(a,c){a=this._get_node(a);var e=this._get_settings().core.rtl,d=this._get_settings().crrm.input_width_limit,f=a.children("ins").width(),g=a.find("\x3e a:visible \x3e ins").width()*
a.find("\x3e a:visible \x3e ins").length,k=this.get_text(a),h=b("\x3cdiv /\x3e",{css:{position:"absolute",top:"-200px",left:e?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),l=a.css("position","relative").append(b("\x3cinput /\x3e",{value:k,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:e?"auto":f+g+4+"px",right:e?f+g+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:b.proxy(function(){var b=
a.children(".jstree-rename-input"),d=b.val();""===d&&(d=k);h.remove();b.remove();this.set_text(a,k);this.rename_node(a,d);c.call(this,a,d,k);a.css("position","")},this),keyup:function(a){a=a.keyCode||a.which;27==a?(this.value=k,this.blur()):13==a?this.blur():l.width(Math.min(h.text("pW"+this.value).width(),d))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".jstree-rename-input");this.set_text(a,"");h.css({fontFamily:l.css("fontFamily")||"",fontSize:l.css("fontSize")||"",
fontWeight:l.css("fontWeight")||"",fontStyle:l.css("fontStyle")||"",fontStretch:l.css("fontStretch")||"",fontVariant:l.css("fontVariant")||"",letterSpacing:l.css("letterSpacing")||"",wordSpacing:l.css("wordSpacing")||""});l.width(Math.min(h.text("pW"+l[0].value).width(),d))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var b=this.__callback;this._show_input(a,function(a,c,f){b.call(this,{obj:a,new_name:c,old_name:f})})},create:function(a,c,e,d,f){var g=this;(a=this._get_node(a))||
(a=-1);this.__rollback();return this.create_node(a,c,e,function(a){var c=this._get_parent(a),e=b(a).index();d&&d.call(this,a);c.length&&c.hasClass("jstree-closed")&&this.open_node(c,!1,!0);f?g.__callback({obj:a,name:this.get_text(a),parent:c,position:e}):this._show_input(a,function(a,b,d){g.__callback({obj:a,name:b,parent:c,position:e})})})},remove:function(a){a=this._get_node(a,!0);var b=this._get_parent(a),e=this._get_prev(a);this.__rollback();a=this.delete_node(a);!1!==a&&this.__callback({obj:a,
prev:e,parent:b})},check_move:function(){return this.__call_old()&&this._get_settings().crrm.move.check_move.call(this,this._get_move())?!0:!1},move_node:function(a,b,e,d,f,g){var c=this._get_settings().crrm.move;if(!f)return"undefined"===typeof e&&(e=c.default_position),"inside"!==e||c.default_position.match(/^(before|after)$/)||(e=c.default_position),this.__call_old(!0,a,b,e,d,!1,g);if(!0===c.always_copy||"multitree"===c.always_copy&&a.rt.get_index()!==a.ot.get_index())d=!0;this.__call_old(!0,a,
b,e,d,!0,g)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var b=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;
this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,nodes:b})}}})})(jQuery);(function(b){var a=[];b.jstree._themes=!1;b.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",b.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",
b.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(c,e){if(!c)return!1;e||(e=b.jstree._themes+c+"/style.css");-1==b.inArray(e,a)&&(b.vakata.css.add_sheet({url:e}),a.push(e));this.data.themes.theme!=c&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=c);this.get_container().addClass("jstree-"+
c);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=
!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});b(function(){!1===b.jstree._themes&&b("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return b.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",
!1});!1===b.jstree._themes&&(b.jstree._themes="themes/")});b.jstree.defaults.plugins.push("themes")})(jQuery);(function(b){var a=[];b.jstree.plugin("hotkeys",{__init:function(){if("undefined"===typeof b.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";b.each(this._get_settings().hotkeys,function(c,e){!1!==e&&-1==b.inArray(c,a)&&(b(document).bind("keydown",c,function(a){a:{var d=b.jstree._focused(),e;if(d&&d.data&&
d.data.hotkeys&&d.data.hotkeys.enabled&&(e=d._get_settings().hotkeys[c])){a=e.call(d,a);break a}a=void 0}return a}),a.push(c))});this.get_container().bind("lock.jstree",b.proxy(function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",b.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||
-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):
this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&
(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},
del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})})(jQuery);(function(b){b.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,b){b.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},
_fn:{load_node:function(a,b,e){var c=this;this.load_node_json(a,function(){c.__callback({obj:c._get_node(a)});b.call(this)},e)},_is_loaded:function(a){var c=this._get_settings().json_data;a=this._get_node(a);return-1==a||!a||!c.ajax&&!c.progressive_render&&!b.isFunction(c.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").length},refresh:function(a){a=this._get_node(a);var c=this._get_settings().json_data;a&&-1!==a&&c.progressive_unload&&(b.isFunction(c.data)||c.ajax)&&a.removeData("jstree_children");
return this.__call_old()},load_node_json:function(a,c,e){var d=this.get_settings().json_data,f=function(){};var g=function(){};if((a=this._get_node(a))&&-1!==a&&(d.progressive_render||d.progressive_unload)&&!a.is(".jstree-open, .jstree-leaf")&&0===a.children("ul").children("li").length&&a.data("jstree_children")){if(g=this._parse_json(a.data("jstree_children"),a))a.append(g),d.progressive_unload||a.removeData("jstree_children");this.clean_node(a);c&&c.call(this)}else{if(a&&-1!==a){if(a.data("jstree_is_loading"))return;
a.data("jstree_is_loading",!0)}switch(!0){case !d.data&&!d.ajax:throw"Neither data nor ajax settings supplied.";case b.isFunction(d.data):d.data.call(this,a,b.proxy(function(b){(b=this._parse_json(b,a))?(-1!==a&&a?(a.append(b).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(b.children()),this.clean_node(a),c&&c.call(this)):(-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),
d.correct_state&&this.correct_state(a)):d.correct_state&&this.get_container().children("ul").empty(),e&&e.call(this))},this));break;case !!d.data&&!d.ajax||!!d.data&&!!d.ajax&&(!a||-1===a):a&&-1!=a||((g=this._parse_json(d.data,a))?(this.get_container().children("ul").empty().append(g.children()),this.clean_node()):d.correct_state&&this.get_container().children("ul").empty());c&&c.call(this);break;case !d.data&&!!d.ajax||!!d.data&&!!d.ajax&&a&&-1!==a:f=function(b,c,f){var g=this.get_settings().json_data.ajax.error;
g&&g.call(this,b,c,f);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===c&&d.correct_state&&this.correct_state(a)):"success"===c&&d.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)},g=function(e,g,l){var h=this.get_settings().json_data.ajax.success;h&&(e=h.call(this,e,g,l)||e);if(""===e||e&&e.toString&&""===e.toString().replace(/^[\s\n]+$/,"")||!b.isArray(e)&&!b.isPlainObject(e))return f.call(this,
l,g,"");(e=this._parse_json(e,a))?(-1!==a&&a?(a.append(e).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),this.clean_node(a),c&&c.call(this)):-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),d.correct_state&&(this.correct_state(a),c&&c.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),c&&c.call(this))},d.ajax.context=
this,d.ajax.error=f,d.ajax.success=g,d.ajax.dataType||(d.ajax.dataType="json"),b.isFunction(d.ajax.url)&&(d.ajax.url=d.ajax.url.call(this,a)),b.isFunction(d.ajax.data)&&(d.ajax.data=d.ajax.data.call(this,a)),b.ajax(d.ajax)}}},_parse_json:function(a,c,e){var d=!1,f=this._get_settings(),g=f.json_data,k=f.core.html_titles;if(!a)return d;g.progressive_unload&&c&&-1!==c&&c.data("jstree_children",d);if(b.isArray(a)){d=b();if(!a.length)return!1;f=0;for(g=a.length;f<g;f++){var h=this._parse_json(a[f],c,!0);
h.length&&(d=d.add(h))}}else{"string"==typeof a&&(a={data:a});if(!a.data&&""!==a.data)return d;d=b("\x3cli /\x3e");a.attr&&d.attr(a.attr);a.metadata&&d.data(a.metadata);a.state&&d.addClass("jstree-"+a.state);b.isArray(a.data)||(h=a.data,a.data=[],a.data.push(h));b.each(a.data,function(c,e){h=b("\x3ca /\x3e");b.isFunction(e)&&(e=e.call(this,a));if("string"==typeof e)h.attr("href","#")[k?"html":"text"](e);else e.attr||(e.attr={}),e.attr.href||(e.attr.href="#"),h.attr(e.attr)[k?"html":"text"](e.title),
e.language&&h.addClass(e.language);h.prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e");!e.icon&&a.icon&&(e.icon=a.icon);e.icon&&(-1===e.icon.indexOf("/")?h.children("ins").addClass(e.icon):h.children("ins").css("background","url('"+e.icon+"') center center no-repeat"));d.append(h)});d.prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e");a.children&&(g.progressive_render&&"open"!==a.state?d.addClass("jstree-closed").data("jstree_children",a.children):(g.progressive_unload&&
d.data("jstree_children",a.children),b.isArray(a.children)&&a.children.length&&(h=this._parse_json(a.children,c,!0),h.length&&(c=b("\x3cul /\x3e"),c.append(h),d.append(c)))))}e||(e=b("\x3cul /\x3e"),e.append(d),d=e);return d},get_json:function(a,c,e,d){var f=[],g=this._get_settings(),k=this,h,l,q,m,n,p;(a=this._get_node(a))&&-1!==a||(a=this.get_container().find("\x3e ul \x3e li"));c=b.isArray(c)?c:["id","class"];!d&&this.data.types&&c.push(g.types.type_attr);e=b.isArray(e)?e:[];a.each(function(){q=
b(this);h={data:[]};c.length&&(h.attr={});b.each(c,function(a,b){(l=q.attr(b))&&l.length&&l.replace(/jstree[^ ]*/ig,"").length&&(h.attr[b]=(" "+l).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))});q.hasClass("jstree-open")&&(h.state="open");q.hasClass("jstree-closed")&&(h.state="closed");q.data()&&(h.metadata=q.data());m=q.children("a");m.each(function(){n=b(this);e.length||-1!==b.inArray("languages",g.plugins)||n.children("ins").get(0).style.backgroundImage.length||
n.children("ins").get(0).className&&n.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(p=!1,-1!==b.inArray("languages",g.plugins)&&b.isArray(g.languages)&&g.languages.length&&b.each(g.languages,function(a,b){if(n.hasClass(b))return p=b,!1}),l={attr:{},title:k.get_text(n,p)},b.each(e,function(a,b){l.attr[b]=(" "+(n.attr(b)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),-1!==b.inArray("languages",g.plugins)&&b.isArray(g.languages)&&
g.languages.length&&b.each(g.languages,function(a,b){if(n.hasClass(b))return l.language=b,!0}),n.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(l.icon=n.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),n.children("ins").get(0).style.backgroundImage.length&&(l.icon=n.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):l=k.get_text(n);1<m.length?h.data.push(l):
h.data=l});q=q.find("\x3e ul \x3e li");q.length&&(h.children=k.get_json(q,c,e,!0));f.push(h)});return f}}})})(jQuery);(function(b){b.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(a){var c=this._get_settings().languages,e=".jstree-"+this.get_index()+" a";if(!b.isArray(c)||0===c.length)return!1;if(-1==b.inArray(a,c))if(c[a])a=c[a];else return!1;if(a==this.data.languages.current_language)return!0;c=b.vakata.css.get_css(e+"."+this.data.languages.current_language,
!1,this.data.languages.language_css);!1!==c&&(c.style.display="none");c=b.vakata.css.get_css(e+"."+a,!1,this.data.languages.language_css);!1!==c&&(c.style.display="");this.data.languages.current_language=a;this.__callback(a);return!0},get_lang:function(){return this.data.languages.current_language},_get_string:function(a,c){var e=this._get_settings().languages,d=this._get_settings().core.strings;b.isArray(e)&&e.length&&(c=c&&-1!=b.inArray(c,e)?c:this.data.languages.current_language);return d[c]&&
d[c][a]?d[c][a]:d[a]?d[a]:a},get_text:function(a,c){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var e=this._get_settings().languages,d=this._get_settings().core.html_titles;b.isArray(e)&&e.length?(c=c&&-1!=b.inArray(c,e)?c:this.data.languages.current_language,a=a.children("a."+c)):a=a.children("a:eq(0)");if(d)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,c,e){a=
this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var d=this._get_settings().languages,f=this._get_settings().core.html_titles;b.isArray(d)&&d.length?(e=e&&-1!=b.inArray(e,d)?e:this.data.languages.current_language,a=a.children("a."+e)):a=a.children("a:eq(0)");if(f)return d=a.children("INS").clone(),a.html(c).prepend(d),this.__callback({obj:a,name:c,lang:e}),!0;a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:c,lang:e});return a.nodeValue=
c},_load_css:function(){var a=this._get_settings().languages,c="/* languages css */",e=".jstree-"+this.get_index()+" a",d;if(b.isArray(a)&&a.length){this.data.languages.current_language=a[0];for(d=0;d<a.length;d++)c+=e+"."+a[d]+" {",a[d]!=this.data.languages.current_language&&(c+=" display:none; "),c+=" } ";this.data.languages.language_css=b.vakata.css.add_sheet({str:c,title:"jstree-languages"})}},create_node:function(a,c,e,d){return this.__call_old(!0,a,c,e,function(a){var c=this._get_settings().languages,
e=a.children("a"),f;if(b.isArray(c)&&c.length){for(f=0;f<c.length;f++)e.is("."+c[f])||a.append(e.eq(0).clone().removeClass(c.join(" ")).addClass(c[f]));e.not("."+c.join(", .")).remove()}d&&d.call(this,a)})}}})})(jQuery);(function(b){b.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof b.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";var a=this._get_settings().cookies,c;a.save_loaded&&(c=b.cookie(a.save_loaded))&&c.length&&(this.data.core.to_load=c.split(","));a.save_opened&&
(c=b.cookie(a.save_opened))&&c.length&&(this.data.core.to_open=c.split(","));a.save_selected&&(c=b.cookie(a.save_selected))&&c.length&&this.data.ui&&(this.data.ui.to_select=c.split(","));this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",b.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",b.proxy(function(a){this._get_settings().cookies.auto_save&&this.save_cookie((a.handleObj.namespace+a.handleObj.type).replace("jstree",
""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(a){if(!this.data.core.refreshing){var c=this._get_settings().cookies;if(a)switch(a){case "open_node":case "close_node":c.save_opened&&(this.save_opened(),b.cookie(c.save_opened,this.data.core.to_open.join(","),c.cookie_options));c.save_loaded&&(this.save_loaded(),b.cookie(c.save_loaded,this.data.core.to_load.join(","),c.cookie_options));
break;case "select_node":case "deselect_node":c.save_selected&&this.data.ui&&(this.save_selected(),b.cookie(c.save_selected,this.data.ui.to_select.join(","),c.cookie_options))}else c.save_loaded&&(this.save_loaded(),b.cookie(c.save_loaded,this.data.core.to_load.join(","),c.cookie_options)),c.save_opened&&(this.save_opened(),b.cookie(c.save_opened,this.data.core.to_open.join(","),c.cookie_options)),c.save_selected&&this.data.ui&&(this.save_selected(),b.cookie(c.save_selected,this.data.ui.to_select.join(","),
c.cookie_options))}}}})})(jQuery);(function(b){b.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",b.proxy(function(a,b){a=this._get_node(b.rslt.obj);a=-1===a?this.get_container().children("ul"):a.children("ul");this.sort(a)},this)).bind("rename_node.jstree create_node.jstree create.jstree",b.proxy(function(a,b){this.sort(b.rslt.obj.parent())},this)).bind("move_node.jstree",b.proxy(function(a,b){a=-1==b.rslt.np?this.get_container():b.rslt.np;this.sort(a.children("ul"))},
this))},defaults:function(a,b){return this.get_text(a)>this.get_text(b)?1:-1},_fn:{sort:function(a){var c=this._get_settings().sort,e=this;a.append(b.makeArray(a.children("li")).sort(b.proxy(c,e)));a.find("\x3e li \x3e ul").each(function(){e.sort(b(this))});this.clean_node(a)}}})})(jQuery);(function(b){var a=!1,c=!1,e=!1,d=!1,f=!1,g=!1,k=!1,h=!1,l=!1;b.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(a,
c,d){b.vakata.dnd.is_drag&&b.vakata.drag_stop({});try{a.currentTarget.unselectable="on",a.currentTarget.onselectstart=function(){return!1},a.currentTarget.style&&(a.currentTarget.style.MozUserSelect="none")}catch(p){}b.vakata.dnd.init_x=a.pageX;b.vakata.dnd.init_y=a.pageY;b.vakata.dnd.user_data=c;b.vakata.dnd.is_down=!0;b.vakata.dnd.helper=b("\x3cdiv id\x3d'vakata-dragged' /\x3e").html(d);b(document).bind("mousemove",b.vakata.dnd.drag);b(document).bind("mouseup",b.vakata.dnd.drag_stop);return!1},
drag:function(a){if(b.vakata.dnd.is_down){if(!b.vakata.dnd.is_drag)if(5<Math.abs(a.pageX-b.vakata.dnd.init_x)||5<Math.abs(a.pageY-b.vakata.dnd.init_y))b.vakata.dnd.helper.appendTo("body"),b.vakata.dnd.is_drag=!0,b(document).triggerHandler("drag_start.vakata",{event:a,data:b.vakata.dnd.user_data});else return;if("mousemove"===a.type){var c=b(document),d=c.scrollTop();c=c.scrollLeft();20>a.pageY-d?(g&&"down"===k&&(clearInterval(g),g=!1),g||(k="up",g=setInterval(function(){b(document).scrollTop(b(document).scrollTop()-
b.vakata.dnd.scroll_spd)},150))):g&&"up"===k&&(clearInterval(g),g=!1);20>b(window).height()-(a.pageY-d)?(g&&"up"===k&&(clearInterval(g),g=!1),g||(k="down",g=setInterval(function(){b(document).scrollTop(b(document).scrollTop()+b.vakata.dnd.scroll_spd)},150))):g&&"down"===k&&(clearInterval(g),g=!1);20>a.pageX-c?(f&&"right"===h&&(clearInterval(f),f=!1),f||(h="left",f=setInterval(function(){b(document).scrollLeft(b(document).scrollLeft()-b.vakata.dnd.scroll_spd)},150))):f&&"left"===h&&(clearInterval(f),
f=!1);20>b(window).width()-(a.pageX-c)?(f&&"left"===h&&(clearInterval(f),f=!1),f||(h="right",f=setInterval(function(){b(document).scrollLeft(b(document).scrollLeft()+b.vakata.dnd.scroll_spd)},150))):f&&"right"===h&&(clearInterval(f),f=!1)}b.vakata.dnd.helper.css({left:a.pageX+b.vakata.dnd.helper_left+"px",top:a.pageY+b.vakata.dnd.helper_top+"px"});b(document).triggerHandler("drag.vakata",{event:a,data:b.vakata.dnd.user_data})}},drag_stop:function(a){f&&clearInterval(f);g&&clearInterval(g);b(document).unbind("mousemove",
b.vakata.dnd.drag);b(document).unbind("mouseup",b.vakata.dnd.drag_stop);b(document).triggerHandler("drag_stop.vakata",{event:a,data:b.vakata.dnd.user_data});b.vakata.dnd.helper.remove();b.vakata.dnd.init_x=0;b.vakata.dnd.init_y=0;b.vakata.dnd.user_data={};b.vakata.dnd.is_down=!1;b.vakata.dnd.is_drag=!1}};b(function(){b.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",title:"vakata"})});
b.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",b.proxy(function(c){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(this.data.themes&&(e.attr("class","jstree-"+this.data.themes.theme),d&&d.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),c.currentTarget===
c.target&&b.vakata.dnd.user_data.obj&&b(b.vakata.dnd.user_data.obj).length&&b(b.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==c.target&&(c=b.jstree._reference(c.target),c.data.dnd.foreign?(c=c._get_settings().dnd.drag_check.call(this,{o:a,r:c.get_container(),is_root:!0}),!0!==c&&!0!==c.inside&&!0!==c.before&&!0!==c.after||b.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(c.prepare_move(a,c.get_container(),"last"),c.check_move()&&b.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))))},this)).bind("mouseup.jstree",b.proxy(function(c){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&c.currentTarget===c.target&&b.vakata.dnd.user_data.obj&&b(b.vakata.dnd.user_data.obj).length&&b(b.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==c.target){var d=b.jstree._reference(c.currentTarget);d.data.dnd.foreign?(c=d._get_settings().dnd.drag_check.call(this,{o:a,r:d.get_container(),is_root:!0}),!0!==c&&!0!==c.inside&&!0!==c.before&&!0!==c.after||d._get_settings().dnd.drag_finish.call(this,
{o:a,r:d.get_container(),is_root:!0})):d.move_node(a,d.get_container(),"last",c[d._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",b.proxy(function(a){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
b.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",b.proxy(function(a){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree){var c=this.get_container()[0];a.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(b.proxy(function(){this.scrollLeft+=b.vakata.dnd.scroll_spd},c),100)):a.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(b.proxy(function(){this.scrollLeft-=b.vakata.dnd.scroll_spd},c),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);a.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(b.proxy(function(){this.scrollTop+=b.vakata.dnd.scroll_spd},c),100)):a.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(b.proxy(function(){this.scrollTop-=
b.vakata.dnd.scroll_spd},c),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",b.proxy(function(a){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&e&&d&&(e.hide(),d.hide())},this)).delegate("a","mousedown.jstree",b.proxy(function(a){if(1===a.which)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",b.proxy(function(a){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&this.dnd_enter(a.currentTarget)},this)).delegate("a","mousemove.jstree",
b.proxy(function(a){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(c&&c.length&&c.children("a")[0]===a.currentTarget||this.dnd_enter(a.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=b(a.target).offset()),this.data.dnd.w=(a.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",b.proxy(function(a){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree){if(a.relatedTarget&&
a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;e&&e.hide();d&&d.hide();this.data.dnd.mto=setTimeout(function(b){return function(){b.dnd_leave(a)}}(this),0)}},this)).delegate("a","mouseup.jstree",b.proxy(function(a){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&this.dnd_finish(a)},this));b(document).bind("drag_stop.vakata",b.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);this.data.dnd.i1&&clearInterval(this.data.dnd.i1);
this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;e&&e.css({top:"-2000px"});d&&d.css({top:"-2000px"})},this)).bind("drag_start.vakata",b.proxy(function(a,c){c.data.jstree&&(a=b(c.event.target),a.closest(".jstree").hasClass("jstree-"+
this.get_index())&&this.dnd_enter(a))},this));var f=this._get_settings().dnd;f.drag_target&&b(document).delegate(f.drag_target,"mousedown.jstree-"+this.get_index(),b.proxy(function(c){a=c.target;b.vakata.dnd.drag_start(c,{jstree:!0,obj:c.target},"\x3cins class\x3d'jstree-icon'\x3e\x3c/ins\x3e"+b(c.target).text());this.data.themes&&(e&&e.attr("class","jstree-"+this.data.themes.theme),d&&d.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));
b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var f=this.get_container();this.data.dnd.cof=f.offset();this.data.dnd.cw=parseInt(f.width(),10);this.data.dnd.ch=parseInt(f.height(),10);this.data.dnd.foreign=!0;c.preventDefault()},this));f.drop_target&&b(document).delegate(f.drop_target,"mouseenter.jstree-"+this.get_index(),b.proxy(function(c){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:a,r:b(c.target),e:c})&&b.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok")},this)).delegate(f.drop_target,"mouseleave.jstree-"+this.get_index(),b.proxy(function(a){this.data.dnd.active&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(f.drop_target,"mouseup.jstree-"+this.get_index(),b.proxy(function(c){this.data.dnd.active&&b.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:a,r:b(c.target),e:c})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,
drop_target:".jstree-drop",drop_check:function(a){return!0},drop_finish:b.noop,drag_target:".jstree-draggable",drag_finish:b.noop,drag_check:function(a){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(c&&c.length){this.data.dnd.off=c.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+c.width());if(this.data.dnd.foreign){var b=this._get_settings().dnd.drag_check.call(this,{o:a,r:c});this.data.dnd.after=b.after;this.data.dnd.before=b.before;
this.data.dnd.inside=b.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(a,c,"before");this.data.dnd.before=this.check_move();this.prepare_move(a,c,"after");this.data.dnd.after=this.check_move();this._is_loaded(c)?(this.prepare_move(a,c,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var a=["before","inside","after"],c=!1,f=this._get_settings().core.rtl;
a=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];b.each(a,b.proxy(function(a,d){if(this.data.dnd[d])return b.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),c=d,!1},this));!1===c&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");a=f?this.data.dnd.off.right-18:this.data.dnd.off.left+
10;switch(c){case "before":e.css({left:a+"px",top:this.data.dnd.off.top-6+"px"}).show();d&&d.css({left:a+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":e.css({left:a+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();d&&d.css({left:a+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":e.css({left:a+(f?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();d&&d.hide();break;default:e.hide(),
d&&d.hide()}return l=c}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(c,b.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(b){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:a,r:c,p:l}):(this.dnd_prepare(),this.move_node(a,c,l,b[this._get_settings().dnd.copy_modifier+"Key"]));c=a=!1;e.hide();d&&d.hide()},dnd_enter:function(a){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=
!1);var d=this._get_settings().dnd;this.data.dnd.prepared=!1;c=this._get_node(a);d.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(b.proxy(this.dnd_prepare,this),d.check_timeout)):this.dnd_prepare();d.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),c&&c.length&&c.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(b.proxy(this.dnd_open,this),d.open_timeout))):c&&c.length&&c.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(a){this.data.dnd.after=
!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");e.hide();d&&d.hide();c&&c[0]===a.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(c,f){a=this._get_node(c);this.data.ui&&this.is_selected(a)&&(a=this._get_node(null,!0));c=1<a.length?this._get_string("multiple_selection"):this.get_text(a);var g=
this.get_container();this._get_settings().core.html_titles||(c=c.replace(/</ig,"\x26lt;").replace(/>/ig,"\x26gt;"));b.vakata.dnd.drag_start(f,{jstree:!0,obj:a},"\x3cins class\x3d'jstree-icon'\x3e\x3c/ins\x3e"+c);this.data.themes&&(e&&e.attr("class","jstree-"+this.data.themes.theme),d&&d.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=g.offset();this.data.dnd.cw=parseInt(g.width(),10);this.data.dnd.ch=
parseInt(g.height(),10);this.data.dnd.active=!0}}});b(function(){b.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});e=b("\x3cdiv /\x3e").attr({id:"jstree-marker"}).hide().html("\x26raquo;").bind("mouseleave mouseenter",function(a){e.hide();d.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");d=b("\x3cdiv /\x3e").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(c&&c.length)return c.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(a){var f=b(a.relatedTarget);if((f.is(".jstree")||0===f.closest(".jstree").length)&&
c&&c.length)return c.children("a").trigger(a),e.hide(),d.hide(),a.preventDefault(),a.stopImmediatePropagation(),!1}).appendTo("body");b(document).bind("drag_start.vakata",function(a,b){b.data.jstree&&(e.show(),d&&d.show())});b(document).bind("drag_stop.vakata",function(a,b){b.data.jstree&&(e.hide(),d&&d.hide())})})})(jQuery);(function(b){b.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=b.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",b.proxy(function(a,b){this._prepare_checkboxes(b.rslt.obj)},this)).bind("loaded.jstree",b.proxy(function(a){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",b.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,b){b.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("\x3e ul \x3e li");if(!1!==a){var c,e=this,d,f=this._get_settings().checkbox.two_state,g=this._get_settings().checkbox.real_checkboxes,k=this._get_settings().checkbox.real_checkboxes_names;a.each(function(){d=b(this);c=d.is("li")&&(d.hasClass("jstree-checked")||g&&d.children(":checked").length)?"jstree-checked":"jstree-unchecked";d.find("li").andSelf().each(function(){var a=
b(this);a.children("a"+(e.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("\x3cins class\x3d'jstree-checkbox'\x3e\x26#160;\x3c/ins\x3e").parent().not(".jstree-checked, .jstree-unchecked").addClass(f?"jstree-unchecked":c);if(g)if(a.children(":checkbox").length)a.children(":checkbox").addClass("jstree-real-checkbox");else{var d=k.call(e,a);a.prepend("\x3cinput type\x3d'checkbox' class\x3d'jstree-real-checkbox' id\x3d'"+d[0]+"' name\x3d'"+d[0]+"' value\x3d'"+d[1]+"' /\x3e")}f?(a.hasClass("jstree-checked")||
a.children(":checked").length)&&a.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===c||a.hasClass("jstree-checked")||a.children(":checked").length)&&a.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});f||a.find(".jstree-checked").parent().parent().each(function(){e._repair_state(this)})}},change_state:function(a,c){a=this._get_node(a);var e=!1,d=this._get_settings().checkbox.real_checkboxes;if(!a||-1===a)return!1;c=!1===
c||!0===c?c:a.hasClass("jstree-checked");if(this._get_settings().checkbox.two_state)c?(a.removeClass("jstree-checked").addClass("jstree-unchecked"),d&&a.children(":checkbox").prop("checked",!1)):(a.removeClass("jstree-unchecked").addClass("jstree-checked"),d&&a.children(":checkbox").prop("checked",!0));else{if(c){e=a.find("li").andSelf();if(!e.filter(".jstree-checked, .jstree-undetermined").length)return!1;e.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");d&&e.children(":checkbox").prop("checked",
!1)}else{e=a.find("li").andSelf();if(!e.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;e.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");d&&e.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=a);this.data.checkbox.last_selected=a}a.parentsUntil(".jstree","li").each(function(){var a=b(this);if(c){if(a.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
d&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;a.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");d&&a.children(":checkbox").prop("checked",!1)}else{if(a.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),d&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",
!1),!1;a.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");d&&a.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(a);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var b=this;a.parents(".jstree-closed").each(function(){b.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,b){a=a&&-1!==a?this._get_node(a):this.get_container();return b||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("\x3e ul \x3e .jstree-checked, .jstree-undetermined \x3e ul \x3e .jstree-checked")},get_unchecked:function(a,b){a=a&&-1!==a?this._get_node(a):this.get_container();return b||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("\x3e ul \x3e .jstree-unchecked, .jstree-undetermined \x3e ul \x3e .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length)if(this._get_settings().checkbox.two_state)a.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var b=this._get_settings().checkbox.real_checkboxes,
e=a.find("\x3e ul \x3e .jstree-checked").length,d=a.find("\x3e ul \x3e .jstree-undetermined").length,f=a.find("\x3e ul \x3e li").length;0===f?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):0===e&&0===d?this.change_state(a,!0):e===f?this.change_state(a,!1):(a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),b&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&
this.data.checkbox.noui){var a=this,c=this.data.ui.to_select;c=b.map(b.makeArray(c),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();b.each(c,function(b,c){a.check_node(c)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+
this.id)})}}});b(function(){b.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(b){b.vakata.xslt=function(a,c,f){var d="";if(document.recalc){var e=document.createElement("xml");d=document.createElement("xml");e.innerHTML=a;d.innerHTML=c;b("body").append(e).append(d);setTimeout(function(a,c,d){return function(){d.call(null,a.transformNode(c.XMLDocument));setTimeout(function(a,c){return function(){b(a).remove();b(c).remove()}}(a,c),
200)}}(e,d,f),100);return!0}"undefined"!==typeof window.DOMParser&&"undefined"!==typeof window.XMLHttpRequest&&"undefined"===typeof window.XSLTProcessor&&(a=(new DOMParser).parseFromString(a,"text/xml"),c=(new DOMParser).parseFromString(c,"text/xml"));if("undefined"!==typeof window.DOMParser&&"undefined"!==typeof window.XMLHttpRequest&&"undefined"!==typeof window.XSLTProcessor){e=new XSLTProcessor;d=b.isFunction(e.transformDocument)?"undefined"!==typeof window.XMLSerializer:!0;if(!d)return!1;a=(new DOMParser).parseFromString(a,
"text/xml");c=(new DOMParser).parseFromString(c,"text/xml");b.isFunction(e.transformDocument)?(d=document.implementation.createDocument("","",null),e.transformDocument(a,c,d,null),f.call(null,(new XMLSerializer).serializeToString(d))):(e.importStylesheet(c),d=e.transformToFragment(a,document),f.call(null,b("\x3cdiv /\x3e").append(d).html()));return!0}return!1};var a={nest:'\x3c?xml version\x3d"1.0" encoding\x3d"utf-8" ?\x3e\x3cxsl:stylesheet version\x3d"1.0" xmlns:xsl\x3d"http://www.w3.org/1999/XSL/Transform" \x3e\x3cxsl:output method\x3d"html" encoding\x3d"utf-8" omit-xml-declaration\x3d"yes" standalone\x3d"no" indent\x3d"no" media-type\x3d"text/html" /\x3e\x3cxsl:template match\x3d"/"\x3e\t\x3cxsl:call-template name\x3d"nodes"\x3e\t\t\x3cxsl:with-param name\x3d"node" select\x3d"/root" /\x3e\t\x3c/xsl:call-template\x3e\x3c/xsl:template\x3e\x3cxsl:template name\x3d"nodes"\x3e\t\x3cxsl:param name\x3d"node" /\x3e\t\x3cul\x3e\t\x3cxsl:for-each select\x3d"$node/item"\x3e\t\t\x3cxsl:variable name\x3d"children" select\x3d"count(./item) \x26gt; 0" /\x3e\t\t\x3cli\x3e\t\t\t\x3cxsl:attribute name\x3d"class"\x3e\t\t\t\t\x3cxsl:if test\x3d"position() \x3d last()"\x3ejstree-last \x3c/xsl:if\x3e\t\t\t\t\x3cxsl:choose\x3e\t\t\t\t\t\x3cxsl:when test\x3d"@state \x3d \'open\'"\x3ejstree-open \x3c/xsl:when\x3e\t\t\t\t\t\x3cxsl:when test\x3d"$children or @hasChildren or @state \x3d \'closed\'"\x3ejstree-closed \x3c/xsl:when\x3e\t\t\t\t\t\x3cxsl:otherwise\x3ejstree-leaf \x3c/xsl:otherwise\x3e\t\t\t\t\x3c/xsl:choose\x3e\t\t\t\t\x3cxsl:value-of select\x3d"@class" /\x3e\t\t\t\x3c/xsl:attribute\x3e\t\t\t\x3cxsl:for-each select\x3d"@*"\x3e\t\t\t\t\x3cxsl:if test\x3d"name() !\x3d \'class\' and name() !\x3d \'state\' and name() !\x3d \'hasChildren\'"\x3e\t\t\t\t\t\x3cxsl:attribute name\x3d"{name()}"\x3e\x3cxsl:value-of select\x3d"." /\x3e\x3c/xsl:attribute\x3e\t\t\t\t\x3c/xsl:if\x3e\t\t\t\x3c/xsl:for-each\x3e\t\x3cins class\x3d"jstree-icon"\x3e\x3cxsl:text\x3e\x26#xa0;\x3c/xsl:text\x3e\x3c/ins\x3e\t\t\t\x3cxsl:for-each select\x3d"content/name"\x3e\t\t\t\t\x3ca\x3e\t\t\t\t\x3cxsl:attribute name\x3d"href"\x3e\t\t\t\t\t\x3cxsl:choose\x3e\t\t\t\t\t\x3cxsl:when test\x3d"@href"\x3e\x3cxsl:value-of select\x3d"@href" /\x3e\x3c/xsl:when\x3e\t\t\t\t\t\x3cxsl:otherwise\x3e#\x3c/xsl:otherwise\x3e\t\t\t\t\t\x3c/xsl:choose\x3e\t\t\t\t\x3c/xsl:attribute\x3e\t\t\t\t\x3cxsl:attribute name\x3d"class"\x3e\x3cxsl:value-of select\x3d"@lang" /\x3e \x3cxsl:value-of select\x3d"@class" /\x3e\x3c/xsl:attribute\x3e\t\t\t\t\x3cxsl:attribute name\x3d"style"\x3e\x3cxsl:value-of select\x3d"@style" /\x3e\x3c/xsl:attribute\x3e\t\t\t\t\x3cxsl:for-each select\x3d"@*"\x3e\t\t\t\t\t\x3cxsl:if test\x3d"name() !\x3d \'style\' and name() !\x3d \'class\' and name() !\x3d \'href\'"\x3e\t\t\t\t\t\t\x3cxsl:attribute name\x3d"{name()}"\x3e\x3cxsl:value-of select\x3d"." /\x3e\x3c/xsl:attribute\x3e\t\t\t\t\t\x3c/xsl:if\x3e\t\t\t\t\x3c/xsl:for-each\x3e\t\t\t\t\t\x3cins\x3e\t\t\t\t\t\t\x3cxsl:attribute name\x3d"class"\x3ejstree-icon \t\t\t\t\t\t\t\x3cxsl:if test\x3d"string-length(attribute::icon) \x3e 0 and not(contains(@icon,\'/\'))"\x3e\x3cxsl:value-of select\x3d"@icon" /\x3e\x3c/xsl:if\x3e\t\t\t\t\t\t\x3c/xsl:attribute\x3e\t\t\t\t\t\t\x3cxsl:if test\x3d"string-length(attribute::icon) \x3e 0 and contains(@icon,\'/\')"\x3e\x3cxsl:attribute name\x3d"style"\x3ebackground:url(\x3cxsl:value-of select\x3d"@icon" /\x3e) center center no-repeat;\x3c/xsl:attribute\x3e\x3c/xsl:if\x3e\t\t\t\t\t\t\x3cxsl:text\x3e\x26#xa0;\x3c/xsl:text\x3e\t\t\t\t\t\x3c/ins\x3e\t\t\t\t\t\x3cxsl:copy-of select\x3d"./child::node()" /\x3e\t\t\t\t\x3c/a\x3e\t\t\t\x3c/xsl:for-each\x3e\t\t\t\x3cxsl:if test\x3d"$children or @hasChildren"\x3e\x3cxsl:call-template name\x3d"nodes"\x3e\x3cxsl:with-param name\x3d"node" select\x3d"current()" /\x3e\x3c/xsl:call-template\x3e\x3c/xsl:if\x3e\t\t\x3c/li\x3e\t\x3c/xsl:for-each\x3e\t\x3c/ul\x3e\x3c/xsl:template\x3e\x3c/xsl:stylesheet\x3e',
flat:'\x3c?xml version\x3d"1.0" encoding\x3d"utf-8" ?\x3e\x3cxsl:stylesheet version\x3d"1.0" xmlns:xsl\x3d"http://www.w3.org/1999/XSL/Transform" \x3e\x3cxsl:output method\x3d"html" encoding\x3d"utf-8" omit-xml-declaration\x3d"yes" standalone\x3d"no" indent\x3d"no" media-type\x3d"text/xml" /\x3e\x3cxsl:template match\x3d"/"\x3e\t\x3cul\x3e\t\x3cxsl:for-each select\x3d"//item[not(@parent_id) or @parent_id\x3d0 or not(@parent_id \x3d //item/@id)]"\x3e\t\t\x3cxsl:call-template name\x3d"nodes"\x3e\t\t\t\x3cxsl:with-param name\x3d"node" select\x3d"." /\x3e\t\t\t\x3cxsl:with-param name\x3d"is_last" select\x3d"number(position() \x3d last())" /\x3e\t\t\x3c/xsl:call-template\x3e\t\x3c/xsl:for-each\x3e\t\x3c/ul\x3e\x3c/xsl:template\x3e\x3cxsl:template name\x3d"nodes"\x3e\t\x3cxsl:param name\x3d"node" /\x3e\t\x3cxsl:param name\x3d"is_last" /\x3e\t\x3cxsl:variable name\x3d"children" select\x3d"count(//item[@parent_id\x3d$node/attribute::id]) \x26gt; 0" /\x3e\t\x3cli\x3e\t\x3cxsl:attribute name\x3d"class"\x3e\t\t\x3cxsl:if test\x3d"$is_last \x3d true()"\x3ejstree-last \x3c/xsl:if\x3e\t\t\x3cxsl:choose\x3e\t\t\t\x3cxsl:when test\x3d"@state \x3d \'open\'"\x3ejstree-open \x3c/xsl:when\x3e\t\t\t\x3cxsl:when test\x3d"$children or @hasChildren or @state \x3d \'closed\'"\x3ejstree-closed \x3c/xsl:when\x3e\t\t\t\x3cxsl:otherwise\x3ejstree-leaf \x3c/xsl:otherwise\x3e\t\t\x3c/xsl:choose\x3e\t\t\x3cxsl:value-of select\x3d"@class" /\x3e\t\x3c/xsl:attribute\x3e\t\x3cxsl:for-each select\x3d"@*"\x3e\t\t\x3cxsl:if test\x3d"name() !\x3d \'parent_id\' and name() !\x3d \'hasChildren\' and name() !\x3d \'class\' and name() !\x3d \'state\'"\x3e\t\t\x3cxsl:attribute name\x3d"{name()}"\x3e\x3cxsl:value-of select\x3d"." /\x3e\x3c/xsl:attribute\x3e\t\t\x3c/xsl:if\x3e\t\x3c/xsl:for-each\x3e\t\x3cins class\x3d"jstree-icon"\x3e\x3cxsl:text\x3e\x26#xa0;\x3c/xsl:text\x3e\x3c/ins\x3e\t\x3cxsl:for-each select\x3d"content/name"\x3e\t\t\x3ca\x3e\t\t\x3cxsl:attribute name\x3d"href"\x3e\t\t\t\x3cxsl:choose\x3e\t\t\t\x3cxsl:when test\x3d"@href"\x3e\x3cxsl:value-of select\x3d"@href" /\x3e\x3c/xsl:when\x3e\t\t\t\x3cxsl:otherwise\x3e#\x3c/xsl:otherwise\x3e\t\t\t\x3c/xsl:choose\x3e\t\t\x3c/xsl:attribute\x3e\t\t\x3cxsl:attribute name\x3d"class"\x3e\x3cxsl:value-of select\x3d"@lang" /\x3e \x3cxsl:value-of select\x3d"@class" /\x3e\x3c/xsl:attribute\x3e\t\t\x3cxsl:attribute name\x3d"style"\x3e\x3cxsl:value-of select\x3d"@style" /\x3e\x3c/xsl:attribute\x3e\t\t\x3cxsl:for-each select\x3d"@*"\x3e\t\t\t\x3cxsl:if test\x3d"name() !\x3d \'style\' and name() !\x3d \'class\' and name() !\x3d \'href\'"\x3e\t\t\t\t\x3cxsl:attribute name\x3d"{name()}"\x3e\x3cxsl:value-of select\x3d"." /\x3e\x3c/xsl:attribute\x3e\t\t\t\x3c/xsl:if\x3e\t\t\x3c/xsl:for-each\x3e\t\t\t\x3cins\x3e\t\t\t\t\x3cxsl:attribute name\x3d"class"\x3ejstree-icon \t\t\t\t\t\x3cxsl:if test\x3d"string-length(attribute::icon) \x3e 0 and not(contains(@icon,\'/\'))"\x3e\x3cxsl:value-of select\x3d"@icon" /\x3e\x3c/xsl:if\x3e\t\t\t\t\x3c/xsl:attribute\x3e\t\t\t\t\x3cxsl:if test\x3d"string-length(attribute::icon) \x3e 0 and contains(@icon,\'/\')"\x3e\x3cxsl:attribute name\x3d"style"\x3ebackground:url(\x3cxsl:value-of select\x3d"@icon" /\x3e) center center no-repeat;\x3c/xsl:attribute\x3e\x3c/xsl:if\x3e\t\t\t\t\x3cxsl:text\x3e\x26#xa0;\x3c/xsl:text\x3e\t\t\t\x3c/ins\x3e\t\t\t\x3cxsl:copy-of select\x3d"./child::node()" /\x3e\t\t\x3c/a\x3e\t\x3c/xsl:for-each\x3e\t\x3cxsl:if test\x3d"$children"\x3e\t\t\x3cul\x3e\t\t\x3cxsl:for-each select\x3d"//item[@parent_id\x3d$node/attribute::id]"\x3e\t\t\t\x3cxsl:call-template name\x3d"nodes"\x3e\t\t\t\t\x3cxsl:with-param name\x3d"node" select\x3d"." /\x3e\t\t\t\t\x3cxsl:with-param name\x3d"is_last" select\x3d"number(position() \x3d last())" /\x3e\t\t\t\x3c/xsl:call-template\x3e\t\t\x3c/xsl:for-each\x3e\t\t\x3c/ul\x3e\t\x3c/xsl:if\x3e\t\x3c/li\x3e\x3c/xsl:template\x3e\x3c/xsl:stylesheet\x3e'},
c=function(a){return a.toString().replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26apos;")};b.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,b,c){var d=this;this.load_node_xml(a,function(){d.__callback({obj:d._get_node(a)});b.call(this)},c)},_is_loaded:function(a){var c=this._get_settings().xml_data;a=this._get_node(a);
return-1==a||!a||!c.ajax&&!b.isFunction(c.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_xml:function(a,c,f){var d=this.get_settings().xml_data,e=function(){},h=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !d.data&&!d.ajax:throw"Neither data nor ajax settings supplied.";case b.isFunction(d.data):d.data.call(this,a,b.proxy(function(e){this.parse_xml(e,b.proxy(function(e){e&&
(e=e.replace(/ ?xmlns="[^"]*"/ig,""),10<e.length?(e=b(e),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(e),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),d.clean_node&&this.clean_node(a),c&&c.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),d.correct_state&&(this.correct_state(a),c&&c.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),
c&&c.call(this)))},this))},this));break;case !!d.data&&!d.ajax||!!d.data&&!!d.ajax&&(!a||-1===a):a&&-1!=a||this.parse_xml(d.data,b.proxy(function(e){e?(e=e.replace(/ ?xmlns="[^"]*"/ig,""),10<e.length&&(e=b(e),this.get_container().children("ul").empty().append(e.children()),d.clean_node&&this.clean_node(a),c&&c.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),c&&c.call(this))},this));break;case !d.data&&!!d.ajax||!!d.data&&!!d.ajax&&a&&-1!==a:e=function(b,c,e){var g=this.get_settings().xml_data.ajax.error;
g&&g.call(this,b,c,e);-1!==a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===c&&d.correct_state&&this.correct_state(a)):"success"===c&&d.correct_state&&this.get_container().children("ul").empty();f&&f.call(this)},h=function(f,g,h){f=h.responseText;var k=this.get_settings().xml_data.ajax.success;k&&(f=k.call(this,f,g,h)||f);if(""===f||f&&f.toString&&""===f.toString().replace(/^[\s\n]+$/,""))return e.call(this,h,g,"");this.parse_xml(f,
b.proxy(function(e){e&&(e=e.replace(/ ?xmlns="[^"]*"/ig,""),10<e.length?(e=b(e),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(e),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),d.clean_node&&this.clean_node(a),c&&c.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),d.correct_state&&(this.correct_state(a),c&&c.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),
c&&c.call(this)))},this))},d.ajax.context=this,d.ajax.error=e,d.ajax.success=h,d.ajax.dataType||(d.ajax.dataType="xml"),b.isFunction(d.ajax.url)&&(d.ajax.url=d.ajax.url.call(this,a)),b.isFunction(d.ajax.data)&&(d.ajax.data=d.ajax.data.call(this,a)),b.ajax(d.ajax)}},parse_xml:function(c,d){var e=this._get_settings().xml_data;b.vakata.xslt(c,a[e.xsl],d)},get_xml:function(a,d,f,g,k){var e="",l=this._get_settings(),q=this,m,n,p,r,t;a||(a="flat");k||(k=0);(d=this._get_node(d))&&-1!==d||(d=this.get_container().find("\x3e ul \x3e li"));
f=b.isArray(f)?f:["id","class"];!k&&this.data.types&&-1===b.inArray(l.types.type_attr,f)&&f.push(l.types.type_attr);g=b.isArray(g)?g:[];k||(l.xml_data.get_include_preamble&&(e+='\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e'),e+="\x3croot\x3e");d.each(function(){e+="\x3citem";p=b(this);b.each(f,function(a,b){a=p.attr(b);l.xml_data.get_skip_empty&&"undefined"===typeof a||(e+=" "+b+'\x3d"'+c((" "+(a||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});
p.hasClass("jstree-open")&&(e+=' state\x3d"open"');p.hasClass("jstree-closed")&&(e+=' state\x3d"closed"');"flat"===a&&(e+=' parent_id\x3d"'+c(k)+'"');e+="\x3e";e+="\x3ccontent\x3e";r=p.children("a");r.each(function(){m=b(this);t=!1;e+="\x3cname";-1!==b.inArray("languages",l.plugins)&&b.each(l.languages,function(a,b){if(m.hasClass(b))return e+=' lang\x3d"'+c(b)+'"',t=b,!1});g.length&&b.each(g,function(a,b){a=m.attr(b);l.xml_data.get_skip_empty&&"undefined"===typeof a||(e+=" "+b+'\x3d"'+c((" "+a||"").replace(/ jstree[^ ]*/ig,
"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});m.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(e+=' icon\x3d"'+c(m.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');m.children("ins").get(0).style.backgroundImage.length&&(e+=' icon\x3d"'+c(m.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+
'"');e+="\x3e";e+="\x3c![CDATA["+q.get_text(m,t)+"]]\x3e";e+="\x3c/name\x3e"});e+="\x3c/content\x3e";n=p[0].id||!0;p=p.find("\x3e ul \x3e li");n=p.length?q.get_xml(a,p,f,g,n):"";"nest"==a&&(e+=n);e+="\x3c/item\x3e";"flat"==a&&(e+=n)});k||(e+="\x3c/root\x3e");return e}}})})(jQuery);(function(b){b.expr[":"].jstree_contains=function(a,b,e){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf(e[3].toLowerCase())};b.expr[":"].jstree_title_contains=function(a,b,e){return 0<=(a.getAttribute("title")||
"").toLowerCase().indexOf(e[3].toLowerCase())};b.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=b();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(a,c){b(this).children("ul").find("li").hide().removeClass("jstree-last");c.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){b(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){b(this).children("ul").find("li").css("display",
"").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(a,c){if(""===b.trim(a))this.clear_search();else{var e=this.get_settings().search,d=this,f=function(){};this.data.search.str=a;if(!c&&!1!==e.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;f=function(a,b,c){var d=this.get_settings().search.ajax.success;d&&(a=d.call(this,a,b,c)||a);this.data.search.to_open=
a;this._search_open()};e.ajax.context=this;e.ajax.error=function(){};e.ajax.success=f;b.isFunction(e.ajax.url)&&(e.ajax.url=e.ajax.url.call(this,a));b.isFunction(e.ajax.data)&&(e.ajax.data=e.ajax.data.call(this,a));e.ajax.data||(e.ajax.data={search_string:a});if(!e.ajax.dataType||/^json/.exec(e.ajax.dataType))e.ajax.dataType="json";b.ajax(e.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():
"")+":"+e.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){d.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,str:a})}},clear_search:function(a){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=b()},_search_open:function(a){var c=this;a=!0;var e=[],d=[];this.data.search.to_open.length&&(b.each(this.data.search.to_open,
function(a,c){if("#"==c)return!0;b(c).length&&b(c).is(".jstree-closed")?e.push(c):d.push(c)}),e.length&&(this.data.search.to_open=d,b.each(e,function(a,b){c.open_node(b,function(){c._search_open(!0)})}),a=!1));a&&this.search(this.data.search.str,!0)}}})})(jQuery);(function(b){b.vakata.context={hide_on_mouseleave:!1,cnt:b("\x3cdiv id\x3d'vakata-contextmenu' /\x3e"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(a,c,e,d,f,g,k){b.vakata.context.rtl=!!k;if(a=b.vakata.context.parse(a)){b.vakata.context.vis=
!0;b.vakata.context.tgt=c;b.vakata.context.par=g||c||null;b.vakata.context.data=f||null;b.vakata.context.cnt.html(a).css({visibility:"hidden",display:"block",left:0,top:0});if(b.vakata.context.hide_on_mouseleave)b.vakata.context.cnt.one("mouseleave",function(a){b.vakata.context.hide()});f=b.vakata.context.cnt.height();g=b.vakata.context.cnt.width();e+g>b(document).width()&&(e=b(document).width()-(g+5),b.vakata.context.cnt.find("li \x3e ul").addClass("right"));d+f>b(document).height()&&(d-=f+c[0].offsetHeight,
b.vakata.context.cnt.find("li \x3e ul").addClass("bottom"));b.vakata.context.cnt.css({left:e,top:d}).find("li:has(ul)").bind("mouseenter",function(a){a=b(document).width();var c=b(document).height(),d=b(this).children("ul").show();a!==b(document).width()&&d.toggleClass("right");c!==b(document).height()&&d.toggleClass("bottom")}).bind("mouseleave",function(a){b(this).children("ul").hide()}).end().css({visibility:"visible"}).show();b(document).triggerHandler("context_show.vakata")}},hide:function(){b.vakata.context.vis=
!1;b.vakata.context.cnt.attr("class","").css({visibility:"hidden"});b(document).triggerHandler("context_hide.vakata")},parse:function(a,c){if(!a)return!1;var e="",d=!1,f=!0;c||(b.vakata.context.func={});e+="\x3cul\x3e";b.each(a,function(a,c){if(!c)return!0;b.vakata.context.func[a]=c.action;!f&&c.separator_before&&(e+="\x3cli class\x3d'vakata-separator vakata-separator-before'\x3e\x3c/li\x3e");f=!1;e+="\x3cli class\x3d'"+(c._class||"")+(c._disabled?" jstree-contextmenu-disabled ":"")+"'\x3e\x3cins ";
c.icon&&-1===c.icon.indexOf("/")&&(e+=" class\x3d'"+c.icon+"' ");c.icon&&-1!==c.icon.indexOf("/")&&(e+=" style\x3d'background:url("+c.icon+") center center no-repeat;' ");e+="\x3e\x26#160;\x3c/ins\x3e\x3ca href\x3d'#' rel\x3d'"+a+"'\x3e";c.submenu&&(e+="\x3cspan style\x3d'float:"+(b.vakata.context.rtl?"left":"right")+";'\x3e\x26raquo;\x3c/span\x3e");e+=c.label+"\x3c/a\x3e";c.submenu&&(d=b.vakata.context.parse(c.submenu,!0))&&(e+=d);e+="\x3c/li\x3e";c.separator_after&&(e+="\x3cli class\x3d'vakata-separator vakata-separator-after'\x3e\x3c/li\x3e",
f=!0)});e=e.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");e+="\x3c/ul\x3e";b(document).triggerHandler("context_parse.vakata");return 10<e.length?e:!1},exec:function(a){return b.isFunction(b.vakata.context.func[a])?(b.vakata.context.func[a].call(b.vakata.context.data,b.vakata.context.par),!0):!1}};b(function(){b.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover \x3e a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});b.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(a){!b(this).parent().hasClass("jstree-contextmenu-disabled")&&b.vakata.context.exec(b(this).attr("rel"))?b.vakata.context.hide():b(this).blur()}).delegate("a","mouseover",function(){b.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");b(document).bind("mousedown",function(a){b.vakata.context.vis&&!b.contains(b.vakata.context.cnt[0],a.target)&&
b.vakata.context.hide()});"undefined"!==typeof b.hotkeys&&b(document).bind("keydown","up",function(a){if(b.vakata.context.vis){var c=b.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();c.length||(c=b.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());c.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","down",function(a){if(b.vakata.context.vis){var c=
b.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();c.length||(c=b.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());c.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","right",function(a){b.vakata.context.vis&&(b.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","left",function(a){b.vakata.context.vis&&(b.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","esc",function(a){b.vakata.context.hide();a.preventDefault()}).bind("keydown","space",function(a){b.vakata.context.cnt.find(".vakata-hover").last().children("a").click();a.preventDefault()})});b.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",b.proxy(function(a){a.preventDefault();b(a.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY)},this)).delegate("a","click.jstree",b.proxy(function(a){this.data.contextmenu&&b.vakata.context.hide()},this)).bind("destroy.jstree",b.proxy(function(){this.data.contextmenu&&b.vakata.context.hide()},this));b(document).bind("context_hide.vakata",b.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(a,c,e){a=this._get_node(a);var d=this.get_settings().contextmenu,f=a.children("a:visible:eq(0)");d.select_node&&this.data.ui&&!this.is_selected(a)&&(this.deselect_all(),this.select_node(a,!0));if(d.show_at_node||
"undefined"===typeof c||"undefined"===typeof e)e=f.offset(),c=e.left,e=e.top+this.data.core.li_height;d=a.data("jstree")&&a.data("jstree").contextmenu?a.data("jstree").contextmenu:d.items;b.isFunction(d)&&(d=d.call(this,a));this.data.contextmenu=!0;b.vakata.context.show(d,f,c,e,this,a,this._get_settings().core.rtl);this.data.themes&&b.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(b){b.jstree.plugin("types",{__init:function(){var a=this._get_settings().types;
this.data.types.attach_to=[];this.get_container().bind("init.jstree",b.proxy(function(){var c=a.type_attr,e="",d=this;b.each(a.types,function(a,g){b.each(g,function(a,b){/^(max_depth|max_children|icon|valid_children)$/.test(a)||d.data.types.attach_to.push(a)});if(!g.icon)return!0;if(g.icon.image||g.icon.position)e="default"==a?e+(".jstree-"+d.get_index()+" a \x3e .jstree-icon { "):e+(".jstree-"+d.get_index()+" li["+c+'\x3d"'+a+'"] \x3e a \x3e .jstree-icon { '),g.icon.image&&(e+=" background-image:url("+
g.icon.image+"); "),e=g.icon.position?e+(" background-position:"+g.icon.position+"; "):e+" background-position:0 0; ",e+="} "});""!==e&&b.vakata.css.add_sheet({str:e,title:"jstree-types"})},this)).bind("before.jstree",b.proxy(function(a,e){var c;if((c=(c=this._get_settings().types.use_data?this._get_node(e.args[0]):!1)&&-1!==c&&c.length?c.data("jstree"):!1)&&c.types&&!1===c.types[e.func])return a.stopImmediatePropagation(),!1;if(-1!==b.inArray(e.func,this.data.types.attach_to)&&e.args[0]&&(e.args[0].tagName||
e.args[0].jquery)){c=this._get_settings().types.types;var f=this._get_type(e.args[0]);if((c[f]&&"undefined"!==typeof c[f][e.func]||c["default"]&&"undefined"!==typeof c["default"][e.func])&&!1===this._check(e.func,e.args[0]))return a.stopImmediatePropagation(),!1}},this));r&&this.get_container().bind("load_node.jstree set_type.jstree",b.proxy(function(a,e){var c=e&&e.rslt&&e.rslt.obj&&-1!==e.rslt.obj?this._get_node(e.rslt.obj).parent():this.get_container_ul(),f=!1,g=this._get_settings().types;b.each(g.types,
function(a,b){b.icon&&(b.icon.image||b.icon.position)&&(f="default"===a?c.find("li \x3e a \x3e .jstree-icon"):c.find("li["+g.type_attr+"\x3d'"+a+"'] \x3e a \x3e .jstree-icon"),b.icon.image&&f.css("backgroundImage","url("+b.icon.image+")"),f.css("backgroundPosition",b.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,b){b.type&&
this._get_settings().types.use_data&&this.set_type(b.type,a)},_get_type:function(a){return(a=this._get_node(a))&&a.length?a.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(a,b){b=this._get_node(b);var c=b.length&&a?b.attr(this._get_settings().types.type_attr,a):!1;c&&this.__callback({obj:b,type:a});return c},_check:function(a,c,e){c=this._get_node(c);var d=!1,f=this._get_type(c),g=0,k=this,h=this._get_settings().types,l=!1;if(-1===c)if(h[a])d=h[a];else return;else{if(!1===
f)return;(l=h.use_data?c.data("jstree"):!1)&&l.types&&"undefined"!==typeof l.types[a]?d=l.types[a]:h.types[f]&&"undefined"!==typeof h.types[f][a]?d=h.types[f][a]:h.types["default"]&&"undefined"!==typeof h.types["default"][a]&&(d=h.types["default"][a])}b.isFunction(d)&&(d=d.call(this,c));"max_depth"===a&&-1!==c&&!1!==e&&-2!==h.max_depth&&0!==d&&c.children("a:eq(0)").parentsUntil(".jstree","li").each(function(b){if(-1!==h.max_depth&&0>=h.max_depth-(b+1))return d=0,!1;g=0===b?d:k._check(a,this,!1);if(-1!==
g&&0>=g-(b+1))return d=0,!1;0<=g&&(g-(b+1)<d||0>d)&&(d=g-(b+1));0<=h.max_depth&&(h.max_depth-(b+1)<d||0>d)&&(d=h.max_depth-(b+1))});return d},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),c=a.rt._get_settings().types,e=a.rt._check("max_children",a.cr),d=a.rt._check("max_depth",a.cr),f=a.rt._check("valid_children",a.cr),g=0,k=1;if("none"===f||b.isArray(f)&&a.ot&&a.ot._get_type&&(a.o.each(function(){if(-1===b.inArray(a.ot._get_type(this),f))return k=!1}),!1===k)||-2!==
c.max_children&&-1!==e&&(g=-1===a.cr?this.get_container().find("\x3e ul \x3e li").not(a.o).length:a.cr.find("\x3e ul \x3e li").not(a.o).length,g+a.o.length>e))return!1;if(-2!==c.max_depth&&-1!==d){k=0;if(0===d)return!1;if("undefined"===typeof a.o.d){for(c=a.o;0<c.length;)c=c.find("\x3e ul \x3e li"),k++;a.o.d=k}if(0>d-a.o.d)return!1}return!0},create_node:function(a,c,e,d,f,g){if(!g&&(f||this._is_loaded(a))){var k="string"==typeof c&&c.match(/^before|after$/i)&&-1!==a?this._get_parent(a):this._get_node(a),
h=this._get_settings().types,l=this._check("max_children",k),q=this._check("max_depth",k),m=this._check("valid_children",k);"string"===typeof e&&(e={data:e});e||(e={});if("none"===m)return!1;if(b.isArray(m))if(!e.attr||!e.attr[h.type_attr])e.attr||(e.attr={}),e.attr[h.type_attr]=m[0];else if(-1===b.inArray(e.attr[h.type_attr],m))return!1;if(-2!==h.max_children&&-1!==l&&(k=-1===k?this.get_container().find("\x3e ul \x3e li").length:k.find("\x3e ul \x3e li").length,k+1>l)||-2!==h.max_depth&&-1!==q&&
0>q-1)return!1}return this.__call_old(!0,a,c,e,d,f,g)}}})})(jQuery);(function(b){b.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" \x3e ul \x3e li").clone(!0);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,b,e){var c=this;this.load_node_html(a,function(){c.__callback({obj:c._get_node(a)});
b.call(this)},e)},_is_loaded:function(a){a=this._get_node(a);return-1==a||!a||!this._get_settings().html_data.ajax&&!b.isFunction(this._get_settings().html_data.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_html:function(a,c,e){var d=this.get_settings().html_data,f=function(){};var g=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case b.isFunction(d.data):d.data.call(this,
a,b.proxy(function(e){e&&""!==e&&e.toString&&""!==e.toString().replace(/^[\s\n]+$/,"")?(e=b(e),e.is("ul")||(e=b("\x3cul /\x3e").append(e)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(e).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(a),c&&c.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),
d.correct_state&&(this.correct_state(a),c&&c.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),c&&c.call(this))},this));break;case !d.data&&!d.ajax:a&&-1!=a||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node());c&&c.call(this);break;case !!d.data&&!d.ajax||!!d.data&&!!d.ajax&&(!a||-1===a):a&&-1!=a||(g=b(d.data),g.is("ul")||(g=b("\x3cul /\x3e").append(g)),this.get_container().children("ul").empty().append(g.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node());c&&c.call(this);break;case !d.data&&!!d.ajax||!!d.data&&!!d.ajax&&a&&-1!==a:a=this._get_node(a),f=function(b,c,f){var g=this.get_settings().html_data.ajax.error;g&&g.call(this,b,c,f);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===c&&d.correct_state&&this.correct_state(a)):"success"===c&&d.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)},g=function(e,g,l){var h=this.get_settings().html_data.ajax.success;
h&&(e=h.call(this,e,g,l)||e);if(""===e||e&&e.toString&&""===e.toString().replace(/^[\s\n]+$/,""))return f.call(this,l,g,"");e?(e=b(e),e.is("ul")||(e=b("\x3cul /\x3e").append(e)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(e).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(a),c&&c.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),
d.correct_state&&(this.correct_state(a),c&&c.call(this))):d.correct_state&&(this.get_container().children("ul").empty(),c&&c.call(this))},d.ajax.context=this,d.ajax.error=f,d.ajax.success=g,d.ajax.dataType||(d.ajax.dataType="html"),b.isFunction(d.ajax.url)&&(d.ajax.url=d.ajax.url.call(this,a)),b.isFunction(d.ajax.data)&&(d.ajax.data=d.ajax.data.call(this,a)),b.ajax(d.ajax)}}}});b.jstree.defaults.plugins.push("html_data")})(jQuery);(function(b){b.jstree.plugin("themeroller",{__init:function(){var a=
this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(c){b(c.currentTarget).hasClass("jstree-loading")||b(this).addClass(a.item_h)}).delegate("a","mouseleave.jstree",function(){b(this).removeClass(a.item_h)}).bind("init.jstree",b.proxy(function(a,b){b.inst.get_container().find("\x3e ul \x3e li \x3e .jstree-loading \x3e ins").addClass("ui-icon-refresh");this._themeroller(b.inst.get_container().find("\x3e ul \x3e li"))},
this)).bind("open_node.jstree create_node.jstree",b.proxy(function(a,b){this._themeroller(b.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",b.proxy(function(a){this._themeroller()},this)).bind("close_node.jstree",b.proxy(function(a,b){this._themeroller(b.rslt.obj)},this)).bind("delete_node.jstree",b.proxy(function(a,b){this._themeroller(b.rslt.parent)},this)).bind("correct_state.jstree",b.proxy(function(b,e){e.rslt.obj.children("ins.jstree-icon").removeClass(a.opened+" "+a.closed+" ui-icon").end().find("\x3e a \x3e ins.ui-icon").filter(function(){return-1===
this.className.toString().replace(a.item_clsd,"").replace(a.item_open,"").replace(a.item_leaf,"").indexOf("ui-icon-")}).removeClass(a.item_open+" "+a.item_clsd).addClass(a.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",b.proxy(function(b,e){e.rslt.obj.children("a").addClass(a.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",b.proxy(function(b,e){this.get_container().find("a."+a.item_a).removeClass(a.item_a).end().find("a.jstree-clicked").addClass(a.item_a)},this)).bind("dehover_node.jstree",
b.proxy(function(b,e){e.rslt.obj.children("a").removeClass(a.item_h)},this)).bind("hover_node.jstree",b.proxy(function(b,e){this.get_container().find("a."+a.item_h).not(e.rslt.obj).removeClass(a.item_h);e.rslt.obj.children("a").addClass(a.item_h)},this)).bind("move_node.jstree",b.proxy(function(a,b){this._themeroller(b.rslt.o);this._themeroller(b.rslt.op)},this))},__destroy:function(){var a=this._get_settings().themeroller,c=["ui-icon"];b.each(a,function(a,b){b=b.split(" ");b.length&&(c=c.concat(b))});
this.get_container().removeClass("ui-widget-content").find("."+c.join(", .")).removeClass(c.join(" "))},_fn:{_themeroller:function(a){var b=this._get_settings().themeroller;a=a&&-1!=a?this._get_node(a).parent():this.get_container_ul();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(b.opened).addClass("ui-icon "+b.closed).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,
"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_leaf+" "+b.item_open).addClass(b.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(b.closed).addClass("ui-icon "+b.opened).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_leaf+
" "+b.item_clsd).addClass(b.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(b.closed+" ui-icon "+b.opened).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_clsd+" "+b.item_open).addClass(b.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",
closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});b(function(){b.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})})})(jQuery);(function(b){b.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",
b.proxy(function(a,c){var e=[],d=!0;"move_node"==c.func&&!0===c.args[4]&&c.args[0].o&&c.args[0].o.length&&(c.args[0].o.children("a").each(function(){e.push(b(this).text().replace(/^\s+/g,""))}),d=this._check_unique(e,c.args[0].np.find("\x3e ul \x3e li").not(c.args[0].o),"move_node"));"create_node"==c.func&&(c.args[4]||this._is_loaded(c.args[0]))&&(d=this._get_node(c.args[0]),!c.args[1]||"before"!==c.args[1]&&"after"!==c.args[1]||(d=this._get_parent(c.args[0]))&&-1!==d||(d=this.get_container()),"string"===
typeof c.args[2]?e.push(c.args[2]):c.args[2]&&c.args[2].data?e.push(c.args[2].data):e.push(this._get_string("new_node")),d=this._check_unique(e,d.find("\x3e ul \x3e li"),"create_node"));"rename_node"==c.func&&(e.push(c.args[1]),c=this._get_node(c.args[0]),(d=this._get_parent(c))&&-1!==d||(d=this.get_container()),d=this._check_unique(e,d.find("\x3e ul \x3e li").not(c),"rename_node"));if(!d)return a.stopPropagation(),!1},this))},defaults:{error_callback:b.noop},_fn:{_check_unique:function(a,c,e){var d=
[];c.children("a").each(function(){d.push(b(this).text().replace(/^\s+/g,""))});if(!d.length||!a.length)return!0;d=d.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");return d.length+a.length!=d.concat(a).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length?(this._get_settings().unique.error_callback.call(null,a,c,e),!1):!0},check_move:function(){if(!this.__call_old())return!1;
var a=this._get_move(),c=[];return a.o&&a.o.length?(a.o.children("a").each(function(){c.push(b(this).text().replace(/^\s+/g,""))}),this._check_unique(c,a.np.find("\x3e ul \x3e li").not(a.o),"check_move")):!0}}})})(jQuery);(function(b){b.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",b.proxy(function(a,b){this._get_settings().core.animation=
0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",b.proxy(function(a,b){this._prepare_wholerow_span(b&&b.rslt&&b.rslt.obj?b.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",b.proxy(function(a,b){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,b){return function(){a._prepare_wholerow_ul(b)}}(this,b&&b.rslt&&b.rslt.obj?
b.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",b.proxy(function(a,b){this.get_container().find(" \x3e .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",b.proxy(function(a,c){c.rslt.obj.each(function(){c.inst.get_container().find(" \x3e .jstree-wholerow li:visible:eq("+parseInt((b(this).offset().top-c.inst.get_container().offset().top+c.inst.get_container()[0].scrollTop)/
c.inst.data.core.li_height,10)+")").children("a").attr("class",c.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",b.proxy(function(a,b){this.get_container().find(" \x3e .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===a.type&&this.get_container().find(" \x3e .jstree-wholerow li:visible:eq("+parseInt((b.rslt.obj.offset().top-this.get_container().offset().top+
this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",b.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(a){var c=b(a.currentTarget);"A"===a.target.tagName||"INS"===a.target.tagName&&c.closest("li").is(".jstree-open, .jstree-closed")||(c.closest("li").children("a:visible:eq(0)").click(),a.stopImmediatePropagation())}).delegate("li","mouseover.jstree",b.proxy(function(a){a.stopImmediatePropagation();
if(b(a.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(a.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",b.proxy(function(a){b(a.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(a.currentTarget)},this));(t||r)&&b.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();this.get_container().find(".jstree-wholerow-span").remove()},
_fn:{_prepare_wholerow_span:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("\x3e ul \x3e li");!1!==a&&a.each(function(){b(this).find("li").andSelf().each(function(){var a=b(this);if(a.children(".jstree-wholerow-span").length)return!0;a.prepend("\x3cspan class\x3d'jstree-wholerow-span' style\x3d'width:"+18*a.parentsUntil(".jstree","li").length+"px;'\x3e\x26#160;\x3c/span\x3e")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),b=a.html();a.addClass("jstree-wholerow-real");
this.data.wholerow.last_html!==b&&(this.data.wholerow.last_html=b,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("\x3cdiv class\x3d'jstree-wholerow' /\x3e").parent().width(a.parent()[0].scrollWidth).css("top",-1*(a.height()+(t?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});b(function(){var a=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
u&&(a+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(t||r)a+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";b.vakata.css.add_sheet({str:a,title:"jstree"})})})(jQuery);(function(b){var a=
["getChildren","getChildrenCount","getAttr","getName","getProps"],c=function(a,c){var d=!0;a=a||{};c=[].concat(c);b.each(c,function(c,e){if(!b.isFunction(a[e]))return d=!1});return d};b.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(e,d){e=-1==e?this._get_settings().model.object:e.data("jstree_model");if(!c(e,a))return d.call(null,!1);this._get_settings().model.async?e.getChildren(b.proxy(function(a){this.model_done(a,
d)},this)):this.model_done(e.getChildren(),d)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(a,c){var d=[],e=this._get_settings(),k=this;b.isArray(a)||(a=[a]);b.each(a,function(a,c){a=c.getProps()||{};a.attr=c.getAttr()||{};c.getChildrenCount()&&(a.state="closed");a.data=c.getName();b.isArray(a.data)||(a.data=[a.data]);k.data.types&&b.isFunction(c.getType)&&(a.attr[e.types.type_attr]=c.getType());a.attr.id&&e.model.id_prefix&&(a.attr.id=e.model.id_prefix+a.attr.id);a.metadata||
(a.metadata={});a.metadata.jstree_model=c;d.push(a)});c.call(null,d)}}})})(jQuery)}})();;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:path-and-line', location = '/static/bitbucket/internal/model/path-and-line.js' */
define("bitbucket/internal/model/path-and-line",["module","exports","bitbucket/internal/model/path"],function(k,f,l){function g(a,d,b){this.path=new h.default(a&&a.path||a);if(d)this.line={no:d,type:b||"TO"};else if(a&&a.line)this.line=a.line;else if(a=this.path.getComponents(),b=a.length-1,0<=b){var c=a[b],e=Math.max(c.lastIndexOf("?F"),c.lastIndexOf("?T"));0<e&&(d=Number(c.substring(e+2))||void 0)&&(this.line={no:d,type:"F"===c[e+1]?"FROM":"TO"},a[b]=c.substring(0,e),this.path=new h.default(a))}}
Object.defineProperty(f,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(l);g.prototype.toString=function(){return this.path.toString()+(this.line?("FROM"===this.line.type?"?F":"?T")+this.line.no:"")};f.default=g;k.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:difftree', location = '/static/bitbucket/internal/feature/commit/difftree/difftree-search-input.js' */
define("bitbucket/internal/feature/commit/difftree/difftree-search-input","module exports aui bacon jquery lodash bitbucket/internal/util/events bitbucket/internal/util/function".split(" "),function(k,b,c,l,m,n,p,q){function e(b){this.$el=(0,r.default)(bitbucket.internal.feature.difftree.searchInput(b));this._destroyables=[];var d=this.$el.find("input"),a=this.$el.find(".delete-button");this._destroyables.push(f.default.chainWith(a).on("click",function(a){a.preventDefault();d.val("").trigger("input")}));
this._destroyables.push(f.default.chainWith(d).on("input",function(b){a.toggle(!!this.value)}))}Object.defineProperty(b,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(c);c=babelHelpers.interopRequireDefault(l);var r=babelHelpers.interopRequireDefault(m),t=babelHelpers.interopRequireDefault(n),f=babelHelpers.interopRequireDefault(p),h=babelHelpers.interopRequireDefault(q);c.default;e.prototype.getInputs=function(){var b=this.$el.find(".delete-button").asEventStream("click"),d=this.$el.find("input").asEventStream("keyup"),
a=h.default.dotEq.bind(null,"keyCode"),c=d.filter(a(g.default.keyCode.ESCAPE));a=a(g.default.keyCode.ENTER);return d.filter(a).merge(c).doAction(".preventDefault").doAction(".currentTarget.blur").filter(a).flatMap(function(a){return a.target.value}).merge(b.map(h.default.constant(""))).skipDuplicates()};e.prototype.destroy=function(){t.default.invokeMap(this._destroyables,"destroy")};b.default=e;k.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:difftree', location = '/static/bitbucket/internal/feature/commit/difftree/difftree-search.js' */
define("bitbucket/internal/feature/commit/difftree/difftree-search","module exports aui bacon jquery lodash bitbucket/internal/feature/commit/difftree/difftree-search-input bitbucket/internal/model/path bitbucket/internal/model/path-and-line bitbucket/internal/util/bacon bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/promise bitbucket/internal/util/shortcuts".split(" "),function(v,l,w,x,y,z,A,B,C,D,E,F,G,H){function q(a,d){return{length:a.length,indexOf:function(b,
c){return d?b.indexOf(a,c):b.toLowerCase().indexOf(a.toLowerCase(),c)}}}function r(a,d){var b=d.indexOf(a);a=30<b?"..."+a.substring(b-30):a;for(var c=0,f="",e=0;c<a.length&&100>e;e++)b=d.indexOf(a,c),b=0>b?a.length:b,f+=m.default.escapeHtml(a.substring(c,b)),b<a.length&&(f+="\x3cstrong\x3e"+m.default.escapeHtml(a.substring(b,b+d.length))+"\x3c/strong\x3e"),c=b+d.length;return f}function I(a){function d(a){a.metadata.isDirectory?a.children.forEach(d):b[a.data.attr.href.substring(1)]=a}var b={};d(a);
return b}function J(a){return k.default.fromBinder(function(d){a.diffs.forEach(function(a){var b=new K.default(a.destination||a.source);(a.hunks||[]).forEach(function(a){a.segments.forEach(function(a){a.lines.forEach(function(e){d({path:b.toString(),type:a.type,lineNumber:"ADDED"===a.type?e.destination:e.source,line:e.line})})})})});d(new k.default.End);return n.default.noop})}function t(a,d,b){function c(a){a.children=a.children.filter(function(a){return a.metadata.isDirectory?c(a):a.children&&0<
a.children.length});return 0<a.children.length}a.searchTruncated=b.truncated;var f=I(a);L.default.split(J(b).filter(function(a){return 0<=d.indexOf(a.line)}),u.default.dot("path")).onValue(function(a){var b=h.default.reduce(a,function(a,b){return Math.max(a,b.lineNumber.toString().length)},0);a.forEach(function(a){var c=f[a.path];if(c){c.children=c.children||[];var e=new M.default(a.path,a.lineNumber,"ADDED"===a.type?"TO":"FROM"),g=bitbucket.internal.feature.difftree.searchTreeNode({changeType:a.type,
lineNumber:a.lineNumber.toString(),padding:b,titleContent:r(a.line.trim(),d)});c.children.push({data:{title:g,attr:{class:"jstree-search-leaf",title:a.line.trim(),href:"#"+e.toString()}},metadata:h.default.assign({},c.metadata,{path:e})})}})});c(a);b={linesMatched:h.default.reduce(a.children,function(a,b){return a+b.children.length},0),filesMatched:a.children.length,searchTruncated:a.searchTruncated};p.default.trigger("bitbucket.internal.ui.diff-view.search.result.details",null,b);return a}function g(a){this.input=
new N.default({placeholder:"Find text in diff and context lines"});this.caseSensitive=a;this._destroyables=[];this._destroyables.push(this.input);this._destroyables.push(p.default.chainWith(this.input.$el.closest("form")).on("submit",u.default.invoke("preventDefault")));this._destroyables.push({destroy:O.default.bind("requestDiffTreeSearch",this.focusSearch.bind(this))})}Object.defineProperty(l,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(w),k=babelHelpers.interopRequireDefault(x),
n=babelHelpers.interopRequireDefault(y),h=babelHelpers.interopRequireDefault(z),N=babelHelpers.interopRequireDefault(A),K=babelHelpers.interopRequireDefault(B),M=babelHelpers.interopRequireDefault(C),L=babelHelpers.interopRequireDefault(D),p=babelHelpers.interopRequireDefault(E),u=babelHelpers.interopRequireDefault(F),P=babelHelpers.interopRequireDefault(G),O=babelHelpers.interopRequireDefault(H);g.prototype.register=function(a,d){var b=this,c=this.input.getInputs();return c.flatMap(function(f){if(!f)return k.default.fromArray([{data:d(),
search:f}]);var e=(0,n.default)('\x3cdiv class\x3d"difftree-search-spinner"\x3e\x3c/div\x3e').prependTo(b.input.$el),g=b.input.$el.parent().find(".search-icon");g.addClass("invisible");e=P.default.spinner(e,a(f)).always(function(){g.removeClass("invisible")});return k.default.fromPromise(e,!0).takeUntil(c).map(h.default.partial(t,n.default.extend(!0,{},d()),new q(f,b.caseSensitive))).map(function(a){return{data:a,search:f}})})};g.prototype.focusSearch=function(){this.trigger("search-focus");this.input.$el.find("input").focus()};
h.default.assign(g.prototype,p.default.createEventMixin("diffTreeSearch",{localOnly:!0}));g.prototype.destroy=function(){h.default.invokeMap(this._destroyables,"destroy")};l.default={DiffTreeSearch:g,_filterDiffTree:t,_Text:q,_decorateTitle:r};v.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:difftree', location = '/static/bitbucket/internal/feature/commit/difftree/difftree-search-input.soy' */
// This file was automatically generated from difftree-search-input.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.difftree.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.difftree == 'undefined') { bitbucket.internal.feature.difftree = {}; }


bitbucket.internal.feature.difftree.searchInput = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<form class="aui search">' + aui.icons.icon({icon: 'search-small', useIconFont: true, size: 'small', extraClasses: 'search-icon'}) + aui.form.input({type: 'text', id: 'diff-search', extraClasses: opt_data.extraClasses, extraAttributes: '' + ((opt_data.placeholder) ? ' placeholder="' + soy.$$escapeHtml(opt_data.placeholder) + '"' : '')}) + bitbucket.internal.buttons.deleteButton({title: 'Delete'}) + '</form>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.difftree.searchInput.soyTemplateName = 'bitbucket.internal.feature.difftree.searchInput';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:difftree', location = '/static/bitbucket/internal/feature/commit/difftree/difftree.js' */
define("bitbucket/internal/feature/commit/difftree/difftree","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/util/state bitbucket/internal/feature/commit/difftree/difftree-search bitbucket/internal/feature/file-content/request-change bitbucket/internal/model/content-tree-node-types bitbucket/internal/model/path-and-line bitbucket/internal/util/ajax bitbucket/internal/util/events bitbucket/internal/util/property".split(" "),function(E,n,F,G,H,I,J,K,L,M,N,O,P,Q){function t(a,b){function c(a){if(a.metadata.isDirectory){a.state=
"open";a.data.icon="aui-icon aui-icon-small aui-iconfont-devtools-folder-open";var d,f=a.children.length;for(d=0;d<f&&e<b;d++){var g=a.children[d];c(g)}}else a.metadata.isFile&&(a.children&&0<a.children.length&&(a.state="open"),e+=a.children?a.children.length:1)}b=0<=b?b:200;var e=0;c(a);return a}function y(a,b){return a.children?b.children?a.data.title.toLowerCase()<b.data.title.toLowerCase()?-1:1:-1:b.children?1:a.data.title.toLowerCase()<b.data.title.toLowerCase()?-1:1}function u(a){a.childrenByTypeAndComponent=
void 0;var b,c=a.children.length,e;for(b=0;b<c;b++){var d=a.children[b];if(d.metadata.isDirectory){for(e=[d.data.title];1===d.children.length&&d.children[0].metadata.isDirectory;)d=d.children[0],e.push(d.data.title);d.data.title=e.join("/");a.children[b]=d;u(d)}}a.children.sort(y)}function z(a,b,c){var e={data:{icon:"aui-icon aui-icon-small aui-iconfont-devtools-folder-closed"},state:"closed",metadata:{isDirectory:!0},children:[],childrenByTypeAndComponent:{}},d,h=a.length;for(d=0;d<h;d++){var f=
a[d];var k=e;var l,v=f.path.components.length;for(l=0;l<v;l++){var q=f.path.components[l];var m=(l+1===v?"F":"D")+q;if(Object.prototype.hasOwnProperty.call(k.childrenByTypeAndComponent,m))k=k.childrenByTypeAndComponent[m];else{var r=l+1===v;var p=q=g.default.escapeHtml(q);f.conflict&&n?p=g.default.format("{0} has comments and a merge conflict",q):f.conflict?p=g.default.format("{0} has a merge conflict",q):n&&(p=g.default.format("{0} has comments",
q));if(r){var n=!(!f.properties||!f.properties.activeComments);r={data:{title:q,icon:"aui-icon aui-icon-small "+(f.nodeType===R.default.SUBMODULE?"aui-iconfont-devtools-submodule":n?"aui-iconfont-devtools-file-commented":"aui-iconfont-devtools-file"),attr:{id:"change"+d,class:"difftree-file change-type-"+f.type+(f.conflict?" conflict":""),href:"#"+encodeURI(f.path.toString),title:p}},metadata:babelHelpers.extends({isFile:!0,changeType:f.type,nodeType:f.nodeType,path:f.path,srcPath:f.srcPath,conflict:f.conflict,
contentId:f.contentId,fromContentId:f.fromContentId,executable:f.executable,srcExecutable:f.srcExecutable},b)}}else r={data:{title:q,icon:"aui-icon aui-icon-small aui-iconfont-devtools-folder-closed"},state:"closed",metadata:{isDirectory:!0},children:[],childrenByTypeAndComponent:{}};k.children.push(r);k=k.childrenByTypeAndComponent[m]=r}}}u(e);t(e,c);return e}function S(a,b,c){return T.default.rest().currentRepo().changes(c).withParams({start:a,limit:b})}function h(a,b,c,e){e=e||{};this._fileLimit=
e.maxChanges||1E3;U.default.getFromProvider("page.max.diff.lines").done(function(a){this._maxDiffLines=a}.bind(this));this._$wrapper=(0,m.default)(a);this._$toolbar=(0,m.default)(b);this._commitRange=c;this._hasOtherParents=!!e.hasOtherParents;this._urlBuilder=e.urlBuilder||S;this._searchUrlBuilder=e.searchUrlBuilder;this._diffViewType=e.diffViewType}function p(a,b){if(!(b=V(a,b))){for(;a&&a.children;)a=a.children[0];b=k.default.get(a,"metadata.isFile")?a:null}return b}function V(a,b){if(!b)return null;
for(b=b.slice(0);a&&a.children;){for(var c=b.shift(),e=!b.length,d=a.children.length;d--;){var g=a.children[d],f=k.default.unescape(g.data.title);if(c===f&&e===!!g.metadata.isFile){a=g;break}if(!e&&k.default.startsWith(f,c+"/")){for(;1<b.length&&k.default.startsWith(f,c+"/"+b[0]);)c+="/",c+=b.shift();if(f!==c)return null;a=g;break}}if(0>d)return null}return k.default.get(a,"metadata.isFile")?a:null}function w(a,b){if(a===b)return[b];for(var c=a.children?a.children.length:0;c--;){var e=w(a.children[c],
b);if(e)return e.unshift(a),e}return null}function x(a,b,c){c&&c.length&&!c.hasClass("jstree-leaf")&&(a.open_node(c),c=x(a,b,b.call(a,c)));return c}function A(a,b){b&&!b.hasClass("jstree-leaf")&&(b.hasClass("jstree-closed")?(a.open_node(b),b=x(a,B,B.call(a,b))):b.length&&(b=A(a,a._get_prev(b))));return b}function B(a){return this._get_children(a).filter(".jstree-last")}Object.defineProperty(n,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(F),m=babelHelpers.interopRequireDefault(G),
k=babelHelpers.interopRequireDefault(H),T=babelHelpers.interopRequireDefault(I);babelHelpers.interopRequireDefault(J);var W=babelHelpers.interopRequireDefault(K),C=babelHelpers.interopRequireDefault(L),R=babelHelpers.interopRequireDefault(M),D=babelHelpers.interopRequireDefault(N),X=babelHelpers.interopRequireDefault(O),l=babelHelpers.interopRequireDefault(P),U=babelHelpers.interopRequireDefault(Q);k.default.assign(h.prototype,l.default.createEventMixin("diffTree",{localOnly:!0}));h.prototype.init=
function(a){this._destroyables=[];this._selectedPathComponents=a;this._firstCommentAddedHandler=k.default.bind(this._firstCommentAddedHandler,this);this._lastCommentDeletedHandler=k.default.bind(this._lastCommentDeletedHandler,this);this._destroyables.push(l.default.chain().on("bitbucket.internal.feature.comments.firstCommentAdded",this._firstCommentAddedHandler).on("bitbucket.internal.feature.comments.lastCommentDeleted",this._lastCommentDeletedHandler));this._searchUrlBuilder&&this._destroyables.push(this._addSearch());
return this.data?this.dataReceived(this.data):this.requestData()};h.prototype._addSearch=function(){var a=this,b=[],c=new W.default.DiffTreeSearch,e=this._$wrapper.siblings(".file-tree-header"),d=(0,m.default)(bitbucket.internal.feature.difftree.searchWrapper({includeCollapseButton:!e.length}));d.prepend(c.input.$el);if(e.length)e.after(d),b.push({destroy:function(){return d.remove()}});else{var g=this._$toolbar.find("h4");g.replaceWith(d);b.push({destroy:function(){return d.replaceWith(g)}})}b.push(c);
b.push(l.default.chainWith(d.find(".search-button-when-collapsed")).on("click",function(){c.focusSearch()}));b.push(l.default.chainWith(c).on("search-focus",k.default.bind(this.trigger,this,"search-focus")));b.push({destroy:c.register(function(b){d.addClass("searching");return X.default.rest({url:a._searchUrlBuilder({path:"",commitRange:a._commitRange.toJSON()}).withParams({withComments:!1}).withParams(!b||!a._commitRange.getPullRequest()&&50>a._getFileCount(a.data,50)?{}:{filter:b}).build()}).done(function(){return d.removeClass("searching")})},
function(){return a.data}).onValue(function(b){d.toggleClass("searching",!!b.search);a.data_copy=a.data;a._searchEmpty=0===b.data.children.length;l.default.trigger("bitbucket.internal.feature.diffView.highlightSearch",null,b.search);a.dataReceived(t(b.data)).done(function(){a.data=a.data_copy;a._searchEmpty=null})})});return{destroy:function(){k.default.invokeMap(b,"destroy")}}};h.prototype._getFileCount=function(a,b){function c(a){return k.default.reduce(a.children,function(a,e){return a<b?a+(e.metadata.isFile?
1:c(e)):a},0)}return c(a)};h.prototype.invalidateCacheForLastUrl=function(){this._lastUrl&&C.default.invalidateCacheForUrl(this._lastUrl)};h.prototype._firstCommentAddedHandler=function(){this.invalidateCacheForLastUrl();this.getSelectedFile().find("a \x3e ins").hide().removeClass("aui-iconfont-devtools-file").addClass("aui-iconfont-devtools-file-commented").fadeIn("slow")};h.prototype._lastCommentDeletedHandler=function(){this.invalidateCacheForLastUrl();this.getSelectedFile().find("a \x3e ins").hide().removeClass("aui-iconfont-devtools-file-commented").addClass("aui-iconfont-devtools-file").fadeIn("slow")};
h.prototype.reset=function(){this._request&&(this._request.abort(),this._interrupted=!0);this._rendering&&(this._rendering=!1,this._interrupted=!0);k.default.invokeMap(this._destroyables,"destroy")};h.prototype.requestData=function(){var a=this;this._request&&(this._lastUrl=null,this._request.abort());var b=this._urlBuilder(0,this._fileLimit,this._commitRange).build();this._lastUrl=b;this._request=C.default.getChangesRequestFromUrl(b);return this._request.always(function(){return a._request=null}).then(function(b){if(!b)return b=
g.default.escapeHtml("This pull request returned no data to display"),a.prependMessage(b,"error"),m.default.Deferred().reject();a._rendering=!0;a._interrupted=!1;a.isTruncated=!b.isLastPage;b=z(b.values,{diffViewType:a._diffViewType});return a.dataReceived(b).done(function(){return a._rendering=!1})})};h.prototype.prependMessage=function(a,b){this._$wrapper.find(".aui-message").remove();b=b||"warning";this._$wrapper.find(".file-tree").before(aui.message[b]({extraClasses:"diff-tree-scm-message",
content:a}))};h.prototype.dataReceived=function(a){function b(){c._interrupted?e.reject(c):e.resolve(c)}var c=this;this.data=a;var e=m.default.Deferred();a=p(this.data,this._selectedPathComponents);if(a){var d=[a.data.attr.id];a=w(this.data,a)||[];for(a.pop();a.length;)a.pop().state="open"}else d=[];var h=!0,f;this._$wrapper.find(".aui-message").remove();if(this.isTruncated){a="";if(this._commitRange.getPullRequest())a=g.default.escapeHtml(g.default.format("This pull request is too large to render. Showing the first {0} files.",
this._fileLimit));else{a=this._commitRange.getUntilRevision();var k=this._commitRange.getSinceRevision();a=k?"git diff-tree -C -r "+k.getId()+" "+a.getId():"git diff-tree -r --root "+a.getId();a=g.default.escapeHtml(g.default.format("This commit is too large to render. Showing the first {0} files. You can retrieve the full details manually with the following Git command.",this._fileLimit))+'\x3cp class\x3d"scm-command"\x3e'+g.default.escapeHtml(a)+"\x3c/p\x3e"}this.prependMessage(a,"warning")}if(this.data.children.length)this.data.searchTruncated&&c.prependMessage(g.default.escapeHtml(g.default.format("Your diff is too large to search. Searching the first {0} lines.\n",
this._maxDiffLines)),"info"),this.$tree=this._$wrapper.children(".file-tree"),this.$tree.fadeOut("fast",function(){c.$tree.empty().off(".jstree").jstree("destroy").on("loaded.jstree",function(){setTimeout(function(){h=!1;b()},0)}).jstree({json_data:{data:c.data.children,progressive_render:!0},core:{html_titles:!0,animation:200},ui:{select_limit:1,selected_parent_close:!1,initially_select:d},plugins:["json_data","ui"]}).on("before.jstree",function(a,b){if("select_node"===b.func)if(a=(0,m.default)(b.args[0]).parent(),
a.hasClass("jstree-leaf")&&(!f||f[0]!==a[0]))f=a,l.default.trigger("bitbucket.internal.feature.commit.difftree.selectedNodeChanged",c,a,h),c._selectedPathComponents=(new D.default(a.data("path"))).path.getComponents();else if(0<a.length)return c.$tree.jstree("toggle_node",a),!1}).on("open_node.jstree",function(a,b){a=b.args[0];a.data().isDirectory&&(b=a.children("a").children("ins"),b.removeClass("aui-iconfont-devtools-folder-closed"),b.addClass("aui-iconfont-devtools-folder-open"));l.default.trigger("bitbucket.internal.feature.commit.difftree.nodeOpening",
c,a)}).on("after_open.jstree",function(a,b){l.default.trigger("bitbucket.internal.feature.commit.difftree.nodeOpened",c,b.args[0])}).on("close_node.jstree",function(a,b){a=b.args[0];a.data().isDirectory&&(b=a.children("a").children("ins"),b.removeClass("aui-iconfont-devtools-folder-open"),b.addClass("aui-iconfont-devtools-folder-closed"));l.default.trigger("bitbucket.internal.feature.commit.difftree.nodeClosing",c,a)}).on("after_close.jstree",function(a,b){l.default.trigger("bitbucket.internal.feature.commit.difftree.nodeClosed",
c,b.args[0])}).on("loaded.jstree",function(a,b){l.default.trigger("bitbucket.internal.feature.commit.difftree.treeInitialised",c,c)}).fadeIn("fast")});else{this.$tree=void 0;var n=this._$wrapper.children(".file-tree");n.fadeOut("fast",function(){n.empty().off(".jstree").jstree("destroy");var a=g.default.escapeHtml(c._searchEmpty&&c.data.searchTruncated?g.default.format("Your diff is too large to search. Searching the first {0} lines.\n",c._maxDiffLines)+" "+"No matching lines found":
c._searchEmpty?"No matching lines found":c._hasOtherParents?"There are no changes to this parent. Use the selector above to switch the parent.":"There are no changes");c.prependMessage(a,"info");setTimeout(b,0)})}return e.promise().always(function(){c._$wrapper.attr("data-last-updated",(new Date).getTime())})};h.prototype.getSelectedFile=function(){return this.$tree?this.$tree.jstree("get_selected"):null};h.prototype._getSelectedFileOrTree=function(){var a=
this.getSelectedFile();return a&&0<a.length?a:this.$tree};h.prototype.selectFile=function(a){if(this.$tree){a=p(this.data,a);var b=this.getSelectedFile();b=(b=b&&b.data("path"))&&p(this.data,(new D.default(b)).path.getComponents());a&&a!==b&&this.$tree.jstree("deselect_all").jstree("select_node","#"+a.data.attr.id)}};h.prototype.openNextFile=function(){if(this.$tree){var a=m.default.jstree._reference(this.$tree),b=this._getSelectedFileOrTree();(a=x(a,a._get_next,a._get_next(b)))&&a.length&&a.find("a").focus().click()}};
h.prototype.openPrevFile=function(){if(this.$tree){var a=m.default.jstree._reference(this.$tree),b=this._getSelectedFileOrTree();(a=A(a,a._get_prev(b)))&&a.length&&a.find("a").focus().click()}};n.default={_openTree:t,DiffTree:h,computeTree:z,flattenTree:u,compareTreeNodes:y,getNodeToSelect:p,getPathFromRoot:w};E.exports=n["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:difftree', location = '/static/bitbucket/internal/feature/commit/difftree/difftree-search.soy' */
// This file was automatically generated from difftree-search.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.difftree.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.difftree == 'undefined') { bitbucket.internal.feature.difftree = {}; }


bitbucket.internal.feature.difftree.searchTreeNode = function(opt_data, opt_ignored) {
  var output = '<span class="change-type change-type-' + soy.$$escapeHtml(opt_data.changeType) + '">';
  switch (opt_data.changeType) {
    case 'ADDED':
      output += '+';
      break;
    case 'REMOVED':
      output += '-';
      break;
    default:
      output += ' ';
  }
  output += ' ' + soy.$$escapeHtml(require('bitbucket/internal/util/text')['padLeft'](opt_data.lineNumber, opt_data.padding, ' ')) + '</span> ' + soy.$$filterNoAutoescape(opt_data.titleContent);
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.difftree.searchTreeNode.soyTemplateName = 'bitbucket.internal.feature.difftree.searchTreeNode';
}


bitbucket.internal.feature.difftree.searchWrapper = function(opt_data, opt_ignored) {
  return '<div class="diff-tree-search-wrapper">' + ((opt_data.includeCollapseButton) ? aui.buttons.button({type: 'subtle', extraClasses: 'search-button-when-collapsed', text: '', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-search', iconText: 'Find text in diff and context lines', extraAttributes: {title: 'Find text in diff and context lines'}}) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.difftree.searchWrapper.soyTemplateName = 'bitbucket.internal.feature.difftree.searchWrapper';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:tree-and-diff-view', location = '/static/bitbucket/internal/feature/commit/tree-and-diff-view/tree-and-diff-view.soy' */
// This file was automatically generated from tree-and-diff-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }


bitbucket.internal.feature.treeAndDiffView = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<div class="commit-files' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><div class="file-tree-container">';
  var param10 = '' + aui.toolbar2.item({item: 'primary', content: '<h4>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('Show diff of\x3cspan class\x3d\x22assistive\x22\x3e the change or changes selected below\x3c/span\x3e')) + '</h4>'});
  var param18 = '<button class="aui-button aui-button-subtle collapse-file-tree" title=' + soy.$$escapeHtml('Hide/show file tree') + 'autocomplete="off"><span class="aui-icon collapse-file-tree-icon">' + soy.$$escapeHtml('Hide/show file tree') + '</span></button>';
  var webItemList24 = WebFragments.getWebItems('bitbucket.internal.repository.difftree.header.deprecated');
  var webItemListLen24 = webItemList24.length;
  for (var webItemIndex24 = 0; webItemIndex24 < webItemListLen24; webItemIndex24++) {
    var webItemData24 = webItemList24[webItemIndex24];
    param18 += bitbucket.internal.widget.webItemButton(webItemData24);
  }
  param10 += aui.toolbar2.item({item: 'secondary', content: param18});
  output += aui.toolbar2.toolbar2({extraClasses: 'diff-tree-toolbar', content: param10});
  output += ((opt_data.showCommitSelector) ? bitbucket.internal.buttons.button({extraClasses: 'aui-dd-trigger commit-selector-button', iconType: 'aui', iconClass: 'aui-icon aui-icon-small aui-iconfont-devtools-commit commit-icon', hasLabel: true, buttonText: opt_data.commit ? opt_data.commit.message : 'All changes in this pull request', title: 'View all changes, unreviewed changes, and individual commits in this pull request'}) + bitbucket.internal.feature.fileTreeHeader(opt_data) : '') + '<div class="file-tree-wrapper"><div class="file-tree"></div></div></div><div id="commit-file-content" class="file-content"></div></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.treeAndDiffView.soyTemplateName = 'bitbucket.internal.feature.treeAndDiffView';
}


bitbucket.internal.feature.fileTreeHeader = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<div class="file-tree-header"><h5>';
  if (opt_data.commit) {
    var commitLink__soy46 = '' + bitbucket.internal.feature.commit.link(opt_data);
    output += soy.$$filterNoAutoescape(AJS.format('Files in {0}',commitLink__soy46));
  } else {
    output += soy.$$escapeHtml('Files');
  }
  output += '</h5></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileTreeHeader.soyTemplateName = 'bitbucket.internal.feature.fileTreeHeader';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:tree-and-diff-view', location = '/static/bitbucket/internal/feature/commit/tree-and-diff-view/tree-and-diff-view.js' */
define("bitbucket/internal/feature/commit/tree-and-diff-view/tree-and-diff-view","module exports aui jquery lodash bitbucket/util/state bitbucket/internal/feature/commit/difftree/difftree bitbucket/internal/feature/file-content/diff-view-type bitbucket/internal/feature/file-content/file-content bitbucket/internal/model/conflict bitbucket/internal/model/file-change bitbucket/internal/model/file-content-modes bitbucket/internal/model/page-state bitbucket/internal/model/path-and-line bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/feature-detect bitbucket/internal/util/shortcuts".split(" "),
function(aa,z,A,ba,ca,da,ea,B,C,fa,ha,ia,ja,ka,la,ma,na,oa){function J(a){var c=D(a);var b=a.data("srcPath")&&new u.default(a.data("srcPath"));var d=a.data("changeType"),h=a.data("nodeType");var e=a.data("conflict")&&new pa.default(a.data("conflict"));var m=a.data("executable");a=a.data("srcExecutable");return new qa.default({repository:K.default.getRepository(),commitRange:f,srcPath:b&&b.path,path:c.path,type:d,nodeType:h,line:c.line,search:E,conflict:e,srcExecutable:a,executable:m})}function F(a,
b){g||(g=new L.default(v,"commit-file-content"));b||(b=a.getLine());w=a;e=new u.default(a.getPath(),a.getLine());K.default.setFilePath(a.getPath());v.height(v.height());var d=k.scrollTop();return g.init(a,c.default.extend(r,{anchor:b})).done(function(){l=(0,c.default)("#commit-file-content");if(0!==l.length){l.find(".file-toolbar");l.find(".content-view");var a=d,b=l.offset();d=b?Math.min(a,b.top):a;k.scrollTop(d)}})}function M(){var a=c.default.Deferred();w=e=null;g&&(g.destroy(),g=null);(0,c.default)("#commit-file-content").empty();
return a.resolve()}function D(a){return new u.default(a.data("path"))}function N(){var a=O=k.height();(0,c.default)(".file-tree-container").children(":not(.file-tree-wrapper):visible").each(function(){a-=(0,c.default)(this).outerHeight(!0)});return a}function P(){x=N();y.css({"max-height":x+"px","border-bottom-width":0})}function Q(){G=!0;var a=H();if((!!a^!!e||a&&a.path.toString()!==e.path.toString())&&b){if(b.selectFile(a.path.getComponents()),R(),a.line)d.default.once("bitbucket.internal.feature.fileContent.diffViewContentChanged",
function(){d.default.trigger("bitbucket.internal.feature.diffView.lineChange",null,a.line)})}else a.toString()!==e.toString()&&(d.default.trigger("bitbucket.internal.feature.diffView.lineChange",null,a.line),e=a);G=!1}function R(){var a=b.getSelectedFile();a&&0<a.length?F(J(a)):w&&F(w)}function ra(a){n||(n=(0,c.default)('\x3cdiv class\x3d"spinner"/\x3e'));n.appendTo("#content .file-tree-wrapper").spin("large",{zIndex:10});y.siblings(".file-tree-header").replaceWith(bitbucket.internal.feature.fileTreeHeader({commit:r.linkToCommit?
f.getUntilRevision().toJSON():null,repository:sa.default.getRepository()}));return b.init(a).always(function(){n&&(n.spinStop().remove(),n=null)}).done(function(){(0,c.default)(".file-tree");x=N();y.css("max-height",x)})}function H(){return new u.default(decodeURI(window.location.hash.substring(1)))}function S(){function a(){d.default.trigger("bitbucket.internal.feature.commit.difftree.collapseAnimationFinished",null,g)}var b=(0,c.default)(".collapse-file-tree"),e=(0,c.default)(".commit-files"),f=
(0,c.default)(".file-tree-container"),g,k,m=!1,l=function(b){var c=e.hasClass("collapsed");"undefined"===typeof b&&(b=!c);e.toggleClass("collapsed",b).toggleClass("quick-reveal-mode",m);g=e.hasClass("collapsed");g!==c&&(d.default.trigger("bitbucket.internal.feature.commit.difftree.toggleCollapse",null,g),ta.default.cssTransition()||a())};p=function(a){a=m?!1:a;"object"===("undefined"===typeof a?"undefined":babelHelpers.typeof(a))&&(a=void 0);m=!1;clearTimeout(k);l(a)};h.push(d.default.chainWith(b).on("click",
T.default.preventDefault(p)));h.push(d.default.chainWith(f).on("mouseleave",function(){clearTimeout(k);m&&(m=!1,p(!0))}).on("transitionend",T.default.filterByTarget(f,a)));h.push(d.default.chainWith(f.children().not(".diff-tree-toolbar")).on("mouseenter",function(){clearTimeout(k);e.hasClass("collapsed")&&(k=setTimeout(function(){m=!0;l(!1)},200))}));h.push(d.default.chainWith(f.find(".diff-tree-toolbar")).on("focus","input",function(){p(!1)}))}function U(){(0,c.default)(".no-changes-placeholder").remove();
var a=e?e:H();return ra(a.path.getComponents()).then(function(b){return(b=b.getSelectedFile())&&b.length?F(J(b),a.line):M().done(function(){(0,c.default)(".commit-files").append((0,c.default)('\x3cdiv class\x3d"message no-changes-placeholder"\x3e\x3c/div\x3e').text("No changes to show"))})})}function V(a){return new va(".file-tree-wrapper",".diff-tree-toolbar .aui-toolbar2-primary",f,{maxChanges:a.maxChanges,hasOtherParents:1<a.numberOfParents,urlBuilder:a.changesUrlBuilder,
searchUrlBuilder:a.diffUrlBuilder,diffViewType:a.diffViewType})}function W(a,b){G||b||(window.location.hash=a?encodeURI(D(a).toString()):"")}Object.defineProperty(z,"__esModule",{value:!0});var ua=babelHelpers.interopRequireDefault(A),c=babelHelpers.interopRequireDefault(ba),q=babelHelpers.interopRequireDefault(ca),sa=babelHelpers.interopRequireDefault(da);A=babelHelpers.interopRequireDefault(ea);B=babelHelpers.interopRequireDefault(B);var L=babelHelpers.interopRequireDefault(C),pa=babelHelpers.interopRequireDefault(fa),
qa=babelHelpers.interopRequireDefault(ha);C=babelHelpers.interopRequireDefault(ia);var K=babelHelpers.interopRequireDefault(ja),u=babelHelpers.interopRequireDefault(ka),T=babelHelpers.interopRequireDefault(la),d=babelHelpers.interopRequireDefault(ma),ta=babelHelpers.interopRequireDefault(na),I=babelHelpers.interopRequireDefault(oa),va=A.default.DiffTree,r,f,w,e,E,G=!1,h=[],b,t={},g,k=(0,c.default)(window),X,v,n,O,x,l,Y,y;d.default.on("bitbucket.internal.feature.fileContent.optionsChanged",function(a){q.default.includes(["hideComments",
"hideEdiff","showWhitespaceCharacters"],a.key)||R()});d.default.on("bitbucket.internal.feature.diffView.highlightSearch",function(a){E=a});var p,Z={breadcrumbs:!0,changeTypeLozenge:!0,changeModeLozenge:!0,contentMode:C.default.DIFF,linkToCommit:!1,sourceLink:!0,toolbarWebFragmentLocationPrimary:null,toolbarWebFragmentLocationSecondary:null,diffViewType:B.default.EFFECTIVE};z.default={getSelectedPath:function(){if(!b)return null;var a=b.getSelectedFile();return D(a).toString()},updateCommitRange:function(a){a.getId()!==
f.getId()&&(f=a,b.reset(),Object.prototype.hasOwnProperty.call(t,f.getId())?b=t[f.getId()]:(b=V(r),t[f.getId()]=b),U())},init:function(a,g){r=c.default.extend({},Z,g);(0,c.default)("#footer");X=(0,c.default)("#content");v=X.find(".commit-files");Y=(0,c.default)(".file-tree-container");y=Y.children(".file-tree-wrapper");O=k.height();l=(0,c.default)("#commit-file-content");f=a;b=V(r);t[f.getId()]=b;e=H();k.on("hashchange",Q);U();S();h.push(d.default.chain().on("window.resize",P).on("bitbucket.internal.feature.fileContent.diffViewExpanded",
P).on("bitbucket.internal.feature.commit.difftree.selectedNodeChanged",W));h.push({destroy:I.default.bind("requestToggleDiffTreeHandler",q.default.ary(p,0))});h.push({destroy:I.default.bind("requestMoveToNextHandler",q.default.ary(b.openNextFile.bind(b),0))});h.push({destroy:I.default.bind("requestMoveToPreviousHandler",q.default.ary(b.openPrevFile.bind(b),0))});h.push(d.default.chainWith(b).on("search-focus",q.default.partial(p,!1)))},_initDiffTreeToggle:S,reset:function(){b&&b.reset();b=f=void 0;
t={};E=e=void 0;k.off("hashchange",Q);q.default.invokeMap(h,"destroy");h=[];return M()},_onSelectedNodeChanged:W,defaults:Z,commentMode:L.default.commentMode};aa.exports=z["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-diff', location = '/static/bitbucket/internal/feature/pull-request/diff/pull-request-diff.js' */
define("bitbucket/internal/feature/pull-request/diff/pull-request-diff","module exports aui chaperone jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/commit/tree-and-diff-view/tree-and-diff-view bitbucket/internal/feature/file-content/commit-selector/commit-selector bitbucket/internal/feature/file-content/diff-view-type bitbucket/internal/feature/file-content/request-change bitbucket/internal/feature/pull-request/pull-request-history/pull-request-history bitbucket/internal/layout/page-scrolling-manager bitbucket/internal/model/commit-range bitbucket/internal/model/diff-type bitbucket/internal/model/file-content-modes bitbucket/internal/model/path-and-line bitbucket/internal/model/revision bitbucket/internal/util/events bitbucket/internal/util/history".split(" "),
function(R,w,p,S,T,U,V,W,X,Y,Z,aa,ba,ca,da,ea,fa,ha,ia,ja){Object.defineProperty(w,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(p),A=babelHelpers.interopRequireDefault(S),d=babelHelpers.interopRequireDefault(T),n=babelHelpers.interopRequireDefault(U),x=babelHelpers.interopRequireDefault(V),y=babelHelpers.interopRequireDefault(W),ka=babelHelpers.interopRequireDefault(X),z=babelHelpers.interopRequireDefault(Y),la=babelHelpers.interopRequireDefault(Z),I=babelHelpers.interopRequireDefault(aa),
ma=babelHelpers.interopRequireDefault(ba),B=babelHelpers.interopRequireDefault(ca);p=babelHelpers.interopRequireDefault(da);var na=babelHelpers.interopRequireDefault(ea),oa=babelHelpers.interopRequireDefault(fa),J=babelHelpers.interopRequireDefault(ha),t=babelHelpers.interopRequireDefault(ia),C=babelHelpers.interopRequireDefault(ja),F=p.default.EFFECTIVE,K=p.default.COMMIT,pa=p.default.RANGE,l=[],D=null,G=void 0,H=function(){null!==D&&(D.destroy(),D=null)},m=function(a){return x.default.project(a.getToRef().getRepository().getProject()).repo(a.getToRef().getRepository()).pullRequest(a)},
u=function(a){return x.default.rest().project(a.getToRef().getRepository().getProject()).repo(a.getToRef().getRepository()).pullRequest(a)},qa=function(a){return function(c){var g=c.commitRange;return u(a).diff(c).withParams({diffType:g.diffType,sinceId:g.sinceRevision.id,untilId:g.untilRevision.id})}},L=function(a){var c=a.commit,g=a.since;return m(a.pullRequest).commit(c).since(g)},ra=function(a){return function(c){return u(a).diff(c)}},ta=function(a){var c=a.commit,g=a.commitRange,k=a.pullRequest,
d=a.lastReviewedCommit,b=a.unreviewedCommits;a=a.includesMerge;var v=[{href:m(k).diff().build(),icon:bitbucket.internal.feature.fileContent.allCommitsIcon(),messageHtml:h.default.escapeHtml("All changes in this pull request"),selected:!c&&!g}];d&&(b?(!a&&sa(),v.push({commitRange:{sinceRevision:{id:d},untilRevision:{id:k.getFromRef().getLatestCommit()}},href:L({pullRequest:k,commit:k.getFromRef().getLatestCommit(),since:d}).build(),icon:bitbucket.internal.feature.fileContent.singleCommitIcon(),
messageHtml:bitbucket.internal.feature.pullRequest.commitSelectorUnreviewedCommits({unreviewedCommits:b,includesMerge:a}),size:a?"large":"small",selected:!c&&g&&g.getSinceRevision().getId()===d&&g.getUntilRevision().getId()===k.getFromRef().getLatestCommit()})):d===k.getFromRef().getLatestCommit()&&v.push({disabled:!0,href:"",messageHtml:h.default.escapeHtml("No unreviewed changes"),selected:!1}));return v},ua=function(a,c,d,h,n){var b=c&&c.getDiffType()||
a&&K||F,g=u(d).comments(),k=void 0,l=void 0,m=void 0,q=void 0;b===F?(k=ra(d),l="bitbucket.pull-request.diff.toolbar.primary",m="bitbucket.pull-request.diff.toolbar.secondary",q=z.default.EFFECTIVE):(k=qa(d),l="bitbucket.pull-request.commit.diff.toolbar.primary",m="bitbucket.pull-request.commit.diff.toolbar.secondary",q=z.default.COMMON_ANCESTOR,g=b===pa?g.range(c.getSinceRevision().getId(),c.getUntilRevision().getId()):g.commit(a));return{changesUrlBuilder:function(a,b,d){return x.default.rest().currentRepo().changes(d).withParams({start:a,
limit:b})},commentMode:y.default.commentMode.CREATE_NEW,commentUrlBuilder:function(){return g},diffUrlBuilder:k,linkToCommit:!!a,maxChanges:h,relevantContextLines:n,toolbarWebFragmentLocationPrimary:l,toolbarWebFragmentLocationSecondary:m,diffViewType:q}},sa=n.default.once(function(){A.default.registerFeature("iterative-review",[{id:"iterative-review",alignment:"right top",selector:".file-tree-container .commit-selector-button",title:"Review faster than ever",
content:"Now you can easily review the changes added to the pull request since you last marked it as Needs work or Approved. You can always view the full diff by selecting \u0022All changes in this pull request\u0022.",width:370,close:{text:"Ok, got it"},moreInfo:{href:'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Using+pull+requests+in+Bitbucket+Server?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash',text:"Learn more",extraAttributes:{target:"_blank"}},once:!0}])}),va=n.default.once(function(){A.default.registerFeature("commit-level-review",[{id:"commit-level-review",alignment:"right top",selector:".file-tree-container .commit-selector-button",
content:bitbucket.internal.feature.pullRequest.commitLevelReviewFeatureDiscoveryContent(),width:300,close:{text:"Ok, got it"},moreInfo:{href:'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Using+pull+requests+in+Bitbucket+Server?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash',text:"Learn more",extraAttributes:{target:"_blank"}},once:!0}])});(0,d.default)(document).on("click",".file-tree a",function(a){a={index:this.id.match(/\d+/),keyboard:!(a.originalEvent instanceof MouseEvent)};t.default.trigger("bitbucket.internal.feature.pullRequest.diff.fileChange",
null,a)});w.default={init:function(a){var c=this,g=a.commit,k=a.commitRange,p=a.currentUser,b=a.pullRequest,v=a.maxChanges,w=a.relevantContextLines,x=a.seenCommitReview,E=void 0,q=!1,r=b.getReviewers().findByUser(p)&&b.getReviewers().findByUser(p).getLastReviewedCommit(),u=function(a){return a&&(a.getSinceRevision().getId()!==r||a.getUntilRevision().getId()!==b.getFromRef().getLatestCommit())},A=function(a,f,M){var e=ta({commit:a,commitRange:f,pullRequest:b,lastReviewedCommit:r,unreviewedCommits:E,
includesMerge:M});r&&E&&(D=t.default.chainWith(b.getReviewers().findByUser(p)).on("change:lastReviewedCommit",function(a,e){E=!1;r=e;c.commitSelector.resetDialog();u(f)&&!(0,d.default)(".arbitrary-diff-button").length&&N(f);H()}));var g=r!==b.getFromRef().getLatestCommit();c.commitSelector.resetDialog();c.commitSelector.init({commitRange:f,updateButton:!0,selectedCommit:a,selectedItem:n.default.find(e,"selected"),itemTemplate:function(a){return bitbucket.internal.feature.fileContent.commitSelectorItemMessage(babelHelpers.extends({},
a,{beforeContent:g&&a.commit.id===r?bitbucket.internal.feature.pullRequest.lastReviewedMarker():null}))},itemExtraClasses:function(a){return g&&a.hasOwnProperty("id")&&a.id===r?["last-reviewed-commit"]:a.commitRange?["unreviewed-commits-item"]:[]},itemUrl:function(a){return m(b).commit(a.id).build()},lastPageMessage:"No more commits",mode:na.default.DIFF,path:new oa.default(decodeURI(window.location.hash.substring(1))),preloadItems:e,pullRequest:b,
includesMerge:M})},z=function(a,f){var e=a?new B.default({pullRequest:b,sinceRevision:a.parents?new J.default(a.parents[0]):void 0,untilRevision:new J.default(a),diffType:K}):f?new B.default({pullRequest:b,sinceRevision:f.getSinceRevision(),untilRevision:f.getUntilRevision()}):new B.default({pullRequest:b,diffType:F});(0,d.default)('.menu-item[data-module-key\x3d"bitbucket.pull-request.nav.diff"] \x3e a').attr("href",location.href);H();a?t.default.trigger("bitbucket.internal.feature.pullRequest.commitDiff.view",
null,{commitJSON:a}):f?t.default.trigger("bitbucket.internal.feature.pullRequest.iterativeDiff.view",null,{commitRangeJSON:f.toJSON()}):t.default.trigger("bitbucket.internal.feature.pullRequest.effectiveDiff.view",null,{});y.default.reset();y.default.init(e,ua(a,f,b,v,w));u(f)?N(f):A(a,f,q);x||va()},N=function(a){var f=(0,d.default)(bitbucket.internal.feature.pullRequest.arbitraryDiffButton({sinceCommit:a.getSinceRevision().getId(),untilCommit:a.getUntilRevision().getId()})),e=(0,d.default)(".file-tree-container .commit-selector-button");
e.after(f);e.hide();f.children(".close-dialog").on("click",function(){f.remove();e.show();C.default.pushState({},null,m(b).unreviewed().build())})},P=function(){var a=(0,d.default)(".file-tree-container .commit-selector-button"),f=(0,d.default)(".file-tree-header");a.hide();f.hide();var c=(0,d.default)(".file-tree-wrapper");c.spin("large",{zIndex:10,top:0});var h=function(){c&&c.spinStop();c=null};l.push({destroy:h});G=la.default.getUnreviewedChangesRequest({pullRequest:b.toJSON(),start:0,limit:v}).done(function(e){h();
a.show();f.show();var c=void 0;e.properties&&(e.properties.unreviewedCommits&&(E=e.properties.unreviewedCommits,c={sinceRevision:{id:e.fromHash},untilRevision:{id:e.toHash}}),q=e.properties.includesMerge);n.default.startsWith(location.pathname,m(b).unreviewed().build())?O({action:C.default.replaceState,commitRangeJSON:q?null:c,pullRequest:b}):z(g,k)})},O=function(a){var f=a.action,c=a.commitJSON,e=a.commitRangeJSON,b=a.pullRequest;f=f||C.default.pushState;a=encodeURI(y.default.getSelectedPath()||
"");c?(e=m(b).commit(c.id),f({commit:c},null,e.withFragment(a).build())):e?f({commitRange:e},null,L({pullRequest:b,commit:e.untilRevision.id,since:e.sinceRevision.id}).withFragment(a).build()):f({},null,m(b).diff().withFragment(a).build())},Q=function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,b=c.commitSelector.getSelectedCommit();if(b){var d=n.default.get(b,"properties",{});e=n.default.get(d,"commentCount",e);d={properties:babelHelpers.extends({},d,{commentCount:e+a})};c.commitSelector.refreshCommit(b.id,
d)}};l.push(t.default.chain().on("bitbucket.internal.feature.commitselector.itemSelected",O).on("bitbucket.internal.history.changestate",function(a){n.default.startsWith(location.pathname,m(b).unreviewed().build())?P():a.state&&z(a.state.commit,a.state.commitRange&&new B.default(a.state.commitRange))}).on("bitbucket.internal.keyboard.shortcuts.pullrequest.addCommentHandler",function(a){(this.execute?this:h.default.whenIType(a)).execute(function(){(0,d.default)(".add-file-comment-trigger:first").click()})}).on("bitbucket.internal.feature.comments.commentAdded",
function(){return Q(1)}).on("bitbucket.internal.feature.comments.commentDeleted",function(){return Q(-1,1)}));this.commitSelector=new ka.default({buttonEl:".file-tree-container .commit-selector-button",id:"commit-selector"});I.default.init();l.push(this.commitSelector);l.push({destroy:function(){return I.default.reset()}});l.push({destroy:function(){return y.default.reset()}});l.push({destroy:ma.default.acceptScrollForwardingRequests()});C.default.initialState({commit:g,commitRange:k&&k.toJSON()});
P()},reset:function(){G&&G.abort();H();var a=d.default.when.apply(d.default,babelHelpers.toConsumableArray(n.default.invokeMap(l,"destroy")));l=[];return a}};R.exports=w["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-diff', location = '/static/bitbucket/internal/feature/pull-request/diff/pull-request-diff.soy' */
// This file was automatically generated from pull-request-diff.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.diff = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bitbucket.internal.feature.treeAndDiffView({commit: opt_data.commit, repository: opt_data.repository, extraClasses: 'tabbed', showCommitSelector: true});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.diff.soyTemplateName = 'bitbucket.internal.feature.pullRequest.diff';
}


bitbucket.internal.feature.pullRequest.commitLevelReviewFeatureDiscoveryContent = function(opt_data, opt_ignored) {
  return '<div class="feature-discovery-commit-level-review"><h2>' + soy.$$escapeHtml('Break down big reviews') + '</h2><p>' + soy.$$escapeHtml('We have made it easier to review pull requests with new diff views.') + '</p><h4>' + bitbucket.internal.images.icons.allCommits(null) + soy.$$escapeHtml('All changes') + '</h4><p>' + soy.$$escapeHtml('Same as before. View the diff for all the changes in this pull request.') + '</p><h4>' + bitbucket.internal.images.icons.commit(null) + soy.$$escapeHtml('Single commit') + '</h4><p>' + soy.$$escapeHtml('Now you can also view the changes of a single commit.') + '</p></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.commitLevelReviewFeatureDiscoveryContent.soyTemplateName = 'bitbucket.internal.feature.pullRequest.commitLevelReviewFeatureDiscoveryContent';
}


bitbucket.internal.feature.pullRequest.arbitraryDiffButton = function(opt_data, opt_ignored) {
  return '<div class="aui-button commit-selector-button arbitrary-diff-button">' + bitbucket.internal.feature.fileContent.singleCommitIcon(null) + '<div class="arbitrary-diff-button-content"><div class="arbitrary-diff-button-commit-range">' + soy.$$escapeHtml((opt_data.sinceCommit).substring(0, 11)) + '..' + soy.$$escapeHtml((opt_data.untilCommit).substring(0, 11)) + '</div><div class="arbitrary-diff-button-message">' + soy.$$escapeHtml('You are viewing a custom diff') + '</div></div><button class="aui-button aui-button-link close-dialog">' + aui.icons.icon({useIconFont: true, size: 'small', icon: 'close-dialog'}) + '</button></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.arbitraryDiffButton.soyTemplateName = 'bitbucket.internal.feature.pullRequest.arbitraryDiffButton';
}


bitbucket.internal.feature.pullRequest.commitSelectorUnreviewedCommits = function(opt_data, opt_ignored) {
  return '<div class="commit-selector-item-content"><div class="commit-selector-item-content-message">' + soy.$$escapeHtml(AJS.format('{0} {0,choice,1#commit|1\x3ccommits} since you last reviewed',opt_data.unreviewedCommits)) + '</div>' + ((opt_data.includesMerge) ? '<div class="commit-selector-item-content-warning"><span class="aui-icon aui-icon-small aui-iconfont-info"></span>' + soy.$$escapeHtml('May contain unrelated changes from a merge') + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.commitSelectorUnreviewedCommits.soyTemplateName = 'bitbucket.internal.feature.pullRequest.commitSelectorUnreviewedCommits';
}


bitbucket.internal.feature.pullRequest.lastReviewedMarker = function(opt_data, opt_ignored) {
  return '<div class="last-reviewed-commit-marker"><span class="aui-icon aui-icon-small aui-iconfont-arrow-up"/><span class="text">' + soy.$$escapeHtml('UNREVIEWED') + '</span><span class="aui-icon aui-icon-small aui-iconfont-arrow-up"/></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.lastReviewedMarker.soyTemplateName = 'bitbucket.internal.feature.pullRequest.lastReviewedMarker';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-layout', location = '/static/bitbucket/internal/layout/pull-request/pull-request.js' */
define("bitbucket/internal/layout/pull-request/pull-request","module exports aui chaperone jquery lodash react react-dom react-redux bitbucket/util/events bitbucket/util/navbuilder bitbucket/internal/bbui/actions/pull-request bitbucket/internal/enums bitbucket/internal/feature/file-content/request-change bitbucket/internal/feature/pull-request/header/pull-request-header-view bitbucket/internal/feature/pull-request/pull-request-analytics/pull-request-analytics bitbucket/internal/feature/pull-request/store/pull-request-store bitbucket/internal/model/commit-range bitbucket/internal/model/page-state bitbucket/internal/model/participant bitbucket/internal/model/pull-request bitbucket/internal/model/revision bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/feature-loader bitbucket/internal/util/history bitbucket/internal/util/horizontal-keyboard-scrolling bitbucket/internal/util/notifications/notifications".split(" "),
function(z,n,p,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y){function Z(){b.default.on("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",function(a){a.enableContext("pull-request");r.resolve(a)});b.default.on("bitbucket.internal.keyboard.shortcuts.requestGotoPullRequestsListHandler",function(a){(this.execute?this:f.default.whenIType(a)).execute(function(){window.location.href=aa.default.currentRepo().allPullRequests().build()})});b.default.on("bitbucket.internal.keyboard.shortcuts.requestChangePullRequestSectionHandler",
function(a){(this.execute?this:f.default.whenIType(a)).execute(function(a){a=parseInt(String.fromCharCode(a.which),10);l.children().eq(a-1).children("a").click()})})}function ba(){var a=function(a,c){a.addClass("active-tab").siblings().removeClass("active-tab");c&&(a=a.data("module-key").split(".").pop(),b.default.trigger("bitbucket.internal.feature.pullRequest.tab."+a,null,{keyboard:!(c.originalEvent instanceof MouseEvent)}))},t=function(a){var c=a.commitJSON;a=a.commitRangeJSON;d.default.setCommit(c?
new ca.default(c):null);d.default.setCommitRange(!c&&a?new da.default(a):null)};l.on("click","a",function(d){if(ea.default.openInSameTab(d)){var c=(0,g.default)(this),k=c.parent();k.is(".active-tab")||(a(k),b.default.trigger("bitbucket.internal.layout.pull-request.urlRequested",null,c.prop("href")));d.preventDefault()}});b.default.on("bitbucket.internal.page.pull-request.view.contextLoaded",function(b){a(l.find('[data-module-key\x3d"'+b.name+'"]'));b.name===h.diff?u.default.resume():u.default.pause()});
b.default.on("bitbucket.internal.feature.pullRequest.commit.open",t);b.default.on("bitbucket.internal.feature.pullRequest.*.view",t);r.done(function(a){v.default.forEach(l.children(),function(c,k){c=(0,g.default)(c);k=String(k+1);var b=f.default.format("Switch to the {0} tab",c.text());a.addCustomShortcut("pull-request",[[k]],b);c.attr("title",(c.attr("title")||b)+f.default.format(" (type \u0027\u0027{0}\u0027\u0027)",k))})})}function fa(a,d,f){function c(a,
b){(b=v.default.findKey(h,b))&&ha.default.trigger("bitbucket.internal.browser-metrics.pull-request."+b+"."+a)}e.registerHandler(h.diff,/^[^\?\#]*pull-requests\/\d+\/(diff|commits\/\b[0-9a-fA-F]{5,40}\b|unreviewed)/,"bitbucket/internal/page/pull-request/view/pull-request-view-diff");e.registerHandler(h.overview,/^[^\?\#]*pull-requests\/\d+\/overview/,"bitbucket/internal/page/pull-request/view/pull-request-view-overview");e.registerHandler(h.commits,/^[^\?\#]*pull-requests\/\d+\/commits(\/?)($|[#?])/,
"bitbucket/internal/page/pull-request/view/pull-request-view-commits");e.setContext({store:f});b.default.on("bitbucket.internal.page.pull-request.view.contextRequested",c.bind(null,"start"));b.default.on("bitbucket.internal.page.pull-request.view.contextLoaded",function(a){c("end",a.name)});b.default.on("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",function(a){e.setKeyboardShortcuts(a);a.enableContext("pull-request")});b.default.on("bitbucket.internal.layout.pull-request.urlRequested",
function(a){a!==window.location.href&&w.default.pushState(null,"",a)});b.default.on("bitbucket.internal.util.feature-loader.errorOccurred",function(a){a.code===x.default.NO_HANDLER?console.log("You did not register a handler for this page. Please call\nrequire('bitbucket/internal/layout/pull-request').registerHandler(\n   'tab-web-item-module-key',\n   /^[^\\?\\#]*url-regex/,\n   {\n       load : function (contentElement) {},\n       unload : function (contentElement) {}\n   }\n)"):console.log(a.message)});
d.done(function(b){e.init((0,g.default)(a).get(0))})}Object.defineProperty(n,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(p),q=babelHelpers.interopRequireDefault(A),g=babelHelpers.interopRequireDefault(B),v=babelHelpers.interopRequireDefault(C),y=babelHelpers.interopRequireDefault(D),ia=babelHelpers.interopRequireDefault(E),ha=babelHelpers.interopRequireDefault(G),aa=babelHelpers.interopRequireDefault(H),m=babelHelpers.interopRequireDefault(J),ja=babelHelpers.interopRequireDefault(K),
ka=babelHelpers.interopRequireDefault(L),la=babelHelpers.interopRequireDefault(M),ma=babelHelpers.interopRequireDefault(N),da=babelHelpers.interopRequireDefault(O),d=babelHelpers.interopRequireDefault(P),na=babelHelpers.interopRequireDefault(Q),oa=babelHelpers.interopRequireDefault(R),ca=babelHelpers.interopRequireDefault(S),ea=babelHelpers.interopRequireDefault(T),b=babelHelpers.interopRequireDefault(U),x=babelHelpers.interopRequireDefault(V),w=babelHelpers.interopRequireDefault(W),u=babelHelpers.interopRequireDefault(X),
pa=babelHelpers.interopRequireDefault(Y),h={diff:"bitbucket.pull-request.nav.diff",overview:"bitbucket.pull-request.nav.overview",commits:"bitbucket.pull-request.nav.commits"},l,r=g.default.Deferred(),e=new x.default({loadedEvent:"bitbucket.internal.page.pull-request.view.contextLoaded",unloadedEvent:"bitbucket.internal.page.pull-request.page.pull-request.view.contextUnloaded",requestedEvent:"bitbucket.internal.page.pull-request.view.contextRequested"});p=g.default.proxy(e.registerHandler,e);n.default=
{registerHandler:p,onReady:function(a){d.default.setPullRequest(new oa.default(a.pullRequestJSON));d.default.extend("pullRequestViewInternal",function(){return{commitsTableWebSections:a.commitsTableWebSections,maxChanges:a.maxChanges,relevantContextLines:a.relevantContextLines,seenCommitReview:a.seenCommitReview}});d.default.extend("isWatching");a.commitJSON&&w.default.replaceState({commitRange:a.sinceCommitId&&{sinceRevision:{id:a.sinceCommitId},untilRevision:a.commitJSON},commit:!a.sinceCommitId&&
a.commitJSON},null);var e=(0,ma.default)();e.dispatch({type:"PR_SET_PULL_REQUEST",payload:a.pullRequestJSON});e.dispatch({type:"SET_CURRENT_USER",payload:d.default.getCurrentUser().toJSON()});ia.default.render(y.default.createElement(F.Provider,{store:e},y.default.createElement(ka.default,{canDelete:a.canDelete,hasRepoWrite:a.hasRepoWrite,hasSourceRepoWrite:a.hasSourceRepoWrite,hasSourceRepoRead:a.hasSourceRepoRead,mergeTimeout:a.mergeTimeout||300})),document.getElementById("pull-request-header"));
l=(0,g.default)(".content-body .aui-page-panel-content \x3e .aui-tabs \x3e .tabs-menu");var h=g.default.Deferred();_PageDataPlugin.ready("com.atlassian.bitbucket.server.bitbucket-web:iswatching-provider","bitbucket.internal.pull-request.view",function(a){e.dispatch({type:I.PR_SET_IS_WATCHING,payload:a.isWatching});d.default.setIsWatching(a.isWatching);h.resolve()});!0!==a.seenNeedsWork&&(q.default.registerFeature("reviewer-status",[{id:"reviewer-status",alignment:"top right",selector:".reviewing.reviewer-status-selector",
content:bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatus(),close:{text:"Ok, got it"},moreInfo:{href:'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Using+pull+requests+in+Bitbucket+Server?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash',text:"Learn more",extraAttributes:{target:"_blank"}},once:!0}]),b.default.on("bitbucket.internal.feature.pullRequest.self.added",q.default.checkFeatureVisibility));(0,g.default)(document).on("click","button.needs-work",function(){q.default.registerFeature("needs-work-click",
[{id:"needs-work-click",selector:"button.needs-work",alignment:"bottom center",title:"Marked as needs work",content:bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatusClick(),close:{text:"Ok, got it"},moreInfo:{href:'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Using+pull+requests+in+Bitbucket+Server?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash',text:"Learn more",extraAttributes:{target:"_blank"}},
width:340,once:!0}])});b.default.on("bitbucket.internal.feature.pullRequest.self.added",function(){d.default.getPullRequest().getReviewers().add(new na.default({user:d.default.getCurrentUser(),role:m.default.ParticipantRole.REVIEWER,status:m.default.ApprovalStatus.UNAPPROVED}))});b.default.on("bitbucket.internal.feature.pullRequest.self.removed",function(){var a=d.default.getPullRequest().getReviewers();a.remove(a.findByUser(d.default.getCurrentUser()))});var c=function(a){if(a.newStatus===m.default.ApprovalStatus.NEEDS_WORK||
a.newStatus===m.default.ApprovalStatus.APPROVED){ja.default.reset();a=d.default.getPullRequest();var b=d.default.getCurrentUser();a.getReviewers().findByUser(b).setLastReviewedCommit(a.getFromRef().getLatestCommit())}};b.default.chain().on("bitbucket.internal.widget.approve-button.added",c).on("bitbucket.internal.widget.approve-button.removed",c).on("bitbucket.internal.widget.needs-work.added",c);la.default.init();Z();ba();fa(a.contentSelector,h,e);pa.default.showFlashes()}};z.exports=n["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-merge-conflict-soy', location = '/static/bitbucket/internal/feature/pull-request/merge-conflict/merge-conflict.soy' */
// This file was automatically generated from merge-conflict.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.mergeWarningBanner = function(opt_data, opt_ignored) {
  return '' + ((opt_data.outcome == 'CONFLICTED') ? aui.message.warning({extraClasses: 'merge-conflicted-message' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : ''), extraAttributes: {'data-outcome': opt_data.outcome}, titleContent: '' + soy.$$escapeHtml('This pull request can\x27t be merged.'), content: '' + soy.$$filterNoAutoescape(AJS.format('You will need to resolve conflicts to be able to merge. {0}More information{1}.','<a href="#" class="manual-merge">','</a>'))}) : (opt_data.outcome == 'UNKNOWN') ? aui.message.info({extraClasses: 'merge-conflicted-message' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : ''), extraAttributes: {'data-outcome': opt_data.outcome}, titleContent: '' + soy.$$escapeHtml('Bitbucket Server could not create the merge diff for this pull request'), content: '' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('To resolve this warning you could try to push a new commit to update the pull request, attempt to merge the pull request anyway, or ask a system administrator to review the logs. \x3ca href\x3d\x22{0}\x22\x3eRead more about this warning.\x3c/a\x3e',typeof ('https:\/\/confluence.atlassian.com\/display\/BITBUCKETSERVERKB\/Bitbucket+Server+is+unable+to+create+the+merge+diff+for+pull+requests?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash') === 'number' ? 'https:\/\/confluence.atlassian.com\/display\/BITBUCKETSERVERKB\/Bitbucket+Server+is+unable+to+create+the+merge+diff+for+pull+requests?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash' : soy.$$escapeHtml('https:\/\/confluence.atlassian.com\/display\/BITBUCKETSERVERKB\/Bitbucket+Server+is+unable+to+create+the+merge+diff+for+pull+requests?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash'))))}) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.mergeWarningBanner.soyTemplateName = 'bitbucket.internal.feature.pullRequest.mergeWarningBanner';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-can-merge', location = '/static/bitbucket/internal/feature/pull-request/can-merge/can-merge.js' */
define("bitbucket/internal/feature/pull-request/can-merge/can-merge",["module","exports","bitbucket/internal/util/events"],function(b,a,c){Object.defineProperty(a,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(c);a.default=function(){d.default.trigger("bitbucket.internal.feature.pull-request.merge-check")};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:request-commit', location = '/static/bitbucket/internal/feature/commit/request-commit.js' */
define("bitbucket/internal/feature/commit/request-commit","module exports lodash bitbucket/util/navbuilder bitbucket/util/state bitbucket/internal/util/ajax".split(" "),function(f,b,l,m,n,p){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){var c=a.commitId,b=a.project,d=a.repo;a=a.statusCode;var f=void 0===a?{}:a;if(e.hasOwnProperty(c))return e[c];var g=void 0;if(b&&d)g=h.default.rest().project(b).repo(d).commit(c).build();else if(q.default.getRepository())g=h.default.rest().currentRepo().commit(c).build();
else return Promise.reject(Error("Repository required"));e[c]=new Promise(function(a,b){k.default.rest({url:g,statusCode:babelHelpers.extends({},k.default.ignore404WithinRepository(),f)}).done(a).fail(function(a,f,g,d){delete e[c];b((0,l.get)(d,"errors.length")?Error(d.errors[0].message):Error("Commit request failed"))})});return e[c]};var h=babelHelpers.interopRequireDefault(m),q=babelHelpers.interopRequireDefault(n),k=babelHelpers.interopRequireDefault(p),e={};f.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-view-page', location = '/static/bitbucket/internal/page/pull-request/view/pull-request-view-commits.js' */
define("bitbucket/internal/page/pull-request/view/pull-request-view-commits",["module","exports","jquery","bitbucket/internal/feature/pull-request/commits/pull-request-commits","bitbucket/internal/model/page-state"],function(d,a,e,f,g){Object.defineProperty(a,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(e),c=babelHelpers.interopRequireDefault(f),b=babelHelpers.interopRequireDefault(g);a.default={load:function(a){return c.default.init({el:a,commitsTableWebSections:b.default.getPullRequestViewInternal().commitsTableWebSections,
pullRequest:b.default.getPullRequest(),repository:b.default.getRepository()})},unload:function(a){c.default.reset();(0,h.default)(a).empty()},keyboardShortcutContexts:["commits"]};d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-view-page', location = '/static/bitbucket/internal/page/pull-request/view/pull-request-view-overview.js' */
define("bitbucket/internal/page/pull-request/view/pull-request-view-overview","module exports jquery lib/jsuri lodash bitbucket/internal/feature/comments/comment-tips bitbucket/internal/feature/pull-request/activity/pull-request-activity bitbucket/internal/model/page-state bitbucket/internal/util/events bitbucket/internal/util/scroll bitbucket/internal/util/syntax-highlight".split(" "),function(v,k,w,x,y,z,A,B,C,D,E){function l(){d&&d.find(".manual-merge").click(function(a){a.preventDefault();h.default.trigger("bitbucket.internal.pull-request.show.cant.merge.help")})}
function m(a,b){if(d){if(d.data("outcome")===b)return;d.remove()}d=(0,f.default)(bitbucket.internal.feature.pullRequest.mergeWarningBanner({outcome:b,extraClasses:"transparent"})).prependTo(a);l();setTimeout(function(){return d.removeClass("transparent")},0)}function n(a,b,d){if(c instanceof p.default){c.reset();c=null;var F=(0,f.default)(bitbucket.internal.feature.pullRequest.activity({id:"pull-request-activity",currentUser:e.default.getCurrentUser()&&e.default.getCurrentUser().toJSON(),commentTips:q.default.tips})).find(".pull-request-activity");
r().replaceWith(F)}c=new p.default(r(),a,b,d,{scrollableElement:window});c.init()}function r(){return(0,f.default)(g).find(".pull-request-activity")}function t(){var a=u();if(a.id&&a.type){var b=a.type,d=a.id;var c=(0,f.default)(g);b=c.find(b===G.COMMENT?'.comment[data-id\x3d"'+d+'"]':'.activity-item[data-activityid\x3d"'+d+'"]');b.length?(c.find(".comment.focused, .activity-item.focused").removeClass("focused"),b.addClass("focused"),H.default.scrollTo(b),c=!0):c=!1;c||n(e.default.getPullRequest(),
a.type,a.id)}}function u(){var a=new I.default(window.location);return{type:a.getQueryParamValue("commentId")?"comment":"activity",id:a.getQueryParamValue("commentId")||a.getQueryParamValue("activityId")}}Object.defineProperty(k,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(w),I=babelHelpers.interopRequireDefault(x),J=babelHelpers.interopRequireDefault(y),q=babelHelpers.interopRequireDefault(z),p=babelHelpers.interopRequireDefault(A),e=babelHelpers.interopRequireDefault(B),h=babelHelpers.interopRequireDefault(C),
H=babelHelpers.interopRequireDefault(D),K=babelHelpers.interopRequireDefault(E),g,c,d,G={COMMENT:"comment",ACTIVITY:"activity"};h.default.on("bitbucket.internal.pull-request.*.merge",function(a,b,c,f,e){"CLEAN"===e?d&&(d.remove(),d=null):m(g,e)});k.default={load:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};g=a;var c=e.default.getPullRequest();a.innerHTML=bitbucket.internal.feature.pullRequest.viewOverview({pullRequest:c.toJSON(),author:c.getAuthor().getUser().toJSON(),
createdDate:c.getCreatedDate(),description:c.getDescription(),descriptionAsHtml:c.getDescriptionAsHtml(),currentUser:e.default.getCurrentUser()&&e.default.getCurrentUser().toJSON(),commentTips:q.default.tips});K.default.container((0,f.default)(a));b.store&&(b=b.store.getState(),b=J.default.get(b,"pullRequest.mergeable.outcome",null),"CONFLICTED"===b&&m(a,b));d&&(l(),d.addClass("transparent").prependTo(a),setTimeout(function(){return d.removeClass("transparent")},0));b=u();n(c,b.type,b.id);h.default.on("bitbucket.internal.history.changestate",
t)},_internalActivity:function(){return c},unload:function(a){c.reset();c=null;(0,f.default)(a).empty();g=null;h.default.off("bitbucket.internal.history.changestate",t)},keyboardShortcutContexts:["pull-request-overview"]};v.exports=k["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-view-page', location = '/static/bitbucket/internal/page/pull-request/view/pull-request-view-diff.js' */
define("bitbucket/internal/page/pull-request/view/pull-request-view-diff","module exports jquery lodash bitbucket/util/navbuilder bitbucket/util/state bitbucket/internal/feature/commit/request-commit bitbucket/internal/feature/pull-request/diff/pull-request-diff bitbucket/internal/model/commit-range bitbucket/internal/model/page-state bitbucket/internal/model/revision bitbucket/internal/util/history".split(" "),function(q,h,r,g,t,u,v,w,x,y,z,A){Object.defineProperty(h,"__esModule",{value:!0});var B=
babelHelpers.interopRequireDefault(r),c=babelHelpers.interopRequireDefault(t),k=babelHelpers.interopRequireDefault(u),C=babelHelpers.interopRequireDefault(v),n=babelHelpers.interopRequireDefault(w),D=babelHelpers.interopRequireDefault(x),a=babelHelpers.interopRequireDefault(y),E=babelHelpers.interopRequireDefault(z),F=babelHelpers.interopRequireDefault(A),e=void 0,f=void 0,G=function(b){return c.default.currentRepo().pullRequest(a.default.getPullRequest()).commit(b.id).buildAbsolute()},H=function(b){return c.default.currentRepo().pullRequest(a.default.getPullRequest()).commit(b.untilRevision.id).since(b.sinceRevision.id).buildAbsolute()},
l=function(b,d,c){a.default.setCommit(d&&new E.default(d));a.default.setCommitRange(c&&new D.default(c));b.innerHTML=bitbucket.internal.feature.pullRequest.diff({commit:k.default.getCommit(),repository:k.default.getRepository()});n.default.init({commit:k.default.getCommit(),commitRange:a.default.getCommitRange(),currentUser:a.default.getCurrentUser(),pullRequest:a.default.getPullRequest(),maxChanges:a.default.getPullRequestViewInternal().maxChanges,relevantContextLines:a.default.getPullRequestViewInternal().relevantContextLines,
seenCommitReview:a.default.getPullRequestViewInternal().seenCommitReview})},p=function(){return(0,g.startsWith)(location.href,c.default.currentPullRequest().commit("").buildAbsolute()+"/")&&!c.default.parse(location.href).getQueryParamValue("since")},m=function(){return(0,g.startsWith)(location.href,c.default.currentPullRequest().commit("").buildAbsolute()+"/")&&c.default.parse(location.href).getQueryParamValue("since")},I=function(){var a=c.default.parse(location.href).getQueryParamValue("since"),
d=c.default.parse(location.href).path().split("/").pop();return d&&a&&{untilRevision:{id:d},sinceRevision:{id:a}}};h.default={load:function(a){var d=F.default.state()||{},b=d.commit;d=d.commitRange;if(p())return b=p()&&e&&(0,g.startsWith)(location.href,G(e))&&e||b,(b?Promise.resolve(b):(0,C.default)({commitId:c.default.parse(location.href).path().split("/").pop()})).then(function(b){l(a,b,null)});if(m())return b=m()&&f&&(0,g.startsWith)(location.href,H(f))&&f||d&&d||m()&&I(),l(a,null,b);l(a,null,
null)},unload:function(b){e=a.default.getCommit()&&a.default.getCommit().toJSON()||e;a.default.setCommit(null);f=a.default.getCommitRange()&&a.default.getCommitRange().toJSON()||f;a.default.setCommitRange(null);return n.default.reset().done(function(){(0,B.default)(b).empty()})},keyboardShortcutContexts:["diff-tree","diff-view"]};q.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-view-page', location = '/static/bitbucket/internal/page/pull-request/view/pull-request-view.js' */
define("bitbucket/internal/page/pull-request/view/pull-request-view","module exports aui aui/flag bitbucket/internal/layout/pull-request/pull-request bitbucket/internal/model/page-state".split(" "),function(d,a,b,e,f,g){Object.defineProperty(a,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(b),h=babelHelpers.interopRequireDefault(e);b=babelHelpers.interopRequireDefault(f);var k=babelHelpers.interopRequireDefault(g);a.default={registerHandler:b.default.registerHandler,onReady:function(a){a&&
(0,h.default)({type:"success",title:c.default.format("Stopped watching pull request #{0}",k.default.getPullRequest().getId()),close:"auto",body:"Notifications for this pull request will no longer be sent to you."})}};d.exports=a["default"]});;
;
/* module-key = 'com.bit-booster.bb:bb-rebase-button', location = 'js/pr.js' */
function bbReplaceAll(str, search, replacement) {
    return str.replace(new RegExp(search, 'g'), replacement);
}

function bbPushAsNewCheck(node) {
    var $nameBox = jQuery('#' + node.name.substr(0, node.name.length - 3));
    if (node.checked) {
        if ($nameBox[0].value === '') {
            $nameBox[0].value = 'Branch_For_Pull_Request';
        }
        $nameBox.prop('disabled', false).select().focus();
    } else {
        if ($nameBox[0].value === 'Branch_For_Pull_Request') {
            $nameBox[0].value = '';
        }
        $nameBox.prop('disabled', true);
    }
}

function bbStartsWith(haystack, needle) {
    return haystack.lastIndexOf(needle, 0) === 0;
}

function bbAdjustCherryMsg(node, commitId) {
    var parent = node.options && node.options[node.selectedIndex].text;
    if (parent) {
        var m = document.getElementById('bbCherryMsg');
        var lines = m.value.trim().split(/\r?\n/);
        var lastLine = lines[lines.length - 1];
        if (bbStartsWith(lastLine, "(cherry picked from commit ")) {
            lastLine = "(cherry picked from commit " + commitId + " via parent -m " + parent + ")";
            lines[lines.length - 1] = lastLine;
            m.value = lines.join('\n');
        }
    }
}

function bbAdjustRevertMergeMsg(node) {
    var parent = node.options && node.options[node.selectedIndex].getAttribute("bbParent");
    if (parent) {
        var m = document.getElementById('bbRevertMsg');
        var lines = m.value.trim().split(/\r?\n/);
        var lastLine = lines[lines.length - 1];
        if (bbStartsWith(lastLine, "changes made via parent ")) {
            lastLine = "changes made via parent " + parent + ".";
            lines[lines.length - 1] = lastLine;
            m.value = lines.join('\n');
        }
    }
}

var bbRebaseDiagram = '\
    <table id="bbRebaseTbl" style="width: 1%;">\
    <tbody>\
    <tr><td class="d top left"><span class="icon"></span>_Z_</td><td class="top" rowspan="3" style="vertical-align: top;">\
    <svg width="32" height="69" text-rendering="optimizeLegibility" style="border: 0px; margin: 0px; padding: 0;" id="bit-booster">\
    <path d="M24,35C25,61.25,8,43.75,9,59" stroke-width="2" stroke-opacity="1" opacity="1" fill="none" stroke="#79c753"></path>\
    <path d="M24,35L24,35" stroke-width="2" stroke-opacity="1" opacity="1" stroke="#79c753"></path>\
    <path d="M9,11L9,59" stroke-width="2" stroke-opacity="1" opacity="1" stroke="#034f84"></path>\
    <circle id="C_0" cx="9" cy="59" r="4" fill="#034f84" stroke="none"></circle>\
    <circle id="C_b" cx="24" cy="35" r="4" fill="#79c753" stroke="none"></circle>\
    <circle id="C_1" cx="9" cy="11" r="4" fill="#034f84" stroke="none"></circle>\
    </svg>    </td>\
    <td class="d top right">&nbsp;</td>\
<td rowspan="3" class="middle"><span class="icon">&nbsp;&nbsp;</span></td>\
<td colspan="1" class="top left">&nbsp;</td>\
<td rowspan="3" class="top" style="vertical-align: top;">\
    <svg width="32" height="69" text-rendering="optimizeLegibility" style="border: 0px; margin: 0px; padding: 0;" id="bit-booster">\
    <path d="M24,11C25,37.25,8,19.75,9,35.00000762939453" stroke-width="2" stroke-opacity="1" opacity="1" fill="none" stroke="#79c753"></path>\
    <path d="M9,35.00000762939453L9,59.00000762939453" stroke-width="2" stroke-opacity="1" opacity="1" stroke="#034f84"></path>\
    <path d="M24,11L24,11" stroke-width="2" stroke-opacity="1" opacity="1" stroke="#79c753"></path>\
    <circle id="C_0" cx="9" cy="59.00000762939453" r="4" fill="#034f84" stroke="none"></circle>\
    <circle id="C_1" cx="9" cy="35.00000762939453" r="4" fill="#034f84" stroke="none"></circle>\
    <circle id="C_2" cx="24" cy="11" r="4" fill="#79c753" stroke="none"></circle>\
    </svg>\
    </td>\
    <td class="d top right"><span class="icon"></span>_Y_</td>\
</tr>\
<tr id="T_1" data-commitid="1">\
<td class="d left">&nbsp;</td>\
<td class="d right"><span class="icon"></span>_Y_</td>\
<td class="d left"><span class="icon"></span>_Z_</td>\
<td class="right">&nbsp;</td>\
</tr>\
<tr id="T_0" data-commitid="0">\
<td class="left">&nbsp;</td>\
<td class="right">&nbsp;</td>\
<td class="left">&nbsp;</td>\
<td class="right">&nbsp;</td>\
</tr>\
<tr><td colspan="3" class="bottom"><i>Before</i></td>\
    <td>&nbsp;</td>\
<td colspan="3" class="bottom"><i>After</i></td>\
    </tr></tbody>\
    </table>';

var bbAlreadyRebasedDiagram = '\
    <table id="bbRebaseTbl" style="width: 1%;">\
<tbody>\
<tr><td class="top left">&nbsp;</td><td class="top" rowspan="3" style="vertical-align: top;">\
    <svg width="32" height="69" text-rendering="optimizeLegibility" style="border: 0px; margin: 0px; padding: 0;" id="bit-booster">\
    <path d="M24,11C25,37.25,8,19.75,9,35.00000762939453" stroke-width="2" stroke-opacity="1" opacity="1" fill="none" stroke="#79c753"></path>\
    <path d="M9,35.00000762939453L9,59.00000762939453" stroke-width="2" stroke-opacity="1" opacity="1" stroke="#034f84"></path>\
    <path d="M24,11L24,11" stroke-width="2" stroke-opacity="1" opacity="1" stroke="#79c753"></path>\
    <circle id="C_0" cx="9" cy="59.00000762939453" r="4" fill="#034f84" stroke="none"></circle>\
    <circle id="C_1" cx="9" cy="35.00000762939453" r="4" fill="#034f84" stroke="none"></circle>\
    <circle id="C_2" cx="24" cy="11" r="4" fill="#79c753" stroke="none"></circle>\
    </svg>\
    </td>\
    <td class="d top right"><span class="icon"></span>_Y_</td>\
</tr>\
<tr id="T_1" data-commitid="1">\
    <td class="d left"><span class="icon"></span>_Z_</td>\
<td class="right">&nbsp;</td>\
</tr>\
<tr id="T_0" data-commitid="0">\
    <td class="left">&nbsp;</td>\
<td class="right">&nbsp;</td>\
</tr>\
<tr><td colspan="3" class="bottom"><i>&nbsp;</i></td>\
    </tr></tbody>\
    </table>';

var bbRebaseDialog = '\
<section role="dialog" id="bbRebaseDialog" class="aui-layer aui-dialog2 aui-dialog2-large" aria-hidden="true">\
<header class="aui-dialog2-header">\
<h2 class="aui-dialog2-header-main">Rebase Pull Request</h2>\
<div class="aui-dialog2-header-secondary"> </div>\
<a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">Close</span></a>\
</header>\
<div class="aui-dialog2-content">\
<form class="aui prevent-double-submit commit-message-form" method="post" accept-charset="UTF-8" autocomplete="off" id="bbRebaseContent"><span class="aui-icon aui-icon-wait"></span></form>\
<div id="bbRebaseDiagram"></div>\
<div id="bbRebaseStatus"></div>\
</div>\
<footer class="aui-dialog2-footer">\
<div class="aui-dialog2-footer-actions">\
    <button id="bbRebaseSubmit" class="aui-button aui-button-primary" tabindex="3">Rebase</button>\
    <button id="bbRebaseCancel" class="aui-button aui-button-link" tabindex="3">Cancel</button>\
</div>\
<div id="bbRebaseSubmitSpinner"><span class="aui-icon"></span></div>\
<div class="aui-dialog2-footer-hint bbPoweredBy"><i>Powered by <a target="_blank" href="https://marketplace.atlassian.com/plugins/com.bit-booster.bb/server/overview">PR-Booster</a></i></div>\
</footer>\
</section>\
';

var bbSquashDialog = bbReplaceAll(bbRebaseDialog, 'Rebase', 'Squash');
var bbAmendDialog = bbReplaceAll(bbRebaseDialog, 'Rebase', 'Amend');
var bbCherryDialog = bbReplaceAll(bbRebaseDialog, 'Rebase', 'Cherry');
var bbRevertDialog = bbReplaceAll(bbRebaseDialog, 'Rebase', 'Revert');
bbCherryDialog = bbReplaceAll(bbCherryDialog, 'Cherry Pull Request', 'Cherry-Pick Commit');
bbRevertDialog = bbReplaceAll(bbRevertDialog, 'Revert Pull Request', 'Revert Commit');

var bbAmendMessage = 'Edit the commit message and author of branch <b>_Y_\'s</b> tip commit.\
 If successful, rewrite <b>_Y_\'s</b> tip with the amended commit (via force-push).\
 <i><a target="_blank" style="display: none;" href="http://bit-booster.com/bb/docs/amend.html">Learn more</a></i>';

var bbRebaseMessage = 'Rebase branch <b>_Y_</b>\
 by replaying its <b>_X_</b>\
 on top of branch <b>_Z_</b>.  If successful, rewrite <b>_Y_\'s</b> history with the result (via force-push).\
 <i><a target="_blank" style="display: none;" href="http://bit-booster.com/bb/docs/rebase.html">Learn more</a></i>';

var bbSquashMessage = 'Squash branch <b>_Y_</b>\
 by squashing its <b>_X_</b> into a <b>single commit</b>.\
 If successful, rewrite <b>_Y_\'s</b> history with the result (via force-push).\
 <i><a target="_blank" style="display: none;" href="http://bit-booster.com/bb/docs/squash.html">Learn more</a></i>';

var bbCherryMessage = 'Cherry-Pick commit <b>_Y_</b> over to the target branch.\
 If successful, push the new cherry-picked commit to the tip of the target branch (via regular push).\
 <i><a target="_blank" style="display: none;" href="http://bit-booster.com/bb/docs/cherry-pick.html">Learn more</a></i>';

var bbRevertMessage = 'Revert commit <b>_Y_</b> on the target branch, essentially reversing the patch introduced by <b>_Y_</b>.\
 If successful, push the reverting commit to the tip of the target branch (via regular push).\
 <i><a target="_blank" style="display: none;" href="http://bit-booster.com/bb/docs/revert.html">Learn more</a></i>';

var bbAlreadyRebasedTitle = 'Already rebased.';
var bbAlreadyRebasedMessage = '<b class="bbGood">' + bbAlreadyRebasedTitle + '</b> Branch <b>_Y_</b>, with its <b>_X_</b>,\
 already sits on top of branch <b>_Z_</b>.';

var bbAlreadySquashedTitle = 'Already squashed.';
var bbAlreadySquashedMessage = '<b class="bbGood">' + bbAlreadySquashedTitle + '</b> Branch <b>_Y_</b> has only <b>_X_</b>.';

var bbResolveTitle = 'Sorry, because of a merge conflict this pull request cannot be rebased.';
var bbResolveMessage = '<b><i class="bbErr">' + bbResolveTitle + '</i></b> You must rebase manually. Try the following commands from your workstation: <br/> <pre>git fetch origin _Z_ _Y_ \n\
git checkout origin/_Y_\n\
git rebase origin/_Z_\n\
git push origin --force-with-lease=_Y_:origin/_Y_ HEAD:refs/heads/_Y_\n</pre>';

var bbResolveSquashTitle = 'Sorry, because of a merge conflict this pull request cannot be squashed.';
var bbResolveSquashMessage = '<b><i class="bbErr">' + bbResolveSquashTitle + '</i></b> You must resolve the conflict manually. Try the following commands from your workstation: <br/> <pre>git fetch origin _Z_ _Y_ \n\
git checkout origin/_Z_\n\
git merge --squash origin/_Y_\n\
git commit\n\
git push origin --force-with-lease=_Y_:origin/_Y_ HEAD:refs/heads/_Y_\n</pre>';

var bbNoCherriesTitle = 'Cannot Cherry-Pick. Click for details.';
var bbNoCherriesMessage = '<b><i class="bbErr">Every branch in this repository already contains this commit.</i></b>. Sorry, but you cannot cherry-pick a commit into a branch that already contains the original commit.';

var bbNoRevertsTitle = 'Cannot Revert. Click for details.';
var bbNoRevertsMessage = '<b><i class="bbErr">No branch contains this commit.</i></b>. This commit has probably been orphaned by a history rewrite (e.g., git push --force). Sorry, but you cannot revert a commit that does not exist in any branch.';


(function ($) {

    var rebaseInFlight = false;
    var getInFlight = false;
    var mostRecentGet = 0;

    window.addEventListener("load", function load(event) {
        window.removeEventListener("load", load);

        require([
            'bitbucket/util/navbuilder',
            'bitbucket/util/server'
        ], function (nav, server) {

            function stickyBranch() {
                var sticky = '';
                var href = document.getElementById('repository-nav-commits');
                if (!href) {
                    return;
                }
                href = href && href.getAttribute("href");
                href = href && decodeURIComponent(href);
                var pattern = 'commits?until=';
                var x = href.lastIndexOf(pattern);
                if (x >= 0) {
                    href = href.substring(x + pattern.length, href.length);
                    if (bbStartsWith(href, 'refs/heads/')) {
                        href = href.substring(11, href.length);
                    }
                    sticky = href;
                }
                return sticky;
            }

            function handleResult(xhr, textStatus, jqXhr) {

                var amendButton = $('#bbAmendButton');
                var rebaseButton = $('#bbRebaseButton');
                var squashButton = $('#bbSquashButton');
                var cherryButton = $('#bbCherryButton');
                var revertButton = $('#bbRevertButton');
                if (xhr.enabled) {
                    if (xhr.enabled.length > 1 && xhr.enabled[2]) {
                        $(amendButton).show();
                    }
                    if (xhr.enabled[0]) {
                        $(rebaseButton).show();
                    }
                    if (xhr.enabled[1]) {
                        $(squashButton).show();
                    }
                    if (xhr.enabled[0]) {
                        $(cherryButton).show();
                    }
                    if (xhr.enabled[1]) {
                        $(revertButton).show();
                    }
                } else {
                    return;
                }

                var amendContent = document.getElementById('bbAmendContent');
                var rebaseContent = document.getElementById('bbRebaseContent');
                var squashContent = document.getElementById('bbSquashContent');
                var cherryContent = document.getElementById('bbCherryContent');
                var revertContent = document.getElementById('bbRevertContent');

                var amendSubmit = document.getElementById('bbAmendSubmit');
                var rebaseSubmit = document.getElementById('bbRebaseSubmit');
                var squashSubmit = document.getElementById('bbSquashSubmit');
                var cherrySubmit = document.getElementById('bbCherrySubmit');
                var revertSubmit = document.getElementById('bbRevertSubmit');

                var isBlocked = xhr.blockMsg && "" !== xhr.blockMsg;
                var blockMsg = xhr.blockMsg;

                if (amendSubmit) {
                    amendSubmit.disabled = xhr.err || !xhr.userHasWrite || isBlocked;
                    rebaseSubmit.disabled = xhr.err || xhr.isConflicted || !xhr.userHasWrite || xhr.isRebased || isBlocked;
                    squashSubmit.disabled = xhr.err || !xhr.userHasWrite || "1 commit" === xhr.commitCount || isBlocked;
                } else if (cherrySubmit) {
                    cherrySubmit.disabled = xhr.err || !xhr.userHasWrite || !xhr.cherryBranches || xhr.cherryBranches.length == 0;
                    revertSubmit.disabled = xhr.err || !xhr.userHasWrite || !xhr.revertBranches || xhr.revertBranches.length == 0;
                }

                var amMsg = bbAmendMessage;
                var rbMsg = bbRebaseMessage;
                var sqMsg = bbSquashMessage;
                var chMsg = bbCherryMessage;
                var rvMsg = bbRevertMessage;
                var amTitle = undefined;
                var rbTitle = undefined;
                var sqTitle = undefined;
                var chTitle = undefined;
                var rvTitle = undefined;
                var showDiagram = true;
                if (xhr.err) {
                    amMsg = "<i class='bbErr'>" + xhr.err + "</i>";
                    amTitle = 'Cannot amend. Click for details.';
                    rbMsg = amMsg;
                    rbTitle = 'Cannot rebase. Click for details.';
                    sqMsg = amMsg;
                    sqTitle = 'Cannot squash. Click for details.';
                    chMsg = amMsg;
                    chTitle = 'Cannot Cherry-Pick. Click for details.';
                    rvMsg = amMsg;
                    rvTitle = 'Cannot Revert. Click for details.';
                    showDiagram = false;
                } else {
                    if (isBlocked) {
                        var fromBranch = xhr.fromBranch;
                        amMsg = 'Cannot amend branch <b>_Y_</b>. ' + blockMsg;
                        amTitle = 'Cannot amend. Click for details.';
                        rbMsg = 'Cannot rebase branch <b>_Y_</b>. ' + blockMsg;
                        rbTitle = 'Cannot rebase. Click for details.';
                        sqMsg = 'Cannot squash branch <b>_Y_</b>. ' + blockMsg;
                        sqTitle = 'Cannot squash. Click for details.';
                        showDiagram = false;
                    } else if (xhr.isConflicted) {
                        rbMsg = bbResolveMessage;
                        rbTitle = bbResolveTitle;
                        // sqMsg = bbResolveSquashMessage;
                        // sqTitle = bbResolveSquashTitle;
                        showDiagram = false;
                    } else if (xhr.isRebased) {
                        rbMsg = bbAlreadyRebasedMessage;
                        rbTitle = bbAlreadyRebasedTitle;
                    } else if (xhr.isSquashed) {
                        sqMsg = bbAlreadySquashedMessage;
                        sqTitle = bbAlreadySquashedTitle;
                    }

                    if (!xhr.cherryBranches || xhr.cherryBranches.length == 0) {
                        chMsg = bbNoCherriesMessage;
                        chTitle = bbNoCherriesTitle;
                    }
                    if (!xhr.revertBranches || xhr.revertBranches.length == 0) {
                        rvMsg = bbNoRevertsMessage;
                        rvTitle = bbNoRevertsTitle;
                    }

                    if (rebaseSubmit) {
                        amMsg = bbReplaceAll(amMsg, "_X_", xhr.commitCount);
                        amMsg = bbReplaceAll(amMsg, "_Y_", xhr.fromBranch);
                        amMsg = bbReplaceAll(amMsg, "_Z_", xhr.toBranch);
                        rbMsg = bbReplaceAll(rbMsg, "_X_", xhr.commitCount);
                        rbMsg = bbReplaceAll(rbMsg, "_Y_", xhr.fromBranch);
                        rbMsg = bbReplaceAll(rbMsg, "_Z_", xhr.toBranch);
                        sqMsg = bbReplaceAll(sqMsg, "_X_", xhr.commitCount);
                        sqMsg = bbReplaceAll(sqMsg, "_Y_", xhr.fromBranch);
                        sqMsg = bbReplaceAll(sqMsg, "_Z_", xhr.toBranch);
                    } else {
                        chMsg = bbReplaceAll(chMsg, "_Y_", xhr.fromBranch);
                        rvMsg = bbReplaceAll(rvMsg, "_Y_", xhr.fromBranch);
                    }

                    function mergeStrategyDropDown(action) {
                        var html = '';
                        /*
                        html += '<select name="bb' + action + 'Strategy" id="bb' + action + 'Strategy">';
                        html += '<option>default</option>';
                        html += '<option>ours</option>';
                        html += '<option>theirs</option>';
                        html += '<option>patience</option>';
                        html += '<option>ignore-all-space</option>';
                        html += '<option>renormalize</option>';
                        html += '</select>';
                        */
                        return html;
                    }

                    function buildDropDown(list, defaultVal, html) {
                        if (list && list.length) {
                            for (var i = 0; i < list.length; i++) {
                                var v = list[i];
                                html += '<option ';
                                if (v === defaultVal) {
                                    html += ' selected="selected"';
                                }
                                html += ' value="' + v + '"';

                                var u = 50;
                                if (v.indexOf('&lt;') >= 0) {
                                    u += 3;
                                }
                                if (v.indexOf('&gt;') >= 0) {
                                    u += 3;
                                }

                                if (v.length > u) {
                                    v = v.substr(0, u - 2);
                                    // don't want to accidentally break up an entity:
                                    var w = v.lastIndexOf('&');
                                    if (w > u - 5) {
                                        v = v.substr(0, w);
                                    }
                                    v += '...';
                                }
                                html += '>' + v + '</option>';
                            }
                            html += '</select>';
                        }
                        return html;
                    }

                    function buildParentNumberDropDown(xhr, html, inputId, verb, onchange) {
                        if (typeof onchange === "undefined") {
                            onchange = '';
                        }
                        if (xhr.parentCount <= 1) {
                            html += '<input id="' + inputId + '" name="bbParentNumber" type="hidden" value="' + xhr.parentCount + '"/>';
                        } else {
                            html += '<div class="bbEditMsg">Choose this merge commit\'s parent-number for the ' + verb + ':</div>';
                            html += '<select id="' + inputId + '" name="bbParentNumber" ' + onchange + '>';
                            for (var i = 1; i <= xhr.parentCount; i++) {
                                html += '<option bbParent="' + xhr.parents[i - 1] + '"';
                                if (i === 1) {
                                    html += ' selected="selected"';
                                }
                                html += '>' + i + '</option>';
                            }
                            html += '</select> (Default value 1 is usually correct. <a target="_blank" href="https://developer.atlassian.com/blog/2016/04/stop-foxtrots-now/">Learn more</a>.)';
                        }
                        return html;
                    }

                    var hasAmend = amendSubmit && squashSubmit && !(amendSubmit.disabled && squashSubmit.disabled);
                    var hasCherry = cherrySubmit && !cherrySubmit.disabled;
                    var hasRevert = revertSubmit && !revertSubmit.disabled;
                    if (hasAmend || hasCherry || hasRevert) {
                        var amendCommitEdit = '<div class="bbEditMsg">Edit the commit message below:</div><textarea cols="60" rows="7" class="textarea text commit-message full-width-field" name="bbAmendMsg" id="bbAmendMsg">' + xhr.tipMsg + '</textarea>';
                        var authorSquashSelect = '<input id="bbAuthor" name="bbAuthor" type="hidden" value="' + xhr.defaultAuthor + '"/>';
                        var authorAmendSelect = '<input id="bbAmendAuthor" name="bbAuthor" type="hidden" value="' + xhr.amendAuthor + '"/>';
                        var cherryBranchSelect = '<table><tr><td><div class="bbEditMsg">Target branch:</div><select id="bbCherryBranch" name="bbCherryBranch">';
                        var revertBranchSelect = '<table><tr><td><div class="bbEditMsg">Target branch:</div><select id="bbRevertBranch" name="bbRevertBranch">';

                        if (hasAmend) {
                            authorSquashSelect = '<div class="bbEditMsg">Author for the squashed commit:</div>' + authorSquashSelect + xhr.defaultAuthor;
                            if (xhr.authors.length > 1) {
                                authorSquashSelect = '<div class="bbEditMsg">Choose the author for the squashed commit:</div><select id="bbAuthor" name="bbAuthor">';
                                authorSquashSelect = buildDropDown(xhr.authors, xhr.defaultAuthor, authorSquashSelect);
                            }

                            authorAmendSelect = '<div class="bbEditMsg">Author for the amended commit:</div>' + authorAmendSelect + xhr.amendAuthor;
                            if (xhr.authors.length > 1) {
                                authorAmendSelect = '<div class="bbEditMsg">Choose the author for the amended commit:</div><select id="bbAmendAuthor" name="bbAmendAuthor">';
                                authorAmendSelect = buildDropDown(xhr.authors, xhr.amendAuthor, authorAmendSelect);
                            }

                            var squashCommitEdit = '<div class="bbEditMsg">Edit the squashed commit message below:</div><textarea cols="60" rows="7" class="textarea text commit-message full-width-field" name="bbSquashMsg" id="bbSquashMsg">' + xhr.squashMsg + '</textarea>';
                            if (squashSubmit && !squashSubmit.disabled) {
                                sqMsg += authorSquashSelect + squashCommitEdit;
                            }
                            if (!amendSubmit.disabled) {
                                amMsg += authorAmendSelect + amendCommitEdit;
                            }
                        }

                        var cherryCommitMsg = '\n\n(cherry picked from commit ' + xhr.commitId;
                        if (xhr.parentCount > 1) {
                            cherryCommitMsg += ' via parent -m 1)';
                        } else {
                            cherryCommitMsg += ')';
                        }
                        var cherryCommitEdit = '<div class="bbEditMsg">Edit the commit message below (optional):</div><textarea cols="60" rows="5" class="textarea text commit-message full-width-field" name="bbCherryMsg" id="bbCherryMsg">' + xhr.tipMsg + cherryCommitMsg + '</textarea>';
                        var revertCommitEdit = '<div class="bbEditMsg">Edit the commit message below (optional):</div><textarea cols="60" rows="5" class="textarea text commit-message full-width-field" name="bbRevertMsg" id="bbRevertMsg">Revert "' + xhr.firstLineMsg + '"\n\n This reverts commit ' + xhr.commitId;
                        if (xhr.parentCount > 1) {
                            revertCommitEdit += ', reversing\nchanges made via parent ' + xhr.parents[0];
                        }
                        revertCommitEdit += '.</textarea>';

                        if (hasCherry) {
                            cherryBranchSelect = buildDropDown(xhr.cherryBranches, xhr.defaultCherryBranch, cherryBranchSelect);
                            cherryBranchSelect += '</td><td class="bbPushAsNew"><div class="bbEditMsg"><input onclick="bbPushAsNewCheck(this);" id="bbPushCherryAsNewChk" name="bbPushCherryAsNewChk" type="checkbox"/><label for="bbPushCherryAsNewChk">Create pull request?</label></div><input class="bbNewBranch" id="bbPushCherryAsNew" name="bbPushCherryAsNew" type="text" disabled="disabled"/></td>';
                            // cherryBranchSelect += '<td><div class="bbEditMsg">Strategy option (-X):</div>' + mergeStrategyDropDown('Cherry') + '</div></td>';
                            cherryBranchSelect += '</tr></table>';
                            var onchange = 'onchange="bbAdjustCherryMsg(this, ' + "'" + xhr.commitId + "'" + ');"';
                            cherryBranchSelect = buildParentNumberDropDown(xhr, cherryBranchSelect, "bbCherryParent", "cherry-pick", onchange);
                            chMsg += authorSquashSelect + cherryBranchSelect + cherryCommitEdit;
                        }
                        if (hasRevert) {
                            revertBranchSelect = buildDropDown(xhr.revertBranches, xhr.defaultRevertBranch, revertBranchSelect);
                            revertBranchSelect += '</td><td class="bbPushAsNew"><div class="bbEditMsg"><input onclick="bbPushAsNewCheck(this);" id="bbPushRevertAsNewChk" name="bbPushRevertAsNewChk" type="checkbox"/><label for="bbPushRevertAsNewChk">Create pull request?</label></div><input class="bbNewBranch"  id="bbPushRevertAsNew" name="bbPushRevertAsNew" type="text" disabled="disabled"/></td>';
                            // revertBranchSelect += '<td><div class="bbEditMsg">Strategy option (-X):</div>' + mergeStrategyDropDown('Revert') + '</div></td>';
                            revertBranchSelect += '</tr></table>';
                            onchange = 'onchange="bbAdjustRevertMergeMsg(this);"';
                            revertBranchSelect = buildParentNumberDropDown(xhr, revertBranchSelect, "bbRevertParent", "revert", onchange);
                            rvMsg += authorSquashSelect + revertBranchSelect + revertCommitEdit;
                        }
                    }

                    if (!xhr.userHasWrite) {
                        amTitle = 'Cannot amend. Click for details.';
                        chTitle = 'Cannot cherry-pick. Click for details.';
                        rvTitle = 'Cannot revert. Click for details.';
                        rbTitle = 'Cannot rebase. Click for details.';
                        sqTitle = 'Cannot squash. Click for details.';
                        amMsg += '<br/>&nbsp;<br/><i class="bbErr">You do not have sufficient permissions to amend commits in this repository.</i>';
                        chMsg += '<br/>&nbsp;<br/><i class="bbErr">You do not have sufficient permissions to cherry-pick commits in this repository.</i>';
                        rvMsg += '<br/>&nbsp;<br/><i class="bbErr">You do not have sufficient permissions to revert commits in this repository.</i>';
                        rbMsg += '<br/>&nbsp;<br/><i class="bbErr">You do not have sufficient permissions to perform rebases in this repository.</i>';
                        sqMsg += '<br/>&nbsp;<br/><i class="bbErr">You do not have sufficient permissions to perform squashes in this repository.</i>';
                    }
                }

                var bbWarn = '';
                if (!xhr.err && xhr.warn) {
                    bbWarn = '<div class="bbErr"><i class="bbErr">' + xhr.warn + '</i></div>';
                }

                if (rebaseSubmit) {
                    $(amendContent).html(amMsg + bbWarn);
                    $(rebaseContent).html(rbMsg + bbWarn);
                    $(squashContent).html(sqMsg + bbWarn);
                    setToolTip(amendButton, amendSubmit, amTitle);
                    setToolTip(rebaseButton, rebaseSubmit, rbTitle);
                    setToolTip(squashButton, squashSubmit, sqTitle);
                } else {
                    $(cherryContent).html(chMsg + bbWarn);
                    $(revertContent).html(rvMsg + bbWarn);
                    setToolTip(cherryButton, cherrySubmit, chTitle);
                    setToolTip(revertButton, revertSubmit, rvTitle);
                }

                if (rebaseSubmit && showDiagram) {
                    var diagram = bbRebaseDiagram;
                    if (xhr.isRebased) {
                        diagram = bbAlreadyRebasedDiagram;
                    }
                    diagram = bbReplaceAll(diagram, "_Y_", xhr.fromBranch);
                    diagram = bbReplaceAll(diagram, "_Z_", xhr.toBranch);
                    $('#bbRebaseDiagram').html(diagram);
                }

                getInFlight = false;
                mostRecentGet = new Date().getTime();
                setTimeout(function () {
                    if (rebaseSubmit) {
                        $('#bbAmendSubmitSpinner').find('span.aui-icon').trigger('click');
                        $('#bbRebaseSubmitSpinner').find('span.aui-icon').trigger('click');
                        $('#bbSquashSubmitSpinner').find('span.aui-icon').trigger('click');
                    } else {
                        $('#bbCherrySubmitSpinner').find('span.aui-icon').trigger('click');
                        $('#bbRevertSubmitSpinner').find('span.aui-icon').trigger('click');
                    }
                }, 123);
            }

            function setToolTip($dialogButton, submitButton, title) {
                if ($dialogButton && $dialogButton.length > 0 && submitButton) {
                    $(submitButton).toggleClass('bbSubmitDisabled', submitButton.disabled);
                    $dialogButton.toggleClass('bbSubmitDisabled', submitButton.disabled);
                    if (submitButton.disabled && title) {
                        $dialogButton.prop('title', title);
                        AJS.$($dialogButton[0]).tooltip();
                    } else {
                        AJS.$($dialogButton[0]).tooltip('destroy');
                    }
                }
            }

            function bbDialog(mode) {
                return function (e) {
                    var now = new Date().getTime();
                    // If we're 2 minutes stale, refresh.
                    if (now - mostRecentGet > 120000) {
                        $('#' + mode + 'Content').html('<span class="aui-icon aui-icon-wait"></span>');
                        $('#' + mode + 'SubmitSpinner').find('span.aui-icon').toggleClass('aui-icon-wait', false);
                        if (!getInFlight) {
                            getInFlight = true;
                            server.ajax({
                                url: rbServlet,
                                success: handleResult
                            });
                        }
                    }

                    var d = document.getElementById(mode + 'Submit');

                    // Previous click might have failed on the server.  Clear that:
                    d.disabled = $(d).hasClass('bbSubmitDisabled'); // if true, then button must stay disabled
                    $(d).toggleClass('bbSubmitFailed', false);
                    $('#' + mode + 'Button').toggleClass('bbSubmitFailed', false);
                    bbStatus = $('#' + mode + 'Status').html("");

                    AJS.dialog2('#' + mode + 'Dialog').show();
                    var button = $(d);
                    if (button && button[0] && !button[0].disabled) {
                        button.focus();
                    } else {
                        $('#' + mode + 'Cancel').focus();
                    }
                };
            }

            function bbAction(mode) {
                return function (e) {
                    if (rebaseInFlight) {
                        return;
                    }
                    e.preventDefault();

                    var msg = '';
                    var branch = '';
                    var newBranch = '';
                    var pushAsNew = '';
                    var parentNumber = '';
                    var parentIndex = '';
                    var strategyOption = '';
                    var author = document.getElementById('bbAuthor');
                    if (author) {
                        author = author.options && author.options[author.selectedIndex].value || author.value;
                    } else {
                        author = '';
                    }
                    if (mode === 'bbSquash') {
                        msg = document.getElementById('bbSquashMsg');
                        msg = msg.value;
                    } else if (mode === 'bbAmend') {
                        msg = document.getElementById('bbAmendMsg');
                        msg = msg.value;

                        var author = document.getElementById('bbAmendAuthor');
                        if (author) {
                            author = author.options && author.options[author.selectedIndex].value || author.value;
                        } else {
                            author = '';
                        }

                    } else if (mode === 'bbCherry') {

                        var cherryStrategy = 'default'; // document.getElementById('bbCherryStrategy');
                        strategyOption = 'default'; // cherryStrategy.options[cherryStrategy.selectedIndex].text;

                        msg = document.getElementById('bbCherryMsg').value;
                        branch = document.getElementById('bbCherryBranch');
                        parentNumber = document.getElementById('bbCherryParent');
                        pushAsNew = document.getElementById('bbPushCherryAsNewChk').checked ? 'true' : 'false';
                        newBranch = document.getElementById('bbPushCherryAsNew').value;
                        branch = (branch && branch.options && branch.options[branch.selectedIndex].value) || 'bb-unable-to-set-cherry-branch';
                        parentIndex = parentNumber.selectedIndex;
                        parentNumber = (parentIndex && parentNumber.options[parentIndex].text) || 1;

                    } else if (mode === 'bbRevert') {

                        var revertStrategy = 'default'; // document.getElementById('bbRevertStrategy');
                        strategyOption = 'default'; // revertStrategy.options[revertStrategy.selectedIndex].text;

                        msg = document.getElementById('bbRevertMsg').value;
                        branch = document.getElementById('bbRevertBranch');
                        parentNumber = document.getElementById('bbRevertParent');
                        pushAsNew = document.getElementById('bbPushRevertAsNewChk').checked ? 'true' : 'false';
                        newBranch = document.getElementById('bbPushRevertAsNew').value;
                        branch = (branch && branch.options && branch.options[branch.selectedIndex].value) || 'bb-unable-to-set-revert-branch';
                        parentIndex = parentNumber.selectedIndex;
                        parentNumber = (parentIndex && parentNumber.options[parentIndex].text) || 1;

                    }

                    var bbStatus;
                    if (mode === 'bbRebase') {
                        bbStatus = $('#' + mode + 'Status').append("<br/><b>Rebasing...</b>");
                    } else if (mode === 'bbSquash') {
                        bbStatus = $('#' + mode + 'Status').append("<br/><b>Squashing...</b>");
                    } else if (mode === 'bbAmend') {
                        bbStatus = $('#' + mode + 'Status').append("<br/><b>Amending...</b>");
                    } else if (mode === 'bbRevert') {
                        bbStatus = $('#' + mode + 'Status').append("<br/><b>Reverting...</b>");
                    } else if (mode === 'bbCherry') {
                        bbStatus = $('#' + mode + 'Status').append("<br/><b>Cherry-picking...</b>");
                    }

                    $('#' + mode + 'SubmitSpinner').find('span.aui-icon').toggleClass('aui-icon-wait', true);
                    rebaseInFlight = true;

                    server.ajax({
                        url: rbServlet,
                        data: JSON.stringify({
                            'mode': mode,
                            'msg': msg,
                            'author': author,
                            'targetBranch': branch,
                            'newBranch': newBranch,
                            'pushAsNew': pushAsNew,
                            'parentNumber': parentNumber,
                            'strategy': strategyOption
                        }),
                        timeout: 900000,
                        contentType: "application/json; charset=UTF-8",
                        method: 'POST',
                        success: function (xhr, textStatus, jqXhr) {
                            if (rebaseInFlight) {
                                rebaseInFlight = false;
                                $('#' + mode + 'SubmitSpinner').find('span.aui-icon').toggleClass('aui-icon-wait', false);
                                if (xhr.rbSuccess) {
                                    bbStatus.append('<b class="bbGood">Success!</b>');
                                    setTimeout(function () {
                                        if (mode !== 'bbRevert' && mode !== 'bbCherry') {
                                            location.reload(true);
                                        } else {

                                            if ('true' === pushAsNew) {

                                                var createPR = nav.currentRepo().createPullRequest()
                                                    .sourceBranch(newBranch)
                                                    .targetBranch(branch)
                                                    .build();
                                                location.href = createPR;

                                            } else {
                                                var path = window.location.pathname;
                                                var x = path.lastIndexOf('/commits/');
                                                if (x >= 0) {
                                                    path = path.substring(0, x + 8);
                                                }
                                                location.href = nav.pluginServlets().build() + "/bb_net" + path;
                                            }

                                        }
                                    }, 345);
                                } else {
                                    var d = document.getElementById(mode + 'Submit');
                                    d.disabled = true;
                                    $(d).toggleClass('bbSubmitFailed', d.disabled);
                                    $('#' + mode + 'Button').toggleClass('bbSubmitFailed', d.disabled);

                                    var rbErr = xhr.err || xhr.rbErr;
                                    var rbErrOrig = rbErr;
                                    if (!rbErr) {
                                        rbErr = "Unknown error";
                                        rbErrOrig = rbErr;
                                    } else {
                                        rbErr = bbReplaceAll(rbErr, "Rebase succeeded,", '</p><p><span>Rebase succeeded,</span>');
                                        rbErr = bbReplaceAll(rbErr, "Squash succeeded,", '</p><p><span>Squash succeeded,</span>');
                                        rbErr = bbReplaceAll(rbErr, "#_P_#", "</p><p>");
                                        rbErr = bbReplaceAll(rbErr, "#_B#", "<b>");
                                        rbErr = bbReplaceAll(rbErr, "#B_#", "</b>");
                                    }

                                    if (rbErr !== rbErrOrig) {
                                        bbStatus.append('<b class="bbGood">Success! (see note:)</b> <p class="bbErr">' + rbErr + '</p>');
                                    } else {
                                        bbStatus.append('<b class="bbErr"> Failed</b>. <pre class="bbErr">' + rbErr + '</pre>');
                                    }
                                    // document.getElementById('bbSquashMsg').value = msg;
                                    // document.getElementById('bbAuthor').selectedIndex = authorIndex;
                                }
                            }
                        }
                    });
                };
            }

            var rbServlet = nav.pluginServlets().build() + "/bb_rb" + window.location.pathname;
            rbServlet += '?sticky=' + encodeURIComponent(stickyBranch());
            var $mergeButton = $('.merge-button');
            var hasMergeButton = $mergeButton && $mergeButton.length && $mergeButton.length > 0;
            if (!hasMergeButton) {
                $mergeButton = $('.edit-pull-request');
            }
            if ($mergeButton && $mergeButton.length && $mergeButton.length > 0) {
                $mergeButton = $($mergeButton[0]);
                $mergeButton.after("<button id='bbAmendButton' class='aui-button aui-alignment-target'>Amend</button>");
                $mergeButton.after("<button id='bbSquashButton' class='aui-button aui-alignment-target'>Squash</button>");
                $mergeButton.after("<button id='bbRebaseButton' class='aui-button aui-alignment-target'>Rebase</button>");
                $mergeButton.before(bbAmendDialog);
                $mergeButton.before(bbSquashDialog);
                $mergeButton.before(bbRebaseDialog);
                if (!getInFlight) {
                    getInFlight = true;
                    server.ajax({
                        url: rbServlet,
                        success: handleResult
                    });
                }

                $("#bbAmendCancel").click(function (e) {
                    e.preventDefault();
                    AJS.dialog2("#bbAmendDialog").hide();
                });
                $("#bbRebaseCancel").click(function (e) {
                    e.preventDefault();
                    AJS.dialog2("#bbRebaseDialog").hide();
                });
                $("#bbSquashCancel").click(function (e) {
                    e.preventDefault();
                    AJS.dialog2("#bbSquashDialog").hide();
                });

                $("#bbAmendSubmit").click(bbAction('bbAmend'));
                $("#bbRebaseSubmit").click(bbAction('bbRebase'));
                $("#bbSquashSubmit").click(bbAction('bbSquash'));

                $('#bbAmendButton').hide().click(bbDialog('bbAmend'));
                $('#bbRebaseButton').hide().click(bbDialog('bbRebase'));
                $('#bbSquashButton').hide().click(bbDialog('bbSquash'));
            } else {
                var $h2 = $('.aui-page-panel-inner').find('.commit-metadata').find('h2');
                if ($h2 && $h2.length && $h2.length > 0) {
                    $h2 = $($h2[0]);
                    $h2.html($h2.text() + "<div id='bbCommitButtons'><button id='bbCherryButton' class='aui-button aui-alignment-target'>Cherry-Pick</button><button id='bbRevertButton' class='aui-button aui-alignment-target'>Revert</button>");
                    $h2.after(bbCherryDialog);
                    $h2.after(bbRevertDialog);

                    if (!getInFlight) {
                        getInFlight = true;
                        server.ajax({
                            url: rbServlet,
                            success: handleResult
                        });
                    }

                    $("#bbCherryCancel").click(function (e) {
                        e.preventDefault();
                        AJS.dialog2("#bbCherryDialog").hide();
                    });
                    $("#bbRevertCancel").click(function (e) {
                        e.preventDefault();
                        AJS.dialog2("#bbRevertDialog").hide();
                    });

                    $("#bbCherrySubmit").click(bbAction('bbCherry'));
                    $("#bbRevertSubmit").click(bbAction('bbRevert'));

                    $('#bbCherryButton').hide().click(bbDialog('bbCherry'));
                    $('#bbRevertButton').hide().click(bbDialog('bbRevert'));
                }
            }
        });
    });
}(jQuery));
;
;
/* module-key = 'com.onresolve.stash.groovy.groovyrunner:split_vendors~adminPluginResources~auditLogResource~codemirror~combinedAdminSection~commonJavascript~fragm~98dbd469', location = 'js/vendors~adminPluginResources~auditLogResource~codemirror~combinedAdminSection~commonJavascript~fragm~98dbd469.44e9ad5e4671e563fee6.js' */
(window["webpackJsonpScriptRunner"]=window["webpackJsonpScriptRunner"]||[]).push([["vendors~adminPluginResources~auditLogResource~codemirror~combinedAdminSection~commonJavascript~fragm~98dbd469"],Array(43).concat([function(r,t){var e=r.exports={version:"2.5.7"};if(typeof __e=="number")__e=e},,,,,,,,,,function(r,t,e){var n=e(344)("wks");var i=e(226);var o=e(64).Symbol;var a=typeof o=="function";var s=r.exports=function(r){return n[r]||(n[r]=a&&o[r]||(a?o:i)("Symbol."+r))};s.store=n},,,,,,function(r,t,e){var n=e(64);var i=e(43);var o=e(142);var a=e(150);var s=e(143);var u="prototype";var f=function(r,t,e){var c=r&f.F;var v=r&f.G;var l=r&f.S;var h=r&f.P;var p=r&f.B;var d=v?n:l?n[t]||(n[t]={}):(n[t]||{})[u];var y=v?i:i[t]||(i[t]={});var m=y[u]||(y[u]={});var b,x,g,w;if(v)e=t;for(b in e){x=!c&&d&&d[b]!==undefined;g=(x?d:e)[b];w=p&&x?s(g,n):h&&typeof g=="function"?s(Function.call,g):g;if(d)a(d,b,g,r&f.U);if(y[b]!=g)o(y,b,w);if(h&&m[b]!=g)m[b]=g}};n.core=i;f.F=1;f.G=2;f.S=4;f.P=8;f.B=16;f.W=32;f.U=64;f.R=128;r.exports=f},,,,,function(r,t){var e=r.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=e},,,,,,,,,,,,,,,,,,,function(r,t,e){e(449);r.exports=e(43).Array.includes},function(r,t,e){e(453);r.exports=e(43).Array.find},function(r,t,e){e(231);e(464);r.exports=e(43).Array.from},function(r,t,e){e(466);r.exports=e(43).Object.assign},function(r,t,e){e(469);r.exports=e(43).Object.values},function(r,t,e){e(470);r.exports=e(43).Object.entries},function(r,t,e){e(471);r.exports=e(43).String.includes},function(r,t,e){e(473);r.exports=e(43).String.startsWith},function(r,t,e){e(474);r.exports=e(43).String.endsWith},function(r,t,e){e(475);r.exports=e(43).Number.isInteger},function(r,t,e){e(354);e(231);e(355);e(356);r.exports=e(43).Promise},function(r,t,e){e(354);e(231);e(355);e(356);e(486);e(487);r.exports=e(43).Promise},function(r,t){(function(r){"use strict";if(r.fetch){return}var t={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{new Blob;return true}catch(r){return false}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};if(t.arrayBuffer){var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var n=function(r){return r&&DataView.prototype.isPrototypeOf(r)};var i=ArrayBuffer.isView||function(r){return r&&e.indexOf(Object.prototype.toString.call(r))>-1}}function o(r){if(typeof r!=="string"){r=String(r)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(r)){throw new TypeError("Invalid character in header field name")}return r.toLowerCase()}function a(r){if(typeof r!=="string"){r=String(r)}return r}function s(r){var e={next:function(){var t=r.shift();return{done:t===undefined,value:t}}};if(t.iterable){e[Symbol.iterator]=function(){return e}}return e}function u(r){this.map={};if(r instanceof u){r.forEach(function(r,t){this.append(t,r)},this)}else if(Array.isArray(r)){r.forEach(function(r){this.append(r[0],r[1])},this)}else if(r){Object.getOwnPropertyNames(r).forEach(function(t){this.append(t,r[t])},this)}}u.prototype.append=function(r,t){r=o(r);t=a(t);var e=this.map[r];this.map[r]=e?e+","+t:t};u.prototype["delete"]=function(r){delete this.map[o(r)]};u.prototype.get=function(r){r=o(r);return this.has(r)?this.map[r]:null};u.prototype.has=function(r){return this.map.hasOwnProperty(o(r))};u.prototype.set=function(r,t){this.map[o(r)]=a(t)};u.prototype.forEach=function(r,t){for(var e in this.map){if(this.map.hasOwnProperty(e)){r.call(t,this.map[e],e,this)}}};u.prototype.keys=function(){var r=[];this.forEach(function(t,e){r.push(e)});return s(r)};u.prototype.values=function(){var r=[];this.forEach(function(t){r.push(t)});return s(r)};u.prototype.entries=function(){var r=[];this.forEach(function(t,e){r.push([e,t])});return s(r)};if(t.iterable){u.prototype[Symbol.iterator]=u.prototype.entries}function f(r){if(r.bodyUsed){return Promise.reject(new TypeError("Already read"))}r.bodyUsed=true}function c(r){return new Promise(function(t,e){r.onload=function(){t(r.result)};r.onerror=function(){e(r.error)}})}function v(r){var t=new FileReader;var e=c(t);t.readAsArrayBuffer(r);return e}function l(r){var t=new FileReader;var e=c(t);t.readAsText(r);return e}function h(r){var t=new Uint8Array(r);var e=new Array(t.length);for(var n=0;n<t.length;n++){e[n]=String.fromCharCode(t[n])}return e.join("")}function p(r){if(r.slice){return r.slice(0)}else{var t=new Uint8Array(r.byteLength);t.set(new Uint8Array(r));return t.buffer}}function d(){this.bodyUsed=false;this._initBody=function(r){this._bodyInit=r;if(!r){this._bodyText=""}else if(typeof r==="string"){this._bodyText=r}else if(t.blob&&Blob.prototype.isPrototypeOf(r)){this._bodyBlob=r}else if(t.formData&&FormData.prototype.isPrototypeOf(r)){this._bodyFormData=r}else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)){this._bodyText=r.toString()}else if(t.arrayBuffer&&t.blob&&n(r)){this._bodyArrayBuffer=p(r.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(r)||i(r))){this._bodyArrayBuffer=p(r)}else{throw new Error("unsupported BodyInit type")}if(!this.headers.get("content-type")){if(typeof r==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(t.blob){this.blob=function(){var r=f(this);if(r){return r}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){return f(this)||Promise.resolve(this._bodyArrayBuffer)}else{return this.blob().then(v)}}}this.text=function(){var r=f(this);if(r){return r}if(this._bodyBlob){return l(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(h(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}};if(t.formData){this.formData=function(){return this.text().then(x)}}this.json=function(){return this.text().then(JSON.parse)};return this}var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(r){var t=r.toUpperCase();return y.indexOf(t)>-1?t:r}function b(r,t){t=t||{};var e=t.body;if(r instanceof b){if(r.bodyUsed){throw new TypeError("Already read")}this.url=r.url;this.credentials=r.credentials;if(!t.headers){this.headers=new u(r.headers)}this.method=r.method;this.mode=r.mode;if(!e&&r._bodyInit!=null){e=r._bodyInit;r.bodyUsed=true}}else{this.url=String(r)}this.credentials=t.credentials||this.credentials||"omit";if(t.headers||!this.headers){this.headers=new u(t.headers)}this.method=m(t.method||this.method||"GET");this.mode=t.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&e){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})};function x(r){var t=new FormData;r.trim().split("&").forEach(function(r){if(r){var e=r.split("=");var n=e.shift().replace(/\+/g," ");var i=e.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}});return t}function g(r){var t=new u;var e=r.replace(/\r?\n[\t ]+/g," ");e.split(/\r?\n/).forEach(function(r){var e=r.split(":");var n=e.shift().trim();if(n){var i=e.join(":").trim();t.append(n,i)}});return t}d.call(b.prototype);function w(r,t){if(!t){t={}}this.type="default";this.status=t.status===undefined?200:t.status;this.ok=this.status>=200&&this.status<300;this.statusText="statusText"in t?t.statusText:"OK";this.headers=new u(t.headers);this.url=t.url||"";this._initBody(r)}d.call(w.prototype);w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})};w.error=function(){var r=new w(null,{status:0,statusText:""});r.type="error";return r};var _=[301,302,303,307,308];w.redirect=function(r,t){if(_.indexOf(t)===-1){throw new RangeError("Invalid status code")}return new w(null,{status:t,headers:{location:r}})};r.Headers=u;r.Request=b;r.Response=w;r.fetch=function(r,e){return new Promise(function(n,i){var o=new b(r,e);var a=new XMLHttpRequest;a.onload=function(){var r={status:a.status,statusText:a.statusText,headers:g(a.getAllResponseHeaders()||"")};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;n(new w(t,r))};a.onerror=function(){i(new TypeError("Network request failed"))};a.ontimeout=function(){i(new TypeError("Network request failed"))};a.open(o.method,o.url,true);if(o.credentials==="include"){a.withCredentials=true}else if(o.credentials==="omit"){a.withCredentials=false}if("responseType"in a&&t.blob){a.responseType="blob"}o.headers.forEach(function(r,t){a.setRequestHeader(t,r)});a.send(typeof o._bodyInit==="undefined"?null:o._bodyInit)})};r.fetch.polyfill=true})(typeof self!=="undefined"?self:this)},,,,,,,,function(r,t){r.exports=function(r){return typeof r==="object"?r!==null:typeof r==="function"}},,,,,,,,,,,function(r,t,e){var n=e(103);r.exports=function(r){if(!n(r))throw TypeError(r+" is not an object!");return r}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(r,t,e){var n=e(148);var i=e(225);r.exports=e(149)?function(r,t,e){return n.f(r,t,i(1,e))}:function(r,t,e){r[t]=e;return r}},function(r,t,e){var n=e(192);r.exports=function(r,t,e){n(r);if(t===undefined)return r;switch(e){case 1:return function(e){return r.call(t,e)};case 2:return function(e,n){return r.call(t,e,n)};case 3:return function(e,n,i){return r.call(t,e,n,i)}}return function(){return r.apply(t,arguments)}}},function(r,t){var e={}.toString;r.exports=function(r){return e.call(r).slice(8,-1)}},function(r,t,e){var n=e(228);var i=Math.min;r.exports=function(r){return r>0?i(n(r),9007199254740991):0}},,,function(r,t,e){var n=e(114);var i=e(450);var o=e(451);var a=Object.defineProperty;t.f=e(149)?Object.defineProperty:function r(t,e,s){n(t);e=o(e,true);n(s);if(i)try{return a(t,e,s)}catch(r){}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");if("value"in s)t[e]=s.value;return t}},function(r,t,e){r.exports=!e(223)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(r,t,e){var n=e(64);var i=e(142);var o=e(191);var a=e(226)("src");var s="toString";var u=Function[s];var f=(""+u).split(s);e(43).inspectSource=function(r){return u.call(r)};(r.exports=function(r,t,e,s){var u=typeof e=="function";if(u)o(e,"name")||i(e,"name",t);if(r[t]===e)return;if(u)o(e,a)||i(e,a,r[t]?""+r[t]:f.join(String(t)));if(r===n){r[t]=e}else if(!s){delete r[t];i(r,t,e)}else if(r[t]){r[t]=e}else{i(r,t,e)}})(Function.prototype,s,function r(){return typeof this=="function"&&this[a]||u.call(this)})},function(r,t){r.exports={}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(r,t){var e={}.hasOwnProperty;r.exports=function(r,t){return e.call(r,t)}},function(r,t){r.exports=function(r){if(typeof r!="function")throw TypeError(r+" is not a function!");return r}},function(r,t,e){var n=e(227);var i=e(194);r.exports=function(r){return n(i(r))}},function(r,t){r.exports=function(r){if(r==undefined)throw TypeError("Can't call method on  "+r);return r}},function(r,t,e){var n=e(194);r.exports=function(r){return Object(n(r))}},function(r,t,e){var n=e(462);var i=e(346);r.exports=Object.keys||function r(t){return n(t,i)}},,,,,,,,,,,,,,,,,,,,,,,,,,,function(r,t){r.exports=function(r){try{return!!r()}catch(r){return true}}},function(r,t,e){var n=e(103);var i=e(64).document;var o=n(i)&&n(i.createElement);r.exports=function(r){return o?i.createElement(r):{}}},function(r,t){r.exports=function(r,t){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:t}}},function(r,t){var e=0;var n=Math.random();r.exports=function(r){return"Symbol(".concat(r===undefined?"":r,")_",(++e+n).toString(36))}},function(r,t,e){var n=e(144);r.exports=Object("z").propertyIsEnumerable(0)?Object:function(r){return n(r)=="String"?r.split(""):Object(r)}},function(r,t){var e=Math.ceil;var n=Math.floor;r.exports=function(r){return isNaN(r=+r)?0:(r>0?n:e)(r)}},function(r,t,e){var n=e(53)("unscopables");var i=Array.prototype;if(i[n]==undefined)e(142)(i,n,{});r.exports=function(r){i[n][r]=true}},function(r,t){r.exports=false},function(r,t,e){"use strict";var n=e(458)(true);e(345)(String,"String",function(r){this._t=String(r);this._i=0},function(){var r=this._t;var t=this._i;var e;if(t>=r.length)return{value:undefined,done:true};e=n(r,t);this._i+=e.length;return{value:e,done:false}})},function(r,t,e){var n=e(344)("keys");var i=e(226);r.exports=function(r){return n[r]||(n[r]=i(r))}},function(r,t,e){var n=e(148).f;var i=e(191);var o=e(53)("toStringTag");r.exports=function(r,t,e){if(r&&!i(r=e?r:r.prototype,o))n(r,o,{configurable:true,value:t})}},function(r,t,e){var n=e(144);var i=e(53)("toStringTag");var o=n(function(){return arguments}())=="Arguments";var a=function(r,t){try{return r[t]}catch(r){}};r.exports=function(r){var t,e,s;return r===undefined?"Undefined":r===null?"Null":typeof(e=a(t=Object(r),i))=="string"?e:o?n(t):(s=n(t))=="Object"&&typeof t.callee=="function"?"Arguments":s}},function(r,t,e){var n=e(472);var i=e(194);r.exports=function(r,t,e){if(n(t))throw TypeError("String#"+e+" doesn't accept regex!");return String(i(r))}},function(r,t,e){var n=e(53)("match");r.exports=function(r){var t=/./;try{"/./"[r](t)}catch(e){try{t[n]=false;return!"/./"[r](t)}catch(r){}}return true}},function(r,t,e){"use strict";var n=e(192);function i(r){var t,e;this.promise=new r(function(r,n){if(t!==undefined||e!==undefined)throw TypeError("Bad Promise constructor");t=r;e=n});this.resolve=n(t);this.reject=n(e)}r.exports.f=function(r){return new i(r)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(r,t,e){var n=e(193);var i=e(145);var o=e(452);r.exports=function(r){return function(t,e,a){var s=n(t);var u=i(s.length);var f=o(a,u);var c;if(r&&e!=e)while(u>f){c=s[f++];if(c!=c)return true}else for(;u>f;f++)if(r||f in s){if(s[f]===e)return r||f||0}return!r&&-1}}},function(r,t,e){var n=e(43);var i=e(64);var o="__core-js_shared__";var a=i[o]||(i[o]={});(r.exports=function(r,t){return a[r]||(a[r]=t!==undefined?t:{})})("versions",[]).push({version:n.version,mode:e(230)?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},function(r,t,e){"use strict";var n=e(230);var i=e(59);var o=e(150);var a=e(142);var s=e(151);var u=e(459);var f=e(233);var c=e(463);var v=e(53)("iterator");var l=!([].keys&&"next"in[].keys());var h="@@iterator";var p="keys";var d="values";var y=function(){return this};r.exports=function(r,t,e,m,b,x,g){u(e,t,m);var w=function(r){if(!l&&r in P)return P[r];switch(r){case p:return function t(){return new e(this,r)};case d:return function t(){return new e(this,r)}}return function t(){return new e(this,r)}};var _=t+" Iterator";var S=b==d;var A=false;var P=r.prototype;var O=P[v]||P[h]||b&&P[b];var j=O||w(b);var T=b?!S?j:w("entries"):undefined;var E=t=="Array"?P.entries||O:O;var B,L,F;if(E){F=c(E.call(new r));if(F!==Object.prototype&&F.next){f(F,_,true);if(!n&&typeof F[v]!="function")a(F,v,y)}}if(S&&O&&O.name!==d){A=true;j=function r(){return O.call(this)}}if((!n||g)&&(l||A||!P[v])){a(P,v,j)}s[t]=j;s[_]=y;if(b){B={values:S?j:w(d),keys:x?j:w(p),entries:T};if(g)for(L in B){if(!(L in P))o(P,L,B[L])}else i(i.P+i.F*(l||A),t,B)}return B}},function(r,t){r.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(r,t,e){var n=e(64).document;r.exports=n&&n.documentElement},function(r,t,e){var n=e(114);r.exports=function(r,t,e,i){try{return i?t(n(e)[0],e[1]):t(e)}catch(t){var o=r["return"];if(o!==undefined)n(o.call(r));throw t}}},function(r,t,e){var n=e(151);var i=e(53)("iterator");var o=Array.prototype;r.exports=function(r){return r!==undefined&&(n.Array===r||o[i]===r)}},function(r,t,e){var n=e(234);var i=e(53)("iterator");var o=e(151);r.exports=e(43).getIteratorMethod=function(r){if(r!=undefined)return r[i]||r["@@iterator"]||o[n(r)]}},function(r,t,e){var n=e(53)("iterator");var i=false;try{var o=[7][n]();o["return"]=function(){i=true};Array.from(o,function(){throw 2})}catch(r){}r.exports=function(r,t){if(!t&&!i)return false;var e=false;try{var o=[7];var a=o[n]();a.next=function(){return{done:e=true}};o[n]=function(){return a};r(o)}catch(r){}return e}},function(r,t){t.f={}.propertyIsEnumerable},function(r,t,e){var n=e(196);var i=e(193);var o=e(352).f;r.exports=function(r){return function(t){var e=i(t);var a=n(e);var s=a.length;var u=0;var f=[];var c;while(s>u)if(o.call(e,c=a[u++])){f.push(r?[c,e[c]]:e[c])}return f}}},function(r,t,e){"use strict";var n=e(234);var i={};i[e(53)("toStringTag")]="z";if(i+""!="[object z]"){e(150)(Object.prototype,"toString",function r(){return"[object "+n(this)+"]"},true)}},function(r,t,e){var n=e(477);var i=e(196);var o=e(150);var a=e(64);var s=e(142);var u=e(151);var f=e(53);var c=f("iterator");var v=f("toStringTag");var l=u.Array;var h={CSSRuleList:true,CSSStyleDeclaration:false,CSSValueList:false,ClientRectList:false,DOMRectList:false,DOMStringList:false,DOMTokenList:true,DataTransferItemList:false,FileList:false,HTMLAllCollection:false,HTMLCollection:false,HTMLFormElement:false,HTMLSelectElement:false,MediaList:true,MimeTypeArray:false,NamedNodeMap:false,NodeList:true,PaintRequestList:false,Plugin:false,PluginArray:false,SVGLengthList:false,SVGNumberList:false,SVGPathSegList:false,SVGPointList:false,SVGStringList:false,SVGTransformList:false,SourceBufferList:false,StyleSheetList:true,TextTrackCueList:false,TextTrackList:false,TouchList:false};for(var p=i(h),d=0;d<p.length;d++){var y=p[d];var m=h[y];var b=a[y];var x=b&&b.prototype;var g;if(x){if(!x[c])s(x,c,l);if(!x[v])s(x,v,y);u[y]=l;if(m)for(g in n)if(!x[g])o(x,g,n[g],true)}}},function(r,t,e){"use strict";var n=e(230);var i=e(64);var o=e(143);var a=e(234);var s=e(59);var u=e(103);var f=e(192);var c=e(479);var v=e(480);var l=e(357);var h=e(358).set;var p=e(482)();var d=e(237);var y=e(359);var m=e(483);var b=e(360);var x="Promise";var g=i.TypeError;var w=i.process;var _=w&&w.versions;var S=_&&_.v8||"";var A=i[x];var P=a(w)=="process";var O=function(){};var j,T,E,B;var L=T=d.f;var F=!!function(){try{var r=A.resolve(1);var t=(r.constructor={})[e(53)("species")]=function(r){r(O,O)};return(P||typeof PromiseRejectionEvent=="function")&&r.then(O)instanceof t&&S.indexOf("6.6")!==0&&m.indexOf("Chrome/66")===-1}catch(r){}}();var R=function(r){var t;return u(r)&&typeof(t=r.then)=="function"?t:false};var I=function(r,t){if(r._n)return;r._n=true;var e=r._c;p(function(){var n=r._v;var i=r._s==1;var o=0;var a=function(t){var e=i?t.ok:t.fail;var o=t.resolve;var a=t.reject;var s=t.domain;var u,f,c;try{if(e){if(!i){if(r._h==2)k(r);r._h=1}if(e===true)u=n;else{if(s)s.enter();u=e(n);if(s){s.exit();c=true}}if(u===t.promise){a(g("Promise-chain cycle"))}else if(f=R(u)){f.call(u,o,a)}else o(u)}else a(n)}catch(r){if(s&&!c)s.exit();a(r)}};while(e.length>o)a(e[o++]);r._c=[];r._n=false;if(t&&!r._h)M(r)})};var M=function(r){h.call(i,function(){var t=r._v;var e=U(r);var n,o,a;if(e){n=y(function(){if(P){w.emit("unhandledRejection",t,r)}else if(o=i.onunhandledrejection){o({promise:r,reason:t})}else if((a=i.console)&&a.error){a.error("Unhandled promise rejection",t)}});r._h=P||U(r)?2:1}r._a=undefined;if(e&&n.e)throw n.v})};var U=function(r){return r._h!==1&&(r._a||r._c).length===0};var k=function(r){h.call(i,function(){var t;if(P){w.emit("rejectionHandled",r)}else if(t=i.onrejectionhandled){t({promise:r,reason:r._v})}})};var C=function(r){var t=this;if(t._d)return;t._d=true;t=t._w||t;t._v=r;t._s=2;if(!t._a)t._a=t._c.slice();I(t,true)};var D=function(r){var t=this;var e;if(t._d)return;t._d=true;t=t._w||t;try{if(t===r)throw g("Promise can't be resolved itself");if(e=R(r)){p(function(){var n={_w:t,_d:false};try{e.call(r,o(D,n,1),o(C,n,1))}catch(r){C.call(n,r)}})}else{t._v=r;t._s=1;I(t,false)}}catch(r){C.call({_w:t,_d:false},r)}};if(!F){A=function r(t){c(this,A,x,"_h");f(t);j.call(this);try{t(o(D,this,1),o(C,this,1))}catch(r){C.call(this,r)}};j=function r(t){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false};j.prototype=e(484)(A.prototype,{then:function r(t,e){var n=L(l(this,A));n.ok=typeof t=="function"?t:true;n.fail=typeof e=="function"&&e;n.domain=P?w.domain:undefined;this._c.push(n);if(this._a)this._a.push(n);if(this._s)I(this,false);return n.promise},catch:function(r){return this.then(undefined,r)}});E=function(){var r=new j;this.promise=r;this.resolve=o(D,r,1);this.reject=o(C,r,1)};d.f=L=function(r){return r===A||r===B?new E(r):T(r)}}s(s.G+s.W+s.F*!F,{Promise:A});e(233)(A,x);e(485)(x);B=e(43)[x];s(s.S+s.F*!F,x,{reject:function r(t){var e=L(this);var n=e.reject;n(t);return e.promise}});s(s.S+s.F*(n||!F),x,{resolve:function r(t){return b(n&&this===B?A:this,t)}});s(s.S+s.F*!(F&&e(351)(function(r){A.all(r)["catch"](O)})),x,{all:function r(t){var e=this;var n=L(e);var i=n.resolve;var o=n.reject;var a=y(function(){var r=[];var n=0;var a=1;v(t,false,function(t){var s=n++;var u=false;r.push(undefined);a++;e.resolve(t).then(function(t){if(u)return;u=true;r[s]=t;--a||i(r)},o)});--a||i(r)});if(a.e)o(a.v);return n.promise},race:function r(t){var e=this;var n=L(e);var i=n.reject;var o=y(function(){v(t,false,function(r){e.resolve(r).then(n.resolve,i)})});if(o.e)i(o.v);return n.promise}})},function(r,t,e){var n=e(114);var i=e(192);var o=e(53)("species");r.exports=function(r,t){var e=n(r).constructor;var a;return e===undefined||(a=n(e)[o])==undefined?t:i(a)}},function(r,t,e){var n=e(143);var i=e(481);var o=e(347);var a=e(224);var s=e(64);var u=s.process;var f=s.setImmediate;var c=s.clearImmediate;var v=s.MessageChannel;var l=s.Dispatch;var h=0;var p={};var d="onreadystatechange";var y,m,b;var x=function(){var r=+this;if(p.hasOwnProperty(r)){var t=p[r];delete p[r];t()}};var g=function(r){x.call(r.data)};if(!f||!c){f=function r(t){var e=[];var n=1;while(arguments.length>n)e.push(arguments[n++]);p[++h]=function(){i(typeof t=="function"?t:Function(t),e)};y(h);return h};c=function r(t){delete p[t]};if(e(144)(u)=="process"){y=function(r){u.nextTick(n(x,r,1))}}else if(l&&l.now){y=function(r){l.now(n(x,r,1))}}else if(v){m=new v;b=m.port2;m.port1.onmessage=g;y=n(b.postMessage,b,1)}else if(s.addEventListener&&typeof postMessage=="function"&&!s.importScripts){y=function(r){s.postMessage(r+"","*")};s.addEventListener("message",g,false)}else if(d in a("script")){y=function(r){o.appendChild(a("script"))[d]=function(){o.removeChild(this);x.call(r)}}}else{y=function(r){setTimeout(n(x,r,1),0)}}}r.exports={set:f,clear:c}},function(r,t){r.exports=function(r){try{return{e:false,v:r()}}catch(r){return{e:true,v:r}}}},function(r,t,e){var n=e(114);var i=e(103);var o=e(237);r.exports=function(r,t){n(r);if(i(t)&&t.constructor===r)return t;var e=o.f(r);var a=e.resolve;a(t);return e.promise}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(r,t,e){"use strict";var n=e(59);var i=e(343)(true);n(n.P,"Array",{includes:function r(t){return i(this,t,arguments.length>1?arguments[1]:undefined)}});e(229)("includes")},function(r,t,e){r.exports=!e(149)&&!e(223)(function(){return Object.defineProperty(e(224)("div"),"a",{get:function(){return 7}}).a!=7})},function(r,t,e){var n=e(103);r.exports=function(r,t){if(!n(r))return r;var e,i;if(t&&typeof(e=r.toString)=="function"&&!n(i=e.call(r)))return i;if(typeof(e=r.valueOf)=="function"&&!n(i=e.call(r)))return i;if(!t&&typeof(e=r.toString)=="function"&&!n(i=e.call(r)))return i;throw TypeError("Can't convert object to primitive value")}},function(r,t,e){var n=e(228);var i=Math.max;var o=Math.min;r.exports=function(r,t){r=n(r);return r<0?i(r+t,0):o(r,t)}},function(r,t,e){"use strict";var n=e(59);var i=e(454)(5);var o="find";var a=true;if(o in[])Array(1)[o](function(){a=false});n(n.P+n.F*a,"Array",{find:function r(t){return i(this,t,arguments.length>1?arguments[1]:undefined)}});e(229)(o)},function(r,t,e){var n=e(143);var i=e(227);var o=e(195);var a=e(145);var s=e(455);r.exports=function(r,t){var e=r==1;var u=r==2;var f=r==3;var c=r==4;var v=r==6;var l=r==5||v;var h=t||s;return function(t,s,p){var d=o(t);var y=i(d);var m=n(s,p,3);var b=a(y.length);var x=0;var g=e?h(t,b):u?h(t,0):undefined;var w,_;for(;b>x;x++)if(l||x in y){w=y[x];_=m(w,x,d);if(r){if(e)g[x]=_;else if(_)switch(r){case 3:return true;case 5:return w;case 6:return x;case 2:g.push(w)}else if(c)return false}}return v?-1:f||c?c:g}}},function(r,t,e){var n=e(456);r.exports=function(r,t){return new(n(r))(t)}},function(r,t,e){var n=e(103);var i=e(457);var o=e(53)("species");r.exports=function(r){var t;if(i(r)){t=r.constructor;if(typeof t=="function"&&(t===Array||i(t.prototype)))t=undefined;if(n(t)){t=t[o];if(t===null)t=undefined}}return t===undefined?Array:t}},function(r,t,e){var n=e(144);r.exports=Array.isArray||function r(t){return n(t)=="Array"}},function(r,t,e){var n=e(228);var i=e(194);r.exports=function(r){return function(t,e){var o=String(i(t));var a=n(e);var s=o.length;var u,f;if(a<0||a>=s)return r?"":undefined;u=o.charCodeAt(a);return u<55296||u>56319||a+1===s||(f=o.charCodeAt(a+1))<56320||f>57343?r?o.charAt(a):u:r?o.slice(a,a+2):(u-55296<<10)+(f-56320)+65536}}},function(r,t,e){"use strict";var n=e(460);var i=e(225);var o=e(233);var a={};e(142)(a,e(53)("iterator"),function(){return this});r.exports=function(r,t,e){r.prototype=n(a,{next:i(1,e)});o(r,t+" Iterator")}},function(r,t,e){var n=e(114);var i=e(461);var o=e(346);var a=e(232)("IE_PROTO");var s=function(){};var u="prototype";var f=function(){var r=e(224)("iframe");var t=o.length;var n="<";var i=">";var a;r.style.display="none";e(347).appendChild(r);r.src="javascript:";a=r.contentWindow.document;a.open();a.write(n+"script"+i+"document.F=Object"+n+"/script"+i);a.close();f=a.F;while(t--)delete f[u][o[t]];return f()};r.exports=Object.create||function r(t,e){var o;if(t!==null){s[u]=n(t);o=new s;s[u]=null;o[a]=t}else o=f();return e===undefined?o:i(o,e)}},function(r,t,e){var n=e(148);var i=e(114);var o=e(196);r.exports=e(149)?Object.defineProperties:function r(t,e){i(t);var a=o(e);var s=a.length;var u=0;var f;while(s>u)n.f(t,f=a[u++],e[f]);return t}},function(r,t,e){var n=e(191);var i=e(193);var o=e(343)(false);var a=e(232)("IE_PROTO");r.exports=function(r,t){var e=i(r);var s=0;var u=[];var f;for(f in e)if(f!=a)n(e,f)&&u.push(f);while(t.length>s)if(n(e,f=t[s++])){~o(u,f)||u.push(f)}return u}},function(r,t,e){var n=e(191);var i=e(195);var o=e(232)("IE_PROTO");var a=Object.prototype;r.exports=Object.getPrototypeOf||function(r){r=i(r);if(n(r,o))return r[o];if(typeof r.constructor=="function"&&r instanceof r.constructor){return r.constructor.prototype}return r instanceof Object?a:null}},function(r,t,e){"use strict";var n=e(143);var i=e(59);var o=e(195);var a=e(348);var s=e(349);var u=e(145);var f=e(465);var c=e(350);i(i.S+i.F*!e(351)(function(r){Array.from(r)}),"Array",{from:function r(t){var e=o(t);var i=typeof this=="function"?this:Array;var v=arguments.length;var l=v>1?arguments[1]:undefined;var h=l!==undefined;var p=0;var d=c(e);var y,m,b,x;if(h)l=n(l,v>2?arguments[2]:undefined,2);if(d!=undefined&&!(i==Array&&s(d))){for(x=d.call(e),m=new i;!(b=x.next()).done;p++){f(m,p,h?a(x,l,[b.value,p],true):b.value)}}else{y=u(e.length);for(m=new i(y);y>p;p++){f(m,p,h?l(e[p],p):e[p])}}m.length=p;return m}})},function(r,t,e){"use strict";var n=e(148);var i=e(225);r.exports=function(r,t,e){if(t in r)n.f(r,t,i(0,e));else r[t]=e}},function(r,t,e){var n=e(59);n(n.S+n.F,"Object",{assign:e(467)})},function(r,t,e){"use strict";var n=e(196);var i=e(468);var o=e(352);var a=e(195);var s=e(227);var u=Object.assign;r.exports=!u||e(223)(function(){var r={};var t={};var e=Symbol();var n="abcdefghijklmnopqrst";r[e]=7;n.split("").forEach(function(r){t[r]=r});return u({},r)[e]!=7||Object.keys(u({},t)).join("")!=n})?function r(t,e){var u=a(t);var f=arguments.length;var c=1;var v=i.f;var l=o.f;while(f>c){var h=s(arguments[c++]);var p=v?n(h).concat(v(h)):n(h);var d=p.length;var y=0;var m;while(d>y)if(l.call(h,m=p[y++]))u[m]=h[m]}return u}:u},function(r,t){t.f=Object.getOwnPropertySymbols},function(r,t,e){var n=e(59);var i=e(353)(false);n(n.S,"Object",{values:function r(t){return i(t)}})},function(r,t,e){var n=e(59);var i=e(353)(true);n(n.S,"Object",{entries:function r(t){return i(t)}})},function(r,t,e){"use strict";var n=e(59);var i=e(235);var o="includes";n(n.P+n.F*e(236)(o),"String",{includes:function r(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:undefined)}})},function(r,t,e){var n=e(103);var i=e(144);var o=e(53)("match");r.exports=function(r){var t;return n(r)&&((t=r[o])!==undefined?!!t:i(r)=="RegExp")}},function(r,t,e){"use strict";var n=e(59);var i=e(145);var o=e(235);var a="startsWith";var s=""[a];n(n.P+n.F*e(236)(a),"String",{startsWith:function r(t){var e=o(this,t,a);var n=i(Math.min(arguments.length>1?arguments[1]:undefined,e.length));var u=String(t);return s?s.call(e,u,n):e.slice(n,n+u.length)===u}})},function(r,t,e){"use strict";var n=e(59);var i=e(145);var o=e(235);var a="endsWith";var s=""[a];n(n.P+n.F*e(236)(a),"String",{endsWith:function r(t){var e=o(this,t,a);var n=arguments.length>1?arguments[1]:undefined;var u=i(e.length);var f=n===undefined?u:Math.min(i(n),u);var c=String(t);return s?s.call(e,c,f):e.slice(f-c.length,f)===c}})},function(r,t,e){var n=e(59);n(n.S,"Number",{isInteger:e(476)})},function(r,t,e){var n=e(103);var i=Math.floor;r.exports=function r(t){return!n(t)&&isFinite(t)&&i(t)===t}},function(r,t,e){"use strict";var n=e(229);var i=e(478);var o=e(151);var a=e(193);r.exports=e(345)(Array,"Array",function(r,t){this._t=a(r);this._i=0;this._k=t},function(){var r=this._t;var t=this._k;var e=this._i++;if(!r||e>=r.length){this._t=undefined;return i(1)}if(t=="keys")return i(0,e);if(t=="values")return i(0,r[e]);return i(0,[e,r[e]])},"values");o.Arguments=o.Array;n("keys");n("values");n("entries")},function(r,t){r.exports=function(r,t){return{value:t,done:!!r}}},function(r,t){r.exports=function(r,t,e,n){if(!(r instanceof t)||n!==undefined&&n in r){throw TypeError(e+": incorrect invocation!")}return r}},function(r,t,e){var n=e(143);var i=e(348);var o=e(349);var a=e(114);var s=e(145);var u=e(350);var f={};var c={};var t=r.exports=function(r,t,e,v,l){var h=l?function(){return r}:u(r);var p=n(e,v,t?2:1);var d=0;var y,m,b,x;if(typeof h!="function")throw TypeError(r+" is not iterable!");if(o(h))for(y=s(r.length);y>d;d++){x=t?p(a(m=r[d])[0],m[1]):p(r[d]);if(x===f||x===c)return x}else for(b=h.call(r);!(m=b.next()).done;){x=i(b,p,m.value,t);if(x===f||x===c)return x}};t.BREAK=f;t.RETURN=c},function(r,t){r.exports=function(r,t,e){var n=e===undefined;switch(t.length){case 0:return n?r():r.call(e);case 1:return n?r(t[0]):r.call(e,t[0]);case 2:return n?r(t[0],t[1]):r.call(e,t[0],t[1]);case 3:return n?r(t[0],t[1],t[2]):r.call(e,t[0],t[1],t[2]);case 4:return n?r(t[0],t[1],t[2],t[3]):r.call(e,t[0],t[1],t[2],t[3])}return r.apply(e,t)}},function(r,t,e){var n=e(64);var i=e(358).set;var o=n.MutationObserver||n.WebKitMutationObserver;var a=n.process;var s=n.Promise;var u=e(144)(a)=="process";r.exports=function(){var r,t,e;var f=function(){var n,i;if(u&&(n=a.domain))n.exit();while(r){i=r.fn;r=r.next;try{i()}catch(n){if(r)e();else t=undefined;throw n}}t=undefined;if(n)n.enter()};if(u){e=function(){a.nextTick(f)}}else if(o&&!(n.navigator&&n.navigator.standalone)){var c=true;var v=document.createTextNode("");new o(f).observe(v,{characterData:true});e=function(){v.data=c=!c}}else if(s&&s.resolve){var l=s.resolve(undefined);e=function(){l.then(f)}}else{e=function(){i.call(n,f)}}return function(n){var i={fn:n,next:undefined};if(t)t.next=i;if(!r){r=i;e()}t=i}}},function(r,t,e){var n=e(64);var i=n.navigator;r.exports=i&&i.userAgent||""},function(r,t,e){var n=e(150);r.exports=function(r,t,e){for(var i in t)n(r,i,t[i],e);return r}},function(r,t,e){"use strict";var n=e(64);var i=e(148);var o=e(149);var a=e(53)("species");r.exports=function(r){var t=n[r];if(o&&t&&!t[a])i.f(t,a,{configurable:true,get:function(){return this}})}},function(r,t,e){"use strict";var n=e(59);var i=e(43);var o=e(64);var a=e(357);var s=e(360);n(n.P+n.R,"Promise",{finally:function(r){var t=a(this,i.Promise||o.Promise);var e=typeof r=="function";return this.then(e?function(e){return s(t,r()).then(function(){return e})}:r,e?function(e){return s(t,r()).then(function(){throw e})}:r)}})},function(r,t,e){"use strict";var n=e(59);var i=e(237);var o=e(359);n(n.S,"Promise",{try:function(r){var t=i.f(this);var e=o(r);(e.e?t.reject:t.resolve)(e.v);return t.promise}})}])]);;
;
/* module-key = 'com.onresolve.stash.groovy.groovyrunner:sr-autoreviewers-resources', location = 'js/srAutoreviewersResources.44e9ad5e4671e563fee6.js' */
/*! For license information please see srAutoreviewersResources.44e9ad5e4671e563fee6.js.LICENSE */
(function(e){function r(r){var n=r[0];var o=r[1];var a=r[2];var c,f,l=0,d=[];for(;l<n.length;l++){f=n[l];if(u[f]){d.push(u[f][0])}u[f]=0}for(c in o){if(Object.prototype.hasOwnProperty.call(o,c)){e[c]=o[c]}}if(s)s(r);while(d.length){d.shift()()}i.push.apply(i,a||[]);return t()}function t(){var e;for(var r=0;r<i.length;r++){var t=i[r];var n=true;for(var a=1;a<t.length;a++){var c=t[a];if(u[c]!==0)n=false}if(n){i.splice(r--,1);e=o(o.s=t[0])}}return e}var n={};var u={srAutoreviewersResources:0};var i=[];function o(r){if(n[r]){return n[r].exports}var t=n[r]={i:r,l:false,exports:{}};e[r].call(t.exports,t,t.exports,o);t.l=true;return t.exports}o.m=e;o.c=n;o.d=function(e,r,t){if(!o.o(e,r)){Object.defineProperty(e,r,{enumerable:true,get:t})}};o.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};o.t=function(e,r){if(r&1)e=o(e);if(r&8)return e;if(r&4&&typeof e==="object"&&e&&e.__esModule)return e;var t=Object.create(null);o.r(t);Object.defineProperty(t,"default",{enumerable:true,value:e});if(r&2&&typeof e!="string")for(var n in e)o.d(t,n,function(r){return e[r]}.bind(null,n));return t};o.n=function(e){var r=e&&e.__esModule?function r(){return e["default"]}:function r(){return e};o.d(r,"a",r);return r};o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)};o.p="";if(typeof AJS!=="undefined"){o.p=AJS.contextPath()+"/download/resources/com.onresolve.stash.groovy.groovyrunner:assets-f64bc105-2c91-49c0-a9e3-b26c74f5162c/"}var a=window["webpackJsonpScriptRunner"]=window["webpackJsonpScriptRunner"]||[];var c=a.push.bind(a);a.push=r;a=a.slice();for(var f=0;f<a.length;f++)r(a[f]);var s=c;i.push([683,"vendors~adminPluginResources~auditLogResource~codemirror~combinedAdminSection~commonJavascript~fragm~98dbd469"]);return t()})({331:function(e,r,t){"use strict";var n,u,i;!function(o){true?!(u=[t(39)],n=o,i=typeof n==="function"?n.apply(r,u):n,i!==undefined&&(e.exports=i)):undefined}(function(e,r){function t(e,r,t,n){return!(e.selector!=r.selector||e.context!=r.context||t&&t.$lqguid!=r.fn.$lqguid||n&&n.$lqguid!=r.fn2.$lqguid)}e.extend(e.fn,{livequery:function(r,u){var i,o=this;return e.each(n.queries,function(e,n){return t(o,n,r,u)?(i=n)&&!1:void 0}),i=i||new n(o.selector,o.context,r,u),i.stopped=!1,i.run(),o},expire:function(r,u){var i=this;return e.each(n.queries,function(e,o){t(i,o,r,u)&&!i.stopped&&n.stop(o.id)}),i}});var n=e.livequery=function(r,t,u,i){var o=this;return o.selector=r,o.context=t,o.fn=u,o.fn2=i,o.elements=e([]),o.stopped=!1,o.id=n.queries.push(o)-1,u.$lqguid=u.$lqguid||n.guid++,i&&(i.$lqguid=i.$lqguid||n.guid++),o};n.prototype={stop:function(){var r=this;r.stopped||(r.fn2&&r.elements.each(r.fn2),r.elements=e([]),r.stopped=!0)},run:function(){var r=this;if(!r.stopped){var t=r.elements,n=e(r.selector,r.context),u=n.not(t),i=t.not(n);r.elements=n,u.each(r.fn),r.fn2&&i.each(r.fn2)}}},e.extend(n,{guid:0,queries:[],queue:[],running:!1,timeout:null,registered:[],checkQueue:function(){if(n.running&&n.queue.length)for(var e=n.queue.length;e--;)n.queries[n.queue.shift()].run()},pause:function(){n.running=!1},play:function(){n.running=!0,n.run()},registerPlugin:function(){e.each(arguments,function(r,t){if(e.fn[t]&&!(e.inArray(t,n.registered)>0)){var u=e.fn[t];e.fn[t]=function(){var e=u.apply(this,arguments);return n.run(),e},n.registered.push(t)}})},run:function(t){t!==r?e.inArray(t,n.queue)<0&&n.queue.push(t):e.each(n.queries,function(r){e.inArray(r,n.queue)<0&&n.queue.push(r)}),n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(n.checkQueue,20)},stop:function(t){t!==r?n.queries[t].stop():e.each(n.queries,n.prototype.stop)}}),n.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html","prop","removeProp"),e(function(){n.play()})})},39:function(e,r){e.exports=jQuery},46:function(e,r,t){"use strict";t.r(r);var n=t(83);var u=t.n(n);var i=t(84);var o=t.n(i);var a=t(85);var c=t.n(a);var f=t(86);var s=t.n(f);var l=t(87);var d=t.n(l);var p=t(88);var v=t.n(p);var m=t(89);var h=t.n(m);var g=t(90);var y=t.n(g);var b=t(91);var q=t.n(b);var x=t(92);var w=t.n(x);var _=t(93);var S=t.n(_);var P=t(94);var R=t.n(P)},683:function(e,r,t){t(46);t(95);t(331);t(684);e.exports=t(686)},684:function(e,r,t){"use strict";var n=t(685);var u=AJS.$;var i={},o=[],a=[];function c(e,r){return _.map(e,function(e){return{id:e.user.name,item:e.user,text:e.user.displayName,locked:r}})}function f(e,r,t){u.ajax(AJS.contextPath()+"/rest/scriptrunner-bitbucket/latest/auto-reviewers/byRef",{data:{fromRepoId:r.repo,from:r.branch,toRepoId:t.repo,to:t.branch},error:function(e,r,t){console.error(r+" "+t)},success:function(r){var t=c(r.mandatory,true).concat(c(r.suggested,false));if(typeof t!=="undefined"&&t.length>0){t=t.concat(e.data());e.data(t)}}})}function s(){var e=u("section#content");var r=null;if(e.length){r={projectKey:e.data("projectkey"),repoSlug:e.data("reposlug"),pullRequestId:e.data("pullrequestid"),toBranchRef:u("input#toRef-field").val()}}return r}function l(e){u.ajax(AJS.contextPath()+"/rest/scriptrunner-bitbucket/latest/auto-reviewers/byPullRequestId",{data:s(),error:function(e,r,t){console.error(r+" "+t)},success:function(r){o=c(r.mandatory,true);_.each(o,function(e){i[e.item.id]=e});d(e,r.mandatory)}})}function d(e,r){var t=e.data(),n=p(t),u=_.without(a,n);a=p(r);var o=_.difference(a,n);if(o){t=t.concat(_.map(o,function(e){return i[e]}))}_.each(t,function(e){if(_.contains(u,e.item.id)||_.contains(_.intersection(n,a),e.item.id)){e.locked="true"}});if(typeof t!=="undefined"&&t.length>0){e.data(t)}}function p(e){return _.map(e,function(e){if(e.id===undefined){return e.user.id}else{return e.item.id}})}function v(e,r){n.off(e,r);n.on(e,r)}var m=function(){_.defer(function(){v("bitbucket.model.page-state.changed.targetBranch",h);u("div#edit-pull-request-dialog fieldset.pull-request-details").livequery(function(){h();v("bitbucket.feature.repository.revisionReferenceSelector.revisionRefChanged",h);u.ajaxPrefilter(function(e,r){if(r.type!=="PUT"||e.type!=="PUT"){return}var t=AJS.$.parseJSON(e.data);var n=_.map(t.reviewers,function(e){return e.user.id});var u=_.difference(a,n);if(u){var i=_.filter(o,function(e){return _.contains(u,e.item.id)}).map(function(e){return{user:e.item}});t.reviewers=t.reviewers.concat(i);e.data=JSON.stringify(t)}})});u("div.pull-request-create-form #s2id_reviewers:visible").livequery(function(){h()})})};var h=function(){var e=u("input[name=fromRepoId]").val();var r=u("input[name=fromBranch]").val();var t=u("input[name=toRepoId]").val();var n=u("input[name=toBranch]").val();var i=u("input#toRef-field").val();var o=u(".field-group.pull-request-reviewers #reviewers").data("select2");if(i){l(o)}else{if(e&&r&&t&&n){f(o,{repo:e,branch:r},{repo:t,branch:n})}}};AJS.$(document).ready(m)},685:function(e,r){e.exports=require("bitbucket/util/events")},686:function(e,r,t){}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bundled-hooks:incomplete-tasks-merge-check-pull-request-resources', location = '/views/task/pullRequest/incomplete-tasks-merge-check.js' */
define("bitbucket/internal/feature/incomplete-tasks/pull-request",["bitbucket/internal/feature/pull-request/can-merge/can-merge","bitbucket/internal/model/page-state","bitbucket/internal/util/events","exports"],function(b,c,d,e){function f(){var a=c.getPullRequest();a.get("closed")||b(a)}e.onReady=function(){d.on("bitbucket.internal.feature.pull-request-tasks.saved",f)}});jQuery(document).ready(function(){require("bitbucket/internal/feature/incomplete-tasks/pull-request").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:jira-key-linker', location = '/bitbucket-plugin-jira/internal/feature/jira/key-linker/key-linker.js' */
define("bitbucket-plugin-jira/internal/feature/jira/key-linker/key-linker",["module","exports","lodash","bitbucket/util/navbuilder"],function(e,a,f,g){function h(a){for(var c=/([a-z]-|[\s!"#$%&'()\*\+,./:;<=>\?@\[\]^_`\{|\}~\u2000-\u206F\u2E00-\u2E7F]|^)(([A-Z][A-Z0-9_]+)-([0-9]+))(\b|_)/g,d=[],b;b=c.exec(a);)d.push(b[2]),c.lastIndex--;return d}Object.defineProperty(a,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(f),l=babelHelpers.interopRequireDefault(g);a.default={jiraKeyLinker:function(a){var c=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=k.default.has(c,"properties.jira-key"),b=[];return d||(b=h(a),b.length)?Promise.resolve((d?c.properties["jira-key"]:b).map(function(a){var b=jiraIntegration.templates.trigger.issuesTrigger({className:c.className,issues:[{key:a,url:l.default.pluginServlets().path("jira-integration","issues",a).build()}]});return{find:a,replace:b}})):Promise.resolve([])},DEFAULT_JIRA_LINKER_WEIGHT:10};e.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:pull-request-title-jira-issues', location = '/bitbucket-plugin-jira/internal/feature/jira/pull-request-title/pull-request-title-jira-issues.js' */
define("bitbucket-plugin-jira/internal/feature/jira/pull-request-title/pull-request-title-jira-issues",["exports","bitbucket/internal/bbui/pull-request-header/pull-request-title-enricher","../dialog/dialog","../key-linker/key-linker"],function(a,c,h,e){Object.defineProperty(a,"__esModule",{value:!0});a.onReady=function(){k.default.registerReplacer(function(a,c){for(var d=arguments.length,f=Array(2<d?d-2:0),b=2;b<d;b++)f[b-2]=arguments[b];return e.jiraKeyLinker.apply(void 0,[a,babelHelpers.extends({className:g},
c)].concat(f))},e.DEFAULT_JIRA_LINKER_WEIGHT);new l.default({id:"pr-title-jira-issues-dialog",triggerSelector:"."+g})};var k=babelHelpers.interopRequireDefault(c),l=babelHelpers.interopRequireDefault(h),g="pr-title-jira-issues-trigger"});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:pull-request-title-jira-issues', location = '/bitbucket-plugin-jira/internal/feature/jira/pull-request-title/pull-request-title-jira-issues-init.js' */
jQuery(document).ready(function(){require("bitbucket-plugin-jira/internal/feature/jira/pull-request-title/pull-request-title-jira-issues").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:commit-list-jira-issues', location = '/bitbucket-plugin-jira/internal/feature/jira/commits/commits-jira-issues.js' */
define("bitbucket-plugin-jira/internal/feature/jira/commits/commits-jira-issues","exports jquery bitbucket/internal/feature/commits/commit-message-enricher bitbucket/internal/util/events ../dialog/dialog ../key-linker/key-linker".split(" "),function(b,k,l,m,n,f){function a(){var d=(0,p.default)(q);d.find(c+" \x3e a").length?d.find(c).show():d.find(c).hide()}Object.defineProperty(b,"__esModule",{value:!0});b.onReady=function(){new r.default({id:"commits-jira-issues-dialog",triggerSelector:"."+g});
h.default.on("bitbucket.internal.widget.commitsTable.serverContentAdded",a);h.default.on("bitbucket.internal.widget.commitsTable.contentAdded",a);a()};var p=babelHelpers.interopRequireDefault(k);b=babelHelpers.interopRequireDefault(l);var h=babelHelpers.interopRequireDefault(m),r=babelHelpers.interopRequireDefault(n),g="commits-issues-trigger",c=".commit-list-jira-issues-col",q=".commits-table";b.default.registerReplacer(function(d,b){for(var a=arguments.length,c=Array(2<a?a-2:0),e=2;e<a;e++)c[e-
2]=arguments[e];return f.jiraKeyLinker.apply(void 0,[d,babelHelpers.extends({className:g},b)].concat(c))},f.DEFAULT_JIRA_LINKER_WEIGHT)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:commit-list-jira-issues', location = '/bitbucket-plugin-jira/internal/feature/jira/commits/commits-jira-issues-init.js' */
jQuery(document).ready(function(){require("bitbucket-plugin-jira/internal/feature/jira/commits/commits-jira-issues").onReady()});;
;
/* module-key = 'com.nerdwin15.stash-stash-webhook-jenkins:jenkins-pr-triggerbutton', location = '/static/jenkins-pr-triggerbutton.js' */
define('plugin/jenkins/pr-triggerbutton', [
  'jquery',
  'aui',
  'bitbucket/internal/model/page-state'
], function($, AJS, pageState) {
  
  var getResourceUrl = function() {
    return AJS.contextPath() + '/rest/jenkins/latest/projects/' 
      + pageState.getProject().getKey() + '/repos/' 
      + pageState.getRepository().getSlug() + '/triggerJenkins'
      + '?pr_id=' + pageState.getPullRequest().getId();
  };

  var waiting = '<span class="aui-icon aui-icon-wait">Wait</span>';
  
  $(".triggerJenkinsBuild").click(function() {
    var $this = $(this);
    var text = $this.text();

    $this.attr("disabled", "disabled").html(waiting + " " + text);
  
    $.ajax({
      url: getResourceUrl(),
      type: "POST",
      contentType:"application/json; charset=utf-8",
      success: function() {
        // Place in timer for UI-happiness - might go "too quick" and not notice
        // it actually triggered
        setTimeout(function() {  
          $this.removeAttr("disabled").text(text);
        }, 500);
      }
    });
    return false;
  });

});

AJS.$(document).ready(function() {
    require('plugin/jenkins/pr-triggerbutton');
});
;
;
/* module-key = 'com.nerdwin15.stash-stash-webhook-jenkins:license-check', location = '/static/license-check.js' */
AJS.$(function(){
    AJS.$.ajax({
        url : AJS.contextPath() + "/rest/jenkins/latest/license",
    }).done(function(response){
        if (!response.licensed) {
            AJS.flag({
               type: 'error',
               title: "Webhook to Jenkins for Bitbucket Server has an invalid license!",
               body: "Jenkins builds will no longer be triggered until a valid license is applied."
           });
        }
        
    });
});;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-resources', location = '/soy/duplicates-info.soy' */
// This file was automatically generated from duplicates-info.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace plugin.page.sonar4stash.
 */

if (typeof plugin == 'undefined') { var plugin = {}; }
if (typeof plugin.page == 'undefined') { plugin.page = {}; }
if (typeof plugin.page.sonar4stash == 'undefined') { plugin.page.sonar4stash = {}; }


plugin.page.sonar4stash.duplicatesInfoPanel = function(opt_data, opt_ignored) {
  var output = '<section id="duplicate-code-dialog" class="aui-dialog2 aui-dialog2-small aui-layer" role="dialog" aria-hidden="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">Duplicate Code Details</h2><a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">Close</span></a></header><div class="aui-dialog2-content"><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner comment-container">';
  var duplicateList4 = opt_data.duplicates;
  var duplicateListLen4 = duplicateList4.length;
  for (var duplicateIndex4 = 0; duplicateIndex4 < duplicateListLen4; duplicateIndex4++) {
    var duplicateData4 = duplicateList4[duplicateIndex4];
    output += '<ul class="aui-nav comment"><strong>is duplicated by</strong><br>';
    var byPathList6 = duplicateData4;
    var byPathListLen6 = byPathList6.length;
    for (var byPathIndex6 = 0; byPathIndex6 < byPathListLen6; byPathIndex6++) {
      var byPathData6 = byPathList6[byPathIndex6];
      output += ((byPathIndex6 == 0 && byPathData6.path != opt_data.currentFilePath) ? '<a href="' + soy.$$escapeHtml(byPathData6.url) + '">' + soy.$$escapeHtml(byPathData6.shortPath) + '</a><br>' : '') + 'lines:&nbsp;<a href="' + soy.$$escapeHtml(byPathData6.url) + '#' + soy.$$escapeHtml(byPathData6.from) + '-' + soy.$$escapeHtml(byPathData6.from + byPathData6.size) + '">' + soy.$$escapeHtml(byPathData6.from) + ' - ' + soy.$$escapeHtml(byPathData6.from + byPathData6.size) + '</a>' + ((! (byPathIndex6 == byPathListLen6 - 1)) ? ', ' : '');
    }
    output += '</ul>';
  }
  output += '</div></nav></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button id="dialog-close-button" class="aui-button aui-button-primary">Close</button></div></footer></section>';
  return output;
};
if (goog.DEBUG) {
  plugin.page.sonar4stash.duplicatesInfoPanel.soyTemplateName = 'plugin.page.sonar4stash.duplicatesInfoPanel';
}
;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-resources', location = '/soy/sonar-issues.soy' */
// This file was automatically generated from sonar-issues.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace plugin.page.sonar4stash.
 */

if (typeof plugin == 'undefined') { var plugin = {}; }
if (typeof plugin.page == 'undefined') { plugin.page = {}; }
if (typeof plugin.page.sonar4stash == 'undefined') { plugin.page.sonar4stash = {}; }


plugin.page.sonar4stash.sonarIssueHeader = function(opt_data, opt_ignored) {
  return '<div class="sonar-issue-marker-' + soy.$$escapeHtml(opt_data.issue.severity) + ' ' + ((opt_data.issue.status == 'RESOLVED') ? 'sonar-resolved' : '') + '" title="' + plugin.page.sonar4stash.sonarIssueDesc(opt_data) + '"></div><strong ' + ((opt_data.issue.status == 'RESOLVED') ? 'class="strike-through"' : '') + '>' + soy.$$escapeHtml(opt_data.issue.severity) + '</strong>&nbsp;' + ((opt_data.issue.type == 'CODE_SMELL') ? '<div class="sonar-issue-type sonar-code-smell" title="' + soy.$$escapeHtml('Code smell: a maintainability-related issue in the code') + '"></div>' : (opt_data.issue.type == 'VULNERABILITY') ? '<div class="sonar-issue-type sonar-vulnerability" title="' + soy.$$escapeHtml('Vulnerability: a security-related issue which represents a potential backdoor for attackers') + '"></div>' : (opt_data.issue.type == 'BUG') ? '<div class="sonar-issue-type sonar-bug" title="' + soy.$$escapeHtml('Bug: an issue that represents something wrong in the code') + '"></div>' : '') + ((opt_data.issue.type) ? '<strong ' + ((opt_data.issue.status == 'RESOLVED') ? 'class="strike-through"' : '') + '>' + soy.$$escapeHtml(opt_data.issue.type) + '</strong>&nbsp;' : '') + '<br><span ' + ((opt_data.issue.status == 'RESOLVED') ? 'class="strike-through"' : '') + '>' + soy.$$escapeHtml(opt_data.issue.message) + '</span>';
};
if (goog.DEBUG) {
  plugin.page.sonar4stash.sonarIssueHeader.soyTemplateName = 'plugin.page.sonar4stash.sonarIssueHeader';
}


plugin.page.sonar4stash.sonarIssueDesc = function(opt_data, opt_ignored) {
  return '' + ((opt_data.issue.severity == 'CRITICAL') ? soy.$$escapeHtml('Critical: must be reviewed immediately and fixed soon') : (opt_data.issue.severity == 'BLOCKER') ? soy.$$escapeHtml('Blocker: must be fixed immediately') : (opt_data.issue.severity == 'MAJOR') ? soy.$$escapeHtml('Major: high potential for significant to moderate impact') : (opt_data.issue.severity == 'MINOR') ? soy.$$escapeHtml('Minor: potential for moderate to minor impact') : (opt_data.issue.severity == 'INFO') ? soy.$$escapeHtml('Info: neither a bug nor a quality flaw, just a finding') : '');
};
if (goog.DEBUG) {
  plugin.page.sonar4stash.sonarIssueDesc.soyTemplateName = 'plugin.page.sonar4stash.sonarIssueDesc';
}


plugin.page.sonar4stash.sonarIssuePanel = function(opt_data, opt_ignored) {
  var output = '<nav class="aui-navgroup aui-navgroup-vertical sonar-issue-panel"><div class="aui-navgroup-inner comment-container">';
  var issueList62 = opt_data.issues;
  var issueListLen62 = issueList62.length;
  for (var issueIndex62 = 0; issueIndex62 < issueListLen62; issueIndex62++) {
    var issueData62 = issueList62[issueIndex62];
    output += '<ul class="aui-nav comment" style="border-top: 0px"><li>' + plugin.page.sonar4stash.sonarIssueHeader({issue: issueData62}) + '<br><ul class="actions"><li><a class="edit" href="' + soy.$$escapeHtml(issueData62.detailUrl) + '" title="Shows details about this issue in SonarQube">Details</a></li><li><a href="' + soy.$$escapeHtml(issueData62.fileUrl) + '" title="Shows details about the current file in SonarQube">File</a></li><li><a href="' + soy.$$escapeHtml(issueData62.ruleUrl) + '" title="Shows details about the rule for this issue in SonarQube">Rule</a></li>' + ((opt_data.commentFeatureAvailable) ? '<li><a href="#" title="Creates a pull request task for this issue" data-issue-comment="' + soy.$$escapeHtml(issueData62.message) + '" data-issue-line="' + soy.$$escapeHtml(issueData62.line) + '" class="sonar4stash-create-task">Create task</a></li>' : '') + ((opt_data.commentFeatureAvailable) ? '<li><a href="#" title="Creates a comment for this issue"  data-issue-comment="' + soy.$$escapeHtml(issueData62.message) + '" data-issue-line="' + soy.$$escapeHtml(issueData62.line) + '" class="sonar4stash-create-comment">Comment</a></li>' : '') + ((issueData62.status != 'RESOLVED') ? '<li><a href="#" title="Marks this issue as resolved" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" class="sonar4stash-resolve">Fixed</a></li><li><a href="#" title="Marks this issue as a won\'t fix" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" class="sonar4stash-wont-fix">Won\'t fix</a></li><li><a href="#" title="Marks this issue as a false positive" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" class="sonar4stash-false-positive">False positive</a></li>' : (issueData62.status == 'RESOLVED') ? '<li><a href="#" title="Marks this issue as reopened" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" class="sonar4stash-unresolve">Re-open (' + soy.$$escapeHtml(issueData62.resolution) + ')</a></li>' : '') + ((issueData62.status != 'RESOLVED' && issueData62.status != 'CONFIRMED') ? '<li><a href="#" title="Marks this issue as confirmed" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" class="sonar4stash-confirm">Confirm</a></li>' : (issueData62.status != 'RESOLVED' && issueData62.status == 'CONFIRMED') ? '<li><a href="#" title="Un-confirm this issue" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" class="sonar4stash-unconfirm">Un-confirm</a></li>' : '') + '</ul><br><ul class="actions"><li><label for="sonarIssueSeverity">Severity: </label><select class="sonarIssueSeverity" name="sonarIssueSeverity" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '"><option value="BLOCKER" ' + soy.$$escapeHtml(issueData62.severity == 'BLOCKER' ? 'selected' : '') + '>Blocker</option><option value="CRITICAL" ' + soy.$$escapeHtml(issueData62.severity == 'CRITICAL' ? 'selected' : '') + '>Critical</option><option value="MAJOR" ' + soy.$$escapeHtml(issueData62.severity == 'MAJOR' ? 'selected' : '') + '>Major</option><option value="MINOR" ' + soy.$$escapeHtml(issueData62.severity == 'MINOR' ? 'selected' : '') + '>Minor</option><option value="INFO" ' + soy.$$escapeHtml(issueData62.severity == 'INFO' ? 'selected' : '') + '>Info</option></select></li>' + ((opt_data.issueTypesAvailable) ? '<li><label for="sonarIssueType">Type: </label><select class="sonarIssueType" name="sonarIssueType" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '"><option value="CODE_SMELL" ' + soy.$$escapeHtml(issueData62.type == 'CODE_SMELL' ? 'selected' : '') + '>Code smell</option><option value="VULNERABILITY" ' + soy.$$escapeHtml(issueData62.type == 'VULNERABILITY' ? 'selected' : '') + '>Vulnerability</option><option value="BUG" ' + soy.$$escapeHtml(issueData62.type == 'BUG' ? 'selected' : '') + '>Bug</option></select></li>' : '') + '<li><label for="sonarIssueAssignee">Assignee: </label><input type="text" name="sonarIssueAssignee" class="sonarIssueAssignee" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" value="' + soy.$$escapeHtml(issueData62.assignee) + '"></li>' + ((opt_data.tagsAvailable) ? '<li><label for="sonarTags">Tags: </label><input type="text" name="sonarTags" class="text sonarTags" data-issue-key="' + soy.$$escapeHtml(issueData62.key) + '" value="' + soy.$$escapeHtml(issueData62.tags) + '"></li>' : '') + '</ul><br><ul class="actions"><li><p title="Technical debt of this issue" class="times">Debt: ' + ((issueData62.debt) ? soy.$$escapeHtml(issueData62.debt) : 'n/a') + '</p></li><li><p title="Creation date of this issue" class="times">Created: ' + soy.$$escapeHtml(issueData62.creationDate) + '</p></li>' + ((issueData62.updateDate) ? '<li><p title="Last update of this issue" class="times">Updated: ' + soy.$$escapeHtml(issueData62.updateDateShortFormat) + '</p></li>' : '') + ((issueData62.squid) ? '<li><p title="Squid Rule ID" class="times">&nbsp;' + soy.$$escapeHtml(issueData62.squid) + '</p></li>' : '') + '</ul></li></ul>';
  }
  output += '</div></nav>';
  return output;
};
if (goog.DEBUG) {
  plugin.page.sonar4stash.sonarIssuePanel.soyTemplateName = 'plugin.page.sonar4stash.sonarIssuePanel';
}
;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-resources', location = '/js/sonar4stash.js' */
define("mibexsoftware/sonar4stash",["jquery","underscore","bitbucket/util/events","bitbucket/util/state","bitbucket/util/navbuilder","codemirror","bitbucket/util/server","aui/flag"],function(h,I,d,j,E,z,y,D){var f={};function e(J){if(AJS.$(".CodeMirror").length>1){var M=AJS.$(".CodeMirror").get(1);for(var L in f[J]){var K=f[J][L].textRange;if(K){M.CodeMirror.markText({line:J-1,ch:K.startOffset},{line:J-1,ch:K.endOffset},{className:"issue-underline"})}}}}function n(V,R,T,S,L,Q,U){f[L]=R;var P=document.createElement("div");P.className="sonar-issue-markers sonar-issue-marker-"+V;P.setAttribute("title","Click to see issue details");e(L);var O=true;for(var N=0;N<R.length;N++){if(R[N].status!=="RESOLVED"){O=false;break}}if(O){P.className+=" sonar-resolved"}if(f[L].length>1){var J=P.appendChild(document.createElement("span"));J.className="sonar-issues-counter";J.innerHTML=f[L].length}var K=f[L];var M=null;P.addEventListener("click",function(Z){var W=function(){M.clear();M=null};if(!M){var X={commentFeatureAvailable:j.getPullRequest(),issues:K,tagsAvailable:T,id:L,issueTypesAvailable:S};var Y=h(plugin.page.sonar4stash.sonarIssuePanel(X));var aa=AJS.$(".CodeMirror").get(AJS.$(".CodeMirror").length>1?1:0);M=aa.CodeMirror.addLineWidget(Q._handle,Y[0],{coverGutter:true,noHScroll:false,above:false,weight:500});k(Q,W,Y,K);b(Y,W,K);g(Y,K);t();p(Y,K);s(Q,W);u(Q)}else{W()}});return P}function k(K,J,M,N){var L=M.find(".sonarIssueSeverity");L.auiSelect2({formatSelection:function(O){return h('<div><div class="sonar-issue-markers sonar-issue-marker-'+O.id+'"></div>'+O.text+"</div>")},formatResult:function(O){return h('<div><div class="sonar-issue-markers sonar-issue-marker-'+O.id+'"></div>'+O.text+"</div>")},minimumResultsForSearch:-1});L.on("change",function(){var P=h(this).val();var Q=h(this).find("option:selected").text();var O=h(this).attr("data-issue-key");y.rest({type:"POST",data:{repoId:j.getRepository().id,severity:P,issueKey:O},url:AJS.contextPath()+"/rest/sonar4stash/1.0/sonarissues/severity",statusCode:{400:function(S,T,R){i(h.parseJSON(S.responseText).error);return false},500:function(S,T,R){i(h.parseJSON(S.responseText).message);return false},200:function(S){D({type:"success",title:"Issue severity set to "+Q+".",close:"auto"});var U=l(N);I.each(N,function(V){if(V.key===O){V.severity=P}});var T=h(K._handle.gutterMarkers["sonar-issue-markers"]);var R=l(N);if(U!==R){T.removeClass("sonar-issue-marker-"+U);T.addClass("sonar-issue-marker-"+R)}J()}}})})}function p(J,L){var K=J.find(".sonarTags");K.auiSelect2({multiple:true,ajax:{url:E.rest("sonar4stash","1.0").addPathComponents("sonar-tags").build(),dataType:"json",delay:250,data:function(M){return{repoId:j.getRepository().id,q:M}},results:function(M){return{results:I.map(M,function(N){return{id:N.name,text:N.name}})}},cache:true,params:{error:function(M){var N=JSON.parse(M.responseText).error;D({type:"error",title:"Error while fetching Sonar tags",body:N,close:"manual"})}}},initSelection:function(N,P){var M=N.val();var O=I.map(M.split(","),function(Q){return{id:Q.trim(),text:Q.trim()}});P(O)}});K.on("change",function(){var N=h(this).val().replace(/\s+/g,"");var M=h(this).attr("data-issue-key");y.rest({type:"POST",data:{repoId:j.getRepository().id,tags:N,issueKey:M},url:AJS.contextPath()+"/rest/sonar4stash/1.0/sonarissues/tags",statusCode:{400:function(P,Q,O){i(h.parseJSON(P.responseText).error);return false},500:function(P,Q,O){i(h.parseJSON(P.responseText).message);return false},200:function(O){D({type:"success",title:"Updated tags for issue.",close:"auto"});I.each(L,function(P){if(P.key===M){P.tags=N}})}}})})}function g(K,L){var J=K.find(".sonarIssueAssignee");J.auiSelect2({minimumInputLength:2,ajax:{url:E.rest("sonar4stash","1.0").addPathComponents("sonar-users").build(),dataType:"json",delay:250,data:function(M){return{repoId:j.getRepository().id,q:M}},results:function(M){return{results:I.map(M,function(N){return{id:N.login,text:N.name}})}},cache:true,params:{error:function(M){var N=JSON.parse(M.responseText).error;D({type:"error",title:"Error while fetching Sonar users",body:N,close:"manual"})}}},initSelection:function(N,O){var M=J.val();if(M){y.rest({type:"GET",async:false,url:AJS.contextPath()+"/rest/sonar4stash/1.0/sonar-users",data:{repoId:j.getRepository().id,q:M},statusCode:{200:function(P){O({id:M,text:M===""?"Unassigned":P[1].name})}}})}else{O({id:"",text:"Unassigned"})}}});J.on("change",function(){var O=h(this).val();var N=h(this).select2("data").text;var M=h(this).attr("data-issue-key");y.rest({type:"POST",data:{repoId:j.getRepository().id,login:O,issueKey:M},url:AJS.contextPath()+"/rest/sonar4stash/1.0/sonarissues/assignee",statusCode:{400:function(Q,R,P){i(h.parseJSON(Q.responseText).error);return false},500:function(Q,R,P){i(h.parseJSON(Q.responseText).message);return false},200:function(P){D({type:"success",title:"Issue assignee set to "+N+".",close:"auto"});I.each(L,function(Q){if(Q.key===M){Q.assignee=O}})}}})})}function b(L,J,M){var K=L.find(".sonarIssueType");K.auiSelect2({formatSelection:function(N){return h('<div><div class="sonar-issue-type-small sonar-'+N.id.toLowerCase().replace("_","-")+'"></div>'+N.text+"</div>")},formatResult:function(N){return h('<div><div class="sonar-issue-type-small sonar-'+N.id.toLowerCase().replace("_","-")+'"></div>'+N.text+"</div>")},minimumResultsForSearch:-1});K.on("change",function(){var O=h(this).val();var P=h(this).find("option:selected").text();var N=h(this).attr("data-issue-key");y.rest({type:"POST",data:{repoId:j.getRepository().id,issueType:O,issueKey:N},url:AJS.contextPath()+"/rest/sonar4stash/1.0/sonarissues/type",statusCode:{400:function(R,S,Q){i(h.parseJSON(R.responseText).error);return false},500:function(R,S,Q){i(h.parseJSON(R.responseText).message);return false},200:function(Q){D({type:"success",title:"Issue type set to "+P+".",close:"auto"});I.each(M,function(R){if(R.key===N){R.type=O}});J()}}})})}function l(L){var K={BLOCKER:5,CRITICAL:4,MAJOR:3,MINOR:2,INFO:1};var J="INFO";I.each(L,function(M){if(K[M.severity]>K[J]){J=M.severity}});return J}function i(J){if(J.indexOf("Insufficient privileges")>=0){J=J+": maintenance of issues needs 'Administer Issues' permission in SonarQube."}D({type:"error",title:"Issue transition failed",body:J,close:"manual"})}function s(K,J){function L(O,P,M,N,Q){y.rest({type:"POST",data:{repoId:j.getRepository().id,transitionName:P,issueKey:O.attr("data-issue-key")},url:AJS.contextPath()+"/rest/sonar4stash/1.0/sonarissues/transition",statusCode:{400:function(S,T,R){i(h.parseJSON(S.responseText).error);return false},500:function(S,T,R){i(h.parseJSON(S.responseText).message);return false},200:function(S){D({type:"success",title:"Issue marked as "+M+".",close:"auto"});var V=O.closest("div.comment-container").children().length;var U=f[K.lineNumber];var Y=-1;for(var W=0;W<U.length;W++){if(U[W].key===O.attr("data-issue-key")){Y=W;break}}if(Y>-1){U[Y].status=N;U[Y].resolution=Q}var X=l(U);var T=h(K._handle.gutterMarkers["sonar-issue-markers"]);if(V===1){if(N==="RESOLVED"){T.addClass("sonar-resolved")}else{T.removeClass("sonar-resolved")}}else{if(N==="RESOLVED"){var R=l(U);if(X!==R){T.removeClass("sonar-issue-marker-"+X);T.addClass("sonar-issue-marker-"+R)}T.find(".sonar-issues-counter").text(V===2?"":V-1)}}J()}}})}h(".sonar4stash-resolve").click(function(M){M.preventDefault();L(h(this),"resolve","resolved","RESOLVED","RESOLVED")});h(".sonar4stash-unresolve").click(function(M){M.preventDefault();L(h(this),"reopen","reopened","REOPENED")});h(".sonar4stash-false-positive").click(function(M){M.preventDefault();L(h(this),"falsepositive","false positive","RESOLVED","FALSE-POSITIVE")});h(".sonar4stash-wont-fix").click(function(M){M.preventDefault();L(h(this),"wontfix","won't fix","RESOLVED","WONTFIX")});h(".sonar4stash-confirm").click(function(M){M.preventDefault();L(h(this),"confirm","confirmed","CONFIRMED")});h(".sonar4stash-unconfirm").click(function(M){M.preventDefault();L(h(this),"unconfirm","reopened","REOPENED")})}function C(M){function L(){var P=document.createElement("div");P.className="sonar-issue-marker-EMPTY";return P}function O(Q,P){M.view.setGutterMarker(Q,"sonar-issue-markers",P)}var K=M.diff&&M.diff.hunks&&M.diff.hunks.length&&M.diff.hunks[0].destinationLine===1;var J=new h.Deferred();var N=o(M);if(N){y.rest({type:"GET",url:AJS.contextPath()+"/rest/sonar4stash/1.0/sonarissues",data:N,statusCode:{400:function(Q,R,P){J.reject(Q);return false},401:function(){J.resolve(false);return false},403:function(Q,R,P){J.reject(Q);return false},404:function(Q,R,P){J.reject(Q);return false},500:function(Q,R,P){J.reject(Q);return false},204:function(){J.resolve(false);return false},200:function(T){M.view.registerGutter("sonar-issue-markers",{weight:1400});if(!K&&T.length>0){var Q=AJS.$(".file-toolbar");for(var S=0;S<T.length;S++){if(T[S].line===0){for(var P=0;P<T[S].issues.length;P++){var R={issue:T[S].issues[P]};Q.append('<div class="sonar-issue-header">'+plugin.page.sonar4stash.sonarIssueHeader(R)+"</div>")}}}}var U=false;M.eachLine(function(aa){var Z=aa.handles.TO;if(!Z&&aa.handles.SOURCE){Z=aa.handles.SOURCE}if(!Z){if(aa.handles.FROM){O(aa.handles.FROM,L())}return}var V=aa.line.destination?aa.line.destination:aa.lineNumber;var Y=null;for(var X in T){if((K&&T[X].line===0&&Z.lineNumber===1)||(T[X].line===V)){Y=T[X];break}else{if(!K&&T[X].line===0){U=true}}}var W;if(Y&&!(Z.lineType==="CONTEXT"&&Y.showOnlyInDiff&&V>1)){U=true;W=n(Y.maxSeverity,Y.issues,Y.issueTypesAvailable,Y.tagsAvailable,V,Z,M)}else{W=L()}O(Z,W)}).done(function(){J.resolve(U)})}}})}else{setTimeout(function(){J.resolve(false)},0)}return J.promise()}function m(K,L){var J=document.createElement("div");var M=K.split(":");J.className="sonar-coverage-marker sonar-"+M[0];h(J).tooltip({gravity:"nw",title:function(){switch(M[0]){case"covered":return"Covered by "+L+" tests";case"partiallycovered":return"Covered by "+L+" tests ("+M[1]+" of "+M[2]+" conditions)";case"uncovered":return"Not covered by "+L+" tests"}}});return J}function q(K){var J=new h.Deferred();var L=o(K);if(L){y.rest({type:"GET",url:AJS.contextPath()+"/rest/sonar4stash/1.0/coverage",data:L,statusCode:{400:function(N,O,M){J.reject(N);return false},401:function(){J.resolve(false);return false},404:function(N,O,M){J.reject(N);return false},403:function(N,O,M){J.reject(N);return false},500:function(N,O,M){J.reject(N);return false},204:function(){J.resolve();return false},200:function(N){var O=false;var M=false;K.eachLine(function(U){var T=U.handles.TO;if(!T&&U.handles.SOURCE){T=U.handles.SOURCE}if(!T){return}var V=U.line.destination?U.line.destination:U.lineNumber;var P=N.utCoverageByLine[V];var S=N.itCoverageByLine[V];if(P){if(!O){K.view.registerGutter("sonar-coverage-markers-ut",{weight:10});O=true}var R=m(P,"unit");K.view.setGutterMarker(T,"sonar-coverage-markers-ut",R)}if(S){if(!M){K.view.registerGutter("sonar-coverage-markers-it",{weight:20});M=true}var Q=m(S,"integration");K.view.setGutterMarker(T,"sonar-coverage-markers-it",Q)}});J.resolve()}}})}else{setTimeout(function(){J.resolve(false)},0)}return J.promise()}function w(N,L){var J={};for(var K=0;K<N.length;K++){var M=JSON.stringify(L(N[K]));J[M]=J[M]||[];J[M].push(N[K])}return Object.keys(J).map(function(O){return J[O]})}function B(L){var K=j.getPullRequest()?j.getPullRequest().fromRef.repository:j.getRepository();var J=j.getPullRequest()?j.getPullRequest().fromRef.id:j.getRef().displayId;var M=E.project(K.project).repo(K).browse();return M.path(L.split("/")).at(J).build()}function H(M){for(var K in M){for(var J in M[K]){var L=M[K][J].pathInStash;M[K][J].path=L;M[K][J].shortPath=L;M[K][J].url=B(L)}}return M}function A(L,J){var K=document.createElement("div");K.className="sonar-duplication-marker";K.setAttribute("title","Click to see duplication details");K.addEventListener("click",function(){var M={currentFilePath:J,duplicates:H(L)};var O=plugin.page.sonar4stash.duplicatesInfoPanel(M);h(".pull-request-header").append(h(O));var N=AJS.dialog2("#duplicate-code-dialog");N.show();AJS.$(document).on("click","#dialog-close-button",function(P){P.preventDefault();N.hide()})});return K}function o(K){if(K.diff&&K.diff.destination){var J={filePath:K.diff.destination.toString,srcFilePath:K.diff.source?K.diff.source.toString:null,repoId:j.getRepository().id};if(j.getPullRequest()){J.pullRequestId=j.getPullRequest().id}else{J.branchName=j.getRef().displayId}return J}else{if(K.diff){return null}else{if(j.getPullRequest()){return{filePath:j.getFilePath().components.join("/"),repoId:j.getRepository().id,pullRequestId:j.getPullRequest().id}}else{return{filePath:j.getFilePath().components.join("/"),repoId:j.getRepository().id,branchName:j.getRef().displayId}}}}}function r(K){var J=new h.Deferred();var L=o(K);if(L){y.rest({type:"GET",url:AJS.contextPath()+"/rest/sonar4stash/1.0/duplicatelines",data:L,statusCode:{400:function(N,O,M){J.reject(N);return false},401:function(){J.resolve(false);return false},403:function(N,O,M){J.reject(N);return false},404:function(N,O,M){J.reject(N);return false},500:function(N,O,M){J.reject(N);return false},204:function(){J.resolve();return false},200:function(N){var M=false;K.eachLine(function(R){var Q=R.handles.TO;if(!Q&&R.handles.SOURCE){Q=R.handles.SOURCE}if(!Q){return}var P=null;var S=R.line.destination?R.line.destination:R.lineNumber;if(S in N){P=N[S]}if(P){var T=w(P,function(U){return[U.path]});if(!M){K.view.registerGutter("sonar-duplication-markers",{weight:30});M=true}var O=A(T,L.filePath);K.view.setGutterMarker(Q,"sonar-duplication-markers",O)}});J.resolve()}}})}else{setTimeout(function(){J.resolve(false)},0)}return J.promise()}function F(M){var J=h(".sonar4stash-button-trigger span");J.removeClass("sonar-issue-overview-icon");J.addClass("sonar-issue-overview-animated-icon");var L=h(".sonar4stash-button-trigger");var K=j.getPullRequest()?"Click or type 'S' to see all issues of this pull request.":"";h.when(C(M),q(M),r(M)).done(function(N){J.removeClass("sonar-issue-overview-animated-icon");if(N){J.addClass("sonar-issue-overview-hasissues-icon");L.attr("title","This file has Sonar issues - please check below. "+K);L.tooltip()}else{J.addClass("sonar-issue-overview-noissues-icon");L.attr("title","This file does not have any Sonar issues :-) "+K);L.tooltip()}}).fail(function(N){var R=h.parseJSON(N.responseText);var P=N.status;if(P===403){J.addClass("sonar-issue-overview-unknown-icon");var Q="Could not get any Sonar data for this file in branch "+R.branch+" of project "+R.projectKey+". Calculated component ID: "+R.componentId+"; if you use SonarQube >= 7.6, please configure the project base directory in the repository settings.";L.attr("title",Q);L.tooltip();console.error(Q)}else{if(P===404){J.remove()}else{var O=R.error;if(!O){O="An unknown error occurred. Please check the Bitbucket server logs."}else{if(R.url){O+=' <a href="'+R.url+'">repository settings</a>.'}}D({type:"error",title:"Sonar for Bitbucket failed",body:O,close:"manual"});J.addClass("sonar-issue-overview-icon")}}J.removeClass("sonar-issue-overview-animated-icon");return false})}function u(J){h(".sonar4stash-create-comment").click(function(L){L.preventDefault();var M=h(this).attr("data-issue-comment");function K(N){N.find("textarea").val(M)}d.on("bitbucket.internal.feature.comments.commentFormShown",function(N){K(N)});d.once("bitbucket.internal.DO_NOT_USE.feature.comments.commentFormShown",function(N){K(N)});J._handle.gutterMarkers["add-comment-trigger"].click()})}function t(){function J(L){var K=h.parseJSON(L.responseText).message;if(!K){K=h.parseJSON(L.responseText).errors[0].message}D({type:"error",title:"Creating task failed",body:K,close:"manual"})}h(".sonar4stash-create-task").click(function(M){M.preventDefault();var K=h(this).attr("data-issue-line")==="0"?"1":h(this).attr("data-issue-line");var L={text:h(this).attr("data-issue-comment"),anchor:{line:K,lineType:"ADDED",fileType:"TO",path:j.getFilePath().components.join("/"),diffType:"EFFECTIVE"}};y.rest({type:"POST",url:AJS.contextPath()+"/rest/api/1.0/projects/"+j.getProject().key+"/repos/"+j.getRepository().slug+"/pull-requests/"+j.getPullRequest().id+"/comments",data:L,statusCode:{400:function(O,P,N){J(O);return false},401:function(O,P,N){J(O);return false},500:function(O,P,N){J(O);return false},404:function(O,P,N){J(O);return false},201:function(O){var N={anchor:{id:O.id,type:"COMMENT"},text:L.text};y.rest({type:"POST",url:AJS.contextPath()+"/rest/api/1.0/tasks/",data:N,statusCode:{400:function(Q,R,P){J(Q);return false},201:function(P){D({type:"success",title:"Task created.",close:"auto"})}}})}}})})}function G(){return h('li[data-module-key="bitbucket.pull-request.nav.diff"]').hasClass("active-tab")}function v(J){setTimeout(J,0)}function x(J){v(function(){if(h(".sonar4stash-button-trigger").length&&c()){F(J)}else{var K=h(".sonar4stash-button-trigger span");K.removeClass("sonar-issue-overview-icon")}})}d.on("bitbucket.internal.feature.fileContent.sourceViewContentLoaded",function(J){x(J)});d.on("bitbucket.internal.DO_NOT_USE.feature.fileContent.sourceViewContentLoaded",function(J){x(J)});function c(){var J=window.location.href;return J.indexOf("?until=")<0}function a(J){if(G()||(!j.getPullRequest()&&c())){v(function(){F(J)})}}d.on("bitbucket.internal.feature.fileContent.diffViewContentLoaded",function(J){a(J)});d.on("bitbucket.internal.DO_NOT_USE.feature.fileContent.diffViewContentLoaded",function(J){a(J)})});require("mibexsoftware/sonar4stash");;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-issue-overview-resources', location = '/js/keyboard-controller.js' */
define("bitbucket/widget/keyboard-controller",["jquery"],function(c){function a(h,f){if(!(this instanceof a)){return new a(h,f)}var e=c(h);var g;e.on("keydown",g=function(i){if(i.keyCode in f){if(!f[i.keyCode](i)){i.preventDefault()}}});this.destroy=function(){e.off("keydown",g)};return this}function b(h,f){f=c.extend({},b.defaults,f);function g(i){i.focus().addClass(f.focusedClass)}var e={};e[AJS.keyCode.TAB]=function(m){var j;var i;var k;var l=m.target;j=c("a:visible, :input:visible:enabled, :checkbox:visible:enabled, :radio:visible:enabled, [tabindex]",h).not("[tabindex=-1]").filter(function(){return c(this).css("visibility")!=="hidden"});k=j.last();i=j.first();j.removeClass(f.focusedClass);if(m.shiftKey&&l===i[0]){if(!f.wrapAround){return true}g(k)}else{if(!m.shiftKey&&l===k[0]){if(!f.wrapAround){return true}g(i)}else{if(m.shiftKey){g(j.eq(j.index(l)-1))}else{g(j.eq(j.index(l)+1))}}}};return new a(h,e)}b.defaults={focusedClass:"item-focused",wrapAround:true};function d(r,s,t){t=c.extend({},d.defaults,t);var f=c(s);var q=c.Callbacks();var o=c.Callbacks();if(t.onSelect){q.add(t.onSelect)}if(t.onFocus){o.add(t.onFocus)}var i=false;var e=false;var k=false;function h(v){do{var w=v.find(">:first-child");var u=v.next();if(w.length){v=w}else{if(u.length){v=u}else{v=v.parentsUntil(f[0]).next().first()}}}while(v.length&&!v.is(t.itemSelector));return v}function n(w){do{var v=w.prev();if(v.length){var u;while((u=v.find(">:last-child")).length){v=u}w=v}else{w=w.parent();if(w[0]===f[0]){w=c()}}}while(w.length&&!w.is(t.itemSelector));return w}function p(u){return function v(C){var B=c(t.itemSelector,f);var D=B.filter(function(){return c(this).hasClass(t.focusedClass)});var w=false;var E=u==="next";var z;if(D.length){if(t.adjacentItems){z=D[u](t.itemSelector)}else{if(u==="next"){z=h(D)}else{z=n(D)}}}else{if(u==="next"){z=B.first()}else{if(t.wrapAround){z=B.last()}else{return}}}k=true;if(!z.length){if(u==="next"&&t.requestMore&&!i){if(!e){k=false;var G=t.requestMore();if(G){e=true;G.done(function(H){i=H;if(!k){v(C)}}).always(function(){e=false;k=false});return}else{i=true;v(C);return}}else{k=false;return}}else{if(t.wrapAround){w=true;E=!E;z=B[u==="next"?"first":"last"]()}else{return}}}D.removeClass(t.focusedClass);z.addClass(t.focusedClass);var x=z[u]();var A=!w&&x.length?x:z;var y=document.activeElement;if(t.focusIntoView&&y){var F=A.attr("tabindex");A.attr("tabindex","0");A.focus();y.focus();if(F==null){A.removeAttr("tabindex")}else{A.attr("tabindex",F)}}else{z[0].scrollIntoView(false)}o.fire(z,C)}}var j={};var m=j[AJS.keyCode.UP]=p("prev");var g=j[AJS.keyCode.DOWN]=p("next");j[AJS.keyCode.ENTER]=function(u){var w=c(t.itemSelector,f);var v=w.filter(function(){return c(this).hasClass(t.focusedClass)});if(v.length){q.fire(v,u)}};var l=new a(r,j);l.setListElement=function(u){f=c(u)};l.blur=function(){c(t.itemSelector,f).removeClass(t.focusedClass)};l.focus=function(){o.add.apply(o,arguments);return this};l.select=function(){q.add.apply(q,arguments);return this};l.moveToNext=g;l.moveToPrev=m;return l}d.defaults={itemSelector:"li",focusedClass:"item-focused",wrapAround:false,adjacentItems:true,requestMore:undefined,onFocus:undefined,onSelect:undefined};return{KeyboardController:a,TabKeyboardController:b,ListKeyboardController:d}});;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-issue-overview-resources', location = '/js/issue-overview.js' */
define("mibexsoftware/sonar4stash-issue-overview",["jquery","bitbucket/util/events","underscore","bitbucket/util/navbuilder","bitbucket/util/server","bitbucket/util/state","aui/flag","bitbucket/widget/keyboard-controller","exports"],function(j,c,w,v,q,k,t,o,x){var m=o.ListKeyboardController;var s;var u;function g(z,D){var G=j("#sonar4stash-issue-overview-dialog div.aui-dialog2-content");var E=j("#sonar4stash-issue-overview-dialog .issue-count");j("body").css("cursor","progress");var F=j(".sonar4stash-refresh-trigger");F.removeClass("aui-iconfont-build");F.spin();var A=v.rest("sonar4stash","1.0").addPathComponents("issues-in-pr","issues").build();var C={showBlocker:E.find("#showBlocker").length?E.find("#showBlocker").is(":checked"):true,showCritical:E.find("#showCritical").length?E.find("#showCritical").is(":checked"):true,showMajor:E.find("#showMajor").length?E.find("#showMajor").is(":checked"):true,showMinor:E.find("#showMinor").length?E.find("#showMinor").is(":checked"):true,showInfo:E.find("#showInfo").length?E.find("#showInfo").is(":checked"):true,showResolved:E.find("#showResolvedIssues").length?E.find("#showResolvedIssues").is(":checked"):false,showOpen:E.find("#showOpenIssues").length?E.find("#showOpenIssues").is(":checked"):true,showBugs:D?D==="bug":E.find("#showBugs").length?E.find("#showBugs").is(":checked"):true,showCodesmells:D?D==="code-smell":E.find("#showCodesmells").length?E.find("#showCodesmells").is(":checked"):true,showVulnerabilities:D?D==="vulnerability":E.find("#showVulnerabilities").length?E.find("#showVulnerabilities").is(":checked"):true,showOnlyMyIssues:E.find("#showOnlyMyIssues").length?E.find("#showOnlyMyIssues").is(":checked"):false};var y={repoId:k.getRepository().id,pullRequestId:k.getPullRequest().id};for(var B in C){y[B]=C[B]}j.ajax({url:A,data:y,type:"GET",cache:z}).done(function(H){G.html(mibexsoftware.sonar4stash.sonarIssueList({entries:H.issues}));E.html(mibexsoftware.sonar4stash.sonarIssueCount({nums:H,showProps:C}));E.find('input[type="checkbox"]').change(function(){var I=false;g(I);return false});j("#sonar4stash-issue-overview-dialog .cache-info").html(H.cacheLastUpdated);if(H.numFound>0){s.moveToNext()}G.find("a").click(function(I){I.preventDefault();i(j(this))})}).fail(function(J,K,I){var H=j.parseJSON(J.responseText);G.html(mibexsoftware.sonar4stash.sonarIssueList({error:H.error}));E.html(" Sonar for Bitbucket failed");return false}).always(function(H){j("body").css("cursor","default");F.spinStop();F.addClass("aui-iconfont-build")})}function d(){return AJS.$('li[data-module-key="bitbucket.pull-request.nav.diff"]').hasClass("active-tab")}function r(){return/^[^\?\#]*pull-requests\/\d+\/commits/.test(window.location.href)}function h(y){setTimeout(function(){c.trigger("bitbucket.internal.feature.diffView.lineChange",null,y);c.trigger("bitbucket.internal.DO_NOT_USE.feature.diffView.lineChange",null,y)},1000)}function i(A){var C=A.attr("data-file-path");var y=k.getFilePath()?k.getFilePath().components.join("/"):null;var z={no:parseInt(A.attr("data-line-number")),type:"TO"};u.hide();if(d()&&!r()&&C===y){c.trigger("bitbucket.internal.feature.diffView.lineChange",null,z);c.trigger("bitbucket.internal.DO_NOT_USE.feature.diffView.lineChange",null,z)}else{if(d()&&r()){var B={getId:function(){return k.getPullRequest().id}};setTimeout(function(){window.location.hash=C;h(z)},1000);c.trigger("bitbucket.internal.feature.commitselector.commitSelected",null,null,B,null);c.trigger("bitbucket.internal.DO_NOT_USE.feature.commitselector.commitSelected",null,null,B,null)}else{if(!d()){h(z);c.trigger("bitbucket.internal.layout.pull-request.urlRequested",null,A.attr("href"));c.trigger("bitbucket.internal.DO_NOT_USE.layout.pull-request.urlRequested",null,A.attr("href"))}else{window.location.hash=C;h(z)}}}}function a(){s=new m(document,u.$el,{wrapAround:false,focusedClass:"focused-file",itemSelector:"li.jstree-leaf",onFocus:function(y){},onSelect:function(y){i(y.find("a"))},requestMore:function(){}})}function l(z,y){function B(){return j('li[data-module-key="bitbucket.pull-request.nav.diff"]').hasClass("active-tab")&&!j(".sonar4stash-button-trigger span").length}if(B()){return}if(!z){t({type:"info",title:"Issue overview feature disabled",body:"The Sonar issue overview feature is disabled for this repository.",close:"auto"});return}if(u){u.show();if(y){var A=true;g(A,y)}a();s.moveToNext();s.moveToPrev()}else{u=AJS.dialog2(j(mibexsoftware.sonar4stash.issueOverviewDialog()));u.show();var A=true;g(A,y);a();u.$el.find(".sonar4stash-refresh-trigger").click(function(D){j(this).prop("disabled",true);var C=false;g(C);j(this).prop("disabled",false);return false});u.on("hide",function(){p()});u.on("remove",function(){p()})}}function n(A,B,y){var z=200;q.rest({url:AJS.contextPath()+"/rest/sonar4stash/latest/issues-in-pr/enabled",data:{repoId:A,pullRequestId:B,sourceBranchId:y},type:"GET",async:false,success:function(C,E,D){z=D.status},error:function(C,E,D){if(z===401){return false}else{console.error("Error while determining if Sonar issues should be shown")}}});return z}function b(y){c.on("mibexsoftware.sonar4stash.show-issue-overview",function(z){l(y)})}function f(y){j(".sonar4stash-button-trigger").click(function(z){l(y);return false}).tooltip({gravity:"ne"})}function e(A){c.on("bitbucket.internal.feature.fileContent.diffViewContentLoaded",function(){f(A)});c.on("bitbucket.internal.DO_NOT_USE.feature.fileContent.diffViewContentLoaded",function(){f(A)});function z(){setTimeout(function(){f(A)},2000)}c.on("bitbucket.internal.DO_NOT_USE.feature.fileContent.emptyDiffShown",function(){z()});c.on("bitbucket.internal.feature.fileContent.emptyDiffShown",function(){z()});function y(){setTimeout(function(){f(A)},2000)}c.on("bitbucket.internal.DO_NOT_USE.feature.fileContent.binaryDiffShown",function(){y()});c.on("bitbucket.internal.feature.fileContent.binaryDiffShown",function(){y()})}function p(){if(s){s.destroy();s=null}}x.onReady=function(){var A=k.getPullRequest();var y=n(k.getRepository().id,A.id,A.fromRef.id);var z=y===200;if(z||y===202){b(z);e(z)}};x.openSonarIssueOverview=l;x.getIssueOverviewDisplayStatus=n;x.shouldShowIssueOverviewButtonCondition=function(B){var C=B.fileChange.commitRange.pullRequest;var A=C.toRef.repository.id;var y=C.fromRef.id;var z=n(A,C.id,y);return z===200||z===202}});jQuery(document).ready(function(){require("mibexsoftware/sonar4stash-issue-overview").onReady()});;
;
/* module-key = 'ch.mibex.stash.sonar4stash:sonar4stash-issue-overview-resources', location = '/soy/issue-overview-dialog.soy' */
// This file was automatically generated from issue-overview-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace mibexsoftware.sonar4stash.
 */

if (typeof mibexsoftware == 'undefined') { var mibexsoftware = {}; }
if (typeof mibexsoftware.sonar4stash == 'undefined') { mibexsoftware.sonar4stash = {}; }


mibexsoftware.sonar4stash.issueOverviewDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="sonar4stash-issue-overview-dialog" style="width: 1200px" class="aui-layer aui-dialog2" aria-hidden="true"><!-- Dialog header --><header class="aui-dialog2-header"><!-- The dialog\'s title --><span class="aui-dialog2-header-main"><span><a href="#" style="outline: none; border: 0;"><span style="cursor: pointer; cursor: hand;" title="Refresh this list by invalidating caches" class="aui-icon aui-icon-small aui-iconfont-build sonar4stash-refresh-trigger"></span></a><span class="issue-count">Sonar Issue Overview</span></span></span><!-- Close icon --><a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">Close</span></a></header><!-- Main dialog content --><div class="aui-dialog2-content"><p><em>Please wait until the Sonar issues for this pull request are collected...</em></p><br></div><!-- Dialog footer --><footer class="aui-dialog2-footer"><!-- Hint text is rendered on the left of the footer --><div class="aui-dialog2-footer-hint">Tip: Use <kbd>Shift+s</kbd> to open this dialog, <kbd>\u2191</kbd><kbd>\u2193</kbd> to select a Sonar issue and <kbd>Enter</kbd> to view it.</div></footer></section>';
};
if (goog.DEBUG) {
  mibexsoftware.sonar4stash.issueOverviewDialog.soyTemplateName = 'mibexsoftware.sonar4stash.issueOverviewDialog';
}


mibexsoftware.sonar4stash.sonarIssueList = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<div>';
  if (opt_data.entries && opt_data.entries.length > 0) {
    output += '<div class="jstree"><ul>';
    var entryList9 = opt_data.entries;
    var entryListLen9 = entryList9.length;
    for (var entryIndex9 = 0; entryIndex9 < entryListLen9; entryIndex9++) {
      var entryData9 = entryList9[entryIndex9];
      output += '<li class="jstree-last jstree-leaf viewed"><ins class="jstree-icon">&nbsp;</ins><a id="change2" title="' + soy.$$escapeHtml(entryData9.status) + ': ' + soy.$$escapeHtml(entryData9.message) + '" class="difftree-file change-type-MODIFY" href="' + soy.$$escapeHtml(entryData9.urlInPR) + '" data-entry-id="' + soy.$$escapeHtml(entryIndex9) + '" data-line-number="' + soy.$$escapeHtml(entryData9.line) + '" data-file-path="' + soy.$$escapeHtml(entryData9.filePathInStash) + '"' + ((entryData9.status == 'RESOLVED') ? 'style="text-decoration: line-through;"' : '') + '>' + ((entryData9.type == 'CODE_SMELL') ? '<div class="sonar-issue-type sonar-code-smell" title="' + soy.$$escapeHtml('Code smell: a maintainability-related issue in the code') + '"></div>' : (entryData9.type == 'VULNERABILITY') ? '<div class="sonar-issue-type sonar-vulnerability" title="' + soy.$$escapeHtml('Vulnerability: a security-related issue which represents a potential backdoor for attackers') + '"></div>' : (entryData9.type == 'BUG') ? '<div class="sonar-issue-type sonar-bug" title="' + soy.$$escapeHtml('Bug: an issue that represents something wrong in the code') + '"></div>' : '') + '<span title="' + plugin.page.sonar4stash.sonarIssueDesc({issue: entryData9}) + '" class="sonar-issue-marker-' + soy.$$escapeHtml(entryData9.severity) + '"></span>&nbsp;' + soy.$$escapeHtml(entryData9.filePathInStashShortened) + ' (' + soy.$$escapeHtml(entryData9.line) + '): ' + soy.$$escapeHtml(entryData9.message) + '</a></li>';
    }
    output += '</ul></div>';
  } else if (opt_data.error) {
    output += '<p><strong>' + soy.$$filterNoAutoescape(opt_data.error) + '</strong></p><br>';
  } else {
    output += '<p>No Sonar issues found in this pull request.</p><br>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  mibexsoftware.sonar4stash.sonarIssueList.soyTemplateName = 'mibexsoftware.sonar4stash.sonarIssueList';
}


mibexsoftware.sonar4stash.sonarIssueCount = function(opt_data, opt_ignored) {
  return '&nbsp;' + soy.$$escapeHtml(opt_data.nums.numFiltered) + ' of ' + soy.$$escapeHtml(opt_data.nums.numFound) + ' issues' + ((opt_data.nums.allowOnlyMyIssues) ? '&nbsp;|&nbsp;' + aui.form.input({id: 'showOnlyMyIssues', type: 'checkbox', isChecked: opt_data.showProps.showOnlyMyIssues}) + '<label for="showOnlyMyIssues">Only mine</label>' : '') + ((opt_data.nums.numBugs != null) ? '&nbsp;|&nbsp;' + aui.form.input({id: 'showBugs', type: 'checkbox', isChecked: opt_data.showProps.showBugs}) + '<label for="showBugs"><span title="' + soy.$$escapeHtml('Bug: an issue that represents something wrong in the code') + '" class="sonar-issue-type sonar-bug" style="vertical-align:middle"></span>' + soy.$$escapeHtml(opt_data.nums.numBugs) + '</label>' : '') + ((opt_data.nums.numVulnerabilities != null) ? '&nbsp;|&nbsp;' + aui.form.input({id: 'showVulnerabilities', type: 'checkbox', isChecked: opt_data.showProps.showVulnerabilities}) + '<label for="showVulnerabilities"><span title="' + soy.$$escapeHtml('Vulnerability: a security-related issue which represents a potential backdoor for attackers') + '" class="sonar-issue-type sonar-vulnerability" style="vertical-align:middle"></span>' + soy.$$escapeHtml(opt_data.nums.numVulnerabilities) + '</label>' : '') + ((opt_data.nums.numCodesmells != null) ? '&nbsp;|&nbsp;' + aui.form.input({id: 'showCodesmells', type: 'checkbox', isChecked: opt_data.showProps.showCodesmells}) + '<label for="showCodesmells"><span title="' + soy.$$escapeHtml('Code smell: a maintainability-related issue in the code') + '" class="sonar-issue-type sonar-code-smell" style="vertical-align:middle"></span>' + soy.$$escapeHtml(opt_data.nums.numCodesmells) + '</label>' : '') + ((opt_data.nums.numBlocker != null) ? '&nbsp;|&nbsp;' + aui.form.input({id: 'showBlocker', type: 'checkbox', isChecked: opt_data.showProps.showBlocker}) + '<label for="showBlocker"><span title="Blocker: must be fixed immediately" class="sonar-issue-marker-BLOCKER" style="vertical-align:middle"></span>' + soy.$$escapeHtml(opt_data.nums.numBlocker) + '</label>' : '') + ((opt_data.nums.numCritical != null) ? '&nbsp;|&nbsp;' + aui.form.input({id: 'showCritical', type: 'checkbox', isChecked: opt_data.showProps.showCritical}) + '<label for="showCritical"><span title="Critical: must be reviewed immediately and fixed soon" class="sonar-issue-marker-CRITICAL" style="vertical-align:middle"></span>' + soy.$$escapeHtml(opt_data.nums.numCritical) + '</label>' : '') + ((opt_data.nums.numMajor != null) ? '&nbsp;|&nbsp;' + aui.form.input({id: 'showMajor', type: 'checkbox', isChecked: opt_data.showProps.showMajor}) + '&nbsp;<label for="showMajor"><span title="Major: high potential for significant to moderate impact" class="sonar-issue-marker-MAJOR" style="vertical-align:middle"></span>' + soy.$$escapeHtml(opt_data.nums.numMajor) + '</label>' : '') + ((opt_data.nums.numMinor != null) ? '&nbsp;|&nbsp;' + aui.form.input({id: 'showMinor', type: 'checkbox', isChecked: opt_data.showProps.showMinor}) + '&nbsp;<label for="showMinor"><span title="Minor: potential for moderate to minor impact" class="sonar-issue-marker-MINOR" style="vertical-align:middle"></span>' + soy.$$escapeHtml(opt_data.nums.numMinor) + '</label>' : '') + ((opt_data.nums.numInfo != null) ? '&nbsp;|&nbsp;' + aui.form.input({id: 'showInfo', type: 'checkbox', isChecked: opt_data.showProps.showInfo}) + '&nbsp;<label for="showInfo"><span title="Info: neither a bug nor a quality flaw, just a finding" class="sonar-issue-marker-INFO" style="vertical-align:middle"></span>' + soy.$$escapeHtml(opt_data.nums.numInfo) + '</label>' : '') + ((opt_data.nums.numOpen != null) ? '&nbsp;|&nbsp;' + aui.form.input({id: 'showOpenIssues', type: 'checkbox', isChecked: opt_data.showProps.showOpen}) + '<label for="showOpenIssues">' + soy.$$escapeHtml(opt_data.nums.numOpen) + ' open</label>' : '') + ((opt_data.nums.numResolved != null) ? '&nbsp;|&nbsp;' + aui.form.input({id: 'showResolvedIssues', type: 'checkbox', isChecked: opt_data.showProps.showResolved}) + '<label for="showResolvedIssues">' + soy.$$escapeHtml(opt_data.nums.numResolved) + ' resolved</label>' : '');
};
if (goog.DEBUG) {
  mibexsoftware.sonar4stash.sonarIssueCount.soyTemplateName = 'mibexsoftware.sonar4stash.sonarIssueCount';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-build:build-status-commit-list', location = '/bitbucket-plugin-build/internal/feature/build/commit-list/build-status-commit-list.js' */
define("bitbucket-plugin-build/internal/feature/build/commit-list/build-status-commit-list",["jquery","bitbucket/internal/model/page-state","bitbucket/internal/util/events","../common/build-status-common"],function(d,h,k,l){function m(a,b){var g=!1;b.each(function(){var c=(0,f.default)(this),b=c.find(".build-status-commit-list-col");c=c.data("commitid");var e=a[c];e&&(b.html(bitbucket.internal.build.status.summaryIcon({commitId:c,stats:e})).find(".build-icon").tooltip({gravity:"ne",html:!1}),g=!0)});
g&&(0,f.default)(".commits-table thead .build-status-commit-list-col").show()}function n(a){return a.map(function(){return(0,f.default)(this).data("commitid")}).toArray()}var f=babelHelpers.interopRequireDefault(d),p=babelHelpers.interopRequireDefault(h);d=babelHelpers.interopRequireDefault(k);var q=new l.BuildStatusColumnRenderer(".commits-table thead .build-status-commit-list-col",".build-status-commit-list-col");d.default.on("bitbucket.internal.widget.commitsTable.contentAdded",function(a){if(p.default.getCurrentUser()){var b=
a.values;n(b).map(function(a){q.populateBuildStatusLater(a,function(a,d,e){m(e,b)})})}})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-build:build-status-commit-list', location = '/bitbucket-plugin-build/internal/feature/build/commit-list/build-status-commit-list-init.js' */
require("bitbucket-plugin-build/internal/feature/build/commit-list/build-status-commit-list");;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-branch:automerge-decorator-resources-with-help-url', location = '/bitbucket-plugin-branch/internal/feature/branch/automerge/decorator/automerge-decorator.soy' */
// This file was automatically generated from automerge-decorator.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.automerge.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.automerge == 'undefined') { bitbucket.internal.feature.automerge = {}; }


bitbucket.internal.feature.automerge.diagram = function(opt_data, opt_ignored) {
  var param7 = '<div class="automerge-path">';
  var refList9 = opt_data.mergePath;
  var refListLen9 = refList9.length;
  for (var refIndex9 = 0; refIndex9 < refListLen9; refIndex9++) {
    var refData9 = refList9[refIndex9];
    param7 += bitbucket.internal.feature.repository.refLozenge({ref: refData9});
  }
  param7 += '</div><a href="' + soy.$$escapeHtml('http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Automatic+branch+merging?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash') + '" title="' + soy.$$escapeHtml('Learn more about automatic merging') + '" class="automerge-help-link" target="_blank">' + soy.$$escapeHtml('Learn more') + '</a>';
  var output = '' + bitbucket.internal.feature.repository.branchDiagram({type: 'automerge', sourceRef: opt_data.sourceRef, targetRef: opt_data.targetRef, extraClasses: 'pending', content: param7});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.automerge.diagram.soyTemplateName = 'bitbucket.internal.feature.automerge.diagram';
}


bitbucket.internal.feature.automerge.expandCascadeButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: 'expand-automerge-path-button', type: 'link', text: '' + soy.$$escapeHtml(AJS.format('and {0} more branches',opt_data.mergePathRefCount))});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.automerge.expandCascadeButton.soyTemplateName = 'bitbucket.internal.feature.automerge.expandCascadeButton';
}


bitbucket.internal.feature.automerge.autoMergeConflictInstructions = function(opt_data, opt_ignored) {
  return '<h3>' + aui.icons.icon({icon: 'warning', useIconFont: true}) + soy.$$escapeHtml('Auto-merge conflict') + '</h3><p>' + soy.$$escapeHtml('Automatic merge failed because there were conflicts. You must resolve the conflicts by merging downstream only i.e. merging the source branch into the target branch.') + '</p>' + bitbucket.internal.feature.pullRequest.mergeStepsForStableSourceBranch(opt_data);
};
if (goog.DEBUG) {
  bitbucket.internal.feature.automerge.autoMergeConflictInstructions.soyTemplateName = 'bitbucket.internal.feature.automerge.autoMergeConflictInstructions';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-branch:automerge-decorator-resources', location = '/bitbucket-plugin-branch/internal/feature/branch/automerge/decorator/automerge-decorator.js' */
define("branch/automerge-decorator","aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/util/ajax exports".split(" "),function(h,f,k,l,m,n){function p(a,c){var b;return(b=l.rest("branch-utils").project(a.getProject()).repo(a)).addPathComponents.apply(b,["automerge","path"].concat(babelHelpers.toConsumableArray(c.split("/")))).build()}function q(a){return m.rest({url:p(a.getRepository(),a.getId())})}function r(a,c,b){var g=a.getFromRef(),e=a.getToRef(),d=c.addClass("pending");q(e).done(function(a){if(a.status.available){a=
a.path.slice(1);d=f(bitbucket.internal.feature.automerge.diagram({sourceRef:g.toJSON(),targetRef:e.toJSON(),mergePath:a}));b.replaceWith(d);var c=d.find(".automerge-path");2<a.length&&(c.addClass("collapsed").after(bitbucket.internal.feature.automerge.expandCascadeButton({mergePathRefCount:a.length-1})),f("#expand-automerge-path-button").on("click",function(){f(this).remove();c.removeClass("collapsed")}))}else b.replaceWith(d.addClass("pending")),"PATH_TOO_LONG"===a.status.id&&d.after(aui.message.warning({content:"Merging this pull request will not trigger an automatic merge because there are more than 30 newer release branches."}));
b=null}).fail(function(a,c,d,e){b.spinStop()}).always(function(){k.defer(function(){d.removeClass("pending")})})}n.decorateDiagram=function(a,c){if(a.length){var b=f('\x3cdiv class\x3d"branch-diagram-spinner"\x3e\x3c/div\x3e'),g=a.closest(".aui-layer");a.replaceWith(b);var e=k.once(function(){b&&b.spin("large");r(c,a,b)});if(g.is(":visible"))e();else h.layer(g).on("show",e)}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-branch:automerge-decorator-resources-onready', location = '/bitbucket-plugin-branch/internal/feature/branch/automerge/decorator/automerge-decorator-onready.js' */
require(["branch/automerge-decorator","jquery","bitbucket/internal/model/page-state","bitbucket/internal/util/promise"],function(b,c,d,a){a.waitFor({interval:10,name:"automerge-wait",predicate:function(){return document.querySelector("#pull-request-merge-dialog .branch-diagram-merge")}}).then(function(a){b.decorateDiagram(c(a),d.getPullRequest())})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-branch:merge-conflict-resolution-instructions', location = '/bitbucket-plugin-branch/internal/feature/branch/merge-help/merge-help.js' */
define("branch/merge-help",["bitbucket/internal/util/events"],function(b){return{init:function(){b.on("bitbucket.internal.pull-request.cant.merge",function(d,c,e,a){c&&a&&b.trigger("bitbucket.internal.branch.plugin.conflict.merge.help",null,{stability:a["branch.from-ref-stability"],isAutoMergeConflict:a["branch.auto-merge-conflict"]})})}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-branch:merge-conflict-resolution-instructions', location = '/bitbucket-plugin-branch/internal/feature/branch/merge-help/merge-help-onready.js' */
require("branch/merge-help").init();;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:readme-common-resources', location = '/static/bitbucket/internal/feature/readme/common/readme-common.js' */
define("bitbucket/internal/feature/readme/common/readme-common","exports jquery lib/jsuri lodash bitbucket/util/navbuilder bitbucket/internal/model/page-state bitbucket/internal/util/text".split(" "),function(b,f,m,e,n,p,q){Object.defineProperty(b,"__esModule",{value:!0});b.onReady=b.DATA=b.updateLinks=b.createUrl=void 0;f=babelHelpers.interopRequireDefault(f);var r=babelHelpers.interopRequireDefault(m),t=babelHelpers.interopRequireDefault(n),h=babelHelpers.interopRequireDefault(p),u=babelHelpers.interopRequireDefault(q),
k=f.default.Deferred(),l=function(a,b,c){var d="",g=a.indexOf("#");-1!==g&&(d=a.substr(g),a=a.substr(0,g));return a+((0,e.includes)(a,"?")?"\x26":"?")+encodeURIComponent(b)+"\x3d"+encodeURIComponent(c)+d},v=function(a,b,c,d){!a||u.default.isUriAbsolute(a)||(0,e.startsWith)(a,"#")||(!c||(0,e.endsWith)(c,"/")||(0,e.startsWith)(a,"/")||(a=c+"/"+a),h.default.getRevisionRef().isDefault()||(a=l(a,"at",b)),a=d?d(a):a);return a};b.createUrl=function(a,b,c){b={blob:c,at:b,markup:!0,htmlEscape:!1,hardwrap:!1};
return t.default.rest().currentRepo().raw().path(a).withParams(b).build()};b.updateLinks=function(a,b){var c=function(d,c,e){var f=h.default.getRevisionRef().getId();a.find(d).each(function(a,d){d.setAttribute(c,v(d.getAttribute(c),f,b,e))})};c("a","href");c("img","src",function(a){return 0===(new r.default(a)).getQueryParamValues("raw").length?l(a,"raw",""):a});return a};b.DATA=k;b.onReady=function(){_PageDataPlugin.ready("com.atlassian.bitbucket.server.bitbucket-web:markup-extension-provider","bitbucket.layout.repository",
function(a){return k.resolve(a)})}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:readme-common-resources', location = '/static/bitbucket/internal/feature/readme/common/readme-common-init.js' */
jQuery(document).ready(function(){require("bitbucket/internal/feature/readme/common/readme-common").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:readme-filecontent-resources', location = '/static/bitbucket/internal/feature/readme/filecontent/readme-file-content.js' */
define("bitbucket/internal/feature/readme/filecontent/readme-file-content","module exports aui jquery lodash bitbucket/internal/feature/readme/common/readme-common bitbucket/internal/util/ajax bitbucket/internal/util/syntax-highlight".split(" "),function(l,a,m,n,h,e,p,q){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(b){if("source"!==b.contentMode)return null;var a=b.fileChange;return e.DATA.then(function(c){var d=c.extensions;c=c.extensionsRaw;var f=a.path.extension.toLowerCase();
return f&&(0,h.includes)(d,f)&&!(0,h.includes)(c,f)?(d=a.commitRange.untilRevision.id,r.default.rest({url:(0,e.createUrl)(a.path.components,d,d),dataType:"html",statusCode:{413:function(){return g.default.Deferred().reject("The markup for this file is too large to render.")}}}).then(function(a){b.$container.empty().append((0,e.updateLinks)((0,g.default)(bitbucket.internal.feature.readme.renderMarkup({content:a}))));t.default.container(b.$container);return{editing:{editable:!1,
reason:"Show source for this file to enable editing"}}})):g.default.Deferred().reject()})};var k=babelHelpers.interopRequireDefault(m),g=babelHelpers.interopRequireDefault(n),r=babelHelpers.interopRequireDefault(p),t=babelHelpers.interopRequireDefault(q);l.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:readme-filecontent-resources', location = '/static/bitbucket/internal/feature/readme/filecontent/readme-file-content.soy' */
// This file was automatically generated from readme-file-content.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.readme.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.readme == 'undefined') { bitbucket.internal.feature.readme = {}; }


bitbucket.internal.feature.readme.renderMarkup = function(opt_data, opt_ignored) {
  return '<div class="markup-content markup">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.readme.renderMarkup.soyTemplateName = 'bitbucket.internal.feature.readme.renderMarkup';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:readme-filecontent-resources', location = '/static/bitbucket/internal/feature/readme/filecontent/readme-file-content-init.js' */
require("bitbucket/feature/files/file-handlers").register({weight:3E3,handle:function(a){return require("bitbucket/internal/feature/readme/filecontent/readme-file-content").apply(this,arguments)}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-git-lfs:lfs-templates-with-help-urls', location = '/file-handlers/lfs-file-views.soy' */
// This file was automatically generated from lfs-file-views.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.lfs.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.lfs == 'undefined') { bitbucket.internal.feature.fileContent.lfs = {}; }


bitbucket.internal.feature.fileContent.lfs.file = function(opt_data, opt_ignored) {
  return '' + ((opt_data.file.error) ? bitbucket.internal.feature.fileContent.lfs.error(null) : (opt_data.file.inlineImage) ? bitbucket.internal.feature.fileContent.binaryView.image({src: opt_data.file.href, extraAttributes: {'data-ext': opt_data.file.extension}}) : bitbucket.internal.feature.fileContent.binaryView.unrenderable({descriptionContent: soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('This file is stored using \x3ca target\x3d\x22_blank\x22 href\x3d\x22{0}\x22\x3eGit LFS\x3c/a\x3e.',typeof ('http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Git+Large+File+Storage?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash') === 'number' ? 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Git+Large+File+Storage?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash' : soy.$$escapeHtml('http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Git+Large+File+Storage?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash'))), downloadUrl: opt_data.file.href}));
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.lfs.file.soyTemplateName = 'bitbucket.internal.feature.fileContent.lfs.file';
}


bitbucket.internal.feature.fileContent.lfs.error = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.binaryView.unrenderable({title: 'File not found', extraClasses: 'lfs-error', descriptionContent: soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('There may be problems with your \x3ca target\x3d\x22_blank\x22 href\x3d\x22{0}\x22\x3elarge file storage\x3c/a\x3e.',typeof ('http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Git+Large+File+Storage?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash') === 'number' ? 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Git+Large+File+Storage?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash' : soy.$$escapeHtml('http:\/\/docs.atlassian.com\/bitbucketserver\/docs-056\/Git+Large+File+Storage?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash')))});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.lfs.error.soyTemplateName = 'bitbucket.internal.feature.fileContent.lfs.error';
}


bitbucket.internal.feature.fileContent.lfs.source = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.binaryView.container({content: '' + bitbucket.internal.feature.fileContent.binaryView.cell({content: '' + bitbucket.internal.feature.fileContent.lfs.file(opt_data)})});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.lfs.source.soyTemplateName = 'bitbucket.internal.feature.fileContent.lfs.source';
}


bitbucket.internal.feature.fileContent.lfs.diff = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.binaryView.container({content: '' + ((opt_data.files.old) ? bitbucket.internal.feature.fileContent.lfs.old({file: opt_data.files.old}) : '') + ((opt_data.files['new']) ? bitbucket.internal.feature.fileContent.lfs.new({file: opt_data.files['new']}) : '')});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.lfs.diff.soyTemplateName = 'bitbucket.internal.feature.fileContent.lfs.diff';
}


bitbucket.internal.feature.fileContent.lfs.old = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.binaryView.old({content: '' + bitbucket.internal.feature.fileContent.lfs.file(opt_data)});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.lfs.old.soyTemplateName = 'bitbucket.internal.feature.fileContent.lfs.old';
}


bitbucket.internal.feature.fileContent.lfs.new = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.binaryView.new({content: '' + bitbucket.internal.feature.fileContent.lfs.file(opt_data)});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.lfs.new.soyTemplateName = 'bitbucket.internal.feature.fileContent.lfs.new';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:request-source', location = '/static/bitbucket/internal/feature/file-content/request-source.js' */
define("bitbucket/internal/feature/file-content/request-source","module exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/util/ajax bitbucket/internal/util/property".split(" "),function(k,e,l,m,n,p,q){function r(b,a){a=f.default.extend({},{start:a.start||0,limit:a.limit||g,blame:a.includeBlame?!0:void 0});return t.default.rest().currentRepo().browse().path(b.path).at(b.commitRange.untilRevision.displayId).withParams(a).build()}Object.defineProperty(e,"__esModule",{value:!0});var f=
babelHelpers.interopRequireDefault(l),u=babelHelpers.interopRequireDefault(m),t=babelHelpers.interopRequireDefault(n),h=babelHelpers.interopRequireDefault(p),g=5E3;babelHelpers.interopRequireDefault(q).default.getFromProvider("page.max.source.lines").done(function(b){g=b});var d={};e.default=function(b,a){a=a||{};b=b.toJSON?b.toJSON():b;var c=r(b,a);if(d.hasOwnProperty(c)&&"rejected"!==d[c].state())return d[c];a=h.default.rest({url:c,statusCode:a.statusCode||h.default.ignore404WithinRepository()});
b=a.then(function(a){if(a.errors&&a.errors.length)return f.default.Deferred().rejectWith(this,[this,null,null,a]);u.default.defer(function(){delete d[c]});return a});d[c]=b.promise(a);return d[c]};k.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-git-lfs:file-handlers', location = '/file-handlers/lfs-file-handler.js' */
define("bitbucket/internal/feature/file-content/lfs-file-handler",["jquery","lodash","bitbucket/util/navbuilder","bitbucket/util/server","bitbucket/internal/bbui/image-differ/image-differ","bitbucket/internal/feature/comments/comments","bitbucket/internal/feature/file-content/diff-view-options","bitbucket/internal/feature/file-content/diff-view-segment-types","bitbucket/internal/feature/file-content/handlers/diff-handler/diff-handler-internal","bitbucket/internal/feature/file-content/request-diff","bitbucket/internal/feature/file-content/request-source","bitbucket/internal/model/file-change","bitbucket/internal/model/file-change-types","bitbucket/internal/model/file-content-modes",],function(k,C,o,v,B,n,x,y,f,p,w,r,u,e){var c={version:/version https:\/\/git-lfs\.github\.com\/spec\/v(\d)/,oid:/oid sha256:([a-fA-F0-9]{64})/,size:/size ([0-9]*)/,};var t=10*1024*1024;var i={bmp:"image/bmp",gif:"image/gif",ico:"image/x-icon",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",};function b(E,G,F){var H=o.parse(E);C.forEach(s(G,F),function(I,J){H.addQueryParam(J,I)});return H.toString()}function A(F,E){return E.objects.map(function(I,J){var G=C.get(I,"actions.download.href");var L=F[J];var M=L.extension?L.extension.toLowerCase():"";var H=i[M];var K={fileName:L.name,extension:M,href:G&&b(G,I.size,L),inlineImage:!!(I.size<=t&&H),};return C.assign({},I,K)})}function g(F){var H={};var G=Object.keys(c);function E(I,J){var K=G[J];var L=I.match(c[K]);if(L){return(H[K]=L[1])}return false}return F.length===3&&F.every(E)&&H}function D(E){var G=[];var F=[];E.forEach(function(H){var I=C.map(H.lines,"line");switch(H.type){case y.ADDED:F.push.apply(G,I);break;case y.REMOVED:G.push.apply(F,I);break;default:F.push.apply(F,I);G.push.apply(G,I)}});return[G,F].map(g)}function m(F,G){if(!F.length){return j()}var E={url:o.currentRepo().clone("git").addPathComponents("info","lfs","objects","batch").build(),type:"POST",dataType:"json",accepts:{json:"application/vnd.git-lfs+json; charset=UTF-8",},contentType:"application/vnd.git-lfs+json; charset=UTF-8",data:{operation:"download",objects:F,},statusCode:{"*":false,},};return v.rest(E).then(A.bind(null,G),C.ary(j,0))}function s(G,F){var H={};var I=F.extension?F.extension.toLowerCase():"";var E=i[I];if(G<=t&&E){H["response-content-disposition"]=encodeURIComponent('inline; filename="'+F.name+"\"; filename*=utf-8''"+encodeURIComponent(F.name));H["response-content-type"]=encodeURIComponent(E)}else{H["response-content-disposition"]=encodeURIComponent('attachment; filename="'+F.name+"\"; filename*=utf-8''"+encodeURIComponent(F.name))}return H}function d(G){if(G.isExcerpt){return j()}var E=new r(G.fileChange);var F=C.assign({},G,{withComments:G.commentMode!==n.commentMode.NONE,});if(x.get("diffType")==="side-by-side"&&E.getType()!==u.ADD&&E.getType()!==u.DELETE){F=C.assign(F,{contextLines:f.infiniteContext,withComments:false,})}return p(E,F).then(function(I){var J=I.diff;if(!J||J.binary||!h(J)){return j()}var H=C.compact(D(J.hunks[0].segments));var K=C.compact([J.destination,J.source]);if(H.length!==K.length){return j()}return m(H,K).then(l.bind(null,G.$container,!J.destination))},function(){return j()})}function z(E){return w(E.fileChange).then(function(F){if(F.binary||F.start!==0||F.size!==3){return j()}var H=g(C.map(F.lines,"text"));if(!H){return j()}var G=E.fileChange.path;return m([H],[G]).then(a.bind(null,E.$container,E.$toolbar))},function(){return j()})}function h(E){var F={destinationLine:E.destination?1:0,destinationSpan:E.destination?3:0,sourceLine:E.source?1:0,sourceSpan:E.source?3:0,truncated:false,};return !!(E.hunks&&E.hunks.length===1&&C.isMatch(E.hunks[0],F))}function j(E){return k.Deferred().reject(E)}function a(H,F,G){var E=G[0];H.append(bitbucket.internal.feature.fileContent.lfs.source({file:E,}));H.parent().addClass("lfs-file-content");F.find(".raw-view-link").attr("href",E.href).toggle(!E.error)}function l(G,F,E){G.append(bitbucket.internal.feature.fileContent.lfs.diff({files:{"new":!F?E[0]:null,old:!F?E[1]:E[0],},}));G.parent().addClass("lfs-file-content");if(C.filter(E,{inlineImage:true}).length===2){return B.init(G.find(".binary-container"))}}return function q(E){switch(E.contentMode){case e.SOURCE:return z(E);case e.DIFF:return d(E);default:return j()}}});(function(){require("bitbucket/feature/files/file-handlers").register({weight:100,handle:function(){return require("bitbucket/internal/feature/file-content/lfs-file-handler").apply(null,arguments)},})})();;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:base-layout', location = '/static/bitbucket/internal/layout/base/base.js' */
define("bitbucket/internal/layout/base/base","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/model/page-state bitbucket/internal/model/stash-user bitbucket/internal/util/analytics bitbucket/internal/util/client-storage bitbucket/internal/util/events bitbucket/internal/util/history bitbucket/internal/widget/aui/dropdown/dropdown bitbucket/internal/widget/aui/form/form".split(" "),function(l,d,f,m,n,p,q,r,t,u,v,w,x,y){function z(a){a&&(a.isAdmin=!!(0,e.default)("#header").find("a.admin-link").length,
A.default.setCurrentUser(new B.default(a)))}function C(a){g.default.getSessionItem(a)||(g.default.setSessionItem(a,!0),D.default.add("demographics",{d_lang:document.documentElement.lang},!0))}Object.defineProperty(d,"__esModule",{value:!0});var E=babelHelpers.interopRequireDefault(f),e=babelHelpers.interopRequireDefault(m),h=babelHelpers.interopRequireDefault(n),k=babelHelpers.interopRequireDefault(p),A=babelHelpers.interopRequireDefault(q),B=babelHelpers.interopRequireDefault(r),D=babelHelpers.interopRequireDefault(t),
g=babelHelpers.interopRequireDefault(u),b=babelHelpers.interopRequireDefault(v),F=babelHelpers.interopRequireDefault(w),G=babelHelpers.interopRequireDefault(x),H=babelHelpers.interopRequireDefault(y);location.search&&(f=k.default.parse(location.href).getQueryParamValue("eve"))&&b.default.on(f,function(){console.log([b.default.name()],this,arguments)});b.default.on("bitbucket.internal.history.changestate",function(a){var b=(0,e.default)("#login-link");b.length&&a.state&&b.attr("href",k.default.login().next().build());
(0,e.default)("body").children(".tipsy").remove()});d.default={onReady:function(a,d){z(a);G.default.onReady();H.default.onReady();E.default.params["build-number"]=encodeURIComponent((0,e.default)("#product-version").attr("data-system-build-number"));var c=(0,e.default)(window);a=h.default.debounce(function(){b.default.trigger("window.resize.debounced",c,c.width(),c.height())},200);c.on("resize",a);a=h.default.throttle(function(){b.default.trigger("window.scroll.throttled",c,c.scrollTop())},25);c.on("scroll",
a);F.default.setTitleSuffix(" - "+d);C(g.default.buildKey("demographic-analytics","user"))}};l.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:quick-copy-text', location = '/static/bitbucket/internal/widget/quick-copy-text.js' */
define("bitbucket/internal/widget/quick-copy-text",["module","exports","jquery"],function(c,a,d){Object.defineProperty(a,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(d),b=!0;a.default={onReady:function(){b&&(b=!1,(0,e.default)(document).on("click",".quick-copy-text",function(a){this.focus();this.select()}))}};c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:browser-location', location = '/static/bitbucket/internal/util/browser-location.js' */
define("bitbucket/internal/util/browser-location",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={location:window.location};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:sticky-branches', location = '/static/bitbucket/internal/feature/repository/sticky-branches.js' */
define("bitbucket/internal/feature/repository/sticky-branches","module exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/util/browser-location bitbucket/internal/util/client-storage bitbucket/internal/util/events".split(" "),function(u,e,v,w,x,y,z,A){function p(a){a?(a=encodeURIComponent(a),k.attr("href",b.default.parse(k.attr("href")).replaceQueryParam("at",a)),l.attr("href",b.default.parse(l.attr("href")).replaceQueryParam("until",a)),m.attr("href",b.default.parse(m.attr("href")).replaceQueryParam("base",
a))):q()}function q(){k.attr("href",b.default.parse(k.attr("href")).deleteQueryParam("at"));l.attr("href",b.default.parse(l.attr("href")).deleteQueryParam("until"));m.attr("href",b.default.parse(m.attr("href")).deleteQueryParam("base"))}Object.defineProperty(e,"__esModule",{value:!0});var n=babelHelpers.interopRequireDefault(v),r=babelHelpers.interopRequireDefault(w),b=babelHelpers.interopRequireDefault(x),B=babelHelpers.interopRequireDefault(y),d=babelHelpers.interopRequireDefault(z),t=babelHelpers.interopRequireDefault(A),
k,l,m;e.default={onReady:function(){var a=b.default.parse(B.default.location.href),c=b.default.currentRepo().browse().build(),h=b.default.currentRepo().commits().build();c=r.default.startsWith(a.path(),c);h=a.path()===h;a=c?a.getQueryParamValue("at"):h?a.getQueryParamValue("until"):void 0;h=c||h;var f=d.default.buildKey("current-branch","repo"),e=d.default.getSessionItem(f);k=(0,n.default)("#repository-nav-files");l=(0,n.default)("#repository-nav-commits");m=(0,n.default)("#repository-nav-branches");
if(a&&c)var g=(g=(0,n.default)("[data-revision-ref]","#repository-layout-revision-selector").data("revision-ref"))&&(g.id===a&&"commit"===g.type.id||g.id!==a&&("branch"===g.type.id||"tag"===g.type.id)&&/^[0-9a-f]{7,40}$/.test(a));c=!(c&&g);a&&c?(a=decodeURIComponent(a),a!==e&&d.default.setSessionItem(f,a),p(a)):h&&c?d.default.removeSessionItem(f):e&&p(e);t.default.on("bitbucket.internal.layout.branch.revisionRefChanged",function(a){a&&(a.getIsDefault()?(q(),d.default.removeSessionItem(f)):(a=a.getId(),
p(a),d.default.setSessionItem(f,a)))});t.default.on("bitbucket.internal.*.*.revisionRefRemoved",function(a){var b=d.default.getSessionItem(f);b&&r.default.endsWith(a.id,b)&&(q(),d.default.removeSessionItem(f))})}};u.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-public-lozenge', location = '/static/bitbucket/internal/feature/repository/public-lozenge/public-lozenge.soy' */
// This file was automatically generated from public-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.repository.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.repository == 'undefined') { bitbucket.internal.feature.repository = {}; }


bitbucket.internal.feature.repository.publicLozenge = function(opt_data, opt_ignored) {
  return '' + ((true && (opt_data.repository['public'] || opt_data.repository.project['public'])) ? '<div class="public-lozenge aui-lozenge aui-lozenge-subtle">' + soy.$$escapeHtml('Public') + '</div>' : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.publicLozenge.soyTemplateName = 'bitbucket.internal.feature.repository.publicLozenge';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:icons', location = '/static/bitbucket/internal/images/icons/icons.soy' */
// This file was automatically generated from icons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.images.icons.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.images == 'undefined') { bitbucket.internal.images = {}; }
if (typeof bitbucket.internal.images.icons == 'undefined') { bitbucket.internal.images.icons = {}; }


bitbucket.internal.images.icons.createRepo = function(opt_data, opt_ignored) {
  return '<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="#B1B1B1" fill-rule="evenodd"><path d="M13.272 13.272h9.344a1.387 1.387 0 0 0-.01-2.772h-9.334V9.337 1.384a1.387 1.387 0 0 0-2.772.01V10.5H1.394C.617 10.5 0 11.12 0 11.886c0 .771.618 1.386 1.38 1.386h9.16l-.04 9.334c0 .777.62 1.394 1.386 1.394a1.38 1.38 0 0 0 1.386-1.38v-6.733-2.637z"/></g></svg>';
};
if (goog.DEBUG) {
  bitbucket.internal.images.icons.createRepo.soyTemplateName = 'bitbucket.internal.images.icons.createRepo';
}


bitbucket.internal.images.icons.importRepo = function(opt_data, opt_ignored) {
  return '<svg width="21" height="23" viewBox="0 0 21 23" xmlns="http://www.w3.org/2000/svg"><g fill="#B1B1B1" fill-rule="evenodd"><path d="M7 0h9.778c1.167 0 2.162.421 2.986 1.263.824.843 1.236 1.86 1.236 3.05v11.5a4.23 4.23 0 0 1-.837 2.566 4.24 4.24 0 0 1-2.138 1.566 4.192 4.192 0 0 1-1.504 2.201c-.74.57-1.58.854-2.521.854H4.2c-1.16 0-2.15-.421-2.97-1.263-.82-.843-1.23-1.86-1.23-3.05v-11.5C0 6.223.277 5.36.831 4.6a4.084 4.084 0 0 1 2.144-1.544A4.192 4.192 0 0 1 4.479.854 4.028 4.028 0 0 1 7 0zm12.578 15.813v-11.5c0-.787-.273-1.462-.82-2.028-.547-.565-1.207-.848-1.98-.848H7c-.518 0-.99.132-1.416.394-.427.262-.764.61-1.012 1.044H14c1.16 0 2.15.421 2.97 1.263.82.843 1.23 1.86 1.23 3.05v11.118a2.876 2.876 0 0 0 1.006-1.056c.248-.442.372-.92.372-1.438zm-2.756 2.897V7.21c0-.794-.275-1.471-.826-2.033A2.693 2.693 0 0 0 14 4.335H4.222c-.773 0-1.433.28-1.98.842a2.808 2.808 0 0 0-.82 2.033v11.5c0 .794.273 1.471.82 2.033a2.663 2.663 0 0 0 1.98.842H14c.78 0 1.446-.28 1.996-.842.55-.562.826-1.24.826-2.033z"/><path d="M9.873 17.853c-.356.424-.93.43-1.292 0l-3.734-4.426c-.357-.424-.193-.767.307-.767H8.222V6.652h1.95v6.008h3.063c.555 0 .722.337.36.767l-3.722 4.426z"/></g></svg>';
};
if (goog.DEBUG) {
  bitbucket.internal.images.icons.importRepo.soyTemplateName = 'bitbucket.internal.images.icons.importRepo';
}


bitbucket.internal.images.icons.logo = function(opt_data, opt_ignored) {
  return '<svg width="42" height="48" viewBox="0 0 42 48" xmlns="http://www.w3.org/2000/svg"><title>logo-BB</title><g fill="#205081" fill-rule="evenodd"><path d="M21 0C9.472 0 .002 3.063.002 6.942c0 1.02 2.47 15.517 3.5 21.233.411 2.654 7.205 6.33 17.498 6.33 10.293 0 16.88-3.676 17.498-6.33 1.03-5.716 3.5-20.212 3.5-21.233C41.792 3.062 32.528 0 21 0zm0 29.809c-3.706 0-6.588-2.859-6.588-6.534s2.882-6.533 6.588-6.533 6.588 2.858 6.588 6.533c0 3.471-2.882 6.534-6.588 6.534zm0-20.826c-7.411 0-13.381-1.225-13.381-2.858S13.589 3.267 21 3.267c7.411 0 13.381 1.225 13.381 2.858S28.411 8.983 21 8.983z"/><path d="M36.194 33.688c-.412 0-.618.204-.618.204s-5.147 4.083-14.41 4.083c-9.264 0-14.411-4.083-14.411-4.083s-.412-.204-.618-.204c-.411 0-.823.204-.823.817v.204c.823 4.287 1.441 7.35 1.441 7.758.618 3.063 6.794 5.513 14.205 5.513 7.41 0 13.587-2.45 14.204-5.513 0-.408.618-3.47 1.441-7.758v-.204c.206-.409 0-.817-.411-.817z"/><ellipse cx="21" cy="23.071" rx="3.294" ry="3.267"/></g></svg>';
};
if (goog.DEBUG) {
  bitbucket.internal.images.icons.logo.soyTemplateName = 'bitbucket.internal.images.icons.logo';
}


bitbucket.internal.images.icons.allCommits = function(opt_data, opt_ignored) {
  return '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="15" viewBox="0 0 12 14"><path    style="fill:#999" d="M13,11.91a2.47,2.47,0,0,0,.32-0.27A2.22,2.22,0,0,0,14,10V2.31A2.22,2.22,0,0,0,13.32.68,2.22,2.22,0,0,0,11.69,0H6.31A2.22,2.22,0,0,0,4.68.68,2.47,2.47,0,0,0,4.4,1H5.5A1.48,1.48,0,0,1,6.31.77h5.38a1.49,1.49,0,0,1,1.08.45,1.48,1.48,0,0,1,.45,1.09V10a1.47,1.47,0,0,1-.23.81v1.09Z" transform="translate(-2 0)"/><path    style="fill:#999" d="M4.31,2H9.69a2.22,2.22,0,0,1,1.63.68A2.22,2.22,0,0,1,12,4.31V12a2.31,2.31,0,0,1-2.31,2.31H4.31a2.22,2.22,0,0,1-1.63-.68A2.22,2.22,0,0,1,2,12V4.31a2.22,2.22,0,0,1,.68-1.63A2.22,2.22,0,0,1,4.31,2Zm6.92,10V4.31A1.54,1.54,0,0,0,9.69,2.77H4.31A1.54,1.54,0,0,0,2.77,4.31V12a1.54,1.54,0,0,0,1.54,1.54H9.69A1.54,1.54,0,0,0,11.23,12Z" transform="translate(-2 0)"/><polygon style="fill:#999" points="4.5 4 5.5 4 5.5 6.4 5.5 7 4.5 7 4.5 4" /><polygon style="fill:#999" points="4.5 9 5.5 9 5.5 11.4 5.5 12 4.5 12 4.5 9"/><path    style="fill:#999" d="M7,10A2,2,0,1,1,9,8,2,2,0,0,1,7,10ZM7,7A1,1,0,1,0,8,8,1,1,0,0,0,7,7Z" transform="translate(-2 0)"/></svg>';
};
if (goog.DEBUG) {
  bitbucket.internal.images.icons.allCommits.soyTemplateName = 'bitbucket.internal.images.icons.allCommits';
}


bitbucket.internal.images.icons.commit = function(opt_data, opt_ignored) {
  return '<svg xmlns="http://www.w3.org/2000/svg" width="7" height="15" viewBox="0 0 7 15"><path style="fill:#999" d="M11.07,7.39a3.5,3.5,0,0,0-3-3.45V0h-1V3.94a3.48,3.48,0,0,0,0,6.9V15h1V10.84A3.5,3.5,0,0,0,11.07,7.39Zm-3.5,2.5a2.5,2.5,0,1,1,2.5-2.5A2.5,2.5,0,0,1,7.57,9.89Z" transform="translate(-4.07 0)"/></svg>';
};
if (goog.DEBUG) {
  bitbucket.internal.images.icons.commit.soyTemplateName = 'bitbucket.internal.images.icons.commit';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:sidebar', location = '/static/bitbucket/internal/widget/sidebar/sidebar.js' */
define("bitbucket/internal/widget/sidebar/sidebar","module exports aui jquery bitbucket/internal/util/client-storage bitbucket/internal/util/events".split(" "),function(l,h,m,n,p,q){function r(){(0,c.default)(".aui-sidebar-submenu-dialog").attr("alignment","right middle").on("aui-show",function(a){a=(0,c.default)(a.target);var b=(0,c.default)(window).height();a.data("height")||a.data("height",a.height());if(a.data("height")>=b){var d=(0,c.default)(".aui-sidebar-group[aria-controls\x3d'"+a.attr("id")+
"']")[0].getBoundingClientRect().top;a.css("max-height",2*(Math.min(b-d,d)-50)+"px")}else a.data("height")>=a.height()&&a.css("max-height","100vh")}).on("mousewheel",function(a){var b=a.originalEvent.deltaY,d=(0,c.default)(a.target).closest(".aui-inline-dialog-contents"),e=d[0].scrollHeight-d.outerHeight();(d.scrollTop()===e&&0<=b||0===d.scrollTop()&&0>=b)&&a.preventDefault()})}function t(){b.$el.find(".aui-sidebar-group-actions ul").on("click","\x3e li \x3e a[data-web-item-key]",function(){f.default.trigger("bitbucket.internal.ui.sidebar.actions-menu.item.clicked",
null,{isCollapsed:!e.default.getItem("sidebar_expanded"),webItemId:(0,c.default)(this).attr("data-web-item-key")})});b.$el.find(".sidebar-navigation ul").on("click","\x3e li \x3e a[data-web-item-key]",function(){var a=(0,c.default)(this),b=!e.default.getItem("sidebar_expanded"),d=a.parentsUntil(".aui-sidebar-group").filter("ul").length;f.default.trigger("bitbucket.internal.ui.sidebar.item.clicked",null,{webItemId:a.attr("data-web-item-key"),isCollapsed:b,level:d})});b.$el.find(".sidebar-settings-group").on("click",
"a",function(){f.default.trigger("bitbucket.internal.ui.sidebar.settings.clicked",null,{webItemId:(0,c.default)(this).attr("data-web-item-key")})});b.$el.on("click",".aui-sidebar-toggle",function(a){g("button")});b.$el.on("click",".aui-sidebar-body",function(a){(0,c.default)(a.target).is(".aui-sidebar-body")&&g("sidebar")});k.default.whenIType("[").execute(function(){g("keyboard-shortcut")});b.on("expand-end collapse-end",function(a){(0,c.default)("aui-inline-dialog").removeAttr("open");(0,c.default)(".actions-trigger.active").trigger("aui-button-invoke");
(0,c.default)(".sidebar-actions-dialog").hide();a.isResponsive&&g("resize")})}function g(a){f.default.trigger("bitbucket.internal.ui.sidebar.collapse.change",null,{source:a,isCollapsed:!e.default.getItem("sidebar_expanded"),windowWidth:window.innerWidth})}Object.defineProperty(h,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(m),c=babelHelpers.interopRequireDefault(n),e=babelHelpers.interopRequireDefault(p),f=babelHelpers.interopRequireDefault(q),b;h.default={preload:function(){var a=
!e.default.getItem("sidebar_expanded");(0,c.default)(document.body).toggleClass("aui-sidebar-collapsed",a);(0,c.default)(".aui-sidebar").attr("aria-expanded",!a)},onReady:function(){b=k.default.sidebar(".aui-sidebar");b.on("collapse-end",function(a){a.isResponsive||e.default.setItem("sidebar_expanded",!1);f.default.trigger("bitbucket.internal.feature.sidebar.collapseEnd")});b.on("expand-start",function(a){a.isResponsive&&!1===e.default.getItem("sidebar_expanded")&&a.preventDefault()});b.on("expand-end",
function(a){a.isResponsive||e.default.setItem("sidebar_expanded",!0);f.default.trigger("bitbucket.internal.feature.sidebar.expandEnd")});t();r()}};l.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-mirroring-upstream:mirroring-clone-urls', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-mirroring-upstream','key':'mirroring-clone-urls','moduleKey':'mirroring-clone-urls','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-mirroring-upstream:mirroring-clone-urls','weight':10.0,'params':{},'location':'bitbucket.web.repository.clone.dialog.options','view':function(ctx) { return WebFragments._getValue((bitbucket.mirroring.clone), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-layout', location = '/static/bitbucket/internal/layout/repository/repository.soy' */
// This file was automatically generated from repository.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.layout.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.layout == 'undefined') { bitbucket.internal.layout = {}; }


bitbucket.internal.layout.cloneDialogOptions = function(opt_data, opt_ignored) {
  var output = '';
  var webPanelList3 = WebFragments.getWebPanels('bitbucket.web.repository.clone.dialog.options').map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
  var webPanelListLen3 = webPanelList3.length;
  for (var webPanelIndex3 = 0; webPanelIndex3 < webPanelListLen3; webPanelIndex3++) {
    var webPanelData3 = webPanelList3[webPanelIndex3];
    output += soy.$$escapeHtml(webPanelData3);
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.layout.cloneDialogOptions.soyTemplateName = 'bitbucket.internal.layout.cloneDialogOptions';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-layout', location = '/static/bitbucket/internal/layout/repository/repository.js' */
define("bitbucket/internal/layout/repository/repository","module exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/repository/sticky-branches bitbucket/internal/model/page-state bitbucket/internal/model/repository bitbucket/internal/util/events bitbucket/internal/widget/quick-copy-text bitbucket/internal/widget/sidebar/sidebar".split(" "),function(r,l,t,u,v,w,x,y,z,A,B){function C(c){c=new D.default(c);p.default.setRepository(c);p.default.setProject(c.getProject());(0,a.default)(".aui-page-header-image \x3e a").on("click",
function(){g.default.trigger("bitbucket.internal.sidebar.clickAvatar.expanded."+(0,a.default)(".aui-sidebar").attr("aria-expanded"),null)})}function m(){return(0,a.default)(".clone-url")}function q(){return(0,a.default)(".repository-protocol")}function E(){var c=m(),b=q(),h=(0,a.default)("#"+b.attr("aria-controls")),d=h.find("li"),k="";if(b.is("button")){n(b,b.text());var e=b.attr("data-clone-url");var f=b.attr("data-module-key")}else n(b,d.first().children("a").text()),e=d.first().attr("data-clone-url"),
f=d.first().attr("data-module-key");m().find(".clone-url-input").attr("value",e);c.addClass(f);k=f;(0,a.default)(document).on("click","#repository-protocol-selector li",function(d){var e=(0,a.default)(this);n(q(),e.text());m().find(".clone-url-input").attr("value",e.attr("data-clone-url")).select();f=e.attr("data-module-key");c.removeClass(k).addClass(f);k=f;g.default.trigger("bitbucket.internal.feature.repository.clone.protocol.changed",null,f,e.attr("data-clone-url"));d.stopPropagation();h.is(":visible")&&
b.trigger("aui-button-invoke");d.preventDefault()});g.default.trigger("bitbucket.internal.feature.repository.clone.protocol.initial",null,f,e)}function n(c,b){var a=c.children("span").remove();c.text(b).append(a)}function F(c){function b(){d&&d.open&&(d.open=!1)}var h,d;(0,a.default)(c).attr("aria-controls","repo-clone-dialog");(0,a.default)(document).on("click",c,function(b){b.preventDefault();k();d.open=!0;h.select()});var k=G.default.once(function(){d=document.getElementById("repo-clone-dialog");
h=(0,a.default)(d).find(".clone-url-input");g.default.on("bitbucket.internal.feature.sidebar.collapseEnd",b);g.default.on("bitbucket.internal.feature.sidebar.expandEnd",b)});(0,a.default)("#clone-dialog-options").html(bitbucket.internal.layout.cloneDialogOptions())}function H(){var c=(0,a.default)(".aui-page-header-actions .create-pull-request");g.default.on("bitbucket.internal.layout.branch.revisionRefChanged",function(b){var a=I.default.currentRepo().createPullRequest();!b.isDefault()&&b.isBranch()&&
(a=a.sourceBranch(b.getId()));c.attr("href",a.build())})}function J(){(0,a.default)(".aui-sidebar[aria-expanded\x3dfalse] .aui-page-header-image").tooltip({gravity:"w",delayIn:0,live:!0,html:!0,aria:!0,className:"aui-sidebar-section-tooltip",title:function(){return(0,a.default)(this).find(".aui-avatar").attr("data-tooltip")}})}Object.defineProperty(l,"__esModule",{value:!0});var a=babelHelpers.interopRequireDefault(t),G=babelHelpers.interopRequireDefault(u),I=babelHelpers.interopRequireDefault(v),
K=babelHelpers.interopRequireDefault(w),p=babelHelpers.interopRequireDefault(x),D=babelHelpers.interopRequireDefault(y),g=babelHelpers.interopRequireDefault(z),L=babelHelpers.interopRequireDefault(A),M=babelHelpers.interopRequireDefault(B);l.default={onReady:function(c,b){C(c);E();L.default.onReady();(0,a.default)(document).ready(M.default.onReady);K.default.onReady();F(b);H();(0,a.default)(".repository-badge .badge").tooltip({gravity:"n"});J();g.default.on("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",
function(a){a.enableContext("repository")})}};r.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-sourcetree-plugin:sourcetree-button-panel', location = '/static/button-panel/sourcetree-button-panel.soy' */
// This file was automatically generated from sourcetree-button-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.sourceTree.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.sourceTree == 'undefined') { bitbucket.sourceTree = {}; }


bitbucket.sourceTree.buttonPanel = function(opt_data, opt_ignored) {
  return '<div class="sourcetree-panel">' + bitbucket.internal.buttons.button({buttonText: opt_data.buttonText, id: opt_data.buttonId, extraClasses: 'sourcetree-button', href: opt_data.sourceTreeActionUrl, isPrimary: true}) + '<p>' + soy.$$filterNoAutoescape(AJS.format('{0} is the free Git and Mercurial client for Windows or Mac.','<a href="http://www.sourcetreeapp.com" target="_blank">Atlassian SourceTree</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  bitbucket.sourceTree.buttonPanel.soyTemplateName = 'bitbucket.sourceTree.buttonPanel';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-sourcetree-plugin:sourcetree-clone', location = '/static/sourcetree-clone/sourcetree-clone.js' */
define("plugin/sourcetree/sourcetree-clone",["jquery","aui","bitbucket/util/events","bitbucket/util/navbuilder","bitbucket/util/state","exports"],function(f,c,e,g,d,b){var a=function(j,k){var i=d.getCurrentUser();var h="sourcetree://cloneRepo?type=stash&baseWebUrl="+encodeURIComponent(window.location.origin+c.contextPath())+"&cloneUrl="+encodeURIComponent(k);if(i){h=h+"&user="+encodeURIComponent(i.name)}f("#sourcetree-clone-button").attr("href",h)};b.onReady=function(){e.on("bitbucket.internal.feature.repository.clone.mirror.changed",a);e.on("bitbucket.internal.feature.repository.clone.protocol.changed",a);e.on("bitbucket.internal.feature.repository.clone.protocol.initial",a)}});require("plugin/sourcetree/sourcetree-clone").onReady();;
;
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-form-validation-validator-register', location = 'src/js/aui/form-validation/validator-register.js' */
("undefined"===typeof window?global:window).__d1c8e25e9e01e4d366088e44abd86cd0=function(){var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__77629c8e853846530dfdc3ccd3393ab6,h=a&&a.__esModule?a:{"default":a},e;if((a=__bbcdfae479e60b56b982bbcdcc7a0191)&&a.__esModule)e=a;else{var f={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(f[b]=a[b]);f.default=a;e=f}b=(b=__a94c70e97545519793c3abf603e0b37c)&&b.__esModule?b:{"default":b};var i=["displayfield",
"watchfield","when","novalidate","state"],g=[],a={register:function(a,b){var c;if("string"===typeof a)c=a;else{var d=!1;a.some(function(a){var b=-1!==h.default.inArray(a,i);b&&(d=a);return b});if(c=d)return e.warn('Validators cannot be registered with the argument "'+c+'", as it is a reserved argument.'),!1;c="[data-aui-validation-"+a.join("],[data-aui-validation-")+"]"}c={validatorFunction:b,validatorTrigger:c};g.push(c);return c},validators:function(){return g}};(0,b.default)("aui/form-validation/validator-register",
a);d.default=a;return d=d["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-form-validation-basic-validators', location = 'src/js/aui/form-validation/basic-validators.js' */
("undefined"===typeof window?global:window).__22130538f5919f6e261036684b13c6f2=function(){function h(a){return a&&a.__esModule?a:{"default":a}}function i(a){var b=a.el.value.length,d=0===b,c=parseInt(a.args("minlength"),10),e=parseInt(a.args("maxlength"),10);c&&e&&c===e&&!d&&b!==c?(b=f("exactlength",a.args,[c]),a.invalidate(b)):c&&b<c&&!d?(b=f("minlength",a.args),a.invalidate(b)):e&&b>e?(b=f("maxlength",a.args),a.invalidate(b)):a.validate()}function j(a,b){var d=a.match(b);return!d?!1:a===d[0]}function k(a){var b=
f("pattern",a.args);j(a.el.value,RegExp(a.args("pattern")))?a.validate():a.invalidate(b)}function l(a){var b=f("required",a.args);a.el.value?a.validate():a.invalidate(b)}function m(a){var b=f("validnumber",a.args),d=parseInt(a.el.value,10);if(isNaN(d))a.invalidate(b);else{var b=a.args("min"),c=a.args("max");b&&d<parseInt(b,10)?a.invalidate(f("min",a.args)):c&&d>parseInt(c,10)?a.invalidate(f("max",a.args)):a.validate()}}function f(a,b,d){var c;c=void 0!==AJS.I18n.keys?AJS.I18n.keys["aui.validation.message."+
a]:n[a];var e=d;d||(e=[b(a)]);c=(a=b(a+"-msg"))?[a].concat(e):[c].concat(e);return AJS.format.apply(null,c)}"use strict";var o=h(__77629c8e853846530dfdc3ccd3393ab6),p=h(__a94c70e97545519793c3abf603e0b37c);h(__a0d4f23ad4f9b40c6f8c8e4e6922c981);h(__be3e01199078cdf5ded88dda6a8fbec9);var g=h(__d1c8e25e9e01e4d366088e44abd86cd0);g.default.register(["maxlength","minlength"],i);g.default.register("[maxlength],[minlength]",i);g.default.register(["matchingfield"],function(a){var b=a.el.value,d=document.getElementById(a.args("matchingfield")),
c=d.value,e=f("matchingfield",a.args,[b,c]);if("password"===a.el.getAttribute("type")||"password"===d.getAttribute("type"))e=f("matchingfield-novalue",a.args);!b||!c?a.validate():c!==b?a.invalidate(e):a.validate()});g.default.register(["doesnotcontain"],function(a){var b=f("doesnotcontain",a.args);-1===a.el.value.indexOf(a.args("doesnotcontain"))?a.validate():a.invalidate(b)});g.default.register(["pattern"],k);g.default.register("[pattern]",k);g.default.register(["required"],l);g.default.register("[required]",
l);g.default.register(["min","max"],m);g.default.register("[min],[max]",m);g.default.register(["dateformat"],function(a){var b=a.args("dateformat"),d=f("dateformat",a.args),c={Y:"[0-9]{4}",y:"[0-9]{2}",m:"(0?[1-9]|10|11|12)",M:"[Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec]",D:"[Mon|Tue|Wed|Thu|Fri|Sat|Sun]",d:"([0-2]?[1-9]|10|20|30|31)"},e="";b.split("").forEach(function(a){e=c.hasOwnProperty(a)?e+c[a]:e+a});j(a.el.value,RegExp(e+"$","i"))?a.validate():a.invalidate(d)});g.default.register(["minchecked",
"maxchecked"],function(a){var b=(0,o.default)(a.el).find(":checked").length,d=!a.args("minchecked")||b>=a.args("minchecked"),b=!a.args("maxchecked")||b<=a.args("maxchecked"),c=f("minchecked",a.args),e=f("maxchecked",a.args);d&&b?a.validate():d?b||a.invalidate(e):a.invalidate(c)});var n={minlength:"Must be greater than or equal to {0} characters",maxlength:"Must be fewer than or equal to {0} characters",exactlength:"Must be exactly {0} characters",matchingfield:"{0} and {1} do not match.",
"matchingfield-novalue":"These fields do not match.",doesnotcontain:"Do not include the phrase {0} in this field",pattern:"This field does not match the required format",required:"This is a required field",validnumber:"Please enter a valid number",min:"Enter a value greater than {0}",max:"Enter a value less than {0}",dateformat:"Enter a valid date",
minchecked:"Tick at least {0}.",maxchecked:"Tick at most {0}."};(0,p.default)("aui/form-validation/basic-validators");return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-form-validation', location = 'src/js/aui/form-validation.js' */
("undefined"===typeof window?global:window).__bd4ecc7f267c4325495affa1d72b9196=function(){function k(a){return a&&a.__esModule?a:{"default":a}}function y(a){if(p(a,"novalidate"))l(a,m);else{s(t(a),"none");var b=[];u.default.validators().forEach(function(c,d){a.is(c.validatorTrigger)&&b.push(d)});l(a,g);var c=[];b.forEach(function(b){var b=u.default.validators()[b].validatorFunction,d=new f.default.Deferred,e={validate:function(){d.resolve()},invalidate:function(b){l(a,h,b);d.reject()},args:function(b){return a.attr("data-"+
z+b)||a.attr(b)},el:a[0],$el:a};v.prop(e,"$el",{sinceVersion:"5.9.0",removeInVersion:"8.0.0",alternativeName:"el",extraInfo:"See https://ecosystem.atlassian.net/browse/AUI-3263."});b(e);c.push(d)});var d=f.default.when.apply(f.default,c);d.done(function(){l(a,m)});return d}}function p(a,b){var c={when:"change"},d=a.attr("data-"+z+b);d||(d=c[b]);return d}function l(a,b,c){a.attr("data-"+n,b);if(b!==i){a.trigger(f.default.Event(A));var d=t(a),e={};e[g]="wait";e[h]="error";e[m]="success";e=e[b];b===
g?setTimeout(function(){a.attr("data-"+n)===g&&s(a,"wait")},500):s(d,e,c)}}function s(a,b,c){var d=a.is("["+j+"wait]");a.removeAttr(j+"wait");a.removeAttr(j+"success");if("success"!==b||d)"none"===b?a.removeAttr(j+"error"):(d=a.attr(j+b)||"[]",c?(c=JSON.parse(d).concat([c]),c=JSON.stringify(c)):c="",a.attr(j+b,c))}function t(a){var b=p(a,"displayfield");return void 0===b?a:(0,f.default)("#"+b)}function B(a,b){b.preventDefault();a.one(A,function(){a.trigger("submit")})}var q={};"use strict";Object.defineProperty(q,
"__esModule",{value:!0});var f=k(__77629c8e853846530dfdc3ccd3393ab6);__223d4ffbfb11c7b1196e30d8f0783cb8;__22130538f5919f6e261036684b13c6f2;var C=k(__a94c70e97545519793c3abf603e0b37c),v;var e=__4ddcc788b1704f76a51559fc0e0d2968;if(e&&e.__esModule)v=e;else{var w={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(w[o]=e[o]);w.default=e;v=w}o=k(__77af00e80ac034b223816679459a4692);var x=k(__bb6ec7268c91759bbe10bd46d924551e),u=k(__d1c8e25e9e01e4d366088e44abd86cd0),z="aui-validation-",
j="data-aui-notification-",n="aui-validation-state",h="invalid",m="valid",g="validating",i="unvalidated",A="_aui-internal-field-state-changed";(0,f.default)(document).on("submit",function(a){var b=a.target,b=(0,f.default)(b),c;c=b.find("._aui-form-validation-initialised");var d=f.default.map(c,function(a){return(0,f.default)(a).attr("data-"+n)});c=-1!==d.indexOf(h);var e=-1!==d.indexOf(i),d=-1!==d.indexOf(g);c=c?h:e?i:d?g:m;c===i?(B(b,a),b.find("[data-"+n+"="+i+"]").each(function(a,b){r.validate((0,
f.default)(b))})):c===g?B(b,a):c===h?(a.preventDefault(),b.find("[data-"+n+"="+h+"]").first().focus()):c===m&&(c=f.default.Event("aui-valid-submit"),b.trigger(c),c.isDefaultPrevented()&&a.preventDefault())});var r={register:u.default.register,validate:function(a){a=(0,f.default)(a);y(a)}};(0,x.default)("data-aui-validation-field",{attached:function(a){a.form&&a.form.setAttribute("novalidate","novalidate");var b=(0,f.default)(a);if(!b.hasClass("_aui-form-validation-initialised")){t(b).attr("data-aui-notification-field",
"");b.addClass("_aui-form-validation-initialised");var c,d=function(){b.trigger("aui-stop-typing")};b.on("keyup",function(){clearTimeout(c);c=setTimeout(d,1500)});var e=p(b,"when"),g=p(b,"watchfield");(g?b.add("#"+g):b).on(e,function(){y(b)});l(b,i)}x.default.init(a)},type:x.default.type.ATTRIBUTE});(0,C.default)("aui/form-validation",r);(0,o.default)("formValidation",r);q.default=r;return q=q["default"]}.call(this);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:delete-dialog', location = '/static/bitbucket/internal/widget/delete-dialog/delete-dialog.soy' */
// This file was automatically generated from delete-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.deleteDialog = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('Are you sure that you want to delete {0}{1}{2}?','<b class="display-name">','','</b>')) + '</p>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.deleteDialog.soyTemplateName = 'bitbucket.internal.widget.deleteDialog';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:delete-dialog', location = '/static/bitbucket/internal/widget/delete-dialog/delete-dialog.js' */
define("bitbucket/internal/widget/delete-dialog/delete-dialog","module exports aui jquery lodash bitbucket/internal/widget/confirm-dialog".split(" "),function(e,c,f,n,p,q){Object.defineProperty(c,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(f),k=babelHelpers.interopRequireDefault(n),r=babelHelpers.interopRequireDefault(q);c.default={bind:function(c,d,e,f,l,m){d=new r.default({id:"delete-dialog",titleClass:"warning-header",titleText:d,panelContent:bitbucket.internal.widget.deleteDialog(),
submitText:"Delete",focusSelector:".button-panel-cancel-link"},{type:"DELETE",statusCode:{"*":!1}});var h=function(b){(0,k.default)("#content .aui-page-panel .notifications").empty().html(b)};d.addConfirmListener(function(b,c){b.done(function(a){a=a?a.displayName?a.displayName:a.name?a.name:"":"";var b=e.replace("{0}",g.default.escapeHtml(a));(a=!l||l(a,c))&&!a.promise?h(aui.message.success({content:b})):a&&a.promise&&a.done(function(){h(aui.message.success({content:b}))})}).fail(function(a,
b,c,d){a=(0,p.get)(d,"errors.0.message")?d.errors[0].message:f;h(aui.message.error({content:g.default.escapeHtml(a)}))})});d.attachTo(c,function(b,c){b=m?m():(0,k.default)(b).data("for");c.getPanel(0).body.find(".display-name").text(b)})}};e.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:paragraph', location = '/static/bitbucket/internal/widget/paragraph.soy' */
// This file was automatically generated from paragraph.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.paragraph = function(opt_data, opt_ignored) {
  return '<p' + ((opt_data.extraClasses) ? ' class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</p>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.paragraph.soyTemplateName = 'bitbucket.internal.widget.paragraph';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-repository-shortcuts:repository-shortcuts-frontend', location = '/bitbucket-plugin-repository-shortcuts/internal/feature/repository-shortcuts/repository-shortcuts.soy' */
// This file was automatically generated from repository-shortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.repository.shortcuts.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.repository == 'undefined') { bitbucket.internal.feature.repository = {}; }
if (typeof bitbucket.internal.feature.repository.shortcuts == 'undefined') { bitbucket.internal.feature.repository.shortcuts = {}; }


bitbucket.internal.feature.repository.shortcuts.addDialog = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog id="' + soy.$$escapeHtml(opt_data.dialogId) + '" alignment="' + soy.$$escapeHtml(opt_data.alignment) + '" class="repo-shortcut-dialog"><h3>' + soy.$$escapeHtml('Add shortcut') + '</h3>' + bitbucket.internal.feature.repository.shortcuts.dialogForm(soy.$$augmentMap(opt_data, {extraContent: '<div class="field-group">' + widget.aui.form.buttons({content: '' + widget.aui.form.submit({id: 'create-link', isPrimary: false, label: 'Add'}) + widget.aui.form.cancelButton({id: 'add-shortcut-cancel'}) + '<div class="button-spinner"></div>'}) + '</div>'})) + '</aui-inline-dialog>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.shortcuts.addDialog.soyTemplateName = 'bitbucket.internal.feature.repository.shortcuts.addDialog';
}


bitbucket.internal.feature.repository.shortcuts.actionDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="' + soy.$$escapeHtml(opt_data.id) + '" class="repo-shortcut-dialog aui-layer aui-dialog2 aui-dialog2-small' + ((opt_data.isDestructive) ? ' destructive-header' : '') + '" aria-hidden="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml(opt_data.title) + '</h2></header><div class="aui-dialog2-content">' + soy.$$escapeHtml(opt_data.content) + '</div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><div class="button-spinner"></div><button class="aui-button' + ((! opt_data.isDestructive) ? '  aui-button-primary' : '') + ' submit-dialog">' + soy.$$escapeHtml(opt_data.submitLabel) + '</button><button class="aui-button aui-button-link close-dialog">' + soy.$$escapeHtml('Cancel') + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.shortcuts.actionDialog.soyTemplateName = 'bitbucket.internal.feature.repository.shortcuts.actionDialog';
}


bitbucket.internal.feature.repository.shortcuts.deleteDialogContent = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('Are you sure you want to delete \x3cstrong\x3e{0}\x3c/strong\x3e (\x3ca href\x3d\x22{1}\x22\x3e{1}\x3c/a\x3e)?',typeof (opt_data.label) === 'number' ? opt_data.label : soy.$$escapeHtml(opt_data.label),typeof (opt_data.url) === 'number' ? opt_data.url : soy.$$escapeHtml(opt_data.url)))) + '</p>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.shortcuts.deleteDialogContent.soyTemplateName = 'bitbucket.internal.feature.repository.shortcuts.deleteDialogContent';
}


bitbucket.internal.feature.repository.shortcuts.dialogForm = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bitbucket.internal.widget.form({action: '', autocomplete: 'off', extraClasses: 'top-label repo-shortcut-form', content: '' + widget.aui.form.text({id: 'shortcut-form-url', labelContent: 'URL', initialValue: opt_data.url ? opt_data.url : '', extraAttributes: {'data-aui-validation-field': '', minlength: 0, maxlength: 450, required: true, 'required-msg': 'Required', 'data-aui-validation-repo-shortcut-url-scheme': ''}, placeholderText: 'https://www.atlassian.com'}) + widget.aui.form.text({id: 'shortcut-form-label', labelContent: 'Label', initialValue: opt_data.label ? opt_data.label : '', extraAttributes: {'data-aui-validation-field': '', minlength: 0, maxlength: 255, required: true, 'required-msg': 'Required'}, placeholderText: 'Atlassian'}) + ((opt_data.extraContent) ? soy.$$filterNoAutoescape(opt_data.extraContent) : '')});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.shortcuts.dialogForm.soyTemplateName = 'bitbucket.internal.feature.repository.shortcuts.dialogForm';
}


bitbucket.internal.feature.repository.shortcuts.clientShortcut = function(opt_data, opt_ignored) {
  return '' + widget.aui.sidebarNavItem({id: 'repo-shortcut-url-' + opt_data.id, iconClass: 'aui-icon-small ' + opt_data.iconClass, actionContent: '' + bitbucket.internal.buttons.button({buttonText: '', extraClasses: 'actions-trigger aui-dropdown2-trigger aui-button-subtle aui-dropdown2-trigger-arrowless', extraAttributes: 'aria-owns="repo-shortcut-url-' + opt_data.id + '-actions-dialog' + '" aria-haspopup="true"', iconType: 'aui', iconText: 'More', iconClass: 'aui-icon-small aui-iconfont-more'}), text: opt_data.label, url: opt_data.url});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.shortcuts.clientShortcut.soyTemplateName = 'bitbucket.internal.feature.repository.shortcuts.clientShortcut';
}


bitbucket.internal.feature.repository.shortcuts.clientShortcutDialog = function(opt_data, opt_ignored) {
  var output = '<div id="repo-shortcut-url-' + soy.$$escapeHtml(opt_data.id) + '-actions-dialog" class="aui-style-default aui-dropdown2 sidebar-actions-dialog" data-web-item-id="repo-shortcut-url-' + soy.$$escapeHtml(opt_data.id) + '"><ul class="aui-list-truncate">';
  var actionList90 = opt_data.actions;
  var actionListLen90 = actionList90.length;
  for (var actionIndex90 = 0; actionIndex90 < actionListLen90; actionIndex90++) {
    var actionData90 = actionList90[actionIndex90];
    output += '<li>' + bitbucket.internal.widget.webItem(soy.$$augmentMap(actionData90, {url: actionData90.url ? actionData90.url : '#'})) + '</li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.shortcuts.clientShortcutDialog.soyTemplateName = 'bitbucket.internal.feature.repository.shortcuts.clientShortcutDialog';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-repository-shortcuts:repository-shortcuts-frontend', location = '/bitbucket-plugin-repository-shortcuts/internal/feature/repository-shortcuts/repository-shortcuts.js' */
define("bitbucket-plugin-repository-shortcuts/internal/feature/repository-shortcuts/repository-shortcuts","exports aui jquery lodash bitbucket/util/navbuilder bitbucket/util/server bitbucket/util/state bitbucket/internal/util/analytics bitbucket/internal/util/dom-event bitbucket/internal/util/promise ./generate-label-from-url".split(" "),function(h,E,F,G,H,I,J,K,L,M,N){function O(a){var c=b.children().length;3<=c?(4<=c&&g.append(b.children().last()),g.children().length?g.append(a):b.append(a)):b.append(a);
l()}function l(){m.toggleClass("hidden-when-collapsed",!b.children().length);n.toggleClass("hidden",!g.children().length)}function u(a,c,P){return function(e){e=(0,f.default)(e);var b=e.find(a),q=(0,f.default)("#"+e.attr("data-web-item-id"));b.on("click",function(a){a.preventDefault();var e=v(q);a=c(e);var b=(0,f.default)(bitbucket.internal.feature.repository.shortcuts.actionDialog(babelHelpers.extends({id:q.attr("id")+a.idSuffix,submitLabel:"Save"},
a))),g=b.find("form"),p=function(){return d.default.dialog2(b).remove()},h=function(){return w(b.find(".submit-dialog"),P(e,q,b)).then(p)};b.on("aui-hide",k.default.debounce(function(){d.default.dialog2(b).isVisible()&&p()})).on("click",".close-dialog",function(){p()}).on("click",".submit-dialog",function(){g.length?g.submit():h()}).keypress(function(a){a.which!==d.default.keyCode.ENTER||(0,f.default)(document.activeElement).is("a, button")||(g.length?g.submit():h())}).on("aui-valid-submit","form",
function(a){a.preventDefault();h()});if(a.isDestructive)b.on("aui-show",k.default.debounce(function(){return b.find(".close-dialog").focus()}));d.default.dialog2(b).show()})}}Object.defineProperty(h,"__esModule",{value:!0});h.onReady=function(){m=(0,f.default)('.section-featured-items[data-web-section-key\x3d"bitbucket.web.sidebar.repository.nav.shortcuts"]');b=m.children(".aui-nav");n=(0,f.default)('.section-overflow-items[data-web-section-key\x3d"bitbucket.web.sidebar.repository.nav.shortcuts"]');
g=n.children(".aui-nav");Q();(0,f.default)(".sidebar-actions-dialog").each(function(a,c){return x(c)});l();(0,f.default)('.aui-sidebar-group[data-web-section-key\x3d"bitbucket.web.sidebar.repository.nav.shortcuts"] \x3e ul \x3e li \x3e a').on("mousedown",y);R()};var d=babelHelpers.interopRequireDefault(E),f=babelHelpers.interopRequireDefault(F),k=babelHelpers.interopRequireDefault(G);h=babelHelpers.interopRequireDefault(H);var r=babelHelpers.interopRequireDefault(I),S=babelHelpers.interopRequireDefault(J),
T=babelHelpers.interopRequireDefault(K),U=babelHelpers.interopRequireDefault(L),V=babelHelpers.interopRequireDefault(M),W=babelHelpers.interopRequireDefault(N),m=void 0,b=void 0,n=void 0,g=void 0,t=h.default.rest("repository-shortcuts").currentRepo().addPathComponents("shortcuts"),v=function(a){return{id:a.attr("id").split("-").pop(),url:a.attr("href"),label:a.find(".aui-nav-item-label").text()}},z=function(a){return{url:a.find("#shortcut-form-url").val(),label:a.find("#shortcut-form-label").val()}},
y=function(a){T.default.add("stash.client.repository.shortcut.clicked",{openInSameTab:U.default.openInSameTab(a),repositoryId:S.default.getRepository().id,shortcutId:v((0,f.default)(a.currentTarget)).id})},w=function(a,c){a.prop("disabled",!0);c.then(function(){return a.prop("disabled",!1)},function(){return a.prop("disabled",!1)});return V.default.spinner(a.siblings(".button-spinner"),c,null,null,!0)},A=[0,401],B=function(a){switch(a){case "BAMBOO":return"icon-bamboo";case "BITBUCKET_CLOUD":return"icon-bitbucket";
case "BITBUCKET_SERVER":return"icon-bitbucket";case "CONFLUENCE":return"icon-confluence";case "HIPCHAT":return"icon-hipchat";case "JIRA":return"icon-jira";case "TRELLO":return"icon-trello";default:return"icon-link"}},Y=function(a){C(a);return r.default.rest({url:t.build(),type:"POST",data:z(a),statusCode:{0:!0,401:!0,"*":!1}}).done(X).fail(D(a.find("form"),A))},Q=function(){(0,f.default)("#add-repo-shortcut-trigger").attr({"aria-controls":"add-shortcut-dialog"}).click(function(a){a.preventDefault();
var c=(0,f.default)(bitbucket.internal.feature.repository.shortcuts.addDialog({alignment:"right bottom",dialogId:"add-shortcut-dialog"})).attr("open","true").appendTo(document.body).on("aui-hide",function(){return c.remove()}).on("click","#add-shortcut-cancel",function(a){a.preventDefault();c.remove()}).on("aui-valid-submit","form",function(a){a.preventDefault();w((0,f.default)("#create-link"),Y(c)).then(function(){return c.remove()})}),b=c.find("#shortcut-form-label"),e=c.find("#shortcut-form-url"),
d=k.default.debounce(function(){return b.val((0,W.default)(e.val()).substring(0,255))},10);e.on("input",d);b.one("input",function(){return e.off("input",d)});e.focus()})},Z=[u(".edit-shortcut",function(a){return{idSuffix:"-edit-dialog",title:"Edit shortcut",content:soydata.VERY_UNSAFE.ordainSanitizedHtml(bitbucket.internal.feature.repository.shortcuts.dialogForm(a))}},function(a,c,b){C(b);return r.default.rest({url:t.addPathComponents(a.id).build(),
type:"PUT",data:z(b),statusCode:{0:!0,401:!0,"*":!1}}).done(function(a){var b=a.label,e=a.productType;c.attr("href",a.url);c.find(".aui-nav-item-label").text(b);c.find(".aui-icon").prop("className","aui-icon aui-icon-small "+B(e))}).fail(D(b.find("form"),A))}),u(".delete-shortcut",function(a){return{idSuffix:"-delete-dialog",isDestructive:!0,title:"Delete shortcut",content:soydata.VERY_UNSAFE.ordainSanitizedHtml(bitbucket.internal.feature.repository.shortcuts.deleteDialogContent(a)),
submitLabel:"Delete"}},function(a,c,d){return r.default.rest({url:t.addPathComponents(a.id).build(),type:"DELETE",statusCode:{404:!1}}).then(null,function(a){return 404===a.status?f.default.Deferred().resolve():f.default.Deferred().reject()}).done(function(){var a=c.closest("li");a.closest(g).length?a.remove():(a.remove(),2===b.children().length&&b.append(g.children().first()));1===g.children().length&&b.append(g.children());l()})})],x=function(a){return Z.forEach(function(c){return c(a)})},
X=function(a){var c=a.id,b=a.url,e=a.label;a=a.productType;a=(0,f.default)(bitbucket.internal.feature.repository.shortcuts.clientShortcut({id:c,url:b,label:e,iconClass:B(a)})).on("mousedown","a",y);c=(0,f.default)(bitbucket.internal.feature.repository.shortcuts.clientShortcutDialog({id:c,url:b,label:e,moduleKey:"bitbucket.web.sidebar.repository.nav.shortcut."+c,actions:[{styleClass:"edit-shortcut",linkText:"Edit"},{styleClass:"delete-shortcut",
linkText:"Delete"}]}));O(a);c.insertAfter(".add-shortcut-panel").each(function(a,c){return x(c)})},C=function(a){a.find(".aui-message-error").remove()},D=function(a,c){return function(b){k.default.includes(c,b.status)||a.prepend(d.default.messages.error({body:k.default.get(b,"responseJSON.errors[0].message")||"An unexpected error has occurred. Try refreshing the page.",closeable:!1}))}},R=function(){_PageDataPlugin.ready("com.atlassian.bitbucket.server.bitbucket-repository-shortcuts:repository-shortcuts-url-scheme-whitelist-provider",
"bitbucket.layout.repository",function(a){a?d.default.formValidation.register(["repo-shortcut-url-scheme"],function(c){var b=c.el.value||"";k.default.includes(b,":")?a.urlSchemeWhitelist.some(function(a){return k.default.startsWith(b,a)})?c.validate():c.invalidate(d.default.format("The scheme \u0027\u0027{0}\u0027\u0027 isn\u0027\u0027t on your whitelist. Your administrator can add it.",/^.*?:(\/\/)?/.exec(b)[0])):c.invalidate("A URL scheme is required - did you forget https://?")}):console.warn("Could not find Repo Shortcut schemes. Is this code being loaded on the wrong page?")})}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-repository-shortcuts:repository-shortcuts-frontend', location = '/bitbucket-plugin-repository-shortcuts/internal/feature/repository-shortcuts/generate-label-from-url.js' */
define("bitbucket-plugin-repository-shortcuts/internal/feature/repository-shortcuts/generate-label-from-url",["module","exports","lodash"],function(d,a,e){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(c){if((0,e.startsWith)("https",c))return"";var b=/:(\/\/)?/.exec(c);if(!b)return c;b=b.index+b[0].length;var a=c.indexOf("/",b);return c.substring(b,-1===a?void 0:a)};d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-repository-shortcuts:repository-shortcuts-frontend', location = '/bitbucket-plugin-repository-shortcuts/internal/feature/repository-shortcuts/repository-shortcuts-init.js' */
jQuery(document).ready(function(){require("bitbucket-plugin-repository-shortcuts/internal/feature/repository-shortcuts/repository-shortcuts").onReady()});;
;
/* module-key = 'com.atlassian.stash.ssh-plugin:ssh-clone-soy', location = '/static/bitbucket-plugin-ssh/internal/views/clone/ssh-clone.soy' */
// This file was automatically generated from ssh-clone.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.ssh.clone.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.ssh == 'undefined') { bitbucket.internal.feature.ssh = {}; }
if (typeof bitbucket.internal.feature.ssh.clone == 'undefined') { bitbucket.internal.feature.ssh.clone = {}; }


bitbucket.internal.feature.ssh.clone.userAddKeyClonePromptSidebar = function(opt_data, opt_ignored) {
  return '<div id="user-add-key-clone-prompt">' + bitbucket.internal.feature.ssh.clone.userAddKeyClonePrompt(opt_data) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.ssh.clone.userAddKeyClonePromptSidebar.soyTemplateName = 'bitbucket.internal.feature.ssh.clone.userAddKeyClonePromptSidebar';
}


bitbucket.internal.feature.ssh.clone.userAddKeyClonePromptEmptyRepo = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml('I just want to clone this repository') + '</h4>' + bitbucket.internal.feature.ssh.clone.userAddKeyClonePrompt(opt_data);
};
if (goog.DEBUG) {
  bitbucket.internal.feature.ssh.clone.userAddKeyClonePromptEmptyRepo.soyTemplateName = 'bitbucket.internal.feature.ssh.clone.userAddKeyClonePromptEmptyRepo';
}


bitbucket.internal.feature.ssh.clone.userAddKeyClonePrompt = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('You must add an SSH key to your profile to clone this repository.') + ' ' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('\x3ca href\x3d\x22{0}\x22\x3eAdd key\x3c/a\x3e',typeof (opt_data.addKeyUrl) === 'number' ? opt_data.addKeyUrl : soy.$$escapeHtml(opt_data.addKeyUrl)))) + '</p>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.ssh.clone.userAddKeyClonePrompt.soyTemplateName = 'bitbucket.internal.feature.ssh.clone.userAddKeyClonePrompt';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-contributing-guidelines:clone-resources', location = '/bitbucket/internal/feature/contributing-guidelines/clone/clone-link.soy' */
// This file was automatically generated from clone-link.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.contributing.clone.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.contributing == 'undefined') { bitbucket.internal.contributing = {}; }
if (typeof bitbucket.internal.contributing.clone == 'undefined') { bitbucket.internal.contributing.clone = {}; }


bitbucket.internal.contributing.clone.link = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.url) ? '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('Read this repository\x27\x27s \x3ca class\x3d\x22contributing-info-link\x22 href\x3d\x22{0}\x22\x3econtribution guidelines\x3c/a\x3e.',typeof (opt_data.url) === 'number' ? opt_data.url : soy.$$escapeHtml(opt_data.url)))) + '</p>' : '');
};
if (goog.DEBUG) {
  bitbucket.internal.contributing.clone.link.soyTemplateName = 'bitbucket.internal.contributing.clone.link';
}


bitbucket.internal.contributing.clone.placeholder = function(opt_data, opt_ignored) {
  return '<div id="contributing-guidelines-clone-placeholder" class="hidden"></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.contributing.clone.placeholder.soyTemplateName = 'bitbucket.internal.contributing.clone.placeholder';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-contributing-guidelines:clone-resources', location = '/bitbucket/internal/feature/contributing-guidelines/clone/clone-link.js' */
define("bitbucket/internal/feature/contributing-guidelines/clone/clone-link","exports jquery bitbucket/util/navbuilder bitbucket/util/state bitbucket/internal/model/contributing-guidelines/common bitbucket/internal/util/analytics".split(" "),function(a,c,d,e,f,g){Object.defineProperty(a,"__esModule",{value:!0});a.init=function(){(0,b.default)("#repo-clone-dialog").one("aui-show",function(){var a=(0,b.default)("#contributing-guidelines-clone-placeholder");(0,f.getContributingGuidelinesFilename)(h.default.getRepository()).done(function(b){a.html(bitbucket.internal.contributing.clone.link({url:k.default.currentRepo().browse().path(b).build()}));
a.removeClass("hidden")});(0,b.default)(".contributing-info-link").on("click",function(){return l.default.add("contributing.clone.clicked")})})};var b=babelHelpers.interopRequireDefault(c),k=babelHelpers.interopRequireDefault(d),h=babelHelpers.interopRequireDefault(e),l=babelHelpers.interopRequireDefault(g)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-contributing-guidelines:clone-resources', location = '/bitbucket/internal/feature/contributing-guidelines/clone/clone-link-init.js' */
jQuery(document).ready(function(){require("bitbucket/internal/feature/contributing-guidelines/clone/clone-link").init()});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/page-visibility.js' */
define("atlassian/analytics/page-visibility",function(){var a=(document.hidden!==undefined);var b={supported:a,isHidden:function(){return a?document.hidden:false}};return b});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/user-activity-xhr-header.js' */
define("atlassian/analytics/user-activity-xhr-header",["atlassian/analytics/page-visibility"],function(c){var e="x-atlassian-mau-ignore";var d=XMLHttpRequest.prototype.send;var a=window.fetch;var b=false;return{install:function(){if(!b&&c.supported){XMLHttpRequest.prototype.send=function(){if(c.isHidden()){this.setRequestHeader(e,c.isHidden())}d.apply(this,arguments)};if(a){window.fetch=function(f,i){var g=i||{};var h=g.headers;if(c.isHidden()){g.headers=(h)?new Headers(h):new Headers();g.headers.append(e,c.isHidden())}return a.call(this,f,g)}}b=true}},uninstall:function(){if(b){XMLHttpRequest.prototype.send=d;if(a){window.fetch=a}}b=false}}});require("atlassian/analytics/user-activity-xhr-header").install();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/atlassian-analytics.js' */
(function(d){var p=AJS.$.ajax;var k="atlassian-analytics";var i=typeof AJS.contextPath=="function"?AJS.contextPath():typeof AJS.Confluence!="undefined"?AJS.Confluence.getContextPath():window.contextPath!=null?window.contextPath:"";var o=null;var l=null;var f=null;var q="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(y){var x=Math.random()*16|0,w=y=="x"?x:(x&3|8);return w.toString(16)});var s=function(){var w="unknown";if(document.body.id=="jira"){w="jira"}else{if(document.body.id=="com-atlassian-confluence"){w="confluence"}}l=k+"."+w;f=l+".lock"};var e=function(){if(store.get(f)){return false}store.set(f,q);return(store.get(f)===q)};var t=function(){store.set(f,null)};var h=function(){var x=[],z,A,w,y;if(AJS.EventQueue.length==0){return}x=store.get(l)||x;for(w=0,y=AJS.EventQueue.length;w<y;++w){A=AJS.EventQueue[w];if(A.name){z={name:A.name,properties:A.properties,time:A.time||0};x.push(z)}}AJS.EventQueue.length=0;store.set(l,x)};var u=0;var a=function(w){return Math.min(5000*Math.pow(2,w),5*60*1000)};var g=function(){var z;function x(){setTimeout(g,a(u=0))}function w(){setTimeout(g,a(++u))}if(!e()){return x()}h();z=store.get(l);if(!z||!z.length){t();return x()}store.remove(l);t();if(!n(z)){return x()}var A=new Date().getTime();for(var y=0;y<z.length;y++){if(z[y].time>0){z[y].timeDelta=z[y].time-A}else{z[y].timeDelta=y-z.length}delete z[y].time}o=p({type:"POST",url:i+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(z),contentType:"application/json",dataType:"json"});o.fail(function(){AJS.EventQueue.concat(z);h();w()});o.done(function(){x()})};var n=function(y){for(var x=y.length-1;x>=0;x--){var A="";var z=y[x];var w=z.properties;if(typeof z.name==="undefined"){A="you must provide a name for the event."}else{if(typeof w!=="undefined"&&w!==null){if(w.constructor!==Object){A="properties must be an object with key value pairs."}else{b(w)}}}if(A!==""){AJS.log("WARN: Invalid analytics event detected and ignored, "+A+"\nEvent: "+JSON.stringify(z));y.splice(x,1)}}return y.length};var b=function(y){for(var x in y){if(y.hasOwnProperty(x)){var w=y[x];if(c(w)&&j(w)){}else{if(c(w)&&w.toString){y[x]=w.toString()}else{y[x]=""}}}}};function c(w){return typeof w!=="undefined"&&w!==null}function j(w){return typeof w==="number"||typeof w==="string"||typeof w==="boolean"}var m=function(){if(o&&!(o.state()==="resolved"||o.state()==="rejected")){o.abort()}};AJS.EventQueue=AJS.EventQueue||[];var r=Array.prototype.push;AJS.EventQueue.push=function(w){w.time=new Date().getTime();r.call(AJS.EventQueue,w)};AJS.toInit(function(){s();setTimeout(g,500);v()});d(window).unload(function(){m();h()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(w,x){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:w,properties:x})}};AJS.bind("analytics",function(w,x){AJS.EventQueue.push({name:x.name,properties:x.data})});AJS.bind("analyticsEvent",function(w,x){AJS.EventQueue.push({name:x.name,properties:x.data})});var v=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var x=AJS.$(":contains(Enable Atlassian analytics)");if(x.size()>0){var w=x[x.size()-2];if(w){w.remove()}}}}}}(AJS.$));;
;
/* module-key = 'com.atlassian.analytics.analytics-client:policy-update-init', location = 'js/policy-update-init.js' */
AJS.toInit(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:policy-update")}});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:programmatic-analytics-init', location = 'js/programmatic-analytics-init.js' */
(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:programmatic-analytics")}}());;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=(function(a){a.ApplicationHeader=function(b){b.Cog=(function(){var c=function(){var d=AJS.$("#system-admin-menu-content");if(d.length>0){return d}var e=AJS.$("#admin-menu-link-content");if(e.length>0){return e}return AJS.$("#bamboo\\.global\\.header-admin\\.menu")};return{getDropdown:c}}());return b}(a.ApplicationHeader||{});return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.adminshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_ignored) {
  var param5 = '<ul class="aui-list-truncate">';
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5 += '<li><a href="' + soy.$$escapeHtml(linkData7.link) + '">' + soy.$$escapeHtml(linkData7.label) + '</a></li>';
  }
  param5 += '</ul>';
  var output = '' + aui.dropdown2.section({id: 'nl-remote-admin-section', label: 'Other applications', content: param5});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.adminshortcuts.section.soyTemplateName = 'navlinks.templates.adminshortcuts.section';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=(function(a){a.AdminShortcuts=(function(){var c=function(){return AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:false,dataType:"json"})};var b=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{render:function(){c().done(function(e){e=_.reject(e,function(f){return f.local===true});if(e.length){var d=navlinks.templates.adminshortcuts.section({links:e});a.ApplicationHeader.Cog.getDropdown().append(d);b()}})}}}());return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.soy' */
// This file was automatically generated from projectshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.projectshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.projectshortcuts == 'undefined') { navlinks.templates.projectshortcuts = {}; }


navlinks.templates.projectshortcuts.dialogContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.localShortcuts && opt_data.localShortcuts.length > 0) ? navlinks.templates.projectshortcuts.dialogContentShortcuts({shortcuts: opt_data.localShortcuts, listClass: 'projectshortcut-links'}) : '') + ((opt_data.remoteShortcuts != null) ? (opt_data.remoteShortcuts.length > 0) ? '<h2 class="projectshortcuts-heading">Related Links</h2>' + navlinks.templates.projectshortcuts.dialogContentShortcuts(soy.$$augmentMap(opt_data.remoteShortcuts, {shortcuts: opt_data.remoteShortcuts, listClass: 'projectshortcut-links'})) : '' : navlinks.templates.projectshortcuts.dialogLoading(null));
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContent.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContent';
}


navlinks.templates.projectshortcuts.headingWrapper = function(opt_data, opt_ignored) {
  return '<div class="project-dialog-header-wrapper"><div class="project-header"><img class="project-img" src="' + soy.$$escapeHtml(opt_data.logoUrl) + '"><h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2></div><div class="project-content-wrapper">' + soy.$$filterNoAutoescape(opt_data.contentHtml) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.headingWrapper.soyTemplateName = 'navlinks.templates.projectshortcuts.headingWrapper';
}


navlinks.templates.projectshortcuts.dialogContentShortcuts = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
  var shortcutList35 = opt_data.shortcuts;
  var shortcutListLen35 = shortcutList35.length;
  for (var shortcutIndex35 = 0; shortcutIndex35 < shortcutListLen35; shortcutIndex35++) {
    var shortcutData35 = shortcutList35[shortcutIndex35];
    output += '<li' + ((shortcutIndex35 == shortcutListLen35 - 1) ? ' class="last"' : '') + '>' + navlinks.templates.projectshortcuts.dialogContentShortcut(shortcutData35) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcuts.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcuts';
}


navlinks.templates.projectshortcuts.dialogContentShortcut = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.link) + '"' + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcut.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcut';
}


navlinks.templates.projectshortcuts.dialogLoading = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="projectshortcuts-loading">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogLoading.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogLoading';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.js' */
(function(e,g){var i,k={},m="key",b="name",j="entity-type";function f(s){var n=e(this),o=n.data(m),q=n.data(b),p=n.data(j);if(typeof o==="undefined"){return}s.preventDefault();i=new AJS.Dialog({width:600,keypressListener:function(u){if(u.which==jQuery.ui.keyCode.ESCAPE){i.remove()}},id:"project-shortcuts-dialog"}).addCancel("Close",function(){i.remove()}).addPanel("",navlinks.templates.projectshortcuts.headingWrapper({title:q,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogLoading({text:"Retrieving links"})})).show();c(i);if(!k[o]){k[o]={entity:{title:q},localShortcuts:null,remoteShortcuts:null};d(AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+o,{entityType:p}).done(t);d(AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+o,{entityType:p}).done(r).fail(function(){var u=i.getCurrentPanel().body.find(".project-content-wrapper");u.find(".projectshortcuts-loading").remove();AJS.messages.error(u,{body:"Could not retrieve remote project shortcuts",closeable:false});c(i)})}else{l(k[o])}function t(u){k[o].localShortcuts=u.shortcuts;l(k[o])}function r(u){k[o].remoteShortcuts=u.shortcuts;l(k[o])}}function h(){return e(".project-shortcut-dialog-trigger img").attr("src")}function l(n){if(n.localShortcuts){i.getCurrentPanel().html(navlinks.templates.projectshortcuts.headingWrapper({title:n.entity.title,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogContent(n)}));c(i)}}function a(p){var o=210;if(!p||p.length<=o){return p}var n=o;while(n>0&&p.charAt(n)!=" "){n--}if(n==0){n=o}p=p.substring(0,n);if(p.length>=n){p=p+"..."}return p}function c(n){var q=n.popup.element,p=q.find(".dialog-panel-body"),o=q.find(".dialog-components");p.height("auto");q.height(o.outerHeight()-1);e(".aui-shadow").remove()}function d(n,o){return e.ajax({url:n,cache:false,data:o,dataType:"json"})}e(document).on("click",".project-shortcut-dialog-trigger",f)}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var c=[];var a=false;var b=false;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){c.push(d);if(a&&b===false){this.render()}},render:function(){c.sort(function(e,d){return e.weight-d.weight});a=true;if(c.length!==0){b=true;c[0].show()}}}}();;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-core', location = '/js/core/connect-host-amd.js' */
(function(a,b){if(typeof define==="function"&&define.amd){define("connect-host",[],b)
}else{if(!window._AP){window._AP={}
}AJS.$.extend(_AP,b())
}}(this,function(){if(!window._AP){window._AP={}
}define("_dollar",[],function(){return AJS.$
});
define("host/_util",[],function(){return{escapeSelector:function(c){if(!c){throw new Error("No selector to escape")
}return c.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")
},addonToNs:function(d,c){if(d.length===0||c.length===0){throw new Error("addon_key and module_key must be specified")
}return d+"__"+c
}}
});
((typeof _AP!=="undefined")?define:AP.define)("_events",["_dollar"],function(h){var d=window,f=(d.AJS&&d.AJS.log)||(d.console&&d.console.log)||(function(){});
function c(j,i){this._key=j;
this._origin=i;
this._events={};
this._any=[]
}var g=c.prototype;
g.on=function(i,j){if(i&&j){this._listeners(i).push(j)
}return this
};
g.once=function(j,k){var i=this;
var l=function(){i.off(j,l);
k.apply(null,arguments)
};
this.on(j,l);
return this
};
g.onAny=function(i){this._any.push(i);
return this
};
g.off=function(j,m){var l=this._events[j];
if(l){var k=h.inArray(m,l);
if(k>=0){l.splice(k,1)
}if(l.length===0){delete this._events[j]
}}return this
};
g.offAll=function(i){if(i){delete this._events[i]
}else{this._events={}
}return this
};
g.offAny=function(l){var k=this._any;
var j=h.inArray(l,k);
if(j>=0){k.splice(j,1)
}return this
};
g.emit=function(i){return this._emitEvent(this._event.apply(this,arguments))
};
g._event=function(i){return{name:i,args:[].slice.call(arguments,1),attrs:{},source:{key:this._key,origin:this._origin}}
};
g._emitEvent=function(j){var i=j.args.concat(j);
e(this._listeners(j.name),i);
e(this._any,[j.name].concat(i));
return this
};
g._listeners=function(i){return this._events[i]=this._events[i]||[]
};
function e(l,j){for(var k=0;
k<l.length;
++k){try{l[k].apply(null,j)
}catch(m){f(m.stack||m.message||m)
}}}return{Events:c}
});
((typeof _AP!=="undefined")?define:AP.define)("_base64",["_dollar"],function(g){function k(){this.buffer=[]
}k.prototype.append=function e(l){this.buffer.push(l);
return this
};
k.prototype.toString=function d(){return this.buffer.join("")
};
var h={codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(n){var l=new k();
var m=new f(n);
while(m.moveNext()){var u=m.current;
m.moveNext();
var s=m.current;
m.moveNext();
var q=m.current;
var t=u>>2;
var r=((u&3)<<4)|(s>>4);
var p=((s&15)<<2)|(q>>6);
var o=q&63;
if(isNaN(s)){p=o=64
}else{if(isNaN(q)){o=64
}}l.append(this.codex.charAt(t)+this.codex.charAt(r)+this.codex.charAt(p)+this.codex.charAt(o))
}return l.toString()
},decode:function(n){var m=new k();
var q=new j(n);
while(q.moveNext()){var l=q.current;
if(l<128){m.append(String.fromCharCode(l))
}else{if((l>191)&&(l<224)){q.moveNext();
var p=q.current;
m.append(String.fromCharCode(((l&31)<<6)|(p&63)))
}else{q.moveNext();
var p=q.current;
q.moveNext();
var o=q.current;
m.append(String.fromCharCode(((l&15)<<12)|((p&63)<<6)|(o&63)))
}}}return m.toString()
}};
function f(l){this._input=l;
this._index=-1;
this._buffer=[]
}f.prototype={current:Number.NaN,moveNext:function(){if(this._buffer.length>0){this.current=this._buffer.shift();
return true
}else{if(this._index>=(this._input.length-1)){this.current=Number.NaN;
return false
}else{var l=this._input.charCodeAt(++this._index);
if((l==13)&&(this._input.charCodeAt(this._index+1)==10)){l=10;
this._index+=2
}if(l<128){this.current=l
}else{if((l>127)&&(l<2048)){this.current=(l>>6)|192;
this._buffer.push((l&63)|128)
}else{this.current=(l>>12)|224;
this._buffer.push(((l>>6)&63)|128);
this._buffer.push((l&63)|128)
}}return true
}}}};
function j(l){this._input=l;
this._index=-1;
this._buffer=[]
}j.prototype={current:64,moveNext:function(){if(this._buffer.length>0){this.current=this._buffer.shift();
return true
}else{if(this._index>=(this._input.length-1)){this.current=64;
return false
}else{var r=h.codex.indexOf(this._input.charAt(++this._index));
var q=h.codex.indexOf(this._input.charAt(++this._index));
var p=h.codex.indexOf(this._input.charAt(++this._index));
var o=h.codex.indexOf(this._input.charAt(++this._index));
var n=(r<<2)|(q>>4);
var m=((q&15)<<4)|(p>>2);
var l=((p&3)<<6)|o;
this.current=n;
if(p!=64&&m!=0){this._buffer.push(m)
}if(o!=64&&l!=0){this._buffer.push(l)
}return true
}}}};
function i(l){return h.encode(l)
}function c(l){return h.decode(l)
}return{encode:i,decode:c}
});
((typeof _AP!=="undefined")?define:AP.define)("_jwt",["_base64"],function(d){function f(g){return c(g)["iss"]
}function c(j){if(null===j||""===j){throw ("Invalid JWT: must be neither null nor empty-string.")
}var i=j.indexOf(".");
var h=j.indexOf(".",i+1);
if(i<0||h<=i){throw ('Invalid JWT: must contain 2 period (".") characters.')
}var k=j.substring(i+1,h);
if(null===k||""===k){throw ("Invalid JWT: encoded claims must be neither null nor empty-string.")
}var g=d.decode(k);
return JSON.parse(g)
}function e(j,h){if(h===undefined){h=60
}var k=c(j),g=0,i=Math.floor(Date.now()/1000);
if(k&&k.exp){g=k.exp
}if((g-i)<h){return true
}return false
}return{parseJwtIssuer:f,parseJwtClaims:c,isJwtExpired:e}
});
/*!
 * jsUri
 * https://github.com/derek-watson/jsUri
 *
 * Copyright 2013, Derek Watson
 * Released under the MIT license.
 *
 * Includes parseUri regular expressions
 * http://blog.stevenlevithan.com/archives/parseuri
 * Copyright 2007, Steven Levithan
 * Released under the MIT license.
 */
((typeof _AP!=="undefined")?define:AP.define)("_uri",[],function(){var f={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};
if(!Array.prototype.forEach){Array.prototype.forEach=function(l,k){for(var j=0,h=this.length;
j<h;
++j){l.call(k||this,this[j],j,this)
}}
}function g(h){if(h){h=decodeURIComponent(h);
h=h.replace(f.pluses," ")
}return h
}function e(k){var l=f.uri_parser;
var i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];
var h=l.exec(k||"");
var j={};
i.forEach(function(n,m){j[n]=h[m]||""
});
return j
}function c(r){var l,q,o,s,j,h;
var m=[];
if(typeof(r)==="undefined"||r===null||r===""){return m
}if(r.indexOf("?")===0){r=r.substring(1)
}q=r.toString().split(f.query_separator);
for(l=0;
l<q.length;
l++){o=q[l];
s=o.indexOf("=");
if(s!==0){j=decodeURIComponent(o.substring(0,s));
h=decodeURIComponent(o.substring(s+1).replace(/\+/g," "));
m.push(s===-1?[o,null]:[j,h])
}}return m
}function d(h){this.uriParts=e(h);
this.queryPairs=c(this.uriParts.query);
this.hasAuthorityPrefixUserPref=null
}["protocol","userInfo","host","port","path","anchor"].forEach(function(h){d.prototype[h]=function(i){if(typeof i!=="undefined"){this.uriParts[h]=i
}return this.uriParts[h]
}
});
d.prototype.hasAuthorityPrefix=function(h){if(typeof h!=="undefined"){this.hasAuthorityPrefixUserPref=h
}if(this.hasAuthorityPrefixUserPref===null){return(this.uriParts.source.indexOf("//")!==-1)
}else{return this.hasAuthorityPrefixUserPref
}};
d.prototype.query=function(l){var j="",h,k;
if(typeof l!=="undefined"){this.queryPairs=c(l)
}for(h=0;
h<this.queryPairs.length;
h++){k=this.queryPairs[h];
if(j.length>0){j+="&"
}if(k[1]===null){j+=k[0]
}else{j+=k[0];
j+="=";
if(k[1]){j+=encodeURIComponent(k[1])
}}}return j.length>0?"?"+j:j
};
d.prototype.getQueryParamValue=function(j){var k,h;
for(h=0;
h<this.queryPairs.length;
h++){k=this.queryPairs[h];
if(j===k[0]){return k[1]
}}};
d.prototype.getQueryParamValues=function(k){var h=[],j,l;
for(j=0;
j<this.queryPairs.length;
j++){l=this.queryPairs[j];
if(k===l[0]){h.push(l[1])
}}return h
};
d.prototype.deleteQueryParam=function(l,o){var h=[],k,n,j,m;
for(k=0;
k<this.queryPairs.length;
k++){n=this.queryPairs[k];
j=g(n[0])===g(l);
m=n[1]===o;
if((arguments.length===1&&!j)||(arguments.length===2&&(!j||!m))){h.push(n)
}}this.queryPairs=h;
return this
};
d.prototype.addQueryParam=function(i,j,h){if(arguments.length===3&&h!==-1){h=Math.min(h,this.queryPairs.length);
this.queryPairs.splice(h,0,[i,j])
}else{if(arguments.length>0){this.queryPairs.push([i,j])
}}return this
};
d.prototype.replaceQueryParam=function(m,k,h){var j=-1,l,n;
if(arguments.length===3){for(l=0;
l<this.queryPairs.length;
l++){n=this.queryPairs[l];
if(g(n[0])===g(m)&&decodeURIComponent(n[1])===g(h)){j=l;
break
}}this.deleteQueryParam(m,h).addQueryParam(m,k,j)
}else{for(l=0;
l<this.queryPairs.length;
l++){n=this.queryPairs[l];
if(g(n[0])===g(m)){j=l;
break
}}this.deleteQueryParam(m);
this.addQueryParam(m,k,j)
}return this
};
["protocol","hasAuthorityPrefix","userInfo","host","port","path","query","anchor"].forEach(function(h){var i="set"+h.charAt(0).toUpperCase()+h.slice(1);
d.prototype[i]=function(j){this[h](j);
return this
}
});
d.prototype.scheme=function(){var h="";
if(this.protocol()){h+=this.protocol();
if(this.protocol().indexOf(":")!==this.protocol().length-1){h+=":"
}h+="//"
}else{if(this.hasAuthorityPrefix()&&this.host()){h+="//"
}}return h
};
d.prototype.origin=function(){var h=this.scheme();
if(h=="file://"){return h+this.uriParts.authority
}if(this.userInfo()&&this.host()){h+=this.userInfo();
if(this.userInfo().indexOf("@")!==this.userInfo().length-1){h+="@"
}}if(this.host()){h+=this.host();
if(this.port()){h+=":"+this.port()
}}return h
};
d.prototype.addTrailingSlash=function(){var h=this.path()||"";
if(h.substr(-1)!=="/"){this.path(h+"/")
}return this
};
d.prototype.toString=function(){var i,h=this.origin();
if(this.path()){i=this.path();
if(!(f.ends_with_slashes.test(h)||f.starts_with_slashes.test(i))){h+="/"
}else{if(h){h.replace(f.ends_with_slashes,"/")
}i=i.replace(f.starts_with_slashes,"/")
}h+=i
}else{if(this.host()&&(this.query().toString()||this.anchor())){h+="/"
}}if(this.query().toString()){if(this.query().toString().indexOf("?")!==0){h+="?"
}h+=this.query().toString()
}if(this.anchor()){if(this.anchor().indexOf("#")!==0){h+="#"
}h+=this.anchor()
}return h
};
d.prototype.clone=function(){return new d(this.toString())
};
return{init:d}
});
((typeof _AP!=="undefined")?define:AP.define)("_ui-params",["_dollar","_base64","_uri"],function(e,c,d){return{encode:function(f){if(f){return c.encode(JSON.stringify(f))
}},fromUrl:function(f){var f=new d.init(f),g=f.getQueryParamValue("ui-params");
return this.decode(g)
},fromWindowName:function(f,h){f=f||window;
var g=this.decode(f.name);
if(!h){return g
}return(g)?g[h]:undefined
},decode:function(h){var g={};
if(h&&h.length>0){try{g=JSON.parse(c.decode(h))
}catch(f){if(console&&console.log){console.log("Cannot decode passed ui params",h)
}}}return g
}}
});
var b=["_events","_jwt","_uri","_ui-params","host/_util"];
if(this.AP){b=["_events","_jwt","_uri","_ui-params"]
}((typeof _AP!=="undefined")?define:AP.define)("_xdm",b,function(d,f,h,i,c){var g=0;
function e(J,P,U){var r,M,j,m,O,W,N,T,x,Q=window,t=Q.location.toString(),y=U.local||{},F=U.remote||[],H=E(t);
var l=function(){var w={};
return{add:function(Z,Y,X){w[Z]={done:Y||null,fail:X||null,async:!!Y}
},invoke:function(Z,Y,X){var aa;
if(w[Y]){if(w[Y][Z]){w[Y][Z](X);
aa=true
}else{aa=!w[Y].async&&Z!=="fail"
}delete w[Y]
}return aa
}}
}();
if(!/xdm_e/.test(t)){J("#"+c.escapeSelector(P.container)).find("iframe").trigger("ra.iframe.destroy");
var s=B(P);
j=s.contentWindow;
N=p(P.remote,"oauth_consumer_key")||p(P.remote,"jwt");
T=P.remoteKey;
x=T;
m=(P.remoteOrigin?P.remoteOrigin:E(P.remote)).toLowerCase();
O=P.channel;
W={isHost:true,iframe:s,uiParams:P.uiParams,destroy:function(){window.clearTimeout(r.timeout);
A();
if(r.iframe){J(r.iframe).remove();
delete r.iframe
}},isActive:function(){return J.contains(document.documentElement,r.iframe)
}};
J(s).on("ra.iframe.destroy",W.destroy)
}else{j=Q.parent;
N="local";
var z=p(t,"jwt");
T=z?f.parseJwtIssuer(z):p(t,"oauth_consumer_key");
if(null===T){T=Math.random()
}x=N;
m=p(t,"xdm_e").toLowerCase();
O=p(t,"xdm_c");
W={isHost:false,isActive:function(){return true
}}
}M=x+"|"+(g+=1);
r=J.extend({id:M,remoteOrigin:m,channel:O,addonKey:x},W);
function G(w,Y,Z){try{if(Z&&Z.a){Z.a=L(Z.a)
}j.postMessage({c:O,i:w,t:Y,m:Z},m)
}catch(X){q(D(X))
}}function V(Z,aa,Y,X){var w=Math.floor(Math.random()*1000000000).toString(16);
l.add(w,Y,X);
G(w,"request",{n:Z,a:aa})
}function R(w,X){G(w,"done",X)
}function S(w,X){G(w,"fail",X)
}function k(ad){try{var ah=ad.data,ab=ah.i,ac=ah.c,aj=ah.t,ai=ah.m;
if(ad.source!==j&&ad.origin.toLowerCase()===m&&ac===O){j=ad.source
}if(ad.source!==j||ad.origin.toLowerCase()!==m||ac!==O){return
}if(aj==="request"){var w=ai.n,af=ai.a,ag=y[w],aa,Y,Z;
if(ag){aa=function(ak){R(ab,ak)
};
Y=function(ak){S(ab,ak)
};
Z=(af?af.length:0)<ag.length;
var X=y;
if(r.isHost===true){X=r;
if(X.analytics){X.analytics.trackBridgeMethod(w)
}}else{X.isHost=false
}try{if(Z){ag.apply(X,af.concat([aa,Y]))
}else{aa(ag.apply(X,af))
}}catch(ae){Y(D(ae));
o(ae)
}}else{C("Unhandled request:",ah)
}}else{if(aj==="done"||aj==="fail"){if(!l.invoke(aj,ab,ai)){C("Unhandled response:",aj,ab,ai)
}}}}catch(ae){q(D(ae))
}}function u(w){return function(){var Z=[].slice.call(arguments),Y,X;
function aa(){if(J.isFunction(Z[Z.length-1])){return Z.pop()
}}X=aa();
Y=aa();
if(!Y){Y=X;
X=undefined
}V(w,Z,Y,X)
}
}J.each(F,function(X,w){if(typeof X==="number"){X=w
}r[X]=u(X)
});
var v=r.events=new d.Events(N,H);
v.onAny(function(){var X=arguments[arguments.length-1];
var Y=X.trace=X.trace||{};
var w=r.id+"|xdm";
if((r.isHost&&!Y[w]&&X.source.channel!==r.id)||(!r.isHost&&X.source.key===N)){Y[w]=true;
X=J.extend({},X);
delete X.trace;
C("Forwarding "+(r.isHost?"host":"addon")+" event:",X);
V("_event",[X])
}});
y._event=function(w){delete w.trace;
if(this.isHost){w.source={channel:this.id||M,key:this.addonKey,origin:this.remoteOrigin||m}
}C("Receiving as "+(this.isHost?"host":"addon")+" event:",w);
v._emitEvent(w)
};
function I(w){if(r.isActive()){k(w.originalEvent?w.originalEvent:w)
}else{A()
}}function n(){J(window).bind("message",I)
}function A(){J(window).unbind("message",I)
}function p(X,w){return new h.init(X).getQueryParamValue(w)
}function E(w){return new h.init(w).origin()
}function K(X,Y){var w=new h.init(X);
J.each(Y,function(aa,Z){w.addQueryParam(aa,Z)
});
return w.toString()
}function B(X){if(!X.container){throw new Error("config.container must be defined")
}var Y=document.createElement("iframe"),Z="easyXDM_"+X.container+"_provider",w="";
if(X.uiParams){w=i.encode(X.uiParams)
}J.extend(Y,{id:Z,name:w,frameBorder:"0"},X.props);
Y.setAttribute("rel","nofollow");
Y.className="ap-iframe";
J("#"+c.escapeSelector(X.container)).append(Y);
J(Y).trigger("ra.iframe.create");
Y.src=X.remote;
return Y
}function D(w){return w.message||w.toString()
}function C(){if(e.debug){q.apply(Q,["DEBUG:"].concat([].slice.call(arguments)))
}}function q(){var w=J.log||(Q.AJS&&Q.AJS.log);
if(w){w.apply(Q,arguments)
}}function o(){var w=(Q.AJS&&Q.AJS.error);
if(w){w.apply(Q,arguments)
}}function L(w){var X=[];
return(function Y(ac){var aa,Z,ad;
if(typeof ac==="object"&&ac!==null&&!(ac instanceof Boolean)&&!(ac instanceof String)&&!(ac instanceof Date)&&!(ac instanceof RegExp)&&!(ac instanceof Blob)&&!(ac instanceof File)&&!(ac instanceof FileList)&&!(ac instanceof Error)&&!(ac instanceof Node)){if(X.indexOf(ac)>-1){q("XDM: A circular reference was detected and removed from the message.");
return null
}X.push(ac);
if(Array.isArray(ac)){ad=[];
for(aa=0;
aa<ac.length;
aa++){ad[aa]=Y(ac[aa])
}}else{ad={};
for(Z in ac){if(ac.hasOwnProperty(Z)){var ab=Y(ac[Z]);
if(ab!==null){ad[Z]=ab
}}}}return ad
}if(typeof ac==="function"){q("XDM: A function was detected and removed from the message.");
return null
}if(ac instanceof Error){q("XDM: An Error object was detected and removed from the message.");
return{}
}if(ac instanceof Node){q("XDM: A Node object was detected and removed from the message.");
return{}
}return ac
}(w))
}n();
return r
}return e
});
define("host/jwt-keepalive",["_dollar","_jwt"],function(e,c){function d(f){var g=e.Deferred(function(i){var h=window._AP.contentResolver.resolveByParameters({addonKey:f.addonKey,moduleKey:f.moduleKey,productContext:f.productContext,uiParams:f.uiParams,width:f.width,height:f.height,classifier:"json"});
h.done(function(k){var j=JSON.parse(k);
i.resolve(j.src)
})
});
return g
}return{updateUrl:d,isExpired:c.isJwtExpired}
});
define("_rpc",["_dollar","_xdm","host/jwt-keepalive","_uri"],function(e,g,f,d){var m=e.each,l=e.extend,h=e.isFunction,n=[],i={},c=[],j={},k=[];
return{extend:function(o){if(h(o)){o=o()
}l(i,o.apis);
l(j,o.internals);
c=c.concat(o.stubs||[]);
var p=o.init;
if(h(p)){k.push(p)
}return o.apis
},init:function(q,p){var o=new d.init(p.remote),r=o.getQueryParamValue("jwt"),s;
q=q||{};
m(i,function(t){c.push(t)
});
if(r&&f.isExpired(r)){s=f.updateUrl({addonKey:p.remoteKey,moduleKey:q.ns,productContext:q.productContext||{},uiParams:p.uiParams,width:p.props.width,height:p.props.height})
}e.when(s).always(function(u){if(u){p.remote=u
}var t=new g(e,p,{remote:c,local:e.extend({},j)});
n[t.id]=t;
m(k,function(v,x){try{x(l({},q),t)
}catch(w){console.log(w)
}})
})
}}
});
define("resize",["_dollar","_rpc"],function(c,d){d.extend(function(){return{init:function(f,g){g.resize=AJS.debounce(function e(k,i,h){k(this.iframe).css({width:i,height:h});
var j=k(this.iframe).closest(".ap-container");
j.trigger("resized",{width:i,height:h})
})
},internals:{resize:function(f,e){if(!this.uiParams.isDialog){this.resize(c,f,e)
}},sizeToParent:AJS.debounce(function(f){var e=function(h){var g;
if(f){c(".ac-content-page #footer").css({display:"none"});
c(".ac-content-page").css({overflow:"hidden !important"});
g=c(document).height()-c("#header > nav").outerHeight()
}else{g=c(document).height()-c("#header > nav").outerHeight()-c("#footer").outerHeight()-20
}c(h).css({width:"100%",height:g+"px"})
};
if(this.uiParams.isGeneral){c(this.iframe).addClass("full-size-general-page");
c(window).on("resize",function(){e(this.iframe)
});
e(this.iframe)
}else{c(this.iframe).addClass("full-size-general-page-fail")
}})}}
})
});
require("resize");
define("host/_status_helper",["_dollar"],function(g){var d={loading:{descriptionHtml:'<div class="small-spinner"></div>Loading add-on...'},"load-timeout":{descriptionHtml:'<div class="small-spinner"></div>Add-on is not responding. Wait or <a href="#" class="ap-btn-cancel">cancel</a>?'},"load-error":{descriptionHtml:"Add-on failed to load."}};
function f(l){if(l.data("loadingStatusTimer")){clearTimeout(l.data("loadingStatusTimer"));
l.removeData("loadingStatusTimer")
}l.find(".ap-status").addClass("hidden")
}function h(m,l){f(m);
m.closest(".ap-container").removeClass("hidden");
m.find(".ap-stats").removeClass("hidden");
m.find(".ap-"+l).removeClass("hidden");
setTimeout(function(){var n=m.find(".small-spinner",".ap-"+l);
if(n.length&&n.spin){n.spin({zIndex:"1"})
}},10)
}function i(l){f(l)
}function e(m,l){if(!l){h(m,"loading")
}else{var n=setTimeout(h.bind(null,m,"loading"),l);
m.data("loadingStatusTimer",n)
}}function j(l){h(l,"load-timeout")
}function k(l){h(l,"load-error")
}function c(){var n,m=g('<div class="ap-stats" />');
for(n in d){var l=g('<div class="ap-'+n+' ap-status hidden" />');
l.append("<small>"+d[n].descriptionHtml+"</small>");
m.append(l)
}return m
}return{createStatusMessages:c,showLoadingStatus:e,showloadTimeoutStatus:j,showLoadErrorStatus:k,showLoadedStatus:i}
});
require(["_dollar","_rpc","host/_status_helper"],function(d,e,c){e.extend(function(f){return{init:function(i,h){var g=d(h.iframe).closest(".ap-container");
c.showLoadingStatus(g,0);
g.find(".ap-load-timeout a.ap-btn-cancel").click(function(){c.showLoadErrorStatus(g);
if(h.analytics&&h.analytics.iframePerformance){h.analytics.iframePerformance.cancel()
}});
h.timeout=setTimeout(function(){h.timeout=null;
c.showloadTimeoutStatus(g);
if(h.isActive()&&h.analytics&&h.analytics.iframePerformance){h.analytics.iframePerformance.timeout()
}},20000)
},internals:{init:function(){if(this.analytics&&this.analytics.iframePerformance){this.analytics.iframePerformance.end()
}var g=d(this.iframe).closest(".ap-container");
c.showLoadedStatus(g);
clearTimeout(this.timeout);
g.find(".ap-content").addClass("iframe-init")
}}}
})
});
define("host/content",["_dollar","_uri","host/_util"],function(i,f,j){function e(q,p){var o=q.attr("class");
var n=o?o.match(p):null;
return i.isArray(n)?n[1]:false
}function l(m){return e(m,/ap-plugin-key-([^\s]*)/)
}function d(m){return e(m,/ap-module-key-([^\s]*)/)
}function k(m){return e(m,/ap-target-key-([^\s]*)/)
}function h(p){var n=d(p),m=l(p),o=p.hasClass("ap-inline-dialog")?"inlineDialog":"dialog";
return window._AP[o+"Options"][j.addonToNs(m,n)]||{}
}function c(m){var n=new f.init(m).queryPairs;
var o={};
i.each(n,function(p,q){o[q[0]]=q[1]
});
return o
}function g(o,m,p){function n(u){u.preventDefault();
var t=i(u.target).closest(m),q=t.attr("href"),s=new f.init(q),r={bindTo:t,defaultHeader:t.text(),width:s.getQueryParamValue("width"),height:s.getQueryParamValue("height"),cp:s.getQueryParamValue("cp"),key:l(t),productContext:c(q)};
p(q,r,u.type)
}i(window.document).on(o,m,n)
}return{eventHandler:g,getOptionsForWebItem:h,getWebItemPluginKey:l,getWebItemModuleKey:d,getWebItemTargetKey:k}
});
(function(o){var c=(function(){function p(q){this.options=q
}p.prototype.toString=function(){if(JSON&&JSON.stringify){return JSON.stringify(this.options)
}else{return this.options
}};
return p
}());
var k=(function(){function v(y){return Object.prototype.toString.apply(y)==="[object Array]"
}function s(y){return Object.prototype.toString.apply(y)==="[object String]"
}function x(y){return Object.prototype.toString.apply(y)==="[object Number]"
}function u(y){return Object.prototype.toString.apply(y)==="[object Boolean]"
}function t(z,B){var y="",C=true,A;
for(A=0;
A<z.length;
A+=1){if(C){C=false
}else{y+=B
}y+=z[A]
}return y
}function q(z,B){var y=[],A=0;
for(;
A<z.length;
A+=1){y.push(B(z[A]))
}return y
}function r(A,z){var y=[],B=0;
for(;
B<A.length;
B+=1){if(z(A[B])){y.push(A[B])
}}return y
}function p(z){if(typeof z!=="object"||z===null){return z
}Object.freeze(z);
var A,y;
for(y in z){if(z.hasOwnProperty(y)){A=z[y];
if(typeof A==="object"){w(A)
}}}return z
}function w(y){if(typeof Object.freeze==="function"){return p(y)
}return y
}return{isArray:v,isString:s,isNumber:x,isBoolean:u,join:t,map:q,filter:r,deepFreeze:w}
}());
var l=(function(){function r(s){return(s>="a"&&s<="z")||((s>="A"&&s<="Z"))
}function p(s){return s>="0"&&s<="9"
}function q(s){return p(s)||(s>="a"&&s<="f")||(s>="A"&&s<="F")
}return{isAlpha:r,isDigit:p,isHexDigit:q}
}());
var h=(function(){var p={encode:function(v){return unescape(encodeURIComponent(v))
},numBytes:function(v){if(v<=127){return 1
}else{if(194<=v&&v<=223){return 2
}else{if(224<=v&&v<=239){return 3
}else{if(240<=v&&v<=244){return 4
}}}}return 0
},isValidFollowingCharCode:function(v){return 128<=v&&v<=191
}};
function u(z){var v="",y=p.encode(z),w,x;
for(x=0;
x<y.length;
x+=1){w=y.charCodeAt(x);
v+="%"+(w<16?"0":"")+w.toString(16).toUpperCase()
}return v
}function t(v,w){return v.charAt(w)==="%"&&l.isHexDigit(v.charAt(w+1))&&l.isHexDigit(v.charAt(w+2))
}function s(v,w){return parseInt(v.substr(w,2),16)
}function r(x){if(!t(x,0)){return false
}var y=s(x,1);
var w=p.numBytes(y);
if(w===0){return false
}for(var v=1;
v<w;
v+=1){if(!t(x,3*v)||!p.isValidFollowingCharCode(s(x,3*v+1))){return false
}}return true
}function q(A,z){var y=A.charAt(z);
if(!t(A,z)){return y
}var x=s(A,z+1);
var w=p.numBytes(x);
if(w===0){return y
}for(var v=1;
v<w;
v+=1){if(!t(A,z+3*v)||!p.isValidFollowingCharCode(s(A,z+3*v+1))){return y
}}return A.substr(z,3*w)
}return{encodeCharacter:u,isPctEncoded:r,pctCharAt:q}
}());
var d=(function(){function p(s){return l.isAlpha(s)||l.isDigit(s)||s==="_"||h.isPctEncoded(s)
}function q(s){return l.isAlpha(s)||l.isDigit(s)||s==="-"||s==="."||s==="_"||s==="~"
}function r(s){return s===":"||s==="/"||s==="?"||s==="#"||s==="["||s==="]"||s==="@"||s==="!"||s==="$"||s==="&"||s==="("||s===")"||s==="*"||s==="+"||s===","||s===";"||s==="="||s==="'"
}return{isVarchar:p,isUnreserved:q,isReserved:r}
}());
var f=(function(){function q(w,x){var t="",u,v="";
if(typeof w==="number"||typeof w==="boolean"){w=w.toString()
}for(u=0;
u<w.length;
u+=v.length){v=w.charAt(u);
t+=d.isUnreserved(v)||(x&&d.isReserved(v))?v:h.encodeCharacter(v)
}return t
}function p(t){return q(t,true)
}function s(v,t){var u=h.pctCharAt(v,t);
if(u.length>1){return u
}else{return d.isReserved(u)||d.isUnreserved(u)?u:h.encodeCharacter(u)
}}function r(w){var t="",u,v="";
for(u=0;
u<w.length;
u+=v.length){v=h.pctCharAt(w,u);
if(v.length>1){t+=v
}else{t+=d.isReserved(v)||d.isUnreserved(v)?v:h.encodeCharacter(v)
}}return t
}return{encode:q,encodePassReserved:p,encodeLiteral:r,encodeLiteralCharacter:s}
}());
var j=(function(){var p={};
function q(r){p[r]={symbol:r,separator:(r==="?")?"&":(r===""||r==="+"||r==="#")?",":r,named:r===";"||r==="&"||r==="?",ifEmpty:(r==="&"||r==="?")?"=":"",first:(r==="+")?"":r,encode:(r==="+"||r==="#")?f.encodePassReserved:f.encode,toString:function(){return this.symbol
}}
}q("");
q("+");
q("#");
q(".");
q("/");
q(";");
q("?");
q("&");
return{valueOf:function(r){if(p[r]){return p[r]
}if("=,!@|".indexOf(r)>=0){return null
}return p[""]
}}
}());
function n(q){var p;
if(q===null||q===undefined){return false
}if(k.isArray(q)){return q.length>0
}if(typeof q==="string"||typeof q==="number"||typeof q==="boolean"){return true
}for(p in q){if(q.hasOwnProperty(p)&&n(q[p])){return true
}}return false
}var e=(function(){function p(q){this.literal=f.encodeLiteral(q)
}p.prototype.expand=function(){return this.literal
};
p.prototype.toString=p.prototype.expand;
return p
}());
var i=(function(){function q(y){var u,z=[],A=null,v=null,s=null,x,w="";
function t(){var B=y.substring(v,x);
if(B.length===0){throw new c({expressionText:y,message:"a varname must be specified",position:x})
}A={varname:B,exploded:false,maxLength:null};
v=null
}function r(){if(s===x){throw new c({expressionText:y,message:"after a ':' you have to specify the length",position:x})
}A.maxLength=parseInt(y.substring(s,x),10);
s=null
}u=(function(B){var C=j.valueOf(B);
if(C===null){throw new c({expressionText:y,message:"illegal use of reserved operator",position:x,operator:B})
}return C
}(y.charAt(0)));
x=u.symbol.length;
v=x;
for(;
x<y.length;
x+=w.length){w=h.pctCharAt(y,x);
if(v!==null){if(w==="."){if(v===x){throw new c({expressionText:y,message:"a varname MUST NOT start with a dot",position:x})
}continue
}if(d.isVarchar(w)){continue
}t()
}if(s!==null){if(x===s&&w==="0"){throw new c({expressionText:y,message:"A :prefix must not start with digit 0",position:x})
}if(l.isDigit(w)){if(x-s>=4){throw new c({expressionText:y,message:"A :prefix must have max 4 digits",position:x})
}continue
}r()
}if(w===":"){if(A.maxLength!==null){throw new c({expressionText:y,message:"only one :maxLength is allowed per varspec",position:x})
}if(A.exploded){throw new c({expressionText:y,message:"an exploeded varspec MUST NOT be varspeced",position:x})
}s=x+1;
continue
}if(w==="*"){if(A===null){throw new c({expressionText:y,message:"exploded without varspec",position:x})
}if(A.exploded){throw new c({expressionText:y,message:"exploded twice",position:x})
}if(A.maxLength){throw new c({expressionText:y,message:"an explode (*) MUST NOT follow to a prefix",position:x})
}A.exploded=true;
continue
}if(w===","){z.push(A);
A=null;
v=x+1;
continue
}throw new c({expressionText:y,message:"illegal character",character:w,position:x})
}if(v!==null){t()
}if(s!==null){r()
}z.push(A);
return new g(y,u,z)
}function p(x){var s,v,w=[],u=null,t=0;
for(s=0;
s<x.length;
s+=1){v=x.charAt(s);
if(t!==null){if(v==="}"){throw new c({templateText:x,message:"unopened brace closed",position:s})
}if(v==="{"){if(t<s){w.push(new e(x.substring(t,s)))
}t=null;
u=s
}continue
}if(u!==null){if(v==="{"){throw new c({templateText:x,message:"brace already opened",position:s})
}if(v==="}"){if(u+1===s){throw new c({templateText:x,message:"empty braces",position:u})
}try{w.push(q(x.substring(u+1,s)))
}catch(r){if(r.prototype===c.prototype){throw new c({templateText:x,message:r.options.message,position:u+r.options.position,details:r.options})
}throw r
}u=null;
t=s+1
}continue
}throw new Error("reached unreachable code")
}if(u!==null){throw new c({templateText:x,message:"unclosed brace",position:u})
}if(t<x.length){w.push(new e(x.substr(t)))
}return new m(x,w)
}return p
}());
var g=(function(){function s(y){return(JSON&&JSON.stringify)?JSON.stringify(y):y
}function v(z){if(!n(z)){return true
}if(k.isString(z)){return z===""
}if(k.isNumber(z)||k.isBoolean(z)){return false
}if(k.isArray(z)){return z.length===0
}for(var y in z){if(z.hasOwnProperty(y)){return false
}}return true
}function q(A){var y=[],z;
for(z in A){if(A.hasOwnProperty(z)){y.push({name:z,value:A[z]})
}}return y
}function t(A,y,z){this.templateText=A;
this.operator=y;
this.varspecs=z
}t.prototype.toString=function(){return this.templateText
};
function u(z,A,B){var y="";
B=B.toString();
if(A.named){y+=f.encodeLiteral(z.varname);
if(B===""){y+=A.ifEmpty;
return y
}y+="="
}if(z.maxLength!==null){B=B.substr(0,z.maxLength)
}y+=A.encode(B);
return y
}function p(y){return n(y.value)
}function x(A,B,C){var z=[],y="";
if(B.named){y+=f.encodeLiteral(A.varname);
if(v(C)){y+=B.ifEmpty;
return y
}y+="="
}if(k.isArray(C)){z=C;
z=k.filter(z,n);
z=k.map(z,B.encode);
y+=k.join(z,",")
}else{z=q(C);
z=k.filter(z,p);
z=k.map(z,function(D){return B.encode(D.name)+","+B.encode(D.value)
});
y+=k.join(z,",")
}return y
}function r(A,B,C){var z=k.isArray(C),y=[];
if(z){y=C;
y=k.filter(y,n);
y=k.map(y,function(E){var D=f.encodeLiteral(A.varname);
if(v(E)){D+=B.ifEmpty
}else{D+="="+B.encode(E)
}return D
})
}else{y=q(C);
y=k.filter(y,p);
y=k.map(y,function(D){var E=f.encodeLiteral(D.name);
if(v(D.value)){E+=B.ifEmpty
}else{E+="="+B.encode(D.value)
}return E
})
}return k.join(y,B.separator)
}function w(A,B){var z=[],y="";
if(k.isArray(B)){z=B;
z=k.filter(z,n);
z=k.map(z,A.encode);
y+=k.join(z,A.separator)
}else{z=q(B);
z=k.filter(z,function(C){return n(C.value)
});
z=k.map(z,function(C){return A.encode(C.name)+"="+A.encode(C.value)
});
y+=k.join(z,A.separator)
}return y
}t.prototype.expand=function(F){var B=[],C,z,E,y,D=false,A=this.operator;
for(C=0;
C<this.varspecs.length;
C+=1){z=this.varspecs[C];
E=F[z.varname];
if(E===null||E===undefined){continue
}if(z.exploded){D=true
}y=k.isArray(E);
if(typeof E==="string"||typeof E==="number"||typeof E==="boolean"){B.push(u(z,A,E))
}else{if(z.maxLength&&n(E)){throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+s(E))
}else{if(!z.exploded){if(A.named||!v(E)){B.push(x(z,A,E))
}}else{if(n(E)){if(A.named){B.push(r(z,A,E))
}else{B.push(w(A,E))
}}}}}}if(B.length===0){return""
}else{return A.first+k.join(B,A.separator)
}};
return t
}());
var m=(function(){function p(r,q){this.templateText=r;
this.expressions=q;
k.deepFreeze(this)
}p.prototype.toString=function(){return this.templateText
};
p.prototype.expand=function(s){var r,q="";
for(r=0;
r<this.expressions.length;
r+=1){q+=this.expressions[r].expand(s)
}return q
};
p.parse=i;
p.UriTemplateError=c;
return p
}());
o(m)
}(function(c){if(typeof define==="function"){define("_uritemplate",[],function(){return c
})
}else{if(typeof window!=="undefined"){window.UriTemplate=c
}else{global.UriTemplate=c
}}}));
define("host/_addons",["_dollar","_rpc"],function(d,e){var c={};
e.extend(function(){var f={_emitEvent:function(g){if(g.source.key in c){d.each(c[g.source.key],function(i,h){h.bus._emitEvent(g)
})
}else{AJS.trigger("analyticsEvent",{name:"emitToAll.unknownSource",data:g.source})
}},remove:function(h){var g=c[h.addonKey][h.id];
if(g){g.bus.offAny(g.listener)
}delete c[h.addonKey][h.id];
return this
},init:function(g,i){if(!c[i.addonKey]){c[i.addonKey]={}
}var h=c[i.addonKey][i.id]={bus:i.events,listener:function(){var k=arguments[arguments.length-1];
var l=k.trace=k.trace||{};
var j=i.id+"|addon";
if(!l[j]){l[j]=true;
f._emitEvent(k)
}}};
h.bus.onAny(h.listener);
h.bus.on("ra.iframe.destroy",function(){f.remove(i)
})
}};
return f
});
return{emitToAll:function(f){d.each(c,function(g,h){d.each(h,function(j,i){i.bus.emit(f)
})
})
}}
});
define("analytics/analytics",["_dollar"],function(g){var d=["resize","init"];
var f=20000;
var i=100;
function h(){return window.performance&&window.performance.now?window.performance.now():new Date().getTime()
}function c(j){var k={};
this.addonKey=j.addonKey;
this.moduleKey=j.moduleKey;
this.iframePerformance={start:function(){k.startLoading=h()
},end:function(){var l=h()-k.startLoading;
e.track("iframe.performance.load",{addonKey:j.addonKey,moduleKey:j.moduleKey,value:l>f?"x":Math.ceil((l)/i)});
delete k.startLoading
},timeout:function(){e.track("iframe.performance.timeout",{addonKey:j.addonKey,moduleKey:j.moduleKey});
this.end()
},cancel:function(){e.track("iframe.performance.cancel",{addonKey:j.addonKey,moduleKey:j.moduleKey})
}}
}var e=c.prototype;
e.getKey=function(){return this.addonKey+":"+this.moduleKey
};
e.track=function(j,l){var k="connect.addon."+j;
if(AJS.Analytics){AJS.Analytics.triggerPrivacyPolicySafeEvent(k,l)
}else{if(AJS.trigger){AJS.trigger("analyticsEvent",{name:k,data:l})
}else{return false
}}return true
};
e.trackBridgeMethod=function(j){if(g.inArray(j,d)!==-1){return false
}this.track("bridge.invokemethod",{name:j,addonKey:this.addonKey,moduleKey:this.moduleKey})
};
return{get:function(j){return new c(j)
}}
});
(function(c){define("host/create",["_dollar","host/_util","_rpc","_ui-params","analytics/analytics"],function(i,d,k,h,e){var j=window.requestAnimationFrame||function(l){setTimeout(l,10)
};
function g(l){if(!l){throw new Error("ns undefined")
}return i("#embedded-"+d.escapeSelector(l))
}function f(n){if(typeof n.uiParams!=="object"){n.uiParams=h.fromUrl(n.src)
}var o=n.ns=d.addonToNs(n.key,n.moduleKey);
var r="embedded-"+o,p="channel-"+o,m=n.w||"100%",q=n.h||"0";
if(typeof n.uiParams!=="object"){n.uiParams={}
}if(!!n.general){n.uiParams.isGeneral=true
}var l={remote:n.src,remoteOrigin:n.origin,remoteKey:n.key,container:r,channel:p,props:{width:m,height:q},uiParams:n.uiParams};
if(n.productCtx&&!n.productContext){n.productContext=JSON.parse(n.productCtx)
}k.extend({init:function(t,s){s.analytics=e.get({addonKey:s.addonKey,moduleKey:o});
s.analytics.iframePerformance.start();
s.productContext=n.productContext
}});
k.init(n,l)
}return function(m){var o=0;
var n=d.addonToNs(m.key,m.moduleKey);
function l(){if(g(n).length===0&&o<10){setTimeout(function(){o++;
l()
},50);
return
}f(m)
}if(AJS.$.isReady){j(l)
}else{i(l)
}}
})
}(this));
var a=require("_rpc");
return{extend:a.extend,init:a.init,uiParams:require("_ui-params"),create:require("host/create"),_uriHelper:require("_uri"),_statusHelper:require("host/_status_helper"),_addons:require("host/_addons"),webItemHelper:require("host/content"),version:"3.1.29"}
}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:remote-condition', location = 'js/condition/remote.js' */
(function($, context){
  var hidden;

  function hide() {
    if (!hidden) {
      hidden = true;
      // Connect any Remotable Plugin hosted Web Items to a dialog that loads the appropriate IFrame Servlet,
      // look for jira issue tabs, and look for jira project tabs
      $(".remote-condition, #issue-tabs a[id$='-remote-condition'], .tabs a[id$='-remote-condition-panel']").each(function (i, el) {
        var el$ = $(el), parent$ = el$.parent();
        el$.addClass("hidden");
        if (parent$[0].tagName == "LI") {
          parent$.addClass("hidden");
        }
      });
    }
  }

  AJS.toInit(hide);

  context.RemoteConditions = {
    /**
     * Hides UI elements that are protected by remote conditions. These are all hacks hiding is supported
     * by the module types directly
     */
    hide: hide
  };

})(AJS.$, _AP);
;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:iframe-host-js', location = '/js/iframe/host/main.js' */
define("connect-host",function(){return _AP
});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:iframe-host-js', location = '/js/iframe/host/content-resolver.js' */
(function(d,e,c){function b(g,f){return AJS.contextPath()+"/plugins/servlet/ac/"+encodeURIComponent(g)+"/"+encodeURIComponent(f)
}var a={resolveByUrl:function(f){var g=jQuery.Deferred(function(h){h.resolve(f)
}).promise();
return g
},resolveByParameters:function(f){return d.ajax(b(f.addonKey,f.moduleKey),{dataType:"html",data:{"ui-params":e.encode(f.uiParams),"plugin-key":f.addonKey,"product-context":JSON.stringify(f.productContext),key:f.moduleKey,width:f.width||"100%",height:f.height||"100%",classifier:f.classifier||"raw"}})
}};
c._AP.contentResolver=a
}(AJS.$,_AP.uiParams,this));;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions', location = '/js/core/connect-host-cookie.js' */
(function(b,a){b("ac/cookie/main",[],function(){function c(d,e){if(!d||d.length===0){throw new Error("addon key must be defined on cookies")
}if(!e||e.length===0){throw new Error("Name must be defined")
}return d+"$$"+e
}return{saveCookie:function(d,f,g,e){a.Cookie.save(c(d,f),g,e)
},readCookie:function(d,e,g){var f=a.Cookie.read(c(d,e));
if(typeof g==="function"){g(f)
}},eraseCookie:function(d,e){a.Cookie.erase(c(d,e))
}}
})
})(define,AJS);
(function(a){a("ac/cookie",["ac/cookie/main","connect-host"],function(b,c){c.extend(function(){return{internals:{saveCookie:function(e,f,d){b.saveCookie(this.addonKey,e,f,d)
},readCookie:function(d,e){b.readCookie(this.addonKey,d,e)
},eraseCookie:function(d){b.eraseCookie(this.addonKey,d)
}}}
})
})
})(define);;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions', location = '/js/core/connect-host-env.js' */
(function(a){a("ac/env",["connect-host"],function(c){var b;
c.extend(function(){return{init:function(d){b=d
},internals:{getLocation:function(){return window.location.href
}}}
})
})
})(define);;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions', location = '/js/core/connect-host-messages.js' */
(function(c,a,b){c("ac/messages/main",[],function(){var e="ac-message-container",f=["generic","error","warning","success","info","hint"];
function h(i){return i.search(/^ap\-message\-[0-9]+$/)==0
}function d(){var i=b("#"+e);
if(i.length<1){i=b('<div id="'+e+'" />').appendTo("body")
}return i
}function g(j){var l,k,n={},m=["closeable","fadeout","delay","duration","id"];
for(l in m){k=m[l];
if(k in j){n[k]=j[k]
}}return n
}return{showMessage:function(l,m,i,k){var j=d();
k=g(k);
b.extend(k,{title:m,body:a.escapeHtml(i)});
if(b.inArray(l,f)<0){throw"Invalid message type. Must be: "+f.join(", ")
}if(h(k.id)){a.messages[l](j,k);
j.css("margin-left","-"+j.innerWidth()/2+"px")
}},clearMessage:function(i){if(h(i)){b("#"+i).remove()
}},onClose:function(j,i){if(h(j)&&b.isFunction(i)){b(document).on("aui-message-close",function(l,k){if(k.attr("id")===j){i()
}})
}}}
})
})(define,AJS,AJS.$);
(function(a){a("ac/messages",["ac/messages/main","connect-host"],function(b,c){c.extend(function(){return{internals:{showMessage:function(f,g,d,e){return b.showMessage(f,g,d,e)
},clearMessage:function(d){return b.clearMessage(d)
},onClose:function(e,d){return b.onClose(e,d)
}}}
})
})
})(define);;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions', location = '/js/core/connect-host-request.js' */
(function(c,a,b){c("ac/request",["connect-host"],function(j){var h=["status","statusText","responseText"],d=["Content-Type","ETag"],g=["If-Match","If-None-Match"],e=null;
function f(m,k,l){if(l._isBlob&&l.blob&&l.name){m.append(k,l.blob,l.name)
}else{m.append(k,l)
}return m
}function i(k){k.contentType=false;
k.processData=false;
if(k.data&&typeof k.data==="object"){var l=new FormData();
Object.keys(k.data).forEach(function(m){var n=k.data[m];
if(Array.isArray(n)){n.forEach(function(p,o){l=f(l,m+"["+o+"]",p)
})
}else{l=f(l,m,n)
}});
k.data=l
}else{throw new Error("For a Multipart request, data must to be an Object")
}k.headers["X-Atlassian-Token"]="no-check";
return k
}j.extend(function(){return{init:function(k){e=k.cp
},internals:{request:function(p,s,q){var k=e+p.url;
k=k.replace(/\/\.\.\//ig,"");
function r(u){var t={headers:{}};
b.each(h,function(x,w){t[w]=u[w]
});
b.each(d,function(x,w){t.headers[w]=u.getResponseHeader(w)
});
return t
}function o(t,v,u){s([t,v,r(u)])
}function m(u,v,t){q([r(u),v,t])
}var l={};
b.each(p.headers||{},function(u,t){l[u.toLowerCase()]=t
});
var n={url:k,type:p.type||"GET",data:p.data,dataType:"text",contentType:p.contentType,cache:(typeof p.cache!=="undefined")?!!p.cache:undefined,headers:{Accept:l.accept||"*/*","AP-Client-Key":this.addonKey}};
if(n.contentType==="multipart/form-data"){n=i(n)
}b.each(g,function(t,u){if(l[u.toLowerCase()]){n.headers[u]=l[u.toLowerCase()]
}});
if(p.experimental===true){n.headers["X-ExperimentalApi"]="opt-in"
}b.ajax(n).then(o,m)
}}}
})
})
})(define,AJS,AJS.$);;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions', location = '/js/core/connect-host-history.js' */
(function(a){a("ac/history/main",["connect-host"],function(i){var l,e="!",c=i._uriHelper;
function f(o){if(o===undefined||o===null){return""
}return o.toString().replace(new RegExp("^"+e),"")
}function m(o){if(o===undefined||o===null){throw"You must supply text to prefix"
}return e+f(o)
}function n(o,p){var q=new c.init(window.location.href),r=new c.init(window.location.href);
r.anchor(m(o));
if(r.anchor()!==q.anchor()){l=r.anchor();
if(p){window.location.replace("#"+r.anchor())
}else{window.location.assign("#"+r.anchor())
}return r.anchor()
}}function j(o){n(o)
}function h(o){n(o,true)
}function d(o){history.go(o)
}function g(q,o){var r=new c.init(q.newURL);
var p=new c.init(q.oldURL);
if((r.anchor()!==p.anchor())&&(l!==r.anchor())){o(b(q))
}l=null
}function b(o){return{newURL:f(new c.init(o.newURL).anchor()),oldURL:f(new c.init(o.oldURL).anchor())}
}function k(){var p=new c.init(window.location.href),o=f(p.anchor());
return o
}return{pushState:j,replaceState:h,go:d,hashChange:g,getState:k}
})
})(define);
(function(c,a,b){c("ac/history",["ac/history/main","connect-host"],function(d,e){e.extend(function(){return{init:function(g,f){if(g.uiParams.isGeneral){b(window).on("hashchange",function(h){d.hashChange(h.originalEvent,f.historyMessage)
})
}},internals:{historyPushState:function(f){if(this.uiParams.isGeneral){return d.pushState(f)
}else{a.log("History is only available to page modules")
}},historyReplaceState:function(f){if(this.uiParams.isGeneral){return d.replaceState(f)
}else{a.log("History is only available to page modules")
}},historyGo:function(f){if(this.uiParams.isGeneral){return d.go(f)
}else{a.log("History is only available to page modules")
}}},stubs:["historyMessage"]}
})
})
})(define,AJS,AJS.$);;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions', location = '/js/core/connect-host-dialog.js' */
define("host/_util",[],function(){return{escapeSelector:function(a){if(!a){throw new Error("No selector to escape")
}return a.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")
},addonToNs:function(b,a){if(b.length===0||a.length===0){throw new Error("addon_key and module_key must be specified")
}return b+"__"+a
}}
});
(function(b,a){b("ac/dialog/header-controls",[],function(){var c='<div class="header-title-container" class="aui-item expanded"><div><span class="header-title"></span></div></div><div class="header-control-panel" class="aui-item"></div>';
return{create:function(e){var d=a(c);
d.find(".header-title").text(e.header||"");
return{$el:d}
}}
})
})(define,AJS.$);
(function(b,a){b("ac/dialog/button",[],function(){function c(d){this.$el=a("<button />").text(d.text).addClass("aui-button aui-button-"+d.type).addClass(d.additionalClasses);
this.isEnabled=function(){return !(this.$el.attr("aria-disabled")==="true")
};
this.setEnabled=function(e){if(d.noDisable===true){return false
}this.$el.attr("aria-disabled",!e);
return true
};
this.isHidden=function(){return(this.$el.css("display")==="none")
};
this.setHidden=function(e){if(d.noHide===true){return false
}if(e){this.$el.hide()
}else{this.$el.show()
}return true
};
this.setEnabled(true);
this.click=function(e){if(e){this.$el.unbind("ra.dialog.click");
this.$el.bind("ra.dialog.click",e)
}else{this.dispatch(true)
}};
this.dispatch=function(e){var f=e?"done":"fail";
d.actions&&d.actions[f]&&d.actions[f]()
};
this.setText=function(e){if(e){this.$el.text(e)
}}
}return{button:c,submit:function(d){return new c({type:"primary",text:"Submit",additionalClasses:"ap-dialog-submit",actions:d})
},cancel:function(d){return new c({type:"link",text:"Cancel",noDisable:true,noHide:true,additionalClasses:"ap-dialog-cancel",actions:d})
}}
})
})(define,AJS.$);
(function(d,b,a,c){d("ac/dialog",["connect-host","ac/dialog/button","ac/dialog/header-controls"],function(t,e,r){var p=c(window);
var q=0;
var f=[];
var i;
var n;
var o;
function l(){return{submit:e.submit({done:g}),cancel:e.cancel({done:g})}
}var k=function(u){if(u.keyCode===27&&n&&n.hide){n.hide();
c(document).unbind("keydown",k)
}};
function j(u){var v=u.header||u.defaultHeader;
if(typeof v==="object"){v=v.value
}return v
}function s(C){var B,v=["ap-aui-dialog2"];
var y=C.size!=="fullscreen"&&!C.chrome;
if(y){v.push("ap-aui-dialog2-chromeless")
}var x=C.size;
if(x==="fullscreen"){x="maximum"
}B=c(aui.dialog.dialog2({id:C.id,titleText:j(C),titleId:C.titleId,size:x,extraClasses:v,removeOnHide:true,footerActionContent:true,modal:true}));
if(y){B.find("header, footer").remove()
}else{o.submit.setText(C.submitText);
o.cancel.setText(C.cancelText);
var u;
if(C.size==="fullscreen"){B.addClass("ap-header-controls");
var w=r.create(C);
var A=B.find("header");
A.addClass("aui-group").empty().append(w.$el);
u=A.find(".header-control-panel");
o.submit.$el.addClass("aui-icon aui-icon-small aui-iconfont-success");
o.cancel.$el.addClass("aui-icon aui-icon-small aui-iconfont-close-dialog")
}else{u=B.find(".aui-dialog2-footer-actions");
u.empty()
}u.append(o.submit.$el,o.cancel.$el)
}B.find(".aui-dialog2-content").append(i);
i.data("ra.dialog.buttons",o);
function z(D){if(D.isEnabled()){D.$el.trigger("ra.dialog.click",D.dispatch)
}}c.each(o,function(E,D){D.$el.click(function(){z(D)
})
});
return B
}function h(v,u){v.append('<div id="embedded-'+u.ns+'" class="ap-dialog-container ap-content" />')
}function m(w,u){if(typeof w==="string"){var v=w.indexOf("%")===w.length-1;
w=parseInt(w,10);
if(v){w=w/100*u
}}return w
}function g(){if(!n||f.length===0){throw Error("Can't close dialog: no dialogs are currently open")
}if(n.isClosing){return
}n.isClosing=true;
if(i){i.trigger("ra.iframe.destroy").removeData("ra.dialog.buttons").unbind();
i=null
}o=null;
n.hide();
var u=f.pop();
if(n!==u){throw Error("The dialog being closed must be the last dialog to be opened.")
}n=f[f.length-1];
if(n){i=n.$el.find(".ap-servlet-placeholder");
o=i.data("ra.dialog.buttons")
}}return{_getActiveDialog:function(){return n
},isCloseOnEscape:function(){return i&&i.data("ra.dialog.closeOnEscape")
},getButton:function(u){var v=i&&i.data("ra.dialog.buttons")||{};
return u?v[u]:v
},createButton:function(v,u){var w=new e.button({type:"secondary",text:v,additionalClasses:"ap-dialog-custom-button"});
n.$el.find(".aui-dialog2-footer-actions").prepend(w.$el);
o[v]=w;
w.$el.click(function(){if(w.isEnabled()){w.$el.trigger("ra.dialog.click",w.dispatch)
}});
return w
},create:function(y,x){var u="ap-"+y.ns;
f.forEach(function(B){if(B.$el.find("#"+u).length>0){throw new Error("Can't create dialog. A dialog is already open with namespace: "+y.ns)
}});
var w={width:"50%",height:"50%",closeOnEscape:true},v=y.id||"ap-dialog-"+(q+=1),A=c.extend({id:v},w,y,{dlg:1}),z;
if(A.width==="100%"&&A.height==="100%"){A.size="maximum"
}if(A.size==="maximum"&&typeof A.chrome==="undefined"){A.chrome=false
}i=c("<div />").addClass("ap-servlet-placeholder ap-container").attr("id",u).bind("ra.dialog.close",g);
o=l();
z=s(A);
z.find(".aui-dialog2-content").append(i);
if(y.size){A.w="100%";
A.h="100%"
}else{A.w=m(A.width,p.width());
A.h=m(A.height,p.height());
a.layer(z).changeSize(A.w,A.h);
z.removeClass("aui-dialog2-medium")
}n=a.dialog2(z);
f.push(n);
n.on("hide",g);
i.data("ra.dialog.closeOnEscape",A.closeOnEscape);
if(A.closeOnEscape){c(document).on("keydown",function(B){k(B)
})
}c.each(o,function(B,C){C.click(function(){C.dispatch(true)
})
});
h(i,A);
if(x!==false){i.append(t._statusHelper.createStatusMessages())
}if(y.src){_AP.create(A)
}z.on("ra.iframe.create","iframe",function(){this.focus()
});
n.show();
return n
},close:g}
})
})(define,require,AJS,AJS.$);
AJS.toInit(function(a){(function(c,b){if(typeof window._AP!=="undefined"){c(["ac/dialog"],function(d){_AP.Dialog=d
})
}})(require,AJS)
});
(function(b,a){b("ac/dialog/dialog-factory",["ac/dialog","host/_util"],function(d,c){return function(o,j,g){if(j.dialogModuleKey){var m=window._AP.dialogModules;
var e=m&&m[o.key];
var h=e&&e[j.dialogModuleKey];
if(h){j=a.extend({},h.options,j)
}}var n,f,l=a.extend({isDialog:1},o.uiParams,{customData:j.customData});
var k=j.chrome;
if(typeof k==="undefined"){k=o.chrome
}var i=d.create({id:o.id,key:o.key,moduleKey:o.moduleKey,ns:o.ns||c.addonToNs(o.key,o.moduleKey),chrome:k,header:j.header,width:j.width,height:j.height,size:j.size,submitText:j.submitText,cancelText:j.cancelText,closeOnEscape:j.closeOnEscape},false);
f=i.$el.find(".ap-dialog-container");
if(o.url){throw new Error("Cannot retrieve dialog content by URL")
}n=window._AP.contentResolver.resolveByParameters({addonKey:o.key,moduleKey:o.moduleKey,productContext:g,uiParams:l});
n.done(function(r){var p=a(r);
p.find(".ap-content").addClass("ap-dialog-container");
var q=a(document.getElementById(p.attr("id")));
if(q.length!==0){q.empty();
p.each(function(s){q.append(p[s])
})
}else{f.replaceWith(p)
}}).fail(function(t,p,q){var s=a("<p class='title' />").text("Unable to load add-on content. Please try again later.");
var r=p+(q?": "+q.toString():"");
f.html("<div class='aui-message error ap-aui-message'></div>");
f.find(".error").text(r);
f.find(".error").prepend(s);
AJS.log(r)
});
return d
}
})
})(define,AJS.$);
(function(a,b){a(["connect-host","ac/dialog/dialog-factory","ac/dialog"],function(c,e,d){function f(g,h){var i=d._getActiveDialog().xdm;
h.click(function(j,k){if(i.isActive()&&i.buttonListenerBound){i.dialogMessage(g,k)
}else{k(true)
}})
}c.extend(function(){return{stubs:["dialogMessage"],init:function(i,h){if(i.dlg==="1"){h.uiParams.isDialog=true
}var g=d._getActiveDialog();
if(!g){return
}g.xdm=h;
b.each(d.getButton(),function(j,k){f(j,k)
})
},internals:{dialogListenerBound:function(){this.buttonListenerBound=true
},setDialogButtonEnabled:function(h,g){d.getButton(h).setEnabled(g)
},setDialogButtonHidden:function(g,h){d.getButton(g).setHidden(h)
},isDialogButtonEnabled:function(g,i){var h=d.getButton(g);
i(h?h.isEnabled():void 0)
},isDialogButtonHidden:function(g,i){var h=d.getButton(g);
i(h?h.isHidden():void 0)
},createButton:function(h,g){var i=d.createButton(h,g);
f(h,i)
},isCloseOnEscape:function(g){g(d.isCloseOnEscape())
},createDialog:function(h){var g={key:this.addonKey};
if(h.key){g.moduleKey=h.key
}else{if(h.url){throw new Error("Cannot open dialog by URL, please use module key")
}}h.dialogModuleKey=h.key;
e(g,h,this.productContext)
},closeDialog:function(){this.events.emit("ra.iframe.destroy");
d.close()
}}}
})
})
})(require,AJS.$);
AJS.toInit(function(a){(function(c,b){c(["ac/dialog","ac/dialog/dialog-factory","connect-host","host/_util"],function(g,h,f,e){var i="click",d=".ap-dialog",j=function(n,o){var m=f.webItemHelper.getOptionsForWebItem(o.bindTo),l=f.webItemHelper.getWebItemModuleKey(o.bindTo),k=f.webItemHelper.getWebItemPluginKey(o.bindTo),p=f.webItemHelper.getWebItemTargetKey(o.bindTo);
a.extend(o,m,{dialogModuleKey:p});
if(!o.ns){o.ns=e.addonToNs(k,l)
}if(!o.container){o.container=o.ns
}if(typeof o.chrome==="string"){o.chrome=(o.chrome.toLowerCase()==="false")?false:true
}if(o.chrome===undefined&&o.size!=="maximum"){o.chrome=true
}if(o.header){o.defaultHeader=o.header
}h({key:k,moduleKey:l},o,o.productContext)
};
f.webItemHelper.eventHandler(i,d,j)
})
})(require,AJS)
});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions', location = '/js/core/connect-host-inline-dialog.js' */
(function(b,a){b("ac/inline-dialog",["connect-host"],function(d){function f(i){return i.closest(".contents").data("inlineDialog")
}function c(i){f(i).show()
}function e(j,k,i){j.closest(".contents").css({width:k,height:i});
h(j)
}function h(i){f(i).refresh()
}function g(i){f(i).hide()
}d.extend(function(){return{init:function(j,i){if(i.uiParams.isInlineDialog){a(i.iframe).closest(".ap-container").on("resized",function(l,k){e(a(i.iframe),k.width,k.height)
})
}},internals:{hideInlineDialog:function(){g(a(this.iframe))
}}}
})
})
})(define,AJS.$);
(function(c,a,b){c("ac/inline-dialog/simple",["connect-host"],function(d){return function(k,h){var i;
if(!h.bindTo||!h.bindTo.jquery){return
}var g=h.bindTo.hasClass("ap-inline-dialog")?h.bindTo:h.bindTo.closest(".ap-inline-dialog");
var j=g.attr("id");
if(!j){return
}var e=function(p,n,m){n=b(n);
p.data("inlineDialog",i);
var o=d.webItemHelper.getWebItemPluginKey(n),l=d.webItemHelper.getWebItemModuleKey(n),q=window._AP.contentResolver.resolveByParameters({addonKey:o,moduleKey:l,isInlineDialog:true,productContext:h.productContext,uiParams:{isInlineDialog:true}});
q.done(function(r){p.empty().append(r);
if(h.width||h.height){p.css({width:h.width,height:h.height})
}}).fail(function(v,r,s){var u=b("<p class='title' />").text("Unable to load add-on content. Please try again later.");
p.html("<div class='aui-message error ap-aui-message'></div>");
p.find(".error").append(u);
var t=r+(s?": "+s.toString():"");
p.find(".error").text(t);
a.log(t)
}).always(function(){m()
})
};
var f="ap-inline-dialog-content-"+j;
i=b(document.getElementById("inline-dialog-"+f));
if(i.length!==0){i.remove()
}i=a.InlineDialog(h.bindTo,f,e,h);
return{id:i.attr("id"),show:function(){i.show()
},hide:function(){i.hide()
}}
}
})
})(define,AJS,AJS.$);
AJS.toInit(function(a){(function(c,b){c(["ac/inline-dialog/simple","connect-host"],function(d,h){var e=".ap-inline-dialog";
var f="click mouseover mouseout",g=function(j,k,l){var i=h.webItemHelper.getOptionsForWebItem(k.bindTo);
a.extend(k,i);
var m=k.onHover===true;
if(!m&&l!=="click"){return
}if(m&&k.bindTo.hasClass("active")){return
}d(j,k).show()
};
h.webItemHelper.eventHandler(f,e,g)
})
})(require,AJS)
});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions', location = '/js/core/connect-host-navigator.js' */
(function(a){a("ac/navigator-browser",[],function(){var c=function(){location.reload()
};
var b=function(d){document.location=d
};
return{reloadBrowserPage:c,goToUrl:b}
})
})(define);
(function(b,a){b("ac/navigator",["connect-host","ac/navigator-browser","_uritemplate"],function(m,f,d){var j=undefined;
var l=function(){throw new Error("context api not yet implemented for this product")
};
var e=function(o,n){if(!j){throw new Error("navigation api not yet implemented for this product")
}if(Object.getOwnPropertyNames(j).length===0){throw new Error("No routes defined")
}if(o in j){n=n||{};
if(typeof j[o]==="function"){j[o](n,f.goToUrl)
}else{if(typeof j[o]==="string"){f.goToUrl(h(j[o],n))
}}}else{throw new Error("The URL target "+o+" is not available. Valid targets are: "+Object.keys(j).toString())
}};
var c=function(){f.reloadBrowserPage()
};
var h=function(o,n){if(o.indexOf("/")!==0){o="/"+o
}return a.contextPath()+d.parse(o).expand(n)
};
var g=function(n){j=n
};
var k=function(n){if(typeof n==="function"){l=n
}else{throw new Error("invalid context function specified")
}};
var i=function(n){if(typeof n!=="function"){throw new Error("invalid callback function specified")
}n(l())
};
return{go:e,reload:c,setRoutes:g,getContext:i,setContextFunction:k}
})
})(define,AJS);
(function(m){var a=(function(){function n(o){this.options=o
}n.prototype.toString=function(){if(JSON&&JSON.stringify){return JSON.stringify(this.options)
}else{return this.options
}};
return n
}());
var i=(function(){function t(w){return Object.prototype.toString.apply(w)==="[object Array]"
}function q(w){return Object.prototype.toString.apply(w)==="[object String]"
}function v(w){return Object.prototype.toString.apply(w)==="[object Number]"
}function s(w){return Object.prototype.toString.apply(w)==="[object Boolean]"
}function r(x,z){var w="",A=true,y;
for(y=0;
y<x.length;
y+=1){if(A){A=false
}else{w+=z
}w+=x[y]
}return w
}function o(x,z){var w=[],y=0;
for(;
y<x.length;
y+=1){w.push(z(x[y]))
}return w
}function p(y,x){var w=[],z=0;
for(;
z<y.length;
z+=1){if(x(y[z])){w.push(y[z])
}}return w
}function n(x){if(typeof x!=="object"||x===null){return x
}Object.freeze(x);
var y,w;
for(w in x){if(x.hasOwnProperty(w)){y=x[w];
if(typeof y==="object"){u(y)
}}}return x
}function u(w){if(typeof Object.freeze==="function"){return n(w)
}return w
}return{isArray:t,isString:q,isNumber:v,isBoolean:s,join:r,map:o,filter:p,deepFreeze:u}
}());
var j=(function(){function p(q){return(q>="a"&&q<="z")||((q>="A"&&q<="Z"))
}function n(q){return q>="0"&&q<="9"
}function o(q){return n(q)||(q>="a"&&q<="f")||(q>="A"&&q<="F")
}return{isAlpha:p,isDigit:n,isHexDigit:o}
}());
var f=(function(){var n={encode:function(t){return unescape(encodeURIComponent(t))
},numBytes:function(t){if(t<=127){return 1
}else{if(194<=t&&t<=223){return 2
}else{if(224<=t&&t<=239){return 3
}else{if(240<=t&&t<=244){return 4
}}}}return 0
},isValidFollowingCharCode:function(t){return 128<=t&&t<=191
}};
function s(x){var t="",w=n.encode(x),u,v;
for(v=0;
v<w.length;
v+=1){u=w.charCodeAt(v);
t+="%"+(u<16?"0":"")+u.toString(16).toUpperCase()
}return t
}function r(t,u){return t.charAt(u)==="%"&&j.isHexDigit(t.charAt(u+1))&&j.isHexDigit(t.charAt(u+2))
}function q(t,u){return parseInt(t.substr(u,2),16)
}function p(v){if(!r(v,0)){return false
}var w=q(v,1);
var u=n.numBytes(w);
if(u===0){return false
}for(var t=1;
t<u;
t+=1){if(!r(v,3*t)||!n.isValidFollowingCharCode(q(v,3*t+1))){return false
}}return true
}function o(y,x){var w=y.charAt(x);
if(!r(y,x)){return w
}var v=q(y,x+1);
var u=n.numBytes(v);
if(u===0){return w
}for(var t=1;
t<u;
t+=1){if(!r(y,x+3*t)||!n.isValidFollowingCharCode(q(y,x+3*t+1))){return w
}}return y.substr(x,3*u)
}return{encodeCharacter:s,isPctEncoded:p,pctCharAt:o}
}());
var b=(function(){function n(q){return j.isAlpha(q)||j.isDigit(q)||q==="_"||f.isPctEncoded(q)
}function o(q){return j.isAlpha(q)||j.isDigit(q)||q==="-"||q==="."||q==="_"||q==="~"
}function p(q){return q===":"||q==="/"||q==="?"||q==="#"||q==="["||q==="]"||q==="@"||q==="!"||q==="$"||q==="&"||q==="("||q===")"||q==="*"||q==="+"||q===","||q===";"||q==="="||q==="'"
}return{isVarchar:n,isUnreserved:o,isReserved:p}
}());
var d=(function(){function o(u,v){var r="",s,t="";
if(typeof u==="number"||typeof u==="boolean"){u=u.toString()
}for(s=0;
s<u.length;
s+=t.length){t=u.charAt(s);
r+=b.isUnreserved(t)||(v&&b.isReserved(t))?t:f.encodeCharacter(t)
}return r
}function n(r){return o(r,true)
}function q(t,r){var s=f.pctCharAt(t,r);
if(s.length>1){return s
}else{return b.isReserved(s)||b.isUnreserved(s)?s:f.encodeCharacter(s)
}}function p(u){var r="",s,t="";
for(s=0;
s<u.length;
s+=t.length){t=f.pctCharAt(u,s);
if(t.length>1){r+=t
}else{r+=b.isReserved(t)||b.isUnreserved(t)?t:f.encodeCharacter(t)
}}return r
}return{encode:o,encodePassReserved:n,encodeLiteral:p,encodeLiteralCharacter:q}
}());
var h=(function(){var n={};
function o(p){n[p]={symbol:p,separator:(p==="?")?"&":(p===""||p==="+"||p==="#")?",":p,named:p===";"||p==="&"||p==="?",ifEmpty:(p==="&"||p==="?")?"=":"",first:(p==="+")?"":p,encode:(p==="+"||p==="#")?d.encodePassReserved:d.encode,toString:function(){return this.symbol
}}
}o("");
o("+");
o("#");
o(".");
o("/");
o(";");
o("?");
o("&");
return{valueOf:function(p){if(n[p]){return n[p]
}if("=,!@|".indexOf(p)>=0){return null
}return n[""]
}}
}());
function l(o){var n;
if(o===null||o===undefined){return false
}if(i.isArray(o)){return o.length>0
}if(typeof o==="string"||typeof o==="number"||typeof o==="boolean"){return true
}for(n in o){if(o.hasOwnProperty(n)&&l(o[n])){return true
}}return false
}var c=(function(){function n(o){this.literal=d.encodeLiteral(o)
}n.prototype.expand=function(){return this.literal
};
n.prototype.toString=n.prototype.expand;
return n
}());
var g=(function(){function o(w){var s,x=[],y=null,t=null,q=null,v,u="";
function r(){var z=w.substring(t,v);
if(z.length===0){throw new a({expressionText:w,message:"a varname must be specified",position:v})
}y={varname:z,exploded:false,maxLength:null};
t=null
}function p(){if(q===v){throw new a({expressionText:w,message:"after a ':' you have to specify the length",position:v})
}y.maxLength=parseInt(w.substring(q,v),10);
q=null
}s=(function(z){var A=h.valueOf(z);
if(A===null){throw new a({expressionText:w,message:"illegal use of reserved operator",position:v,operator:z})
}return A
}(w.charAt(0)));
v=s.symbol.length;
t=v;
for(;
v<w.length;
v+=u.length){u=f.pctCharAt(w,v);
if(t!==null){if(u==="."){if(t===v){throw new a({expressionText:w,message:"a varname MUST NOT start with a dot",position:v})
}continue
}if(b.isVarchar(u)){continue
}r()
}if(q!==null){if(v===q&&u==="0"){throw new a({expressionText:w,message:"A :prefix must not start with digit 0",position:v})
}if(j.isDigit(u)){if(v-q>=4){throw new a({expressionText:w,message:"A :prefix must have max 4 digits",position:v})
}continue
}p()
}if(u===":"){if(y.maxLength!==null){throw new a({expressionText:w,message:"only one :maxLength is allowed per varspec",position:v})
}if(y.exploded){throw new a({expressionText:w,message:"an exploeded varspec MUST NOT be varspeced",position:v})
}q=v+1;
continue
}if(u==="*"){if(y===null){throw new a({expressionText:w,message:"exploded without varspec",position:v})
}if(y.exploded){throw new a({expressionText:w,message:"exploded twice",position:v})
}if(y.maxLength){throw new a({expressionText:w,message:"an explode (*) MUST NOT follow to a prefix",position:v})
}y.exploded=true;
continue
}if(u===","){x.push(y);
y=null;
t=v+1;
continue
}throw new a({expressionText:w,message:"illegal character",character:u,position:v})
}if(t!==null){r()
}if(q!==null){p()
}x.push(y);
return new e(w,s,x)
}function n(v){var q,t,u=[],s=null,r=0;
for(q=0;
q<v.length;
q+=1){t=v.charAt(q);
if(r!==null){if(t==="}"){throw new a({templateText:v,message:"unopened brace closed",position:q})
}if(t==="{"){if(r<q){u.push(new c(v.substring(r,q)))
}r=null;
s=q
}continue
}if(s!==null){if(t==="{"){throw new a({templateText:v,message:"brace already opened",position:q})
}if(t==="}"){if(s+1===q){throw new a({templateText:v,message:"empty braces",position:s})
}try{u.push(o(v.substring(s+1,q)))
}catch(p){if(p.prototype===a.prototype){throw new a({templateText:v,message:p.options.message,position:s+p.options.position,details:p.options})
}throw p
}s=null;
r=q+1
}continue
}throw new Error("reached unreachable code")
}if(s!==null){throw new a({templateText:v,message:"unclosed brace",position:s})
}if(r<v.length){u.push(new c(v.substr(r)))
}return new k(v,u)
}return n
}());
var e=(function(){function q(w){return(JSON&&JSON.stringify)?JSON.stringify(w):w
}function t(x){if(!l(x)){return true
}if(i.isString(x)){return x===""
}if(i.isNumber(x)||i.isBoolean(x)){return false
}if(i.isArray(x)){return x.length===0
}for(var w in x){if(x.hasOwnProperty(w)){return false
}}return true
}function o(y){var w=[],x;
for(x in y){if(y.hasOwnProperty(x)){w.push({name:x,value:y[x]})
}}return w
}function r(y,w,x){this.templateText=y;
this.operator=w;
this.varspecs=x
}r.prototype.toString=function(){return this.templateText
};
function s(x,y,z){var w="";
z=z.toString();
if(y.named){w+=d.encodeLiteral(x.varname);
if(z===""){w+=y.ifEmpty;
return w
}w+="="
}if(x.maxLength!==null){z=z.substr(0,x.maxLength)
}w+=y.encode(z);
return w
}function n(w){return l(w.value)
}function v(y,z,A){var x=[],w="";
if(z.named){w+=d.encodeLiteral(y.varname);
if(t(A)){w+=z.ifEmpty;
return w
}w+="="
}if(i.isArray(A)){x=A;
x=i.filter(x,l);
x=i.map(x,z.encode);
w+=i.join(x,",")
}else{x=o(A);
x=i.filter(x,n);
x=i.map(x,function(B){return z.encode(B.name)+","+z.encode(B.value)
});
w+=i.join(x,",")
}return w
}function p(y,z,A){var x=i.isArray(A),w=[];
if(x){w=A;
w=i.filter(w,l);
w=i.map(w,function(C){var B=d.encodeLiteral(y.varname);
if(t(C)){B+=z.ifEmpty
}else{B+="="+z.encode(C)
}return B
})
}else{w=o(A);
w=i.filter(w,n);
w=i.map(w,function(B){var C=d.encodeLiteral(B.name);
if(t(B.value)){C+=z.ifEmpty
}else{C+="="+z.encode(B.value)
}return C
})
}return i.join(w,z.separator)
}function u(y,z){var x=[],w="";
if(i.isArray(z)){x=z;
x=i.filter(x,l);
x=i.map(x,y.encode);
w+=i.join(x,y.separator)
}else{x=o(z);
x=i.filter(x,function(A){return l(A.value)
});
x=i.map(x,function(A){return y.encode(A.name)+"="+y.encode(A.value)
});
w+=i.join(x,y.separator)
}return w
}r.prototype.expand=function(D){var z=[],A,x,C,w,B=false,y=this.operator;
for(A=0;
A<this.varspecs.length;
A+=1){x=this.varspecs[A];
C=D[x.varname];
if(C===null||C===undefined){continue
}if(x.exploded){B=true
}w=i.isArray(C);
if(typeof C==="string"||typeof C==="number"||typeof C==="boolean"){z.push(s(x,y,C))
}else{if(x.maxLength&&l(C)){throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+q(C))
}else{if(!x.exploded){if(y.named||!t(C)){z.push(v(x,y,C))
}}else{if(l(C)){if(y.named){z.push(p(x,y,C))
}else{z.push(u(y,C))
}}}}}}if(z.length===0){return""
}else{return y.first+i.join(z,y.separator)
}};
return r
}());
var k=(function(){function n(p,o){this.templateText=p;
this.expressions=o;
i.deepFreeze(this)
}n.prototype.toString=function(){return this.templateText
};
n.prototype.expand=function(q){var p,o="";
for(p=0;
p<this.expressions.length;
p+=1){o+=this.expressions[p].expand(q)
}return o
};
n.parse=g;
n.UriTemplateError=a;
return n
}());
m(k)
}(function(a){if(typeof define==="function"){define("_uritemplate",[],function(){return a
})
}else{if(typeof window!=="undefined"){window.UriTemplate=a
}else{global.UriTemplate=a
}}}));
(function(a){a(["connect-host","ac/navigator"],function(c,b){c.extend(function(){return{internals:{go:function(e,d){b.go(e,d)
},reload:function(){b.reload()
},getContext:function(d){b.getContext(d)
}},stubs:["go","reload","getContext"]}
})
})
}(require));;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-user', location = '/js/iframe/host/user.js' */
(function(a,c){var b;
c(function(e){return{init:function d(f){b=f
},internals:{getUser:function(){var f=AJS.Meta,g=f?f.get("remote-user-fullname"):null;
if(!g){g=a("a#header-details-user-fullname, .user.ajs-menu-title, a#user").text()
}if(!g){g=a("a#user-menu-link").attr("title")
}return{fullName:g,id:b.uid,key:b.ukey}
},getTimeZone:function(){return b.timeZone
}}}
})
})(AJS.$,_AP.extend);;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    output += '<div class="aui-nav-heading sidebar-section-header">' + soy.$$escapeHtml(opt_data.title) + '</div><ul class="aui-nav nav-links">';
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      output += navlinks.templates.appswitcher.applicationsItem(linkData8);
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.linkSection.soyTemplateName = 'navlinks.templates.appswitcher.linkSection';
}


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsItem';
}


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.shortcutsItem.soyTemplateName = 'navlinks.templates.appswitcher.shortcutsItem';
}


navlinks.templates.appswitcher.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.error.soyTemplateName = 'navlinks.templates.appswitcher.error';
}


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_ignored) {
  return '<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">' + soy.$$escapeHtml('Application Links') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">' + soy.$$escapeHtml('Shortcuts') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div></nav></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebarContents.soyTemplateName = 'navlinks.templates.appswitcher.sidebarContents';
}


navlinks.templates.appswitcher.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.trigger.soyTemplateName = 'navlinks.templates.appswitcher.trigger';
}


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-title">' + aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}) + '<div class="sidebar-project-name">' + soy.$$escapeHtml(opt_data.name) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.projectHeaderSection.soyTemplateName = 'navlinks.templates.appswitcher.projectHeaderSection';
}


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownList__soy74 = '' + navlinks.templates.appswitcher.dropdownList({list: opt_data.links});
  output += aui.dropdown2.dropdown2({menu: {id: opt_data.id, content: dropdownList__soy74, extraClasses: 'aui-style-default sidebar-customize-section'}, trigger: {showIcon: false, content: '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', container: '#app-switcher'}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.cogDropdown.soyTemplateName = 'navlinks.templates.appswitcher.cogDropdown';
}


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_ignored) {
  var output = '<ul class="sidebar-admin-links">';
  var linkList82 = opt_data.list;
  var linkListLen82 = linkList82.length;
  for (var linkIndex82 = 0; linkIndex82 < linkListLen82; linkIndex82++) {
    var linkData82 = linkList82[linkIndex82];
    output += '<li class="nav-link"><a href="' + soy.$$escapeHtml(linkData82.href) + '" title="' + soy.$$escapeHtml(linkData82.title) + '"><span class="nav-link-label">' + soy.$$escapeHtml(linkData82.label) + '</span></a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.dropdownList.soyTemplateName = 'navlinks.templates.appswitcher.dropdownList';
}


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    if (AJS.DarkFeatures.isEnabled('rotp.sidebar')) {
      var sidebarContents__soy97 = '' + navlinks.templates.appswitcher.sidebarContents(null);
      var triggerContent__soy99 = '' + navlinks.templates.appswitcher.trigger(null);
      output += navlinks.templates.appswitcher.sidebar({sidebar: {id: 'app-switcher', content: sidebarContents__soy97}, trigger: {showIcon: false, content: triggerContent__soy99}});
    } else {
      output += navlinks.templates.appswitcher_old.switcher(null);
    }
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}


navlinks.templates.appswitcher.sidebar = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" class="sidebar-trigger app-switcher-trigger" aria-owns="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" aria-haspopup="true" data-is-user-admin="' + soy.$$escapeHtml(false) + '" data-is-sidebar="true" >' + soy.$$filterNoAutoescape(opt_data.trigger.content) + '</a><div id=' + soy.$$escapeHtml(opt_data.sidebar.id) + ' class="app-switcher-sidebar aui-style-default sidebar-offscreen">' + soy.$$filterNoAutoescape(opt_data.sidebar.content) + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebar.soyTemplateName = 'navlinks.templates.appswitcher.sidebar';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.js' */
(function(e,a){var d="is-user-admin";var c="#app-switcher";a.SideBar=function(f){var g=this;this.$sidebar=null;f=e.extend({sidebarContents:null},f);this.getLinks=function(){return e.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateAppLinks).fail(this.showAppSwitcherError)};this.populateProjectHeader=function(i,h){g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").after(navlinks.templates.appswitcher.projectHeaderSection({avatarUrl:h,name:i}))};this.getProjectData=function(){var h=e(".project-shortcut-dialog-trigger"),i=h.data("key"),j=h.data("entity-type");if(h.size()==0||!i||!j){e(".app-switcher-shortcuts").remove();return}var l,k;k=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+i,cache:false,data:{entityType:j},dataType:"json"});l=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+i,cache:false,data:{entityType:j},dataType:"json"});e.when(k,l).then(function(n,m){g.updateProjectShortcuts(n,m,{key:i,entityType:j,name:h.data("name"),avatarUrl:h.find("img").prop("src")})},g.showProjectShortcutsError)};this.getSidebar=function(){if(!this.$sidebar){this.$sidebar=e(f.sidebarContents)}return this.$sidebar};this.addApplicationsCog=function(){e(".app-switcher-applications .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-applications-admin-dropdown",links:[{href:AJS.contextPath()+"/plugins/servlet/customize-application-navigator",label:"Customize navigator",title:"Add new entries, hide existing or restrict who sees what"},{href:AJS.contextPath()+"/plugins/servlet/applinks/listApplicationLinks",label:"Manage application links",title:"Link to more Atlassian applications"}]}))};this.addProjectShortcutsCog=function(h,j){var i=[{href:AJS.contextPath()+"/plugins/servlet/custom-content-links-admin?entityKey="+h,label:"Customize shortcuts",title:""}];if(g.entityMappings[j]){i.push({href:g.generateEntityLinksUrl(h,g.entityMappings[j]),label:"Manage product links",title:""})}g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-project-shortcuts-admin-dropdown",links:i}))};this.updateAppLinks=function(h){e(function(){g.getSidebar().find(".app-switcher-applications").html(navlinks.templates.appswitcher.linkSection({title:"Application Links",list:h}));if(g.getSidebar().data(d)){g.addApplicationsCog()}g.bindAnalyticsHandlers(g.getSidebar(),h)})};this.updateProjectShortcuts=function(k,i,j){var l=k[0].shortcuts,h=i[0].shortcuts;g.getSidebar().find(".app-switcher-shortcuts").html(navlinks.templates.appswitcher.linkSection({title:"Shortcuts",list:l.concat(h)}));if(g.getSidebar().data(d)){g.addProjectShortcutsCog(j.key,j.entityType)}g.populateProjectHeader(j.name,j.avatarUrl);g.bindAnalyticsHandlers(g.getSidebar(),data)};this.entityMappings={"confluence.space":"com.atlassian.applinks.api.application.confluence.ConfluenceSpaceEntityType","jira.project":"com.atlassian.applinks.api.application.jira.JiraProjectEntityType","bamboo.project":"com.atlassian.applinks.api.application.bamboo.BambooProjectEntityType","stash.project":"com.atlassian.applinks.api.application.stash.StashProjectEntityType"};this.generateEntityLinksUrl=function(h,i){if(i===g.entityMappings["confluence.space"]){return AJS.contextPath()+"/spaces/listentitylinks.action?typeId="+i+"&key="+h}else{return AJS.contextPath()+"/plugins/servlet/applinks/listEntityLinks/"+i+"/"+h}};this.showAppSwitcherError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-applications .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.showProjectShortcutsError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-shortcuts .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.retryLoading=function(h){this.getSidebar().html(navlinks.templates.appswitcher.sidebarContents());this.getLinks();this.getProjectData();h&&h.stopPropagation()};this.bindAnalyticsHandlers=function(h,i){};this.getLinks();e(this.getProjectData);this.toggleSidebar=function(j){var k=g.getSidebar(),i=e("body"),h=e(window.document);if(!i.hasClass("app-switcher-open")){var m=e("#header");k.css("left",-k.width());k.parent("body").length||k.appendTo("body");b({data:k});k.animate({left:0},300);function l(n){var p=n.target&&e(n.target),o=n.keyCode;if(n.originalEvent===j.originalEvent){return}if(p&&!o&&!(p.closest(k).length||p.closest(m).length)&&j.which==1&&!(n.shiftKey||n.ctrlKey||n.metaKey)){g.toggleSidebar()}else{if(o===27){g.toggleSidebar()}}}h.on("click.appSwitcher",l);h.on("keydown.appSwitcher",l);h.on("scroll.appSwitcher",k,b)}else{h.off(".appSwitcher")}i.toggleClass("app-switcher-open")};e("#header").on("click",".app-switcher-trigger",this.toggleSidebar)};function b(h){var f=e(document).scrollTop(),i=e("#header"),g=(i.height()+i.offset().top)-f;if(g>=0){h.data.css({top:g,position:"fixed"})}else{h.data.css({top:0,left:0,position:"fixed"})}}e(function(){if(e(c).data("is-sidebar")===true){new a.SideBar({sidebarContents:c})}})}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.js' */
var APPSWITCHER_TRIGGER_CLICK="appswitcher.trigger.click";var APPSWITCHER_DROPDOWN_SHOW="appswitcher.dropdown.show";var APPSWITCHER_DROPDOWN_DISPLAY_ERROR="appswitcher.dropdown.display.error";var APPSWITCHER_APP_LINK_CLICK="appswitcher.app.link.click";var APPSWITCHER_CONFIGURE_LINK_CLICK="appswitcher.configure.link.click";(function(c,f){var b="isAppSuggestionAvailable";var d="isSiteAdminUser";var e="isUserAdmin";var a="#app-switcher";f.AppSwitcher=function(j){var l=AJS.contextPath()+"/plugins/servlet/customize-application-navigator";var k="unified.usermanagement";var m=this;this.$dropdown=null;j=c.extend({dropdownContents:null},j);this.getLinks=function(){return c.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){if(!this.$dropdown){this.$dropdown=c(j.dropdownContents);this.envData=this.$dropdown.data("environment")}return this.$dropdown};this.updateDropdown=function(n){c(function(){m.getDropdown().html(navlinks.templates.appswitcher_old.applications({apps:n,showAdminLink:m.envData[e],adminLink:l}));m.bindAnalyticsHandlers();if(m.envData[b]===true){m.handleSuggestionApps(n)}})};this.bindAnalyticsHandlers=function(){c(".app-switcher-trigger").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_TRIGGER_CLICK})});c("#app-switcher").on("aui-dropdown2-show",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_SHOW})});c("#app-switcher .nav-link").on("click",function(){var p="custom";var q=c(this).find("a");var o=q.attr("href");var n=window.location.hostname;if(o&&o.indexOf("bitbucket.org")>-1){p="bitbucket-cloud"}else{if(o.indexOf(n+"/wiki")>-1){p="confluence"}else{if(o.indexOf(n+"/build")>-1){p="bamboo"}else{if(o.indexOf(n)>-1){p="jira"}}}}AJS.trigger("analyticsEvent",{name:APPSWITCHER_APP_LINK_CLICK,data:{product:p}})});c(".nav-link-edit-wrapper").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_CONFIGURE_LINK_CLICK})})};this.isBillingSystemEnabled=function(){return(this.envData[d]===true)&&AJS.DarkFeatures.isEnabled(k)};this.handleSuggestionApps=function(q){var r=_.map(q,function(s){return s.applicationType.toLowerCase()});var o=c("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");o.html(navlinks.templates.appswitcher_old.suggestionApps);var p=o.find(".suggestion-apps");var n=false;_.each(g,function(s){if(!_.contains(r,s.appName)){n=true;p.append(navlinks.templates.appswitcher_old.suggestionApp({suggestionApp:s,isBillingSystemEnabled:m.isBillingSystemEnabled()}))}});if(!n){return}c("#app-switcher").append(o);c(".app-discovery-suggestion-app").click(function(){var t=c(this).find("a");var s;if(m.envData[d]===true){s="appswitcher.discovery.siteadmin.select.inproduct."}else{s="appswitcher.discovery.user.select."}s=s+t.attr("id").toLowerCase();AJS.trigger("analytics",{name:s})});c(".app-discovery-suggestion-app").hover(function(){c(this).find("a").removeClass("active").removeClass("aui-dropdown2-active")});c(".app-discovery-cancel-button").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.nothanks.button.click"});i(h,"true");o.remove()})};this.showError=function(){c(function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_DISPLAY_ERROR});m.getDropdown().html(navlinks.templates.appswitcher_old.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(m.retryLoading,m))})};this.retryLoading=function(n){this.getDropdown().html(navlinks.templates.appswitcher_old.loading());this.getLinks();n&&n.stopPropagation()};this.getLinks()};var h="key-no-thanks";var g=[{appName:"jira",appDesc:"Issue & Project Tracking Software",discoveryUrl:"https://www.atlassian.com/software/jira",billingSystemDiscoveryUrl:"/admin/billing/addapplication"},{appName:"confluence",appDesc:"Collaboration and content sharing",discoveryUrl:"https://www.atlassian.com/software/confluence",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=confluence.ondemand"},{appName:"bamboo",appDesc:"Continuous integration",discoveryUrl:"https://www.atlassian.com/software/bamboo",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=bamboo.ondemand"}];var i=function(j,k){c.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:j,value:k})})};c(function(){if(c(a).data("is-switcher")===true){new f.AppSwitcher({dropdownContents:a})}})}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.soy' */
// This file was automatically generated from appswitcher_old.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher_old.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher_old == 'undefined') { navlinks.templates.appswitcher_old = {}; }


navlinks.templates.appswitcher_old.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher_old.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applications.soyTemplateName = 'navlinks.templates.appswitcher_old.applications';
}


navlinks.templates.appswitcher_old.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param19 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList27 = opt_data.list;
    var linkListLen27 = linkList27.length;
    for (var linkIndex27 = 0; linkIndex27 < linkListLen27; linkIndex27++) {
      var linkData27 = linkList27[linkIndex27];
      param19 += navlinks.templates.appswitcher_old.applicationsItem(soy.$$augmentMap(linkData27, {showDescription: opt_data.showDescription}));
    }
    param19 += '</ul>';
    output += aui.dropdown2.section({content: param19});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsSection';
}


navlinks.templates.appswitcher_old.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsItem';
}


navlinks.templates.appswitcher_old.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape('Configure\x26hellip;') + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.adminSection.soyTemplateName = 'navlinks.templates.appswitcher_old.adminSection';
}


navlinks.templates.appswitcher_old.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.error.soyTemplateName = 'navlinks.templates.appswitcher_old.error';
}


navlinks.templates.appswitcher_old.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.loading.soyTemplateName = 'navlinks.templates.appswitcher_old.loading';
}


navlinks.templates.appswitcher_old.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.trigger.soyTemplateName = 'navlinks.templates.appswitcher_old.trigger';
}


navlinks.templates.appswitcher_old.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    var loadingContent__soy81 = '' + navlinks.templates.appswitcher_old.loading(null);
    var triggerContent__soy83 = '' + navlinks.templates.appswitcher_old.trigger(null);
    output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy81, extraClasses: 'aui-style-default', extraAttributes: {'data-environment': {}, 'data-is-switcher': 'true'}}, trigger: {showIcon: false, content: triggerContent__soy83, extraClasses: 'app-switcher-trigger', extraAttributes: {href: '#app-switcher'}}});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.switcher.soyTemplateName = 'navlinks.templates.appswitcher_old.switcher';
}


navlinks.templates.appswitcher_old.suggestionApp = function(opt_data, opt_ignored) {
  var output = '';
  var href__soy89 = opt_data.isBillingSystemEnabled == true ? opt_data.suggestionApp.billingSystemDiscoveryUrl : opt_data.suggestionApp.discoveryUrl;
  output += '<li class="app-discovery-suggestion-app"><a id="' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '" href="' + soy.$$escapeHtml(href__soy89) + '" class="app-discovery-link aui-icon-container app-discovery-' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '-product-icon" title="' + soy.$$escapeHtml(href__soy89) + '" target="_blank"/><div class="app-discovery-small">' + soy.$$escapeHtml(opt_data.suggestionApp.appDesc) + '</div></li>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApp.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApp';
}


navlinks.templates.appswitcher_old.suggestionApps = function(opt_data, opt_ignored) {
  return '<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>' + soy.$$escapeHtml('Try other Atlassian apps') + '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>' + soy.$$escapeHtml('Don\x27t show this again') + '</button></div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApps.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApps';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:time-zone-onboarding', location = '/static/bitbucket/internal/feature/timezone/onboarding/timezone-onboarding.js' */
define("bitbucket/internal/feature/timezone/onboarding/timezone-onboarding","module exports aui jquery bitbucket/util/navbuilder bitbucket/internal/feature/alerts/alerts bitbucket/internal/model/page-state bitbucket/internal/util/ajax bitbucket/internal/util/client-storage bitbucket/internal/util/events bitbucket/internal/util/feature-enabled".split(" "),function(p,c,q,r,t,u,v,w,x,y,z){function d(a){A.default.trigger("bitbucket.internal.ui.time.zone.onboarding."+a)}function B(){d("changed");h()}function b(a){return a((new Date).getTimezoneOffset())}
function C(){var a=e.default.getItem("bitbucket_known_time_zone_offset");return a?String(a):null}function D(){var a=k.default.getCurrentUser();return a?l.default.rest({url:f.default.rest().users(a.getSlug()).addPathComponents("settings").build(),type:"GET",statusCode:{"*":!1}}).then(function(a){a=String(a.USER_BROWSER_TIME_ZONE_OFFSET);e.default.setItem("bitbucket_known_time_zone_offset",a);return null!=a?a:null}):m.default.Deferred().reject().promise()}function h(){var a={};a.USER_BROWSER_TIME_ZONE_OFFSET=
b(String);return l.default.rest({url:f.default.rest().users(k.default.getCurrentUser().getSlug()).addPathComponents("settings").build(),type:"POST",data:a,statusCode:{"*":!1}}).done(function(){e.default.setItem("bitbucket_known_time_zone_offset",a.USER_BROWSER_TIME_ZONE_OFFSET)})}Object.defineProperty(c,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(q),m=babelHelpers.interopRequireDefault(r),f=babelHelpers.interopRequireDefault(t),k=babelHelpers.interopRequireDefault(v),l=babelHelpers.interopRequireDefault(w),
e=babelHelpers.interopRequireDefault(x),A=babelHelpers.interopRequireDefault(y),n;babelHelpers.interopRequireDefault(z).default.getFromProvider("user.time.zone.onboarding").done(function(a){n=a});c.default={onReady:function(){if(n&&b(Number)!==Number((0,m.default)("#content").attr("data-timezone"))&&C()!==b(String))return D().done(function(a){a!==b(String)&&(d("shown"),(0,u.add)({title:"Let\u0027s synchronize watches",description:"It looks like your Bitbucket and browser time zones don\u0027t match.",
closeable:!0,closeCallback:function(){d("dismissed");h()},anchorText:"Change time zone",anchorLink:f.default.newBuilder("account").build(),anchorCallback:B,type:"info"}))})}};p.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:time-zone-onboarding', location = '/static/bitbucket/internal/feature/timezone/onboarding/timezone-onboarding-init.js' */
jQuery(function(){require("bitbucket/internal/feature/timezone/onboarding/timezone-onboarding").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:integrity-check-alert', location = '/static/bitbucket/internal/feature/integrity/alert.js' */
define("bitbucket/internal/feature/integrity/alert",["exports","aui","bitbucket/util/navbuilder","bitbucket/internal/feature/alerts/alerts","bitbucket/internal/util/ajax"],function(a,f,g,h,k){Object.defineProperty(a,"__esModule",{value:!0});a.init=function(a){if(a&&0!==a.length){var b=void 0,c=void 0;switch(a[0]){case "acknowledged":return;case "started":c=d.INFO;b=e.STARTED;break;case "inconsistency":if("started"===a[1])c=d.WARN,b=e.INCONSISTENT;else return;break;case "completed":"inconsistency"===
a[1]?(c=d.WARN,b=e.INCONSISTENT_COMPLETED):(c=d.INFO,b=e.COMPLETED);break;default:console.warn("Could not identify integrity checks state.",a);return}a=babelHelpers.extends({type:c,closeCallback:function(){l.default.rest({url:m.default.newBuilder("admin").addPathComponents("integrity-check","acknowledge").build(),type:"POST"})}},b);(0,h.add)(a);return a}};a=babelHelpers.interopRequireDefault(f);var m=babelHelpers.interopRequireDefault(g),l=babelHelpers.interopRequireDefault(k),d={INFO:"info",WARN:"warning"},
e={STARTED:{closeable:!1,title:"Integrity checks are running",description:"Check the application logs for further information."},INCONSISTENT:{closeable:!1,title:"Integrity checks are running and some inconsistencies were found",description:"Check the application logs for further information."},COMPLETED:{closeable:!0,title:"Integrity checks are complete",
description:"Check the application logs for further information."},INCONSISTENT_COMPLETED:{closeable:!0,title:"Integrity checks are complete and some inconsistencies were found",description:"Check the application logs for information on any restore actions carried out."}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:integrity-check-alert', location = '/static/bitbucket/internal/feature/integrity/alert.soy' */
// This file was automatically generated from alert.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.notification.alert.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.notification == 'undefined') { bitbucket.notification = {}; }
if (typeof bitbucket.notification.alert == 'undefined') { bitbucket.notification.alert = {}; }


bitbucket.notification.alert.bitbucketIntegrityCheckRunning = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.integrityCheckState) ? '<script type="text/javascript">require(\'bitbucket/internal/feature/integrity/alert\').init(' + soy.$$filterNoAutoescape(JSON.stringify(opt_data.integrityCheckState).replace(/\//g, '\\/')) + ');<\/script>' : '');
};
if (goog.DEBUG) {
  bitbucket.notification.alert.bitbucketIntegrityCheckRunning.soyTemplateName = 'bitbucket.notification.alert.bitbucketIntegrityCheckRunning';
}
;
;
/* module-key = 'de.communardo.plugin.stash-project-categories:project-category-resources', location = '/js/jquery.viewport.js' */
(function(a){a.belowthefold=function(c,d){var b=a(window).height()+a(window).scrollTop();return b<=a(c).offset().top-d.threshold};a.abovethetop=function(b,c){var d=a(window).scrollTop();return d>=a(b).offset().top+a(b).height()-c.threshold};a.rightofscreen=function(c,d){var b=a(window).width()+a(window).scrollLeft();return b<=a(c).offset().left-d.threshold};a.leftofscreen=function(b,c){var d=a(window).scrollLeft();return d>=a(b).offset().left+a(b).width()-c.threshold};a.inviewport=function(b,c){return !a.rightofscreen(b,c)&&!a.leftofscreen(b,c)&&!a.belowthefold(b,c)&&!a.abovethetop(b,c)};a.extend(a.expr[":"],{"below-the-fold":function(c,d,b){return a.belowthefold(c,{threshold:0})},"above-the-top":function(c,d,b){return a.abovethetop(c,{threshold:0})},"left-of-screen":function(c,d,b){return a.leftofscreen(c,{threshold:0})},"right-of-screen":function(c,d,b){return a.rightofscreen(c,{threshold:0})},"in-viewport":function(c,d,b){return a.inviewport(c,{threshold:0})}})})(jQuery);;
;
/* module-key = 'de.communardo.plugin.stash-project-categories:project-category-resources', location = '/js/project-categories.js' */
function containsOnly(b,a){return b.textContent.trim().toUpperCase()==a.trim().toUpperCase()}jQuery.expr[":"].containsOnly=jQuery.expr.createPseudo?jQuery.expr.createPseudo(function(a){return function(b){return containsOnly(b,a)}}):function(c,b,a){return containsOnly(c,a[3])};(function(d){function c(g){var k=decodeURIComponent(window.location.search.substring(1)),j=k.split("&"),l,h;for(h=0;h<j.length;h++){l=j[h].split("=");if(l[0]===g){return l[1]===undefined?true:l[1]}}}function a(){var h=window.location.pathname.substring(AJS.contextPath().length);var g=h.lastIndexOf("/");if(g!=-1&&g===h.length-1){h=h.substring(0,g)}if(h.indexOf("/mvc/")===0){h=h.substring(4)}return h}var b={currentPage:a(),currentPageIsProjectsList:function(){AJS.log(b.currentPage);return b.currentPage=="/projects"&&window.location.search==""},currentPageIsRepositoriesList:function(){AJS.log(b.currentPage);return b.currentPage.match(/^\/projects\/[^\/]+$/)||b.currentPage.match(/^\/users\/[^\/]+$/)||b.currentPageIsPublicReposPage()||b.currentPage==="/profile"},currentPageIsPublicReposPage:function(){return b.currentPage==="/repos"},currentPageIsProjectSettings:function(){return !!AJS.$("form.project-settings").length},currentPageIsRepositorySettings:function(){return !!AJS.$(".stash-repository-edit-settings-form").length},Controller:function(){function g(w,u){var v,t;if(w!=undefined){if(w==="all"||w==="none"){return true}for(v=0,t=u.length;v<t;v++){if(u[v].id==w){return true}}}return false}function s(t){l(t)}function l(t){if(AJS.$("#tabs-element-categories").length){return}q(t,communardoCategories)}function q(z,y){var t=AJS.$("#projects-table");if(y.length==0){t.show()}else{y.sort(function(D,C){if(D.title<C.title){return -1}if(D.title>C.title){return 1}return 0});var A=undefined;if(z=="project"){A="SPC-SELECTED-CATEGORY"}else{if(j()){A="SPC-SELECTED-CATEGORY-"+j()}else{if(b.currentPageIsPublicReposPage()){A="SPC-SELECTED-CATEGORY-PUBLIC"}}}var B=typeof A!="undefined"?AJS.Cookie.read(A):undefined;if(!g(B,y)){B="all"}var x=AJS.$(Communardo.Plugin.Categories.list({type:z,categories:y,selectedCategory:B}));if(typeof A!="undefined"){x.find("ul.tabs-menu li.menu-item a").click(function(C){var D=AJS.$(C.currentTarget).data("spc-id");AJS.Cookie.save(A,D)})}x.find("input.search-field").keyup(n);jQuery("#content .aui-page-panel-content").append(x);AJS.tabs.setup();var w=AJS.$("#tabs-element-categories");w.find(".menu-item a:not([data-spc-id=all]):not([data-spc-id=none])").click(function(){var C=jQuery(this).text();if(z=="project"){h(jQuery(jQuery(this).attr("href")),AJS.contextPath()+"/rest/categories/latest/projects",{project:jQuery("#category-filter-bar .text.search-field").val(),category:C})}else{if(z=="repository"){o(jQuery(jQuery(this).attr("href")),AJS.contextPath()+"/rest/categories/latest/repositories",{category:C,repository:jQuery("#category-filter-bar .text.search-field").val(),projectkey:j(),visibility:b.currentPageIsPublicReposPage()?"public":""})}}});w.find(".menu-item a[data-spc-id=none]").click(function(){var C=jQuery(this);if(z=="project"){h(jQuery(jQuery(this).attr("href")),AJS.contextPath()+"/rest/categories/latest/uncategorizedprojects",{project:jQuery("#category-filter-bar .text.search-field").val()})}else{if(z=="repository"){o(jQuery(jQuery(this).attr("href")),AJS.contextPath()+"/rest/categories/latest/uncategorizedrepositories",{repository:jQuery("#category-filter-bar .text.search-field").val(),projectkey:j(),visibility:b.currentPageIsPublicReposPage()?"public":""})}}});w.find(".menu-item a[data-spc-id=all]").click(function(){if(z=="project"){h(jQuery(jQuery(this).attr("href")),AJS.contextPath()+"/rest/categories/latest/projects",{project:jQuery("#category-filter-bar .text.search-field").val()})}else{if(z=="repository"){if(b.currentPageIsPublicReposPage()){o(jQuery(jQuery(this).attr("href")),AJS.contextPath()+"/rest/api/1.0/repos",{visibility:"public",name:jQuery("#category-filter-bar .text.search-field").val()},function(C){return d.map(C.values,function(D){return{repositoryName:D.name,repositoryId:D.id,repositorySlug:D.slug,projectKey:D.project.key,projectName:D.project.name,projectId:D.project.id}})})}else{o(jQuery(jQuery(this).attr("href")),AJS.contextPath()+"/rest/categories/latest/repositories",{projectkey:j(),repository:jQuery("#category-filter-bar .text.search-field").val()})}}}});w.find(".menu-item.active-tab a").click();function u(D){if(D.result&&D.result.length==0){var C=w.find(".menu-item a[data-spc-id=none]");C.parent().hide();if(C.parent().hasClass("active-tab")){w.find(".menu-item a[data-spc-id=all]").click()}}}if(z=="project"){h(jQuery("<div/>"),AJS.contextPath()+"/rest/categories/latest/uncategorizedprojects",{},function(C){u(C);return C.result})}else{if(z=="repository"){o(jQuery("<div/>"),AJS.contextPath()+"/rest/categories/latest/uncategorizedrepositories",{projectkey:j(),visibility:b.currentPageIsPublicReposPage()?"public":""},function(C){u(C);return C.result})}}var v=c("selectedCategory");if(v&&v.length>0){jQuery("#tabs-element-categories li[data-spc-title="+v+"] a").click()}w.fadeIn("fast");if(!w.find("li.menu-item.active-tab").length){AJS.tabs.change(AJS.$('a[href="#tabs-category-all"]'))}w.find("div.tabs-pane").css("min-height",w.find("ul.tabs-menu").height())}AJS.$("script#spc_category_wrapper").parent(".aui-item").addBack().remove()}function h(w,t,C,B){var y=AJS.$(Communardo.Plugin.Categories.emptyprojecttable());w.html(y.hide());var A=AJS.$('<div class="spc-spinner" />').insertBefore(y).spin("large");var z=w.find("table tbody");var x=50;function u(E,D){y.addClass("loading");jQuery.ajax({url:t,type:"GET",dataType:"json",contentType:"application/json",cache:false,data:jQuery.extend({start:E,limit:D},C),success:function(F){var G=[];if(B){G=B(F)}else{G=F.result}jQuery.each(G,function(I,J){var H=AJS.$(Communardo.Plugin.Categories.projecttableentry({projectKey:J.projectKey,projectName:J.projectName,projectDescription:J.projectDescription}));z.append(H)});if(G.length<x){y.addClass("completely-loaded")}y.removeClass("loading");y.show();A.remove();v()}})}function v(){if(!y.hasClass("completely-loaded")&&!y.hasClass("loading")&&z.find("tr:last").is(":in-viewport")){u(z.children().length,x)}}d(document).scroll(v);u(0,x)}function o(y,t,C,B){var x=AJS.$(Communardo.Plugin.Categories.emptyrepositorytable());y.html(x.hide());var A=AJS.$('<div class="spc-spinner" />').insertBefore(x).spin("large");var w=y.find("table tbody");var z=20;function u(E,D){x.addClass("loading");jQuery.ajax({type:"GET",url:t,cache:false,data:jQuery.extend({start:E,limit:D},C),success:function(F){var G=[];if(B){G=B(F)}else{G=F.result}jQuery.each(G,function(H,I){I.viewMode=C.visibility;var J=AJS.$(Communardo.Plugin.Categories.repositorytableentry(I));w.append(J)});if(G.length<z){x.addClass("completely-loaded")}x.removeClass("loading");x.show();A.remove();v()}})}function v(){if(!x.hasClass("completely-loaded")&&!x.hasClass("loading")&&w.find("tr:last").is(":in-viewport")){u(w.children().length,z)}}d(document).scroll(v);u(0,z)}function k(u){var v=AJS.$("#content");v.find("form ").removeClass("prevent-double-submit");var t=AJS.$(Communardo.Plugin.Categories.settings({type:u,categories:i(u)}));v.find("form > .field-group:last").after(t);var w=AJS.$("#bitbucket-"+u+"-categories-settings-search");w.auiSelect2({tags:function(){return p.call(w,u)},tokenSeparators:[","," "],minimumInputLength:2,openOnEnter:false,id:function(x){return x.id.toLowerCase()}})}function n(u){var t=u.currentTarget.value.toLowerCase();var v=AJS.$("#tabs-element-categories .menu-item.active-tab a").click()}function p(v){var t=[];var u=this.select2("container").find("input[type=text].select2-input").val();if(u===undefined||u.length==0){return t}jQuery.ajax({type:"GET",url:AJS.contextPath()+"/rest/categories/latest/categories?uniqueRequestTime="+new Date().getTime(),dataType:"json",data:{type:v,query:u},async:false,cache:false}).done(function(w){var y=w.suggestions;for(var x=0;x<y.length;x++){t.push(y[x].title)}});return t}function i(u){if(!j()||(u!="project"&&!r())){return""}var v=u=="project"?"/project/"+j():"/project/"+j()+"/repository/"+r();var t=[];jQuery.ajax({type:"GET",url:AJS.contextPath()+"/rest/categories/latest"+v+"?uniqueRequestTime="+new Date().getTime(),dataType:"json",async:false,cache:false}).done(function(w){var y=w.result.categories;for(var x=0;x<y.length;x++){t.push(y[x].title)}});return t.join()}function j(){var t=b.currentPage.match(/\/projects\/([^\/]+).*/);if(t){return t[1]}else{if(b.currentPage=="/profile"){return AJS.$(".user-detail.username").length?"~"+AJS.$(".user-detail.username").text().trim():undefined}else{t=b.currentPage.match(/\/users\/([^\/]+).*/);return t?"~"+t[1]:undefined}}}function r(){var t=b.currentPage.match(/\/(?:projects|users)\/([^\/]+)\/repos\/([^\/]+)\/.*/);return t?t[2]:undefined}return{initProjectsList:function(){s("project")},initRepositoriesList:function(){s("repository")},initProjectSettings:function(){k("project")},initRepositorySettings:function(){k("repository")},initRepositoryLinkExtender:function(){m()}};function m(){function t(v){var u=[];if(v.length==0){return}v.each(function(){jQuery(this).addClass("categoryfied");var w=jQuery(this).attr("data-repository-id");if(jQuery.inArray(w,u)==-1){u.push(w)}});jQuery.ajax({url:AJS.contextPath()+"/rest/categories/latest/repositorycategories",data:{repositoryid:u},cache:false,type:"GET",success:function(w){jQuery.each(w.result,function(x,y){v.each(function(){var z=jQuery(this);if(z.attr("data-repository-id")==y.repositoryId){jQuery.each(y.categories,function(B,A){z.after(jQuery('<a class="spc-categorylink" href="'+AJS.contextPath()+"/projects/"+y.projectKey+"?selectedCategory="+A.title+'"><span class="aui-lozenge aui-lozenge-complete aui-lozenge-subtle">'+A.title+"</span></a>").fadeIn())})}})})}})}setInterval(function(){t(d("#dashboard-repo-list").find(".repository:not(.categoryfied)"))},500)}}};require("bitbucket/internal/util/events").on("bitbucket.internal.widget.pagedscrollable.dataLoaded",function(j,g,i){var h;if(this.$table){h=this.$table.attr("id");if(h==="projects-table"||h==="repositories-table"){projectsTableHandler=this;if(typeof(communardoCategories)!="undefined"&&communardoCategories.length>0){this.options.autoLoad=false;this.$table.hide()}}}});function e(h,g){h.remove();g.remove()}function f(){if(typeof(communardoCategories)!="undefined"&&communardoCategories.length>0){var h=jQuery("#projects-container");var g=jQuery("#repositories-container");if(!g.length){g=jQuery("#repository-container")}h.hide();g.hide();jQuery.getJSON(AJS.contextPath()+"/rest/api/1.0/application-properties",function(i){var j=i.buildNumber;if(j>=5006000){e(h,g)}else{if(h){h.show()}if(g){g.show()}}})}}AJS.toInit(function(){var g=new b.Controller();if(b.currentPageIsProjectsList()){AJS.log("projectspage");g.initProjectsList()}if(b.currentPageIsProjectSettings()){g.initProjectSettings()}if(b.currentPageIsRepositoriesList()){AJS.log("repositorypage");g.initRepositoriesList()}if(b.currentPageIsRepositorySettings()){g.initRepositorySettings()}g.initRepositoryLinkExtender();f()});if(typeof Communardo=="undefined"){Communardo={}}if(typeof Communardo.Plugin=="undefined"){Communardo.Plugin={}}if(typeof Communardo.Plugin.Categories=="undefined"){Communardo.Plugin.Categories=b}})(AJS.$);;
;
/* module-key = 'de.communardo.plugin.stash-project-categories:project-category-resources', location = '/templates/project-list.soy' */
// This file was automatically generated from project-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Communardo.Plugin.Categories.
 */

if (typeof Communardo == 'undefined') { var Communardo = {}; }
if (typeof Communardo.Plugin == 'undefined') { Communardo.Plugin = {}; }
if (typeof Communardo.Plugin.Categories == 'undefined') { Communardo.Plugin.Categories = {}; }


Communardo.Plugin.Categories.list = function(opt_data, opt_ignored) {
  var output = '<div id="category-filter-bar">';
  var placeholder__soy4 = '' + ((opt_data.type == 'project') ? soy.$$escapeHtml('Filter Projects') : soy.$$escapeHtml('Filter Repositories'));
  output += '<form class="aui" onsubmit="return false;"><input type="text" class="text search-field" placeholder="' + soy.$$escapeHtml(placeholder__soy4) + '" /></form></div><div class="aui-tabs vertical-tabs" id="tabs-element-categories" style="display:none;"><ul class="tabs-menu"><li class="menu-item' + ((opt_data.selectedCategory == 'all') ? ' active-tab' : '') + '" id="tabs-menu-all"><a href="#tabs-category-all" data-spc-id="all"><strong>' + ((opt_data.type == 'project') ? soy.$$escapeHtml('All Projects') : soy.$$escapeHtml('All Repositories')) + '</strong></a></li><li class="menu-item' + ((opt_data.selectedCategory == 'none') ? ' active-tab' : '') + '"><a href="#tabs-category-none" data-spc-id="none"><strong>' + ((opt_data.type == 'project') ? soy.$$escapeHtml('Uncategorized Projects') : soy.$$escapeHtml('Uncategorized Repositories')) + '</strong></a></li>';
  var categoryList33 = opt_data.categories;
  var categoryListLen33 = categoryList33.length;
  for (var categoryIndex33 = 0; categoryIndex33 < categoryListLen33; categoryIndex33++) {
    var categoryData33 = categoryList33[categoryIndex33];
    output += '<li class="menu-item' + ((opt_data.selectedCategory == categoryData33.id) ? ' active-tab' : '') + '" data-spc-title="' + soy.$$escapeHtml(categoryData33.title) + '"><a href="#tabs-category-' + soy.$$escapeHtml(categoryData33.id) + '" data-spc-id="' + soy.$$escapeHtml(categoryData33.id) + '"><strong>' + soy.$$escapeHtml(categoryData33.title) + '</strong></a></li>';
  }
  output += '</ul><div class="tabs-pane' + ((opt_data.selectedCategory == 'all') ? ' active-pane' : '') + '" id="tabs-category-all"></div><div class="tabs-pane' + ((opt_data.selectedCategory == 'none') ? ' active-pane' : '') + '" id="tabs-category-none"></div>';
  var categoryList57 = opt_data.categories;
  var categoryListLen57 = categoryList57.length;
  for (var categoryIndex57 = 0; categoryIndex57 < categoryListLen57; categoryIndex57++) {
    var categoryData57 = categoryList57[categoryIndex57];
    output += '<div class="tabs-pane' + ((opt_data.selectedCategory == categoryData57.id) ? ' active-pane' : '') + '" id="tabs-category-' + soy.$$escapeHtml(categoryData57.id) + '" data-spc-title="' + soy.$$escapeHtml(categoryData57.title) + '"></div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  Communardo.Plugin.Categories.list.soyTemplateName = 'Communardo.Plugin.Categories.list';
}


Communardo.Plugin.Categories.emptyprojecttable = function(opt_data, opt_ignored) {
  return '<table class="aui spc-project-table" style="display: table;"><thead><tr><th class="project-name" scope="col">' + soy.$$escapeHtml('Project') + '</th><th class="project-key" scope="col">' + soy.$$escapeHtml('Key') + '</th><th class="project-description" scope="col">' + soy.$$escapeHtml('Description') + '</th></tr></thead><tbody></tbody></table>';
};
if (goog.DEBUG) {
  Communardo.Plugin.Categories.emptyprojecttable.soyTemplateName = 'Communardo.Plugin.Categories.emptyprojecttable';
}


Communardo.Plugin.Categories.projecttableentry = function(opt_data, opt_ignored) {
  return '<tr><td class="project-name"><span class="aui-avatar aui-avatar-small aui-avatar-project"><span class="aui-avatar-inner"><img src="' + soy.$$escapeHtml("") + '/projects/' + soy.$$escapeHtml(opt_data.projectKey) + '/avatar.png?s=48" alt="' + soy.$$escapeHtml(opt_data.projectName) + '"></span></span><a href="' + soy.$$escapeHtml("") + '/projects/' + soy.$$escapeHtml(opt_data.projectKey) + '" title="' + soy.$$escapeHtml(opt_data.projectName) + '" >' + soy.$$escapeHtml(opt_data.projectName) + '</a></td><td class="project-key">' + soy.$$escapeHtml(opt_data.projectKey) + '</td>' + ((opt_data.projectDescription) ? '<td class="project-description"><span title="' + soy.$$escapeHtml(opt_data.projectDescription) + '">' + soy.$$escapeHtml(opt_data.projectDescription) + '</span></td>' : '<td class="empty-field">No description</td>') + '</tr>';
};
if (goog.DEBUG) {
  Communardo.Plugin.Categories.projecttableentry.soyTemplateName = 'Communardo.Plugin.Categories.projecttableentry';
}


Communardo.Plugin.Categories.emptyrepositorytable = function(opt_data, opt_ignored) {
  return '<table class="aui spc-repository-table" style="display: table;"><thead><tr><th class="repository-name" scope="col">' + soy.$$escapeHtml('Name') + '</th></tr></thead><tbody></tbody></table>';
};
if (goog.DEBUG) {
  Communardo.Plugin.Categories.emptyrepositorytable.soyTemplateName = 'Communardo.Plugin.Categories.emptyrepositorytable';
}


Communardo.Plugin.Categories.repositorytableentry = function(opt_data, opt_ignored) {
  return '<tr><td>' + ((opt_data.viewMode == 'public') ? '<span class="project-name"><span class="aui-avatar aui-avatar-small aui-avatar-project"><span class="aui-avatar-inner"><img src="' + soy.$$escapeHtml("") + '/projects/' + soy.$$escapeHtml(opt_data.projectKey) + '/avatar.png?s=48" alt="' + soy.$$escapeHtml(opt_data.projectName) + '"></span></span><a href="' + soy.$$escapeHtml("") + '/projects/' + soy.$$escapeHtml(opt_data.projectKey) + '" title="' + soy.$$escapeHtml(opt_data.projectName) + '" data-project-id="' + soy.$$escapeHtml(opt_data.projectId) + '">' + soy.$$escapeHtml(opt_data.projectName) + '</a></span>&nbsp;' : '') + '<span class="repository-name">' + ((opt_data.viewMode != 'public') ? '<span class="aui-icon aui-icon-small aui-iconfont-devtools-repository">Repository</span>' : '') + '&nbsp;<a href="' + soy.$$escapeHtml("") + '/projects/' + soy.$$escapeHtml(opt_data.projectKey) + '/repos/' + soy.$$escapeHtml(opt_data.repositorySlug) + '" data-repository-id="' + soy.$$escapeHtml(opt_data.repositoryId) + '">' + soy.$$escapeHtml(opt_data.repositoryName) + '</a></span>' + ((opt_data.publicRepository && opt_data.viewMode != 'public') ? '<div class="public-lozenge aui-lozenge aui-lozenge-subtle">Public</div>' : '') + '</td></tr>';
};
if (goog.DEBUG) {
  Communardo.Plugin.Categories.repositorytableentry.soyTemplateName = 'Communardo.Plugin.Categories.repositorytableentry';
}
;
;
/* module-key = 'de.communardo.plugin.stash-project-categories:project-category-resources', location = '/templates/project-settings.soy' */
// This file was automatically generated from project-settings.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Communardo.Plugin.Categories.
 */

if (typeof Communardo == 'undefined') { var Communardo = {}; }
if (typeof Communardo.Plugin == 'undefined') { Communardo.Plugin = {}; }
if (typeof Communardo.Plugin.Categories == 'undefined') { Communardo.Plugin.Categories = {}; }


Communardo.Plugin.Categories.settings = function(opt_data, opt_ignored) {
  return '<div class="field-group bitbucket-' + soy.$$escapeHtml(opt_data.type) + '-categories"><label for="bitbucket-' + soy.$$escapeHtml(opt_data.type) + '-categories-settings-search">' + ((opt_data.type == 'project') ? soy.$$escapeHtml('Categories') : soy.$$escapeHtml('Categories')) + '</label><input type="hidden" value="' + soy.$$escapeHtml(opt_data.categories) + '" id="bitbucket-' + soy.$$escapeHtml(opt_data.type) + '-categories-settings-search" name="categories" /><div class="description">' + ((opt_data.type == 'project') ? soy.$$escapeHtml('Setting one or more project categories helps finding a project on the projects list page. You can enter existing or new categories.') : soy.$$escapeHtml('Setting one or more repository categories helps finding a repository on the project page. You can enter existing or new categories.')) + '</div></div>';
};
if (goog.DEBUG) {
  Communardo.Plugin.Categories.settings.soyTemplateName = 'Communardo.Plugin.Categories.settings';
}
;
;
/* module-key = 'com.atlassian.stash.plugin.stash-look-and-feel-plugin:look-and-feel-client-resources', location = '/static/feature/look-and-feel/common/custom-theme.js' */
jQuery(document.documentElement).addClass("look-and-feel-custom-theme");;
;
/* module-key = 'com.onresolve.stash.groovy.groovyrunner:livequery', location = 'js/jquery.livequery.js' */
/*! jquery.livequery - v1.3.6 - 2013-08-26
 * Copyright (c)
 *  (c) 2010, Brandon Aaron (http://brandonaaron.net)
 *  (c) 2012 - 2013, Alexander Zaytsev (http://hazzik.ru/en)
 * Dual licensed under the MIT (MIT_LICENSE.txt)
 * and GPL Version 2 (GPL_LICENSE.txt) licenses.
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?a(require("jquery")):a(jQuery)}(function(a,b){function c(a,b,c,d){return!(a.selector!=b.selector||a.context!=b.context||c&&c.$lqguid!=b.fn.$lqguid||d&&d.$lqguid!=b.fn2.$lqguid)}a.extend(a.fn,{livequery:function(b,e){var f,g=this;return a.each(d.queries,function(a,d){return c(g,d,b,e)?(f=d)&&!1:void 0}),f=f||new d(g.selector,g.context,b,e),f.stopped=!1,f.run(),g},expire:function(b,e){var f=this;return a.each(d.queries,function(a,g){c(f,g,b,e)&&!f.stopped&&d.stop(g.id)}),f}});var d=a.livequery=function(b,c,e,f){var g=this;return g.selector=b,g.context=c,g.fn=e,g.fn2=f,g.elements=a([]),g.stopped=!1,g.id=d.queries.push(g)-1,e.$lqguid=e.$lqguid||d.guid++,f&&(f.$lqguid=f.$lqguid||d.guid++),g};d.prototype={stop:function(){var b=this;b.stopped||(b.fn2&&b.elements.each(b.fn2),b.elements=a([]),b.stopped=!0)},run:function(){var b=this;if(!b.stopped){var c=b.elements,d=a(b.selector,b.context),e=d.not(c),f=c.not(d);b.elements=d,e.each(b.fn),b.fn2&&f.each(b.fn2)}}},a.extend(d,{guid:0,queries:[],queue:[],running:!1,timeout:null,registered:[],checkQueue:function(){if(d.running&&d.queue.length)for(var a=d.queue.length;a--;)d.queries[d.queue.shift()].run()},pause:function(){d.running=!1},play:function(){d.running=!0,d.run()},registerPlugin:function(){a.each(arguments,function(b,c){if(a.fn[c]&&!(a.inArray(c,d.registered)>0)){var e=a.fn[c];a.fn[c]=function(){var a=e.apply(this,arguments);return d.run(),a},d.registered.push(c)}})},run:function(c){c!==b?a.inArray(c,d.queue)<0&&d.queue.push(c):a.each(d.queries,function(b){a.inArray(b,d.queue)<0&&d.queue.push(b)}),d.timeout&&clearTimeout(d.timeout),d.timeout=setTimeout(d.checkQueue,20)},stop:function(c){c!==b?d.queries[c].stop():a.each(d.queries,d.prototype.stop)}}),d.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html","prop","removeProp"),a(function(){d.play()})});;
;
/* module-key = 'com.onresolve.stash.groovy.groovyrunner:web-item-response-renderer-resources', location = 'js/webItemResponseRenderer.44e9ad5e4671e563fee6.js' */
/*! For license information please see webItemResponseRenderer.44e9ad5e4671e563fee6.js.LICENSE */
(function(e){function n(n){var t=n[0];var u=n[1];var a=n[2];var f,c,s=0,d=[];for(;s<t.length;s++){c=t[s];if(o[c]){d.push(o[c][0])}o[c]=0}for(f in u){if(Object.prototype.hasOwnProperty.call(u,f)){e[f]=u[f]}}if(l)l(n);while(d.length){d.shift()()}i.push.apply(i,a||[]);return r()}function r(){var e;for(var n=0;n<i.length;n++){var r=i[n];var t=true;for(var u=1;u<r.length;u++){var f=r[u];if(o[f]!==0)t=false}if(t){i.splice(n--,1);e=a(a.s=r[0])}}return e}var t={};var o={webItemResponseRenderer:0};var i=[];function u(e){return a.p+""+({}[e]||e)+"."+"44e9ad5e4671e563fee6"+".js"}function a(n){if(t[n]){return t[n].exports}var r=t[n]={i:n,l:false,exports:{}};e[n].call(r.exports,r,r.exports,a);r.l=true;return r.exports}a.m=e;a.c=t;a.d=function(e,n,r){if(!a.o(e,n)){Object.defineProperty(e,n,{enumerable:true,get:r})}};a.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};a.t=function(e,n){if(n&1)e=a(e);if(n&8)return e;if(n&4&&typeof e==="object"&&e&&e.__esModule)return e;var r=Object.create(null);a.r(r);Object.defineProperty(r,"default",{enumerable:true,value:e});if(n&2&&typeof e!="string")for(var t in e)a.d(r,t,function(n){return e[n]}.bind(null,t));return r};a.n=function(e){var n=e&&e.__esModule?function n(){return e["default"]}:function n(){return e};a.d(n,"a",n);return n};a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)};a.p="";a.oe=function(e){console.error(e);throw e};if(typeof AJS!=="undefined"){a.p=AJS.contextPath()+"/download/resources/com.onresolve.stash.groovy.groovyrunner:assets-f64bc105-2c91-49c0-a9e3-b26c74f5162c/"}var f=window["webpackJsonpScriptRunner"]=window["webpackJsonpScriptRunner"]||[];var c=f.push.bind(f);f.push=n;f=f.slice();for(var s=0;s<f.length;s++)n(f[s]);var l=c;i.push([679,"vendors~adminPluginResources~auditLogResource~codemirror~combinedAdminSection~commonJavascript~fragm~98dbd469"]);return r()})({152:function(e,n,r){"use strict";(function(e){if(typeof ScriptRunner==="undefined"){window["ScriptRunner"]={}}function n(){return typeof bitbucket!=="undefined"}function r(){return typeof JIRA!=="undefined"}function t(){return typeof Confluence!=="undefined"}function o(){return typeof Bamboo!=="undefined"}var i;if(r()){i="jira"}else if(t()){i="confluence"}else if(n()){i="bitbucket"}else if(o()){i="bamboo"}ScriptRunner["Product"]={isBitbucket:n,isConfluence:t,isJira:r,isBamboo:o,productName:i}})(AJS.$)},331:function(e,n,r){"use strict";var t,o,i;!function(u){true?!(o=[r(39)],t=u,i=typeof t==="function"?t.apply(n,o):t,i!==undefined&&(e.exports=i)):undefined}(function(e,n){function r(e,n,r,t){return!(e.selector!=n.selector||e.context!=n.context||r&&r.$lqguid!=n.fn.$lqguid||t&&t.$lqguid!=n.fn2.$lqguid)}e.extend(e.fn,{livequery:function(n,o){var i,u=this;return e.each(t.queries,function(e,t){return r(u,t,n,o)?(i=t)&&!1:void 0}),i=i||new t(u.selector,u.context,n,o),i.stopped=!1,i.run(),u},expire:function(n,o){var i=this;return e.each(t.queries,function(e,u){r(i,u,n,o)&&!i.stopped&&t.stop(u.id)}),i}});var t=e.livequery=function(n,r,o,i){var u=this;return u.selector=n,u.context=r,u.fn=o,u.fn2=i,u.elements=e([]),u.stopped=!1,u.id=t.queries.push(u)-1,o.$lqguid=o.$lqguid||t.guid++,i&&(i.$lqguid=i.$lqguid||t.guid++),u};t.prototype={stop:function(){var n=this;n.stopped||(n.fn2&&n.elements.each(n.fn2),n.elements=e([]),n.stopped=!0)},run:function(){var n=this;if(!n.stopped){var r=n.elements,t=e(n.selector,n.context),o=t.not(r),i=r.not(t);n.elements=t,o.each(n.fn),n.fn2&&i.each(n.fn2)}}},e.extend(t,{guid:0,queries:[],queue:[],running:!1,timeout:null,registered:[],checkQueue:function(){if(t.running&&t.queue.length)for(var e=t.queue.length;e--;)t.queries[t.queue.shift()].run()},pause:function(){t.running=!1},play:function(){t.running=!0,t.run()},registerPlugin:function(){e.each(arguments,function(n,r){if(e.fn[r]&&!(e.inArray(r,t.registered)>0)){var o=e.fn[r];e.fn[r]=function(){var e=o.apply(this,arguments);return t.run(),e},t.registered.push(r)}})},run:function(r){r!==n?e.inArray(r,t.queue)<0&&t.queue.push(r):e.each(t.queries,function(n){e.inArray(n,t.queue)<0&&t.queue.push(n)}),t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout(t.checkQueue,20)},stop:function(r){r!==n?t.queries[r].stop():e.each(t.queries,t.prototype.stop)}}),t.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html","prop","removeProp"),e(function(){t.play()})})},39:function(e,n){e.exports=jQuery},397:function(e,n){e.exports=require("aui/flag")},46:function(e,n,r){"use strict";r.r(n);var t=r(83);var o=r.n(t);var i=r(84);var u=r.n(i);var a=r(85);var f=r.n(a);var c=r(86);var s=r.n(c);var l=r(87);var d=r.n(l);var p=r(88);var v=r.n(p);var g=r(89);var h=r.n(g);var m=r(90);var y=r.n(m);var b=r(91);var w=r.n(b);var q=r(92);var x=r.n(q);var S=r(93);var A=r.n(S);var R=r(94);var j=r.n(R)},679:function(e,n,r){r(46);r(95);r(680);e.exports=r(331)},680:function(e,n,r){"use strict";r(152);(function(e){e(function(){var n="com.onresolve."+ScriptRunner.Product.productName+".groovy.groovyrunner:web-item-response-renderer.web-item-actions-data-provider";var t=WRM.data.claim(n);var o=function(n,r,o){if(o==="panelRefreshed"||!o){if((ScriptRunner.Product.productName==="bamboo"||d())&&t!==undefined){e.each(t,function(e,n){var r=n["id"];var t=n["action"];a(t,r)})}else{c()}AJS.dialog2.off("show").on("show",function(n){var r=n.target.id;if(r==="sr-dialog"){var t=AJS.dialog2(n.target);e(n.target).find("#dialog-close-button").click(function(e){e.preventDefault();t.hide();t.remove()})}})}};e(document).bind("newContentAdded",o);o(null,e(document),null);if(window.location.href.indexOf("RapidBoard.jspa?")>-1){e("#ghx-detail-issue, #gh-ctx-menu-content").livequery(function(e,n){c()})}function i(n){var r=n.data("postActionFn");AJS.$.ajax({type:"GET",dataType:"html",url:n.attr("href")}).done(function(n){AJS.dialog2(e(n)).show()}).fail(function(e,n,r){console.warn("Failed to execute remote:",r)}).always(function(){if(typeof r==="function"){r()}})}function u(e){var n=e.data("postActionFn");Promise.resolve().then(function(){var t=[r(397)];(function(r){AJS.$.ajax({type:"GET",dataType:"json",url:e.attr("href")}).done(function(e){r(e)}).fail(function(e,n,r){console.warn("Failed to execute remote:",r)}).always(function(){if(typeof n==="function"){n()}})}).apply(null,t)}).catch(r.oe)}function a(e,n){if(e==="RUN_CODE_SHOW_DIALOG"){s(n,i)}if(e==="RUN_CODE_SHOW_FLAG"){s(n,u)}}function f(){s(".sr-trigger-dialog",i);s(".sr-trigger-flag",u)}function c(){f();e("aui-inline-dialog, aui-inline-dialog2").on("aui-show aui-layer-show",function(){f()})}function s(n,r){var t=e(document);t.off("click.sr-fragments",n).on("click.sr-fragments",n,l(r));t.children().off("click.sr-fragments",n).on("click.sr-fragments",n,l(r))}function l(n){return function(r){r.preventDefault();var t=e(r.target);var o=t.closest("[href]");var i=t.find("[href]").andSelf();n(o.length!==0?o:i);return false}}function d(){return ScriptRunner.Product.productName==="jira"&&window.location.href.indexOf("/servicedesk/customer")<0}})})(AJS.$)}});;
;
/* module-key = 'com.stiltsoft.stash.graphs:graph-global-resources', location = 'js/common/whats-new.js' */
define('graphs/whats-new', ['lodash', 'jquery', 'bitbucket/internal/util/client-storage', 'bitbucket/internal/util/events'], function (_, $, clientStorage, events) {

    'use strict';

    var CONTRIBUTIONS_REPORT_FEATURE_KEY = 'awesome-graphs-contributions-report-whats-new',
        RESOLUTION_TIME_REPORT_FEATURE_KEY = 'awesome-graphs-resolution-time-report-whats-new',
        RESOLUTION_HISTOGRAM_REPORT_FEATURE_KEY = 'awesome-graphs-resolution-histogram-report-whats-new',
        REPORTS_NEW_FEATURES_KEY = 'awesome-graphs-reports-features-3-8-0',
        lozenge = function () {
            return $('<span/>', {class: 'aui-lozenge aui-lozenge-current whats-new-lozenge', text: 'new'}).css('margin-left', '5px');
        };

    function isNewFeature(featureKey) {
        var isNew = clientStorage.getItem(featureKey);
        return isNew === null || isNew;
    }

    function removeLozenge(featureKey) {
        clientStorage.setItem(featureKey, false, {noCleanup: true});
    }

    function showNotification() {
        if (isNewFeature(REPORTS_NEW_FEATURES_KEY)) {
            $('#graphs-reports').find('.aui-nav-item-label').append(lozenge());
            if ($('#graphs-reports-container').length) {
                removeLozenge(REPORTS_NEW_FEATURES_KEY);
            }
        }
    }

    function onReady() {
        if ($('#aui-sidebar-content').attr('aria-expanded') === 'true') {
            showNotification();
        }

        events.chain()
            .on('bitbucket.internal.feature.sidebar.collapseEnd', function () {
                $('.whats-new-lozenge').remove();
            })
            .on('bitbucket.internal.feature.sidebar.expandEnd', showNotification);
    }

    function notifyReport(featureKey, preview) {
        var $activeArea = $('.report', preview);

        if (isNewFeature(featureKey)) {
            $activeArea.find('a').append(lozenge());
            $activeArea.on('click', function () {
                removeLozenge(featureKey);
            });
        }
    }

    return {
        onReady: onReady,
        contributionsReport: _.partial(notifyReport, CONTRIBUTIONS_REPORT_FEATURE_KEY),
        resolutionTimeReport: _.partial(notifyReport, RESOLUTION_TIME_REPORT_FEATURE_KEY),
        resolutionHistogramReport: _.partial(notifyReport, RESOLUTION_HISTOGRAM_REPORT_FEATURE_KEY)
    };
});

AJS.$(document).ready(require('graphs/whats-new').onReady);;
;
/* module-key = 'com.stiltsoft.stash.graphs:recent-people-resources', location = 'js/feature/recent-people.js' */
define('graphs/feature/recent-people',
    ['jquery', 'bitbucket/internal/util/html', 'bitbucket/internal/util/ajax', 'bitbucket/util/navbuilder', 'chaperone', 'exports'],
    function ($, html, ajax, nav, Chaperone, exports) {

        function peopleFeatureDiscovery() {
/*            Chaperone.registerFeature('people', [{
                id: 'people-discovery',
                selector: '#people-menu-trigger',
                title: "People",
                content: "\u003cp\u003eView everyone who contributes to your Bitbucket repositories. Not just their names, graphs as well.\u003c/p\u003e\u003cp\u003ePersonal contribution activity of a single Bitbucket user is 2 clicks away. Once a user\u0027s \u003ca href=\u0022https://docs.stiltsoft.com/display/AwesomeGraphsBitbucket/Contributions?from=people-feature-discovery\u0022\u003econtributions graph\u003c/a\u003e is viewed, a new name appears on the recently viewed list for easy navigation in future.\u003c/p\u003e",
                once: false,
                width: 450,
                moreInfo: {
                    href: 'https://docs.stiltsoft.com/display/AwesomeGraphsBitbucket/People?from=people-feature-discovery',
                    text: "Learn more"
                }
            }]);*/
        }

        exports.initMenu = function (triggerId) {
            var $menu = $('#' + html.sanitizeId($(triggerId).attr('aria-controls'))),
                $items = $menu.find('.people-section ul'),
                $loading = $(Graph.People.loadingRecentPeopleItem());

            $items.append($loading);

            var fetchRecentPeople = function () {
                ajax.rest({
                    url: nav.rest('awesome-graphs').addPathComponents('people', 'recent').build(),
                    statusCode: {
                        '*': function () {
                            return false;
                        }
                    }
                }).done(function (people) {
                    if (people && people.length) {
                        $items.append($(Graph.People.menuItems({people: people})));
                    } else {
                        $items.append($(Graph.People.noRecentPeopleItem()));
                    }
                }).fail(function () {
                    $items.append($(Graph.People.errorLoadingRecentPeopleItem()));
                }).always(function () {
                    $loading.remove();
                });
            };

            $(window).on('load', fetchRecentPeople).on('load', peopleFeatureDiscovery);
        };
    });;
;
/* module-key = 'com.stiltsoft.stash.graphs:recent-people-resources', location = 'soy/client/recent-people.soy' */
// This file was automatically generated from recent-people.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Graph.People.
 */

if (typeof Graph == 'undefined') { var Graph = {}; }
if (typeof Graph.People == 'undefined') { Graph.People = {}; }


Graph.People.menuItems = function(opt_data, opt_ignored) {
  var output = '';
  var peopleList3 = opt_data.people;
  var peopleListLen3 = peopleList3.length;
  for (var peopleIndex3 = 0; peopleIndex3 < peopleListLen3; peopleIndex3++) {
    var peopleData3 = peopleList3[peopleIndex3];
    output += '<li class="people-item people-menu-item"><a href="' + soy.$$escapeHtml(peopleData3.link) + '">' + aui.avatar.avatar({size: 'xsmall', avatarImageUrl: peopleData3.avatarLink}) + '&nbsp;<span class="people">' + soy.$$escapeHtml(peopleData3.login) + '</span></a></li>';
  }
  return output;
};
if (goog.DEBUG) {
  Graph.People.menuItems.soyTemplateName = 'Graph.People.menuItems';
}


Graph.People.loadingRecentPeopleItem = function(opt_data, opt_ignored) {
  return '<li><span class="loading-recent-people">' + soy.$$escapeHtml('Loading...') + '</span></li>';
};
if (goog.DEBUG) {
  Graph.People.loadingRecentPeopleItem.soyTemplateName = 'Graph.People.loadingRecentPeopleItem';
}


Graph.People.noRecentPeopleItem = function(opt_data, opt_ignored) {
  return '<li><span class="no-recent-people">' + soy.$$escapeHtml('No recently viewed people') + '</span></li>';
};
if (goog.DEBUG) {
  Graph.People.noRecentPeopleItem.soyTemplateName = 'Graph.People.noRecentPeopleItem';
}


Graph.People.errorLoadingRecentPeopleItem = function(opt_data, opt_ignored) {
  return '<li><span>' + soy.$$escapeHtml('An error occurred') + '</span></li>';
};
if (goog.DEBUG) {
  Graph.People.errorLoadingRecentPeopleItem.soyTemplateName = 'Graph.People.errorLoadingRecentPeopleItem';
}
;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:search-urls', location = '/bitbucket/internal/component/search-urls.js' */
define("bitbucket/internal/impl/search-urls",["bitbucket/util/navbuilder"],function(b){return{fileUrl:function(a,c,d){a=b.project(a.project).repo(a).browse().path(c.split("/"));d&&(a=a.withFragment(d));return a.build()},projectAvatarUrl:function(a,c){return b.project(a).avatar(c).build()},searchRestUrl:function(){return b.rest("search").addPathComponents("search").build()}}});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:search-analytics-utils', location = '/bitbucket/internal/component/search-analytics-utils.js' */
define("bitbucket/internal/impl/search-analytics-utils",["jquery"],function(b){var c={"com.atlassian.bitbucket.server.bitbucket-server-web-fragments:bitbucket.repository.nav.files":function(){return 1===b("#file-content").length?"source":"browse"},"com.atlassian.bitbucket.server.bitbucket-server-web-fragments:bitbucket.repository.nav.commits":function(){return 1===b(".commit-files").length?"commit":"commit-list"},"com.atlassian.bitbucket.server.bitbucket-server-web-fragments:bitbucket.repository.nav.branches":function(){return 1===
b(".branch-table").length?"branch-list":"compare"},"com.atlassian.bitbucket.server.bitbucket-server-web-fragments:bitbucket.repository.nav.pull-requests":function(){return 1===b(".pull-requests-table").length?"pull-request-list":"pull-request-view"},"com.atlassian.bitbucket.server.bitbucket-server-web-fragments:bitbucket.repository.nav.settings":function(){return"admin"},"com.atlassian.bitbucket.server.bitbucket-server-web-fragments:projects-repositories-tab":function(){return"project-list"},"com.atlassian.bitbucket.server.bitbucket-server-web-fragments:projects-settings-tab":function(){return"admin"}};
return{getPageContext:function(){var a=b("#aui-sidebar-content .aui-nav-selected");return 1===a.length?(a=a.find("a").attr("data-web-item-key"),(a=c[a])?a():"other"):"global"}}});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-common-resources', location = '/bitbucket/internal/feature/search-common/search-entities.js' */
define("bitbucket/internal/feature/search-common/search-entities",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={CODE:"code",REPOSITORIES:"repositories"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-common-resources', location = '/bitbucket/internal/feature/search-common/transformer.js' */
define("bitbucket/internal/feature/search-common/transformer",["exports","lodash","bitbucket/internal/impl/search-urls"],function(b,e,d){Object.defineProperty(b,"__esModule",{value:!0});b.transformCodeResult=void 0;var f=d&&d.__esModule?d:{default:d},l=function(){return function(a,d){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var g=[],h=!0,c=!1,k=void 0;try{for(var b=a[Symbol.iterator](),e;!(h=(e=b.next()).done)&&(g.push(e.value),!d||g.length!==d);h=!0);}catch(f){c=!0,k=f}finally{try{if(!h&&
b["return"])b["return"]()}finally{if(c)throw k;}}return g}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),m=/<\/?em>/;b.transformCodeResult=function(a){a.fileParts=a.file.split("/");a.filename=a.fileParts.slice(-1);a.firstLineNumber=(0,e.get)(a,"hitContexts.0.0",-1);var b=(0,e.flatten)(a.hitContexts.map(function(a){return a.filter(function(a){return 0!==a.line&&m.test(a.text)}).map(function(a){return a.line})})).reduce(function(a,b){var c=l(a,2),d=c[0],c=c[1];b===
d+1?Array.isArray(c[c.length-1])?c[c.length-1].push(b):(c.pop(),c.push([d,b])):c.push(b);return[b,c]},[-1,[]])[1].map(function(a){return Array.isArray(a)?a[0]+"-"+a[a.length-1]:a}).join(",");a.fileUrl=f.default.fileUrl(a.repository,a.file,b);return a}});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-common-resources', location = '/bitbucket/internal/feature/search-common/search-request.js' */
define("bitbucket/internal/feature/search-common/search-request",["exports","lodash"],function(f,a){Object.defineProperty(f,"__esModule",{value:!0});f.searchFor=function(a,b,c){var d={};g.default.each(b,function(a){d[a]={}});return{query:a,entities:d,limits:c}};f.nextSearchFor=function(a,b,c,d){var e={};c={start:d[b].nextStart,limit:c};b in e?Object.defineProperty(e,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[b]=c;return{query:a,entities:e}};var g=a&&a.__esModule?a:{default:a}});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-common-resources', location = '/bitbucket/internal/feature/search-common/analytics.js' */
define("bitbucket/internal/feature/search-common/analytics",["exports","lodash","../search-common/search-entities"],function(g,c,e){function f(a,d){var b=a.match(new RegExp(d+":\\S+","g"));return b&&b.length||0}Object.defineProperty(g,"__esModule",{value:!0});g.queryAttributes=function(a){return{"query.length":a.length,"term.count":a.split(" ").length,"mod.project":f(a,"project"),"mod.repo":f(a,"repo"),"mod.lang":f(a,"lang"),"mod.ext":f(a,"ext")}};g.entityAttributes=function(a){var d={};h.default.each(k.default,
function(b,c){a.hasOwnProperty(b)&&(d[b+".start"]=a[b].start,d[b+".count"]=a[b].count)});return d};var h=c&&c.__esModule?c:{default:c},k=e&&e.__esModule?e:{default:e}});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-common-resources', location = '/bitbucket/internal/feature/search-common/search-common.soy' */
// This file was automatically generated from search-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.component.search.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.component == 'undefined') { bitbucket.internal.component = {}; }
if (typeof bitbucket.internal.component.search == 'undefined') { bitbucket.internal.component.search = {}; }


bitbucket.internal.component.search.quickCodeResult = function(opt_data, opt_ignored) {
  return '<li class="code result navigable"><a id="code-result" class="code-link" role="option" title=""><div class="code-search-hint" aria-hidden="true"><span class="aui-icon aui-icon-small aui-iconfont-search"></span>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cspan class\x3d\x22start\x22\x3eSearch for \x26lsquo;\x3c/span\x3e\x3cspan class\x3d\x22terms\x22\x3e{0}\x3c/span\x3e\x3cspan class\x3d\x22end\x22\x3e\x26rsquo; in code\x3c/span\x3e')) + '</div></a></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.search.quickCodeResult.soyTemplateName = 'bitbucket.internal.component.search.quickCodeResult';
}


bitbucket.internal.component.search.codeResult = function(opt_data, opt_ignored) {
  var output = '<li class="search-result code-search-result new-result' + ((opt_data.isTruncated) ? ' truncated' : '') + '"><section><header ' + ((opt_data.result.firstLineNumber > 1) ? 'class="code-search-result-header not-first-line"' : '') + '>';
  var url__soy16 = require('bitbucket/util/navbuilder').project(opt_data.result.repository.project).repo(opt_data.result.repository).browse().build();
  output += '<a href="' + soy.$$escapeHtml(url__soy16) + '" class="code-search-repo-link code-search-header-link">' + ((opt_data.result.repository.owner) ? bitbucket.internal.component.avatars.avatar({size: 'small', person: opt_data.result.repository.owner, extraClasses: 'code-search-result-avatar', title: '' + ((opt_data.result.repository.owner) ? soy.$$escapeHtml(opt_data.result.repository.owner.name) + bitbucket.internal.component.search.fileSeparator(null) : '') + ((opt_data.result.repository.project) ? soy.$$escapeHtml(opt_data.result.repository.project.name) + bitbucket.internal.component.search.fileSeparator(null) : '') + soy.$$escapeHtml(opt_data.result.repository.name)}) : (opt_data.result.repository.project) ? bitbucket.internal.component.avatars.projectAvatar({size: 'small', project: opt_data.result.repository.project, extraClasses: 'code-search-result-avatar', title: '' + ((opt_data.result.repository.owner) ? soy.$$escapeHtml(opt_data.result.repository.owner.name) + bitbucket.internal.component.search.fileSeparator(null) : '') + ((opt_data.result.repository.project) ? soy.$$escapeHtml(opt_data.result.repository.project.name) + bitbucket.internal.component.search.fileSeparator(null) : '') + soy.$$escapeHtml(opt_data.result.repository.name)}) : '') + ((opt_data.result.repository.owner) ? '<div class="code-search-owner">' + soy.$$escapeHtml(opt_data.result.repository.owner.name) + '</div>' : '') + ((opt_data.result.repository.project) ? '<div class="code-search-project' + ((opt_data.result.repository.owner) ? ' with-owner' : '') + '">' + soy.$$escapeHtml(opt_data.result.repository.project.name) + '</div>' : '') + '<div class="code-search-repository">' + soy.$$escapeHtml(opt_data.result.repository.name) + '</div></a><div class="code-search-header-separator non-collapsible">&mdash;</div>';
  var filePartList68 = opt_data.result.fileParts;
  var filePartListLen68 = filePartList68.length;
  for (var filePartIndex68 = 0; filePartIndex68 < filePartListLen68; filePartIndex68++) {
    var filePartData68 = filePartList68[filePartIndex68];
    output += (! (filePartIndex68 == filePartListLen68 - 1)) ? ((filePartIndex68 == 0) ? '<div class="code-search-initial-filepath collapsible">' : (filePartIndex68 == 2) ? '</div><div class="collapsible">' : '') + ((! (filePartIndex68 == 0)) ? bitbucket.internal.component.search.fileSeparator(null) : '') + '<span class="code-search-filepart">' + soy.$$escapeHtml(filePartData68) + '</span>' : ((filePartIndex68 > 0) ? '</div>' : '') + bitbucket.internal.component.search.fileSeparator(null) + '<a href="' + soy.$$escapeHtml(opt_data.result.fileUrl) + '" class="' + ((filePartIndex68 == filePartListLen68 - 1) ? 'non-collapsible code-search-filename' : '') + '">' + soy.$$escapeHtml(filePartData68) + '</a>';
  }
  output += '</header><ul class="hit-contexts">';
  if (opt_data.result.hitContexts.length > 0) {
    var hitContextList100 = opt_data.result.hitContexts;
    var hitContextListLen100 = hitContextList100.length;
    for (var hitContextIndex100 = 0; hitContextIndex100 < hitContextListLen100; hitContextIndex100++) {
      var hitContextData100 = hitContextList100[hitContextIndex100];
      output += '<li class="hit-context"><ol class="hit-context-lines">';
      var lineList102 = hitContextData100;
      var lineListLen102 = lineList102.length;
      for (var lineIndex102 = 0; lineIndex102 < lineListLen102; lineIndex102++) {
        var lineData102 = lineList102[lineIndex102];
        output += (lineData102.line > 0) ? '<li class="numbered-line">' + soy.$$escapeHtml(lineData102.line) + '</li>' : '<li>&nbsp;</li>';
      }
      output += '</ol><code>';
      var lineList112 = hitContextData100;
      var lineListLen112 = lineList112.length;
      for (var lineIndex112 = 0; lineIndex112 < lineListLen112; lineIndex112++) {
        var lineData112 = lineList112[lineIndex112];
        output += ((lineData112.text.length > 0) ? soy.$$filterNoAutoescape(lineData112.text) : '&nbsp;') + '\n';
      }
      output += '</code></li>';
    }
  } else {
    output += '<div class="aui-message aui-message-warning warning">' + soy.$$escapeHtml('There was an error showing content for this file: no matches found.') + '</div>';
  }
  output += '</ul>' + ((opt_data.isTruncated) ? '<a href="#" class="context-toggler"><span class="inner expander"><span class="aui-icon aui-icon-small aui-iconfont-arrow-down"></span><span class="text">' + soy.$$escapeHtml(AJS.format('{0,choice,1#View|1\x3cView all} {0} {0,choice,1#match|1\x3cmatches}',opt_data.result.hitCount)) + '</span></span><span class="inner contracter"><span class="aui-icon aui-icon-small aui-iconfont-arrow-up"></span><span class="text">' + soy.$$escapeHtml('Hide matches') + '</span></span></a>' : '') + '</section></li>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.component.search.codeResult.soyTemplateName = 'bitbucket.internal.component.search.codeResult';
}


bitbucket.internal.component.search.fileSeparator = function(opt_data, opt_ignored) {
  return '<span class="code-search-file-separator">/</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.search.fileSeparator.soyTemplateName = 'bitbucket.internal.component.search.fileSeparator';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:avatars', location = '/static/bitbucket/internal/bbui/avatars/avatar.soy' */
// This file was automatically generated from avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.component.avatars.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.component == 'undefined') { bitbucket.internal.component = {}; }
if (typeof bitbucket.internal.component.avatars == 'undefined') { bitbucket.internal.component.avatars = {}; }


bitbucket.internal.component.avatars.avatar = function(opt_data, opt_ignored) {
  var output = '';
  var user__soy3 = opt_data.person.user || opt_data.person;
  output += aui.avatar.avatar({size: opt_data.size, avatarImageUrl: require('bitbucket/util/navbuilder')._avatarUrl(user__soy3, ({XSMALL:32,SMALL:48,MEDIUM:64,LARGE:96,XLARGE:128,XXLARGE:192,XXXLARGE:256})[opt_data.size.toUpperCase()]).build(), id: opt_data.id, tagName: opt_data.tagName, accessibilityText: user__soy3.displayName || user__soy3.name, title: opt_data.title, isProject: opt_data.isProject, badgeContent: opt_data.badgeContent, imageClasses: opt_data.imageClasses, extraClasses: 'user-avatar' + (opt_data.hideBadge ? ' badge-hidden' : '') + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : '') + (opt_data.showTitleWithTipsy && opt_data.title ? ' avatar-tooltip' : ''), extraAttributes: {'data-username': user__soy3.name}});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.component.avatars.avatar.soyTemplateName = 'bitbucket.internal.component.avatars.avatar';
}


bitbucket.internal.component.avatars.avatarWithName = function(opt_data, opt_ignored) {
  var output = '';
  var user__soy17 = opt_data.person.user || opt_data.person;
  var personName__soy18 = user__soy17.displayName || user__soy17.name;
  output += '<div class="avatar-with-name' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" title="' + soy.$$escapeHtml(personName__soy18) + '">' + bitbucket.internal.component.avatars.avatar({size: opt_data.size, person: user__soy17, imageClasses: opt_data.imageClasses, extraClasses: opt_data.avatarClasses, badgeContent: opt_data.badgeContent, hideBadge: opt_data.hideBadge, id: opt_data.id}) + ((opt_data.link) ? bitbucket.internal.widget.userLink({user: user__soy17, href: opt_data.href, extraClasses: opt_data.linkExtraClasses, skipTitle: true}) : soy.$$escapeHtml(personName__soy18)) + '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.component.avatars.avatarWithName.soyTemplateName = 'bitbucket.internal.component.avatars.avatarWithName';
}


bitbucket.internal.component.avatars.avatarWithBadge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.component.avatars.avatar({size: opt_data.size, person: opt_data.person, title: opt_data.title, imageClasses: opt_data.imageClasses, extraClasses: opt_data.extraClasses, id: opt_data.id, hideBadge: opt_data.hideBadge, badgeContent: '<span class="badge' + soy.$$escapeHtml(opt_data.badgeClasses ? ' ' + opt_data.badgeClasses : '') + '">' + soy.$$escapeHtml(opt_data.badgeText) + '</span>'});
};
if (goog.DEBUG) {
  bitbucket.internal.component.avatars.avatarWithBadge.soyTemplateName = 'bitbucket.internal.component.avatars.avatarWithBadge';
}


bitbucket.internal.component.avatars.avatarWithNameAndBadge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.component.avatars.avatarWithName({size: opt_data.size, person: opt_data.person, extraClasses: opt_data.extraClasses, avatarClasses: opt_data.avatarClasses, imageClasses: opt_data.imageClasses, id: opt_data.id, hideBadge: opt_data.hideBadge, badgeContent: '<span class="badge' + soy.$$escapeHtml(opt_data.badgeClasses ? ' ' + opt_data.badgeClasses : '') + '">' + soy.$$escapeHtml(opt_data.badgeText) + '</span>'});
};
if (goog.DEBUG) {
  bitbucket.internal.component.avatars.avatarWithNameAndBadge.soyTemplateName = 'bitbucket.internal.component.avatars.avatarWithNameAndBadge';
}


bitbucket.internal.component.avatars.projectAvatar = function(opt_data, opt_ignored) {
  return '' + aui.avatar.avatar({size: opt_data.size, avatarImageUrl: opt_data.imageUrl ? opt_data.imageUrl : opt_data.project ? require('bitbucket/util/navbuilder')._avatarUrl(opt_data.project, ({XSMALL:32,SMALL:48,MEDIUM:64,LARGE:96,XLARGE:128,XXLARGE:192,XXXLARGE:256})[opt_data.size.toUpperCase()]).build() : '', id: opt_data.id, tagName: opt_data.tagName, accessibilityText: opt_data.project ? opt_data.project.name : '', title: opt_data.title, isProject: ! opt_data.project.owner, badgeContent: opt_data.badgeContent, imageClasses: opt_data.imageClasses, extraClasses: (opt_data.hideBadge ? ' badge-hidden' : '') + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: opt_data.extraAttributes});
};
if (goog.DEBUG) {
  bitbucket.internal.component.avatars.projectAvatar.soyTemplateName = 'bitbucket.internal.component.avatars.projectAvatar';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:avatars', location = '/static/bitbucket/internal/bbui/avatars/avatars.js' */
define("bitbucket/internal/bbui/avatars/avatars",["module","exports","jquery","lodash"],function(d,a,b,e){Object.defineProperty(a,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(b);b=babelHelpers.interopRequireDefault(e);a.default={init:b.default.once(function(){(0,c.default)(".avatar-tooltip \x3e .aui-avatar-inner \x3e img").tooltip({hoverable:!1,offset:5,gravity:function(){return c.default.fn.tipsy.autoNS.call(this)+c.default.fn.tipsy.autoWE.call(this)},delayIn:0,live:!0})})};
d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:skatejs', location = '/static/bower/skatejs/dist/index.js' */
("undefined"==typeof window?global:window).__bbda433df4ec72c4488e3a2f0e6a59a1=function(){function e(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var t={exports:{}},r=(t.exports,Object.prototype.hasOwnProperty),n=Object.prototype.propertyIsEnumerable;return t.exports=Object.assign||function(t,o){for(var a,d,u=e(t),f=1;f<arguments.length;f++){a=Object(arguments[f]);for(var i in a)r.call(a,i)&&(u[i]=a[i]);if(Object.getOwnPropertySymbols){d=Object.getOwnPropertySymbols(a);for(var c=0;c<d.length;c++)n.call(a,d[c])&&(u[d[c]]=a[d[c]])}}return u},t.exports}.call(this),("undefined"==typeof window?global:window).__dd77578495c1d19b0e115627616ea63a=function(){var e={exports:{}},t=e.exports;Object.defineProperty(t,"__esModule",{value:!0});var r="__skate_0_14_0";return window[r]||(window[r]={registerIfNotExists:function(e,t){return this[e]||(this[e]=t)}}),t["default"]=window[r],e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__6d7878404f872c72787f01cd3e06dd21=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__43714db526496b3dd90353996f6dce09=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={create:function(e){var t=document.createElement(e["extends"]||e.id);return e["extends"]&&t.setAttribute("is",e.id),t},filter:function(e,t){var r=e.attributes,n=r.is,o=n&&(n.value||n.nodeValue),a=(e.tagName||e.localName).toLowerCase(),d=t[o||a];if(d){var u=d["extends"];if(o){if(a===u)return[d]}else if(!u)return[d]}}},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__9cff21a9f41cc9ecfe56139e1040c954=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__dd77578495c1d19b0e115627616ea63a,o=e(n),a=__6d7878404f872c72787f01cd3e06dd21,d=e(a),u=__43714db526496b3dd90353996f6dce09,f=e(u),i={},c=[],l=[];return r["default"]=o["default"].registerIfNotExists("registry",{get:function(e){return(0,d["default"])(i,e)&&i[e]},set:function(e,t){if(this.get(e))throw new Error('A Skate component with the name of "'+e+'" already exists.');var r=t.type||f["default"],n=l.indexOf(r);return-1===n&&(n=l.length,l.push(r),c[n]={}),i[e]=t,c[n][e]=t,this},find:function(e){for(var t=[],r=l.length,n=0;r>n;n++)t=t.concat(l[n].filter(e,c[n])||[]);return t}}),t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__1675a7174b713323cc232370699a2714=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__bbda433df4ec72c4488e3a2f0e6a59a1,o=e(n),a=__9cff21a9f41cc9ecfe56139e1040c954,d=e(a);return r["default"]=function(e,t){var r=e.trim(),n=d["default"].get(r);return n?n(t):(0,o["default"])(document.createElement(r),t)},t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__6f793202bae98770dbb2b598df7929ad=function(){var e={exports:{}},t=e.exports;Object.defineProperty(t,"__esModule",{value:!0});var r=window.HTMLElement.prototype,n=r.contains;return t["default"]=function(e,t){return e!==document||e.contains?e.contains?e.contains(t):n.call(e,t):document.head.contains(t)||document.body.contains(t)},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__639a0d2e0f8a90cd72e6197bdb481558=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(i)return new i(e,t);var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}function r(e){return function(){this.isPropagationStopped=!0,e.call(this)}}function n(e,t){var n=void 0,o=e;for(t.stopPropagation=r(t.stopPropagation),Object.defineProperty(t,"target",{value:e});o&&!t.isPropagationStopped;)t.currentTarget=o,o.dispatchEvent(t)===!1&&(n=!1),o=o.parentNode;return n}function o(e,r,o){var a,d;return void 0===o.bubbles&&(o.bubbles=!0),void 0===o.cancelable&&(o.cancelable=!0),a=t(r,o),d=o.bubbles&&!c&&!(0,f["default"])(document,e),d?n(e,a):e.dispatchEvent(a)}var a={exports:{}},d=a.exports;Object.defineProperty(d,"__esModule",{value:!0});var u=__6f793202bae98770dbb2b598df7929ad,f=e(u),i=function(e){if(e)try{new e}catch(t){return void 0}return e}(window.CustomEvent),c=function(){var e=document.createElement("div"),r=document.createElement("div"),n=!1;return e.appendChild(r),e.addEventListener("test",function(){return n=!0}),r.dispatchEvent(t("test",{bubbles:!0})),n}();return d["default"]=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n="string"==typeof t?t.split(" "):t;return n.reduce(function(t,n){return o(e,n,r)===!1&&t.push(n),t},[])},a.exports=d["default"],a.exports}.call(this),("undefined"==typeof window?global:window).__092f8936e5006bddcb3baf24320a5a06=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=e.attributes;return t&&!!t["data-skate-ignore"]},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__164e5750c20526cb74a9e443b730eeff=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e,r){if(e.nodeType===d.ELEMENT_NODE&&!(0,a["default"])(e)){var n=e.childNodes,o=n&&n[0];for(r(e);o;)t(o,r),o=o.nextSibling}}var r={exports:{}},n=r.exports;Object.defineProperty(n,"__esModule",{value:!0});var o=__092f8936e5006bddcb3baf24320a5a06,a=e(o),d=window.Node;return n["default"]=function(e,r){if(e){e instanceof d&&(e=[e]);for(var n=0;n<e.length;n++)t(e[n],r)}},r.exports=n["default"],r.exports}.call(this),("undefined"==typeof window?global:window).__3add36046399fead5a83243849207ed7=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__6f793202bae98770dbb2b598df7929ad,o=e(n),a=__9cff21a9f41cc9ecfe56139e1040c954,d=e(a),u=__164e5750c20526cb74a9e443b730eeff,f=e(u);return r["default"]=function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];t.forEach(function(e){var t=(0,o["default"])(document,e);(0,f["default"])(e,function(e){for(var r=d["default"].find(e),n=r.length,o=0;n>o;o++)r[o].prototype.createdCallback.call(e);for(var o=0;n>o;o++)t&&r[o].prototype.attachedCallback.call(e)})})},t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__ef86f48ff9050407fed1e142d9fe2629=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e,t){for(var r=document.createElement("div"),n=0,o=s[e];o;)t="<"+o+">"+t+"</"+o+">",++n,o=s[o];r.innerHTML=t;for(var a=r,d=0;n>d;d++)a=a.firstElementChild;return a}function r(e){var t=e.match(/^<([^\s>]+)/);return t&&t[1]}function n(e){return t(r(e),e)}function o(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return t.reduce(function(e,t){return"string"==typeof t?t=o.apply(null,l.call(n(t).childNodes)):t instanceof c||Array.isArray(t)?t=o.apply(null,l.call(t)):t instanceof i&&(0,f["default"])(t),t&&e.appendChild(t),e},document.createDocumentFragment())}var a={exports:{}},d=a.exports;Object.defineProperty(d,"__esModule",{value:!0}),d["default"]=o;var u=__3add36046399fead5a83243849207ed7,f=e(u),i=window.Node,c=window.NodeList,l=Array.prototype.slice,s={caption:"table",dd:"dl",dt:"dl",li:"ul",tbody:"table",td:"tr",thead:"table",tr:"tbody"};return a.exports=d["default"],a.exports}.call(this),("undefined"==typeof window?global:window).__3c628d88db5d9b47debcf1c6200b02c4=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={coerce:function(e){return!!e},"default":!1,deserialize:function(e){return!(null===e)},serialize:function(e){return e?"":void 0}},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__01110a33f4fc3195613143c4e23f759c=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={coerce:function(e){return"undefined"==typeof e?e:Number(e)},deserialize:function(e){return null===e?void 0:e},serialize:function(e){return"undefined"==typeof e?e:Number(e)}},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__d729413b2e2accb8d590160fefbda485=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={coerce:function(e){return"undefined"==typeof e?e:String(e)},deserialize:function(e){return null===e?void 0:e},serialize:function(e){return"undefined"==typeof e?e:String(e)}},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__db9d338f5bdfd7eb6a3bcf299ff15f91=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){return function(){for(var t=arguments.length,r=Array(t),n=0;t>n;n++)r[n]=arguments[n];return r.unshift({},e),a["default"].apply(null,r)}}var r={exports:{}},n=r.exports;Object.defineProperty(n,"__esModule",{value:!0});var o=__bbda433df4ec72c4488e3a2f0e6a59a1,a=e(o),d=__3c628d88db5d9b47debcf1c6200b02c4,u=e(d),f=__01110a33f4fc3195613143c4e23f759c,i=e(f),c=__d729413b2e2accb8d590160fefbda485,l=e(c);return n["default"]={"boolean":t(u["default"]),number:t(i["default"]),string:t(l["default"])},r.exports=n["default"],r.exports}.call(this),("undefined"==typeof window?global:window).__18291b0452e01f65cf28d6695040736a=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],r=e.__SKATE_DATA||(e.__SKATE_DATA={});return t&&(r[t]||(r[t]={}))||r},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__83ca289f5309abef55c338a9f7a22385=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){for(var t=u["default"].find(e),r=t.length,n=0;r>n;n++)if(!(0,a["default"])(e,"lifecycle/"+t[n].id).created)return!1;return!0}var r={exports:{}},n=r.exports;Object.defineProperty(n,"__esModule",{value:!0});var o=__18291b0452e01f65cf28d6695040736a,a=e(o),d=__9cff21a9f41cc9ecfe56139e1040c954,u=e(d);return n["default"]=function(e,r){function n(){d===a&&r(e)}for(var o=void 0===e.length?[e]:e,a=o.length,d=0,u=0;a>u;u++){var f=o[u];t(f)?++d:f.addEventListener("skate.ready",function(){++d,n()})}n()},r.exports=n["default"],r.exports}.call(this),("undefined"==typeof window?global:window).__094bf660ba7ebd6f4b14ca8053e00764=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__ef86f48ff9050407fed1e142d9fe2629,o=e(n);return r["default"]=function(e){return function(t){for(;t.childNodes.length;)t.removeChild(t.childNodes[0]);t.appendChild((0,o["default"])(e(t)))}},t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__d31d2ff71da7095bf8886568461d8537=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){u["default"].find(e).forEach(function(t){return t.render&&t.render(e)})}var r={exports:{}},n=r.exports;Object.defineProperty(n,"__esModule",{value:!0});var o=__094bf660ba7ebd6f4b14ca8053e00764,a=e(o),d=__9cff21a9f41cc9ecfe56139e1040c954,u=e(d);return t.html=a["default"],n["default"]=t,r.exports=n["default"],r.exports}.call(this),("undefined"==typeof window?global:window).__662bde51c096e9d79bf327311ea178e0=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]="0.14.1",e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__d9d26492984e649e5130081ad32bafd6=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;t>n;n++)r[n-1]=arguments[n];return r.forEach(function(t){Object.getOwnPropertyNames(t||{}).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);(!n||n.configurable)&&Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}),e},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__2b55a083f45c9ef157662a1dc1674218=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__18291b0452e01f65cf28d6695040736a,o=e(n);return r["default"]=function(e){return function(){var t=(0,o["default"])(this,"lifecycle/"+e.id);t.attached||(t.attached=!0,t.detached=!1,e.attached(this))}},t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__9f17962f9aa326a94ed3e5d6f6b172e6=function(){var e={exports:{}},t=e.exports;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};return t["default"]=function(e){var t=e.attribute;return"function"!=typeof t?r:function(e,r,n){t(this,{name:e,newValue:null===n?void 0:n,oldValue:null===r?void 0:r})}},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__365bd8b7bbfb2b50d6dbfd830f0aa927=function(){var e={exports:{}},t=e.exports;Object.defineProperty(t,"__esModule",{value:!0});var r=window.HTMLElement.prototype,n=r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector,o=!n.call(document.createElement("div"),"div");return t["default"]=function(e,t){if(o){var r=e.cloneNode();return document.createElement("div").appendChild(r),n.call(r,t)}return n.call(e,t)},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__d48fcc3ecf3585518bbce659c1ba4116=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e,t,r){Object.defineProperty(e,t,{configurable:!0,get:function(){return r}})}function r(e){var t=e.split(" "),r=t.shift(),n=t.join(" ").trim();return{name:r,selector:n}}function n(e,r,n){return function(o){for(var a=o.target,d=n.selector;a&&a!==e.parentNode;){if((0,c["default"])(a,d))return t(o,"currentTarget",a),t(o,"delegateTarget",e),r(o);a=a.parentNode}}}function o(e,r){return function(n){t(n,"delegateTarget",e),r(n)}}function a(e,t,a){var d=r(t),u=d.name,f=d.selector,i=f&&("blur"===u||"focus"===u);a=f?n(e,a,d):o(e,a),e.addEventListener(u,a,i)}function d(e){var t=e.events;return function(e){Object.keys(t).forEach(function(r){a(e,r,t[r].bind(e))})}}var u={exports:{}},f=u.exports;Object.defineProperty(f,"__esModule",{value:!0}),f["default"]=d;var i=__365bd8b7bbfb2b50d6dbfd830f0aa927,c=e(i);return u.exports=f["default"],u.exports}.call(this),("undefined"==typeof window?global:window).__cbc0eefc77aa7d958ec51e53ef2568fc=function(){function e(e){var t=e.removeAttribute,r=e.setAttribute;e.removeAttribute=function(r){var n=this.getAttribute(r);t.call(e,r),e.attributeChangedCallback(r,n,null)},e.setAttribute=function(t,n){var o=this.getAttribute(t);r.call(e,t,n),e.attributeChangedCallback(t,o,String(n))}}var t={exports:{}},r=t.exports;return Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=e,t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__0cd264077c1ca567539d11e826d3c00e=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return e.split(/([A-Z])/).reduce(function(e,t,r){var n=e&&r%2!==0?"-":"";return""+e+n+t.toLowerCase()})},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__cc21ec7ac4c07d035d1a19269f5d2bb6=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e,t){return t===!0?(0,f["default"])(e):t}function r(e,r){var n={configurable:!0,enumerable:!0};return n.created=function(n,o){var a=(0,c["default"])(n,"api/property/"+e);if(a.linkedAttribute=t(e,r.attribute),a.removeAttribute=n.removeAttribute,a.setAttribute=n.setAttribute,a.updatingProperty=!1,"function"==typeof r["default"]?a.defaultValue=r["default"](n):void 0!==r["default"]&&(a.defaultValue=r["default"]),a.linkedAttribute&&(a.attributeMap||(a.attributeMap={},n.removeAttribute=function(e){if(a.updatingAttribute=!0,a.removeAttribute.call(this,e),e in a.attributeMap){var t=a.attributeMap[e];n[t]=void 0}a.updatingAttribute=!1},n.setAttribute=function(e,t){if(a.updatingAttribute=!0,a.setAttribute.call(this,e,t),e in a.attributeMap){var o=a.attributeMap[e];t=String(t),n[o]=r.deserialize(t)}a.updatingAttribute=!1}),a.attributeMap[a.linkedAttribute]=e),void 0===o)if(a.linkedAttribute&&n.hasAttribute(a.linkedAttribute)){var d=n.getAttribute(a.linkedAttribute);o=r.deserialize(d)}else o=a.defaultValue;a.internalValue=o},n.get=function(){var t=(0,c["default"])(this,"api/property/"+e);return r.get?r.get(this):t.internalValue},n.set=function(t){var n=(0,c["default"])(this,"api/property/"+e),o=void 0;if(!n.updatingProperty){if(n.updatingProperty=!0,n.hasBeenSetOnce?o=this[e]:(o=void 0,n.hasBeenSetOnce=!0),"function"==typeof r.coerce&&(t=r.coerce(t)),r.get||(n.internalValue="undefined"==typeof t?n.defaultValue:t),n.linkedAttribute&&!n.updatingAttribute){var a=r.serialize(t);void 0===a?n.removeAttribute.call(this,n.linkedAttribute):n.setAttribute.call(this,n.linkedAttribute,a)}var d={name:e,newValue:t,oldValue:o};"function"==typeof r.set&&r.set(this,d),n.updatingProperty=!1}},n}var n={exports:{}},o=n.exports;Object.defineProperty(o,"__esModule",{value:!0});var a=__bbda433df4ec72c4488e3a2f0e6a59a1,d=e(a),u=__0cd264077c1ca567539d11e826d3c00e,f=e(u),i=__18291b0452e01f65cf28d6695040736a,c=e(i);return o["default"]=function(e){return e=e||{},"function"==typeof e&&(e={coerce:e}),function(t){return r(t,(0,d["default"])({deserialize:function(e){return e},serialize:function(e){return e}},e))}},n.exports=o["default"],n.exports}.call(this),("undefined"==typeof window?global:window).__a66903f10d803226e4691dfa301c4f3e=function(){function e(e,t){Object.keys(t).forEach(function(r){var n=t[r],o=e[r];Object.defineProperty(e,r,n),n.created&&n.created(e,o)})}var t={exports:{}},r=t.exports;return Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=e,t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__06885fcc635bf6a67cb67ec77a6e8b17=function(){function e(e,t){Object.keys(t).forEach(function(r){var n=t[r];n.set&&n.set.call(e,e[r])})}var t={exports:{}},r=t.exports;return Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=e,t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__1d11a28624d684874cb270f137cc0122=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){for(var t=[e];e=Object.getPrototypeOf(e);)t.push(e);return t.reverse(),t},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__7ba2ecf93401318a8fb40e4b0fe295ea=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){var t=(0,u["default"])(e.prototype);return function(e){t.forEach(function(t){t.isPrototypeOf(e)||(0,a["default"])(e,t)})}}var r={exports:{}},n=r.exports;Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=t;var o=__d9d26492984e649e5130081ad32bafd6,a=e(o),d=__1d11a28624d684874cb270f137cc0122,u=e(d);return r.exports=n["default"],r.exports}.call(this),("undefined"==typeof window?global:window).__4b4eecf91d77990b080189047604b709=function(){function e(e,t){e.removeAttribute(t.unresolvedAttribute),e.setAttribute(t.resolvedAttribute,"")}var t={exports:{}},r=t.exports;return Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=e,t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__fe1aef0db5b664068b470b21f7c754a5=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){var t=e.properties,r=Object.keys(t||{});return r.reduce(function(t,r){return t[r]=e.properties[r],"function"!=typeof t[r]&&(t[r]=(0,b["default"])(t[r])),t},{})}function r(e,t){return Object.keys(t||{}).reduce(function(e,r){return e[r]=t[r](r),e},{})}var n={exports:{}},o=n.exports;Object.defineProperty(o,"__esModule",{value:!0});var a=__18291b0452e01f65cf28d6695040736a,d=e(a),u=__639a0d2e0f8a90cd72e6197bdb481558,f=e(u),i=__d48fcc3ecf3585518bbce659c1ba4116,c=e(i),l=__cbc0eefc77aa7d958ec51e53ef2568fc,s=e(l),p=__cc21ec7ac4c07d035d1a19269f5d2bb6,b=e(p),_=__a66903f10d803226e4691dfa301c4f3e,v=e(_),w=__06885fcc635bf6a67cb67ec77a6e8b17,y=e(w),x=__7ba2ecf93401318a8fb40e4b0fe295ea,h=e(x),g=__4b4eecf91d77990b080189047604b709,m=e(g),O="skate.ready",M={bubbles:!1,cancelable:!1};return o["default"]=function(e){var n=(0,c["default"])(e),o=(0,h["default"])(e),a=t(e);return function(){var t=(0,d["default"])(this,"lifecycle/"+e.id),u=e.isNative,i=this.hasAttribute("resolved");if(!t.created){t.created=!0;var c=r(this,a);u||e.attribute&&(0,s["default"])(this),u||e.prototype&&o(this),e.properties&&(0,v["default"])(this,c),e.events&&n(this),e.created&&e.created(this),i||e.render&&e.render(this),e.properties&&(0,y["default"])(this,c),e.ready&&e.ready(this),(0,f["default"])(this,O,M),i||(0,m["default"])(this,e)}}},n.exports=o["default"],n.exports}.call(this),("undefined"==typeof window?global:window).__afcda96357b2c6b7e23ccb9ac8b92f43=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=!1;return function(){for(var r=this,n=arguments.length,o=Array(n),a=0;n>a;a++)o[a]=arguments[a];t||(t=!0,setTimeout(function(){t=!1,e.apply(r,o)},1))}},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__46b087e8c15b2e0ebc2c4d4cbc36d975=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__43714db526496b3dd90353996f6dce09,o=e(n);return r["default"]={attached:function(){},attribute:function(){},created:function(){},detached:function(){},events:{},"extends":"",id:"",properties:{},prototype:{},resolvedAttribute:"resolved",ready:function(){},type:o["default"],unresolvedAttribute:"unresolved"},t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__8e93439e8a566d1586c9903a75a6a785=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__18291b0452e01f65cf28d6695040736a,o=e(n);return r["default"]=function(e){return function(){var t=(0,o["default"])(this,"lifecycle/"+e.id);t.detached||(t.detached=!0,t.attached=!1,e.detached(this))}},t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__a56dab24700df352eb84caec3fe615e5=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__092f8936e5006bddcb3baf24320a5a06,o=e(n),a=window.Element;return r["default"]=function(e){for(var t=e;t instanceof a;){if((0,o["default"])(t))return t;t=t.parentNode}},t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__c88e1e3ebc3bc643629f4b153969a85f=function(){function e(t,r){var n=t.childNodes;if(n)for(var o=n.length,a=0;o>a;a++){var d=n[a];r(d,t),e(d,r)}}function t(){var t=Object.getOwnPropertyDescriptor(d,"innerHTML"),r=function(){return t.get.call(this)};r._hasBeenEnhanced=!0,Object.defineProperty(d,"innerHTML",{get:r,set:function(r){e(this,function(e,t){var r=document.createEvent("MutationEvent");r.initMutationEvent("DOMNodeRemoved",!0,!1,t,null,null,null,null),e.dispatchEvent(r)}),t.set.call(this,r)}})}var r={exports:{}},n=(r.exports,/MSIE/.test(navigator.userAgent)),o=/Trident/.test(navigator.userAgent),a=n||o,d=window.HTMLElement.prototype;if(a){var u=Object.getOwnPropertyDescriptor(d,"innerHTML"),f=!!u&&u.get._hasBeenEnhanced;f||(o&&(window.MutationObserver=window.JsMutationObserver||window.MutationObserver),t())}return r.exports}.call(this),("undefined"==typeof window?global:window).__d8200645c4d96aee6940034d9c030d1f=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){(0,b["default"])(e,function(e){for(var t=s["default"].find(e),r=t.length,n=0;r>n;n++)t[n].prototype.createdCallback.call(e);for(var n=0;r>n;n++)t[n].prototype.attachedCallback.call(e)})}function r(e){(0,b["default"])(e,function(e){for(var t=s["default"].find(e),r=t.length,n=0;r>n;n++)t[n].prototype.detachedCallback.call(e)})}function n(e){for(var n=e.length,o=0;n>o;o++){var a=e[o].addedNodes,d=e[o].removedNodes;a&&a.length&&!(0,c["default"])(a[0].parentNode)&&t(a),d&&d.length&&r(d)}}function o(){var e=new window.MutationObserver(n);return e.observe(document,{childList:!0,subtree:!0}),e}var a={exports:{}},d=a.exports;Object.defineProperty(d,"__esModule",{value:!0});var u=__dd77578495c1d19b0e115627616ea63a,f=e(u),i=__a56dab24700df352eb84caec3fe615e5,c=e(i),l=__9cff21a9f41cc9ecfe56139e1040c954,s=e(l),p=__164e5750c20526cb74a9e443b730eeff,b=e(p);return __c88e1e3ebc3bc643629f4b153969a85f,d["default"]=f["default"].registerIfNotExists("observer",{observer:void 0,register:function(){return this.observer||(this.observer=o()),this},unregister:function(){return this.observer&&(this.observer.disconnect(),this.observer=void 0),this}}),a.exports=d["default"],a.exports}.call(this),("undefined"==typeof window?global:window).__c6f5e18624750ce93a74df6369c85ef0=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return"function"==typeof document.registerElement},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__6e1dfed2b03894ef63a4b65d5038d223=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];return e.indexOf("-")>0&&e.toLowerCase()===e&&t.indexOf(e)<0},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__abb93179bdc0236a6e77d3eae07c991c=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){var t=(0,P["default"])({},V["default"]);for(var r in V["default"])void 0!==e[r]&&(t[r]=e[r]);for(var n in e)t[n]=e[n];return t}function r(e,t){function r(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return(0,M["default"])(new e,t)}r.prototype=e.prototype,Object.defineProperty(r.prototype,"constructor",{configurable:!0,enumerable:!1,value:r,writable:!1});var n=Object.getOwnPropertyDescriptor(r,"name");return n&&n.configurable&&Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:t.id,writable:!1}),r}function n(e){function t(){var t=r.create(e);return e.prototype.createdCallback.call(t),t}var r=e.type;return t.prototype=e.prototype,t}function o(e,o){var a=void 0,d=void 0,u=t(o);return u.id=e,u.isNative=u.type===q["default"]&&(0,R["default"])()&&(0,W["default"])(e),d=(u["extends"]?document.createElement(u["extends"]).constructor:X).prototype,d.isPrototypeOf(u.prototype)||(u.prototype=(0,P["default"])(Object.create(d),u.prototype)),u.prototype.createdCallback=(0,T["default"])(u),u.prototype.attachedCallback=(0,E["default"])(u),u.prototype.detachedCallback=(0,H["default"])(u),u.prototype.attributeChangedCallback=(0,N["default"])(u),u.isNative?a=document.registerElement(e,{"extends":u["extends"]||void 0,prototype:u.prototype}):(a=n(u),Y(),B["default"].register()),a=r(a,u),(0,P["default"])(a,u),F["default"].set(e,a),a}var a={exports:{}},d=a.exports;Object.defineProperty(d,"__esModule",{value:!0});var u=__1675a7174b713323cc232370699a2714,f=e(u),i=__639a0d2e0f8a90cd72e6197bdb481558,c=e(i),l=__ef86f48ff9050407fed1e142d9fe2629,s=e(l),p=__3add36046399fead5a83243849207ed7,b=e(p),_=__db9d338f5bdfd7eb6a3bcf299ff15f91,v=e(_),w=__83ca289f5309abef55c338a9f7a22385,y=e(w),x=__d31d2ff71da7095bf8886568461d8537,h=e(x),g=__662bde51c096e9d79bf327311ea178e0,m=e(g),O=__bbda433df4ec72c4488e3a2f0e6a59a1,M=e(O),j=__d9d26492984e649e5130081ad32bafd6,P=e(j),A=__2b55a083f45c9ef157662a1dc1674218,E=e(A),k=__9f17962f9aa326a94ed3e5d6f6b172e6,N=e(k),C=__fe1aef0db5b664068b470b21f7c754a5,T=e(C),S=__afcda96357b2c6b7e23ccb9ac8b92f43,L=e(S),z=__46b087e8c15b2e0ebc2c4d4cbc36d975,V=e(z),D=__8e93439e8a566d1586c9903a75a6a785,H=e(D),I=__d8200645c4d96aee6940034d9c030d1f,B=e(I),K=__9cff21a9f41cc9ecfe56139e1040c954,F=e(K),J=__c6f5e18624750ce93a74df6369c85ef0,R=e(J),Z=__43714db526496b3dd90353996f6dce09,q=e(Z),G=__164e5750c20526cb74a9e443b730eeff,Q=e(G),U=__6e1dfed2b03894ef63a4b65d5038d223,W=e(U),X=window.HTMLElement,Y=(0,L["default"])(function(){(0,Q["default"])(document.documentElement.childNodes,function(e){for(var t=F["default"].find(e),r=t.length,n=0;r>n;n++)t[n].prototype.createdCallback.call(e);for(var n=0;r>n;n++)t[n].prototype.attachedCallback.call(e)})});return o.create=f["default"],o.emit=c["default"],o.fragment=s["default"],o.init=b["default"],o.properties=v["default"],o.ready=y["default"],o.render=h["default"],o.version=m["default"],d["default"]=o,a.exports=d["default"],a.exports}.call(this),("undefined"==typeof window?global:window).__9a43120147a4f5a325d55b702c284d36=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(){return window.skate=d,this}var r={exports:{}},n=r.exports;Object.defineProperty(n,"__esModule",{value:!0});var o=__abb93179bdc0236a6e77d3eae07c991c,a=e(o),d=window.skate;return a["default"].noConflict=t,window.skate=a["default"],n["default"]=a["default"],r.exports=n["default"],r.exports}.call(this);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:skate-AMD', location = '/static/lib/skate-AMD.js' */
define("skate",function(){return window.skate.noConflict()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:bb-panel', location = '/static/bitbucket/internal/bbui/bb-panel/bb-panel.js' */
define("bitbucket/internal/bbui/bb-panel/bb-panel",["module","exports","aui","jquery","skate"],function(h,d,b,k,l){function m(a,c){(a=document.getElementById(a.getAttribute("anchor-to")))&&c(a)}function f(a){m(a,function(c){var b=(0,g.default)(c),d=b.offset();c=Math.floor(d.left);b=Math.floor(d.top+b.outerHeight());a.style.transform="translate3d("+c+"px, "+b+"px, 0)"});e.default.layer(a).show()}Object.defineProperty(d,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(b),g=babelHelpers.interopRequireDefault(k);
b=babelHelpers.interopRequireDefault(l);b=(0,b.default)("bb-panel",{properties:{"aria-hidden":b.default.properties.string({attribute:!0,default:"true",set:function(a,c){a.open="false"===c.newValue}}),open:b.default.properties.boolean({attribute:!0,default:!1,set:function(a,c){c.oldValue!==c.newValue&&document.body.contains(a)&&(c.newValue?f(a):e.default.layer(a).hide())}})},attached:function(a){var c=!a.hasAttribute("aria-hidden"),b=a.hasAttribute("open");if(c||a.open!==b)b?f(a):e.default.layer(a).hide()},
render:function(a){(0,g.default)(a).addClass("aui-layer")}});d.default=b;h.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:analytics', location = '/static/bitbucket/internal/bbui/analytics/analytics.js' */
define("bitbucket/internal/bbui/analytics/analytics",["module","exports","../javascript-errors/javascript-errors"],function(b,a,c){Object.defineProperty(a,"__esModule",{value:!0});var d=function(){function a(){babelHelpers.classCallCheck(this,a)}babelHelpers.createClass(a,[{key:"trigger",value:function(a,b){throw new c.NotImplementedError;}}]);return a}();a.default=d;b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:bitbucket-analytics', location = '/static/bitbucket/internal/impl/analytics.js' */
define("bitbucket/internal/impl/analytics",["module","exports","aui","bitbucket/internal/bbui/analytics/analytics","bitbucket/internal/util/object"],function(d,a,e,f,g){function b(){c.default.call(this)}Object.defineProperty(a,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(e),c=babelHelpers.interopRequireDefault(f);babelHelpers.interopRequireDefault(g).default.inherits(b,c.default);b.prototype.trigger=function(a,b){h.default.trigger("analytics",{name:a,data:b})};a.default=new b;
d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:bitbucket-request', location = '/static/bitbucket/internal/impl/request.js' */
define("bitbucket/internal/impl/request",["module","exports","bitbucket/util/server"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);a.default={rest:b.default.rest};c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:highlight-text-react-util', location = '/static/bitbucket/internal/util/highlight.js' */
define("bitbucket/internal/util/highlight","module exports lodash prop-types react xregexp".split(" "),function(g,e,h,b,c,n){function p(a){var b=a.text,c=a.query,d=a.tag,e=void 0===d?"mark":d;d=a.caseSensitive;var k=void 0===d?!1:d;a=a.leadingOnly;var g=void 0===a?!1:a,m=(0,h.compact)((k&&c?c:c.toLowerCase()).split(f).map(function(a){return a.trim()}));return m.some(function(a){return b.match(new RegExp(q.default.escape(a),k?"":"i"))})?b.split(f).map(function(a,b){var c="",d=0;if(!m.some(function(b){var e=
k&&a?a:a.toLowerCase(),f=(g?h.startsWith:h.includes)(e,b);f&&(c=b,d=e.indexOf(b));return f}))return a;var f=l.default.createElement(e,{key:b,className:"term-highlight"},a.substr(d,c.length));return a===c?f:l.default.createElement("span",{key:b},a.substr(0,d),f,a.substr(d+c.length))}):b}Object.defineProperty(e,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);var l=babelHelpers.interopRequireDefault(c),q=babelHelpers.interopRequireDefault(n),f=/(\W)/g;c=function(a){a=babelHelpers.objectWithoutProperties(a,
[]);return l.default.createElement("span",null,p(babelHelpers.extends({},a)))};c.defaultProps={tag:"mark",caseSensitive:!1};c.propTypes={text:b.default.string.isRequired,query:b.default.string.isRequired,tag:b.default.string,caseSensitive:b.default.bool};e.default=c;g.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-search-results', location = '/static/bitbucket/internal/feature/repository/search-results/search-results-list.js' */
define("bitbucket/internal/feature/repository/search-results/search-results-list","module exports react prop-types react-dom ./search-results-item".split(" "),function(g,f,e,c,l,m){Object.defineProperty(f,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(e);c=babelHelpers.interopRequireDefault(c);var n=babelHelpers.interopRequireDefault(l),p=babelHelpers.interopRequireDefault(m);e=function(c){function d(){babelHelpers.classCallCheck(this,d);return babelHelpers.possibleConstructorReturn(this,
(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}babelHelpers.inherits(d,c);babelHelpers.createClass(d,[{key:"shouldComponentUpdate",value:function(a){return a.query!==this.props.query||a.repositories.length!==this.props.repositories.length||a.focusedIndex!==this.props.focusedIndex}},{key:"componentDidUpdate",value:function(a){if(!a||this.props.focusedIndex!==a.focusedIndex)if(a=this.focusedListEl){var b=a.previousSibling;a.previousSibling&&a.nextSibling?this.scrollIntoView(b,b):this.scrollIntoView(a,
b)}}},{key:"scrollIntoView",value:function(a,b){this.repoList&&(this.repoList.scrollTop=b?a.offsetTop-20:0)}},{key:"renderListWrapper",value:function(a,b,c){var d=this;return h.default.createElement("ul",{className:"repository-list"},a.map(function(a,e){return h.default.createElement(p.default,{focused:b===e,key:a.id,repository:a,onItemClick:c,query:d.props.query,ref:function(a){b===e?d.focusedListEl=n.default.findDOMNode(a):null}})}))}},{key:"render",value:function(){var a=this,b=this.props,c=b.EmptyState,
d=b.focusedIndex,e=b.LoadMore,f=b.onItemClick,g=b.onScroll,k=b.repositories;return h.default.createElement("div",{className:"repository-list-container",ref:function(b){a.repoList=b},onScroll:function(a){return g(a.target.scrollTop)}},b.title,k&&0<k.length?this.renderListWrapper(k,d,f):c,e)}}]);return d}(e.Component);e.propTypes={repositories:c.default.array,title:c.default.node,focusedIndex:c.default.number,onItemClick:c.default.func,EmptyState:c.default.element,LoadMore:c.default.element,query:c.default.string};
f.default=e;g.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-search-results', location = '/static/bitbucket/internal/feature/repository/search-results/search-results-item.js' */
define("bitbucket/internal/feature/repository/search-results/search-results-item","module exports react classnames prop-types bitbucket/util/navbuilder bitbucket/internal/bbui/aui-react/avatar bitbucket/internal/util/highlight".split(" "),function(k,e,f,a,l,m,n,p){Object.defineProperty(e,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(f),q=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(l);var r=babelHelpers.interopRequireDefault(m),h=babelHelpers.interopRequireDefault(p);
f=function(a){function d(){babelHelpers.classCallCheck(this,d);return babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}babelHelpers.inherits(d,a);babelHelpers.createClass(d,[{key:"render",value:function(){var a=this.props,b=a.repository,d=a.focused,f=a.onItemClick;a=a.query;var g=b.name,e=b.project.name;a&&g&&(g=c.default.createElement(h.default,{text:g,query:a,leadingOnly:!0}),e=c.default.createElement(h.default,{text:e,query:a,leadingOnly:!0}));
return c.default.createElement("li",{className:(0,q.default)("repository",{focused:d})},c.default.createElement("a",{href:r.default.project(b.project).repo(b).build(),className:"repository-link","data-entity":"repository","data-repository-id":b.id,"data-repository-slug":b.slug,"data-project-id":b.project.id,"data-project-key":b.project.key,title:b.name,onClick:function(a){return f(a)}},c.default.createElement(n.ProjectAvatar,{project:b.project,size:"medium"}),c.default.createElement("div",null,c.default.createElement("strong",
null,g),c.default.createElement("p",{className:"project"},e))))}}]);return d}(f.Component);f.propTypes={repository:a.default.object.isRequired,focused:a.default.bool,onItemClick:a.default.func,query:a.default.string};e.default=f;k.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-client-resources', location = '/bitbucket/internal/component/quick-search/quick-search-loader.js' */
define("bitbucket/internal/component/quick-search/quick-search-loader",["exports","react","react-dom","bitbucket/util/state","bitbucket/internal/feature/quick-search/quick-search"],function(c,e,f,g,h){function b(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0});c.onReady=function(a){k.default.render(l.default.createElement(m.default,{project:d.default.getProject()||null,repository:d.default.getRepository()||null}),document.querySelector(a))};var l=b(e),k=b(f),
d=b(g),m=b(h)});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-client-resources', location = '/bitbucket/internal/feature/quick-search/request-status.js' */
define("bitbucket/internal/feature/quick-search/request-status",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});a.OK="OK";a.ERROR="ERROR";a.WAITING="WAITING"});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-client-resources', location = '/bitbucket/internal/feature/quick-search/components/results-panel.js' */
define("bitbucket/internal/feature/quick-search/components/results-panel","module exports aui react prop-types ./repository-results-list ../request-status bitbucket/internal/bbui/bb-panel/bb-panel".split(" "),function(l,g,h,e,b,m,q){function k(c){return c&&c.__esModule?c:{default:c}}function r(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,
writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}Object.defineProperty(g,"__esModule",{value:!0});var d=k(e);b=k(b);var t=k(m),u=function(){function c(a,c){for(var f=0;f<c.length;f++){var b=c[f];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}return function(a,b,f){b&&c(a.prototype,b);f&&c(a,f);return a}}(),v=function(){return d.default.createElement("div",{className:"quick-search-error"},
d.default.createElement("div",{className:"content"},d.default.createElement("div",{className:"warning-icon"}),d.default.createElement("div",{className:"error-text"},d.default.createElement("div",{className:"error-text-primary"},"Search is currently unavailable"),d.default.createElement("div",{className:"error-text-secondary"},"Refresh the page and try again"))),d.default.createElement("div",{className:"footer"},"Need help? Troubleshoot search"))};
e=function(b){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var b=(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?this:b}r(a,b);u(a,[{key:"componentWillReceiveProps",value:function(b){this.panel.open=b.expanded}},{key:"render",value:function(){var b=this,a=this.props,c=a.codeResult,e=a.currentSearchTerms,
g=a.focusedIndex,h=a.onResultClick,k=a.onNavigationClick,l=a.repoCount,m=a.repos,n=a.status,a=a.totalRepoCount,p=n===q.ERROR;return d.default.createElement("bb-panel",{id:"quick-search-dialog","anchor-to":"quick-search",role:"listbox",ref:function(a){return b.panel=a}},p&&d.default.createElement(v,null),!p&&d.default.createElement("div",{className:"quick-search-main repository-list-container"},d.default.createElement(t.default,{codeResult:c,currentSearchTerms:e,focusedIndex:g,onResultClick:h,onNavigationClick:k,
repoCount:l,repos:m,status:n,totalRepoCount:a})))}}]);return a}(e.Component);e.defaultProps={expanded:!1,currentSearchTerms:"",totalRepoCount:0,repoCount:0};e.propTypes={codeResult:b.default.object,currentSearchTerms:b.default.string.isRequired,focusedIndex:b.default.number.isRequired,onResultClick:b.default.func.isRequired,onNavigationClick:b.default.func.isRequired,repoCount:b.default.number.isRequired,repos:b.default.array,status:b.default.string,totalRepoCount:b.default.number.isRequired};g.default=
e;l.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-client-resources', location = '/bitbucket/internal/feature/quick-search/quick-search.js' */
define("bitbucket/internal/feature/quick-search/quick-search","module exports aui lodash prop-types react bitbucket/internal/impl/urls ./components/search-form ./components/quick-search-provider ./components/results-panel ./internal/analytics ./constants".split(" "),function(x,u,h,q,n,m,y,z,A,B,C,p){function k(b){return b&&b.__esModule?b:{default:b}}function w(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==
typeof a?b:a}function D(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}Object.defineProperty(u,"__esModule",{value:!0});n=k(n);var r=k(m),t=k(y),E=k(z),F=k(A),G=k(B),v=k(C),H=function(){function b(a,d){for(var e=0;e<d.length;e++){var c=d[e];c.enumerable=
c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(a,d,e){d&&b(a.prototype,d);e&&b(a,e);return a}}();m=function(b){function a(){var d,e,c,b;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");for(var g=arguments.length,k=Array(g),l=0;l<g;l++)k[l]=arguments[l];return b=(e=(c=w(this,(d=a.__proto__||Object.getPrototypeOf(a)).call.apply(d,[this].concat(k))),c),c.state={focusedIndex:0,panelOpen:!1,currentSearchTerms:"",
codeResult:{}},c.onChange=function(f){c.setState({query:f.target.value})},c.onKeyDown=function(f,d,a){if(f.keyCode===h.keyCode.DOWN||f.keyCode===h.keyCode.UP)f.preventDefault(),c._handleUpAndDownKeys(f,d,a);else{var e=c.state;a=e.focusedIndex;var b=e.codeResult,e=e.currentSearchTerms;f.keyCode===h.keyCode.ENTER?(f.preventDefault(),f.nativeEvent.stopImmediatePropagation(),f=void 0,0===a?f=b.href:a===d.length+1?f=t.default.search(e):(a=d[a-1],f=t.default.repo(a),c.onResultClick(a,d.indexOf(a))),c._navigateToURL(f)):
f.keyCode===h.keyCode.ESCAPE&&(f.preventDefault(),f.target&&f.target.blur(),c.setState({panelOpen:!1}))}},c.onKeyUp=function(d){var a=c.state.query,a=void 0===a?"":a;c._updatePanel(d.keyCode!==h.keyCode.ESCAPE&&(0,q.get)(a,"length",0)>=p.MIN_TERMS_DISPLAY)},c._handleUpAndDownKeys=function(a,d,e){var b=c.state.focusedIndex;d=(0,q.get)(d,"length",0);var g=0;0<d&&(a.keyCode===h.keyCode.DOWN?g=b+1:a.keyCode===h.keyCode.UP&&(g=b-1));c.setState({focusedIndex:(0,q.clamp)(g,0,e?d+1:d)})},c.onResultClick=
function(d,a){var e=c.props;v.default.resultClicked({project:e.project,repository:e.repository,clickedProjectId:d.project.id,clickedRepoId:d.id,index:a})},c.onNavigationClick=function(d){var a=c.props;v.default.navigationClick({project:a.project,repository:a.repository,context:d})},e),w(c,b)}D(a,b);H(a,[{key:"componentWillUpdate",value:function(d,a){this.state.query!==a.query&&this.setState({focusedIndex:0})}},{key:"_navigateToURL",value:function(a){window.location.href=a}},{key:"_updatePanel",value:function(a){var e=
this;this.setState(function(c){var b=c.query,b=void 0===b?"":b;c=c.currentSearchTerms;var g={currentSearchTerms:b,codeResult:{hidden:b.length<p.MIN_TERMS_DISPLAY,title:h.format("Search for \u0022{0}\u0022 in code",b),href:t.default.search((e.searchContext+" "+b).trim())},panelOpen:a};a&&c!==b&&(g.repos=null,g.totalRepoCount=0);return g})}},{key:"_onFocus",value:function(){var a=this.props,b=a.project,a=a.repository;this._updatePanel((0<arguments.length&&void 0!==arguments[0]?arguments[0]:
"").length>=p.MIN_TERMS_DISPLAY);v.default.focused({project:b,repository:a})}},{key:"render",value:function(){var a=this,b=this.state,c=b.currentSearchTerms,k=b.codeResult,g=b.focusedIndex,h=b.panelOpen,l=this.props;return r.default.createElement(F.default,{query:b.query,project:l.project,repository:l.repository,render:function(b){var e=b.repos,l=b.totalRepoCount;b=b.status;var m=(0,q.get)(e,"length",0),n="repository-result-"+(g-1);0===g?n=p.CODE_RESULT_ID:g>m&&(n=p.REPO_RESULT_COUNT_ID);return r.default.createElement("div",
null,r.default.createElement(E.default,{activeDescendant:h?n:"",expanded:h,onChange:a.onChange,onFocus:function(){return a._onFocus(c)},onKeyDown:function(b){return a.onKeyDown(b,e,l>m)},onKeyUp:a.onKeyUp,searchUrl:t.default.search(),status:b}),r.default.createElement(G.default,{codeResult:k,currentSearchTerms:c,expanded:h,focusedIndex:g,onResultClick:a.onResultClick,onNavigationClick:a.onNavigationClick,repoCount:m,repos:e,totalRepoCount:l,status:b}))}})}},{key:"searchContext",get:function(){var a=
this.props,b=a.repository,a=a.project;return b?"project:"+a.key+" repo:"+b.slug:a?"project:"+a.key:""}}]);return a}(m.Component);m.propTypes={repository:n.default.object,project:n.default.object};u.default=m;x.exports=u["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-client-resources', location = '/bitbucket/internal/feature/quick-search/constants.js' */
define("bitbucket/internal/feature/quick-search/constants",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});a.MIN_TERMS_DISPLAY=3;a.QUICKSEARCH_DEBOUNCE_TIMEOUT=200;a.QUICKSEARCH_ITEMS=10;a.MAX_REPO_COUNT=999;a.CODE_RESULT_ID="code-result";a.REPO_RESULT_COUNT_ID="repo-result-count"});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-client-resources', location = '/bitbucket/internal/feature/quick-search/quick-search.soy' */
// This file was automatically generated from quick-search.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.component.quickSearch.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.component == 'undefined') { bitbucket.internal.component = {}; }
if (typeof bitbucket.internal.component.quickSearch == 'undefined') { bitbucket.internal.component.quickSearch = {}; }


bitbucket.internal.component.quickSearch.searchBox = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<form class="aui-quicksearch" method="GET" action="' + soy.$$escapeHtml(opt_data.searchUrl) + '"><div class="quick-search-trigger"><label class="assistive" for="quick-search">' + soy.$$escapeHtml('Search for code or repositories') + '</label><input id="quick-search" name="q" type="text" autocomplete="off" placeholder="' + soy.$$escapeHtml('Search for code or repositories...') + '" aria-autocomplete="both" aria-controls="quick-search-dialog" aria-expanded="false" aria-haspopup="true" aria-activedescendant="" role="combobox" /><div class="spinner"></div></div></form>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.quickSearch.searchBox.soyTemplateName = 'bitbucket.internal.component.quickSearch.searchBox';
}


bitbucket.internal.component.quickSearch.searchPanel = function(opt_data, opt_ignored) {
  return '<bb-panel id="quick-search-dialog" anchor-to="quick-search" role="listbox"><div class="quick-search-error"><div class="content"><div class="warning-icon"></div><div class="error-text"><div class="error-text-primary">' + soy.$$escapeHtml('Search is currently unavailable') + '</div><div class="error-text-secondary">' + soy.$$escapeHtml('Refresh the page and try again') + '</div></div></div><div class="footer">' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('Need help? Troubleshoot search')) + '</div></div><div class="quick-search-main"><ul id="quick-search-results" class="quick-search-results search-result-list" role="presentation">' + bitbucket.internal.component.quickSearch.codeResult(null) + '</ul></div></bb-panel>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.quickSearch.searchPanel.soyTemplateName = 'bitbucket.internal.component.quickSearch.searchPanel';
}


bitbucket.internal.component.quickSearch.codeResult = function(opt_data, opt_ignored) {
  return '<li class="code result navigable"><a id="code-result" class="code-link" role="option" title=""><div class="code-search-hint" aria-hidden="true"><span class="aui-icon aui-icon-small aui-iconfont-search"></span>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cspan class\x3d\x22start\x22\x3eSearch for \x26lsquo;\x3c/span\x3e\x3cspan class\x3d\x22terms\x22\x3e{0}\x3c/span\x3e\x3cspan class\x3d\x22end\x22\x3e\x26rsquo; in code\x3c/span\x3e')) + '</div></a></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.quickSearch.codeResult.soyTemplateName = 'bitbucket.internal.component.quickSearch.codeResult';
}


bitbucket.internal.component.quickSearch.repositoryResults = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.totalRepoCount > 0) ? '<li class="repository-heading"><h2 class="section-title">' + soy.$$escapeHtml('Repositories') + '</h2><aui-badge>' + soy.$$escapeHtml(require('bitbucket/internal/util/text').capInt(opt_data.totalRepoCount, 99)) + '</aui-badge></li>' : '');
  var repoList32 = opt_data.repos;
  var repoListLen32 = repoList32.length;
  for (var repoIndex32 = 0; repoIndex32 < repoListLen32; repoIndex32++) {
    var repoData32 = repoList32[repoIndex32];
    output += '<li class="repository result navigable' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><a id="repository-result-' + soy.$$escapeHtml(repoIndex32) + '" class="repository-link" data-proj-key="' + soy.$$escapeHtml(repoData32.project.key) + '" data-repo-slug="' + soy.$$escapeHtml(repoData32.slug) + '" data-repo-id="' + soy.$$escapeHtml(repoData32.id) + '" data-project-id="' + soy.$$escapeHtml(repoData32.project.id) + '" href="' + soy.$$escapeHtml(require('bitbucket/util/navbuilder').project(repoData32.project).repo(repoData32).browse().build()) + '" role="option" title="' + soy.$$escapeHtml(AJS.format('{0} / {1}',repoData32.project.name,repoData32.name)) + '">' + bitbucket.internal.component.quickSearch.repositoryItemContent({repository: repoData32}) + '</a></li>';
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.component.quickSearch.repositoryResults.soyTemplateName = 'bitbucket.internal.component.quickSearch.repositoryResults';
}


bitbucket.internal.component.quickSearch.repositoryItemContent = function(opt_data, opt_ignored) {
  return bitbucket.internal.component.avatars.projectAvatar({size: 'small', project: opt_data.repository.project, extraAttributes: 'aria-hidden="true"'}) + '<span class="project-and-repository" aria-hidden="true"><span class="project-name">' + soy.$$escapeHtml(opt_data.repository.project.name) + '</span><span class="separator">/</span><span class="name">' + soy.$$escapeHtml(opt_data.repository.name) + '</span></span>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.quickSearch.repositoryItemContent.soyTemplateName = 'bitbucket.internal.component.quickSearch.repositoryItemContent';
}
;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-client-resources', location = '/bitbucket/internal/feature/quick-search/internal/analytics.js' */
define("bitbucket/internal/feature/quick-search/internal/analytics",["module","exports","bitbucket/internal/impl/analytics","bitbucket/internal/impl/search-analytics-utils","../../search-common/analytics"],function(l,h,b,e,m){function f(a,d){var c={context:n.default.getPageContext()};d&&(c["repository.id"]=d.id);a&&(c["project.id"]=a.id);return c}Object.defineProperty(h,"__esModule",{value:!0});var g=b&&b.__esModule?b:{default:b},n=e&&e.__esModule?e:{default:e},k=Object.assign||function(a){for(var d=
1;d<arguments.length;d++){var c=arguments[d],b;for(b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])}return a};h.default={focused:function(a){a=f(a.project,a.repository);g.default.trigger("bitbucket.ui.quick-search.focused",a)},resultsLoaded:function(a){a=k({time:a.time,"repositories.count":a.repositoriesCount},(0,m.queryAttributes)(a.query),f(a.project,a.repository));g.default.trigger("bitbucket.ui.quick-search.results.loaded",a)},resultClicked:function(a){a=k({"clicked.project.id":a.clickedProjectId,
"clicked.repository.id":a.clickedRepoId},f(a.project,a.repository),{"repository.index":a.index});g.default.trigger("bitbucket.ui.quick-search.result.clicked",a)},navigationClick:function(a){a=k({},f(a.project,a.repository),{context:a.context});g.default.trigger("bitbucket.ui.quick-search.navigation.clicked",a)}};l.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-client-resources', location = '/bitbucket/internal/feature/quick-search/navigation-item-context.js' */
define("bitbucket/internal/feature/quick-search/navigation-item-context",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});a.CODE="code-results";a.SHOW_MORE_REPOS="show-more-repos"});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-client-resources', location = '/bitbucket/internal/feature/quick-search/components/quick-search-provider.js' */
define("bitbucket/internal/feature/quick-search/components/quick-search-provider","module exports lodash prop-types react bitbucket/internal/impl/request bitbucket/internal/impl/search-urls ../../search-common/search-entities ../../search-common/search-request ../constants ../request-status ../internal/analytics".split(" "),function(n,m,p,c,h,q,r,t,u,l,v,w){function f(a){return a&&a.__esModule?a:{default:a}}function x(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function y(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(m,"__esModule",{value:!0});c=f(c);f(h);var z=f(q),A=f(r),B=f(t),k=function(a){if(a&&a.__esModule)return a;
var b={};if(null!=a)for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&(b[g]=a[g]);b.default=a;return b}(v),C=f(w),D=function(){function a(b,a){for(var d=0;d<a.length;d++){var e=a[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,g,d){g&&a(b.prototype,g);d&&a(b,d);return b}}();h=function(a){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var d=x(this,(b.__proto__||
Object.getPrototypeOf(b)).call(this,a));d.state={query:a.query};d._debouncedRepoSearch=(0,p.debounce)(function(a){a.length>=l.MIN_TERMS_DISPLAY?d.doRepoSearch(a):d.setState({repos:null,totalRepoCount:0,status:k.OK})},l.QUICKSEARCH_DEBOUNCE_TIMEOUT);return d}y(b,a);D(b,[{key:"componentWillReceiveProps",value:function(a){a=a.query;if(a!==this.state.query){var b={query:a};a.length>=l.MIN_TERMS_DISPLAY&&(b.status=k.WAITING);this.setState(function(a){return b});this.currentSearchRequest&&this.currentSearchRequest.abort&&
(this.currentSearchRequest.abort(),this.currentSearchRequest=null);this._debouncedRepoSearch(a)}}},{key:"doRepoSearch",value:function(a){var b=this;this.setState({status:k.WAITING});var e=Date.now();this.currentSearchRequest&&this.currentSearchRequest.abort&&this.currentSearchRequest.abort();this.currentSearchRequest=z.default.rest({type:"POST",url:A.default.searchRestUrl(),data:(0,u.searchFor)(a,[B.default.REPOSITORIES],{primary:l.QUICKSEARCH_ITEMS}),statusCode:{"*":!1}});this.currentSearchRequest.done(function(c){c=
c.repositories;C.default.resultsLoaded({project:b.props.project,repository:b.props.repository,time:Date.now()-e,query:a,repositoriesCount:c.count});b.setState({repos:c.values,totalRepoCount:c.count,status:k.OK})}).fail(function(a,c){"abort"!==c&&b.setState({status:k.ERROR})}).always(function(){b.currentSearchRequest=null})}},{key:"render",value:function(){var a=this.state;return this.props.render({repos:a.repos,totalRepoCount:a.totalRepoCount,status:a.status})}}]);return b}(h.Component);h.propTypes=
{render:c.default.func.isRequired,query:c.default.string,repository:c.default.object,project:c.default.object};m.default=h;n.exports=m["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-client-resources', location = '/bitbucket/internal/feature/quick-search/components/search-form.js' */
define("bitbucket/internal/feature/quick-search/components/search-form","module exports aui classnames react bitbucket/internal/bbui/aui-react/spinner bitbucket/internal/util/shortcuts ../request-status".split(" "),function(k,g,n,h,l,m,q,r){function d(b){return b&&b.__esModule?b:{default:b}}function t(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,
writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}Object.defineProperty(g,"__esModule",{value:!0});var u=d(h),e=d(l),v=d(m),w=d(q),x=function(){function b(a,b){for(var f=0;f<b.length;f++){var c=b[f];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(a,p,f){p&&b(a.prototype,p);f&&b(a,f);return a}}();h=function(b){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
var b=(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?this:b}t(a,b);x(a,[{key:"componentDidMount",value:function(){var b=this;w.default.bind("focusQuickSearch",function(){return b.inputElement.focus()})}},{key:"render",value:function(){var b=this,a=this.props,c=a.searchUrl,d=a.onKeyDown,g=a.onChange,h=a.onKeyUp,k=a.activeDescendant,l=a.expanded,
m=a.onFocus,a=a.status===r.WAITING;return e.default.createElement("form",{className:(0,u.default)("aui-quicksearch",{loading:a}),method:"GET",action:c,onSubmit:function(a){return a.preventDefault()}},e.default.createElement("div",{className:"quick-search-trigger"},e.default.createElement("label",{className:"assistive",htmlFor:"quick-search"},"Search for code or repositories"),e.default.createElement("input",{id:"quick-search",name:"q",type:"text",autoComplete:"off",placeholder:"Search for code or repositories...",
"aria-activedescendant":k,"aria-autocomplete":"both","aria-busy":a,"aria-controls":"quick-search-dialog","aria-expanded":l,"aria-haspopup":!0,role:"combobox",onKeyDown:d,onKeyUp:h,onChange:g,onFocus:m,ref:function(a){return b.inputElement=a}}),a?e.default.createElement(v.default,{size:"small"}):null))}}]);return a}(e.default.Component);g.default=h;k.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-client-resources', location = '/bitbucket/internal/feature/quick-search/components/repository-results-list.js' */
define("bitbucket/internal/feature/quick-search/components/repository-results-list","module exports react aui classnames prop-types bitbucket/internal/feature/repository/search-results/search-results-item bitbucket/internal/impl/urls bitbucket/internal/util/i18n-html bitbucket/internal/util/text ../request-status ../constants ../navigation-item-context".split(" "),function(k,f,b,l,u,v,e,w,x,y,z,m,A){function g(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,
b)&&(c[b]=a[b]);c.default=a;return c}function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var c=d(b),n=d(u);b=d(v);var B=d(e),C=d(w),r=d(x),p=g(z),t=g(A),D=function(){return c.default.createElement("li",{className:"repository-heading"},c.default.createElement("h2",{className:"section-title"},"Repositories"))};e=function(a){var b=a.codeResult,d=a.currentSearchTerms,e=a.focusedIndex,f=a.onResultClick,
g=a.onNavigationClick,h=a.repoCount,k=a.repos,q=a.status;a=a.totalRepoCount;return c.default.createElement("ul",{id:"quick-search-results",className:"quick-search-results repository-list",role:"presentation"},c.default.createElement("li",{id:"code-result-container",className:(0,n.default)("code",{focused:0===e})},c.default.createElement("a",{id:m.CODE_RESULT_ID,className:(0,n.default)("code-link",{hidden:b.hidden}),role:"option",title:b.title||null,href:b.href||null,"aria-hidden":b.hidden,onClick:function(a){return g(t.CODE)}},
c.default.createElement("div",{className:"code-search-hint","aria-hidden":!0},c.default.createElement("span",{className:"aui-icon aui-icon-small aui-iconfont-search"}),c.default.createElement(r.default,{className:"code-search-hint-text",params:[d]},"\u003cspan class=\u0022start\u0022\u003eSearch for &lsquo;\u003c/span\u003e\u003cspan class=\u0022terms\u0022\u003e{0}\u003c/span\u003e\u003cspan class=\u0022end\u0022\u003e&rsquo; in code\u003c/span\u003e")))),0<h&&q!==p.WAITING&&c.default.createElement(D,{totalRepoCount:a}),0<h&&q!==p.WAITING&&k.map(function(a,b){return c.default.createElement(B.default,{focused:e===b+1,key:a.id,repository:a,
onItemClick:function(b){return f(a)},query:d})}),a>h&&q!==p.WAITING&&c.default.createElement("li",{className:(0,n.default)("count",{focused:e===h+1})},c.default.createElement("a",{id:m.REPO_RESULT_COUNT_ID,href:C.default.search(d),role:"option",onClick:function(a){return g(t.SHOW_MORE_REPOS)}},c.default.createElement("span",{className:"aui-icon icon-repository"}),c.default.createElement(r.default,{params:[(0,y.capInt)(a,m.MAX_REPO_COUNT)]},"Show \u003cstrong\u003e{0}\u003c/strong\u003e repositories"))))};
e.propTypes={codeResult:b.default.object,currentSearchTerms:b.default.string.isRequired,focusedIndex:b.default.number.isRequired,onResultClick:b.default.func.isRequired,repoCount:b.default.number.isRequired,repos:b.default.array,totalRepoCount:b.default.number.isRequired};f.default=e;k.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-item', location = '/static/bitbucket/internal/feature/repository/repository-item/repository-item.soy' */
// This file was automatically generated from repository-item.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.repository.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.repository == 'undefined') { bitbucket.internal.feature.repository = {}; }


bitbucket.internal.feature.repository.repositoryItem = function(opt_data, opt_ignored) {
  return '<span class="repository-item" title="' + soy.$$escapeHtml(opt_data.repository.project.name) + ' / ' + soy.$$escapeHtml(opt_data.repository.name) + '" data-id="' + soy.$$escapeHtml(opt_data.repository.id) + '" data-repository="' + soy.$$escapeHtml(JSON.stringify(opt_data.repository).replace(/\//g, '\\/')) + '">' + bitbucket.internal.feature.repository.repositoryItemContent({avatarTagName: 'span', repository: opt_data.repository}) + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.repositoryItem.soyTemplateName = 'bitbucket.internal.feature.repository.repositoryItem';
}


bitbucket.internal.feature.repository.repositoryItemContent = function(opt_data, opt_ignored) {
  return bitbucket.internal.feature.project.avatar({size: 'xsmall', project: opt_data.repository.project, tagName: opt_data.avatarTagName}) + '<span class="project-and-repository" title="' + soy.$$escapeHtml(opt_data.repository.project.name) + ' / ' + soy.$$escapeHtml(opt_data.repository.name) + '"><span class="project-name">' + ((opt_data.projectNameContent) ? soy.$$filterNoAutoescape(opt_data.projectNameContent) : soy.$$escapeHtml(opt_data.repository.project.name)) + '</span><span class="separator">/</span><span class="name">' + ((opt_data.repositoryNameContent) ? soy.$$filterNoAutoescape(opt_data.repositoryNameContent) : soy.$$escapeHtml(opt_data.repository.name)) + '</span></span>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.repositoryItemContent.soyTemplateName = 'bitbucket.internal.feature.repository.repositoryItemContent';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:atlassian-regexp', location = '/static/bower/atlassian-regexp/lib/internal/util/regexp.js' */
define("internal/util/regexp",["exports"],function(a){a.escape=function(a){return a.replace(/[\-\[\]{}()+?.,\\\^$|#\s]/g,"\\$\x26")}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:atlassian-highlight-text', location = '/static/bower/atlassian-highlight-text/lib/internal/util/highlight-text.js' */
define("internal/util/highlight-text",["internal/util/regexp"],function(g){var d=/[&"'<>`]/g,e=function(b){var a={"\x3c":"\x26lt;","\x3e":"\x26gt;","\x26":"\x26amp;","'":"\x26#39;","`":"\x26#96;"};return a.hasOwnProperty(b)?a[b]:"\x26quot;"},f=function(b){return g.escape(b.replace(d,e))};return{highlight:function(b,a,c){if(!a||0===a.length)return b.replace(d,e);a="string"===typeof a?f(a):a.map(f).join("|");c=new RegExp(a,null==c?"gi":c);return b.replace(d,e).replace(c,"\x3cmark\x3e$\x26\x3c/mark\x3e")}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:highlight-text-util', location = '/static/bitbucket/internal/util/highlight-text.js' */
define("bitbucket/internal/util/highlight-text",["module","exports","internal/util/highlight-text"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);a.default=b.default;c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:recent-repositories-menu-resources', location = '/static/bitbucket/internal/layout/base/menu/repositories/recent.js' */
define("bitbucket/internal/layout/base/menu/repositories/recent","module exports react jquery react-dom bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/feature/repository/search-results/search-results-list bitbucket/internal/util/html bitbucket/internal/util/shortcuts".split(" "),function(f,a,h,k,l,m,n,p,q,r,t){Object.defineProperty(a,"__esModule",{value:!0});var u=babelHelpers.interopRequireDefault(h),b=babelHelpers.interopRequireDefault(k),v=babelHelpers.interopRequireDefault(l),
d=babelHelpers.interopRequireDefault(m),w=babelHelpers.interopRequireDefault(n),x=babelHelpers.interopRequireDefault(p),y=babelHelpers.interopRequireDefault(q),z=babelHelpers.interopRequireDefault(r),A=babelHelpers.interopRequireDefault(t);a.default={initMenu:function(c){var a=(0,b.default)("#"+c);c=(0,b.default)("#"+z.default.sanitizeId(a.attr("aria-controls"))).addClass("recent-repositories-menu");c.find(".aui-dropdown2-section").addClass("repository-list-container").find("ul").addClass("repository-list");
var e=c.find(".recent-repositories-section ul"),g=(0,b.default)(bitbucket.internal.layout.menu.loadingRecentReposMenuItem());A.default.bind("recentRepositories",function(){return a.click()});c.on("aui-dropdown2-show",function(){d.default.trigger("bitbucket.internal.ui.nav.repositories.opened")});c.find(".public-repo-list-link-section").on("click","a",function(){d.default.trigger("bitbucket.internal.ui.nav.repositories.public.clicked")});var f=function(a){d.default.trigger("bitbucket.internal.ui.nav.repositories.item.clicked",
null,{repositoryId:a.currentTarget.dataset.repositoryId})};e.append(g);(0,b.default)(window).on("load",function(){x.default.rest({url:w.default.rest().profile().recent().repos().withParams({avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"medium"}),limit:10}).build(),statusCode:{"*":!1}}).done(function(a){a&&a.size?(e.replaceWith('\x3cdiv id\x3d"recent-repositories-list-container"/\x3e'),v.default.render(u.default.createElement(y.default,{repositories:a.values,onItemClick:f}),document.getElementById("recent-repositories-list-container"))):
e.append((0,b.default)(bitbucket.internal.layout.menu.noRecentReposMenuItem()));d.default.trigger("bitbucket.internal.feature.repositories.recent.loaded",this,a)}).fail(function(){e.append((0,b.default)(bitbucket.internal.layout.menu.errorLoadingRecentReposMenuItem()))}).always(function(){g.remove()})})}};f.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:recent-repositories-menu-resources', location = '/static/bitbucket/internal/layout/base/menu/repositories/recent.soy' */
// This file was automatically generated from recent.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.layout.menu.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.layout == 'undefined') { bitbucket.internal.layout = {}; }
if (typeof bitbucket.internal.layout.menu == 'undefined') { bitbucket.internal.layout.menu = {}; }


bitbucket.internal.layout.menu.loadingRecentReposMenuItem = function(opt_data, opt_ignored) {
  return '<li><span class="loading-recent-repos">' + soy.$$escapeHtml('Loading...') + '</span></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.layout.menu.loadingRecentReposMenuItem.soyTemplateName = 'bitbucket.internal.layout.menu.loadingRecentReposMenuItem';
}


bitbucket.internal.layout.menu.noRecentReposMenuItem = function(opt_data, opt_ignored) {
  return '<li><span class="no-recent-repos">' + soy.$$escapeHtml('No recently viewed repositories') + '</span></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.layout.menu.noRecentReposMenuItem.soyTemplateName = 'bitbucket.internal.layout.menu.noRecentReposMenuItem';
}


bitbucket.internal.layout.menu.errorLoadingRecentReposMenuItem = function(opt_data, opt_ignored) {
  return '<li><span>' + soy.$$escapeHtml('An error occurred') + '</span></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.layout.menu.errorLoadingRecentReposMenuItem.soyTemplateName = 'bitbucket.internal.layout.menu.errorLoadingRecentReposMenuItem';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:reselect', location = '/static/lib/redux/reselect.js' */
(function(e,f){if("function"===typeof define&&define.amd)define("Reselect",["exports"],f);else if("undefined"!==typeof exports)f(exports);else{var h={};f(h);e.Reselect=h}})(this,function(e){function f(a,c){return a===c}function h(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f,k=null,d=null;return function(){a:{var b=k;var m=arguments;if(null===b||null===m||b.length!==m.length)b=!1;else{for(var n=b.length,g=0;g<n;g++)if(!c(b[g],m[g])){b=!1;break a}b=!0}}b||(d=a.apply(null,arguments));
k=arguments;return d}}function p(a){a=Array.isArray(a[0])?a[0]:a;if(!a.every(function(a){return"function"===typeof a}))throw a=a.map(function(a){return typeof a}).join(", "),Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+a+"]"));return a}function l(a){for(var c=arguments.length,k=Array(1<c?c-1:0),d=1;d<c;d++)k[d-1]=arguments[d];return function(){for(var b=arguments.length,d=Array(b),c=0;c<b;c++)d[c]=arguments[c];var g=0,e=d.pop(),
f=p(d),l=a.apply(void 0,[function(){g++;return e.apply(null,arguments)}].concat(k));b=h(function(){for(var a=[],b=f.length,d=0;d<b;d++)a.push(f[d].apply(null,arguments));return l.apply(null,a)});b.resultFunc=e;b.recomputations=function(){return g};b.resetRecomputations=function(){return g=0};return b}}e.__esModule=!0;e.defaultMemoize=h;e.createSelectorCreator=l;e.createStructuredSelector=function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:q;if("object"!==typeof a)throw Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+
typeof a);var e=Object.keys(a);return c(e.map(function(d){return a[d]}),function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(a,b,c){a[e[c]]=b;return a},{})})};var q=e.createSelector=l(h)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:reselect', location = '/static/lib/redux/reselect-AMD.js' */
define("Reselect",function(){return window.Reselect});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/actions.js' */
define("bitbucket/internal/feature/alerts/actions",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});a.ADD_ALERT="alerts/ADD_ALERT";a.REMOVE_ALERT="alerts/REMOVE_ALERT";a.DIALOG_OPEN="alerts/DIALOG_OPEN";a.DIALOG_CLOSED="alerts/DIALOG_CLOSED"});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/components/alerts-list.js' */
define("bitbucket/internal/feature/alerts/components/alerts-list",["exports","classnames","prop-types","react","../constants"],function(c,a,h,e,k){Object.defineProperty(c,"__esModule",{value:!0});c.AlertsList=c.Alert=void 0;var m=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(h);var d=babelHelpers.interopRequireDefault(e),g=c.Alert=function(b){var a=b.alertKey,c=b.anchorCallback,f=b.anchorText,e=b.anchorLink,g=b.closeable,l=b.closeCallback,h=b.description,k=b.title,n=b.type,
p=b.onRemove;b=function(a){e||a.preventDefault();c&&c()};f=f?d.default.createElement("p",null,e?d.default.createElement("a",{href:e,onClick:b},f):d.default.createElement("button",{className:"aui-button aui-button-link",onClick:c},f)):null;b=g?d.default.createElement("span",{className:"aui-icon icon-close",role:"button",tabIndex:"0",onClick:function(b){b.preventDefault();l&&l();p(a)}}):null;return d.default.createElement("li",{className:(0,m.default)("aui-message",n,{closeable:g})},d.default.createElement("p",
null,d.default.createElement("strong",null,k)," ",h),f,b)};e={alertKey:a.default.string.isRequired,type:a.default.oneOf(k.TYPE).isRequired,title:a.default.string.isRequired,description:a.default.string,anchorText:a.default.string,anchorCallback:a.default.func,anchorLink:a.default.string,closeable:a.default.bool,closeCallback:a.default.func};g.propTypes=babelHelpers.extends({},e,{onRemove:a.default.func.isRequired});(c.AlertsList=function(a){var b=a.alerts,c=a.onRemove;return d.default.createElement("div",
{className:"alerts-list-container"},d.default.createElement("h3",null,a.title),d.default.createElement("ul",{className:"alerts-list"},b.map(function(a){return d.default.createElement(g,babelHelpers.extends({key:a.alertKey},a,{onRemove:c}))})))}).propTypes={alerts:a.default.arrayOf(a.default.shape(e)).isRequired,title:a.default.string.isRequired,onRemove:a.default.func.isRequired}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/components/alerts-empty.js' */
define("bitbucket/internal/feature/alerts/components/alerts-empty",["exports","react","aui"],function(a,c,d){Object.defineProperty(a,"__esModule",{value:!0});a.AlertsEmpty=void 0;var b=babelHelpers.interopRequireDefault(c),e=babelHelpers.interopRequireDefault(d);a.AlertsEmpty=function(){return b.default.createElement("div",{className:"alerts-empty"},b.default.createElement("div",{className:"empty-img"}),b.default.createElement("p",null,"Everything looks good. Well let you know here if theres anything you should know about."))}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/reducers.js' */
define("bitbucket/internal/feature/alerts/reducers",["module","exports","lodash","bitbucket/internal/bbui/utils/create-reducer","./actions"],function(g,d,h,e,c){function f(b,a){return babelHelpers.extends({},b,{dialog:babelHelpers.extends({},b.dialog,{open:a})})}Object.defineProperty(d,"__esModule",{value:!0});e=babelHelpers.interopRequireDefault(e);var a;d.default=(0,e.default)({alerts:{},dialog:{open:!1}},(a={},babelHelpers.defineProperty(a,c.ADD_ALERT,function(b,a){return babelHelpers.extends({},
b,{alerts:babelHelpers.extends({},b.alerts,babelHelpers.defineProperty({},a.payload.alertKey,babelHelpers.extends({},a.payload)))})}),babelHelpers.defineProperty(a,c.REMOVE_ALERT,function(b,a){return babelHelpers.extends({},b,{alerts:(0,h.omit)(b.alerts,a.payload)})}),babelHelpers.defineProperty(a,c.DIALOG_CLOSED,function(a){return f(a,!1)}),babelHelpers.defineProperty(a,c.DIALOG_OPEN,function(a){return f(a,!0)}),a));g.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/alerts-trigger.js' */
define("bitbucket/internal/feature/alerts/alerts-trigger","module exports aui classnames lodash ./selectors".split(" "),function(h,b,d,k,l,e){Object.defineProperty(b,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(d),f=babelHelpers.interopRequireDefault(k),g=function(c){return(0,l.get)(c,"0.type")};d=function(){function c(a,b){babelHelpers.classCallCheck(this,c);this.$el=a;this.stateStore=b;this.stateStore.subscribe(this.maybeUpdate.bind(this));this.render(this.getAlerts())}babelHelpers.createClass(c,
[{key:"getAlerts",value:function(){return(0,e.alertsBySeverity)(this.stateStore.getState())}},{key:"maybeUpdate",value:function(){var a=this.getAlerts();this.alertCount===a.length&&this.mostSevere===g(a)||this.render(a)}},{key:"render",value:function(a){this.alertCount=a.length;this.mostSevere=g(a);if(!a||0===a.length)return this.$el.attr("class",(0,f.default)("alerts-menu",{hidden:!(0,e.dialogOpen)(this.stateStore.getState())})),this.$el.html(bitbucket.internal.feature.alerts.emptyTrigger());a="Alerts";
this.$el.attr("class",(0,f.default)("alerts-menu",this.mostSevere));this.$el.html(bitbucket.internal.feature.alerts.trigger({count:this.alertCount,mostSevereType:this.mostSevere,title:a}))}}]);return c}();b.default=d;h.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/action-creators.js' */
define("bitbucket/internal/feature/alerts/action-creators",["exports","./actions"],function(a,b){Object.defineProperty(a,"__esModule",{value:!0});a.openDialog=a.closeDialog=a.remove=a.add=void 0;a.add=function(a){return{type:b.ADD_ALERT,payload:babelHelpers.extends({alertKey:a.title.toLowerCase().split(" ").join("")+Date.now()},a)}};a.remove=function(a){return{type:b.REMOVE_ALERT,payload:a}};a.closeDialog=function(){return{type:b.DIALOG_CLOSED}};a.openDialog=function(){return{type:b.DIALOG_OPEN}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/alerts-init.js' */
function asyncLoadDialog(){return require("bitbucket/internal/feature/alerts/alerts-dialog").onReady}jQuery(function(){var a=jQuery("#alerts-trigger");if(a.length)require("bitbucket/internal/feature/alerts/alerts").onReady(a,asyncLoadDialog)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/containers/alerts.js' */
define("bitbucket/internal/feature/alerts/containers/alerts","exports react aui react-redux ../action-creators ../components/alerts-empty ../components/alerts-list ../selectors".split(" "),function(a,b,e,f,g,h,k,l){Object.defineProperty(a,"__esModule",{value:!0});a.Alerts=void 0;var d=babelHelpers.interopRequireDefault(b),m=babelHelpers.interopRequireDefault(e);b=a.Alerts=function(c){var a=c.alerts;c=c.remove;if(!a||0===a.length)return d.default.createElement(h.AlertsEmpty,null);var b="Alerts";
return d.default.createElement("div",{id:"bitbucket-alerts",className:"bitbucket-alerts"},d.default.createElement(k.AlertsList,{title:b,alerts:a,onRemove:c}))};a.default=(0,f.connect)(function(a){return{alerts:(0,l.alertsBySeverity)(a)}},{remove:g.remove})(b)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/alerts-dialog.js' */
define("bitbucket/internal/feature/alerts/alerts-dialog",["exports","react","react-dom","react-redux","./containers/alerts"],function(a,b,d,e,f){Object.defineProperty(a,"__esModule",{value:!0});a.onReady=function(a,b){g.default.render(c.default.createElement(e.Provider,{store:b},c.default.createElement(h.default,null)),a)};var c=babelHelpers.interopRequireDefault(b),g=babelHelpers.interopRequireDefault(d),h=babelHelpers.interopRequireDefault(f)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/selectors.js' */
define("bitbucket/internal/feature/alerts/selectors",["exports","lodash","Reselect","./constants"],function(b,d,c,e){function f(a,b){var c=e.TYPE.indexOf(a.type),d=e.TYPE.indexOf(b.type);return c-d||a.title.localeCompare(b.title)}Object.defineProperty(b,"__esModule",{value:!0});b.dialogOpen=b.alertsBySeverity=void 0;b.alertsBySeverity=(0,c.createSelector)([function(a){return a.ui.alerts}],function(a){return(0,d.values)(a).sort(f)});b.dialogOpen=(0,c.createSelector)([function(a){return a.ui.dialog}],
function(a){return a.open})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/alerts.js' */
define("bitbucket/internal/feature/alerts/alerts","exports aui jquery lodash bitbucket/util/events bitbucket/internal/feature/alerts/reducers bitbucket/internal/util/redux ./action-creators ./alerts-trigger".split(" "),function(c,e,g,h,k,l,m,f,n){Object.defineProperty(c,"__esModule",{value:!0});c.onReady=function(a,b){new p.default(a,d);q.default.InlineDialog(a,"alerts-content",r(b),{width:400,closeOnTriggerClick:!0,hideCallback:function(){return d.dispatch((0,f.closeDialog)())}})};c.add=function(a){return d.dispatch((0,
f.add)(a)).payload.alertKey};var q=babelHelpers.interopRequireDefault(e),t=babelHelpers.interopRequireDefault(g),u=babelHelpers.interopRequireDefault(k);c=babelHelpers.interopRequireDefault(l);var p=babelHelpers.interopRequireDefault(n),d=(0,m.customCreateStore)({ui:c.default}),v=(0,h.once)(function(a){var b=(0,t.default)('\x3cdiv class\x3d"loading-resource-spinner"\x3e\x3c/div\x3e');a.empty().append(b);b.show().spin("medium");return WRM.require("wrc!bitbucket.alerts").then(function(){a.empty()})}),
r=function(a){return function(b,c,e){v(b).done(function(){b.html()||a()(b[0],d)});d.dispatch((0,f.openDialog)());u.default.trigger("bitbucket.internal.ui.alerts.dialog.opened");e()}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/alerts-trigger.soy' */
// This file was automatically generated from alerts-trigger.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.alerts.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.alerts == 'undefined') { bitbucket.internal.feature.alerts = {}; }


bitbucket.internal.feature.alerts.emptyTrigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-icon-success"></span>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.alerts.emptyTrigger.soyTemplateName = 'bitbucket.internal.feature.alerts.emptyTrigger';
}


bitbucket.internal.feature.alerts.trigger = function(opt_data, opt_ignored) {
  return '<div><span class="aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(opt_data.mostSevereType) + '">' + soy.$$escapeHtml(opt_data.title) + '</span><span class="alerts-count">' + soy.$$escapeHtml(opt_data.count) + '</span></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.alerts.trigger.soyTemplateName = 'bitbucket.internal.feature.alerts.trigger';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/constants.js' */
define("bitbucket/internal/feature/alerts/constants",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});a.TYPE=["error","warning","info","success"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:inbox-dialog', location = '/static/bitbucket/internal/feature/inbox/inbox.js' */
define("bitbucket/internal/feature/inbox/inbox","module exports aui jquery lodash bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/server bitbucket/util/state".split(" "),function(p,f,q,r,t,u,v,w,x){function y(a){require("bitbucket/internal/feature/inbox/inbox-dialog",null).onReady(a[0])}Object.defineProperty(f,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(q),d=babelHelpers.interopRequireDefault(r),h=babelHelpers.interopRequireDefault(t),b=babelHelpers.interopRequireDefault(u),
z=babelHelpers.interopRequireDefault(v),A=babelHelpers.interopRequireDefault(w),k=babelHelpers.interopRequireDefault(x),g,c,l=function(a){a.keyCode===d.default.ui.keyCode.ESCAPE&&(g.hide(),a.preventDefault())},m=function(){g.hide()},C=function(a,c,b){b();(0,d.default)(document).on("keyup",l);e.default.dialog2.on("show",m);(0,d.default)(".aui-dropdown2-active").trigger("aui-button-invoke");B(a,h.default.partial(y,a))},B=h.default.once(function(a,c){var b=(0,d.default)('\x3cdiv class\x3d"loading-resource-spinner"\x3e\x3c/div\x3e');
a.empty().append(b);b.show().spin("medium");WRM.require("wrc!bitbucket.pullRequest.inbox").done(function(){b.spinStop().remove();c()}).always(function(){b.spinStop().remove()})}),D=function(){(0,d.default)(document).off("keyup",l);e.default.dialog2.off("show",m);(0,d.default)(document.activeElement).closest("#inline-dialog-inbox-pull-requests-content").length&&document.activeElement.blur()},n=function(){A.default.rest({url:z.default.rest().addPathComponents("inbox","pull-requests","count").build(),
type:"GET",statusCode:{"*":!1}}).done(function(a){c.attr("aria-label",e.default.format("View your {0} unapproved pull {0,choice,0#requests|1#request|1\u003crequests}",a.count));if(0<a.count){var b=(0,d.default)(aui.badges.badge({text:a.count}));c.html(bitbucket.internal.inbox.triggerIcon({isEmpty:!1})).append(b);setTimeout(function(){b.addClass("visible")},0)}else c.find(".aui-badge").removeClass("visible"),setTimeout(function(){c.html(bitbucket.internal.inbox.triggerIcon({isEmpty:!0}))},500);c.attr("data-countLoaded",!0)})};
f.default={onReady:function(){c=(0,d.default)("#inbox-trigger");c.attr("aria-label","View your unapproved pull requests");if(c.length&&k.default.getCurrentUser()){c.html(bitbucket.internal.inbox.triggerIcon({isEmpty:!0}));g=e.default.InlineDialog(c,"inbox-pull-requests-content",C,{width:800,closeOnTriggerClick:!0,hideCallback:D});n();var a=function(a){a.user.name===k.default.getCurrentUser().name&&n()};b.default.on("bitbucket.internal.widget.approve-button.added",a);b.default.on("bitbucket.internal.widget.approve-button.removed",
a);b.default.on("bitbucket.internal.widget.needs-work.added",a);b.default.on("bitbucket.internal.widget.needs-work.removed",a);b.default.on("bitbucket.internal.feature.pullRequest.self.added",a);b.default.on("bitbucket.internal.feature.pullRequest.self.removed",a)}}};p.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:inbox-dialog', location = '/static/bitbucket/internal/feature/inbox/inbox-dialog.js' */
define("bitbucket/internal/feature/inbox/inbox-dialog","exports aui jquery lodash react react-dom bitbucket/util/navbuilder bitbucket/util/server bitbucket/util/state bitbucket/internal/bbui/inbox/inbox bitbucket/internal/enums".split(" "),function(f,r,t,u,g,v,w,x,y,h,z){Object.defineProperty(f,"__esModule",{value:!0});f.onReady=function(e){var b=A.default.getCurrentUser();e&&b&&(k=e,l.default.render(m.default.createElement(B,{currentUser:b,pageSize:h.DEFAULT_PAGE_SIZE}),e))};var n=babelHelpers.interopRequireDefault(r),
p=babelHelpers.interopRequireDefault(t),m=babelHelpers.interopRequireDefault(g),l=babelHelpers.interopRequireDefault(v),C=babelHelpers.interopRequireDefault(w),D=babelHelpers.interopRequireDefault(x),A=babelHelpers.interopRequireDefault(y),E=babelHelpers.interopRequireDefault(h),q=babelHelpers.interopRequireDefault(z),k=void 0,B=function(e){function b(F){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,F));a.onMorePrsRequested=
function(c){a.state[c].loading||(a.setState(babelHelpers.defineProperty({},c,babelHelpers.extends({},a.state[c],{loading:!0}))),D.default.rest({url:a.getInboxResourceUrlBuilder(c).build(),type:"GET",statusCode:{0:a.handleError,401:a.handleError,500:a.handleError,502:a.handleError}}).done(function(d){a.setState(babelHelpers.defineProperty({},c,babelHelpers.extends({},a.state[c],{pullRequests:a.state[c].pullRequests.concat(d.values),loading:!1,allFetched:d.isLastPage,nextPageStart:(0,u.get)(d,"nextPageStart",
0)})))}))};a.getInboxResourceUrlBuilder=function(c){var d=a.mapTablePropToRole[c];return C.default.rest().addPathComponents("inbox","pull-requests").withParams({role:d,start:a.state[c].nextPageStart,limit:a.props.pageSize,avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"medium"}),withAttributes:!0,state:"OPEN",order:"oldest"})};a.mapTablePropToRole={created:q.default.ParticipantRole.AUTHOR,reviewing:q.default.ParticipantRole.REVIEWER};a.state={created:{pullRequests:[],allFetched:!1,loading:!1,
nextPageStart:0,onMoreItemsRequested:function(){return a.onMorePrsRequested("created")}},reviewing:{pullRequests:[],allFetched:!1,loading:!1,nextPageStart:0,onMoreItemsRequested:function(){return a.onMorePrsRequested("reviewing")}}};return a}babelHelpers.inherits(b,e);babelHelpers.createClass(b,[{key:"handleError",value:function(b,a,c,d){b={};d&&(b=d.errors?d.errors[0]:d);l.default.unmountComponentAtNode(k);(0,p.default)("#inbox .aui-inline-dialog-contents").html((0,p.default)(bitbucket.internal.inbox.error({title:"Could not retrieve inbox",
text:b.message||"An unknown error occurred"})));return!1}},{key:"render",value:function(){var b=this.state,a=this.props;return m.default.createElement(E.default,{created:b.created,currentUser:a.currentUser,pageSize:a.pageSize,reviewing:b.reviewing})}}]);return b}(g.Component)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:inbox-dialog', location = '/static/bitbucket/internal/feature/inbox/inbox.soy' */
// This file was automatically generated from inbox.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.inbox.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.inbox == 'undefined') { bitbucket.internal.inbox = {}; }


bitbucket.internal.inbox.triggerIcon = function(opt_data, opt_ignored) {
  return '<span class=\'aui-icon aui-icon-small ' + ((opt_data.isEmpty) ? 'aui-iconfont-workbox-empty' : 'aui-iconfont-workbox') + '\'></span>';
};
if (goog.DEBUG) {
  bitbucket.internal.inbox.triggerIcon.soyTemplateName = 'bitbucket.internal.inbox.triggerIcon';
}


bitbucket.internal.inbox.error = function(opt_data, opt_ignored) {
  return '<div class="focus-message communication-error"><div class="focus-message-icon aui-icon icon-skull"></div><h2>' + soy.$$escapeHtml(opt_data.title) + '</h2><p>' + soy.$$escapeHtml(opt_data.text) + '</p></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.inbox.error.soyTemplateName = 'bitbucket.internal.inbox.error';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:inbox-dialog', location = '/static/bitbucket/internal/feature/inbox/inbox-init.js' */
jQuery(document).ready(function(){require("bitbucket/internal/feature/inbox/inbox").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-preview', location = '/static/bitbucket/internal/widget/commit-preview/commit-preview.js' */
require(["aui","jquery","bitbucket/util/navbuilder","bitbucket/internal/feature/commit/request-commit"],function(e,b,k,l){var f=function(a){var b=a.substring(0,a.substring(750).search(/\s/)+750);return b.length<a.length?b+"\u2026":b},g=function(a){"in"===a.data("tipsy").hoverState&&(a.tipsy("hide"),a.tipsy("show"))};b(function(){b("a.commitid:not(.no-preview), .commit-preview-trigger").tipsy({live:!0,opacity:.98,gravity:function(){return b(this).attr("data-commit-preview-gravity")||b.fn.tipsy.autoNS.call(this)+
b.fn.tipsy.autoWE.call(this)},className:"commit-preview-tipsy",title:function(){var a=b(this),m=a.attr("data-commitid")||a.text(),c=a.attr("data-commit-message"),d=a.attr("data-commit-preview-prefix"),h="Loading...";if(c)return d?d+"\n\n"+f(c):f(c);c=k.parse(a.attr("href")).path().match(/.*?\/(projects|users)\/([^\/]+)\/repos\/([^\/]+)\//);l({commitId:m,project:c&&("users"===c[1]?"~":"")+c[2],repo:c&&c[3],statusCode:{404:!1,"*":!1}}).then(function(b){a.attr("data-commit-message",
b.message?f(b.message):"No commit message");g(a)},function(){a.attr("data-commit-message","Commit request failed");g(a)});return d?d+"\n\n"+h:h}})})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:upgrade', location = '/static/bitbucket/internal/util/upgrade.js' */
define("bitbucket/internal/util/upgrade",["exports","aui","bitbucket/util/server"],function(a,b,c){Object.defineProperty(a,"__esModule",{value:!0});a.pluginsDisabledAcknowledge=void 0;var d=babelHelpers.interopRequireDefault(b),e=babelHelpers.interopRequireDefault(c);a.pluginsDisabledAcknowledge=function(){var a=d.default.contextPath()+"/mvc/maintenance/upgrade-notification";e.default.rest({url:a,type:"DELETE"})}});;
;
/* module-key = 'com.stiltsoft.stash.graphs:graphs-alert-resources', location = 'js/common/alerts.js' */
define('graphs/alerts',
    ['lodash', 'bitbucket/internal/util/ajax', 'bitbucket/util/navbuilder', 'bitbucket/internal/util/client-storage', 'bitbucket/internal/model/page-state', 'bitbucket/internal/feature/alerts/alerts', 'react'],
    function (_, ajax, nav, clientStorage, pageState, alerts, React) {

        'use strict';

        var PROPERTY_KEY = 'awesome-graphs-failed-index-repositories';

        function onReady() {
            var user = pageState.getCurrentUser();
            if (!user || !user.getIsAdmin()) return;

            var url = nav.rest('awesome-graphs').addPathComponents('index', 'failed-repo-ids').build();
            ajax.rest({url: url, statusCode: {'*': false}}).done(function (ids) {
                var viewed = clientStorage.getItem(PROPERTY_KEY) || [],
                    actual = _.difference(ids, viewed);

                if (actual.length) {
                    var supportZipUrl = nav.pluginServlets().addPathComponents('troubleshooting', 'view').withFragment('support-zip').build(),
                        supportZip = React.createElement('a', {href: supportZipUrl}, 'create a support zip'),
                        marketplace = React.createElement('a', {href: 'https://marketplace.atlassian.com/apps/1210934/awesome-graphs-for-bitbucket-server?hosting=server&tab=overview&from=alert-indexing-failed'}, 'Awesome Graphs'),
                        description = React.createElement('span', null, 'Please ', supportZip, ' and provide this file to the ', marketplace, ' support.'),
                        title = 'Repository indexing failed for ' + actual.length + ' repositor' + (actual.length === 1 ? 'y' : 'ies');

                    alerts.add({
                        type: 'warning',
                        title: title,
                        description: description,
                        anchorText: 'Get help',
                        anchorLink: 'https://stiltsoft.customercase.com/forums/support-requests/ideas/create?category=Awesome%20Graphs%20for%20Bitbucket&summary=' + encodeURIComponent(title),
                        closeable: true,
                        closeCallback: function () {
                            clientStorage.setItem(PROPERTY_KEY, ids, {noCleanup: true}, clientStorage.LOCAL);
                        }
                    });
                }
            }).fail(AJS.log);
        }

        return {
            onReady: onReady
        };
    });

AJS.$(document).ready(require('graphs/alerts').onReady);;
//# sourceMappingURL=/download/contextbatch/js/bitbucket.page.pullRequest.view,bitbucket.layout.pullRequest,bitbucket.feature.files.fileHandlers,bitbucket.layout.repository,atl.general,bitbucket.layout.base,bitbucket.layout.entity,-_super/batch.js.map?_statichash=68202d1f9b52d0858e98b007d20172a6-T%2F-1609296852%2Fcad3c23%2F10%2F1529c22c79119e4f93ea623313eadaa8&hasConnectAddons=true&locale=en-US&nps-acknowledged=true&nps-not-opted-out=true