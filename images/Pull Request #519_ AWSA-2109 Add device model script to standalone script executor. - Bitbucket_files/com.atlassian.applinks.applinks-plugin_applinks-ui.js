;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-ui', location = 'js/confirm-dialog.js' */
AJS.$(document).bind(AppLinks.Event.PREREADY,function(){AppLinks=AJS.$.extend(window.AppLinks||{},{confirmDialog:function(f,e,c,d){if(!d){d=function(){}}var b=new AJS.Dialog({width:450,height:180,id:"confirm-dialog",onCancel:d});b.addHeader(f);b.addPanel(f);b.getCurrentPanel().html(e);var a=function(g){b.remove();g.call(b)};b.addButton(AJS.params.statusDialogAddButtonLabel||"Confirm",function(){a(c)},"confirm");b.addButton(AJS.params.statusDialogCancelButtonLabel||"Cancel",function(){a(d)},"cancel");b.show();b.popup.element.addClass("aui-dialog-content-ready")}})});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-ui', location = 'js/delete-link-dialog.js' */
AJS.$(document).bind(AppLinks.Event.READY,function(){var c=AJS.$,d,a,h,b,g=function(){c(".delete-applink-loading").hide();e.enableSubmitBtn()},i={showButtonId:"delete-application-link",cancelLabel:"Cancel",oncancel:function(){var j=e.dialog.popup.element;j.find("h2").empty()},submitLabel:"Confirm",width:420,height:330,id:"delete-application-link-dialog",aftershow:function(){f.find(".applinks-error").remove();var k=e.dialog.popup.element;var j=c("<a/>",{"class":"ual-help-link dialog-help-link help-link",href:AppLinks.Docs.getDocHref(d.helpKey,null),target:"_blank",title:"Help","data-help-link-key":d.helpKey}).append(c("<span/>",{"class":"aui-icon aui-icon-small aui-iconfont-help",text:"Help"}));k.find("h2").append(c("<span>").text(d.title)).append(j);var m=d.confirmMessage;c("#delete-applink-text").html(m);if(a==false){var l=function(p){var q=p.applinksVersion&&true;if(q){var r=function(s){a=true;h=true;b=s;g()};var n=function(s){a=false;h=false;g()};var o=function(){a=true;h=false;g()};AppLinks.checkPermission(d.doPermissionCheck,o,r,n,AppLinks.UI.displayValidationError("delete-applink-error",f))}else{g()}};c(".delete-applink-loading").show();e.disableSubmitBtn(false);AppLinks.SPI.getManifestFor(d.applicationId,l,AppLinks.UI.displayValidationError("delete-applink-error",f))}},onnext:function(j){c(".delete-reciprocal-applink-form").hide();c(".no-reciprocal-applink-form").hide();c(".authenticate-applink-form").hide();var k=function(){c(".authenticate-applink-form").hide();c(".delete-reciprocal-applink-form").show();c("#delete-reciprocal-applink-text").text(d.reciprocalLinkMessage);c(".yes-delete-reciprocal-link").text(d.deleteYesMessage);c(".no-delete-reciprocal-link").text(d.deleteNoMessage);c("#yes-delete-reciprocal-link").attr("checked",true);c(".delete-reciprocal-applink-form").show()};if(h){c(".authenticate-applink-form").show();c(".authenticate-message").text(d.authenticationMessage);AppLinks.SPI.addAuthenticationTrigger("#authenticate-link",b,{before:function(){j.hide()},onSuccess:function(){j.show();var m=function(){k()};var l=function(n){c(".authenticate-applink-form").hide();c(".no-reciprocal-applink-form").show();if(!n){c(".no-link-message").text(d.noReciprocalLinkMessage)}else{c(".no-link-message").text(d.failedToDetectReciprocalLinkMessage+" "+n)}};AppLinks.checkPermission(d.doPermissionCheck,m,h,l,AppLinks.UI.displayValidationError("delete-reciprocal-applink-error",f))},onFailure:function(){j.show();c(".authenticate-applink-form").hide();c(".no-reciprocal-applink-form").show();c(".no-link-message").text(d.authenticationFailedMessage)}})}else{k()}},onsubmit:function(k){var n=function(){e.enableSubmitBtn();if(d.callback()){k.hide()}};if(e.dialog.curpage==1){var m=false;var o=c("#yes-delete-reciprocal-link");var l=o.is(":visible");var j=o.is(":checked");if(l&&j){m=true}e.disableSubmitBtn();d.doDelete(m,n,AppLinks.UI.displayValidationError("delete-applink-error",f,function(){e.enableSubmitBtn()}))}else{if(a){e.nextPage()}else{e.disableSubmitBtn();d.doDelete(false,n,AppLinks.UI.displayValidationError("delete-applink-error",f,function(){e.enableSubmitBtn()}))}}return false}};var e=c("#delete-link-dialog").wizard(i);var f=c(e.dialog.popup.element);AppLinks.showDeleteLinkDialog=function(j){a=false;h=false;d=j;e.show()};AppLinks.bindDeleteLink=function(k){var j=k.data.application;k.preventDefault();AppLinks.UI.hideInfoBox();AppLinks.SPI.getApplicationLinkInfo(j.id,function(l){var s=c("<div>");s.append(c("<div>").text(AJS.format("Confirm that you want to delete the Application Link to \u0027\u0027{0}\u0027\u0027 ({1}).",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId))));if(l.configuredAuthProviders.length>0){var n=AppLinks.UI.prettyJoin(l.configuredAuthProviders,function(t){return AppLinks.I18n.getAuthenticationTypeName(t)});s.append(c("<div>").text(AJS.format("The authentication information stored for {0} will be deleted.",n)));if(l.numConfiguredEntities>0){var r;if(l.numConfiguredEntities>1){r="applinks.dialog.delete.entity.links.plural"}else{r="applinks.dialog.delete.entity.links.singular"}var o=AppLinks.UI.prettyJoin(l.hostEntityTypes,function(t){if(l.numConfiguredEntities>1){return AppLinks.I18n.getPluralizedEntityTypeName(t)}else{return AppLinks.I18n.getEntityTypeName(t)}});var p=AppLinks.UI.prettyJoin(l.remoteEntityTypes,function(t){return AppLinks.I18n.getPluralizedEntityTypeName(t)});var m=AJS.I18n.getText(r,l.numConfiguredEntities,o,p,j.name);s.append(c("<div>").text(m))}}var q={title:AJS.format("Delete Link to \u0027\u0027{0}\u0027\u0027",j.name),applicationId:j.id,confirmMessage:s,reciprocalLinkMessage:AJS.format("{0} ({1}) has a link to this Application. Do you want to delete this link as well?",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId)),noReciprocalLinkMessage:AJS.format("{0} ({1}) doesn\u0027\u0027t have a link to this application. Click confirm to delete only the link from this application to {0} ({1}).",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId)),deleteYesMessage:AJS.format("Yes, delete the link from {0} ({1}) to this application.",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId)),deleteNoMessage:AJS.format("No, do not delete the link from {0} ({1}) to this application.",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId)),authenticationMessage:AJS.format("We can check if {0} ({1}) has a link to this application and delete this link as well. To do this you must authenticate. Click confirm to delete only the local link to {0} ({1}).",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId)),noConnectionMessage:"There was a problem when contacting the remote application.",authenticationFailedMessage:AJS.format("Unable to check if {0} ({1}) has a link to this application, because the authorization failed. Click confirm to delete only the local Application Link to {0} ({1})",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId)),failedToDetectReciprocalLinkMessage:AJS.format("A problem occurred when trying to check if a link from {0} ({1}) to this application exists.",j.name,AppLinks.I18n.getApplicationTypeName(j.typeId)),helpKey:"applinks.docs.delete.application.link",doPermissionCheck:function(u,t){AppLinks.SPI.canDeleteAppLink(j.id,u,t)},doDelete:function(t,v,u){AppLinks.SPI.deleteLink(j,t,v,u)},callback:function(){AppLinks.UI.listApplicationLinks(j.name,"delete");return true}};AppLinks.showDeleteLinkDialog(q)})}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-ui', location = 'js/permission-check-util.js' */
AJS.$(document).bind(AppLinks.Event.PREREADY,function(){(function(a){AppLinks=AJS.$.extend(window.AppLinks||{},{checkPermission:function(d,c,f,b,g){var e={noPermission:function(){b("You don\u0027t have sufficient permissions to perform this operation.")},missing:b,noAuthenticationConfigured:b,noAuthentication:b,authenticationFailed:b,credentialsRequired:f,noConnection:function(){b("There was a problem when contacting the remote application.")},allowed:c,unrecognisedCode:function(h){b(AJS.format("An error has occurred, unexpected permission check response: {0}",h))}};d(AppLinks.SPI.processPermissionCode(e),g)}})})(AJS.$)});;
//# sourceMappingURL=/download/batch/com.atlassian.applinks.applinks-plugin:applinks-ui/com.atlassian.applinks.applinks-plugin:applinks-ui.js.map?_statichash=3674932573c24a7eac898238a1e90181-CDN%2F-1609296852%2Fcad3c23%2F10%2F5.4.2&locale=en-US